<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">7697</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-06T08:00:21+00:00</created-at>
  <creator-id type="integer">135851</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6380</number>
  <permalink>configcache_classes-and-actionmailerbasedefault_url_options</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>config.cache_classes and ActionMailer::Base.default_url_options</title>
  <updated-at type="datetime">2011-03-06T16:28:39+00:00</updated-at>
  <user-id type="integer">7697</user-id>
  <version type="integer">5</version>
  <user-name>Andrew White</user-name>
  <creator-name>sewid</creator-name>
  <assigned-user-name>Andrew White</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6380</url>
  <priority-name>Low</priority-name>
  <original-body>I have this is my test.rb:

@@@
config.cache_classes = true
config.action_mailer.default_url_options = {
  :host =&gt; 'localhost:3000',
  :only_path =&gt; false
}
@@@

When running tests, I get:

/Users/sebastian/.rvm/gems/ruby-1.9.2-p136/gems/actionmailer-3.0.3/lib/action_mailer/base.rb:763:in `deprecated_url_options': You can no longer call ActionMailer::Base.default_url_options directly. You need to set config.action_mailer.default_url_options. If you are using ActionMailer standalone, you need to include the routing url_helpers directly.


This problem does not occur, when using:
@@@
config.cache_classes = false
@@@
Regards,
sewid</original-body>
  <latest-body>I have this is my test.rb:

@@@
config.cache_classes = true
config.action_mailer.default_url_options = {
  :host =&gt; 'localhost:3000',
  :only_path =&gt; false
}
@@@

When running tests, I get:

/Users/sebastian/.rvm/gems/ruby-1.9.2-p136/gems/actionmailer-3.0.3/lib/action_mailer/base.rb:763:in `deprecated_url_options': You can no longer call ActionMailer::Base.default_url_options directly. You need to set config.action_mailer.default_url_options. If you are using ActionMailer standalone, you need to include the routing url_helpers directly.


This problem does not occur, when using:
@@@
config.cache_classes = false
@@@
Regards,
sewid</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I have this is my test.rb:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;config.cache_classes = true
config.action_mailer.default_url_options = {
  :host =&amp;gt; 'localhost:3000',
  :only_path =&amp;gt; false
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;When running tests, I get:&lt;/p&gt;
&lt;p&gt;
/Users/sebastian/.rvm/gems/ruby-1.9.2-p136/gems/actionmailer-3.0.3/lib/action_mailer/base.rb:763:in
&lt;code&gt;deprecated_url_options': You can no longer call
ActionMailer::Base.default_url_options directly. You need to set
config.action_mailer.default_url_options. If you are using
ActionMailer standalone, you need to include the routing
url_helpers directly.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This problem does not occur, when using:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;config.cache_classes = false&lt;/code&gt;
&lt;/pre&gt;
Regards,&lt;br&gt;
sewid&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have this is my test.rb:

@@@
config.cache_classes = true
config.action_mailer.default_url_options = {
  :host =&gt; 'localhost:3000',
  :only_path =&gt; false
}
@@@

When running tests, I get:

/Users/sebastian/.rvm/gems/ruby-1.9.2-p136/gems/actionmailer-3.0.3/lib/action_mailer/base.rb:763:in `deprecated_url_options': You can no longer call ActionMailer::Base.default_url_options directly. You need to set config.action_mailer.default_url_options. If you are using ActionMailer standalone, you need to include the routing url_helpers directly.


This problem does not occur, when using:
@@@
config.cache_classes = false
@@@
Regards,
sewid</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have this is my test.rb:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;config.cache_classes = true
config.action_mailer.default_url_options = {
  :host =&amp;gt; 'localhost:3000',
  :only_path =&amp;gt; false
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;When running tests, I get:&lt;/p&gt;
&lt;p&gt;
/Users/sebastian/.rvm/gems/ruby-1.9.2-p136/gems/actionmailer-3.0.3/lib/action_mailer/base.rb:763:in
&lt;code&gt;deprecated_url_options': You can no longer call
ActionMailer::Base.default_url_options directly. You need to set
config.action_mailer.default_url_options. If you are using
ActionMailer standalone, you need to include the routing
url_helpers directly.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This problem does not occur, when using:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;config.cache_classes = false&lt;/code&gt;
&lt;/pre&gt;
Regards,&lt;br&gt;
sewid&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-06T08:00:21+00:00</created-at>
      <creator-id type="integer">135851</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6380</number>
      <permalink>configcache_classes-and-actionmailerbasedefault_url_options</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>config.cache_classes and ActionMailer::Base.default_url_options</title>
      <updated-at type="datetime">2011-02-06T08:00:58+00:00</updated-at>
      <user-id type="integer">135851</user-id>
      <version type="integer">1</version>
      <user-name>sewid</user-name>
      <creator-name>sewid</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6380</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Seems to be an rspec problem. The error occurs with rspec 2.5.0 (I did not recognize, that there was an update). When I use 2.4.0, the tests passes without problems.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Seems to be an rspec problem. The error occurs with rspec 2.5.0
(I did not recognize, that there was an update). When I use 2.4.0,
the tests passes without problems.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-06T22:23:03+00:00</created-at>
      <creator-id type="integer">135851</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6380</number>
      <permalink>configcache_classes-and-actionmailerbasedefault_url_options</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>config.cache_classes and ActionMailer::Base.default_url_options</title>
      <updated-at type="datetime">2011-02-06T22:23:05+00:00</updated-at>
      <user-id type="integer">135851</user-id>
      <version type="integer">2</version>
      <user-name>sewid</user-name>
      <creator-name>sewid</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6380</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>sewid, can you supply a backtrace - I can't anything in the rspec-rails 2.4 -&gt; 2.5 diff that refers to default_url_options so I can't track it down at the moment.</body>
      <body-html>&lt;div&gt;&lt;p&gt;sewid, can you supply a backtrace - I can't anything in the
rspec-rails 2.4 -&amp;gt; 2.5 diff that refers to default_url_options
so I can't track it down at the moment.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-09T06:53:03+00:00</created-at>
      <creator-id type="integer">135851</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6380</number>
      <permalink>configcache_classes-and-actionmailerbasedefault_url_options</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag nil="true"></tag>
      <title>config.cache_classes and ActionMailer::Base.default_url_options</title>
      <updated-at type="datetime">2011-02-09T06:53:11+00:00</updated-at>
      <user-id type="integer">7697</user-id>
      <version type="integer">3</version>
      <user-name>Andrew White</user-name>
      <creator-name>sewid</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6380</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi,

I updatesd to 2.5.0 yesterday and now, everything works. But when hitting the problem, I restored an old Gemfile - so it may be, there is a nother gem causing this problem.
I will update this ticket, if I find the reason. At the moment, everything is working (event with rspec 2.5.0).

Regards,
sewid</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi,&lt;/p&gt;
&lt;p&gt;I updatesd to 2.5.0 yesterday and now, everything works. But
when hitting the problem, I restored an old Gemfile - so it may be,
there is a nother gem causing this problem.&lt;br&gt;
I will update this ticket, if I find the reason. At the moment,
everything is working (event with rspec 2.5.0).&lt;/p&gt;
&lt;p&gt;Regards,&lt;br&gt;
sewid&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-09T06:57:59+00:00</created-at>
      <creator-id type="integer">135851</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6380</number>
      <permalink>configcache_classes-and-actionmailerbasedefault_url_options</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag nil="true"></tag>
      <title>config.cache_classes and ActionMailer::Base.default_url_options</title>
      <updated-at type="datetime">2011-02-09T06:58:07+00:00</updated-at>
      <user-id type="integer">135851</user-id>
      <version type="integer">4</version>
      <user-name>sewid</user-name>
      <creator-name>sewid</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6380</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Marking as stale as no feedback for a month</body>
      <body-html>&lt;div&gt;&lt;p&gt;Marking as stale as no feedback for a month&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-06T16:28:30+00:00</created-at>
      <creator-id type="integer">135851</creator-id>
      <diffable-attributes type="yaml">--- 
:state: needs-more-info
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6380</number>
      <permalink>configcache_classes-and-actionmailerbasedefault_url_options</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>config.cache_classes and ActionMailer::Base.default_url_options</title>
      <updated-at type="datetime">2011-03-06T16:28:39+00:00</updated-at>
      <user-id type="integer">7697</user-id>
      <version type="integer">5</version>
      <user-name>Andrew White</user-name>
      <creator-name>sewid</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6380</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
