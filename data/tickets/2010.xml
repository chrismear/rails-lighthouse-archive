<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">7400</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-02-18T20:37:10+00:00</created-at>
  <creator-id type="integer">25899</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2010</number>
  <permalink>arrayto_sentence-raises-with-missing-translations</permalink>
  <priority type="integer">1253</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activesupport array duration i18n patch to_sentence</tag>
  <title>Array#to_sentence raises with missing translations</title>
  <updated-at type="datetime">2009-02-27T13:23:05+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">5</version>
  <user-name>Repository</user-name>
  <creator-name>abriening</creator-name>
  <assigned-user-name>Sven Fuchs</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2010</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>The Array#to_sentence raises errors if a locale other than :en is used and is missing the default values. ( Think custom I18n.backend that is user editable ).

Also, anywhere that uses to_sentence for errors and logging probably shouldn't be localized.

Duration.inspect was also making weird use of to_sentence ( ie, &quot;5 minutes und 30 seconds&quot; for a I18n.locale of :de&quot; ).
 
Added a patch that will only lookup the defaults if not passed in. Stores defaults in an Array constant. Patches any internal use of to_sentence to always pass in the defaults hash. Test for ensuring that defaults are not looked-up when defaults are passed in.

This will need to be merged with Ticket #1847 if accepted.</original-body>
  <latest-body>The Array#to_sentence raises errors if a locale other than :en is used and is missing the default values. ( Think custom I18n.backend that is user editable ).

Also, anywhere that uses to_sentence for errors and logging probably shouldn't be localized.

Duration.inspect was also making weird use of to_sentence ( ie, &quot;5 minutes und 30 seconds&quot; for a I18n.locale of :de&quot; ).
 
Added a patch that will only lookup the defaults if not passed in. Stores defaults in an Array constant. Patches any internal use of to_sentence to always pass in the defaults hash. Test for ensuring that defaults are not looked-up when defaults are passed in.

This will need to be merged with Ticket #1847 if accepted.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The Array#to_sentence raises errors if a locale other than :en
is used and is missing the default values. ( Think custom
I18n.backend that is user editable ).&lt;/p&gt;
&lt;p&gt;Also, anywhere that uses to_sentence for errors and logging
probably shouldn't be localized.&lt;/p&gt;
&lt;p&gt;Duration.inspect was also making weird use of to_sentence ( ie,
&quot;5 minutes und 30 seconds&quot; for a I18n.locale of :de&quot; ).&lt;/p&gt;
&lt;p&gt;Added a patch that will only lookup the defaults if not passed
in. Stores defaults in an Array constant. Patches any internal use
of to_sentence to always pass in the defaults hash. Test for
ensuring that defaults are not looked-up when defaults are passed
in.&lt;/p&gt;
&lt;p&gt;This will need to be merged with Ticket &lt;a href=&quot;/projects/8994/tickets/1847&quot; title=&quot;Ticket #1847&quot;&gt;#1847&lt;/a&gt; if
accepted.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The Array#to_sentence raises errors if a locale other than :en is used and is missing the default values. ( Think custom I18n.backend that is user editable ).

Also, anywhere that uses to_sentence for errors and logging probably shouldn't be localized.

Duration.inspect was also making weird use of to_sentence ( ie, &quot;5 minutes und 30 seconds&quot; for a I18n.locale of :de&quot; ).
 
Added a patch that will only lookup the defaults if not passed in. Stores defaults in an Array constant. Patches any internal use of to_sentence to always pass in the defaults hash. Test for ensuring that defaults are not looked-up when defaults are passed in.

This will need to be merged with Ticket #1847 if accepted.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The Array#to_sentence raises errors if a locale other than :en
is used and is missing the default values. ( Think custom
I18n.backend that is user editable ).&lt;/p&gt;
&lt;p&gt;Also, anywhere that uses to_sentence for errors and logging
probably shouldn't be localized.&lt;/p&gt;
&lt;p&gt;Duration.inspect was also making weird use of to_sentence ( ie,
&quot;5 minutes und 30 seconds&quot; for a I18n.locale of :de&quot; ).&lt;/p&gt;
&lt;p&gt;Added a patch that will only lookup the defaults if not passed
in. Stores defaults in an Array constant. Patches any internal use
of to_sentence to always pass in the defaults hash. Test for
ensuring that defaults are not looked-up when defaults are passed
in.&lt;/p&gt;
&lt;p&gt;This will need to be merged with Ticket &lt;a href=&quot;/projects/8994/tickets/1847&quot; title=&quot;Ticket #1847&quot;&gt;#1847&lt;/a&gt; if
accepted.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-18T20:37:10+00:00</created-at>
      <creator-id type="integer">25899</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2010</number>
      <permalink>arrayto_sentence-raises-with-missing-translations</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport array duration i18n to_sentence</tag>
      <title>Array#to_sentence raises with missing translations</title>
      <updated-at type="datetime">2009-02-18T20:37:14+00:00</updated-at>
      <user-id type="integer">25899</user-id>
      <version type="integer">1</version>
      <user-name>abriening</user-name>
      <creator-name>abriening</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2010</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T15:18:45+00:00</created-at>
      <creator-id type="integer">25899</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2010</number>
      <permalink>arrayto_sentence-raises-with-missing-translations</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport array duration i18n to_sentence</tag>
      <title>Array#to_sentence raises with missing translations</title>
      <updated-at type="datetime">2009-02-22T15:18:46+00:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">2</version>
      <user-name>DHH</user-name>
      <creator-name>abriening</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2010</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Just wanted to clarify, this does not raise with the I8n.default_exception_handler but makes ugly logs and error messages.

@@@ ruby
irb(main):002:0&gt; require 'activesupport.rb'
=&gt; true
irb(main):003:0&gt; [1,2,3].to_sentence
=&gt; &quot;1, 2, and 3&quot;
irb(main):004:0&gt; [1,2,3].to_sentence :locale =&gt; :de
=&gt; &quot;1translation missing: de, support, array,
words_connector2translation missing: de, support, array,
last_word_connector3&quot;
@@@

This was raising with my overridden exception_handler didn't realize this till after I posted this ticket.

Either way Rails' internal errors and logging shouldn't be localized.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just wanted to clarify, this does not raise with the
I8n.default_exception_handler but makes ugly logs and error
messages.&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
irb(main):002:0&amp;gt; require 'activesupport.rb'
=&amp;gt; true
irb(main):003:0&amp;gt; [1,2,3].to_sentence
=&amp;gt; &amp;quot;1, 2, and 3&amp;quot;
irb(main):004:0&amp;gt; [1,2,3].to_sentence :locale =&amp;gt; :de
=&amp;gt; &amp;quot;1translation missing: de, support, array,
words_connector2translation missing: de, support, array,
last_word_connector3&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This was raising with my overridden exception_handler didn't
realize this till after I posted this ticket.&lt;/p&gt;
&lt;p&gt;Either way Rails' internal errors and logging shouldn't be
localized.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T17:58:13+00:00</created-at>
      <creator-id type="integer">25899</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2010</number>
      <permalink>arrayto_sentence-raises-with-missing-translations</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport array duration i18n to_sentence</tag>
      <title>Array#to_sentence raises with missing translations</title>
      <updated-at type="datetime">2009-02-22T17:58:15+00:00</updated-at>
      <user-id type="integer">25899</user-id>
      <version type="integer">3</version>
      <user-name>abriening</user-name>
      <creator-name>abriening</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2010</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Adding a new patch.

Includes changes from commit ff1afb, #1847.

Note this patch assumes that you are either using the old :connector and :skip_last_comma options or the new options but not both.

I also followed the guidelines this time :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Adding a new patch.&lt;/p&gt;
&lt;p&gt;Includes changes from commit ff1afb, &lt;a href=&quot;/projects/8994/tickets/1847&quot; title=&quot;Ticket #1847&quot;&gt;#1847&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Note this patch assumes that you are either using the old
:connector and :skip_last_comma options or the new options but not
both.&lt;/p&gt;
&lt;p&gt;I also followed the guidelines this time :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T18:35:57+00:00</created-at>
      <creator-id type="integer">25899</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activesupport array duration i18n to_sentence
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2010</number>
      <permalink>arrayto_sentence-raises-with-missing-translations</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport array duration i18n patch to_sentence</tag>
      <title>Array#to_sentence raises with missing translations</title>
      <updated-at type="datetime">2009-02-22T18:36:01+00:00</updated-at>
      <user-id type="integer">25899</user-id>
      <version type="integer">4</version>
      <user-name>abriening</user-name>
      <creator-name>abriening</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2010</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [6de83562f91028629bd24447aa521bc72ef8277a]) Force all internal calls to Array#to_sentence to use English [#2010 state:resolved]
http://github.com/rails/rails/commit/6de83562f91028629bd24447aa521bc72ef8277a</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [6de83562f91028629bd24447aa521bc72ef8277a]) Force all
internal calls to Array#to_sentence to use English [&lt;a href=&quot;/projects/8994/tickets/2010&quot; title=&quot;Ticket #2010&quot;&gt;#2010&lt;/a&gt;
state:resolved] &lt;a href=&quot;http://github.com/rails/rails/commit/6de83562f91028629bd24447aa521bc72ef8277a&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-27T13:23:02+00:00</created-at>
      <creator-id type="integer">25899</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2010</number>
      <permalink>arrayto_sentence-raises-with-missing-translations</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport array duration i18n patch to_sentence</tag>
      <title>Array#to_sentence raises with missing translations</title>
      <updated-at type="datetime">2009-02-27T13:23:05+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">5</version>
      <user-name>Repository</user-name>
      <creator-name>abriening</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2010</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>82d5a9c584f4bbe86660daf77a62cc7d578e8602</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-18T20:37:11+00:00</created-at>
      <filename>safe_to_sentence_2009-02-18.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">90284</id>
      <size type="integer">8588</size>
      <uploader-id type="integer">25899</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/90284/safe_to_sentence_2009-02-18.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>e54f6d043f90700e0419c65ff5338118562f4031</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-22T18:35:57+00:00</created-at>
      <filename>safe_to_sentence_2009-02-22.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">91575</id>
      <size type="integer">16240</size>
      <uploader-id type="integer">25899</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/91575/safe_to_sentence_2009-02-22.patch</url>
    </attachment>
  </attachments>
</ticket>
