<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-03-03T09:20:22+00:00</created-at>
  <creator-id type="integer">130936</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6246</number>
  <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag nil="true"></tag>
  <title>Time.zone is broken in most every version of rails including 3.x</title>
  <updated-at type="datetime">2011-03-26T02:13:11+00:00</updated-at>
  <user-id type="integer">142823</user-id>
  <version type="integer">28</version>
  <user-name>bingbing</user-name>
  <creator-name>Jay Crouch</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
  <priority-name>Low</priority-name>
  <original-body>Assuming the description of Time.zone here: http://wiki.rubyonrails.org/howtos/time-zones is accurate, Time.zone is completely broken.

1] Setting Time.zone persists across threads and even persists past each request; meaning setting this value changes the behavior of all threads permanently until changed again.

2] Setting Time.zone affects the way ActiveRecord saves datetime values to the Database. Assuming Time.zone is not set, and config.active_record.default_timezone &amp; config.time_zone are set to UTC, a datetime like 'Fri, 31 Dec 2010 17:00:00 MST -07:00' is saved as 'Sat Jan 01 00:00:00 UTC 2011' (when assigned to a model and saved). Meaning AR is aware of and adjusts for timezones. When Time.zone is set to 'Arizona', AR disregards the UTC zone and saves the date in local format instead of UTC.

I've already written a long write up on the issue, including tests to reproduce the behavior, and a patch I wrote to make working with zones easier. http://stackoverflow.com/questions/4529387/does-anyone-know-how-to-appropriately-deal-with-user-timezones-in-rails-2-3/4582247#4582247

My patch doesn't solve the core problem however, that Time.zone is not local or thread safe or ActiveRecord safe.

Please fix this.</original-body>
  <latest-body>Assuming the description of Time.zone here: http://wiki.rubyonrails.org/howtos/time-zones is accurate, Time.zone is completely broken.

1] Setting Time.zone persists across threads and even persists past each request; meaning setting this value changes the behavior of all threads permanently until changed again.

2] Setting Time.zone affects the way ActiveRecord saves datetime values to the Database. Assuming Time.zone is not set, and config.active_record.default_timezone &amp; config.time_zone are set to UTC, a datetime like 'Fri, 31 Dec 2010 17:00:00 MST -07:00' is saved as 'Sat Jan 01 00:00:00 UTC 2011' (when assigned to a model and saved). Meaning AR is aware of and adjusts for timezones. When Time.zone is set to 'Arizona', AR disregards the UTC zone and saves the date in local format instead of UTC.

I've already written a long write up on the issue, including tests to reproduce the behavior, and a patch I wrote to make working with zones easier. http://stackoverflow.com/questions/4529387/does-anyone-know-how-to-appropriately-deal-with-user-timezones-in-rails-2-3/4582247#4582247

My patch doesn't solve the core problem however, that Time.zone is not local or thread safe or ActiveRecord safe.

Please fix this.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Assuming the description of Time.zone here: &lt;a href=
&quot;http://wiki.rubyonrails.org/howtos/time-zones&quot;&gt;http://wiki.rubyonrails.org/howtos/time-zones&lt;/a&gt;
is accurate, Time.zone is completely broken.&lt;/p&gt;
&lt;p&gt;1] Setting Time.zone persists across threads and even persists
past each request; meaning setting this value changes the behavior
of all threads permanently until changed again.&lt;/p&gt;
&lt;p&gt;2] Setting Time.zone affects the way ActiveRecord saves datetime
values to the Database. Assuming Time.zone is not set, and
config.active_record.default_timezone &amp;amp; config.time_zone are
set to UTC, a datetime like 'Fri, 31 Dec 2010 17:00:00 MST -07:00'
is saved as 'Sat Jan 01 00:00:00 UTC 2011' (when assigned to a
model and saved). Meaning AR is aware of and adjusts for timezones.
When Time.zone is set to 'Arizona', AR disregards the UTC zone and
saves the date in local format instead of UTC.&lt;/p&gt;
&lt;p&gt;I've already written a long write up on the issue, including
tests to reproduce the behavior, and a patch I wrote to make
working with zones easier. &lt;a href=
&quot;http://stackoverflow.com/questions/4529387/does-anyone-know-how-to-appropriately-deal-with-user-timezones-in-rails-2-3/4582247#4582247&quot;&gt;
http://stackoverflow.com/questions/4529387/does-anyone-know-how-to-...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;My patch doesn't solve the core problem however, that Time.zone
is not local or thread safe or ActiveRecord safe.&lt;/p&gt;
&lt;p&gt;Please fix this.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Assuming the description of Time.zone here: http://wiki.rubyonrails.org/howtos/time-zones is accurate, Time.zone is completely broken.

1] Setting Time.zone persists across threads and even persists past each request; meaning setting this value changes the behavior of all threads permanently until changed again.

2] Setting Time.zone affects the way ActiveRecord saves datetime values to the Database. Assuming Time.zone is not set, and config.active_record.default_timezone &amp; config.time_zone are set to UTC, a datetime like 'Fri, 31 Dec 2010 17:00:00 MST -07:00' is saved as 'Sat Jan 01 00:00:00 UTC 2011' (when assigned to a model and saved). Meaning AR is aware of and adjusts for timezones. When Time.zone is set to 'Arizona', AR disregards the UTC zone and saves the date in local format instead of UTC.

I've already written a long write up on the issue, including tests to reproduce the behavior, and a patch I wrote to make working with zones easier. http://stackoverflow.com/questions/4529387/does-anyone-know-how-to-appropriately-deal-with-user-timezones-in-rails-2-3/4582247#4582247

My patch doesn't solve the core problem however, that Time.zone is not local or thread safe or ActiveRecord safe.

Please fix this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Assuming the description of Time.zone here: &lt;a href=
&quot;http://wiki.rubyonrails.org/howtos/time-zones&quot;&gt;http://wiki.rubyonrails.org/howtos/time-zones&lt;/a&gt;
is accurate, Time.zone is completely broken.&lt;/p&gt;
&lt;p&gt;1] Setting Time.zone persists across threads and even persists
past each request; meaning setting this value changes the behavior
of all threads permanently until changed again.&lt;/p&gt;
&lt;p&gt;2] Setting Time.zone affects the way ActiveRecord saves datetime
values to the Database. Assuming Time.zone is not set, and
config.active_record.default_timezone &amp;amp; config.time_zone are
set to UTC, a datetime like 'Fri, 31 Dec 2010 17:00:00 MST -07:00'
is saved as 'Sat Jan 01 00:00:00 UTC 2011' (when assigned to a
model and saved). Meaning AR is aware of and adjusts for timezones.
When Time.zone is set to 'Arizona', AR disregards the UTC zone and
saves the date in local format instead of UTC.&lt;/p&gt;
&lt;p&gt;I've already written a long write up on the issue, including
tests to reproduce the behavior, and a patch I wrote to make
working with zones easier. &lt;a href=
&quot;http://stackoverflow.com/questions/4529387/does-anyone-know-how-to-appropriately-deal-with-user-timezones-in-rails-2-3/4582247#4582247&quot;&gt;
http://stackoverflow.com/questions/4529387/does-anyone-know-how-to-...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;My patch doesn't solve the core problem however, that Time.zone
is not local or thread safe or ActiveRecord safe.&lt;/p&gt;
&lt;p&gt;Please fix this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T05:47:12+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T05:47:13+00:00</updated-at>
      <user-id type="integer">130936</user-id>
      <version type="integer">1</version>
      <user-name>Jay Crouch</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It is true that &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;monlcer online store&lt;/a&gt; we have been leading  a difficult &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler&lt;/a&gt; life, for we need  not only to be &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;discount moncler jackets&lt;/a&gt; under various external pressures, but also to be in the &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler sale&lt;/a&gt; face of internal perplexities. Even a mere &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler jackets&lt;/a&gt; glance would make &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;http://www.monclergo.com/&lt;/a&gt; you moved and  inpired.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It is true that &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;monlcer
online store&lt;/a&gt; we have been leading a difficult &lt;a href=
&quot;http://www.monclergo.com/&quot;&gt;moncler&lt;/a&gt; life, for we need not only
to be &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;discount moncler
jackets&lt;/a&gt; under various external pressures, but also to be in the
&lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler sale&lt;/a&gt; face of
internal perplexities. Even a mere &lt;a href=
&quot;http://www.monclergo.com/&quot;&gt;moncler jackets&lt;/a&gt; glance would make
&lt;a href=&quot;http://www.monclergo.com/&quot;&gt;http://www.monclergo.com/&lt;/a&gt;
you moved and inpired.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:10:36+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:08+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">2</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>A true love &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler clothing&lt;/a&gt; is what doesn&#8216;t strive for busyness, for extravagance, for luxury, and &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler outewear&lt;/a&gt; moreover for hokum.There is someone that &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler coats&lt;/a&gt; is coming or passing away in your &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler&lt;/a&gt; life around the clock, so you may lose sight of those &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler jackets&lt;/a&gt; seen, and forget those &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;http://www.monclerus.com/&lt;/a&gt; remembered.</body>
      <body-html>&lt;div&gt;&lt;p&gt;A true love &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler
clothing&lt;/a&gt; is what doesn&amp;#8216;t strive for busyness, for
extravagance, for luxury, and &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;moncler outewear&lt;/a&gt; moreover for
hokum.There is someone that &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;moncler coats&lt;/a&gt; is coming or passing
away in your &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler&lt;/a&gt; life
around the clock, so you may lose sight of those &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;moncler jackets&lt;/a&gt; seen, and forget
those &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;http://www.monclerus.com/&lt;/a&gt;
remembered.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:11:30+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:09+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">3</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Some may be wicked, and some may be &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;ugg boots sale&lt;/a&gt; despicable. Only when I put myself &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;ugg boots&lt;/a&gt; in their position did I know they are more &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots&lt;/a&gt; miserable than I. So forgive all that you have met &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;discount ugg boots&lt;/a&gt; , no matter what kind of &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots sale&lt;/a&gt; persons they are. From that you would get angry with your &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;http://www.goodfurboots.com/&lt;/a&gt; friends, we can conclude you sitll care about the friendship between you.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Some may be wicked, and some may be &lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;ugg boots sale&lt;/a&gt; despicable. Only
when I put myself &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;ugg
boots&lt;/a&gt; in their position did I know they are more &lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots&lt;/a&gt; miserable than
I. So forgive all that you have met &lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;discount ugg boots&lt;/a&gt; , no matter
what kind of &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots
sale&lt;/a&gt; persons they are. From that you would get angry with your
&lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;http://www.goodfurboots.com/&lt;/a&gt;
friends, we can conclude you sitll care about the friendship
between you.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:12:19+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:09+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">4</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Happiness is accompanied by &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg boots sale&lt;/a&gt; sorrow, and it would turn &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;discount ugg boots&lt;/a&gt; sunny after rain as well. If rain remains after rain and sorrow &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg boots&lt;/a&gt; remains after sorrow, please take those &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg australia boots&lt;/a&gt; farewells easy, and turn to smilingly look for yourself who is never to appear &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;http://www.topuggworld.com/&lt;/a&gt; .</body>
      <body-html>&lt;div&gt;&lt;p&gt;Happiness is accompanied by &lt;a href=
&quot;http://www.topuggworld.com/&quot;&gt;ugg boots sale&lt;/a&gt; sorrow, and it
would turn &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;discount ugg
boots&lt;/a&gt; sunny after rain as well. If rain remains after rain and
sorrow &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg boots&lt;/a&gt; remains
after sorrow, please take those &lt;a href=
&quot;http://www.topuggworld.com/&quot;&gt;ugg australia boots&lt;/a&gt; farewells
easy, and turn to smilingly look for yourself who is never to
appear &lt;a href=
&quot;http://www.topuggworld.com/&quot;&gt;http://www.topuggworld.com/&lt;/a&gt; .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:13:08+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:10+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">5</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Happiness &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian louboutin sale&lt;/a&gt; is like a pebble dropped into  a &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian louboutin&lt;/a&gt; pool to set in motion an  ever-widening circle of &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian  louboutin shoes&lt;/a&gt; ripples.  As Stevenson has said &lt;a href=&quot;http://www.christianlouboutinshoestore.com/productlist-two-43.html&quot;&gt;christian  louboutin boots&lt;/a&gt;, being happy is a &lt;a href=&quot;http://www.christianlouboutinshoestore.com/productlist-one-21.html&quot;&gt;tory  borch shoes&lt;/a&gt; duty. There is no exact definition of the &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;http://www.christianlouboutinshoestore.com/ &lt;/a&gt; word happiness.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Happiness &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian louboutin
sale&lt;/a&gt; is like a pebble dropped into a &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian
louboutin&lt;/a&gt; pool to set in motion an ever-widening circle of
&lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian
louboutin shoes&lt;/a&gt; ripples. As Stevenson has said &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/productlist-two-43.html&quot;&gt;
christian louboutin boots&lt;/a&gt;, being happy is a &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/productlist-one-21.html&quot;&gt;
tory borch shoes&lt;/a&gt; duty. There is no exact definition of the
&lt;a href=
&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;http://www.christianlouboutinshoestore.com/&lt;/a&gt;
word happiness.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:13:59+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:11+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">6</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Maybe God wants us to meet &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;cheap ed hardy clothing sale&lt;/a&gt; a few wrong people before meeting the right &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;womens ed hardy clothing&lt;/a&gt; one, so that when we finally meet the &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy online shop&lt;/a&gt; person, we will know how to be grateful &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy clothing&lt;/a&gt; .Do not cry because it is &lt;a href=&quot;http://www.edhardy-buy.com/mens-moncler-jackets-c-173.html&quot;&gt;mens  moncler jackets&lt;/a&gt; over, smile because it happened &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;http://www.edhardy-buy.com/&lt;/a&gt;  .</body>
      <body-html>&lt;div&gt;&lt;p&gt;Maybe God wants us to meet &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;cheap ed hardy clothing sale&lt;/a&gt; a
few wrong people before meeting the right &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;womens ed hardy clothing&lt;/a&gt; one, so
that when we finally meet the &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy online shop&lt;/a&gt; person, we
will know how to be grateful &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy clothing&lt;/a&gt; .Do not cry
because it is &lt;a href=
&quot;http://www.edhardy-buy.com/mens-moncler-jackets-c-173.html&quot;&gt;mens
moncler jackets&lt;/a&gt; over, smile because it happened &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;http://www.edhardy-buy.com/&lt;/a&gt; .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:15:01+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:11+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">7</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I would not care success &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;christian louboutin shoes&lt;/a&gt; or failure, for I will only struggle &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;louboutin sale&lt;/a&gt;  ahead as long as I   have been destined to the &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;discount christian louboutin  shoes&lt;/a&gt;&lt;strong&gt; &lt;/strong&gt;distance. I would not care the &lt;a href=&quot;http://www.louboutinszone.com/Christian-Louboutin-Booties-s37/&quot;&gt;christian  louboutin booties&lt;/a&gt; difficulties around, for   what I can leave on the &lt;a href=&quot;http://www.louboutinszone.com/Christian-Louboutin-Boots-s38/&quot;&gt;christian  louboutin boots&lt;/a&gt; earth is only their view of my back since I have been   marching toward the &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;http://www.louboutinszone.com/&lt;/a&gt;  horizontal.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I would not care success &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;christian louboutin shoes&lt;/a&gt; or
failure, for I will only struggle &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;louboutin sale&lt;/a&gt; ahead as long
as I have been destined to the &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;discount christian louboutin
shoes&lt;/a&gt; distance. I would not care the &lt;a href=
&quot;http://www.louboutinszone.com/Christian-Louboutin-Booties-s37/&quot;&gt;christian
louboutin booties&lt;/a&gt; difficulties around, for what I can leave on
the &lt;a href=
&quot;http://www.louboutinszone.com/Christian-Louboutin-Boots-s38/&quot;&gt;christian
louboutin boots&lt;/a&gt; earth is only their view of my back since I
have been marching toward the &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;http://www.louboutinszone.com/&lt;/a&gt;
horizontal.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:15:51+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:12+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">8</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The tragedy of &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;louboutin shoes&lt;/a&gt; life is not so much what men suffer, but what &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin sale&lt;/a&gt; they miss. I find life an exciting &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin shoes&lt;/a&gt; business and most exciting when it is lived for &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;discount christian louboutin&lt;/a&gt; others. Young men make great mistakes in &lt;a href=&quot;http://www.louboutinsonline.com/Discount-Christian-Louboutin-Pumps/&quot;&gt;christian louboutin pumps&lt;/a&gt; life for one thing, they idealize love &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;http://www.louboutinsonline.com/&lt;/a&gt; too much.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The tragedy of &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;louboutin shoes&lt;/a&gt; life is not
so much what men suffer, but what &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin sale&lt;/a&gt;
they miss. I find life an exciting &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin shoes&lt;/a&gt;
business and most exciting when it is lived for &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;discount christian louboutin&lt;/a&gt;
others. Young men make great mistakes in &lt;a href=
&quot;http://www.louboutinsonline.com/Discount-Christian-Louboutin-Pumps/&quot;&gt;
christian louboutin pumps&lt;/a&gt; life for one thing, they idealize
love &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;http://www.louboutinsonline.com/&lt;/a&gt;
too much.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:16:49+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-03T06:50:14+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">9</version>
      <user-name>afra99</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Shopping for Mens &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Big Yellow,These matter can be found in many sources. Department supplies may keep them as well as operation shoe locations. Different operation shoed chains will tender a few different shoes from each category of shoe fray. They may hold a line of soccer &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt;, operation abrasion and basketball styles. This ideal is a form right shoe that looks great with casual pants. &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt;sale Mens Puma Speed Cat Big Yellow Shoes hot sale in Ottawa will give somebody the gamble to attire something that is classy and lively. The panache on the leather and the influence will bestow somebody with an excellent looking &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt;. This entry could be tattered with shorts, pants and jeans. Small ankle socks in red or colorless may help to produce a balanced look. A purchaser may find this sort in a footwear store or through an online retailer. In the sell for an open evaluate of the Mens Puma Speed Cat Big Gold Black Shoes? Get the absolute inside scrape and attrition now in our manual to the great puma eminent cat lo.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Shopping for Mens &lt;a href=&quot;http:&quot;&gt;puma speed cat Big
Yellow,These matter can be found in many sources. Department
supplies may keep them as well as operation shoe locations.
Different operation shoed chains will tender a few different shoes
from each category of shoe fray. They may hold a line of soccer
&lt;a href=&quot;http:&quot;&gt;Puma shoes, operation abrasion and basketball
styles. This ideal is a form right shoe that looks great with
casual pants. &lt;a href=&quot;http:&quot;&gt;Puma shoes onlinesale Mens Puma Speed
Cat Big Yellow Shoes hot sale in Ottawa will give somebody the
gamble to attire something that is classy and lively. The panache
on the leather and the influence will bestow somebody with an
excellent looking &lt;a href=&quot;http:&quot;&gt;Puma shoes. This entry could be
tattered with shorts, pants and jeans. Small ankle socks in red or
colorless may help to produce a balanced look. A purchaser may find
this sort in a footwear store or through an online retailer. In the
sell for an open evaluate of the Mens Puma Speed Cat Big Gold Black
Shoes? Get the absolute inside scrape and attrition now in our
manual to the great puma eminent cat lo.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-13T01:45:35+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-01-13T01:53:16+00:00</updated-at>
      <user-id type="integer">132366</user-id>
      <version type="integer">10</version>
      <user-name>yanzi</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi, 

Regarding point #1, &quot;Setting Time.zone persists across threads and even persists past each request; meaning setting this value changes the behavior of all threads permanently until changed again,&quot; I see this as a documentation error because the doc for zone= says to use a before_filter in your app.  It can be solved at the app level by using an around_filter instead of a before_filter:

  around_filter :set_time_zone

  def set_time_zone
    old_time_zone, Time.zone = Time.zone, current_user.time_zone
    yield
  ensure
    Time.zone = old_time_zone
  end</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi,&lt;/p&gt;
&lt;p&gt;Regarding point &lt;a href=&quot;/projects/8994/tickets/1&quot; title=
&quot;Ticket #1&quot;&gt;#1&lt;/a&gt;, &quot;Setting Time.zone persists across threads and
even persists past each request; meaning setting this value changes
the behavior of all threads permanently until changed again,&quot; I see
this as a documentation error because the doc for zone= says to use
a before_filter in your app. It can be solved at the app level by
using an around_filter instead of a before_filter:&lt;/p&gt;
&lt;p&gt;around_filter :set_time_zone&lt;/p&gt;
&lt;p&gt;def set_time_zone&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;old_time_zone, Time.zone = Time.zone, current_user.time_zone
yield&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ensure&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Time.zone = old_time_zone&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-03T16:54:49+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-03T16:54:57+00:00</updated-at>
      <user-id type="integer">12061</user-id>
      <version type="integer">11</version>
      <user-name>Brian Morearty</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Whoops, formatting error.

@@@ Ruby
  def set_time_zone
    old_time_zone, Time.zone = Time.zone, 'Mountain Time (US &amp; Canada)'
    yield
  ensure
    Time.zone = old_time_zone
  end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Whoops, formatting error.&lt;/p&gt;
&lt;p&gt;@@@ Ruby def set_time_zone&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;old_time_zone, Time.zone = Time.zone, 'Mountain Time (US &amp;amp; Canada)'
yield&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ensure&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Time.zone = old_time_zone&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end&lt;/p&gt;
&lt;pre&gt;

&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-03T16:55:50+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-03T16:55:57+00:00</updated-at>
      <user-id type="integer">12061</user-id>
      <version type="integer">12</version>
      <user-name>Brian Morearty</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>One more time.

@@@ ruby
    def set_time_zone
      old_time_zone, Time.zone = Time.zone, 'Mountain Time (US &amp; Canada)'
      yield
    ensure
      Time.zone = old_time_zone
    end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;One more time.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;    def set_time_zone
      old_time_zone, Time.zone = Time.zone, 'Mountain Time (US &amp;amp; Canada)'
      yield
    ensure
      Time.zone = old_time_zone
    end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-03T16:56:43+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-03T16:56:55+00:00</updated-at>
      <user-id type="integer">12061</user-id>
      <version type="integer">13</version>
      <user-name>Brian Morearty</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Good &lt;a href=http://www.sale-puma.com&gt;Puma shoes sale&lt;/a&gt; information for &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; fans: Yesterday, German sportswear maker Cheap Running Shoes purchased effectively lot of money Brands. The transaction entails the Cobra brand, too as linked inventory, intellectual house and endorsement contracts. It also helps make &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Shoes . They provide you with the utmost game and support all through the feet.You can happen around several types of basketball sneakers such as high-top,low-top and mid-top.The &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt; and boots give you best ankle support will support want you to obtain steadiness.
As we konw,Trail &lt;a href=http://www.sale-puma.com&gt;Puma Drift Cat&lt;/a&gt; Shoes black, Trail &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; ShoesWhite Black? 50 many years backshore are actually released within a great accomplishment. Trail Running Shoes speed cat shoes?go in add-on to King Pele into planet tournament finals, bottom tennis discs matchrs within pasture inhabit an vital area in hold out in Wimbledon Dun; Its working firms have premier manufacturers and major marketplace positions in distilled spirits, residence and security, and golf products. The reply go all through the &lt;a href=http://www.sale-puma.com&gt;Cheap puma shoes&lt;/a&gt; on sale-here you are able to happen around several distcoun.&lt;a href=http://www.sale-puma.com&gt;puma shoes on sale &lt;/a&gt;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good &lt;a href=&quot;http:&quot;&gt;Puma shoes sale information for &lt;a href=
&quot;http:&quot;&gt;Puma shoes fans: Yesterday, German sportswear maker Cheap
Running Shoes purchased effectively lot of money Brands. The
transaction entails the Cobra brand, too as linked inventory,
intellectual house and endorsement contracts. It also helps make
&lt;a href=&quot;http:&quot;&gt;puma speed cat Shoes . They provide you with the
utmost game and support all through the feet.You can happen around
several types of basketball sneakers such as high-top,low-top and
mid-top.The &lt;a href=&quot;http:&quot;&gt;Puma shoes online and boots give you
best ankle support will support want you to obtain steadiness.&lt;br&gt;
As we konw,Trail &lt;a href=&quot;http:&quot;&gt;Puma Drift Cat Shoes black, Trail
&lt;a href=&quot;http:&quot;&gt;Puma future cat ShoesWhite Black? 50 many years
backshore are actually released within a great accomplishment.
Trail Running Shoes speed cat shoes?go in add-on to King Pele into
planet tournament finals, bottom tennis discs matchrs within
pasture inhabit an vital area in hold out in Wimbledon Dun; Its
working firms have premier manufacturers and major marketplace
positions in distilled spirits, residence and security, and golf
products. The reply go all through the &lt;a href=&quot;http:&quot;&gt;Cheap puma
shoes on sale-here you are able to happen around several
distcoun.&lt;a href=&quot;http:&quot;&gt;puma shoes on sale .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-14T02:18:39+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-14T05:41:54+00:00</updated-at>
      <user-id type="integer">136860</user-id>
      <version type="integer">14</version>
      <user-name>xixi</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Today, kids as babyish as Ashcan School or nine name-conscious and trend-alert, puma ducati buying at for solid garments rather than just throwing on what&#8217;s pure. Here are just some of the brands and trends your children hungered over 2011. The 80&#8242;s Are Back. You may have noticed a trend this year for evisu jeans, supra shoes, leggings petticoats, oversized tees, and big &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; shoes. This is a look that appeals to babies girls-it&#8217;s quirky and yet smart at the same time.
&lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; with success sets the charm for manner, lifestyle and gambols. This has been believed to serve for an ideal cross flight simulator. This has been fine-looking by most jocks and the Speed Cat is an old name for the industriousness which made &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; gain millions with this business. With many people converting more wellness conscious in time, a lot wants also to commit on a good pair of cross trainers. These are very indestructible and forward-looking just like the real carrying out of a real &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt;. It consumes been systematically on the forefront of design and carrying out when it pertains comfort and style commingled.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Today, kids as babyish as Ashcan School or nine name-conscious
and trend-alert, puma ducati buying at for solid garments rather
than just throwing on what&amp;#8217;s pure. Here are just some of the
brands and trends your children hungered over 2011. The 80&amp;#8242;s
Are Back. You may have noticed a trend this year for evisu jeans,
supra shoes, leggings petticoats, oversized tees, and big &lt;a href=
&quot;http:&quot;&gt;puma speed cat shoes. This is a look that appeals to babies
girls-it&amp;#8217;s quirky and yet smart at the same time.&lt;br&gt;
&lt;a href=&quot;http:&quot;&gt;Puma future cat with success sets the charm for
manner, lifestyle and gambols. This has been believed to serve for
an ideal cross flight simulator. This has been fine-looking by most
jocks and the Speed Cat is an old name for the industriousness
which made &lt;a href=&quot;http:&quot;&gt;Puma shoes gain millions with this
business. With many people converting more wellness conscious in
time, a lot wants also to commit on a good pair of cross trainers.
These are very indestructible and forward-looking just like the
real carrying out of a real &lt;a href=&quot;http:&quot;&gt;Puma future cat. It
consumes been systematically on the forefront of design and
carrying out when it pertains comfort and style commingled.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-14T04:31:52+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-14T05:42:04+00:00</updated-at>
      <user-id type="integer">136860</user-id>
      <version type="integer">15</version>
      <user-name>xixi</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>outdoor &lt;a href=http://www.moncler-ugg.com&gt;ugg classic crochet&lt;/a&gt; outlet for the same object from traditional ladies slippers tomind &#8220;&lt;a href=http://www.moncler-ugg.com&gt;ugg kid boots&lt;/a&gt; outside men are stupid? to look smart, if you bring in theinside theoutside o. All the shoes are Foruse right, while bars to be flexible and comfortable, offering the best of both worlds.If you&#8217;re always afraid of what you wear with them, there are plenty of places online, such as the Forum of Yahoo Answers, what advice would you give to the tree appropriate to wear with boots.
solid hiking &lt;a href=http://www.moncler-ugg.com&gt;uggs for cheap&lt;/a&gt; outlet stores  &#8211; cheap &lt;a href=http://www.moncler-ugg.com&gt;ugg ultra tall&lt;/a&gt; Boots UK Teman this line is perfect for outdoor enthusiasts. Chunky soles of boots with a style of motorcycle, and waterproof? or to be easy to apply and remove, these &lt;a href=http://www.moncler-ugg.com&gt;ugg classic mini&lt;/a&gt; boots are popular with fans worldwide. &lt;a href=http://www.moncler-ugg.com&gt;ugg classic short&lt;/a&gt;, these boots are lined with sheepskin to provide heat and yet real comfort. For six months the net loss of the season &lt;a href=http://www.moncler-ugg.com&gt;ugg classic cardy&lt;/a&gt; was 4.5 million &#8211; an improvement compared to a net loss of 5.2 million euros during the first six months of last year. growth in cash flow was much stronger, however.</body>
      <body-html>&lt;div&gt;&lt;p&gt;outdoor &lt;a href=&quot;http:&quot;&gt;ugg classic crochet outlet for the same
object from traditional ladies slippers tomind &amp;#8220;&lt;a href=
&quot;http:&quot;&gt;ugg kid boots outside men are stupid? to look smart, if you
bring in theinside theoutside o. All the shoes are Foruse right,
while bars to be flexible and comfortable, offering the best of
both worlds.If you&amp;#8217;re always afraid of what you wear with
them, there are plenty of places online, such as the Forum of Yahoo
Answers, what advice would you give to the tree appropriate to wear
with boots.&lt;br&gt;
solid hiking &lt;a href=&quot;http:&quot;&gt;uggs for cheap outlet stores &amp;#8211;
cheap &lt;a href=&quot;http:&quot;&gt;ugg ultra tall Boots UK Teman this line is
perfect for outdoor enthusiasts. Chunky soles of boots with a style
of motorcycle, and waterproof? or to be easy to apply and remove,
these &lt;a href=&quot;http:&quot;&gt;ugg classic mini boots are popular with fans
worldwide. &lt;a href=&quot;http:&quot;&gt;ugg classic short, these boots are lined
with sheepskin to provide heat and yet real comfort. For six months
the net loss of the season &lt;a href=&quot;http:&quot;&gt;ugg classic cardy was
4.5 million &amp;#8211; an improvement compared to a net loss of 5.2
million euros during the first six months of last year. growth in
cash flow was much stronger, however.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-19T02:27:02+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-19T09:28:23+00:00</updated-at>
      <user-id type="integer">137759</user-id>
      <version type="integer">16</version>
      <user-name>mklo</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If you are after a pair of great looking and style UGG boots to wear during the winter months, then you can not go far wrong with getting yourself a pair of the &lt;a href=http://www.moncler-ugg.com&gt;ugg classic crochet&lt;/a&gt; Tall&#8217;s. Even though these boots have been around for a few years now they are likely to grow in popularity now. This is because they were recently featured in Oprah Winfrey&#8217;s Favorite Things show.
The UGG Classic Crochet is a new addition to the popular Classic collection with its slouchy styling and colorful knit uppers (polyester and wool blend). A sheepskin footbed provides the extra comfort that UGG boot and &lt;a href=http://www.moncler-ugg.com&gt;ugg classic crochet&lt;/a&gt; is well-known for. A light and flexible outsole paired with a new decorative label makes this boot perfect for spring. The Classic Crochet boot can be cuffed or styled any creative way to personalize your look. As with the UGG Classic Cardy boot, the Crochet can either be worn with jeans. Or you can wear them pushed down so that they have slouched feel and look to them. But it does not matter what they are worn with or they way in which they are worn they will still help you to make quite a statement about yourself. Today&#8217;s women have become fashion conscious. They are going to almost any extent to look good and attractive. It has become important to look good. In fact, it is one of the most important factors that will decide success in various areas of life. It can boost up your confidence level.
As mentioned earlier the &lt;a href=http://www.moncler-ugg.com&gt;uggs for cheap&lt;/a&gt;Crochet Tall boots are going to grow in popularity this season, just because Oprah Winfrey included them in her Favorite Things show. Not only does she like the boots styling and colors (black, sand, rum raisin). The reason they are one of her favorite things is because she says it feels like she is walking on a cloud when she wears them.</body>
      <body-html>&lt;div&gt;&lt;p&gt;If you are after a pair of great looking and style UGG boots to
wear during the winter months, then you can not go far wrong with
getting yourself a pair of the &lt;a href=&quot;http:&quot;&gt;ugg classic crochet
Tall&amp;#8217;s. Even though these boots have been around for a few
years now they are likely to grow in popularity now. This is
because they were recently featured in Oprah Winfrey&amp;#8217;s
Favorite Things show.&lt;br&gt;
The UGG Classic Crochet is a new addition to the popular Classic
collection with its slouchy styling and colorful knit uppers
(polyester and wool blend). A sheepskin footbed provides the extra
comfort that UGG boot and &lt;a href=&quot;http:&quot;&gt;ugg classic crochet is
well-known for. A light and flexible outsole paired with a new
decorative label makes this boot perfect for spring. The Classic
Crochet boot can be cuffed or styled any creative way to
personalize your look. As with the UGG Classic Cardy boot, the
Crochet can either be worn with jeans. Or you can wear them pushed
down so that they have slouched feel and look to them. But it does
not matter what they are worn with or they way in which they are
worn they will still help you to make quite a statement about
yourself. Today&amp;#8217;s women have become fashion conscious. They
are going to almost any extent to look good and attractive. It has
become important to look good. In fact, it is one of the most
important factors that will decide success in various areas of
life. It can boost up your confidence level.&lt;br&gt;
As mentioned earlier the &lt;a href=&quot;http:&quot;&gt;uggs for cheapCrochet Tall
boots are going to grow in popularity this season, just because
Oprah Winfrey included them in her Favorite Things show. Not only
does she like the boots styling and colors (black, sand, rum
raisin). The reason they are one of her favorite things is because
she says it feels like she is walking on a cloud when she wears
them.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-19T03:33:59+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-19T14:02:23+00:00</updated-at>
      <user-id type="integer">137772</user-id>
      <version type="integer">17</version>
      <user-name>fgfyh</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>1. Rails store the current time zone in Thread.current[:time_zone], so it is possible and very likely that on production server if you change time zone in one request, it will still be changed in the next one. That's why you should reset the current time zone on every request using before filter, if you want it to be different per request. Setting per request locale (I18n.locale) works exactly in the same way.

2. I'm not really sure what the problem is here. Here's an output from Rails 3.0.4 app:

@@@ ruby
ruby-1.9.2-p180 :040 &gt; Time.zone = &quot;UTC&quot;
 =&gt; &quot;UTC&quot; 
ruby-1.9.2-p180 :041 &gt; b = Beverage.create(:name =&gt; &quot;Wine&quot;)
 =&gt; #&lt;Beverage id: 3, name: &quot;Wine&quot;, created_at: &quot;2011-02-22 14:48:23&quot;, updated_at: &quot;2011-02-22 14:48:23&quot;&gt; 
ruby-1.9.2-p180 :042 &gt; b.created_at
 =&gt; Tue, 22 Feb 2011 14:48:23 UTC +00:00 
ruby-1.9.2-p180 :043 &gt; b.created_at_before_type_cast
 =&gt; 2011-02-22 14:48:23 UTC 
ruby-1.9.2-p180 :044 &gt; Time.zone = &quot;Arizona&quot;
 =&gt; &quot;Arizona&quot; 
ruby-1.9.2-p180 :045 &gt; b = Beverage.create(:name =&gt; &quot;Water&quot;)
 =&gt; #&lt;Beverage id: 4, name: &quot;Water&quot;, created_at: &quot;2011-02-22 14:49:28&quot;, updated_at: &quot;2011-02-22 14:49:28&quot;&gt; 
ruby-1.9.2-p180 :046 &gt; b.created_at
 =&gt; Tue, 22 Feb 2011 07:49:28 MST -07:00 
ruby-1.9.2-p180 :047 &gt; b.created_at_before_type_cast
 =&gt; 2011-02-22 14:49:28 UTC 
ruby-1.9.2-p180 :048 &gt;
@@@

Both objects were saved in the database with time in UTC, but how it was displayed depends on the current time zone.</body>
      <body-html>&lt;div&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Rails store the current time zone in Thread.current[:time_zone],
so it is possible and very likely that on production server if you
change time zone in one request, it will still be changed in the
next one. That's why you should reset the current time zone on
every request using before filter, if you want it to be different
per request. Setting per request locale (I18n.locale) works exactly
in the same way.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;I'm not really sure what the problem is here. Here's an output
from Rails 3.0.4 app:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;ruby-1.9.2-p180 :040 &amp;gt; Time.zone = &quot;UTC&quot;
 =&amp;gt; &quot;UTC&quot; 
ruby-1.9.2-p180 :041 &amp;gt; b = Beverage.create(:name =&amp;gt; &quot;Wine&quot;)
 =&amp;gt; #&amp;lt;Beverage id: 3, name: &quot;Wine&quot;, created_at: &quot;2011-02-22 14:48:23&quot;, updated_at: &quot;2011-02-22 14:48:23&quot;&amp;gt; 
ruby-1.9.2-p180 :042 &amp;gt; b.created_at
 =&amp;gt; Tue, 22 Feb 2011 14:48:23 UTC +00:00 
ruby-1.9.2-p180 :043 &amp;gt; b.created_at_before_type_cast
 =&amp;gt; 2011-02-22 14:48:23 UTC 
ruby-1.9.2-p180 :044 &amp;gt; Time.zone = &quot;Arizona&quot;
 =&amp;gt; &quot;Arizona&quot; 
ruby-1.9.2-p180 :045 &amp;gt; b = Beverage.create(:name =&amp;gt; &quot;Water&quot;)
 =&amp;gt; #&amp;lt;Beverage id: 4, name: &quot;Water&quot;, created_at: &quot;2011-02-22 14:49:28&quot;, updated_at: &quot;2011-02-22 14:49:28&quot;&amp;gt; 
ruby-1.9.2-p180 :046 &amp;gt; b.created_at
 =&amp;gt; Tue, 22 Feb 2011 07:49:28 MST -07:00 
ruby-1.9.2-p180 :047 &amp;gt; b.created_at_before_type_cast
 =&amp;gt; 2011-02-22 14:49:28 UTC 
ruby-1.9.2-p180 :048 &amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Both objects were saved in the database with time in UTC, but
how it was displayed depends on the current time zone.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-22T15:00:38+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-02-22T15:00:45+00:00</updated-at>
      <user-id type="integer">22106</user-id>
      <version type="integer">18</version>
      <user-name>Szymon Nowak</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Apparently there is a timezone bug when adding a month to the date &quot;28 Februar&quot;.

&gt;&gt; Time.now.yesterday
=&gt; Mon Feb 28 08:14:11 +0200 2011
&gt;&gt; Time.now.yesterday.zone
=&gt; &quot;EET&quot;
&gt;&gt; (Time.now.yesterday + 1.month).zone
=&gt; &quot;EEST&quot;  #!!!!
&gt;&gt; (Time.now.yesterday + 1.year).zone
=&gt; &quot;EET&quot;
&gt;&gt; (Time.now.yesterday + 1.day).zone
=&gt; &quot;EET&quot;

ruby --version
ruby 1.8.7 (2010-01-10 patchlevel 249) [i686-darwin10.2.0]

Rails 3.04</body>
      <body-html>&lt;div&gt;&lt;p&gt;Apparently there is a timezone bug when adding a month to the
date &quot;28 Februar&quot;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Time.now.yesterday =&amp;gt; Mon Feb 28 08:14:11 +0200 2011
Time.now.yesterday.zone =&amp;gt; &quot;EET&quot; (Time.now.yesterday +
1.month).zone =&amp;gt; &quot;EEST&quot; #!!!! (Time.now.yesterday + 1.year).zone
=&amp;gt; &quot;EET&quot; (Time.now.yesterday + 1.day).zone =&amp;gt; &quot;EET&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;ruby --version&lt;br&gt;
ruby 1.8.7 (2010-01-10 patchlevel 249) [i686-darwin10.2.0]&lt;/p&gt;
&lt;p&gt;Rails 3.04&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-01T06:20:50+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-01T06:20:57+00:00</updated-at>
      <user-id type="integer">139213</user-id>
      <version type="integer">19</version>
      <user-name>Vasilis Dimos</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Apparently there is a timezone bug when adding a month to the date &quot;28 Februar&quot;.

@@@
&gt;&gt; Time.now.yesterday
=&gt; Mon Feb 28 08:14:11 +0200 2011
&gt;&gt; Time.now.yesterday.zone
=&gt; &quot;EET&quot;
&gt;&gt; Time.now.yesterday + 1.month
=&gt; Mon Mar 28 08:14:23 +0300 2011
&gt;&gt; (Time.now.yesterday + 1.month).zone
=&gt; &quot;EEST&quot;
&gt;&gt; (Time.now.yesterday + 1.year).zone
=&gt; &quot;EET&quot;
&gt;&gt; (Time.now.yesterday + 1.day).zone
=&gt; &quot;EET&quot;
@@@

ruby --version
ruby 1.8.7 (2010-01-10 patchlevel 249) [i686-darwin10.2.0]
Rails 3.04</body>
      <body-html>&lt;div&gt;&lt;p&gt;Apparently there is a timezone bug when adding a month to the
date &quot;28 Februar&quot;.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;gt;&amp;gt; Time.now.yesterday
=&amp;gt; Mon Feb 28 08:14:11 +0200 2011
&amp;gt;&amp;gt; Time.now.yesterday.zone
=&amp;gt; &quot;EET&quot;
&amp;gt;&amp;gt; Time.now.yesterday + 1.month
=&amp;gt; Mon Mar 28 08:14:23 +0300 2011
&amp;gt;&amp;gt; (Time.now.yesterday + 1.month).zone
=&amp;gt; &quot;EEST&quot;
&amp;gt;&amp;gt; (Time.now.yesterday + 1.year).zone
=&amp;gt; &quot;EET&quot;
&amp;gt;&amp;gt; (Time.now.yesterday + 1.day).zone
=&amp;gt; &quot;EET&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ruby --version&lt;br&gt;
ruby 1.8.7 (2010-01-10 patchlevel 249) [i686-darwin10.2.0]&lt;br&gt;
Rails 3.04&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-01T06:23:02+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-01T06:23:10+00:00</updated-at>
      <user-id type="integer">139213</user-id>
      <version type="integer">20</version>
      <user-name>Vasilis Dimos</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Sorry about the last two comments. This ain't obviously a bug but DST kicking in.. :(</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry about the last two comments. This ain't obviously a bug
but DST kicking in.. :(&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-01T07:47:42+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-01T07:47:50+00:00</updated-at>
      <user-id type="integer">139213</user-id>
      <version type="integer">21</version>
      <user-name>Vasilis Dimos</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>@vasilis could that be to do with the fact that one month from now is summer time, but 1 day wasn't, and 1 year puts you back into winter time again? I'm guessing that `EEST` is the summer version of `EET`</body>
      <body-html>&lt;div&gt;&lt;p&gt;@vasilis could that be to do with the fact that one month from
now is summer time, but 1 day wasn't, and 1 year puts you back into
winter time again? I'm guessing that &lt;code&gt;EEST&lt;/code&gt; is the
summer version of &lt;code&gt;EET&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-01T07:48:35+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-01T07:48:42+00:00</updated-at>
      <user-id type="integer">40660</user-id>
      <version type="integer">22</version>
      <user-name>Lenary</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Wide range of web hosting services are accessible, such as cheap vps , email hosting, Unix hosting, &lt;a href=&quot;http://www.ucvhost.com/VPS/Forex/ForexVps.aspx&quot;&gt;forex vps&lt;/a&gt; , Windows hosting, Linux web hosting &lt;a href=&quot;http://www.ucvhost.com/VPS/EntryLevelVPS/EntryLevelVps.aspx&quot;&gt;windows vps&lt;/a&gt;   etc. We hope you will find a  &lt;a href=&quot;http://www.ucvhost.com/&quot;&gt;cheap hosting&lt;/a&gt; company.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Wide range of web hosting services are accessible, such as cheap
vps , email hosting, Unix hosting, &lt;a href=
&quot;http://www.ucvhost.com/VPS/Forex/ForexVps.aspx&quot;&gt;forex vps&lt;/a&gt; ,
Windows hosting, Linux web hosting &lt;a href=
&quot;http://www.ucvhost.com/VPS/EntryLevelVPS/EntryLevelVps.aspx&quot;&gt;windows
vps&lt;/a&gt; etc. We hope you will find a &lt;a href=
&quot;http://www.ucvhost.com/&quot;&gt;cheap hosting&lt;/a&gt; company.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-01T15:11:30+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-01T15:14:04+00:00</updated-at>
      <user-id type="integer">139262</user-id>
      <version type="integer">23</version>
      <user-name>piter</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci sneakers&lt;/a&gt; gucci sneakers
&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci shoes&lt;/a&gt; gucci shoes
&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci outlet&lt;/a&gt; gucci outlet&lt;
&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci shoes for sale&lt;/a&gt; gucci shoes for sale</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci sneakers&lt;/a&gt;
gucci sneakers&lt;br&gt;
&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci shoes&lt;/a&gt; gucci
shoes&lt;br&gt;
&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci outlet&lt;/a&gt; gucci
outlet&amp;lt;&lt;br&gt;
&lt;a href=&quot;http://www.guccioutletkey.com/&quot;&gt;gucci shoes for sale&lt;/a&gt;
gucci shoes for sale&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-03T08:06:19+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-03T09:20:22+00:00</updated-at>
      <user-id type="integer">139624</user-id>
      <version type="integer">24</version>
      <user-name>cheap coach bags</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am also having problems with the Time Zone issue especially when combined with daylight savings time.  It seems that the DST does not take into account today's date, only the date that you are parsing.  Example below:

(same output in both a rails 2.3.5 and 3.0.3 console)

&gt;&gt; Time.zone
=&gt; #&lt;ActiveSupport::TimeZone:0x1055848b8 @utc_offset=nil, @name=&quot;Eastern Time (US &amp; Canada)&quot;, @current_period=nil, @tzinfo=#&lt;TZInfo::TimezoneProxy: America/New_York&gt;&gt;
&gt;&gt; Time.zone.now
=&gt; Wed, 09 Mar 2011 10:30:19 EST -05:00
&gt;&gt; Time.zone.parse(&quot;2011-03-09 18:00:00&quot;)
=&gt; Thu, 09 Mar 2011 18:00:00 EST -05:00
&gt;&gt; Time.zone.parse(&quot;2011-03-12 18:00:00&quot;)
=&gt; Sat, 12 Mar 2011 18:00:00 EST -05:00
&gt;&gt; Time.zone.parse(&quot;2011-03-13 18:00:00&quot;)
=&gt; Sun, 13 Mar 2011 18:00:00 EDT -04:00

So, today is March 9, DST for EST kicks in on 03/13 at 2am.  However when I parse a Date of '2033-03-13 18:00:00' on the 9th it is already showing that time with the EDT offset when this should not kick in until the 13th.  It should continue to show times in EST until we are actually in EDT time.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am also having problems with the Time Zone issue especially
when combined with daylight savings time. It seems that the DST
does not take into account today's date, only the date that you are
parsing. Example below:&lt;/p&gt;
&lt;p&gt;(same output in both a rails 2.3.5 and 3.0.3 console)&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Time.zone =&amp;gt; #&amp;lt;ActiveSupport::TimeZone:0x1055848b8
@utc_offset=nil, @name=&quot;Eastern Time (US &amp;amp; Canada)&quot;,
@current_period=nil, @tzinfo=#&amp;lt;TZInfo::TimezoneProxy:
America/New_York&amp;gt;&amp;gt; Time.zone.now =&amp;gt; Wed, 09 Mar 2011
10:30:19 EST -05:00 Time.zone.parse(&quot;2011-03-09 18:00:00&quot;) =&amp;gt;
Thu, 09 Mar 2011 18:00:00 EST -05:00 Time.zone.parse(&quot;2011-03-12
18:00:00&quot;) =&amp;gt; Sat, 12 Mar 2011 18:00:00 EST -05:00
Time.zone.parse(&quot;2011-03-13 18:00:00&quot;) =&amp;gt; Sun, 13 Mar 2011
18:00:00 EDT -04:00&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, today is March 9, DST for EST kicks in on 03/13 at 2am.
However when I parse a Date of '2033-03-13 18:00:00' on the 9th it
is already showing that time with the EDT offset when this should
not kick in until the 13th. It should continue to show times in EST
until we are actually in EDT time.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-09T15:35:44+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-09T15:35:53+00:00</updated-at>
      <user-id type="integer">23816</user-id>
      <version type="integer">25</version>
      <user-name>Tom Cocca</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The fact that Time.zone uses `Thread.current` to set the time zone means that Rails will not share this state across threads -- in other words, this is not a global setting. It will, however, share this state across *requests*, because Rails does not spawn a new thread for each request. Rails reuses existing threads to serve subsequent requests once the current request has completed.

This behavior is definitely a bit of a gotcha, and maybe it's a failing in the ActionController implementation, but you **have** to remember to either a.) set Time.zone at the beginning of *every* request, or b.) unset `Time.zone` after every request (via an around filter). The reason is that once the current request has been served, that Thread will stay alive and process another request, and any state saved in `Thread.current` (including the time zone information) will be available in the next request. 

So yes, some state is shared from one request to the next, but it's within the same Thread. In other words, Rails **is** thread-safe in this area (because a single thread will only serve one request at a time), but your application code may not be. 

FWIW, we ran into this exact same problem, so I know where you're coming from ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;The fact that Time.zone uses &lt;code&gt;Thread.current&lt;/code&gt; to set
the time zone means that Rails will not share this state across
threads -- in other words, this is not a global setting. It will,
however, share this state across &lt;em&gt;requests&lt;/em&gt;, because Rails
does not spawn a new thread for each request. Rails reuses existing
threads to serve subsequent requests once the current request has
completed.&lt;/p&gt;
&lt;p&gt;This behavior is definitely a bit of a gotcha, and maybe it's a
failing in the ActionController implementation, but you
&lt;strong&gt;have&lt;/strong&gt; to remember to either a.) set Time.zone at
the beginning of &lt;em&gt;every&lt;/em&gt; request, or b.) unset
&lt;code&gt;Time.zone&lt;/code&gt; after every request (via an around filter).
The reason is that once the current request has been served, that
Thread will stay alive and process another request, and any state
saved in &lt;code&gt;Thread.current&lt;/code&gt; (including the time zone
information) will be available in the next request.&lt;/p&gt;
&lt;p&gt;So yes, some state is shared from one request to the next, but
it's within the same Thread. In other words, Rails
&lt;strong&gt;is&lt;/strong&gt; thread-safe in this area (because a single
thread will only serve one request at a time), but your application
code may not be.&lt;/p&gt;
&lt;p&gt;FWIW, we ran into this exact same problem, so I know where
you're coming from ;)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-15T18:33:32+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-15T18:33:42+00:00</updated-at>
      <user-id type="integer">94718</user-id>
      <version type="integer">26</version>
      <user-name>Alex Sharp</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>As Alex has pointed out, #1 is not a bug or an issue, Rails is Thread safe and as long as you take Alexs advice into account you will be fine.

As Szymon pointed out, #2 is not an issue either as AR behaves as it should with respect to timezones.

I am closing this issue as invalid. 

If you can provide a failing test case for either issue then please open a new issue keeping the scope of the issue to a single point.

Thanks,

Josh</body>
      <body-html>&lt;div&gt;&lt;p&gt;As Alex has pointed out, &lt;a href=&quot;/projects/8994/tickets/1&quot;
title=&quot;Ticket #1&quot;&gt;#1&lt;/a&gt; is not a bug or an issue, Rails is Thread
safe and as long as you take Alexs advice into account you will be
fine.&lt;/p&gt;
&lt;p&gt;As Szymon pointed out, &lt;a href=&quot;/projects/8994/tickets/2&quot; title=
&quot;Ticket #2&quot;&gt;#2&lt;/a&gt; is not an issue either as AR behaves as it
should with respect to timezones.&lt;/p&gt;
&lt;p&gt;I am closing this issue as invalid.&lt;/p&gt;
&lt;p&gt;If you can provide a failing test case for either issue then
please open a new issue keeping the scope of the issue to a single
point.&lt;/p&gt;
&lt;p&gt;Thanks,&lt;/p&gt;
&lt;p&gt;Josh&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-16T18:27:59+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-16T18:28:13+00:00</updated-at>
      <user-id type="integer">19117</user-id>
      <version type="integer">27</version>
      <user-name>Josh Kalderimis</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton watches&lt;/a&gt;&lt;/b&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton
watches&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-26T02:00:24+00:00</created-at>
      <creator-id type="integer">130936</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6246</number>
      <permalink>timezone-is-broken-in-most-every-version-of-rails-including-3x</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag nil="true"></tag>
      <title>Time.zone is broken in most every version of rails including 3.x</title>
      <updated-at type="datetime">2011-03-26T02:13:11+00:00</updated-at>
      <user-id type="integer">142823</user-id>
      <version type="integer">28</version>
      <user-name>bingbing</user-name>
      <creator-name>Jay Crouch</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6246</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
