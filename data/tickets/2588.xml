<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">14998</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-04-29T22:31:21+01:00</created-at>
  <creator-id type="integer">10433</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">2588</number>
  <permalink>actionmailer-if-inside-for-</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>actionmailer bug template view</tag>
  <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
  <updated-at type="datetime">2010-10-16T23:42:27+01:00</updated-at>
  <user-id type="integer">81551</user-id>
  <version type="integer">8</version>
  <user-name>Andrea Campi</user-name>
  <creator-name>James B. Byrne</creator-name>
  <assigned-user-name>Ryan Bigg</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
  <milestone-title>3.x</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>When using an &lt;% if true -%&gt; construct inside a &lt;% for x in y -%&gt; loop in an ActionMailer view template extra lines and spurious '=' characters are injected into the output.

@@@
&lt;% if true -%&gt;
  &lt;%= &quot;print this&quot; %&gt;
&lt;% end -%&gt;

&lt;% for y in @x -%&gt;
  &lt;% if true -%&gt;
    &lt;%= &quot;print this&quot; %&gt;
  &lt;% end -%&gt;
&lt;% end -%&gt;

gives this:

  print this

                                                                         =
                                 print this
              =

@@@</original-body>
  <latest-body>When using an &lt;% if true -%&gt; construct inside a &lt;% for x in y -%&gt; loop in an ActionMailer view template extra lines and spurious '=' characters are injected into the output.

@@@
&lt;% if true -%&gt;
  &lt;%= &quot;print this&quot; %&gt;
&lt;% end -%&gt;

&lt;% for y in @x -%&gt;
  &lt;% if true -%&gt;
    &lt;%= &quot;print this&quot; %&gt;
  &lt;% end -%&gt;
&lt;% end -%&gt;

gives this:

  print this

                                                                         =
                                 print this
              =

@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When using an &amp;lt;% if true -%&amp;gt; construct inside a &amp;lt;% for
x in y -%&amp;gt; loop in an ActionMailer view template extra lines and
spurious '=' characters are injected into the output.&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% if true -%&amp;gt;
  &amp;lt;%= &amp;quot;print this&amp;quot; %&amp;gt;
&amp;lt;% end -%&amp;gt;

&amp;lt;% for y in @x -%&amp;gt;
  &amp;lt;% if true -%&amp;gt;
    &amp;lt;%= &amp;quot;print this&amp;quot; %&amp;gt;
  &amp;lt;% end -%&amp;gt;
&amp;lt;% end -%&amp;gt;

gives this:

  print this

                                                                         =
                                 print this
              =

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When using an &lt;% if true -%&gt; construct inside a &lt;% for x in y -%&gt; loop in an ActionMailer view template extra lines and spurious '=' characters are injected into the output.

@@@
&lt;% if true -%&gt;
  &lt;%= &quot;print this&quot; %&gt;
&lt;% end -%&gt;

&lt;% for y in @x -%&gt;
  &lt;% if true -%&gt;
    &lt;%= &quot;print this&quot; %&gt;
  &lt;% end -%&gt;
&lt;% end -%&gt;

gives this:

  print this

                                                                         =
                                 print this
              =

@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;When using an &amp;lt;% if true -%&amp;gt; construct inside a &amp;lt;% for
x in y -%&amp;gt; loop in an ActionMailer view template extra lines and
spurious '=' characters are injected into the output.&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% if true -%&amp;gt;
  &amp;lt;%= &amp;quot;print this&amp;quot; %&amp;gt;
&amp;lt;% end -%&amp;gt;

&amp;lt;% for y in @x -%&amp;gt;
  &amp;lt;% if true -%&amp;gt;
    &amp;lt;%= &amp;quot;print this&amp;quot; %&amp;gt;
  &amp;lt;% end -%&amp;gt;
&amp;lt;% end -%&amp;gt;

gives this:

  print this

                                                                         =
                                 print this
              =

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-30T20:30:32+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2009-04-30T20:30:36+01:00</updated-at>
      <user-id type="integer">10433</user-id>
      <version type="integer">1</version>
      <user-name>James B. Byrne</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This needs to be confirmed as a bug and a patch to be written if it is.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This needs to be confirmed as a bug and a patch to be written if
it is.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-29T22:31:21+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2.3.2 actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2010-04-29T22:31:48+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">2</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am curious about the date that this issue claims to have been opened, 2010 April 29.  As I recall, I reported this about a year ago but in any case it certainly was not yesterday.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am curious about the date that this issue claims to have been
opened, 2010 April 29. As I recall, I reported this about a year
ago but in any case it certainly was not yesterday.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-30T13:54:19+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 actionmailer bug template view
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2 actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2010-04-30T13:54:21+01:00</updated-at>
      <user-id type="integer">10433</user-id>
      <version type="integer">3</version>
      <user-name>James B. Byrne</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am going from memory here as I can no longer find my notes or email exchanges regarding this subject.  Sic transit ephemera.

As I recall, I did not consider that TMail includes all of the space found in the view template lines that get expressed when the variable is filled in.  When the length of the resulting line exceeds 80 characters, or whatever the line limit is in TMail, the line is broken into two and wraps.  The  = character is what the mail reader displays for such breaks.

So, I no longer consider this a bug as such, just a confusing intersection of coding and output.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am going from memory here as I can no longer find my notes or
email exchanges regarding this subject. Sic transit ephemera.&lt;/p&gt;
&lt;p&gt;As I recall, I did not consider that TMail includes all of the
space found in the view template lines that get expressed when the
variable is filled in. When the length of the resulting line
exceeds 80 characters, or whatever the line limit is in TMail, the
line is broken into two and wraps. The = character is what the mail
reader displays for such breaks.&lt;/p&gt;
&lt;p&gt;So, I no longer consider this a bug as such, just a confusing
intersection of coding and output.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-30T15:49:41+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2 actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2010-04-30T15:49:47+01:00</updated-at>
      <user-id type="integer">10433</user-id>
      <version type="integer">4</version>
      <user-name>James B. Byrne</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:48+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2 actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2010-05-04T18:48:48+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">5</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>based on the commentary above, this can be marked as &quot;wontfix&quot; or &quot;invalid&quot;</body>
      <body-html>&lt;div&gt;&lt;p&gt;based on the commentary above, this can be marked as &quot;wontfix&quot;
or &quot;invalid&quot;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-09T18:09:55+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2 actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2010-05-09T18:09:56+01:00</updated-at>
      <user-id type="integer">22242</user-id>
      <version type="integer">6</version>
      <user-name>Dan Pickett</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-09T22:29:00+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2 actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2010-05-09T22:29:03+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">7</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-16T23:42:25+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:tag: 2 actionmailer bug template view
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2588</number>
      <permalink>actionmailer-if-inside-for-</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>actionmailer bug template view</tag>
      <title>ActionMailer &lt;% if -%&gt; inside &lt;% for -%&gt; </title>
      <updated-at type="datetime">2010-10-16T23:42:27+01:00</updated-at>
      <user-id type="integer">81551</user-id>
      <version type="integer">8</version>
      <user-name>Andrea Campi</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2588</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
