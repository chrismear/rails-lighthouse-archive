<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">6</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-14T07:28:42+00:00</created-at>
  <creator-id type="integer">94532</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">82855</milestone-id>
  <number type="integer">4367</number>
  <permalink>using-sinatra-as-middleware-fails</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>2-3-stable bugmash patch</tag>
  <title>[PATCH] Using Sinatra as middleware fails</title>
  <updated-at type="datetime">2011-02-14T07:28:42+00:00</updated-at>
  <user-id type="integer">19965</user-id>
  <version type="integer">26</version>
  <user-name>Jos&#233; Valim</user-name>
  <creator-name>jaswope</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
  <milestone-title>2.3.10</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>When trying to use Sinatra (or any rack middleware that is capable of running as a singleton) the app stack fails to initialize.  This is due to the middleware stack using #respond_to?(:call) to test if a piece of middleware is a Proc.  Since Sinatra can respond to call without being initialized, and because it requires the Rack environment to be passed to it, the initialization.

Attached is a proposed patch to replace #respond_to?(:call) with #is_a?(Proc).  Tests still pass after this change, and I have made the change using 2-3-stable as my base.</original-body>
  <latest-body>When trying to use Sinatra (or any rack middleware that is capable of running as a singleton) the app stack fails to initialize.  This is due to the middleware stack using #respond_to?(:call) to test if a piece of middleware is a Proc.  Since Sinatra can respond to call without being initialized, and because it requires the Rack environment to be passed to it, the initialization.

Attached is a proposed patch to replace #respond_to?(:call) with #is_a?(Proc).  Tests still pass after this change, and I have made the change using 2-3-stable as my base.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When trying to use Sinatra (or any rack middleware that is
capable of running as a singleton) the app stack fails to
initialize. This is due to the middleware stack using
#respond_to?(:call) to test if a piece of middleware is a Proc.
Since Sinatra can respond to call without being initialized, and
because it requires the Rack environment to be passed to it, the
initialization.&lt;/p&gt;
&lt;p&gt;Attached is a proposed patch to replace #respond_to?(:call) with
#is_a?(Proc). Tests still pass after this change, and I have made
the change using 2-3-stable as my base.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When trying to use Sinatra (or any rack middleware that is capable of running as a singleton) the app stack fails to initialize.  This is due to the middleware stack using #respond_to?(:call) to test if a piece of middleware is a Proc.  Since Sinatra can respond to call without being initialized, and because it requires the Rack environment to be passed to it, the initialization.

Attached is a proposed patch to replace #respond_to?(:call) with #is_a?(Proc).  Tests still pass after this change, and I have made the change using 2-3-stable as my base.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When trying to use Sinatra (or any rack middleware that is
capable of running as a singleton) the app stack fails to
initialize. This is due to the middleware stack using
#respond_to?(:call) to test if a piece of middleware is a Proc.
Since Sinatra can respond to call without being initialized, and
because it requires the Rack environment to be passed to it, the
initialization.&lt;/p&gt;
&lt;p&gt;Attached is a proposed patch to replace #respond_to?(:call) with
#is_a?(Proc). Tests still pass after this change, and I have made
the change using 2-3-stable as my base.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-12T02:58:17+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-04-12T02:58:27+01:00</updated-at>
      <user-id type="integer">94532</user-id>
      <version type="integer">1</version>
      <user-name>jaswope</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-12T02:59:09+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: patch
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable patch</tag>
      <title>Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-04-12T02:59:11+01:00</updated-at>
      <user-id type="integer">94532</user-id>
      <version type="integer">2</version>
      <user-name>jaswope</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-13T02:46:54+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Using Sinatra as middleware fails
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-04-13T02:46:56+01:00</updated-at>
      <user-id type="integer">94532</user-id>
      <version type="integer">3</version>
      <user-name>jaswope</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This is handled in master by first checking for respond_to?(:new), the middleware convention:

@@@ ruby
def klass
  if @klass.respond_to?(:new)
    @klass
  elsif @klass.respond_to?(:call)
    @klass.call
  else
    ActiveSupport::Inflector.constantize(@klass.to_s)
  end
end
@@@

Perhaps do the same for 2.3? Maybe just backport the entire middleware stack?</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is handled in master by first checking for
respond_to?(:new), the middleware convention:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;def klass
  if @klass.respond_to?(:new)
    @klass
  elsif @klass.respond_to?(:call)
    @klass.call
  else
    ActiveSupport::Inflector.constantize(@klass.to_s)
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Perhaps do the same for 2.3? Maybe just backport the entire
middleware stack?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-13T04:06:12+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-04-13T04:06:13+01:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">4</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20088)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20088&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T02:41:12+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2-3-stable patch
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T02:41:12+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">5</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I am able to do this

&#955; cat config.ru 

@@@ ruby
require &quot;config/environment&quot;
require 'sinatra'

use Rack::Reloader
use Sinatra::Application
use Rails::Rack::LogTailer
use Rails::Rack::Static
use Rack::CommonLogger
run ActionController::Dispatcher.new

@@@

Attached is a app showing it's running properly.

Am I missing something here?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am able to do this&lt;/p&gt;
&lt;p&gt;&amp;lambda; cat config.ru&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;require &quot;config/environment&quot;
require 'sinatra'

use Rack::Reloader
use Sinatra::Application
use Rails::Rack::LogTailer
use Rails::Rack::Static
use Rack::CommonLogger
run ActionController::Dispatcher.new&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Attached is a app showing it's running properly.&lt;/p&gt;
&lt;p&gt;Am I missing something here?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T14:55:50+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T14:55:52+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">6</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Can someone provide a patch with the fix mentioned by Yehuda on 2-3-stable?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can someone provide a patch with the fix mentioned by Yehuda on
2-3-stable?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T15:55:49+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 12714
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T15:55:51+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">7</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T16:18:31+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T16:18:33+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">8</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Attached is a patch to backport middleware stack from Rails 3 to Rails 2-3. All the tests pass fine.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached is a patch to backport middleware stack from Rails 3 to
Rails 2-3. All the tests pass fine.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T16:54:57+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T16:55:00+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">9</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Hey Anil, 

Nice work. There are some tests in middleware_stack_test you might want backport as well. Just the ones we need.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Anil,&lt;/p&gt;
&lt;p&gt;Nice work. There are some tests in middleware_stack_test you
might want backport as well. Just the ones we need.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T16:57:07+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T16:57:12+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">10</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>There is no need to backport the whole middleware stack. And as Rizwan said, it would be good to backport the relative tests as well.</body>
      <body-html>&lt;div&gt;&lt;p&gt;There is no need to backport the whole middleware stack. And as
Rizwan said, it would be good to backport the relative tests as
well.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T17:01:59+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T17:02:02+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">11</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Attached is a patch which backports a test from Rails 3 middleware stack to Rails 2-3

Also I don't see any code which I should remove from the 'backport_middleware_stack' patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached is a patch which backports a test from Rails 3
middleware stack to Rails 2-3&lt;/p&gt;
&lt;p&gt;Also I don't see any code which I should remove from the
'backport_middleware_stack' patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T17:33:42+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T17:33:44+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">12</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Anil, your patch, for instance, change the build method to allow a block to be given. But there are no tests for it in your patch. Also there are not tests for the case described in this ticket. So if we backport all these, we need to add the respective tests. Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Anil, your patch, for instance, change the build method to allow
a block to be given. But there are no tests for it in your patch.
Also there are not tests for the case described in this ticket. So
if we backport all these, we need to add the respective tests.
Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T17:41:47+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T17:41:48+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">13</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Okay I will add patch with necessary tests.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Okay I will add patch with necessary tests.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T17:50:17+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-16T17:50:19+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">14</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20606)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20606&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-23T17:54:45+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 50064
</diffable-attributes>
      <milestone-id type="integer">73241</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-23T17:54:45+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">15</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.7</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20631)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20631&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-24T09:40:53+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 73241
</diffable-attributes>
      <milestone-id type="integer">73273</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-24T09:40:53+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">16</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.8</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20816)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20816&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-25T23:45:40+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 73273
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-05-25T23:45:40+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">17</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Anil, you just need to backport the part relative to the naming (that Yehuda posted) and not the whole middleware stack. Still willing to try out a patch?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Anil, you just need to backport the part relative to the naming
(that Yehuda posted) and not the whole middleware stack. Still
willing to try out a patch?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-07T10:03:36+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-06-07T10:03:47+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">18</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>okay Jose, I will try to provide the patch soon.</body>
      <body-html>&lt;div&gt;&lt;p&gt;okay Jose, I will try to provide the patch soon.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-07T10:52:56+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-06-07T10:53:08+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">19</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Jos&#233;, I have attached a patch which fixes this issue. 

I could not find way to write tests for it. Even in Rails 3 master seems that there are no tests which tests @klass.respond_to?(:call) which I could just refer to. If there are any, can you tell me where are those.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jos&amp;eacute;, I have attached a patch which fixes this issue.&lt;/p&gt;
&lt;p&gt;I could not find way to write tests for it. Even in Rails 3
master seems that there are no tests which tests
@klass.respond_to?(:call) which I could just refer to. If there are
any, can you tell me where are those.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-08T17:44:55+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-06-08T17:45:03+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">20</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@Anil Can you post an app which uses Sinatra as a middleware and fails without the patch. I don't fully understand rack stuff and an app demonstrating the problem would be helpful.

I am close to finishing writing test case for the patch you added. However a deeper understanding of the problem would help me write better test. Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Anil Can you post an app which uses Sinatra as a middleware and
fails without the patch. I don't fully understand rack stuff and an
app demonstrating the problem would be helpful.&lt;/p&gt;
&lt;p&gt;I am close to finishing writing test case for the patch you
added. However a deeper understanding of the problem would help me
write better test. Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-11T20:31:03+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-06-11T20:31:15+01:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">21</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Neeraj, Attached is a rails app which fails on Rails 2.3.8 without my fix (try to access http://localhost:3000/). 
I am eager to see the test patch you have writteen for the fix :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Neeraj, Attached is a rails app which fails on Rails 2.3.8
without my fix (try to access &lt;a href=
&quot;http://localhost:3000/)&quot;&gt;http://localhost:3000/)&lt;/a&gt;.&lt;br&gt;
I am eager to see the test patch you have writteen for the fix
:)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-11T21:31:52+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-06-11T21:32:04+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">22</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>Neeraj, any update on the test patch?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Neeraj, any update on the test patch?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T16:53:47+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-06-23T16:53:59+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">23</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>Hey Anil,

Thanks for providing the app but I couldn't create the tests.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Anil,&lt;/p&gt;
&lt;p&gt;Thanks for providing the app but I couldn't create the
tests.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T17:22:16+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-06-23T17:22:30+01:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">24</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/27613)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/27613&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-30T02:28:51+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 73534
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-08-30T02:28:51+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">25</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-02T10:56:18+01:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2010-09-02T10:56:24+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">26</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>thank you very much......&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/&quot;&gt;&#1605;&#1606;&#1578;&#1583;&#1610;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&#1605;&#1603;&#1610;&#1575;&#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1575;&#1586;&#1610;&#1575;&#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1601;&#1587;&#1575;&#1578;&#1610;&#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&#1585;&#1587;&#1575;&#1574;&#1604; 
- &#1605;&#1587;&#1580;&#1575;&#1578; - &#1608;&#1587;&#1575;&#1574;&#1591;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&#1578;&#1608;&#1576;&#1610;&#1603;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&#1608;&#1592;&#1575;&#1574;&#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&#1576;&#1585;&#1608;&#1603;&#1587;&#1610;&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt; &lt;a href=&quot;http://forum.line-sport.tv/&quot;&gt;&#1604;&#1575;&#1610;&#1606; &#1587;&#1576;&#1608;&#1585;&#1578;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;thank you very much......&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/&quot;&gt;&amp;#1605;&amp;#1606;&amp;#1578;&amp;#1583;&amp;#1610;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&amp;#1605;&amp;#1603;&amp;#1610;&amp;#1575;&amp;#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1575;&amp;#1586;&amp;#1610;&amp;#1575;&amp;#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1601;&amp;#1587;&amp;#1575;&amp;#1578;&amp;#1610;&amp;#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&amp;#1585;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1604;&lt;br&gt;
- &amp;#1605;&amp;#1587;&amp;#1580;&amp;#1575;&amp;#1578; -
&amp;#1608;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1591;&lt;/a&gt;&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&amp;#1578;&amp;#1608;&amp;#1576;&amp;#1610;&amp;#1603;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&amp;#1608;&amp;#1592;&amp;#1575;&amp;#1574;&amp;#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt;
&lt;a href=
&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&amp;#1576;&amp;#1585;&amp;#1608;&amp;#1603;&amp;#1587;&amp;#1610;&lt;/a&gt;
&lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt; &lt;a href=
&quot;http://forum.line-sport.tv/&quot;&gt;&amp;#1604;&amp;#1575;&amp;#1610;&amp;#1606;
&amp;#1587;&amp;#1576;&amp;#1608;&amp;#1585;&amp;#1578;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-08T11:25:03+00:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2011-02-08T12:16:08+00:00</updated-at>
      <user-id type="integer">136126</user-id>
      <version type="integer">27</version>
      <user-name>alasiri1</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;You may also study the actual seems inside the Pandora charms as a result &lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;of add-on including cherished jewels, crimson along with amethyst,&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/pandora-bracelets-c-3.html&quot;&gt;&lt;em&gt;Pandoras Bracelets&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; whichever satisfies ones money your identity. In order a lot more solutions, it is best to look at silver charms provided simply by Pandora.&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/pandora-charms-c-9.html&quot;&gt;&lt;em&gt;Pandora&#160;Charms&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; Couldn't everyone appearance great understand a majority of these &lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;earrings which can be created together with your manufacturer,&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;pandora ireland&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; initials or simply brief?</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;You
may also study the actual seems inside the Pandora charms as a
result &lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora
NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;of add-on including cherished jewels, crimson
along with amethyst,&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/pandora-bracelets-c-3.html&quot;&gt;&lt;em&gt;Pandoras
Bracelets&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; whichever satisfies ones money your
identity. In order a lot more solutions, it is best to look at
silver charms provided simply by Pandora.&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/pandora-charms-c-9.html&quot;&gt;&lt;em&gt;Pandora&amp;nbsp;Charms&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;
Couldn't everyone appearance great understand a majority of these
&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora
NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;earrings which can be created together with
your manufacturer,&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;pandora
ireland&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; initials or simply brief?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-14T06:09:33+00:00</created-at>
      <creator-id type="integer">94532</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4367</number>
      <permalink>using-sinatra-as-middleware-fails</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>2-3-stable bugmash patch</tag>
      <title>[PATCH] Using Sinatra as middleware fails</title>
      <updated-at type="datetime">2011-02-14T07:28:42+00:00</updated-at>
      <user-id type="integer">136876</user-id>
      <version type="integer">28</version>
      <user-name>pandora jewellry</user-name>
      <creator-name>jaswope</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4367</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>508a4f40a0de0c8307bb11a289ae7d7edf191d17</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-04-12T02:58:17+01:00</created-at>
      <filename>middleware_fix.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">478562</id>
      <size type="integer">858</size>
      <uploader-id type="integer">94532</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/478562/middleware_fix.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>77db9469fe57a391e83bc00ad85795112ea96bdc</code>
      <content-type>application/zip</content-type>
      <created-at type="datetime">2010-05-16T14:55:50+01:00</created-at>
      <filename>sinatra_middleware_4367.zip</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">522880</id>
      <size type="integer">97334</size>
      <uploader-id type="integer">1300</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/522880/sinatra_middleware_4367.zip</url>
    </attachment>
    <attachment type="Attachment">
      <code>5bc9ec5e1ec4121ae5e9d6e4a0434869c30f638f</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-16T16:54:57+01:00</created-at>
      <filename>backport_middleware_stack.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">522909</id>
      <size type="integer">2981</size>
      <uploader-id type="integer">1300</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/522909/backport_middleware_stack.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>300c910ef595e9799887a5a52f572c9327277cdb</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-16T17:33:42+01:00</created-at>
      <filename>backport_middleware_stack_test.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">522912</id>
      <size type="integer">1008</size>
      <uploader-id type="integer">1300</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/522912/backport_middleware_stack_test.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>344cb39bcad1e17000006c66f7ac7f1230f7c871</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-08T17:44:55+01:00</created-at>
      <filename>0001-fix-failing-of-sinatra-as-middleware-4367.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">551174</id>
      <size type="integer">1080</size>
      <uploader-id type="integer">1300</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/551174/0001-fix-failing-of-sinatra-as-middleware-4367.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>45349d7e5eba9d2ec25395371e6526c611e152d1</code>
      <content-type>application/zip</content-type>
      <created-at type="datetime">2010-06-11T21:31:52+01:00</created-at>
      <filename>sinatra_middleware.zip</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">556729</id>
      <size type="integer">95323</size>
      <uploader-id type="integer">1300</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/556729/sinatra_middleware.zip</url>
    </attachment>
  </attachments>
</ticket>
