<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">141</assigned-user-id>
  <attachments-count type="integer">4</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-04-29T19:29:35+01:00</created-at>
  <creator-id type="integer">1023</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">63</number>
  <permalink>bug-rake-db-create-and-observers</permalink>
  <priority type="integer">12256</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>activerecord bug create_database databases.rake patch rake</tag>
  <title>[BUG] rake db:create and observers</title>
  <updated-at type="datetime">2008-12-01T20:40:32+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">14</version>
  <user-name>Repository</user-name>
  <creator-name>Ian White</creator-name>
  <assigned-user-name>Michael Koziarski</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
  <priority-name nil="true"></priority-name>
  <original-body>If you have an observer, then doing rake db:create in some circumstances (one is described below) causes rail to die with 'unknown database'.

Obviously a circular dependency problem.

I've been poking around the test suite, and can't seem to find the right place for testing this, can anyone offer any pointers?

The problem can be reproduced with (fresh rails app, with dbs wiped)

@@@ ruby
config/environment.rb:
  config.active_record.observers = :user_observer

app/models/user.rb
  class User &lt; ActiveRecord::Base
    has_many :posts, :conditions =&gt; ['posts.published = ?', true], :order =&gt; 'updated_at DESC', :dependent =&gt; :destroy
  end

app/models/user_observer.rb
  class UserObserver &lt; ActiveRecord::Observer
  end
@@@</original-body>
  <latest-body>If you have an observer, then doing rake db:create in some circumstances (one is described below) causes rail to die with 'unknown database'.

Obviously a circular dependency problem.

I've been poking around the test suite, and can't seem to find the right place for testing this, can anyone offer any pointers?

The problem can be reproduced with (fresh rails app, with dbs wiped)

@@@ ruby
config/environment.rb:
  config.active_record.observers = :user_observer

app/models/user.rb
  class User &lt; ActiveRecord::Base
    has_many :posts, :conditions =&gt; ['posts.published = ?', true], :order =&gt; 'updated_at DESC', :dependent =&gt; :destroy
  end

app/models/user_observer.rb
  class UserObserver &lt; ActiveRecord::Observer
  end
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
If you have an observer, then doing rake db:create in some circumstances (one is described below) causes rail to die with 'unknown database'.
&lt;/p&gt;&lt;p&gt;
Obviously a circular dependency problem.
&lt;/p&gt;&lt;p&gt;
I've been poking around the test suite, and can't seem to find the right place for testing this, can anyone offer any pointers?
&lt;/p&gt;&lt;p&gt;
The problem can be reproduced with (fresh rails app, with dbs wiped)
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;config/environment.rb:
  config.active_record.observers = :user_observer

app/models/user.rb
  class User &amp;lt; ActiveRecord::Base
    has_many :posts, :conditions =&amp;gt; ['posts.published = ?', true], :order =&amp;gt; 'updated_at DESC', :dependent =&amp;gt; :destroy
  end

app/models/user_observer.rb
  class UserObserver &amp;lt; ActiveRecord::Observer
  end&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If you have an observer, then doing rake db:create in some circumstances (one is described below) causes rail to die with 'unknown database'.

Obviously a circular dependency problem.

I've been poking around the test suite, and can't seem to find the right place for testing this, can anyone offer any pointers?

The problem can be reproduced with (fresh rails app, with dbs wiped)

@@@ ruby
config/environment.rb:
  config.active_record.observers = :user_observer

app/models/user.rb
  class User &lt; ActiveRecord::Base
    has_many :posts, :conditions =&gt; ['posts.published = ?', true], :order =&gt; 'updated_at DESC', :dependent =&gt; :destroy
  end

app/models/user_observer.rb
  class UserObserver &lt; ActiveRecord::Observer
  end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;
If you have an observer, then doing rake db:create in some circumstances (one is described below) causes rail to die with 'unknown database'.
&lt;/p&gt;&lt;p&gt;
Obviously a circular dependency problem.
&lt;/p&gt;&lt;p&gt;
I've been poking around the test suite, and can't seem to find the right place for testing this, can anyone offer any pointers?
&lt;/p&gt;&lt;p&gt;
The problem can be reproduced with (fresh rails app, with dbs wiped)
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;config/environment.rb:
  config.active_record.observers = :user_observer

app/models/user.rb
  class User &amp;lt; ActiveRecord::Base
    has_many :posts, :conditions =&amp;gt; ['posts.published = ?', true], :order =&amp;gt; 'updated_at DESC', :dependent =&amp;gt; :destroy
  end

app/models/user_observer.rb
  class UserObserver &amp;lt; ActiveRecord::Observer
  end&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-04-29T19:29:35+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-04-29T19:29:35+01:00</updated-at>
      <user-id type="integer">1023</user-id>
      <version type="integer">1</version>
      <user-name>Ian White</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Can you post a stack trace by using rake --trace.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Can you post a stack trace by using rake --trace.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-04T01:47:41+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-05-04T01:47:41+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">2</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-04T01:47:48+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-05-04T01:47:48+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">3</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Stack trace below

I've attached a git diff of what I had to add to a fresh rails app (6a6b439 Sun Apr 20 12:57:36 2008 +0800) to get the problem to occur.

I'd be happy to investigate, but couldn't find the obvious place to start adding tests.

@@@ruby

~/dev/sandbox/ticket63(master)$ rake db:create --trace
(in /Users/ian/dev/sandbox/ticket63)
** Invoke db:create (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
Unknown database 'ticket63_development'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:505:in `real_connect'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:505:in `connect'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:183:in `initialize'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:88:in `new'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:88:in `mysql_connection'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:292:in `send'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:292:in `connection='
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:260:in `retrieve_connection'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2067:in `quote_bound_value'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2035:in `replace_bind_variables'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2035:in `gsub'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2035:in `replace_bind_variables'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2024:in `sanitize_sql_array'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:1921:in `sanitize_sql'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/associations.rb:1249:in `configure_dependency_for_has_many'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/associations.rb:700:in `has_many'
/Users/ian/dev/sandbox/ticket63/app/models/user.rb:2
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:214:in `load_without_new_constant_marking'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:214:in `load_file'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:353:in `new_constants_in'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:213:in `load_file'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:94:in `require_or_load'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:259:in `load_missing_constant'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:466:in `const_missing'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:478:in `const_missing'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/inflector.rb:271:in `constantize'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/core_ext/string/inflections.rb:143:in `constantize'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:157:in `observed_class'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:183:in `observed_classes'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:166:in `initialize'
/opt/local/lib/ruby/1.8/singleton.rb:95:in `new'
/opt/local/lib/ruby/1.8/singleton.rb:95:in `instance'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:38:in `instantiate_observers'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:36:in `each'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:36:in `instantiate_observers'
/Users/ian/dev/sandbox/ticket63/vendor/rails/actionpack/lib/action_controller/dispatcher.rb:26:in `define_dispatcher_callbacks'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:177:in `call'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:177:in `evaluate_method'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:161:in `call'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `run'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `each'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `send'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `run'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:272:in `run_callbacks'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:460:in `send'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:460:in `prepare_dispatcher'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:146:in `process'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:89:in `send'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:89:in `run'
/Users/ian/dev/sandbox/ticket63/config/environment.rb:13
/opt/local/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
/opt/local/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:27:in `require'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:508:in `require'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:353:in `new_constants_in'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:508:in `require'
/Users/ian/dev/sandbox/ticket63/vendor/rails/railties/lib/tasks/misc.rake:3
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:546:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:546:in `execute'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:541:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:541:in `execute'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:508:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:518:in `invoke_prerequisites'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1183:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1183:in `send'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1183:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:515:in `invoke_prerequisites'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:507:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:494:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1931:in `invoke_task'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1909:in `top_level'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1909:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1909:in `top_level'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1948:in `standard_exception_handling'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1903:in `top_level'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1881:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1948:in `standard_exception_handling'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1878:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/bin/rake:31
/opt/local/bin/rake:16:in `load'
/opt/local/bin/rake:16

@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Stack trace below
&lt;/p&gt;&lt;p&gt;
I've attached a git diff of what I had to add to a fresh rails app (6a6b439 Sun Apr 20 12:57:36 2008 +0800) to get the problem to occur.
&lt;/p&gt;&lt;p&gt;
I'd be happy to investigate, but couldn't find the obvious place to start adding tests.
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;uby&quot;&gt;
~/dev/sandbox/ticket63(master)$ rake db:create --trace
(in /Users/ian/dev/sandbox/ticket63)
** Invoke db:create (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
Unknown database 'ticket63_development'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:505:in `real_connect'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:505:in `connect'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:183:in `initialize'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:88:in `new'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:88:in `mysql_connection'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:292:in `send'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:292:in `connection='
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:260:in `retrieve_connection'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2067:in `quote_bound_value'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2035:in `replace_bind_variables'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2035:in `gsub'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2035:in `replace_bind_variables'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:2024:in `sanitize_sql_array'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/base.rb:1921:in `sanitize_sql'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/associations.rb:1249:in `configure_dependency_for_has_many'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/associations.rb:700:in `has_many'
/Users/ian/dev/sandbox/ticket63/app/models/user.rb:2
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:214:in `load_without_new_constant_marking'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:214:in `load_file'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:353:in `new_constants_in'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:213:in `load_file'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:94:in `require_or_load'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:259:in `load_missing_constant'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:466:in `const_missing'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:478:in `const_missing'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/inflector.rb:271:in `constantize'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/core_ext/string/inflections.rb:143:in `constantize'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:157:in `observed_class'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:183:in `observed_classes'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:166:in `initialize'
/opt/local/lib/ruby/1.8/singleton.rb:95:in `new'
/opt/local/lib/ruby/1.8/singleton.rb:95:in `instance'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:38:in `instantiate_observers'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:36:in `each'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activerecord/lib/active_record/observer.rb:36:in `instantiate_observers'
/Users/ian/dev/sandbox/ticket63/vendor/rails/actionpack/lib/action_controller/dispatcher.rb:26:in `define_dispatcher_callbacks'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:177:in `call'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:177:in `evaluate_method'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:161:in `call'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `run'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `each'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `send'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:90:in `run'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/callbacks.rb:272:in `run_callbacks'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:460:in `send'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:460:in `prepare_dispatcher'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:146:in `process'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:89:in `send'
/Users/ian/dev/sandbox/ticket63/config/../vendor/rails/railties/lib/initializer.rb:89:in `run'
/Users/ian/dev/sandbox/ticket63/config/environment.rb:13
/opt/local/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
/opt/local/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:27:in `require'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:508:in `require'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:353:in `new_constants_in'
/Users/ian/dev/sandbox/ticket63/vendor/rails/activesupport/lib/active_support/dependencies.rb:508:in `require'
/Users/ian/dev/sandbox/ticket63/vendor/rails/railties/lib/tasks/misc.rake:3
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:546:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:546:in `execute'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:541:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:541:in `execute'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:508:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:518:in `invoke_prerequisites'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1183:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1183:in `send'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1183:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:515:in `invoke_prerequisites'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:507:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:501:in `invoke_with_call_chain'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:494:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1931:in `invoke_task'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1909:in `top_level'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1909:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1909:in `top_level'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1948:in `standard_exception_handling'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1903:in `top_level'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1881:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1948:in `standard_exception_handling'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/lib/rake.rb:1878:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rake-0.8.1/bin/rake:31
/opt/local/bin/rake:16:in `load'
/opt/local/bin/rake:16
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-04T09:39:40+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-05-04T09:39:40+01:00</updated-at>
      <user-id type="integer">1023</user-id>
      <version type="integer">4</version>
      <user-name>Ian White</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>So it's trying to generate the finder sql for your has_many association, and needs the database connection in order to quote the sql,

I'm not sure how easy this will be to patch, don't worry about the tests initially, try to figure out the solution ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;
So it's trying to generate the finder sql for your has_many association, and needs the database connection in order to quote the sql,
&lt;/p&gt;&lt;p&gt;
I'm not sure how easy this will be to patch, don't worry about the tests initially, try to figure out the solution ;)
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-04T09:44:39+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-05-04T09:44:39+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">5</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Well, a really trivial 'fix' is to just rescue observer instantiation, and log the error (patch given on right)

Given that this is a bootstrapping dependency problem, this might be appropraite.  It's a bit icky though.

A more sophisticated version of this approach would be to have a config setting 'allow_observer_instatiation_failure', which is set by various bootstrapping tasks (like db:create, or db:migrate).  Also, being more discriminating on error catching would be useful.

Could you advise on whether this general approach (ignore snafus when bootstrapping) is likely to get traction?  It could hide sins if used badly.  It would be in effect saying 'bootstrapping is different to running the app'</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Well, a really trivial 'fix' is to just rescue observer instantiation, and log the error (patch given on right)
&lt;/p&gt;&lt;p&gt;
Given that this is a bootstrapping dependency problem, this might be appropraite.  It's a bit icky though.
&lt;/p&gt;&lt;p&gt;
A more sophisticated version of this approach would be to have a config setting 'allow_observer_instatiation_failure', which is set by various bootstrapping tasks (like db:create, or db:migrate).  Also, being more discriminating on error catching would be useful.
&lt;/p&gt;&lt;p&gt;
Could you advise on whether this general approach (ignore snafus when bootstrapping) is likely to get traction?  It could hide sins if used badly.  It would be in effect saying 'bootstrapping is different to running the app'
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-04T10:09:38+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-05-04T10:09:38+01:00</updated-at>
      <user-id type="integer">1023</user-id>
      <version type="integer">6</version>
      <user-name>Ian White</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Even simpler: rescue the bootstrapping tasks' db loading

Given that this is an edge case (trying to load up framework when db
doesn't yet exist), it makes sense to allow for snafus that result
from this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Even simpler: rescue the bootstrapping tasks' db loading
&lt;/p&gt;&lt;p&gt;
Given that this is an edge case (trying to load up framework when db
&lt;/p&gt;&lt;p&gt;
doesn't yet exist), it makes sense to allow for snafus that result
&lt;/p&gt;&lt;p&gt;
from this.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-04T10:20:07+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-05-04T10:20:07+01:00</updated-at>
      <user-id type="integer">1023</user-id>
      <version type="integer">7</version>
      <user-name>Ian White</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Koz, you going apply this?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Koz, you going apply this?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-17T01:08:29+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bug</tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-07-17T01:08:29+01:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">8</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>This one trips me up a lot aswell. Pretty much makes db:create and co unusable for me (I&#8217;m heavily using branch-specific databases so have a need to create them even after the initial app generation).

I don&#8217;t really see why db:create would depend on the whole environment at all&#8230; Couldn&#8217;t it just load the database.yml and use ActiveRecord independent of the app? That would reduce the startup time for those tasks aswell.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This one trips me up a lot aswell. Pretty much makes db:create
and co unusable for me (I&amp;#8217;m heavily using branch-specific
databases so have a need to create them even after the initial app
generation).&lt;/p&gt;
&lt;p&gt;I don&amp;#8217;t really see why db:create would depend on the whole
environment at all&amp;#8230; Couldn&amp;#8217;t it just load the
database.yml and use ActiveRecord independent of the app? That
would reduce the startup time for those tasks aswell.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-06T01:52:17+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bug</tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-10-06T01:52:20+01:00</updated-at>
      <user-id type="integer">7036</user-id>
      <version type="integer">9</version>
      <user-name>Gerrit Kaiser</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>That sounds like a much nicer fix, if you can make those tasks just read the yml file, (and some how know the RAILS_ENV) then we solve most of these issues.</body>
      <body-html>&lt;div&gt;&lt;p&gt;That sounds like a much nicer fix, if you can make those tasks
just read the yml file, (and some how know the RAILS_ENV) then we
solve most of these issues.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-06T13:05:57+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bug</tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-10-06T13:05:59+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">10</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>whipped up a patch against a03e2b356c66ddc8809fa2b23a2a7d652f173b8b that won&#8217;t load the full environment for db:create:* and db:drop but instead just performs the minium config loading necessary.

successfully manually tested on a skeleton rails app (didn&#8217;t see any examples of how to automatically test rake tasks)</body>
      <body-html>&lt;div&gt;&lt;p&gt;whipped up a patch against
a03e2b356c66ddc8809fa2b23a2a7d652f173b8b that won&amp;#8217;t load the
full environment for db:create:* and db:drop but instead just
performs the minium config loading necessary.&lt;/p&gt;
&lt;p&gt;successfully manually tested on a skeleton rails app
(didn&amp;#8217;t see any examples of how to automatically test rake
tasks)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-22T05:22:25+01:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord bug
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bug create_database databases.rake patch rake</tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-10-22T05:22:30+01:00</updated-at>
      <user-id type="integer">7036</user-id>
      <version type="integer">11</version>
      <user-name>Gerrit Kaiser</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>After Gerrit's patch db:drop stopped working for mysql. That's because mysql connection wasn't established before call to #drop_database. I'm attaching a trivial fix.</body>
      <body-html>&lt;div&gt;&lt;p&gt;After Gerrit's patch db:drop stopped working for mysql. That's
because mysql connection wasn't established before call to
#drop_database. I'm attaching a trivial fix.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-11-28T15:41:05+00:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bug create_database databases.rake patch rake</tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-11-28T15:41:08+00:00</updated-at>
      <user-id type="integer">24327</user-id>
      <version type="integer">12</version>
      <user-name>Aliaksey Kandratsenka</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Ah. I forgot to mention that Gerrit's patch fixed the problem for us.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ah. I forgot to mention that Gerrit's patch fixed the problem
for us.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-11-28T15:42:06+00:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bug create_database databases.rake patch rake</tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-11-28T15:42:08+00:00</updated-at>
      <user-id type="integer">24327</user-id>
      <version type="integer">13</version>
      <user-name>Aliaksey Kandratsenka</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>(from [a0bc480e1ddcaa015927c2d941e7b96a8ce4f6fa]) establish mysql connection before dropping database

Signed-off-by: Michael Koziarski &lt;michael@koziarski.com&gt;
[#63 state:committed]
http://github.com/rails/rails/commit/a0bc480e1ddcaa015927c2d941e7b96a8ce4f6fa</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [a0bc480e1ddcaa015927c2d941e7b96a8ce4f6fa]) establish
mysql connection before dropping database&lt;/p&gt;
&lt;p&gt;Signed-off-by: Michael Koziarski &lt;a href=&quot;mailto:michael@koziarski.com&quot;&gt;michael@koziarski.com&lt;/a&gt; [&lt;a href=&quot;/projects/8994/tickets/63&quot; title=&quot;Ticket #63&quot;&gt;#63&lt;/a&gt;
state:committed] &lt;a href=&quot;http://github.com/rails/rails/commit/a0bc480e1ddcaa015927c2d941e7b96a8ce4f6fa&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-12-01T20:40:31+00:00</created-at>
      <creator-id type="integer">1023</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">63</number>
      <permalink>bug-rake-db-create-and-observers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bug create_database databases.rake patch rake</tag>
      <title>[BUG] rake db:create and observers</title>
      <updated-at type="datetime">2008-12-01T20:40:32+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">14</version>
      <user-name>Repository</user-name>
      <creator-name>Ian White</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/63</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>4305fe0e01543a1c45be03e0bd64db6cd5be1871</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-05-04T09:39:40+01:00</created-at>
      <filename>ticket63_setup.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">21367</id>
      <size type="integer">2192</size>
      <uploader-id type="integer">1023</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/21367/ticket63_setup.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>1427a47bde7c9c22c02207a25d62eba20e345756</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-05-04T10:09:38+01:00</created-at>
      <filename>ticket65_observer_fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">21369</id>
      <size type="integer">1431</size>
      <uploader-id type="integer">1023</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/21369/ticket65_observer_fix.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>8b88e028257895cb8a8dc7967649a58f977efee7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-10-22T05:22:25+01:00</created-at>
      <filename>dont_load_full_env_for_rake_db_create_tasks.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">56008</id>
      <size type="integer">2300</size>
      <uploader-id type="integer">7036</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/56008/dont_load_full_env_for_rake_db_create_tasks.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>1471a6c783ba574e5d4e5c3c978988bdafcfae6a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-11-28T15:41:05+00:00</created-at>
      <filename>0001-establish-mysql-connection-before-dropping-database.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">66147</id>
      <size type="integer">818</size>
      <uploader-id type="integer">24327</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/66147/0001-establish-mysql-connection-before-dropping-database.patch</url>
    </attachment>
  </attachments>
</ticket>
