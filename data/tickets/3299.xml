<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">11378</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-11-01T20:31:47+00:00</created-at>
  <creator-id type="integer">54755</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">3299</number>
  <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
  <priority type="integer">154677</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
  <updated-at type="datetime">2011-03-23T18:31:08+00:00</updated-at>
  <user-id type="integer">142555</user-id>
  <version type="integer">18</version>
  <user-name>Lyle Underwood</user-name>
  <creator-name>David James</creator-name>
  <assigned-user-name>Xavier Noria</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
  <priority-name nil="true"></priority-name>
  <original-body>I would like to see ActiveSupport support the block form of merge. 

# from http://ruby-doc.org/core/classes/Hash.html#M002879
hsh.merge(other_hash) do |key, old_val, new_val|
  ...
end

This form of #merge comes in handy when you have duplicate keys that need to be resolved, such as in the case of two-level merges or recursive merges.</original-body>
  <latest-body>I would like to see ActiveSupport support the block form of merge. 

# from http://ruby-doc.org/core/classes/Hash.html#M002879
hsh.merge(other_hash) do |key, old_val, new_val|
  ...
end

This form of #merge comes in handy when you have duplicate keys that need to be resolved, such as in the case of two-level merges or recursive merges.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I would like to see ActiveSupport support the block form of
merge.&lt;/p&gt;
&lt;h1&gt;from &lt;a href=
&quot;http://ruby-doc.org/core/classes/Hash.html#M002879&quot;&gt;http://ruby-doc.org/core/classes/Hash.html#M002879&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;hsh.merge(other_hash) do |key, old_val, new_val|&lt;br&gt;
... end&lt;/p&gt;
&lt;p&gt;This form of #merge comes in handy when you have duplicate keys
that need to be resolved, such as in the case of two-level merges
or recursive merges.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I would like to see ActiveSupport support the block form of merge. 

@@@ ruby
  # from http://ruby-doc.org/core/classes/Hash.html#M002879
  hsh.merge(other_hash) do |key, old_val, new_val|
    # ...
  end
@@@

This form of #merge comes in handy when you have duplicate keys that need to be resolved, such as in the case of two-level merges or recursive merges.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I would like to see ActiveSupport support the block form of
merge.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  # from http://ruby-doc.org/core/classes/Hash.html#M002879
  hsh.merge(other_hash) do |key, old_val, new_val|
    # ...
  end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This form of #merge comes in handy when you have duplicate keys
that need to be resolved, such as in the case of two-level merges
or recursive merges.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-28T19:04:36+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport hashwithindifferentaccess</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2009-09-28T19:05:48+01:00</updated-at>
      <user-id type="integer">54755</user-id>
      <version type="integer">1</version>
      <user-name>David James</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I forgot to mention that HashWithIndifferentAccess 'covers up' the underlying Hash#merge, making it hard to get to the original behavior.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I forgot to mention that HashWithIndifferentAccess 'covers up'
the underlying Hash#merge, making it hard to get to the original
behavior.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-28T19:08:00+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport hashwithindifferentaccess</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2009-09-28T19:08:02+01:00</updated-at>
      <user-id type="integer">54755</user-id>
      <version type="integer">2</version>
      <user-name>David James</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>My workaround for now will be to using #to_hash to convert to a normal hash. Then I can use Hash#merge.</body>
      <body-html>&lt;div&gt;&lt;p&gt;My workaround for now will be to using #to_hash to convert to a
normal hash. Then I can use Hash#merge.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-28T19:09:48+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport hashwithindifferentaccess</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2009-09-28T19:09:51+01:00</updated-at>
      <user-id type="integer">54755</user-id>
      <version type="integer">3</version>
      <user-name>David James</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>That behaviour could be easily implemented. I wrote a simple patch which provides it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;That behaviour could be easily implemented. I wrote a simple
patch which provides it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-11-29T20:07:55+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activesupport hashwithindifferentaccess
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2009-11-29T20:07:59+00:00</updated-at>
      <user-id type="integer">36857</user-id>
      <version type="integer">4</version>
      <user-name>&#193;lvaro Bautista</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Is this going to be merged?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Is this going to be merged?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T05:05:51+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-06-29T05:05:54+01:00</updated-at>
      <user-id type="integer">5999</user-id>
      <version type="integer">5</version>
      <user-name>Eric</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@Alvaro could you please supply a patch for rails3 too?

The patch looks good.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Alvaro could you please supply a patch for rails3 too?&lt;/p&gt;
&lt;p&gt;The patch looks good.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T05:45:45+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-06-29T05:45:50+01:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">6</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've updated the patch for Rails3.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've updated the patch for Rails3.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T21:39:07+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-06-29T21:39:14+01:00</updated-at>
      <user-id type="integer">14798</user-id>
      <version type="integer">7</version>
      <user-name>Bruno Michel</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-30T15:59:53+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-06-30T16:00:05+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">8</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Hi 

Sorry I haven't had time to update the patch. 

It seems that my slight modification works in Rails 3, however it needs to be into another file (as Bruno's patch shows).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi&lt;/p&gt;
&lt;p&gt;Sorry I haven't had time to update the patch.&lt;/p&gt;
&lt;p&gt;It seems that my slight modification works in Rails 3, however
it needs to be into another file (as Bruno's patch shows).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-30T16:24:26+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-06-30T16:24:35+01:00</updated-at>
      <user-id type="integer">36857</user-id>
      <version type="integer">9</version>
      <user-name>&#193;lvaro Bautista</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>There's a fine point about Hash#merge with block: the block is called only for existing keys in the receiver.

For example, if you execute

    h = {:a =&gt; 0}
    g = {:a =&gt; 1, :b =&gt; 2}

    h.merge(g) do |key, oldval, newval|
      p key
    end

you'll see only `:a` is printed.

Could you please revise the patch taking that into account?</body>
      <body-html>&lt;div&gt;&lt;p&gt;There's a fine point about Hash#merge with block: the block is
called only for existing keys in the receiver.&lt;/p&gt;
&lt;p&gt;For example, if you execute&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;h = {:a =&amp;gt; 0}
g = {:a =&amp;gt; 1, :b =&amp;gt; 2}

h.merge(g) do |key, oldval, newval|
  p key
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;you'll see only &lt;code&gt;:a&lt;/code&gt; is printed.&lt;/p&gt;
&lt;p&gt;Could you please revise the patch taking that into account?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-30T22:53:38+01:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-10-30T22:53:40+01:00</updated-at>
      <user-id type="integer">11378</user-id>
      <version type="integer">10</version>
      <user-name>Xavier Noria</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>For a while, but also the mother of expertise. &lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;links london wholesale&lt;/a&gt; I just want to each month deposits could run much and can only use one word portray,  &lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;links london UK&lt;/a&gt;  &quot;&quot; in this way, the adapt graduating, routine, but it is more important friends.In my recall, not to go. Remember, elementary prepare graduation, with the links and we assemble &lt;a href=&quot;http://www.linksoflondonoutlet.com/friendship-bracelets&quot;&gt;links of london friendship bracelet&lt;/a&gt;  every little of everyone of the time for us to change our life. If you want, relations of the mistrust of time is abruptly &#65307; have to sigh and let my high school, &lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;links london&lt;/a&gt;  i can achieve their goals. The two living of the pecuniary crisis happened,Efficiency of the factory, and it is not too much of it, when a circle, to shenzhen,  &lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;london links&lt;/a&gt;  like his brother lives together. My monthly gross chart, father said, my mother had died not do the funeral, &lt;a href=&quot;http://www.linksoflondonoutlet.com/charms/heart-charm-p-370&quot;&gt;links of london heart charm&lt;/a&gt;  three being of limitless, he remembered that i should help mother to do something, &lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;links&lt;/a&gt;  even more profit, and her dress and earn money. Look cheeky to the university came,Although agreed into university, is not good or bad, but in &#65306; &lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;links of london sale&lt;/a&gt;  You will not be work very simply, and a little bit silly, and doubtless will, since there is a family of london love.</body>
      <body-html>&lt;div&gt;&lt;p&gt;For a while, but also the mother of expertise. &lt;a href=
&quot;http://www.linksoflondonoutlet.com&quot;&gt;links london wholesale&lt;/a&gt; I
just want to each month deposits could run much and can only use
one word portray, &lt;a href=
&quot;http://www.linksoflondonoutlet.com&quot;&gt;links london UK&lt;/a&gt; &quot;&quot; in this
way, the adapt graduating, routine, but it is more important
friends.In my recall, not to go. Remember, elementary prepare
graduation, with the links and we assemble &lt;a href=
&quot;http://www.linksoflondonoutlet.com/friendship-bracelets&quot;&gt;links of
london friendship bracelet&lt;/a&gt; every little of everyone of the time
for us to change our life. If you want, relations of the mistrust
of time is abruptly &amp;#65307; have to sigh and let my high school,
&lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;links london&lt;/a&gt; i can
achieve their goals. The two living of the pecuniary crisis
happened,Efficiency of the factory, and it is not too much of it,
when a circle, to shenzhen, &lt;a href=
&quot;http://www.linksoflondonoutlet.com&quot;&gt;london links&lt;/a&gt; like his
brother lives together. My monthly gross chart, father said, my
mother had died not do the funeral, &lt;a href=
&quot;http://www.linksoflondonoutlet.com/charms/heart-charm-p-370&quot;&gt;links
of london heart charm&lt;/a&gt; three being of limitless, he remembered
that i should help mother to do something, &lt;a href=
&quot;http://www.linksoflondonoutlet.com&quot;&gt;links&lt;/a&gt; even more profit,
and her dress and earn money. Look cheeky to the university
came,Although agreed into university, is not good or bad, but in
&amp;#65306; &lt;a href=&quot;http://www.linksoflondonoutlet.com&quot;&gt;links of
london sale&lt;/a&gt; You will not be work very simply, and a little bit
silly, and doubtless will, since there is a family of london
love.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-31T03:12:37+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-10-31T05:57:56+00:00</updated-at>
      <user-id type="integer">122613</user-id>
      <version type="integer">11</version>
      <user-name>wangxindan</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>You're right, I didn't take that into account. Here it is a patch that does.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You're right, I didn't take that into account. Here it is a
patch that does.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-31T10:18:37+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-10-31T10:18:42+00:00</updated-at>
      <user-id type="integer">36857</user-id>
      <version type="integer">12</version>
      <user-name>&#193;lvaro Bautista</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Wide range of web hosting services are accessible, such as &lt;a href=&quot;http://www.ucvhost.com&quot;&gt;cheap vps&lt;/a&gt; , email hosting, Unix hosting, &lt;a href=&quot;http://www.ucvhost.com/VPS/Forex/ForexVps.aspx&quot;&gt;forex vps&lt;/a&gt; , Windows hosting, &lt;a href=&quot;http://www.ucvhost.com/VPS/EntryLevelVPS/EntryLevelVps.aspx&quot;&gt;windows vps&lt;/a&gt; etc.We hope you will find a  &lt;a href=&quot;http://www.ucvhost.com/&quot;&gt;cheap hosting&lt;/a&gt; company.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Wide range of web hosting services are accessible, such as
&lt;a href=&quot;http://www.ucvhost.com&quot;&gt;cheap vps&lt;/a&gt; , email hosting,
Unix hosting, &lt;a href=
&quot;http://www.ucvhost.com/VPS/Forex/ForexVps.aspx&quot;&gt;forex vps&lt;/a&gt; ,
Windows hosting, &lt;a href=
&quot;http://www.ucvhost.com/VPS/EntryLevelVPS/EntryLevelVps.aspx&quot;&gt;windows
vps&lt;/a&gt; etc.We hope you will find a &lt;a href=
&quot;http://www.ucvhost.com/&quot;&gt;cheap hosting&lt;/a&gt; company.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-01T09:57:11+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport hashwithindifferentaccess patch</tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-11-01T20:31:47+00:00</updated-at>
      <user-id type="integer">122702</user-id>
      <version type="integer">13</version>
      <user-name>piter</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-08T08:54:15+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activesupport hashwithindifferentaccess patch
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2010-11-08T08:54:17+00:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">15</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-09T00:31:53+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2011-02-09T00:35:41+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">16</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-09T00:31:54+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2011-02-09T00:44:05+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">17</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">11378</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I'm on Rails 3.0.3 and as far as I can tell the block syntax for ActiveSupport::HashWithIndifferentAccess#merge is not working at all.

@@@ text
irb(main):023:0&gt; a = {&quot;one&quot;=&gt;&quot;aye&quot;, &quot;two&quot;=&gt;&quot;bee&quot;}
=&gt; {&quot;one&quot;=&gt;&quot;aye&quot;, &quot;two&quot;=&gt;&quot;bee&quot;}
irb(main):024:0&gt; a.merge(a) {|k,v| 1}
=&gt; {&quot;one&quot;=&gt;1, &quot;two&quot;=&gt;1}

irb(main):025:0&gt; b = ActiveSupport::HashWithIndifferentAccess.new(&quot;one&quot;=&gt;&quot;aye&quot;, &quot;two&quot;=&gt;&quot;bee&quot;)
=&gt; {&quot;one&quot;=&gt;&quot;aye&quot;, &quot;two&quot;=&gt;&quot;bee&quot;}
irb(main):026:0&gt; b.merge(b) {|k,v| 1}
=&gt; {&quot;one&quot;=&gt;&quot;aye&quot;, &quot;two&quot;=&gt;&quot;bee&quot;}
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm on Rails 3.0.3 and as far as I can tell the block syntax for
ActiveSupport::HashWithIndifferentAccess#merge is not working at
all.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;text&quot;&gt;irb(main):023:0&amp;gt; a = {&quot;one&quot;=&amp;gt;&quot;aye&quot;, &quot;two&quot;=&amp;gt;&quot;bee&quot;}
=&amp;gt; {&quot;one&quot;=&amp;gt;&quot;aye&quot;, &quot;two&quot;=&amp;gt;&quot;bee&quot;}
irb(main):024:0&amp;gt; a.merge(a) {|k,v| 1}
=&amp;gt; {&quot;one&quot;=&amp;gt;1, &quot;two&quot;=&amp;gt;1}

irb(main):025:0&amp;gt; b = ActiveSupport::HashWithIndifferentAccess.new(&quot;one&quot;=&amp;gt;&quot;aye&quot;, &quot;two&quot;=&amp;gt;&quot;bee&quot;)
=&amp;gt; {&quot;one&quot;=&amp;gt;&quot;aye&quot;, &quot;two&quot;=&amp;gt;&quot;bee&quot;}
irb(main):026:0&amp;gt; b.merge(b) {|k,v| 1}
=&amp;gt; {&quot;one&quot;=&amp;gt;&quot;aye&quot;, &quot;two&quot;=&amp;gt;&quot;bee&quot;}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-23T18:30:42+00:00</created-at>
      <creator-id type="integer">54755</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3299</number>
      <permalink>hashwithindifferentaccessmerge-should-accept-block-just-like-hashmerge</permalink>
      <priority type="integer">154677</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>HashWithIndifferentAccess#merge should accept block just like Hash#merge</title>
      <updated-at type="datetime">2011-03-23T18:31:08+00:00</updated-at>
      <user-id type="integer">142555</user-id>
      <version type="integer">18</version>
      <user-name>Lyle Underwood</user-name>
      <creator-name>David James</creator-name>
      <assigned-user-name>Xavier Noria</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3299</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>e7ab2d39eb39a5b1da4a60adc93a51264bfc2ae6</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-11-29T20:07:55+00:00</created-at>
      <filename>indifferent_merge_with_block.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">335806</id>
      <size type="integer">2930</size>
      <uploader-id type="integer">36857</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/335806/indifferent_merge_with_block.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>b0197631153806a5ef573e3dfec0c45ee8df4772</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-29T21:39:07+01:00</created-at>
      <filename>merge_indifferent_hash_with_block.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">580929</id>
      <size type="integer">2871</size>
      <uploader-id type="integer">14798</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/580929/merge_indifferent_hash_with_block.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>7ed16cf94336bdd3dc525bc06986121faba96450</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-10-31T10:18:37+00:00</created-at>
      <filename>indifferent_merge_with_block.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">746421</id>
      <size type="integer">3366</size>
      <uploader-id type="integer">36857</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/746421/indifferent_merge_with_block.diff</url>
    </attachment>
  </attachments>
</ticket>
