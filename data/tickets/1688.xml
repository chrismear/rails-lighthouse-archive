<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">1366</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-01-02T11:02:18+00:00</created-at>
  <creator-id type="integer">19998</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">1688</number>
  <permalink>layout-option-does-not-work-when-rendering-partial-collections</permalink>
  <priority type="integer">1006</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>actionpack actionview collection layout partial render</tag>
  <title>Layout option for partial collections specifies an overall layout rather than a partial layout</title>
  <updated-at type="datetime">2010-01-07T22:55:09+00:00</updated-at>
  <user-id type="integer">15809</user-id>
  <version type="integer">5</version>
  <user-name>Martin Schubert</user-name>
  <creator-name>Mark Reginald James</creator-name>
  <assigned-user-name>Pratik</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1688</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Say file _item.html.erb contains
@@@
&lt;%= item %&gt;
@@@
and file _bracket.html.erb contains
@@@
[&lt;%= yield %&gt;]
@@@
then
@@@
&lt;%= render :partial =&gt; 'item', :layout =&gt; 'bracket', :collection =&gt; %w(a b) %&gt;
@@@
should render
@@@
[a][b]
@@@
but instead renders
@@@
[ab][ab]
@@@</original-body>
  <latest-body>Say file _item.html.erb contains
@@@
&lt;%= item %&gt;
@@@
and file _bracket.html.erb contains
@@@
[&lt;%= yield %&gt;]
@@@
then
@@@
&lt;%= render :partial =&gt; 'item', :layout =&gt; 'bracket', :collection =&gt; %w(a b) %&gt;
@@@
should render
@@@
[a][b]
@@@
but instead renders
@@@
[ab][ab]
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Say file _item.html.erb contains&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;%= item %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and file _bracket.html.erb contains&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
[&amp;lt;%= yield %&amp;gt;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;then&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;%= render :partial =&amp;gt; 'item', :layout =&amp;gt; 'bracket', :collection =&amp;gt; %w(a b) %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;should render&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
[a][b]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;but instead renders&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
[ab][ab]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Say file &lt;code&gt;_item.html.erb&lt;/code&gt; contains
@@@
&lt;%= item %&gt;
@@@
and file &lt;code&gt;_bracket.html.erb&lt;/code&gt; contains
@@@
[&lt;%= yield %&gt;]
@@@
then
@@@
&lt;%= render :partial =&gt; 'item', :layout =&gt; 'bracket', :collection =&gt; %w(a b) %&gt;
@@@
should render
@@@
[a][b]
@@@
but instead renders
@@@
[ab][ab]
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Say file &lt;code&gt;_item.html.erb&lt;/code&gt; contains&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;%= item %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and file &lt;code&gt;_bracket.html.erb&lt;/code&gt; contains&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
[&amp;lt;%= yield %&amp;gt;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;then&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;%= render :partial =&amp;gt; 'item', :layout =&amp;gt; 'bracket', :collection =&amp;gt; %w(a b) %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;should render&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
[a][b]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;but instead renders&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
[ab][ab]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-02T11:02:18+00:00</created-at>
      <creator-id type="integer">19998</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1688</number>
      <permalink>layout-option-does-not-work-when-rendering-partial-collections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack actionview collection layout partial render</tag>
      <title>Layout option does not work when rendering partial collections</title>
      <updated-at type="datetime">2009-01-02T11:04:40+00:00</updated-at>
      <user-id type="integer">19998</user-id>
      <version type="integer">1</version>
      <user-name>Mark Reginald James</user-name>
      <creator-name>Mark Reginald James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1688</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The duplication is fixed in the current master, but render always looks for and treats the provided layout as a layout for the entire collection.

I think being able to use a partial layout when rendering collections is more valuable than an overall layout.

There are four alternatives:

1. Leave as is.
2. Make the layout option work as a partial layout instead.
3. Allow automatic switching between the two modes depending on whether the target layout file starts with an underscore.
4. Add a new &lt;code&gt;:partial_layout&lt;/code&gt; option to render.

Which is preferred?</body>
      <body-html>&lt;div&gt;&lt;p&gt;The duplication is fixed in the current master, but render
always looks for and treats the provided layout as a layout for the
entire collection.&lt;/p&gt;
&lt;p&gt;I think being able to use a partial layout when rendering
collections is more valuable than an overall layout.&lt;/p&gt;
&lt;p&gt;There are four alternatives:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Leave as is.&lt;/li&gt;
&lt;li&gt;Make the layout option work as a partial layout instead.&lt;/li&gt;
&lt;li&gt;Allow automatic switching between the two modes depending on
whether the target layout file starts with an underscore.&lt;/li&gt;
&lt;li&gt;Add a new &lt;code&gt;:partial_layout&lt;/code&gt; option to render.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Which is preferred?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-03T03:52:34+00:00</created-at>
      <creator-id type="integer">19998</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1688</number>
      <permalink>layout-option-does-not-work-when-rendering-partial-collections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack actionview collection layout partial render</tag>
      <title>Layout option does not work when rendering partial collections</title>
      <updated-at type="datetime">2009-01-03T03:52:39+00:00</updated-at>
      <user-id type="integer">19998</user-id>
      <version type="integer">2</version>
      <user-name>Mark Reginald James</user-name>
      <creator-name>Mark Reginald James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1688</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-03T03:54:44+00:00</created-at>
      <creator-id type="integer">19998</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Layout option does not work when rendering partial collections
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1688</number>
      <permalink>layout-option-does-not-work-when-rendering-partial-collections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack actionview collection layout partial render</tag>
      <title>Layout option for partial collections specifies an overall layout rather than a partial layout</title>
      <updated-at type="datetime">2009-01-03T03:54:49+00:00</updated-at>
      <user-id type="integer">19998</user-id>
      <version type="integer">3</version>
      <user-name>Mark Reginald James</user-name>
      <creator-name>Mark Reginald James</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1688</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>You should just use the layout inside the partial :

@@@ ruby
# _brackets.html.erb
[&lt;%= yield %&gt;]

# _item.html.erb
&lt;% render(:layout =&gt; 'bracket) do %&gt;
&lt;%= item %&gt;
&lt;% end %&gt;

# collection.html.erb
&lt;%= render :partial =&gt; 'item', :collection =&gt; %w(a b) %&gt;
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;You should just use the layout inside the partial :&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
# _brackets.html.erb
[&amp;lt;%= yield %&amp;gt;]

# _item.html.erb
&amp;lt;% render(:layout =&amp;gt; 'bracket) do %&amp;gt;
&amp;lt;%= item %&amp;gt;
&amp;lt;% end %&amp;gt;

# collection.html.erb
&amp;lt;%= render :partial =&amp;gt; 'item', :collection =&amp;gt; %w(a b) %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-08T00:29:24+00:00</created-at>
      <creator-id type="integer">19998</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1688</number>
      <permalink>layout-option-does-not-work-when-rendering-partial-collections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>actionpack actionview collection layout partial render</tag>
      <title>Layout option for partial collections specifies an overall layout rather than a partial layout</title>
      <updated-at type="datetime">2009-03-08T00:29:46+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">4</version>
      <user-name>Pratik</user-name>
      <creator-name>Mark Reginald James</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1688</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Even the ticket is allready a year old i keep to stumble into the same situation:
---------------------------------------------------------------------------------
needing different layouts for each item when a collection is rendered.

the solution from &quot;Pratik&quot; doesn`t solve this problem.

or is there another workaround i am not aware of?</body>
      <body-html>&lt;div&gt;&lt;h2&gt;Even the ticket is allready a year old i keep to stumble into
the same situation:&lt;/h2&gt;
&lt;p&gt;needing different layouts for each item when a collection is
rendered.&lt;/p&gt;
&lt;p&gt;the solution from &quot;Pratik&quot; doesn&lt;code&gt;t solve this
problem.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;or is there another workaround i am not aware of?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-07T22:55:06+00:00</created-at>
      <creator-id type="integer">19998</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1688</number>
      <permalink>layout-option-does-not-work-when-rendering-partial-collections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>actionpack actionview collection layout partial render</tag>
      <title>Layout option for partial collections specifies an overall layout rather than a partial layout</title>
      <updated-at type="datetime">2010-01-07T22:55:09+00:00</updated-at>
      <user-id type="integer">15809</user-id>
      <version type="integer">5</version>
      <user-name>Martin Schubert</user-name>
      <creator-name>Mark Reginald James</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1688</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
