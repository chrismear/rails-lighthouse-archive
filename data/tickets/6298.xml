<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">false</closed>
  <created-at type="datetime">2011-01-18T08:52:34+00:00</created-at>
  <creator-id type="integer">111093</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6298</number>
  <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>new</state>
  <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
  <title>[PATCH] Array.join making safe strings unsafe</title>
  <updated-at type="datetime">2011-03-26T02:31:52+00:00</updated-at>
  <user-id type="integer">142823</user-id>
  <version type="integer">7</version>
  <user-name>bingbing</user-name>
  <creator-name>Paul Hieromnimon</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
  <priority-name nil="true"></priority-name>
  <original-body>When calling join on an Array comprised entirely of html_safe objects, and using an html_safe separator, the string returned is unsafe.  This seems to be a bug, and has broken many of our own custom helpers without providing any additional safety.

I overrode Array.join to return safe strings (SafeBuffers) when all the elements of the array are safe, and the separator is either not specified or html_safe itself.  This is consistent with Ruby's behavior when joining arrays of untainted objects with an untainted separator.

Additionally, I overrode html_safe? on Array to return true if every element is safe.  This will allow Array.join to operate properly in the recursive case (joining an Array of arrays).</original-body>
  <latest-body>When calling join on an Array comprised entirely of html_safe objects, and using an html_safe separator, the string returned is unsafe.  This seems to be a bug, and has broken many of our own custom helpers without providing any additional safety.

I overrode Array.join to return safe strings (SafeBuffers) when all the elements of the array are safe, and the separator is either not specified or html_safe itself.  This is consistent with Ruby's behavior when joining arrays of untainted objects with an untainted separator.

Additionally, I overrode html_safe? on Array to return true if every element is safe.  This will allow Array.join to operate properly in the recursive case (joining an Array of arrays).</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When calling join on an Array comprised entirely of html_safe
objects, and using an html_safe separator, the string returned is
unsafe. This seems to be a bug, and has broken many of our own
custom helpers without providing any additional safety.&lt;/p&gt;
&lt;p&gt;I overrode Array.join to return safe strings (SafeBuffers) when
all the elements of the array are safe, and the separator is either
not specified or html_safe itself. This is consistent with Ruby's
behavior when joining arrays of untainted objects with an untainted
separator.&lt;/p&gt;
&lt;p&gt;Additionally, I overrode html_safe? on Array to return true if
every element is safe. This will allow Array.join to operate
properly in the recursive case (joining an Array of arrays).&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When calling join on an Array comprised entirely of html_safe objects, and using an html_safe separator, the string returned is unsafe.  This seems to be a bug, and has broken many of our own custom helpers without providing any additional safety.

I overrode Array.join to return safe strings (SafeBuffers) when all the elements of the array are safe, and the separator is either not specified or html_safe itself.  This is consistent with Ruby's behavior when joining arrays of untainted objects with an untainted separator.

Additionally, I overrode html_safe? on Array to return true if every element is safe.  This will allow Array.join to operate properly in the recursive case (joining an Array of arrays).</body>
      <body-html>&lt;div&gt;&lt;p&gt;When calling join on an Array comprised entirely of html_safe
objects, and using an html_safe separator, the string returned is
unsafe. This seems to be a bug, and has broken many of our own
custom helpers without providing any additional safety.&lt;/p&gt;
&lt;p&gt;I overrode Array.join to return safe strings (SafeBuffers) when
all the elements of the array are safe, and the separator is either
not specified or html_safe itself. This is consistent with Ruby's
behavior when joining arrays of untainted objects with an untainted
separator.&lt;/p&gt;
&lt;p&gt;Additionally, I overrode html_safe? on Array to return true if
every element is safe. This will allow Array.join to operate
properly in the recursive case (joining an Array of arrays).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-17T02:38:57+00:00</created-at>
      <creator-id type="integer">111093</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6298</number>
      <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
      <title>[PATCH] Array.join making safe strings unsafe</title>
      <updated-at type="datetime">2011-01-17T02:39:00+00:00</updated-at>
      <user-id type="integer">111093</user-id>
      <version type="integer">1</version>
      <user-name>Paul Hieromnimon</user-name>
      <creator-name>Paul Hieromnimon</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;B&gt;
&lt;H1&gt;Baby Doc' Duvalier returns to Haiti&lt;/H1&gt;
&lt;P&gt;Port-Au-Prince, Haiti (CNN)&lt;/B&gt; -- Jean-Claude &quot;Baby Doc&quot; Duvalier, Haiti's former dictator, returned unexpectedly Sunday to the country after some 25 years in exile.&lt;A href=&quot;http://www.buybestugg.com/&quot;&gt;Ugg boots&lt;/A&gt;,&lt;A href=&quot;http://www.buybestugg.com/&quot;&gt;Wholesale Ugg&lt;/A&gt;,&lt;A href=&quot;http://www.buybestugg.com/&quot;&gt;Ugg Outlet&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/&quot;&gt;Ugg Outlet Store&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-bailey-button-boots&quot;&gt;UGG Bailey Button Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-tasmina-sandals-1647&quot;&gt;UGG Tasmina Sandals&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-gypsy-sandals-1759&quot;&gt;UGG Gypsy Sandals&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-fluff-flip-flop-slipper-5304&quot;&gt;UGG Fluff Flip Flop Slipper&lt;/A&gt;&lt;/P&gt;
&lt;P&gt;He arrived in Haiti as the nation is grappling with a political crisis, sparked by fraud allegations in a presidential election. It was not immediately clear why the former leader returned.&lt;A href=&quot;http://www.buybestugg.com/ugg-sundance-ii-boots-5325&quot;&gt;UGG Sundance Ii Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-ascot-slippers-5389&quot;&gt;UGG Ascot Slippers&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-fluff-scuff-ii-5616&quot;&gt;UGG Fluff Scuff Ii&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-bags&quot;&gt;UGG Bags&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-classic-argyle-knit&quot;&gt;UGG Classic Argyle Knit&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-classic-cardy-boots&quot;&gt;UGG Classic Cardy Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-classic-mini-boots&quot;&gt;UGG Classic Mini Boots&lt;/A&gt;&lt;/P&gt;
&lt;P&gt;The Duvalier family ruled Haiti for three decades starting in 1957, when Francois &quot;Papa Doc&quot; Duvalier was elected president. He later declared himself president for life. He was succeeded in 1971 by his 19-year-old son, Jean-Claude &quot;Baby Doc&quot; Duvalier.&lt;A href=&quot;http://www.buybestugg.com/ugg-classic-short-boots&quot;&gt;UGG Classic Short Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-classic-tall-boots&quot;&gt;UGG Classic Tall Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-coquette-slippers&quot;&gt;UGG Coquette Slippers&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-infants-erin-boots&quot;&gt;UGG Infants Erin Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-margot&quot;&gt;UGG Margot&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-nightfall-boots&quot;&gt;UGG Nightfall Boots&lt;/A&gt;&lt;/P&gt;
&lt;P class=cnnInline&gt;The younger Duvalier held onto power for 15 years before a revolt forced him to flee the country. He has been living in France.&lt;A href=&quot;http://www.buybestugg.com/ugg-ultimate-bind-boots&quot;&gt;UGG Ultimate Bind Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-ultra-short-boots&quot;&gt;UGG Ultra Short Boots&lt;/A&gt;;&lt;A href=&quot;http://www.buybestugg.com/ugg-ultra-tall-boots&quot;&gt;UGG Ultra Tall Boots&lt;/A&gt;&lt;/P&gt;2011.1.17 oil</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/p&gt;
&lt;h1&gt;&lt;b&gt;Baby Doc' Duvalier returns to Haiti&lt;/b&gt;&lt;/h1&gt;
&lt;br&gt;
&lt;p&gt;Port-Au-Prince, Haiti (CNN) -- Jean-Claude &quot;Baby Doc&quot; Duvalier,
Haiti's former dictator, returned unexpectedly Sunday to the
country after some 25 years in exile.&lt;a href=
&quot;http://www.buybestugg.com/&quot;&gt;Ugg boots&lt;/a&gt;,&lt;a href=
&quot;http://www.buybestugg.com/&quot;&gt;Wholesale Ugg&lt;/a&gt;,&lt;a href=
&quot;http://www.buybestugg.com/&quot;&gt;Ugg Outlet&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/&quot;&gt;Ugg Outlet Store&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-bailey-button-boots&quot;&gt;UGG Bailey
Button Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-tasmina-sandals-1647&quot;&gt;UGG Tasmina
Sandals&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-gypsy-sandals-1759&quot;&gt;UGG Gypsy
Sandals&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-fluff-flip-flop-slipper-5304&quot;&gt;UGG
Fluff Flip Flop Slipper&lt;/a&gt;&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;He arrived in Haiti as the nation is grappling with a political
crisis, sparked by fraud allegations in a presidential election. It
was not immediately clear why the former leader returned.&lt;a href=
&quot;http://www.buybestugg.com/ugg-sundance-ii-boots-5325&quot;&gt;UGG Sundance
Ii Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-ascot-slippers-5389&quot;&gt;UGG Ascot
Slippers&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-fluff-scuff-ii-5616&quot;&gt;UGG Fluff Scuff
Ii&lt;/a&gt;;&lt;a href=&quot;http://www.buybestugg.com/ugg-bags&quot;&gt;UGG
Bags&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-classic-argyle-knit&quot;&gt;UGG Classic
Argyle Knit&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-classic-cardy-boots&quot;&gt;UGG Classic
Cardy Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-classic-mini-boots&quot;&gt;UGG Classic Mini
Boots&lt;/a&gt;&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;The Duvalier family ruled Haiti for three decades starting in
1957, when Francois &quot;Papa Doc&quot; Duvalier was elected president. He
later declared himself president for life. He was succeeded in 1971
by his 19-year-old son, Jean-Claude &quot;Baby Doc&quot; Duvalier.&lt;a href=
&quot;http://www.buybestugg.com/ugg-classic-short-boots&quot;&gt;UGG Classic
Short Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-classic-tall-boots&quot;&gt;UGG Classic Tall
Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-coquette-slippers&quot;&gt;UGG Coquette
Slippers&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-infants-erin-boots&quot;&gt;UGG Infants Erin
Boots&lt;/a&gt;;&lt;a href=&quot;http://www.buybestugg.com/ugg-margot&quot;&gt;UGG
Margot&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-nightfall-boots&quot;&gt;UGG Nightfall
Boots&lt;/a&gt;&lt;/p&gt;
&lt;br&gt;
&lt;p class=&quot;cnnInline&quot;&gt;The younger Duvalier held onto power for 15
years before a revolt forced him to flee the country. He has been
living in France.&lt;a href=
&quot;http://www.buybestugg.com/ugg-ultimate-bind-boots&quot;&gt;UGG Ultimate
Bind Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-ultra-short-boots&quot;&gt;UGG Ultra Short
Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.buybestugg.com/ugg-ultra-tall-boots&quot;&gt;UGG Ultra Tall
Boots&lt;/a&gt;&lt;/p&gt;
2011.1.17 oil&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-17T04:01:38+00:00</created-at>
      <creator-id type="integer">111093</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6298</number>
      <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
      <title>[PATCH] Array.join making safe strings unsafe</title>
      <updated-at type="datetime">2011-01-19T16:49:12+00:00</updated-at>
      <user-id type="integer">132706</user-id>
      <version type="integer">2</version>
      <user-name>ljw</user-name>
      <creator-name>Paul Hieromnimon</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;A href=&quot;http://www.topugg.us/&quot;&gt;UGG Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/new-arrival.html&quot;&gt;2010 New Arrivals&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-bailey-button-boots.html&quot;&gt;UGG Bailey Button Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-tasmina-sandals-1647.html&quot;&gt;UGG Tasmina Sandals&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-gypsy-sandals-1759.html&quot;&gt;UGG Gypsy Sandals&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-fluff-flip-flop-slipper-5304.html&quot;&gt;UGG Fluff Flip Flop Slipper&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-sundance-ii-boots-5325.html&quot;&gt;UGG Sundance Ii Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-ascot-slippers-5389.html&quot;&gt;UGG Ascot Slippers&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-fluff-scuff-ii-5616.html&quot;&gt;UGG Fluff Scuff Ii&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-bags.html&quot;&gt;UGG Bags&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-classic-argyle-knit.html&quot;&gt;UGG Classic Argyle Knit&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-classic-cardy-boots.html&quot;&gt;UGG Classic Cardy Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-classic-mini-boots.html&quot;&gt;UGG Classic Mini Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-classic-short-boots.html&quot;&gt;UGG Classic Short Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-classic-tall-boots.html&quot;&gt;UGG Classic Tall Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-coquette-slippers.html&quot;&gt;UGG Coquette Slippers&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-infants-erin-boots.html&quot;&gt;UGG Infants Erin Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-margot.html&quot;&gt;UGG Margot&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-nightfall-boots.html&quot;&gt;UGG Nightfall Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-ultimate-bind-boots.html&quot;&gt;UGG Ultimate Bind Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-ultra-short-boots.html&quot;&gt;UGG Ultra Short Boots&lt;/A&gt;;&lt;A href=&quot;http://www.topugg.us/ugg-ultra-tall-boots.html&quot;&gt;UGG Ultra Tall Boots&lt;/A&gt; 2011.1.17 oil</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.topugg.us/&quot;&gt;UGG Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/new-arrival.html&quot;&gt;2010 New
Arrivals&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-bailey-button-boots.html&quot;&gt;UGG Bailey
Button Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-tasmina-sandals-1647.html&quot;&gt;UGG Tasmina
Sandals&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-gypsy-sandals-1759.html&quot;&gt;UGG Gypsy
Sandals&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-fluff-flip-flop-slipper-5304.html&quot;&gt;UGG
Fluff Flip Flop Slipper&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-sundance-ii-boots-5325.html&quot;&gt;UGG Sundance
Ii Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-ascot-slippers-5389.html&quot;&gt;UGG Ascot
Slippers&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-fluff-scuff-ii-5616.html&quot;&gt;UGG Fluff Scuff
Ii&lt;/a&gt;;&lt;a href=&quot;http://www.topugg.us/ugg-bags.html&quot;&gt;UGG
Bags&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-classic-argyle-knit.html&quot;&gt;UGG Classic
Argyle Knit&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-classic-cardy-boots.html&quot;&gt;UGG Classic
Cardy Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-classic-mini-boots.html&quot;&gt;UGG Classic Mini
Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-classic-short-boots.html&quot;&gt;UGG Classic
Short Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-classic-tall-boots.html&quot;&gt;UGG Classic Tall
Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-coquette-slippers.html&quot;&gt;UGG Coquette
Slippers&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-infants-erin-boots.html&quot;&gt;UGG Infants Erin
Boots&lt;/a&gt;;&lt;a href=&quot;http://www.topugg.us/ugg-margot.html&quot;&gt;UGG
Margot&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-nightfall-boots.html&quot;&gt;UGG Nightfall
Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-ultimate-bind-boots.html&quot;&gt;UGG Ultimate
Bind Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-ultra-short-boots.html&quot;&gt;UGG Ultra Short
Boots&lt;/a&gt;;&lt;a href=
&quot;http://www.topugg.us/ugg-ultra-tall-boots.html&quot;&gt;UGG Ultra Tall
Boots&lt;/a&gt; 2011.1.17 oil&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-17T04:03:20+00:00</created-at>
      <creator-id type="integer">111093</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6298</number>
      <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
      <title>[PATCH] Array.join making safe strings unsafe</title>
      <updated-at type="datetime">2011-01-19T16:49:12+00:00</updated-at>
      <user-id type="integer">132706</user-id>
      <version type="integer">3</version>
      <user-name>ljw</user-name>
      <creator-name>Paul Hieromnimon</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Although if it is appropriate dress is ivory color &lt;b&gt;&lt;a href=&quot;http://www.bridalgownsinlove.com/cheap-mermaid-wedding-dresses-7&quot;&gt;Wholesale Mermaid Wedding Dresses&lt;/a&gt;&lt;/b&gt; wholesale? Put on a bridal gown in ivory can be compared to wearing jewelry. Due to the misinterpretation of clothes, you can seem really old-liners. You can also choose if you have black skin cream. In addition, to avoid this color if you have a connotation quite white. In addition, there are many different shades of &lt;b&gt;&lt;a href=&quot;http://www.bridalgownsinlove.com/cheap-off-the-shoulder-wedding-dresses-48&quot;&gt;Off the shoulder Wedding Dresses&lt;/a&gt;&lt;/b&gt;to yellow color intensity the higher the score for you for pickup.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Although if it is appropriate dress is ivory color &lt;b&gt;&lt;a href=
&quot;http://www.bridalgownsinlove.com/cheap-mermaid-wedding-dresses-7&quot;&gt;Wholesale
Mermaid Wedding Dresses&lt;/a&gt;&lt;/b&gt; wholesale? Put on a bridal gown in
ivory can be compared to wearing jewelry. Due to the
misinterpretation of clothes, you can seem really old-liners. You
can also choose if you have black skin cream. In addition, to avoid
this color if you have a connotation quite white. In addition,
there are many different shades of &lt;b&gt;&lt;a href=
&quot;http://www.bridalgownsinlove.com/cheap-off-the-shoulder-wedding-dresses-48&quot;&gt;
Off the shoulder Wedding Dresses&lt;/a&gt;&lt;/b&gt;to yellow color intensity
the higher the score for you for pickup.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-18T08:46:27+00:00</created-at>
      <creator-id type="integer">111093</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6298</number>
      <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
      <title>[PATCH] Array.join making safe strings unsafe</title>
      <updated-at type="datetime">2011-01-18T08:52:34+00:00</updated-at>
      <user-id type="integer">133048</user-id>
      <version type="integer">4</version>
      <user-name>mary01</user-name>
      <creator-name>Paul Hieromnimon</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1

Upgrading to Rails 3.0.3 causes all Array.join calls to escape for me.  Cannot get it to work without this patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;Upgrading to Rails 3.0.3 causes all Array.join calls to escape
for me. Cannot get it to work without this patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-18T13:17:02+00:00</created-at>
      <creator-id type="integer">111093</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6298</number>
      <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
      <title>[PATCH] Array.join making safe strings unsafe</title>
      <updated-at type="datetime">2011-01-18T13:17:07+00:00</updated-at>
      <user-id type="integer">71264</user-id>
      <version type="integer">5</version>
      <user-name>Derek Croft</user-name>
      <creator-name>Paul Hieromnimon</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Yeah, seeing this in Rails 3.0.3, e.g:

@@@ 
User.interests.map{|i| link_to i.name, interest_path(i) }.join(', '.html_safe)
@@@

Putting that inside of &lt;%= %&gt; renders a bunch of escaped HTML.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yeah, seeing this in Rails 3.0.3, e.g:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;User.interests.map{|i| link_to i.name, interest_path(i) }.join(', '.html_safe)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Putting that inside of &amp;lt;%= %&amp;gt; renders a bunch of escaped
HTML.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-16T21:53:48+00:00</created-at>
      <creator-id type="integer">111093</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6298</number>
      <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
      <title>[PATCH] Array.join making safe strings unsafe</title>
      <updated-at type="datetime">2011-02-16T21:53:56+00:00</updated-at>
      <user-id type="integer">113111</user-id>
      <version type="integer">6</version>
      <user-name>Russen Guggemos</user-name>
      <creator-name>Paul Hieromnimon</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton watches&lt;/a&gt;&lt;/b&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton
watches&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-26T02:09:04+00:00</created-at>
      <creator-id type="integer">111093</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6298</number>
      <permalink>patch-arrayjoin-making-safe-strings-unsafe</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>array bug html_safe join patch &quot;rails 3.0.3&quot; safe_buffer taint</tag>
      <title>[PATCH] Array.join making safe strings unsafe</title>
      <updated-at type="datetime">2011-03-26T02:31:52+00:00</updated-at>
      <user-id type="integer">142823</user-id>
      <version type="integer">7</version>
      <user-name>bingbing</user-name>
      <creator-name>Paul Hieromnimon</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6298</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>89a50bb5fba63b2946f4905d32e04909adff7ac7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-01-17T02:38:57+00:00</created-at>
      <filename>safe_join.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">863451</id>
      <size type="integer">3253</size>
      <uploader-id type="integer">111093</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/863451/safe_join.diff</url>
    </attachment>
  </attachments>
</ticket>
