<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">12714</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-08-24T00:53:00+01:00</created-at>
  <creator-id type="integer">15346</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">3089</number>
  <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
  <priority type="integer">12</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>duplicate</state>
  <tag>3.0pre content_for layouts</tag>
  <title>Regression in 3.0pre With content_for And Layouts</title>
  <updated-at type="datetime">2010-10-15T23:01:35+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">10</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Ken Collins</creator-name>
  <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>A recent commit in trunk for 3.0pre has caused a regression with content_for is used to insert content into a layout. Here is the commit for 9f5cd0156ab907d8097fc9c588823a9b09038b93.

http://github.com/rails/rails/commit/9f5cd0156ab907d8097fc9c588823a9b09038b93#diff-3

This is a very common practice and is documented in the code to work. In fact, it is even one of Ryan's early screen casts. 

http://railscasts.com/episodes/8-layouts-and-content-for</original-body>
  <latest-body>A recent commit in trunk for 3.0pre has caused a regression with content_for is used to insert content into a layout. Here is the commit for 9f5cd0156ab907d8097fc9c588823a9b09038b93.

http://github.com/rails/rails/commit/9f5cd0156ab907d8097fc9c588823a9b09038b93#diff-3

This is a very common practice and is documented in the code to work. In fact, it is even one of Ryan's early screen casts. 

http://railscasts.com/episodes/8-layouts-and-content-for</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;A recent commit in trunk for 3.0pre has caused a regression with
content_for is used to insert content into a layout. Here is the
commit for 9f5cd0156ab907d8097fc9c588823a9b09038b93.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/rails/rails/commit/9f5cd0156ab907d8097fc9c588823a9b09038b93#diff-3&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is a very common practice and is documented in the code to
work. In fact, it is even one of Ryan's early screen casts.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railscasts.com/episodes/8-layouts-and-content-for&quot;&gt;http://railscasts.com/episodes/8...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>A recent commit in trunk for 3.0pre has caused a regression with content_for is used to insert content into a layout. Here is the commit for 9f5cd0156ab907d8097fc9c588823a9b09038b93.

http://github.com/rails/rails/commit/9f5cd0156ab907d8097fc9c588823a9b09038b93#diff-3

This is a very common practice and is documented in the code to work. In fact, it is even one of Ryan's early screen casts. 

http://railscasts.com/episodes/8-layouts-and-content-for</body>
      <body-html>&lt;div&gt;&lt;p&gt;A recent commit in trunk for 3.0pre has caused a regression with
content_for is used to insert content into a layout. Here is the
commit for 9f5cd0156ab907d8097fc9c588823a9b09038b93.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/rails/rails/commit/9f5cd0156ab907d8097fc9c588823a9b09038b93#diff-3&quot;&gt;
http://github.com/rails/rails/commit/9f5cd0156ab907d8097fc9c588823a...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is a very common practice and is documented in the code to
work. In fact, it is even one of Ryan's early screen casts.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://railscasts.com/episodes/8-layouts-and-content-for&quot;&gt;http://railscasts.com/episodes/8-layouts-and-content-for&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-24T00:53:00+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2009-08-24T00:53:05+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">1</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Here is the patch that includes a passing test before the 9f5cd0 commit. It is still failing the inner template part however. Typically I am in ActiveRecord most of the time and I am not sure what needs to be done bring this to full parity with rails 2.3.4. There seems to much going on and I would appreciate feedback.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here is the patch that includes a passing test before the 9f5cd0
commit. It is still failing the inner template part however.
Typically I am in ActiveRecord most of the time and I am not sure
what needs to be done bring this to full parity with rails 2.3.4.
There seems to much going on and I would appreciate feedback.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-24T00:56:51+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2009-08-24T00:57:03+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">2</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-24T01:14:54+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2009-08-24T01:14:56+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">3</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've been able to duplicate this bug as well using 3.0beta edge.  As a matter of fact, it doesn't even require using the content_for tag to see the error.  After running a generator to create a simple Posts sample application, I set up a single line **layouts/application.html.erb** file:

@@@ erb 
&lt;%= yield %&gt;
@@@

I then created a **layouts/posts.html.erb** file with only the single line:

@@@ erb 
&lt;% render :file =&gt; 'layouts/application' %&gt;
@@@

and it fails with the LocalJumpError message.  The error raised is &quot;no block given&quot;.  If I delete the layouts/posts.html.erb file everything works fine.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've been able to duplicate this bug as well using 3.0beta edge.
As a matter of fact, it doesn't even require using the content_for
tag to see the error. After running a generator to create a simple
Posts sample application, I set up a single line
&lt;strong&gt;layouts/application.html.erb&lt;/strong&gt; file:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;erb&quot;&gt;&amp;lt;%= yield %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I then created a &lt;strong&gt;layouts/posts.html.erb&lt;/strong&gt; file
with only the single line:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;erb&quot;&gt;&amp;lt;% render :file =&amp;gt; 'layouts/application' %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;and it fails with the LocalJumpError message. The error raised
is &quot;no block given&quot;. If I delete the layouts/posts.html.erb file
everything works fine.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-16T07:25:04+00:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2010-02-16T07:25:08+00:00</updated-at>
      <user-id type="integer">86706</user-id>
      <version type="integer">4</version>
      <user-name>Jeff Bigler</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Same problem here. Using render :file and content_for/yield gives &quot;No block given&quot; error.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Same problem here. Using render :file and content_for/yield
gives &quot;No block given&quot; error.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-16T23:10:44+00:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2010-02-16T23:10:46+00:00</updated-at>
      <user-id type="integer">35595</user-id>
      <version type="integer">5</version>
      <user-name>Carson Baker</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@Carson would you mind creating a patch with a failing test against master?</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Carson would you mind creating a patch with a failing test
against master?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-24T07:22:31+00:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2010-02-24T07:22:32+00:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">6</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This is my first attempt to help out with a patch, so I apologize if there are any problems.  I tried creating a test case for ActionPack that demonstrates the failure.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is my first attempt to help out with a patch, so I
apologize if there are any problems. I tried creating a test case
for ActionPack that demonstrates the failure.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-25T04:09:10+00:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2010-02-25T04:09:13+00:00</updated-at>
      <user-id type="integer">86706</user-id>
      <version type="integer">7</version>
      <user-name>Jeff Bigler</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This appears to be a duplicate of ticket [#3459](https://rails.lighthouseapp.com/projects/8994/tickets/3459-yield-doesnt-work-with-content_for_layout-and-render-file#ticket-3459-2)

The patch provided in that ticket fixed the problem.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This appears to be a duplicate of ticket &lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/3459-yield-doesnt-work-with-content_for_layout-and-render-file#ticket-3459-2&quot;&gt;
#3459&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The patch provided in that ticket fixed the problem.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T06:05:47+00:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2010-02-26T06:05:50+00:00</updated-at>
      <user-id type="integer">86706</user-id>
      <version type="integer">8</version>
      <user-name>Jeff Bigler</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-03-04T20:52:51+00:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>duplicate</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2010-03-04T20:52:53+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">9</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:35+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3089</number>
      <permalink>regression-in-30pre-with-content_for-and-layouts</permalink>
      <priority type="integer">12</priority>
      <project-id type="integer">8994</project-id>
      <state>duplicate</state>
      <tag>3.0pre content_for layouts</tag>
      <title>Regression in 3.0pre With content_for And Layouts</title>
      <updated-at type="datetime">2010-10-15T23:01:35+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">10</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Ken Collins</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3089</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>a1de9f4bf02479e6aff62c083b1eab19398cc472</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-24T00:56:51+01:00</created-at>
      <filename>content_for_template_and_layout.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">250879</id>
      <size type="integer">2673</size>
      <uploader-id type="integer">15346</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/250879/content_for_template_and_layout.diff</url>
    </attachment>
  </attachments>
</ticket>
