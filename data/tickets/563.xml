<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-07-07T14:47:35+01:00</created-at>
  <creator-id type="integer">17449</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">563</number>
  <permalink>cookiestore-session-session_id</permalink>
  <priority type="integer">57</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>2.0-stable cookie-store request-forgery-protection session_id</tag>
  <title>CookieStore &amp; session.session_id</title>
  <updated-at type="datetime">2009-11-09T06:07:19+00:00</updated-at>
  <user-id type="integer">52233</user-id>
  <version type="integer">5</version>
  <user-name>Raza Ali</user-name>
  <creator-name>blj</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/563</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>I believe there is a bug in the session.session_id while using CookieStore. This keeps changing as we add and remove stuff out of cookie store. This leads to other problems, for e.g. the module RequestForgeryProtection.

Add something to the flash before you render a form and try submit it. Do you get InvalidAuthenticityToken error?</original-body>
  <latest-body>I believe there is a bug in the session.session_id while using CookieStore. This keeps changing as we add and remove stuff out of cookie store. This leads to other problems, for e.g. the module RequestForgeryProtection.

Add something to the flash before you render a form and try submit it. Do you get InvalidAuthenticityToken error?</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
I believe there is a bug in the session.session_id while using CookieStore. This keeps changing as we add and remove stuff out of cookie store. This leads to other problems, for e.g. the module RequestForgeryProtection.
&lt;/p&gt;&lt;p&gt;
Add something to the flash before you render a form and try submit it. Do you get InvalidAuthenticityToken error?
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I believe there is a bug in the session.session_id while using CookieStore. This keeps changing as we add and remove stuff out of cookie store. This leads to other problems, for e.g. the module RequestForgeryProtection.

Add something to the flash before you render a form and try submit it. Do you get InvalidAuthenticityToken error?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I believe there is a bug in the session.session_id while using CookieStore. This keeps changing as we add and remove stuff out of cookie store. This leads to other problems, for e.g. the module RequestForgeryProtection.
&lt;/p&gt;&lt;p&gt;
Add something to the flash before you render a form and try submit it. Do you get InvalidAuthenticityToken error?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-07T14:47:36+01:00</created-at>
      <creator-id type="integer">17449</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">563</number>
      <permalink>cookiestore-session-session_id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>CookieStore &amp; session.session_id</title>
      <updated-at type="datetime">2008-07-07T14:47:36+01:00</updated-at>
      <user-id type="integer">17449</user-id>
      <version type="integer">1</version>
      <user-name>blj</user-name>
      <creator-name>blj</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/563</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Looks like the RequestForgeryProtection is setup to not depend on the session_id value when using a CookieStore. Instead, it uses a csrf_id value inside the cookie.

That said, we see intermittent InvalidAuthenticityToken exceptions on production that we haven't been able to reproduce or debug, and are trying to track down the cause.

 blj -- What problem are you seeing, specifically?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Looks like the RequestForgeryProtection is setup to not depend on the session_id value when using a CookieStore. Instead, it uses a csrf_id value inside the cookie.&lt;/p&gt;

&lt;p&gt;That said, we see intermittent InvalidAuthenticityToken exceptions on production that we haven't been able to reproduce or debug, and are trying to track down the cause.&lt;/p&gt;

&lt;p&gt; blj -- What problem are you seeing, specifically?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-25T16:26:27+01:00</created-at>
      <creator-id type="integer">17449</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: &quot;&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">563</number>
      <permalink>cookiestore-session-session_id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.0-stable cookie-store request-forgery-protection session_id</tag>
      <title>CookieStore &amp; session.session_id</title>
      <updated-at type="datetime">2008-08-25T16:26:27+01:00</updated-at>
      <user-id type="integer">14032</user-id>
      <version type="integer">2</version>
      <user-name>Bryan Helmkamp</user-name>
      <creator-name>blj</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/563</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>As far as I remember, the forgery protection was using the session_id, was not sure at which point the csfr_id was added. In my opinion changing session_id is unnecessary and it happens only when using cookie session store.</body>
      <body-html>&lt;div&gt;&lt;p&gt;As far as I remember, the forgery protection was using the session_id, was not sure at which point the csfr_id was added. In my opinion changing session_id is unnecessary and it happens only when using cookie session store.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-26T08:51:54+01:00</created-at>
      <creator-id type="integer">17449</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">563</number>
      <permalink>cookiestore-session-session_id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.0-stable cookie-store request-forgery-protection session_id</tag>
      <title>CookieStore &amp; session.session_id</title>
      <updated-at type="datetime">2008-08-26T08:51:54+01:00</updated-at>
      <user-id type="integer">17449</user-id>
      <version type="integer">3</version>
      <user-name>blj</user-name>
      <creator-name>blj</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/563</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-11-27T03:18:36+00:00</created-at>
      <creator-id type="integer">17449</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">563</number>
      <permalink>cookiestore-session-session_id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>2.0-stable cookie-store request-forgery-protection session_id</tag>
      <title>CookieStore &amp; session.session_id</title>
      <updated-at type="datetime">2008-11-27T03:18:39+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">4</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>blj</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/563</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Facing the same *ActionController::InvalidAuthenticityToken* exception on live server but unable to reproduce or debug properly, any suggestion?

Environment details: Linux, Rails 2.3.4, Postgres DB.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Facing the same
&lt;em&gt;ActionController::InvalidAuthenticityToken&lt;/em&gt; exception on
live server but unable to reproduce or debug properly, any
suggestion?&lt;/p&gt;
&lt;p&gt;Environment details: Linux, Rails 2.3.4, Postgres DB.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-11-09T06:07:15+00:00</created-at>
      <creator-id type="integer">17449</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">563</number>
      <permalink>cookiestore-session-session_id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>2.0-stable cookie-store request-forgery-protection session_id</tag>
      <title>CookieStore &amp; session.session_id</title>
      <updated-at type="datetime">2009-11-09T06:07:19+00:00</updated-at>
      <user-id type="integer">52233</user-id>
      <version type="integer">5</version>
      <user-name>Raza Ali</user-name>
      <creator-name>blj</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/563</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
