<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">89656</assigned-user-id>
  <attachments-count type="integer">5</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-04-22T06:48:03+01:00</created-at>
  <creator-id type="integer">95198</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4427</number>
  <permalink>strange-behaviour-in-exception-display</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag nil="true"></tag>
  <title>Strange behaviour in exception display</title>
  <updated-at type="datetime">2011-05-05T02:58:27+01:00</updated-at>
  <user-id type="integer">148049</user-id>
  <version type="integer">39</version>
  <user-name>af001</user-name>
  <creator-name>Karl Alexandre</creator-name>
  <assigned-user-name>Rohit Arondekar</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>High</priority-name>
  <original-body>I spent a bunch of time tracking a strange baheviour in Rails 3 exception display. The problem doesn't show up in 2.3.5. 
Here it is:  

h2. Step 1: Context

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= @subitems %&gt;
&lt;%= Boum.new %&gt;
@@@

h4. result

As expected, this renders `Action Controller: Exception caught` in the browser with the following message `uninitialized constant ActionView::CompiledTemplates::Boum`, fine.

h2. Step 2: Not displaying subitems

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= Boum.new %&gt;
@@@

h4. result

This renders `500 Internal Server Error`, weird.

h2. Step 3: Getting sibitems directly, instead of going through the item has_many subitems association 

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Subitem.all
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= Boum.new %&gt;
@@@

h4. result
Things back to normal: the exception is rendered correctly in the browser.

h3. Test configuration
@@@
OS X 10.5.8
Rails 3.0.0.beta3
Both 1.8.7 p249 &amp; 1.9.1 p378
@@@

Am I wrong, or is it an unexpected behaviour?

PS
Sample app attached (in step1 state, rake db:migrate / rake db:seed).</original-body>
  <latest-body>I spent a bunch of time tracking a strange baheviour in Rails 3 exception display. The problem doesn't show up in 2.3.5. 
Here it is:  

h2. Step 1: Context

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= @subitems %&gt;
&lt;%= Boum.new %&gt;
@@@

h4. result

As expected, this renders `Action Controller: Exception caught` in the browser with the following message `uninitialized constant ActionView::CompiledTemplates::Boum`, fine.

h2. Step 2: Not displaying subitems

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= Boum.new %&gt;
@@@

h4. result

This renders `500 Internal Server Error`, weird.

h2. Step 3: Getting sibitems directly, instead of going through the item has_many subitems association 

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Subitem.all
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= Boum.new %&gt;
@@@

h4. result
Things back to normal: the exception is rendered correctly in the browser.

h3. Test configuration
@@@
OS X 10.5.8
Rails 3.0.0.beta3
Both 1.8.7 p249 &amp; 1.9.1 p378
@@@

Am I wrong, or is it an unexpected behaviour?

PS
Sample app attached (in step1 state, rake db:migrate / rake db:seed).</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I spent a bunch of time tracking a strange baheviour in Rails 3
exception display. The problem doesn't show up in 2.3.5.&lt;br&gt;
Here it is:&lt;br&gt;&lt;/p&gt;
&lt;h2&gt;Step 1: Context&lt;/h2&gt;
&lt;h4&gt;app/controllers/subitems_controller.rb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;class SubitemsController &amp;lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;app/views/subitems/index.html.erb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;lt;%= @subitems %&amp;gt;
&amp;lt;%= Boum.new %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;result&lt;/h4&gt;
&lt;p&gt;As expected, this renders &lt;code&gt;Action Controller: Exception
caught&lt;/code&gt; in the browser with the following message
&lt;code&gt;uninitialized constant
ActionView::CompiledTemplates::Boum&lt;/code&gt;, fine.&lt;/p&gt;
&lt;h2&gt;Step 2: Not displaying subitems&lt;/h2&gt;
&lt;h4&gt;app/controllers/subitems_controller.rb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;class SubitemsController &amp;lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;app/views/subitems/index.html.erb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;lt;%= Boum.new %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;result&lt;/h4&gt;
&lt;p&gt;This renders &lt;code&gt;500 Internal Server Error&lt;/code&gt;, weird.&lt;/p&gt;
&lt;h2&gt;Step 3: Getting sibitems directly, instead of going through the
item has_many subitems association&lt;/h2&gt;
&lt;h4&gt;app/controllers/subitems_controller.rb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;class SubitemsController &amp;lt; ApplicationController
  def index
    @subitems = Subitem.all
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;app/views/subitems/index.html.erb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;lt;%= Boum.new %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;h4. result&lt;br&gt;
Things back to normal: the exception is rendered correctly in the
browser.&lt;/p&gt;
&lt;p&gt;h3. Test configuration&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;OS X 10.5.8
Rails 3.0.0.beta3
Both 1.8.7 p249 &amp;amp; 1.9.1 p378&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Am I wrong, or is it an unexpected behaviour?&lt;/p&gt;
&lt;p&gt;PS&lt;br&gt;
Sample app attached (in step1 state, rake db:migrate / rake
db:seed).&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I spent a bunch of time tracking a strange baheviour in Rails 3 exception display. The problem doesn't show up in 2.3.5. 
Here it is:  

h2. Step 1: Context

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= @subitems %&gt;
&lt;%= Boum.new %&gt;
@@@

h4. result

As expected, this renders `Action Controller: Exception caught` in the browser with the following message `uninitialized constant ActionView::CompiledTemplates::Boum`, fine.

h2. Step 2: Not displaying subitems

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= Boum.new %&gt;
@@@

h4. result

This renders `500 Internal Server Error`, weird.

h2. Step 3: Getting sibitems directly, instead of going through the item has_many subitems association 

h4. app/controllers/subitems_controller.rb

@@@ ruby
class SubitemsController &lt; ApplicationController
  def index
    @subitems = Subitem.all
  end
end
@@@

h4. app/views/subitems/index.html.erb

@@@ ruby
&lt;%= Boum.new %&gt;
@@@

h4. result
Things back to normal: the exception is rendered correctly in the browser.

h3. Test configuration
@@@
OS X 10.5.8
Rails 3.0.0.beta3
Both 1.8.7 p249 &amp; 1.9.1 p378
@@@

Am I wrong, or is it an unexpected behaviour?

PS
Sample app attached (in step1 state, rake db:migrate / rake db:seed).</body>
      <body-html>&lt;div&gt;&lt;p&gt;I spent a bunch of time tracking a strange baheviour in Rails 3
exception display. The problem doesn't show up in 2.3.5.&lt;br&gt;
Here it is:&lt;br&gt;&lt;/p&gt;
&lt;h2&gt;Step 1: Context&lt;/h2&gt;
&lt;h4&gt;app/controllers/subitems_controller.rb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;class SubitemsController &amp;lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;app/views/subitems/index.html.erb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;lt;%= @subitems %&amp;gt;
&amp;lt;%= Boum.new %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;result&lt;/h4&gt;
&lt;p&gt;As expected, this renders &lt;code&gt;Action Controller: Exception
caught&lt;/code&gt; in the browser with the following message
&lt;code&gt;uninitialized constant
ActionView::CompiledTemplates::Boum&lt;/code&gt;, fine.&lt;/p&gt;
&lt;h2&gt;Step 2: Not displaying subitems&lt;/h2&gt;
&lt;h4&gt;app/controllers/subitems_controller.rb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;class SubitemsController &amp;lt; ApplicationController
  def index
    @subitems = Item.first.subitems
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;app/views/subitems/index.html.erb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;lt;%= Boum.new %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;result&lt;/h4&gt;
&lt;p&gt;This renders &lt;code&gt;500 Internal Server Error&lt;/code&gt;, weird.&lt;/p&gt;
&lt;h2&gt;Step 3: Getting sibitems directly, instead of going through the
item has_many subitems association&lt;/h2&gt;
&lt;h4&gt;app/controllers/subitems_controller.rb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;class SubitemsController &amp;lt; ApplicationController
  def index
    @subitems = Subitem.all
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;app/views/subitems/index.html.erb&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;lt;%= Boum.new %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;h4. result&lt;br&gt;
Things back to normal: the exception is rendered correctly in the
browser.&lt;/p&gt;
&lt;p&gt;h3. Test configuration&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;OS X 10.5.8
Rails 3.0.0.beta3
Both 1.8.7 p249 &amp;amp; 1.9.1 p378&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Am I wrong, or is it an unexpected behaviour?&lt;/p&gt;
&lt;p&gt;PS&lt;br&gt;
Sample app attached (in step1 state, rake db:migrate / rake
db:seed).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-17T09:47:54+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-17T10:00:11+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">1</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-17T09:49:19+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-17T09:49:20+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">2</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-17T09:52:43+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-17T09:52:46+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">3</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Karl Alexandre, i have tried your application with the latest rails code from github and works as expected.
Please get a fresh copy from github, generate the application copy your models, views, controllers, routes and try it again.
Then we can close this issue.
Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Karl Alexandre, i have tried your application with the latest
rails code from github and works as expected.&lt;br&gt;
Please get a fresh copy from github, generate the application copy
your models, views, controllers, routes and try it again.&lt;br&gt;
Then we can close this issue.&lt;br&gt;
Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-22T20:05:46+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-22T20:33:56+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">4</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Santiago,

I bundled edge rails and still have the problem somehow.
The first request (step2) renders the exception, all the following render a 500.
The log file for two requests is attached.

Karl.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Santiago,&lt;/p&gt;
&lt;p&gt;I bundled edge rails and still have the problem somehow.&lt;br&gt;
The first request (step2) renders the exception, all the following
render a 500.&lt;br&gt;
The log file for two requests is attached.&lt;/p&gt;
&lt;p&gt;Karl.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-22T21:14:40+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-22T21:14:43+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">5</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-22T21:20:05+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-22T21:20:09+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">6</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Karl, works for me tell me how you did your app.

You need to have the lastest rails from github and run ruby DIR_WHERE_YOU_HAVE_RAILS_REPO/bin/rails myapp --dev

And then start doing the routes, models, and all again.

Let me know.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Karl, works for me tell me how you did your app.&lt;/p&gt;
&lt;p&gt;You need to have the lastest rails from github and run ruby
DIR_WHERE_YOU_HAVE_RAILS_REPO/bin/rails myapp --dev&lt;/p&gt;
&lt;p&gt;And then start doing the routes, models, and all again.&lt;/p&gt;
&lt;p&gt;Let me know.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-22T22:51:43+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-22T22:51:44+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">7</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Santigo,

Run this script and tell me the result on your side.

Karl.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Santigo,&lt;/p&gt;
&lt;p&gt;Run this script and tell me the result on your side.&lt;/p&gt;
&lt;p&gt;Karl.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-23T08:01:40+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-23T08:01:44+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">8</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Ok i'm trying right now, try this one you.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok i'm trying right now, try this one you.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-23T14:24:47+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-23T14:24:49+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">9</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Your patch doesn't apply cleanly on a fresh Rails edge generated app.
But try my app.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Your patch doesn't apply cleanly on a fresh Rails edge generated
app.&lt;br&gt;
But try my app.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-23T14:27:27+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-23T14:27:30+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">10</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Santiago,

Sorry for late reply,

In your app you have @Subitems.all@ in the controller, it works ok with it.
Now try @Item.first.subitems@ , it fails on the second request for me.
Strange thing is that @Item.first.subitems.all@ works fine, but @Item.first.subitems@ fails.

yours,
Karl.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Santiago,&lt;/p&gt;
&lt;p&gt;Sorry for late reply,&lt;/p&gt;
&lt;p&gt;In your app you have &lt;code&gt;Subitems.all&lt;/code&gt; in the
controller, it works ok with it.&lt;br&gt;
Now try &lt;code&gt;Item.first.subitems&lt;/code&gt; , it fails on the second
request for me.&lt;br&gt;
Strange thing is that &lt;code&gt;Item.first.subitems.all&lt;/code&gt; works
fine, but &lt;code&gt;Item.first.subitems&lt;/code&gt; fails.&lt;/p&gt;
&lt;p&gt;yours,&lt;br&gt;
Karl.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T09:32:42+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: actiondispatch activerecord exception
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T09:32:43+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">11</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Just tried this with the following configuration:

ruby 1.9.1p378 (2010-01-10 revision 26273) [i386-darwin10.2.0]
Rails 3.0.0.beta3

Works as expected and yields:
undefined method `subitems' for nil:NilClass</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just tried this with the following configuration:&lt;/p&gt;
&lt;p&gt;ruby 1.9.1p378 (2010-01-10 revision 26273)
[i386-darwin10.2.0]&lt;br&gt;
Rails 3.0.0.beta3&lt;/p&gt;
&lt;p&gt;Works as expected and yields:&lt;br&gt;
undefined method &lt;code&gt;subitems' for nil:NilClass&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T10:18:38+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 40272
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T10:18:39+01:00</updated-at>
      <user-id type="integer">70324</user-id>
      <version type="integer">12</version>
      <user-name>Steven Ringo</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Steven,
It seems you don't have the database populated with at least one item. Did you run rake db:seed ?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Steven,&lt;br&gt;
It seems you don't have the database populated with at least one
item. Did you run rake db:seed ?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T11:12:59+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T11:13:04+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">13</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>I did this and I get:
`uninitialized constant ActionView::CompiledTemplates::Boum`. No 500 page, just a standard white-and-grey error page.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I did this and I get:&lt;br&gt;
&lt;code&gt;uninitialized constant
ActionView::CompiledTemplates::Boum&lt;/code&gt;. No 500 page, just a
standard white-and-grey error page.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T11:21:42+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T11:22:22+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">14</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Ryan,
The first request is always OK. Try two requests in a row, and tell me the result of the second one.

I'm digging deeper and what I see now is that @ActionDispatch::ShowExceptions::render_exception@ goes @FAILSAFE@ while rendering this exception for the second time.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ryan,&lt;br&gt;
The first request is always OK. Try two requests in a row, and tell
me the result of the second one.&lt;/p&gt;
&lt;p&gt;I'm digging deeper and what I see now is that
&lt;code&gt;ActionDispatch::ShowExceptions::render_exception&lt;/code&gt; goes
&lt;code&gt;FAILSAFE&lt;/code&gt; while rendering this exception for the second
time.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T12:06:21+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T12:06:22+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">15</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Multiple requests works for me, I'm interested as to how you can replicate this issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Multiple requests works for me, I'm interested as to how you can
replicate this issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T12:13:23+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T12:13:26+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">16</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>yeah it is an issue. See here http://pastie.org/937107. When you start server you get proper error page with exception. On second request you get &quot;500 Internal Server Error&quot;</body>
      <body-html>&lt;div&gt;&lt;p&gt;yeah it is an issue. See here &lt;a href=
&quot;http://pastie.org/937107&quot;&gt;http://pastie.org/937107&lt;/a&gt;. When you
start server you get proper error page with exception. On second
request you get &quot;500 Internal Server Error&quot;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T13:06:48+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T13:06:52+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">17</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Anil,

I don't get this exact trace, but that's the point. 

Two interresing points :
- First, the association gets loaded even if not used (in my example),
- Second, the exception fire two times as expected, but the middleware goes fail safe with can't dup nil class on the second rendering (may be something to do with template compiler ?)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Anil,&lt;/p&gt;
&lt;p&gt;I don't get this exact trace, but that's the point.&lt;/p&gt;
&lt;p&gt;Two interresing points :&lt;br&gt;
- First, the association gets loaded even if not used (in my
example), - Second, the exception fire two times as expected, but
the middleware goes fail safe with can't dup nil class on the
second rendering (may be something to do with template compiler
?)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T13:45:28+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T13:45:29+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">18</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>All,

The cause of the problem is that @_request_and_response.erb@ template inspects the current controller throught @request.env[&quot;action_controller.instance&quot;]@

In my example app this reference the &lt;code&gt;@subitems&lt;/code&gt; instance variable.

If I prevent this to happen by adding &lt;code&gt;&amp;lt;%@request.env.delete(&quot;action_controller.instance&quot;)%&amp;gt;&lt;/code&gt; to @_request_and_response.erb@ , everything goes fine.

Why all this lead to a @can't dup nil class@ in @ActiveRecord::Base.scoped_methods@ (Cause of the 500) ? To be continued...</body>
      <body-html>&lt;div&gt;&lt;p&gt;All,&lt;/p&gt;
&lt;p&gt;The cause of the problem is that
&lt;code&gt;_request_and_response.erb&lt;/code&gt; template inspects the
current controller throught
&lt;code&gt;request.env[&quot;action_controller.instance&quot;]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;In my example app this reference the &lt;code&gt;@subitems&lt;/code&gt;
instance variable.&lt;/p&gt;
&lt;p&gt;If I prevent this to happen by adding
&lt;code&gt;&amp;lt;%@request.env.delete(&quot;action_controller.instance&quot;)%&amp;gt;&lt;/code&gt;
to &lt;code&gt;_request_and_response.erb&lt;/code&gt; , everything goes
fine.&lt;/p&gt;
&lt;p&gt;Why all this lead to a &lt;code&gt;can't dup nil class&lt;/code&gt; in
&lt;code&gt;ActiveRecord::Base.scoped_methods&lt;/code&gt; (Cause of the 500) ?
To be continued...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T15:20:57+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T15:20:58+01:00</updated-at>
      <user-id type="integer">95198</user-id>
      <version type="integer">19</version>
      <user-name>Karl Alexandre</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-27T18:44:59+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-04-27T18:45:01+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">20</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Can a bugmasher reproduce this behavior?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can a bugmasher reproduce this behavior?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-15T01:51:42+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: actiondispatch activerecord &quot;activerecord rails3&quot; exception
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-05-15T01:51:44+01:00</updated-at>
      <user-id type="integer">22242</user-id>
      <version type="integer">21</version>
      <user-name>Dan Pickett</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>I too got a 500 Internal Server Error by following the steps provided by Karl.

I created a gist of the rails server output =&gt; http://gist.github.com/401967 -- Note that I have demarcated the logs of the two requests. Before the &quot; Started GET &quot;/subitems/index&quot; &quot; of the second request a error is shown as follows:

Error during failsafe response:
ActionView::Template::Error (can't dup NilClass) in /home/rohit/.rvm/gems/ruby-1.9.2-head/gems/actionpack-3.0.0.beta3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb:

Also by switching to Subitem.all the 500 error doesn't appear.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I too got a 500 Internal Server Error by following the steps
provided by Karl.&lt;/p&gt;
&lt;p&gt;I created a gist of the rails server output =&amp;gt; &lt;a href=
&quot;http://gist.github.com/401967&quot;&gt;http://gist.github.com/401967&lt;/a&gt;
-- Note that I have demarcated the logs of the two requests. Before
the &quot; Started GET &quot;/subitems/index&quot; &quot; of the second request a error
is shown as follows:&lt;/p&gt;
&lt;p&gt;Error during failsafe response:&lt;br&gt;
ActionView::Template::Error (can't dup NilClass) in
/home/rohit/.rvm/gems/ruby-1.9.2-head/gems/actionpack-3.0.0.beta3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb:&lt;/p&gt;
&lt;p&gt;Also by switching to Subitem.all the 500 error doesn't
appear.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-15T04:10:44+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-05-15T04:10:49+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">22</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Forgot to mention my environment:
Ubuntu 10.04 
ruby 1.9.2dev (2010-05-08 trunk 27665) [x86_64-linux]
Rails 3.0.0.beta3</body>
      <body-html>&lt;div&gt;&lt;p&gt;Forgot to mention my environment:&lt;br&gt;
Ubuntu 10.04&lt;br&gt;
ruby 1.9.2dev (2010-05-08 trunk 27665) [x86_64-linux]&lt;br&gt;
Rails 3.0.0.beta3&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-15T05:19:02+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-05-15T05:19:04+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">23</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>verified

See pasties for info about the logs

https://gist.github.com/2cc2371975ade98b85e5
http://pastie.org/937107

Environment:
Macbook Pro Snow Leopard
ruby-1.8.7-p249 [ x86_64 ]
Rails 3 master branch &quot;a0621c1086165e4b3cff71b54f08a190851b6314&quot; 

Attached is rails app with which this bug is reproducible.</body>
      <body-html>&lt;div&gt;&lt;p&gt;verified&lt;/p&gt;
&lt;p&gt;See pasties for info about the logs&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;https://gist.github.com/2cc2371975ade98b85e5&quot;&gt;https://gist.github.com/2cc2371975ade98b85e5&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://pastie.org/937107&quot;&gt;http://pastie.org/937107&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Environment:&lt;br&gt;
Macbook Pro Snow Leopard&lt;br&gt;
ruby-1.8.7-p249 [ x86_64 ]&lt;br&gt;
Rails 3 master branch
&quot;a0621c1086165e4b3cff71b54f08a190851b6314&quot;&lt;/p&gt;
&lt;p&gt;Attached is rails app with which this bug is reproducible.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-15T07:14:19+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-05-15T07:14:20+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">24</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>This is happening, I believe, because in ActiveRecord::Base

        def scoped_methods #:nodoc:
          key = :&quot;#{self}_scoped_methods&quot;
          Thread.current[key] = Thread.current[key].presence || self.default_scoping.dup
        end

On the second request self.default_scoping is nil as opposed to []. This causes an exception trying to dup nil.  However, I cannot see what is setting the default_scoping to nil</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is happening, I believe, because in ActiveRecord::Base&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    def scoped_methods #:nodoc:
      key = :&quot;#{self}_scoped_methods&quot;
      Thread.current[key] = Thread.current[key].presence || self.default_scoping.dup
    end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;On the second request self.default_scoping is nil as opposed to
[]. This causes an exception trying to dup nil. However, I cannot
see what is setting the default_scoping to nil&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-15T22:20:55+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-05-15T22:20:57+01:00</updated-at>
      <user-id type="integer">78116</user-id>
      <version type="integer">25</version>
      <user-name>Gavin Stark</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>I had the same problem when using Tyler Kovac's HyperBase with is a subclass of ActiveRecord::Base.

default_scoping is defined as a class_inheritable_accessor in base.rb. It gets initialized in ActiveRecord::Base and HyperBase wasn't able to see the default value. Adding &quot;self.default_scoping = self.superclass.default_scoping&quot; to HyperBase resolved the situation. I'm not sure if that is a smart fix, though. It is my understanding that this is the intende behavior of class_inheritable_accessor.

What I don't understand is why most ActiveRecord::Base subclasses to see the default value for default_Scoping (which is []). Can somebody from the team explain how that works?

This problem was killing me, hope I could help a little bit.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I had the same problem when using Tyler Kovac's HyperBase with
is a subclass of ActiveRecord::Base.&lt;/p&gt;
&lt;p&gt;default_scoping is defined as a class_inheritable_accessor in
base.rb. It gets initialized in ActiveRecord::Base and HyperBase
wasn't able to see the default value. Adding &quot;self.default_scoping
= self.superclass.default_scoping&quot; to HyperBase resolved the
situation. I'm not sure if that is a smart fix, though. It is my
understanding that this is the intende behavior of
class_inheritable_accessor.&lt;/p&gt;
&lt;p&gt;What I don't understand is why most ActiveRecord::Base
subclasses to see the default value for default_Scoping (which is
[]). Can somebody from the team explain how that works?&lt;/p&gt;
&lt;p&gt;This problem was killing me, hope I could help a little bit.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-28T22:35:29+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-05-28T22:35:35+01:00</updated-at>
      <user-id type="integer">101193</user-id>
      <version type="integer">26</version>
      <user-name>Jonas Huckestein</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>I can't reproduce this on Rails 3 RC, can somebody else give a try?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I can't reproduce this on Rails 3 RC, can somebody else give a
try?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-03T08:27:34+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-08-03T08:27:37+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">27</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/27625)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/27625&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-30T04:10:32+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-08-30T04:10:32+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">28</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Can't reproduce on Safari, Chrome or Firefox on OSX, Rails 3.0.0 and ruby 1.9.2p0.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can't reproduce on Safari, Chrome or Firefox on OSX, Rails 3.0.0
and ruby 1.9.2p0.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-14T00:16:09+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-09-14T00:16:12+01:00</updated-at>
      <user-id type="integer">115699</user-id>
      <version type="integer">29</version>
      <user-name>Len Smith</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>I think this issue got resolved along the way. I'm going to go ahead and close. If anybody still faces this issue just leave a comment and I'll reopen it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think this issue got resolved along the way. I'm going to go
ahead and close. If anybody still faces this issue just leave a
comment and I'll reopen it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-14T04:23:33+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-09-14T04:23:35+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">30</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Just a reminder you said you would close this :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just a reminder you said you would close this :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-08T15:57:01+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 14998
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-10-08T15:57:03+01:00</updated-at>
      <user-id type="integer">81551</user-id>
      <version type="integer">31</version>
      <user-name>Andrea Campi</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Andrea, the ticket is already closed as 'resolved'. :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Andrea, the ticket is already closed as 'resolved'. :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-09T01:37:25+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-10-09T01:37:28+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">32</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:51+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 82861
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception</tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-10-15T23:01:51+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">33</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-08T08:51:40+00:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: actiondispatch activerecord &quot;activerecord rails3&quot; bugmash exception
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2010-11-08T08:51:45+00:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">35</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;nfl throwback jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;authentic nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale authentic nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;
&lt;a href=&quot; http://www.wholesale-nflshop.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;nfl throwback
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;authentic nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale authentic nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a&gt;wholesale nfl jerseys&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-04T06:11:58+00:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2011-01-04T16:24:41+00:00</updated-at>
      <user-id type="integer">131088</user-id>
      <version type="integer">36</version>
      <user-name>icooky</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>oh my!! i love you so much!!

Thank you so much.
Hermes Bags
http://www.louisvuittonparty.com/
&lt;a href=&quot;http://www.louisvuittonparty.com/&quot;&gt;Hermes Bags&lt;/a&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;oh my!! i love you so much!!&lt;/p&gt;
&lt;p&gt;Thank you so much.&lt;br&gt;
Hermes Bags&lt;br&gt;
&lt;a href=
&quot;http://www.louisvuittonparty.com/&quot;&gt;http://www.louisvuittonparty.com/&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.louisvuittonparty.com/&quot;&gt;Hermes Bags&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-31T05:59:30+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2011-03-31T06:00:13+01:00</updated-at>
      <user-id type="integer">143651</user-id>
      <version type="integer">37</version>
      <user-name>yoyogo</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>PDF to JPG Converter is a more efficient pdf to jpg conversion software
&lt;a href=&quot;http://www.oxpdf.com/pdf-creator.html&quot;&gt;PDF Creator&lt;/a&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-jpg-converter.html&quot;&gt;pdf to jpg converter&lt;/a&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-image-converter.html&quot;&gt;pdf to image converter&lt;/a&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-tiff-converter.html&quot;&gt;pdf to tiff converter&lt;/a&gt;
which is able to convert pdf to jpg format with original output quality and fast conversion speed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;PDF to JPG Converter is a more efficient pdf to jpg conversion
software&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-creator.html&quot;&gt;PDF Creator&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-jpg-converter.html&quot;&gt;pdf to jpg
converter&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-image-converter.html&quot;&gt;pdf to
image converter&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-tiff-converter.html&quot;&gt;pdf to
tiff converter&lt;/a&gt;&lt;br&gt;
which is able to convert pdf to jpg format with original output
quality and fast conversion speed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-04-22T04:47:33+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2011-04-22T06:48:03+01:00</updated-at>
      <user-id type="integer">146598</user-id>
      <version type="integer">38</version>
      <user-name>machen</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">89656</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>&#31169;&#12398;&#20013;&#12391;&#12289;&#32207;&#21512;&#35413;&#20385;&#12398;&#12392;&#12387;&#12390;&#12418;&#20302;&#12356;&#12450;&#12496;&lt;a href=&quot;http://www.abakuro.co.jp/&quot; rel=&quot;dofollow&quot;&gt;&lt;b&gt;&#12450;&#12496;&#12463;&#12525;&#12507;&#12522;&#12473;&#12479;&#12540;&lt;/b&gt;&lt;/a&gt;&#12463;&#12525;&#37504;&#24231;&#24215;&#12290;&#12450;&#12496;&#12463;&#12525;&#12399;&#22823;&#22909;&#12365;&#12394;&#12435;&#12391;&#12377;&#12369;&#12393;&#12397;&#12290;&#19968;&#26152;&#26085;&#12398;&#26481;&#20140;&#39365;&#20184;&#36817;&#12391;&#12398;&#25171;&#12385;&#21512;&#12431;&#12379;&#12398;&#24460;&#12289;&#25955;&#27497;&#12364;&#12390;&#12425;&#20037;&#12293;&#12395;&#34892;&#12387;&#12390;&#12365;&#12414;&#12375;&#12383;&#12290;&#12381;&#12375;&#12383;&#12425;&#12499;&#12483;&#12463;&#12522;&#65281;&#30456;&#22793;&#12431;&#12425;&lt;a href=&quot;http://www.abakuro.co.jp/&quot; rel=&quot;dofollow&quot;&gt;&lt;b&gt;&#12450;&#12496;&#12463;&#12525;&lt;/b&gt;&lt;/a&gt;&#12378;&#12289;&#36362;&#12387;&#12390;&#12356;&#12427;&#12384;&#12369;&#12398;&#24215;&#21729;&#12373;&#12435;&#12392;&#12363;&#12418;&#12356;&#12414;&#12375;&#12383;&#12364;&#12289;</body>
      <body-html>&lt;div&gt;&lt;p&gt;
&amp;#31169;&amp;#12398;&amp;#20013;&amp;#12391;&amp;#12289;&amp;#32207;&amp;#21512;&amp;#35413;&amp;#20385;&amp;#12398;&amp;#12392;&amp;#12387;&amp;#12390;&amp;#12418;&amp;#20302;&amp;#12356;&amp;#12450;&amp;#12496;&lt;a href=&quot;http://www.abakuro.co.jp/&quot;&gt;&lt;b&gt;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&amp;#12507;&amp;#12522;&amp;#12473;&amp;#12479;&amp;#12540;&lt;/b&gt;&lt;/a&gt;&amp;#12463;&amp;#12525;&amp;#37504;&amp;#24231;&amp;#24215;&amp;#12290;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&amp;#12399;&amp;#22823;&amp;#22909;&amp;#12365;&amp;#12394;&amp;#12435;&amp;#12391;&amp;#12377;&amp;#12369;&amp;#12393;&amp;#12397;&amp;#12290;&amp;#19968;&amp;#26152;&amp;#26085;&amp;#12398;&amp;#26481;&amp;#20140;&amp;#39365;&amp;#20184;&amp;#36817;&amp;#12391;&amp;#12398;&amp;#25171;&amp;#12385;&amp;#21512;&amp;#12431;&amp;#12379;&amp;#12398;&amp;#24460;&amp;#12289;&amp;#25955;&amp;#27497;&amp;#12364;&amp;#12390;&amp;#12425;&amp;#20037;&amp;#12293;&amp;#12395;&amp;#34892;&amp;#12387;&amp;#12390;&amp;#12365;&amp;#12414;&amp;#12375;&amp;#12383;&amp;#12290;&amp;#12381;&amp;#12375;&amp;#12383;&amp;#12425;&amp;#12499;&amp;#12483;&amp;#12463;&amp;#12522;&amp;#65281;&amp;#30456;&amp;#22793;&amp;#12431;&amp;#12425;&lt;a href=&quot;http://www.abakuro.co.jp/&quot;&gt;&lt;b&gt;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&lt;/b&gt;&lt;/a&gt;&amp;#12378;&amp;#12289;&amp;#36362;&amp;#12387;&amp;#12390;&amp;#12356;&amp;#12427;&amp;#12384;&amp;#12369;&amp;#12398;&amp;#24215;&amp;#21729;&amp;#12373;&amp;#12435;&amp;#12392;&amp;#12363;&amp;#12418;&amp;#12356;&amp;#12414;&amp;#12375;&amp;#12383;&amp;#12364;&amp;#12289;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-05-05T02:55:31+01:00</created-at>
      <creator-id type="integer">95198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4427</number>
      <permalink>strange-behaviour-in-exception-display</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Strange behaviour in exception display</title>
      <updated-at type="datetime">2011-05-05T02:58:27+01:00</updated-at>
      <user-id type="integer">148049</user-id>
      <version type="integer">39</version>
      <user-name>af001</user-name>
      <creator-name>Karl Alexandre</creator-name>
      <assigned-user-name>Rohit Arondekar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4427</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>4604056282adc01e3f5b41bd46063f37b65009ed</code>
      <content-type>application/x-gzip</content-type>
      <created-at type="datetime">2010-04-17T09:52:43+01:00</created-at>
      <filename>demo.tgz</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">486447</id>
      <size type="integer">22952</size>
      <uploader-id type="integer">95198</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/486447/demo.tgz</url>
    </attachment>
    <attachment type="Attachment">
      <code>1a1335647153a9ce4fea561dba34f5475c319b18</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-04-22T21:20:05+01:00</created-at>
      <filename>log.txt</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">493703</id>
      <size type="integer">4361</size>
      <uploader-id type="integer">95198</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/493703/log.txt</url>
    </attachment>
    <attachment type="Attachment">
      <code>699715a5614396ec01673f2869689b8d37890c32</code>
      <content-type>application/x-zip</content-type>
      <created-at type="datetime">2010-04-23T08:01:40+01:00</created-at>
      <filename>demo.zip</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">494297</id>
      <size type="integer">2105</size>
      <uploader-id type="integer">95198</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/494297/demo.zip</url>
    </attachment>
    <attachment type="Attachment">
      <code>35444ef364cbbdb049113ed82ff8c5b1d5b6d2e7</code>
      <content-type>application/zip</content-type>
      <created-at type="datetime">2010-04-23T14:24:47+01:00</created-at>
      <filename>boum.zip</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">494643</id>
      <size type="integer">99799</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/494643/boum.zip</url>
    </attachment>
    <attachment type="Attachment">
      <code>786457c190ad1456c5981c3d744d625045bc95d6</code>
      <content-type>application/zip</content-type>
      <created-at type="datetime">2010-05-15T07:14:19+01:00</created-at>
      <filename>boum.zip</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">522497</id>
      <size type="integer">102565</size>
      <uploader-id type="integer">1300</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/522497/boum.zip</url>
    </attachment>
  </attachments>
</ticket>
