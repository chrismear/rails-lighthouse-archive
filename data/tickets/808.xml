<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-08-12T19:53:49+01:00</created-at>
  <creator-id type="integer">28839</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">808</number>
  <permalink>patch-postgresql-all-returned-find_by_sql-attributes-are-string</permalink>
  <priority type="integer">268</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>postgresql - all returned .find_by_sql attributes are string</title>
  <updated-at type="datetime">2008-11-25T16:09:17+00:00</updated-at>
  <user-id type="integer">424</user-id>
  <version type="integer">5</version>
  <user-name>Joshua Peek</user-name>
  <creator-name>Jason Yuen</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/808</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Copying ticket #6631 (http://dev.rubyonrails.org/ticket/6631) over from Trac as I could not find this issue on Lighthouse.   

Specifically, this problem seems to occur with Postgresql consistently whenever a column alias is used that does not match an AR attribute.  Also I noticed that the patch attached to Trac ticket #6631 is not compatible with 2.1.2. so I'm assuming the workaround for now is to manually convert the results from find_by_sql?</original-body>
  <latest-body>Copying ticket #6631 (http://dev.rubyonrails.org/ticket/6631) over from Trac as I could not find this issue on Lighthouse.   

Specifically, this problem seems to occur with Postgresql consistently whenever a column alias is used that does not match an AR attribute.  Also I noticed that the patch attached to Trac ticket #6631 is not compatible with 2.1.2. so I'm assuming the workaround for now is to manually convert the results from find_by_sql?</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Copying ticket &lt;a href=&quot;/projects/8994/tickets/6631&quot; title=&quot;Ticket #6631&quot;&gt;#6631&lt;/a&gt; (&lt;a href=&quot;http://dev.rubyonrails.org/ticket/6631)&quot;&gt;http://dev.rubyonrails.org/ticke...&lt;/a&gt; over from Trac as I could not find this issue on Lighthouse.&lt;/p&gt;

&lt;p&gt;Specifically, this problem seems to occur with Postgresql consistently whenever a column alias is used that does not match an AR attribute.  Also I noticed that the patch attached to Trac ticket &lt;a href=&quot;/projects/8994/tickets/6631&quot; title=&quot;Ticket #6631&quot;&gt;#6631&lt;/a&gt; is not compatible with 2.1.2. so I'm assuming the workaround for now is to manually convert the results from find_by_sql?&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Copying ticket 6631 ( http://dev.rubyonrails.org/ticket/6631 ) over from Trac as I could not find this issue on Lighthouse.   

Specifically, this problem seems to occur with Postgresql consistently whenever a column alias is used that does not match an AR attribute.  Also I noticed that the patch attached to Trac ticket 6631 is not compatible with 2.1.2. so I'm assuming the workaround for now is to manually convert the results from find_by_sql?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Copying ticket 6631 ( &lt;a href=&quot;http://dev.rubyonrails.org/ticket/6631&quot;&gt;http://dev.rubyonrails.org/ticke...&lt;/a&gt; ) over from Trac as I could not find this issue on Lighthouse.&lt;/p&gt;

&lt;p&gt;Specifically, this problem seems to occur with Postgresql consistently whenever a column alias is used that does not match an AR attribute.  Also I noticed that the patch attached to Trac ticket 6631 is not compatible with 2.1.2. so I'm assuming the workaround for now is to manually convert the results from find_by_sql?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-12T20:23:01+01:00</created-at>
      <creator-id type="integer">28839</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">808</number>
      <permalink>patch-postgresql-all-returned-find_by_sql-attributes-are-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[PATCH] postgresql - all returned .find_by_sql attributes are string</title>
      <updated-at type="datetime">2008-08-12T20:23:01+01:00</updated-at>
      <user-id type="integer">28839</user-id>
      <version type="integer">1</version>
      <user-name>Jason Yuen</user-name>
      <creator-name>Jason Yuen</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/808</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-12T20:00:22+01:00</created-at>
      <creator-id type="integer">28839</creator-id>
      <diffable-attributes type="yaml">--- 
:title: &quot;[PATCH] postgresql - all returned .find_by_sql attributes are string&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">808</number>
      <permalink>patch-postgresql-all-returned-find_by_sql-attributes-are-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>postgresql - all returned .find_by_sql attributes are string</title>
      <updated-at type="datetime">2008-08-12T20:00:22+01:00</updated-at>
      <user-id type="integer">28839</user-id>
      <version type="integer">2</version>
      <user-name>Jason Yuen</user-name>
      <creator-name>Jason Yuen</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/808</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It seems the only type that is changed into another format by AR for postgresql is the Money type.

See postgresql_adaptor.rb #select_raw, it may be of help fixing this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It seems the only type that is changed into another format by AR for postgresql is the Money type.&lt;/p&gt;

&lt;p&gt;See postgresql_adaptor.rb #select_raw, it may be of help fixing this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-18T22:14:49+01:00</created-at>
      <creator-id type="integer">28839</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">808</number>
      <permalink>patch-postgresql-all-returned-find_by_sql-attributes-are-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>postgresql - all returned .find_by_sql attributes are string</title>
      <updated-at type="datetime">2008-08-18T22:14:49+01:00</updated-at>
      <user-id type="integer">11359</user-id>
      <version type="integer">3</version>
      <user-name>Tony Pitale</user-name>
      <creator-name>Jason Yuen</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/808</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Looks like the newest postgresql gem, &quot;pg&quot;, does not support translate_results, but it does implement &quot;pgresult_ftype&quot; which returns the OID of a column in a PGresult and would give us accurate information on the types of columns as known by postgresql.

I'm not sure however if that could be misleading in certain cases. For example if AR expects a value for a string column, but we construct the query in a way that makes postgresql return an integer then it would be unclear if we should convert it to string or integer (the value is integer, but the column that it supposedly comes from is string).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Looks like the newest postgresql gem, &quot;pg&quot;, does not support translate_results, but it does implement &quot;pgresult_ftype&quot; which returns the OID of a column in a PGresult and would give us accurate information on the types of columns as known by postgresql.&lt;/p&gt;

&lt;p&gt;I'm not sure however if that could be misleading in certain cases. For example if AR expects a value for a string column, but we construct the query in a way that makes postgresql return an integer then it would be unclear if we should convert it to string or integer (the value is integer, but the column that it supposedly comes from is string).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-22T21:18:57+01:00</created-at>
      <creator-id type="integer">28839</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">808</number>
      <permalink>patch-postgresql-all-returned-find_by_sql-attributes-are-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>postgresql - all returned .find_by_sql attributes are string</title>
      <updated-at type="datetime">2008-08-22T21:18:57+01:00</updated-at>
      <user-id type="integer">14890</user-id>
      <version type="integer">4</version>
      <user-name>Tarmo T&#228;nav</user-name>
      <creator-name>Jason Yuen</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/808</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-11-25T16:09:14+00:00</created-at>
      <creator-id type="integer">28839</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">808</number>
      <permalink>patch-postgresql-all-returned-find_by_sql-attributes-are-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>postgresql - all returned .find_by_sql attributes are string</title>
      <updated-at type="datetime">2008-11-25T16:09:17+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">5</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Jason Yuen</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/808</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
