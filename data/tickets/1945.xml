<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-02-11T19:54:03+00:00</created-at>
  <creator-id type="integer">46781</creator-id>
  <milestone-due-on type="datetime">2009-01-31T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1945</number>
  <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
  <priority type="integer">28</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>file_field multipart paperclip upload</tag>
  <title>Multipart form with empty file_field submits nil</title>
  <updated-at type="datetime">2009-03-13T23:14:57+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">17</version>
  <user-name>Repository</user-name>
  <creator-name>Chris Barnes</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
  <priority-name nil="true"></priority-name>
  <original-body>I noticed that posting a multipart form with a blank file_field submits a nil in edge rails.  Is this the intended behavior?  In rails 2.2 it submitted an empty string.

I'm using the paperclip plugin which ignores the empty string but deletes attachments that are set to nil.  With this new behavior, paperclip deletes every attachment on update.  If this is the intended behavior for rails 2.3 then I'll submit a ticket on the paperclip project about modifying the plugin to handle nil values a different way.

My rails SHA-1 is 1a2a71333f197e98d1cd7fe380d613cbada4446b</original-body>
  <latest-body>I noticed that posting a multipart form with a blank file_field submits a nil in edge rails.  Is this the intended behavior?  In rails 2.2 it submitted an empty string.

I'm using the paperclip plugin which ignores the empty string but deletes attachments that are set to nil.  With this new behavior, paperclip deletes every attachment on update.  If this is the intended behavior for rails 2.3 then I'll submit a ticket on the paperclip project about modifying the plugin to handle nil values a different way.

My rails SHA-1 is 1a2a71333f197e98d1cd7fe380d613cbada4446b</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I noticed that posting a multipart form with a blank file_field
submits a nil in edge rails. Is this the intended behavior? In
rails 2.2 it submitted an empty string.&lt;/p&gt;
&lt;p&gt;I'm using the paperclip plugin which ignores the empty string
but deletes attachments that are set to nil. With this new
behavior, paperclip deletes every attachment on update. If this is
the intended behavior for rails 2.3 then I'll submit a ticket on
the paperclip project about modifying the plugin to handle nil
values a different way.&lt;/p&gt;
&lt;p&gt;My rails SHA-1 is 1a2a71333f197e98d1cd7fe380d613cbada4446b&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I noticed that posting a multipart form with a blank file_field submits a nil in edge rails.  Is this the intended behavior?  In rails 2.2 it submitted an empty string.

I'm using the paperclip plugin which ignores the empty string but deletes attachments that are set to nil.  With this new behavior, paperclip deletes every attachment on update.  If this is the intended behavior for rails 2.3 then I'll submit a ticket on the paperclip project about modifying the plugin to handle nil values a different way.

My rails SHA-1 is 1a2a71333f197e98d1cd7fe380d613cbada4446b</body>
      <body-html>&lt;div&gt;&lt;p&gt;I noticed that posting a multipart form with a blank file_field
submits a nil in edge rails. Is this the intended behavior? In
rails 2.2 it submitted an empty string.&lt;/p&gt;
&lt;p&gt;I'm using the paperclip plugin which ignores the empty string
but deletes attachments that are set to nil. With this new
behavior, paperclip deletes every attachment on update. If this is
the intended behavior for rails 2.3 then I'll submit a ticket on
the paperclip project about modifying the plugin to handle nil
values a different way.&lt;/p&gt;
&lt;p&gt;My rails SHA-1 is 1a2a71333f197e98d1cd7fe380d613cbada4446b&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-11T19:54:03+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-02-11T19:54:04+00:00</updated-at>
      <user-id type="integer">46781</user-id>
      <version type="integer">1</version>
      <user-name>Chris Barnes</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-23T18:43:27+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-02-23T18:43:29+00:00</updated-at>
      <user-id type="integer">46781</user-id>
      <version type="integer">2</version>
      <user-name>Chris Barnes</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-23T20:06:46+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-02-23T20:06:50+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">3</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Yeah, it looks like rack's multipart parser sets it to nil, which is what we are using now. I think the behavior seems correct. If there is a a good reason to have blank uploads set to &quot;&quot;, we should get this fixed in rack core.

I'll make a note of it as an API change.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yeah, it looks like rack's multipart parser sets it to nil,
which is what we are using now. I think the behavior seems correct.
If there is a a good reason to have blank uploads set to &quot;&quot;, we
should get this fixed in rack core.&lt;/p&gt;
&lt;p&gt;I'll make a note of it as an API change.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-24T17:47:42+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-02-24T17:47:47+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">4</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>So, just to clarify, is this something that needs to be changed in Rack, or in the behavior of plugins like Paperclip?</body>
      <body-html>&lt;div&gt;&lt;p&gt;So, just to clarify, is this something that needs to be changed
in Rack, or in the behavior of plugins like Paperclip?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-05T09:01:02+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-05T09:01:07+00:00</updated-at>
      <user-id type="integer">4578</user-id>
      <version type="integer">5</version>
      <user-name>PJ Kelly</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>it was not fixed in 2.3RC2</body>
      <body-html>&lt;div&gt;&lt;p&gt;it was not fixed in 2.3RC2&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-09T12:05:08+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-09T12:05:12+00:00</updated-at>
      <user-id type="integer">6721</user-id>
      <version type="integer">6</version>
      <user-name>Dmitry Smalko</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Yeah, still doing:

@@@ ruby
params[:hinge].delete(:image) unless params[:hinge][:image]
@@@

before

@@@ ruby
@hinge.update_attributes(params[:hinge])
@@@

Should it be fixed in paperclip?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yeah, still doing:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
params[:hinge].delete(:image) unless params[:hinge][:image]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;before&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
@hinge.update_attributes(params[:hinge])
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Should it be fixed in paperclip?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-11T01:13:03+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-11T01:49:11+00:00</updated-at>
      <user-id type="integer">16383</user-id>
      <version type="integer">7</version>
      <user-name>Dmitry Polushkin</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Follow to: http://thoughtbot.lighthouseapp.com/projects/8794/tickets/114-empty-file-fields-get-deleted-on-update-with-rails-23</body>
      <body-html>&lt;div&gt;&lt;p&gt;Follow to: &lt;a href=&quot;http://thoughtbot.lighthouseapp.com/projects/8794/tickets/114-empty-file-fields-get-deleted-on-update-with-rails-23&quot;&gt;
http://thoughtbot.lighthouseapp....&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-11T01:19:38+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-11T01:57:20+00:00</updated-at>
      <user-id type="integer">16383</user-id>
      <version type="integer">8</version>
      <user-name>Dmitry Polushkin</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I don't think &quot;&quot; is a correct value, but setting it to nil is problematic as file fields can't, unlike any other fields, hold a prepopulated value. So while other fields can simply set themselves to themselves, file fields set to nil will overwrite. While I think nil is technically correct in the case of HTML form submission, it's not in the case of acting like an attribute. 

Perhaps the best case is for the Rack multipart handler to simply leave the file out of the params if there is no upload, similarly to how unchecked checkboxes are left out.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I don't think &quot;&quot; is a correct value, but setting it to nil is
problematic as file fields can't, unlike any other fields, hold a
prepopulated value. So while other fields can simply set themselves
to themselves, file fields set to nil will overwrite. While I think
nil is technically correct in the case of HTML form submission,
it's not in the case of acting like an attribute.&lt;/p&gt;
&lt;p&gt;Perhaps the best case is for the Rack multipart handler to
simply leave the file out of the params if there is no upload,
similarly to how unchecked checkboxes are left out.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-12T19:12:24+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-12T19:12:26+00:00</updated-at>
      <user-id type="integer">10614</user-id>
      <version type="integer">9</version>
      <user-name>Jon Yurek</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>fwiw I'd agree that excluding file fields with no upload from params makes more sense than leaving them in and set to nil.</body>
      <body-html>&lt;div&gt;&lt;p&gt;fwiw I'd agree that excluding file fields with no upload from
params makes more sense than leaving them in and set to nil.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-12T21:53:50+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-12T21:53:54+00:00</updated-at>
      <user-id type="integer">10510</user-id>
      <version type="integer">10</version>
      <user-name>Rob Anderton</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Please submit a patch to rack core ASAP!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Please submit a patch to rack core ASAP!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-13T02:55:14+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-13T02:55:19+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">11</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm attaching a patch that sets blank uploads to &quot;&quot; instead of nil. It appears to fix the problems with Paperclip in my testing.

I can't figure out how to ignore the attribute altogether. Maybe somebody else can give it a shot...?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm attaching a patch that sets blank uploads to &quot;&quot; instead of
nil. It appears to fix the problems with Paperclip in my
testing.&lt;/p&gt;
&lt;p&gt;I can't figure out how to ignore the attribute altogether. Maybe
somebody else can give it a shot...?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-13T07:08:26+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-13T07:08:32+00:00</updated-at>
      <user-id type="integer">643</user-id>
      <version type="integer">12</version>
      <user-name>Trevor Turk</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Cross-posted here: 

http://groups.google.com/group/rack-devel/browse_thread/thread/9a95eef0a615ad0f</body>
      <body-html>&lt;div&gt;&lt;p&gt;Cross-posted here:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://groups.google.com/group/rack-devel/browse_thread/thread/9a95eef0a615ad0f&quot;&gt;
http://groups.google.com/group/r...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-13T07:15:19+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-13T07:15:19+00:00</updated-at>
      <user-id type="integer">643</user-id>
      <version type="integer">13</version>
      <user-name>Trevor Turk</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've submitted a slightly different patch over on the [rack lighthouse](http://rack.lighthouseapp.com/projects/22435/tickets/37-remove-files-from-params-when-no-file-selected &quot;See ticket&quot;) that removes the empty file param instead of setting it to nil/blank.

I'll post a note on the rack mailing list too...</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've submitted a slightly different patch over on the &lt;a href=&quot;http://rack.lighthouseapp.com/projects/22435/tickets/37-remove-files-from-params-when-no-file-selected&quot; title=&quot;See ticket&quot;&gt;rack lighthouse&lt;/a&gt; that removes the empty file
param instead of setting it to nil/blank.&lt;/p&gt;
&lt;p&gt;I'll post a note on the rack mailing list too...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-13T09:18:15+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-13T09:18:17+00:00</updated-at>
      <user-id type="integer">10510</user-id>
      <version type="integer">14</version>
      <user-name>Rob Anderton</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Rob, your patch works for me. Thank you!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rob, your patch works for me. Thank you!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-13T16:00:33+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-13T16:00:34+00:00</updated-at>
      <user-id type="integer">643</user-id>
      <version type="integer">15</version>
      <user-name>Trevor Turk</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-13T22:08:11+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- 
:state: wontfix
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-13T22:08:15+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">16</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [eced3d8c55c1bbae6915d7c6523c341bc682509a]) Update rack to fix multipart uploads with an empty file [#1945 state:resolved]
http://github.com/rails/rails/commit/eced3d8c55c1bbae6915d7c6523c341bc682509a</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [eced3d8c55c1bbae6915d7c6523c341bc682509a]) Update rack to
fix multipart uploads with an empty file [&lt;a href=&quot;/projects/8994/tickets/1945&quot; title=&quot;Ticket #1945&quot;&gt;#1945&lt;/a&gt;
state:resolved] &lt;a href=&quot;http://github.com/rails/rails/commit/eced3d8c55c1bbae6915d7c6523c341bc682509a&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-13T23:14:56+00:00</created-at>
      <creator-id type="integer">46781</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1945</number>
      <permalink>multipart-form-with-empty-file_field-submits-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>file_field multipart paperclip upload</tag>
      <title>Multipart form with empty file_field submits nil</title>
      <updated-at type="datetime">2009-03-13T23:14:57+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">17</version>
      <user-name>Repository</user-name>
      <creator-name>Chris Barnes</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1945</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>abb24fc7ef96175a2ebd0bcfb51375ab23f1888c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-13T07:08:27+00:00</created-at>
      <filename>multipart_form_file_field_blank_1.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">99463</id>
      <size type="integer">1318</size>
      <uploader-id type="integer">643</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/99463/multipart_form_file_field_blank_1.diff</url>
    </attachment>
  </attachments>
</ticket>
