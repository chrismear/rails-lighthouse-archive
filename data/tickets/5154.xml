<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-19T20:14:24+01:00</created-at>
  <creator-id type="integer">73981</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5154</number>
  <permalink>fixture_path-processing-assumes-a-trailing-slash-on-path</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>fixture_path processing assumes a trailing slash ('/') on path</title>
  <updated-at type="datetime">2011-04-14T01:00:49+01:00</updated-at>
  <user-id type="integer">136779</user-id>
  <version type="integer">5</version>
  <user-name>rails</user-name>
  <creator-name>Mat Schaffer</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5154</url>
  <priority-name nil="true"></priority-name>
  <original-body>On MRI this isn't an issue, but on Rubinius, Dir.glob doesn't include extraneous slashes in the file path which causes the fixture -&gt; table mapping to break.

Fixture path is set on http://github.com/rails/rails/blob/master/railties/lib/rails/test_help.rb#L21 and processed on http://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L839

Gist example is at http://gist.github.com/481814

The rubyspec doesn't say anything on this point, but specifying the fixture_path with the trailing slash seems like the wrong way to go.</original-body>
  <latest-body>On MRI this isn't an issue, but on Rubinius, Dir.glob doesn't include extraneous slashes in the file path which causes the fixture -&gt; table mapping to break.

Fixture path is set on http://github.com/rails/rails/blob/master/railties/lib/rails/test_help.rb#L21 and processed on http://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L839

Gist example is at http://gist.github.com/481814

The rubyspec doesn't say anything on this point, but specifying the fixture_path with the trailing slash seems like the wrong way to go.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;On MRI this isn't an issue, but on Rubinius, Dir.glob doesn't
include extraneous slashes in the file path which causes the
fixture -&amp;gt; table mapping to break.&lt;/p&gt;
&lt;p&gt;Fixture path is set on &lt;a href=
&quot;http://github.com/rails/rails/blob/master/railties/lib/rails/test_help.rb#L21&quot;&gt;
http://github.com/rails/rails/blob/master/railties/lib/rails/test_h...&lt;/a&gt;
and processed on &lt;a href=
&quot;http://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L839&quot;&gt;
http://github.com/rails/rails/blob/master/activerecord/lib/active_r...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Gist example is at &lt;a href=
&quot;http://gist.github.com/481814&quot;&gt;http://gist.github.com/481814&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The rubyspec doesn't say anything on this point, but specifying
the fixture_path with the trailing slash seems like the wrong way
to go.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>On MRI this isn't an issue, but on Rubinius, Dir.glob doesn't include extraneous slashes in the file path which causes the fixture -&gt; table mapping to break.

Fixture path is set on http://github.com/rails/rails/blob/master/railties/lib/rails/test_help.rb#L21 and processed on http://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L839

Gist example is at http://gist.github.com/481814

The rubyspec doesn't say anything on this point, but specifying the fixture_path with the trailing slash seems like the wrong way to go.</body>
      <body-html>&lt;div&gt;&lt;p&gt;On MRI this isn't an issue, but on Rubinius, Dir.glob doesn't
include extraneous slashes in the file path which causes the
fixture -&amp;gt; table mapping to break.&lt;/p&gt;
&lt;p&gt;Fixture path is set on &lt;a href=
&quot;http://github.com/rails/rails/blob/master/railties/lib/rails/test_help.rb#L21&quot;&gt;
http://github.com/rails/rails/blob/master/railties/lib/rails/test_h...&lt;/a&gt;
and processed on &lt;a href=
&quot;http://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L839&quot;&gt;
http://github.com/rails/rails/blob/master/activerecord/lib/active_r...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Gist example is at &lt;a href=
&quot;http://gist.github.com/481814&quot;&gt;http://gist.github.com/481814&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The rubyspec doesn't say anything on this point, but specifying
the fixture_path with the trailing slash seems like the wrong way
to go.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-19T20:14:24+01:00</created-at>
      <creator-id type="integer">73981</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5154</number>
      <permalink>fixture_path-processing-assumes-a-trailing-slash-on-path</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>fixture_path processing assumes a trailing slash ('/') on path</title>
      <updated-at type="datetime">2010-07-19T20:14:26+01:00</updated-at>
      <user-id type="integer">73981</user-id>
      <version type="integer">1</version>
      <user-name>Mat Schaffer</user-name>
      <creator-name>Mat Schaffer</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5154</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This is still an issue with current Rails and Rubinius HEAD versions.

I've spoken with Evan from Rubinius and he will fix that behavior of Dir. It already behaves like MRI in almost all situations, but there still is a problem with // followed by two stars (see gist).

To fix this for current and old Rubinius versions (and to make that code a bit cleaner) I would suggest a tiny change in ARs implementation (see gist or diff [dont know if a 2 line change needs, but I included it])

Gist: https://gist.github.com/778369

Another confirmation of this problem in AR (bit dated): http://forums.pragprog.com/forums/148/topics/7134</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is still an issue with current Rails and Rubinius HEAD
versions.&lt;/p&gt;
&lt;p&gt;I've spoken with Evan from Rubinius and he will fix that
behavior of Dir. It already behaves like MRI in almost all
situations, but there still is a problem with // followed by two
stars (see gist).&lt;/p&gt;
&lt;p&gt;To fix this for current and old Rubinius versions (and to make
that code a bit cleaner) I would suggest a tiny change in ARs
implementation (see gist or diff [dont know if a 2 line change
needs, but I included it])&lt;/p&gt;
&lt;p&gt;Gist: &lt;a href=
&quot;https://gist.github.com/778369&quot;&gt;https://gist.github.com/778369&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Another confirmation of this problem in AR (bit dated): &lt;a href=
&quot;http://forums.pragprog.com/forums/148/topics/7134&quot;&gt;http://forums.pragprog.com/forums/148/topics/7134&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-13T18:52:10+00:00</created-at>
      <creator-id type="integer">73981</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5154</number>
      <permalink>fixture_path-processing-assumes-a-trailing-slash-on-path</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>fixture_path processing assumes a trailing slash ('/') on path</title>
      <updated-at type="datetime">2011-01-13T18:52:13+00:00</updated-at>
      <user-id type="integer">122317</user-id>
      <version type="integer">2</version>
      <user-name>kaipr</user-name>
      <creator-name>Mat Schaffer</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5154</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Have to say my first suggestion needs a trailing slash on fixture_path (which may be the reason for the original implementation), I've added an regex version which feels kinda clumsy too but should work.

Maybe someone has a better solution, i'll give it another try tomorrow.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Have to say my first suggestion needs a trailing slash on
fixture_path (which may be the reason for the original
implementation), I've added an regex version which feels kinda
clumsy too but should work.&lt;/p&gt;
&lt;p&gt;Maybe someone has a better solution, i'll give it another try
tomorrow.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-13T19:29:41+00:00</created-at>
      <creator-id type="integer">73981</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5154</number>
      <permalink>fixture_path-processing-assumes-a-trailing-slash-on-path</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>fixture_path processing assumes a trailing slash ('/') on path</title>
      <updated-at type="datetime">2011-01-13T19:30:01+00:00</updated-at>
      <user-id type="integer">122317</user-id>
      <version type="integer">3</version>
      <user-name>kaipr</user-name>
      <creator-name>Mat Schaffer</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5154</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-04-14T01:00:17+01:00</created-at>
      <creator-id type="integer">73981</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5154</number>
      <permalink>fixture_path-processing-assumes-a-trailing-slash-on-path</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>fixture_path processing assumes a trailing slash ('/') on path</title>
      <updated-at type="datetime">2011-04-14T01:00:49+01:00</updated-at>
      <user-id type="integer">136779</user-id>
      <version type="integer">4</version>
      <user-name>rails</user-name>
      <creator-name>Mat Schaffer</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5154</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-04-14T01:00:17+01:00</created-at>
      <creator-id type="integer">73981</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5154</number>
      <permalink>fixture_path-processing-assumes-a-trailing-slash-on-path</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>fixture_path processing assumes a trailing slash ('/') on path</title>
      <updated-at type="datetime">2011-04-14T01:00:22+01:00</updated-at>
      <user-id type="integer">136779</user-id>
      <version type="integer">5</version>
      <user-name>rails</user-name>
      <creator-name>Mat Schaffer</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5154</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
