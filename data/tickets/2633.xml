<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">4</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-05-11T16:17:30+01:00</created-at>
  <creator-id type="integer">15346</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2633</number>
  <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
  <priority type="integer">1763</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
  <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
  <updated-at type="datetime">2009-05-18T23:02:59+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">19</version>
  <user-name>Repository</user-name>
  <creator-name>Ken Collins</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Fixtures.identify is no longer working on 1.9 since it returns a different integer each time it's run. This is a change in ruby core that brought this about and I see no clear solution. Example code.

@@@ ruby


# Ruby 1.8.x

$ irb1.8
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 541702176
irb(main):002:0&gt; exit

$ irb1.8
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 541702176


# Ruby 1.9.x

$ irb1.9
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 382338625
irb(main):002:0&gt; exit

$ irb1.9
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 542676158


# Proposed usage of String#sum

$ irb1.9
irb(main):001:0&gt; 'admin'.sum        # =&gt; 521

@@@


I have attached a patch, but it has no tests because I can not think of a good way to cleanly call another process. I'd like input on a test method to add and even if using String#sum might be the right way to go.</original-body>
  <latest-body>Fixtures.identify is no longer working on 1.9 since it returns a different integer each time it's run. This is a change in ruby core that brought this about and I see no clear solution. Example code.

@@@ ruby


# Ruby 1.8.x

$ irb1.8
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 541702176
irb(main):002:0&gt; exit

$ irb1.8
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 541702176


# Ruby 1.9.x

$ irb1.9
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 382338625
irb(main):002:0&gt; exit

$ irb1.9
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 542676158


# Proposed usage of String#sum

$ irb1.9
irb(main):001:0&gt; 'admin'.sum        # =&gt; 521

@@@


I have attached a patch, but it has no tests because I can not think of a good way to cleanly call another process. I'd like input on a test method to add and even if using String#sum might be the right way to go.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Fixtures.identify is no longer working on 1.9 since it returns a
different integer each time it's run. This is a change in ruby core
that brought this about and I see no clear solution. Example
code.&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;


# Ruby 1.8.x

$ irb1.8
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 541702176
irb(main):002:0&amp;gt; exit

$ irb1.8
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 541702176


# Ruby 1.9.x

$ irb1.9
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 382338625
irb(main):002:0&amp;gt; exit

$ irb1.9
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 542676158


# Proposed usage of String#sum

$ irb1.9
irb(main):001:0&amp;gt; 'admin'.sum        # =&amp;gt; 521

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I have attached a patch, but it has no tests because I can not
think of a good way to cleanly call another process. I'd like input
on a test method to add and even if using String#sum might be the
right way to go.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Fixtures.identify is no longer working on 1.9 since it returns a different integer each time it's run. This is a change in ruby core that brought this about and I see no clear solution. Example code.

@@@ ruby


# Ruby 1.8.x

$ irb1.8
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 541702176
irb(main):002:0&gt; exit

$ irb1.8
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 541702176


# Ruby 1.9.x

$ irb1.9
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 382338625
irb(main):002:0&gt; exit

$ irb1.9
irb(main):001:0&gt; 'admin'.hash.abs   # =&gt; 542676158


# Proposed usage of String#sum

$ irb1.9
irb(main):001:0&gt; 'admin'.sum        # =&gt; 521

@@@


I have attached a patch, but it has no tests because I can not think of a good way to cleanly call another process. I'd like input on a test method to add and even if using String#sum might be the right way to go.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Fixtures.identify is no longer working on 1.9 since it returns a
different integer each time it's run. This is a change in ruby core
that brought this about and I see no clear solution. Example
code.&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;


# Ruby 1.8.x

$ irb1.8
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 541702176
irb(main):002:0&amp;gt; exit

$ irb1.8
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 541702176


# Ruby 1.9.x

$ irb1.9
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 382338625
irb(main):002:0&amp;gt; exit

$ irb1.9
irb(main):001:0&amp;gt; 'admin'.hash.abs   # =&amp;gt; 542676158


# Proposed usage of String#sum

$ irb1.9
irb(main):001:0&amp;gt; 'admin'.sum        # =&amp;gt; 521

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I have attached a patch, but it has no tests because I can not
think of a good way to cleanly call another process. I'd like input
on a test method to add and even if using String#sum might be the
right way to go.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T16:17:30+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T16:17:34+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">1</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>You're going to get a lot of collisions like that eg

'foo'.sum == 'oof'.sum

If we truly need fixture identifiers that persist across runs, i think that taking the top few bytes from a cryptographic hash (or just reimplement the old hash algorithm from ruby 1.8) would be preferable.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You're going to get a lot of collisions like that eg&lt;/p&gt;
&lt;p&gt;'foo'.sum == 'oof'.sum&lt;/p&gt;
&lt;p&gt;If we truly need fixture identifiers that persist across runs, i
think that taking the top few bytes from a cryptographic hash (or
just reimplement the old hash algorithm from ruby 1.8) would be
preferable.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T16:25:16+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T16:25:18+01:00</updated-at>
      <user-id type="integer">17477</user-id>
      <version type="integer">2</version>
      <user-name>Frederick Cheung</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'd love to see a re-implementation of pre 1.9 String#hash, I'm looking at the bits of C code I pulled from source here.

http://pastie.org/474531

I'm new to C, but I'm playing with converting this to ruby now.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'd love to see a re-implementation of pre 1.9 String#hash, I'm
looking at the bits of C code I pulled from source here.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://pastie.org/474531&quot;&gt;http://pastie.org/474531&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I'm new to C, but I'm playing with converting this to ruby
now.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T16:48:57+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T16:49:00+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">3</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm not having a good time hitting the target. Any help?

http://pastie.org/474614</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm not having a good time hitting the target. Any help?&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://pastie.org/474614&quot;&gt;http://pastie.org/474614&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T18:15:32+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T18:15:37+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">4</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Part of the problem is that the integer overflows, and according to the c standard an overflowing signed integer has undefined behaviour, so this may be harder than I initially thought</body>
      <body-html>&lt;div&gt;&lt;p&gt;Part of the problem is that the integer overflows, and according
to the c standard an overflowing signed integer has undefined
behaviour, so this may be harder than I initially thought&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T18:34:06+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T18:34:09+01:00</updated-at>
      <user-id type="integer">17477</user-id>
      <version type="integer">5</version>
      <user-name>Frederick Cheung</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Perhaps better to just switch to a consistent hash or crc value now.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Perhaps better to just switch to a consistent hash or crc value
now.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T21:52:21+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T21:52:24+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">6</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm assuming no-one actually cares what the actual value of Fixture.identify('foo') is, as long as it doesn't change across test runs - I don't think changing this would screw people over. (I'm not even sure why Fixture.identify changing between test runs is a problem - it's only needed to load the fixtures)</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm assuming no-one actually cares what the actual value of
Fixture.identify('foo') is, as long as it doesn't change across
test runs - I don't think changing this would screw people over.
(I'm not even sure why Fixture.identify changing between test runs
is a problem - it's only needed to load the fixtures)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T22:46:20+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T22:46:22+01:00</updated-at>
      <user-id type="integer">17477</user-id>
      <version type="integer">7</version>
      <user-name>Frederick Cheung</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@Jeremy Could you give me an example of a crc value? I'm having a hard time thinking of how to get a consistent fixnum representation from a string.

@Frederick Your right, I could care less if this id returned is the same as ruby 1.8. My code is abstract so that I never got bit by this. But I do need consistent values for quite a few reasons.

Again, any implementation help would be appreciated. I might take a stab at this again tomorrow using the bytes somehow.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Jeremy Could you give me an example of a crc value? I'm having
a hard time thinking of how to get a consistent fixnum
representation from a string.&lt;/p&gt;
&lt;p&gt;@Frederick Your right, I could care less if this id returned is
the same as ruby 1.8. My code is abstract so that I never got bit
by this. But I do need consistent values for quite a few
reasons.&lt;/p&gt;
&lt;p&gt;Again, any implementation help would be appreciated. I might
take a stab at this again tomorrow using the bytes somehow.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T23:08:47+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T23:08:52+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">8</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>require 'zlib'
Zlib.crc32 &quot;foo&quot; # =&gt; 2356372769</body>
      <body-html>&lt;div&gt;&lt;p&gt;require 'zlib' Zlib.crc32 &quot;foo&quot; # =&amp;gt; 2356372769&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T23:12:46+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-11T23:12:47+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">9</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK, here is v2 of the patch. I'm using Zlib like Jeremy suggested. The only problem I ran into is that the default crc32 method could generate a bignum that is out of bounds for my primary keys. So I had to take it down a few notches. I guess it's theoretically possible that some keys could duplicate, but I doubt it would be a problem. Thoughts if any?

I added a few tests that possibly help standardize this internal implementation. All tests pass under 1.9 and 1.8.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK, here is v2 of the patch. I'm using Zlib like Jeremy
suggested. The only problem I ran into is that the default crc32
method could generate a bignum that is out of bounds for my primary
keys. So I had to take it down a few notches. I guess it's
theoretically possible that some keys could duplicate, but I doubt
it would be a problem. Thoughts if any?&lt;/p&gt;
&lt;p&gt;I added a few tests that possibly help standardize this internal
implementation. All tests pass under 1.9 and 1.8.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T00:28:48+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-12T00:28:50+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">10</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I'd hold off on this one too... I'm having issue under the SQL Server adapter since the values might be too big there too.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'd hold off on this one too... I'm having issue under the SQL
Server adapter since the values might be too big there too.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T01:41:03+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-12T01:41:04+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">11</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>OK, this one passes all the DB tests, most importantly PostgreSQL.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK, this one passes all the DB tests, most importantly
PostgreSQL.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T03:38:39+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-12T03:38:41+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">12</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>How about:
&lt;pre&gt;
MAX_ID = 2 ** 31 - 1
def self.identify(label)
  Zlib.crc32(label.to_s) % MAX_ID
end
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;How about:&lt;/p&gt;
&lt;pre&gt;
MAX_ID = 2 ** 31 - 1
def self.identify(label)
  Zlib.crc32(label.to_s) % MAX_ID
end
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T04:01:32+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-12T04:01:48+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">13</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Much cleaner! Passes all tests still on all DBs.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Much cleaner! Passes all tests still on all DBs.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T04:23:17+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-12T04:23:21+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">14</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>You will occasionally get duplicate values but that happened with the old hash too and is inevitable (pigeon hole principal etc.)</body>
      <body-html>&lt;div&gt;&lt;p&gt;You will occasionally get duplicate values but that happened
with the old hash too and is inevitable (pigeon hole principal
etc.)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T09:00:10+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-12T09:00:16+01:00</updated-at>
      <user-id type="integer">17477</user-id>
      <version type="integer">15</version>
      <user-name>Frederick Cheung</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>+1 - the ID generated from a fixture's name should remain consistent across runs, IMO.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 - the ID generated from a fixture's name should remain
consistent across runs, IMO.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-18T18:28:13+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-18T18:28:17+01:00</updated-at>
      <user-id type="integer">16155</user-id>
      <version type="integer">16</version>
      <user-name>Brennan Dunn</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>I'd consider this ready-to-go. Jeremy can you get it in?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'd consider this ready-to-go. Jeremy can you get it in?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-18T18:30:01+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-18T18:30:03+01:00</updated-at>
      <user-id type="integer">15346</user-id>
      <version type="integer">17</version>
      <user-name>Ken Collins</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>(from [50608ecccdda7c3709c61484653f9ebb17068fcf]) Reimplement Fixtures.identify so that it consistently generates identities across ruby versions.

[#2633 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/50608ecccdda7c3709c61484653f9ebb17068fcf</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/50608ecccdda7c3709c61484653f9ebb17068fcf&quot;
title=
&quot;Changeset [50608ecccdda7c3709c61484653f9ebb17068fcf]&quot;&gt;[50608ecccdda7c3709c61484653f9ebb17068fcf]&lt;/a&gt;)
Reimplement Fixtures.identify so that it consistently generates
identities across ruby versions.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2633&quot; title=
&quot;Ticket #2633&quot;&gt;#2633&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=
&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/50608ecccdda7c3709c61484653f9ebb17068fcf&quot;&gt;
http://github.com/rails/rails/commit/50608ecccdda7c3709c61484653f9e...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-05-18T23:01:57+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-18T23:01:59+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">18</version>
      <user-name>Repository</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>(from [87adecfef59577be17a9731245cb201ecb1b477f]) Reimplement Fixtures.identify so that it consistently generates identities across ruby versions.

[#2633 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/87adecfef59577be17a9731245cb201ecb1b477f</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/87adecfef59577be17a9731245cb201ecb1b477f&quot;
title=
&quot;Changeset [87adecfef59577be17a9731245cb201ecb1b477f]&quot;&gt;[87adecfef59577be17a9731245cb201ecb1b477f]&lt;/a&gt;)
Reimplement Fixtures.identify so that it consistently generates
identities across ruby versions.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2633&quot; title=
&quot;Ticket #2633&quot;&gt;#2633&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/87adecfef59577be17a9731245cb201ecb1b477f&quot;&gt;
http://github.com/rails/rails/commit/87adecfef59577be17a9731245cb20...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-05-18T23:02:58+01:00</created-at>
      <creator-id type="integer">15346</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2633</number>
      <permalink>consistent-integer-values-using-fixturesidentify-in-ruby19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable fixtures identify ruby1.9 ruby19</tag>
      <title>Consistent Integer Values Using Fixtures.identify In Ruby1.9</title>
      <updated-at type="datetime">2009-05-18T23:02:59+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">19</version>
      <user-name>Repository</user-name>
      <creator-name>Ken Collins</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2633</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>e44d188499448322d389297dbdeded0800c52ed7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-11T16:17:30+01:00</created-at>
      <filename>fixtures_identify_1.9.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">121042</id>
      <size type="integer">997</size>
      <uploader-id type="integer">15346</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/121042/fixtures_identify_1.9.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>7e93099bda1953d1e2720f9e400745a1eca61773</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-12T00:28:48+01:00</created-at>
      <filename>fixtures_identify_1.9v2.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">121306</id>
      <size type="integer">1872</size>
      <uploader-id type="integer">15346</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/121306/fixtures_identify_1.9v2.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>2cb009ad802c909667b463f7c3ee5c0ef5f20b29</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-12T03:38:39+01:00</created-at>
      <filename>fixtures_identify_1.9v3.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">121349</id>
      <size type="integer">1892</size>
      <uploader-id type="integer">15346</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/121349/fixtures_identify_1.9v3.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>fb2bb4311e35007c7a3ff16dc48c8b3488626b51</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-12T04:23:17+01:00</created-at>
      <filename>fixtures_identify_1.9v4.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">121356</id>
      <size type="integer">2036</size>
      <uploader-id type="integer">15346</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/121356/fixtures_identify_1.9v4.diff</url>
    </attachment>
  </attachments>
</ticket>
