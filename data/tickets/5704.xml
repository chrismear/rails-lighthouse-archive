<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-09-26T00:32:51+01:00</created-at>
  <creator-id type="integer">34964</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">82855</milestone-id>
  <number type="integer">5704</number>
  <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>23x belongs_to patch touch</tag>
  <title>Docs around belongs_to with :touch don't match code</title>
  <updated-at type="datetime">2011-02-02T16:47:37+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">8</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Todd Eichel</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
  <milestone-title>2.3.10</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>The documentation states:

&gt; If you specify a symbol, that attribute will be updated with the current time instead of the updated_at/on attribute.

However, the touch method actually invokes `save!` which will update updated_at no matter what. I checked the Rails 3 docs and they've been updated to reflect this. The attached patch fixes it for 2-3-stable, and I included a test case to document the behavior.

Note: the patch file is 7.8MB? I followed the instructions in the contributor guide to generate it. This is what it's supposed to be: http://github.com/tfe/rails/commit/1dad1b6c6de53910c110d79800bd2c6ebc7f2c10.</original-body>
  <latest-body>The documentation states:

&gt; If you specify a symbol, that attribute will be updated with the current time instead of the updated_at/on attribute.

However, the touch method actually invokes `save!` which will update updated_at no matter what. I checked the Rails 3 docs and they've been updated to reflect this. The attached patch fixes it for 2-3-stable, and I included a test case to document the behavior.

Note: the patch file is 7.8MB? I followed the instructions in the contributor guide to generate it. This is what it's supposed to be: http://github.com/tfe/rails/commit/1dad1b6c6de53910c110d79800bd2c6ebc7f2c10.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The documentation states:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you specify a symbol, that attribute will be updated with the
current time instead of the updated_at/on attribute.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;However, the touch method actually invokes &lt;code&gt;save!&lt;/code&gt;
which will update updated_at no matter what. I checked the Rails 3
docs and they've been updated to reflect this. The attached patch
fixes it for 2-3-stable, and I included a test case to document the
behavior.&lt;/p&gt;
&lt;p&gt;Note: the patch file is 7.8MB? I followed the instructions in
the contributor guide to generate it. This is what it's supposed to
be: &lt;a href=
&quot;http://github.com/tfe/rails/commit/1dad1b6c6de53910c110d79800bd2c6ebc7f2c10&quot;&gt;
http://github.com/tfe/rails/commit/1dad1b6c6de53910c110d79800bd2c6e...&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The documentation states:

&gt; If you specify a symbol, that attribute will be updated with the current time instead of the updated_at/on attribute.

However, the touch method actually invokes `save!` which will update updated_at no matter what. I checked the Rails 3 docs and they've been updated to reflect this. The attached patch fixes it for 2-3-stable, and I included a test case to document the behavior.

Note: the patch file is 7.8MB? I followed the instructions in the contributor guide to generate it. This is what it's supposed to be: http://github.com/tfe/rails/commit/1dad1b6c6de53910c110d79800bd2c6ebc7f2c10.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The documentation states:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you specify a symbol, that attribute will be updated with the
current time instead of the updated_at/on attribute.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;However, the touch method actually invokes &lt;code&gt;save!&lt;/code&gt;
which will update updated_at no matter what. I checked the Rails 3
docs and they've been updated to reflect this. The attached patch
fixes it for 2-3-stable, and I included a test case to document the
behavior.&lt;/p&gt;
&lt;p&gt;Note: the patch file is 7.8MB? I followed the instructions in
the contributor guide to generate it. This is what it's supposed to
be: &lt;a href=
&quot;http://github.com/tfe/rails/commit/1dad1b6c6de53910c110d79800bd2c6ebc7f2c10&quot;&gt;
http://github.com/tfe/rails/commit/1dad1b6c6de53910c110d79800bd2c6e...&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-26T00:32:51+01:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.x belongs_to touch</tag>
      <title>Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2010-09-26T00:32:53+01:00</updated-at>
      <user-id type="integer">34964</user-id>
      <version type="integer">1</version>
      <user-name>Todd Eichel</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-26T00:35:48+01:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Docs around belongs_to with :touch don't match code
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.x belongs_to touch</tag>
      <title>[PATCH] Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2010-09-26T00:35:51+01:00</updated-at>
      <user-id type="integer">34964</user-id>
      <version type="integer">2</version>
      <user-name>Todd Eichel</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I think you did &lt;code&gt;git rebase master&lt;/code&gt; instead of &lt;code&gt;git rebase origin/2-3-stable&lt;/code&gt;. Can you please re-attach the patch or maybe make a pull request &amp;mdash; and link to this ticket from there?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think you did &lt;code&gt;git rebase master&lt;/code&gt; instead of
&lt;code&gt;git rebase origin/2-3-stable&lt;/code&gt;. Can you please re-attach
the patch or maybe make a pull request &amp;mdash; and link to this
ticket from there?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-26T03:07:43+01:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.x belongs_to touch</tag>
      <title>[PATCH] Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2010-09-26T03:07:46+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">3</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Here we go... I think the guide incorrectly says to format-patch against master, when it should be against whatever branch you're patching.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here we go... I think the guide incorrectly says to format-patch
against master, when it should be against whatever branch you're
patching.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-26T03:14:42+01:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.x belongs_to touch</tag>
      <title>[PATCH] Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2010-09-26T03:14:44+01:00</updated-at>
      <user-id type="integer">34964</user-id>
      <version type="integer">4</version>
      <user-name>Todd Eichel</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-26T03:18:05+01:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.x belongs_to touch</tag>
      <title>[PATCH] Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2010-09-26T03:18:07+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">5</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Using the &quot;patch&quot; tag instead of prefixing the ticket title with &quot;[PATCH]&quot; to make sure patched tickets end up in the [open patches bin](https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/bins/5805). :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Using the &quot;patch&quot; tag instead of prefixing the ticket title with
&quot;[PATCH]&quot; to make sure patched tickets end up in the &lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/bins/5805&quot;&gt;
open patches bin&lt;/a&gt;. :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-10T20:10:57+01:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.x belongs_to touch
:title: &quot;[PATCH] Docs around belongs_to with :touch don't match code&quot;
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.x belongs_to patch touch</tag>
      <title>Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2010-10-10T20:10:58+01:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">6</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:30:48+00:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.x belongs_to patch touch
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>23x belongs_to patch touch</tag>
      <title>Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2011-02-02T16:46:33+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">7</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:30:49+00:00</created-at>
      <creator-id type="integer">34964</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">5704</number>
      <permalink>docs-around-belongs_to-with-touch-dont-match-code</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>23x belongs_to patch touch</tag>
      <title>Docs around belongs_to with :touch don't match code</title>
      <updated-at type="datetime">2011-02-02T16:47:37+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">8</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Todd Eichel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5704</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>305caa24c5f81f5f88f041827320fa031f1ee543</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-09-26T00:32:52+01:00</created-at>
      <filename>belongs_to_touch_patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">691032</id>
      <size type="integer">7830145</size>
      <uploader-id type="integer">34964</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/691032/belongs_to_touch_patch.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>401512cd7e33f9a5f48a64475bf0640dac6ae7d6</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-09-26T03:14:43+01:00</created-at>
      <filename>belongs_to_touch_patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">691083</id>
      <size type="integer">2294</size>
      <uploader-id type="integer">34964</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/691083/belongs_to_touch_patch.diff</url>
    </attachment>
  </attachments>
</ticket>
