<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-01-07T11:26:54+00:00</created-at>
  <creator-id type="integer">131613</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6260</number>
  <permalink>custom-response-headers</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag nil="true"></tag>
  <title>Custom response headers</title>
  <updated-at type="datetime">2011-01-08T23:57:42+00:00</updated-at>
  <user-id type="integer">40263</user-id>
  <version type="integer">6</version>
  <user-name>Neeraj Singh</user-name>
  <creator-name>Xornor</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6260</url>
  <priority-name>Low</priority-name>
  <original-body>Setting custom response headers in controller does not work in 3.0.3. For example,

response.headers[&quot;Headertitle&quot;]=&quot;Headercontent&quot;

gives back standard headers in if you check them from received HTTP response message.</original-body>
  <latest-body>Setting custom response headers in controller does not work in 3.0.3. For example,

response.headers[&quot;Headertitle&quot;]=&quot;Headercontent&quot;

gives back standard headers in if you check them from received HTTP response message.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Setting custom response headers in controller does not work in
3.0.3. For example,&lt;/p&gt;
&lt;p&gt;response.headers[&quot;Headertitle&quot;]=&quot;Headercontent&quot;&lt;/p&gt;
&lt;p&gt;gives back standard headers in if you check them from received
HTTP response message.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Setting custom response headers in controller does not work in 3.0.3. For example,

response.headers[&quot;Headertitle&quot;]=&quot;Headercontent&quot;

gives back standard headers in if you check them from received HTTP response message.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Setting custom response headers in controller does not work in
3.0.3. For example,&lt;/p&gt;
&lt;p&gt;response.headers[&quot;Headertitle&quot;]=&quot;Headercontent&quot;&lt;/p&gt;
&lt;p&gt;gives back standard headers in if you check them from received
HTTP response message.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-07T11:26:54+00:00</created-at>
      <creator-id type="integer">131613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6260</number>
      <permalink>custom-response-headers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Custom response headers</title>
      <updated-at type="datetime">2011-01-07T11:26:56+00:00</updated-at>
      <user-id type="integer">131613</user-id>
      <version type="integer">1</version>
      <user-name>Xornor</user-name>
      <creator-name>Xornor</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6260</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This brand &lt;a href=&quot;http://www.wholesalenflstore.com/new-york-giants-jerseys-c-82.html&quot;&gt;new york giants nfl&lt;/a&gt; is not common in America. With regard to the president wear their shoes, the Onitsuka Tiger is naturally flattered. The spokesman of the Asics shoes says &#8220; Obama performed very &lt;a href=&quot;http://www.wholesalenflstore.com/jacksonville-jaguars-jerseys-c-71.html&quot;&gt;jacksonville jaguars jerseys&lt;/a&gt; well during the campaign, he has his &lt;a href=&quot;http://www.wholesalenflstore.com/miami-dolphins-jerseys-c-66.html&quot;&gt;miami dolphins jerseys&lt;/a&gt; own political &lt;a href=&quot;http://www.wholesalenflstore.com/kansas-city-chiefs-jerseys-c-74.html&quot;&gt;kc chiefs jerseys&lt;/a&gt; principles and charm. The selection of the footwear is also different and excellent.&#8221; This action &lt;a href=&quot;http://www.wholesalenflstore.com/denver-broncos-jerseys-c-73.html&quot;&gt;denver broncos jerseys&lt;/a&gt; increases the &lt;a href=&quot;http://www.wholesalenflstore.com/new-york-jets-jerseys-c-68.html&quot;&gt;new york jets jerseys&lt;/a&gt; reputation of &lt;a href=&quot;http://www.wholesalenflstore.com/indianapolis-colts-jerseys-c-70.html&quot;&gt;indy colts jerseys&lt;/a&gt; the Asics in the America &lt;a href=&quot;http://www.wholesalenflstore.com/nfl-caps-c-104.html&quot;&gt;wholesale nfl caps&lt;/a&gt; and makes more people notice &lt;a href=&quot;http://www.wholesalenflstore.com/minnesota-vikings-jerseys-c-96.html&quot;&gt;minnesota vikings jerseys&lt;/a&gt; &lt;a href=&quot;http://www.wholesalenflstore.com/houston-texans-jerseys-c-69.html&quot;&gt;houston texans jerseys&lt;/a&gt; about. &lt;a href=&quot;http://www.wholesalenflstore.com/tennessee-titans-jerseys-c-72.html&quot;&gt;tennessee titans jerseys&lt;/a&gt; Certainly this brand is perfect enough and has its own &lt;a href=&quot;http://www.wholesalenflstore.com/san-francisco-49ers-jerseys-c-90.html&quot;&gt;san francisco 49ers jerseys&lt;/a&gt; personality that makes the president choose it. Just &lt;a href=&quot;http://www.wholesalenflstore.com/jacksonville-jaguars-jerseys-c-71.html&quot;&gt;nfl jaguars jerseys&lt;/a&gt; like the Asics Onitsuka Tiger Mexico 66 &lt;a href=&quot;http://www.wholesalenflstore.com/oakland-raiders-jerseys-c-107.html&quot;&gt;oakland raiders jerseys&lt;/a&gt; is loved by Bruce Lee.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This brand &lt;a href=
&quot;http://www.wholesalenflstore.com/new-york-giants-jerseys-c-82.html&quot;&gt;
new york giants nfl&lt;/a&gt; is not common in America. With regard to
the president wear their shoes, the Onitsuka Tiger is naturally
flattered. The spokesman of the Asics shoes says &amp;#8220; Obama
performed very &lt;a href=
&quot;http://www.wholesalenflstore.com/jacksonville-jaguars-jerseys-c-71.html&quot;&gt;
jacksonville jaguars jerseys&lt;/a&gt; well during the campaign, he has
his &lt;a href=
&quot;http://www.wholesalenflstore.com/miami-dolphins-jerseys-c-66.html&quot;&gt;
miami dolphins jerseys&lt;/a&gt; own political &lt;a href=
&quot;http://www.wholesalenflstore.com/kansas-city-chiefs-jerseys-c-74.html&quot;&gt;
kc chiefs jerseys&lt;/a&gt; principles and charm. The selection of the
footwear is also different and excellent.&amp;#8221; This action
&lt;a href=
&quot;http://www.wholesalenflstore.com/denver-broncos-jerseys-c-73.html&quot;&gt;
denver broncos jerseys&lt;/a&gt; increases the &lt;a href=
&quot;http://www.wholesalenflstore.com/new-york-jets-jerseys-c-68.html&quot;&gt;new
york jets jerseys&lt;/a&gt; reputation of &lt;a href=
&quot;http://www.wholesalenflstore.com/indianapolis-colts-jerseys-c-70.html&quot;&gt;
indy colts jerseys&lt;/a&gt; the Asics in the America &lt;a href=
&quot;http://www.wholesalenflstore.com/nfl-caps-c-104.html&quot;&gt;wholesale
nfl caps&lt;/a&gt; and makes more people notice &lt;a href=
&quot;http://www.wholesalenflstore.com/minnesota-vikings-jerseys-c-96.html&quot;&gt;
minnesota vikings jerseys&lt;/a&gt; &lt;a href=
&quot;http://www.wholesalenflstore.com/houston-texans-jerseys-c-69.html&quot;&gt;
houston texans jerseys&lt;/a&gt; about. &lt;a href=
&quot;http://www.wholesalenflstore.com/tennessee-titans-jerseys-c-72.html&quot;&gt;
tennessee titans jerseys&lt;/a&gt; Certainly this brand is perfect enough
and has its own &lt;a href=
&quot;http://www.wholesalenflstore.com/san-francisco-49ers-jerseys-c-90.html&quot;&gt;
san francisco 49ers jerseys&lt;/a&gt; personality that makes the
president choose it. Just &lt;a href=
&quot;http://www.wholesalenflstore.com/jacksonville-jaguars-jerseys-c-71.html&quot;&gt;
nfl jaguars jerseys&lt;/a&gt; like the Asics Onitsuka Tiger Mexico 66
&lt;a href=
&quot;http://www.wholesalenflstore.com/oakland-raiders-jerseys-c-107.html&quot;&gt;
oakland raiders jerseys&lt;/a&gt; is loved by Bruce Lee.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-08T02:17:59+00:00</created-at>
      <creator-id type="integer">131613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6260</number>
      <permalink>custom-response-headers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Custom response headers</title>
      <updated-at type="datetime">2011-01-08T23:56:42+00:00</updated-at>
      <user-id type="integer">131700</user-id>
      <version type="integer">2</version>
      <user-name>xxchenjialong</user-name>
      <creator-name>Xornor</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6260</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This works for me in a fresh rails 3.0.3 app:

**Controller**

    class PeopleController &lt; ApplicationController
      def index
        response.headers[&quot;Headertitle&quot;]=&quot;Headercontent&quot;
        render :text =&gt; Rails.version
      end
    end


**Demo**
    curl -i http://localhost:3001/people
  
    HTTP/1.1 200 OK 
    X-Ua-Compatible: IE=Edge
    Etag: &quot;895661fb4afa992a391c33b5534d0f9f&quot;
    Connection: Keep-Alive
    Content-Type: text/html; charset=utf-8
    Headertitle: Headercontent
    Date: Sat, 08 Jan 2011 17:18:23 GMT
    Server: WEBrick/1.3.1 (Ruby/1.8.7/2010-01-10)
    X-Runtime: 0.040454
    Content-Length: 5
    Cache-Control: max-age=0, private, must-revalidate

    3.0.3%</body>
      <body-html>&lt;div&gt;&lt;p&gt;This works for me in a fresh rails 3.0.3 app:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Controller&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class PeopleController &amp;lt; ApplicationController
  def index
    response.headers[&quot;Headertitle&quot;]=&quot;Headercontent&quot;
    render :text =&amp;gt; Rails.version
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Demo&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;curl -i http://localhost:3001/people

HTTP/1.1 200 OK 
X-Ua-Compatible: IE=Edge
Etag: &quot;895661fb4afa992a391c33b5534d0f9f&quot;
Connection: Keep-Alive
Content-Type: text/html; charset=utf-8
Headertitle: Headercontent
Date: Sat, 08 Jan 2011 17:18:23 GMT
Server: WEBrick/1.3.1 (Ruby/1.8.7/2010-01-10)
X-Runtime: 0.040454
Content-Length: 5
Cache-Control: max-age=0, private, must-revalidate

3.0.3%&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-08T17:22:54+00:00</created-at>
      <creator-id type="integer">131613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6260</number>
      <permalink>custom-response-headers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Custom response headers</title>
      <updated-at type="datetime">2011-01-08T17:22:58+00:00</updated-at>
      <user-id type="integer">37349</user-id>
      <version type="integer">3</version>
      <user-name>Matt Fawcett</user-name>
      <creator-name>Xornor</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6260</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm also using rails 3.0.3 and it worked fine for me as well.

Controller
----------

    class AppController &lt; ApplicationController
      def example
        response.headers[&quot;Headertitle&quot;]=&quot;Custom Header Content&quot;
        render :text =&gt; &quot;Hello, world.&quot;
      end
    end

Viewed in Chrome
----------------

    Headertitle:Custom Header Content</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm also using rails 3.0.3 and it worked fine for me as
well.&lt;/p&gt;
&lt;h2&gt;Controller&lt;/h2&gt;
&lt;pre&gt;
&lt;code&gt;class AppController &amp;lt; ApplicationController
  def example
    response.headers[&quot;Headertitle&quot;]=&quot;Custom Header Content&quot;
    render :text =&amp;gt; &quot;Hello, world.&quot;
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h2&gt;Viewed in Chrome&lt;/h2&gt;
&lt;pre&gt;
&lt;code&gt;Headertitle:Custom Header Content&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-08T20:16:09+00:00</created-at>
      <creator-id type="integer">131613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6260</number>
      <permalink>custom-response-headers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Custom response headers</title>
      <updated-at type="datetime">2011-01-08T20:16:18+00:00</updated-at>
      <user-id type="integer">131744</user-id>
      <version type="integer">4</version>
      <user-name>dspencer</user-name>
      <creator-name>Xornor</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6260</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Problem disappeared when I started Passenger in the Ruby on rails application directory and used application with it. I am not experienced to deploy Rails applications but I think that before the passenger, the application was executed by Mongrel.

So, there probably is not bug in Rails?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Problem disappeared when I started Passenger in the Ruby on
rails application directory and used application with it. I am not
experienced to deploy Rails applications but I think that before
the passenger, the application was executed by Mongrel.&lt;/p&gt;
&lt;p&gt;So, there probably is not bug in Rails?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-08T20:36:48+00:00</created-at>
      <creator-id type="integer">131613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6260</number>
      <permalink>custom-response-headers</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Custom response headers</title>
      <updated-at type="datetime">2011-01-08T20:36:51+00:00</updated-at>
      <user-id type="integer">131613</user-id>
      <version type="integer">5</version>
      <user-name>Xornor</user-name>
      <creator-name>Xornor</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6260</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-08T23:57:29+00:00</created-at>
      <creator-id type="integer">131613</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6260</number>
      <permalink>custom-response-headers</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag nil="true"></tag>
      <title>Custom response headers</title>
      <updated-at type="datetime">2011-01-08T23:57:42+00:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">6</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>Xornor</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6260</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
