<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-14T05:42:04+00:00</created-at>
  <creator-id type="integer">29522</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4649</number>
  <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>current_page? fails on namespaced controller with same base name</title>
  <updated-at type="datetime">2011-03-26T02:27:40+00:00</updated-at>
  <user-id type="integer">142823</user-id>
  <version type="integer">14</version>
  <user-name>bingbing</user-name>
  <creator-name>Enrico Teotti</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
  <priority-name nil="true"></priority-name>
  <original-body>two controllers: Admin::EventsController and EventsController
seems like current_page? fails to spot the difference

&lt;pre&gt;
.[29, 38] in /Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb
   29      block.call if current_user
   30    end
   31    
   32    def content_for_public_page(&amp;block)
   33      debugger
=&gt; 34      block.call if current_page?(:controller =&gt; 'events', :action =&gt; 'new')
   35    end
   36  end
/Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb:34
block.call if current_page?(:controller =&gt; 'events', :action =&gt; 'new')
(rdb:3) params[:controller]
&quot;admin/events&quot;
(rdb:3) current_page?(:controller =&gt; 'events', :action =&gt; 'new')
true
(rdb:3) current_page?(:controller =&gt; 'admin/events', :action =&gt; 'new')
true
&lt;/pre&gt;</original-body>
  <latest-body>two controllers: Admin::EventsController and EventsController
seems like current_page? fails to spot the difference

&lt;pre&gt;
.[29, 38] in /Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb
   29      block.call if current_user
   30    end
   31    
   32    def content_for_public_page(&amp;block)
   33      debugger
=&gt; 34      block.call if current_page?(:controller =&gt; 'events', :action =&gt; 'new')
   35    end
   36  end
/Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb:34
block.call if current_page?(:controller =&gt; 'events', :action =&gt; 'new')
(rdb:3) params[:controller]
&quot;admin/events&quot;
(rdb:3) current_page?(:controller =&gt; 'events', :action =&gt; 'new')
true
(rdb:3) current_page?(:controller =&gt; 'admin/events', :action =&gt; 'new')
true
&lt;/pre&gt;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;two controllers: Admin::EventsController and
EventsController&lt;br&gt;
seems like current_page? fails to spot the difference&lt;/p&gt;
&lt;pre&gt;
.[29, 38] in /Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb
   29      block.call if current_user
   30    end
   31    
   32    def content_for_public_page(&amp;amp;block)
   33      debugger
=&amp;gt; 34      block.call if current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'new')
   35    end
   36  end
/Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb:34
block.call if current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'new')
(rdb:3) params[:controller]
&quot;admin/events&quot;
(rdb:3) current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'new')
true
(rdb:3) current_page?(:controller =&amp;gt; 'admin/events', :action =&amp;gt; 'new')
true
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>two controllers: Admin::EventsController and EventsController
seems like current_page? fails to spot the difference

&lt;pre&gt;
.[29, 38] in /Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb
   29      block.call if current_user
   30    end
   31    
   32    def content_for_public_page(&amp;block)
   33      debugger
=&gt; 34      block.call if current_page?(:controller =&gt; 'events', :action =&gt; 'new')
   35    end
   36  end
/Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb:34
block.call if current_page?(:controller =&gt; 'events', :action =&gt; 'new')
(rdb:3) params[:controller]
&quot;admin/events&quot;
(rdb:3) current_page?(:controller =&gt; 'events', :action =&gt; 'new')
true
(rdb:3) current_page?(:controller =&gt; 'admin/events', :action =&gt; 'new')
true
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;two controllers: Admin::EventsController and
EventsController&lt;br&gt;
seems like current_page? fails to spot the difference&lt;/p&gt;
&lt;pre&gt;
.[29, 38] in /Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb
   29      block.call if current_user
   30    end
   31    
   32    def content_for_public_page(&amp;amp;block)
   33      debugger
=&amp;gt; 34      block.call if current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'new')
   35    end
   36  end
/Users/enrico/code/rails/cos/app/helpers/admin/events_helper.rb:34
block.call if current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'new')
(rdb:3) params[:controller]
&quot;admin/events&quot;
(rdb:3) current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'new')
true
(rdb:3) current_page?(:controller =&amp;gt; 'admin/events', :action =&amp;gt; 'new')
true
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-19T07:42:38+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-05-19T07:43:48+01:00</updated-at>
      <user-id type="integer">29522</user-id>
      <version type="integer">1</version>
      <user-name>Enrico Teotti</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-21T00:46:23+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-05-21T00:46:24+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">2</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Verified on master. 

`EventsController#index` only returns true for the first one:

@@@ ruby
current_page?(:controller =&gt; 'events', :action =&gt; 'index')       # =&gt; true
current_page?(:controller =&gt; 'admin/events', :action =&gt; 'index') # =&gt; false
@@@


`Admin::EventsController#index` returns true for both:

@@@ ruby
current_page?(:controller =&gt; 'events', :action =&gt; 'index')       # =&gt; true
current_page?(:controller =&gt; 'admin/events', :action =&gt; 'index') # =&gt; true
@@@

This definitely shouldn't be the case if you ask me.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified on master.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;EventsController#index&lt;/code&gt; only returns true for the
first one:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'index')       # =&amp;gt; true
current_page?(:controller =&amp;gt; 'admin/events', :action =&amp;gt; 'index') # =&amp;gt; false&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Admin::EventsController#index&lt;/code&gt; returns true for
both:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;current_page?(:controller =&amp;gt; 'events', :action =&amp;gt; 'index')       # =&amp;gt; true
current_page?(:controller =&amp;gt; 'admin/events', :action =&amp;gt; 'index') # =&amp;gt; true&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This definitely shouldn't be the case if you ask me.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-22T10:49:16+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-05-22T10:49:20+01:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">3</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I was able to reproduce this as well.

I started digging into the code and tests a bit but got stuck when I found that the current_page? tests stub out the controller#url_for method making it hard to write an accurate test. 

I am somehow guessing that this might be a tricky bug to solve in the end without rewriting the helper method because the helper currently is calling that controller method which probably is supposed to accommodate namespaced routes in this manner.

This is my first attempt at cracking a rails bug so if anyone has any suggestions about how to approach solving this bug let me know.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I was able to reproduce this as well.&lt;/p&gt;
&lt;p&gt;I started digging into the code and tests a bit but got stuck
when I found that the current_page? tests stub out the
controller#url_for method making it hard to write an accurate
test.&lt;/p&gt;
&lt;p&gt;I am somehow guessing that this might be a tricky bug to solve
in the end without rewriting the helper method because the helper
currently is calling that controller method which probably is
supposed to accommodate namespaced routes in this manner.&lt;/p&gt;
&lt;p&gt;This is my first attempt at cracking a rails bug so if anyone
has any suggestions about how to approach solving this bug let me
know.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-23T05:56:59+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-05-23T05:57:03+01:00</updated-at>
      <user-id type="integer">100311</user-id>
      <version type="integer">4</version>
      <user-name>Jonathan Greenberg</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>So I have a possible simple fix but I am unsure of my implementation and the correct way to adapt the tests if my approach is acceptable. On master it could look like this:

      def current_page?(options)
        unless request
          raise &quot;You cannot use helpers that need to determine the current &quot; \
                &quot;page unless your view context provides a Request object &quot; \
                &quot;in a #request method&quot;
        end 
 
        return false if options[:controller] &amp;&amp; controller.controller_path != options[:controller]

        url_string = CGI.unescapeHTML(url_for(options)) 
        ....
 
This seems to return correct results using the circumstances described above when run with a server; however, the tests blow up.  I get a little lost with how the current url_helper_test.rb mocks requests and what would be the best way to keep those test passing. 

I had hoped to submit this as a patch but did not feel comfortable without passing tests.

I would appreciate the insight of anyone with more depth of experience with this part of rails and its tests.</body>
      <body-html>&lt;div&gt;&lt;p&gt;So I have a possible simple fix but I am unsure of my
implementation and the correct way to adapt the tests if my
approach is acceptable. On master it could look like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  def current_page?(options)
    unless request
      raise &quot;You cannot use helpers that need to determine the current &quot; \
            &quot;page unless your view context provides a Request object &quot; \
            &quot;in a #request method&quot;
    end 

    return false if options[:controller] &amp;amp;&amp;amp; controller.controller_path != options[:controller]

    url_string = CGI.unescapeHTML(url_for(options)) 
    ....&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This seems to return correct results using the circumstances
described above when run with a server; however, the tests blow up.
I get a little lost with how the current url_helper_test.rb mocks
requests and what would be the best way to keep those test
passing.&lt;/p&gt;
&lt;p&gt;I had hoped to submit this as a patch but did not feel
comfortable without passing tests.&lt;/p&gt;
&lt;p&gt;I would appreciate the insight of anyone with more depth of
experience with this part of rails and its tests.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-24T05:26:43+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-05-24T05:26:48+01:00</updated-at>
      <user-id type="integer">100311</user-id>
      <version type="integer">5</version>
      <user-name>Jonathan Greenberg</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The problem seems to stem from the &quot;use_relative_controller!&quot; method in the RouteSet class. It basically takes into account the url segments separated by &quot;/&quot; and appends them to the passed :controller if the passed :controller doesn't have them. Allowing us to say url_for(:controller =&gt; 'events', :action =&gt; 'index') to get &quot;/admin/events&quot; if the current controller we're in is &quot;admin/events&quot;. 

I like Jonathan's proposed fix since it stays out of that use_relative_controller! method. I attached a patch for it which includes tests.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The problem seems to stem from the &quot;use_relative_controller!&quot;
method in the RouteSet class. It basically takes into account the
url segments separated by &quot;/&quot; and appends them to the passed
:controller if the passed :controller doesn't have them. Allowing
us to say url_for(:controller =&amp;gt; 'events', :action =&amp;gt;
'index') to get &quot;/admin/events&quot; if the current controller we're in
is &quot;admin/events&quot;.&lt;/p&gt;
&lt;p&gt;I like Jonathan's proposed fix since it stays out of that
use_relative_controller! method. I attached a patch for it which
includes tests.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-27T19:01:13+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-05-27T19:01:24+01:00</updated-at>
      <user-id type="integer">49045</user-id>
      <version type="integer">6</version>
      <user-name>Curtis Edmond</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>t the &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net/jewelry-stores/juicy-couture-jewelry.html&quot;&gt;replica Juicy Couture for cheap&lt;/a&gt;&lt;/b&gt; quality they will receive &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net&quot;&gt;cheap jewelry&lt;/a&gt;&lt;/b&gt; will be top-notch. Sites &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net&quot;&gt;discount tiffany jewelry&lt;/a&gt;&lt;/b&gt; like Instyle Sunglasses provides &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net&quot;&gt;replica tiffany jewelry&lt;/a&gt;&lt;/b&gt; alternative to designer sunglasses. &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net&quot;&gt;tiffanys&lt;/a&gt;&lt;/b&gt; That&#65533;&#65533;s a good deal &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net&quot;&gt;wholesale tiffany jewelry&lt;/a&gt;&lt;/b&gt; since you do not &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net/jewelry-stores/christian-dior-necklaces.html&quot;&gt;replica Christian Dior Necklaces&lt;/a&gt;&lt;/b&gt; have to go for &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net&quot;&gt;tiffany&lt;/a&gt;&lt;/b&gt; replica sunglasses. There are &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net/jewelry-stores/juicy-couture-jewelry.html&quot;&gt;replica Juicy Couture wholeslae&lt;/a&gt;&lt;/b&gt; also so many latest &lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net/jewelry-stores/links-of-london-jewelry.html&quot;&gt;replica Links of London for cheap&lt;/a&gt;&lt;/b&gt; sunglass designs to choose from. Latest Gucci sunglasses, however, have</body>
      <body-html>&lt;div&gt;&lt;p&gt;t the &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net/jewelry-stores/juicy-couture-jewelry.html&quot;&gt;
replica Juicy Couture for cheap&lt;/a&gt;&lt;/b&gt; quality they will receive
&lt;b&gt;&lt;a href=&quot;http://www.tiffanyreplicas.net&quot;&gt;cheap jewelry&lt;/a&gt;&lt;/b&gt;
will be top-notch. Sites &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net&quot;&gt;discount tiffany jewelry&lt;/a&gt;&lt;/b&gt;
like Instyle Sunglasses provides &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net&quot;&gt;replica tiffany jewelry&lt;/a&gt;&lt;/b&gt;
alternative to designer sunglasses. &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net&quot;&gt;tiffanys&lt;/a&gt;&lt;/b&gt;
That&amp;#65533;&amp;#65533;s a good deal &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net&quot;&gt;wholesale tiffany jewelry&lt;/a&gt;&lt;/b&gt;
since you do not &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net/jewelry-stores/christian-dior-necklaces.html&quot;&gt;
replica Christian Dior Necklaces&lt;/a&gt;&lt;/b&gt; have to go for &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net&quot;&gt;tiffany&lt;/a&gt;&lt;/b&gt; replica
sunglasses. There are &lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net/jewelry-stores/juicy-couture-jewelry.html&quot;&gt;
replica Juicy Couture wholeslae&lt;/a&gt;&lt;/b&gt; also so many latest
&lt;b&gt;&lt;a href=
&quot;http://www.tiffanyreplicas.net/jewelry-stores/links-of-london-jewelry.html&quot;&gt;
replica Links of London for cheap&lt;/a&gt;&lt;/b&gt; sunglass designs to
choose from. Latest Gucci sunglasses, however, have&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-19T06:21:39+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-07-19T16:24:24+01:00</updated-at>
      <user-id type="integer">107778</user-id>
      <version type="integer">7</version>
      <user-name>xiaobao</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hey Curtis,

Your patch doesn't apply cleanly to master. 

I changed the patch to make it apply cleanly. I would post it here, but two tests are failing once the patch has been applied. 

I'm still looking into the failing tests.

Thanks for your help.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Curtis,&lt;/p&gt;
&lt;p&gt;Your patch doesn't apply cleanly to master.&lt;/p&gt;
&lt;p&gt;I changed the patch to make it apply cleanly. I would post it
here, but two tests are failing once the patch has been
applied.&lt;/p&gt;
&lt;p&gt;I'm still looking into the failing tests.&lt;/p&gt;
&lt;p&gt;Thanks for your help.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-16T21:17:08+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-09-16T21:17:11+01:00</updated-at>
      <user-id type="integer">44801</user-id>
      <version type="integer">8</version>
      <user-name>Lake</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Ok, thanks for the heads up. I'll try this against trunk and see what I can find.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, thanks for the heads up. I'll try this against trunk and see
what I can find.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-16T21:32:49+01:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2010-09-16T21:32:55+01:00</updated-at>
      <user-id type="integer">49045</user-id>
      <version type="integer">9</version>
      <user-name>Curtis Edmond</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:31:26+00:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2011-02-02T16:49:47+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">10</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:31:27+00:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2011-02-02T16:49:33+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">11</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Good &lt;a href=http://www.sale-puma.com&gt;Puma shoes sale&lt;/a&gt; information for &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; fans: Yesterday, German sportswear maker Cheap Running Shoes purchased effectively lot of money Brands. The transaction entails the Cobra brand, too as linked inventory, intellectual house and endorsement contracts. It also helps make &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Shoes . They provide you with the utmost game and support all through the feet.You can happen around several types of basketball sneakers such as high-top,low-top and mid-top.The &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt; and boots give you best ankle support will support want you to obtain steadiness.
As we konw,Trail &lt;a href=http://www.sale-puma.com&gt;Puma Drift Cat&lt;/a&gt; Shoes black, Trail &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; ShoesWhite Black? 50 many years backshore are actually released within a great accomplishment. Trail Running Shoes speed cat shoes?go in add-on to King Pele into planet tournament finals, bottom tennis discs matchrs within pasture inhabit an vital area in hold out in Wimbledon Dun; Its working firms have premier manufacturers and major marketplace positions in distilled spirits, residence and security, and golf products. The reply go all through the &lt;a href=http://www.sale-puma.com&gt;Cheap puma shoes&lt;/a&gt; on sale-here you are able to happen around several distcoun.&lt;a href=http://www.sale-puma.com&gt;puma shoes on sale &lt;/a&gt;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good &lt;a href=&quot;http:&quot;&gt;Puma shoes sale information for &lt;a href=
&quot;http:&quot;&gt;Puma shoes fans: Yesterday, German sportswear maker Cheap
Running Shoes purchased effectively lot of money Brands. The
transaction entails the Cobra brand, too as linked inventory,
intellectual house and endorsement contracts. It also helps make
&lt;a href=&quot;http:&quot;&gt;puma speed cat Shoes . They provide you with the
utmost game and support all through the feet.You can happen around
several types of basketball sneakers such as high-top,low-top and
mid-top.The &lt;a href=&quot;http:&quot;&gt;Puma shoes online and boots give you
best ankle support will support want you to obtain steadiness.&lt;br&gt;
As we konw,Trail &lt;a href=&quot;http:&quot;&gt;Puma Drift Cat Shoes black, Trail
&lt;a href=&quot;http:&quot;&gt;Puma future cat ShoesWhite Black? 50 many years
backshore are actually released within a great accomplishment.
Trail Running Shoes speed cat shoes?go in add-on to King Pele into
planet tournament finals, bottom tennis discs matchrs within
pasture inhabit an vital area in hold out in Wimbledon Dun; Its
working firms have premier manufacturers and major marketplace
positions in distilled spirits, residence and security, and golf
products. The reply go all through the &lt;a href=&quot;http:&quot;&gt;Cheap puma
shoes on sale-here you are able to happen around several
distcoun.&lt;a href=&quot;http:&quot;&gt;puma shoes on sale .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-14T02:12:15+00:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2011-02-14T05:41:53+00:00</updated-at>
      <user-id type="integer">136860</user-id>
      <version type="integer">12</version>
      <user-name>xixi</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Today, kids as babyish as Ashcan School or nine name-conscious and trend-alert, puma ducati buying at for solid garments rather than just throwing on what&#8217;s pure. Here are just some of the brands and trends your children hungered over 2011. The 80&#8242;s Are Back. You may have noticed a trend this year for evisu jeans, supra shoes, leggings petticoats, oversized tees, and big &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; shoes. This is a look that appeals to babies girls-it&#8217;s quirky and yet smart at the same time.
&lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; with success sets the charm for manner, lifestyle and gambols. This has been believed to serve for an ideal cross flight simulator. This has been fine-looking by most jocks and the Speed Cat is an old name for the industriousness which made &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; gain millions with this business. With many people converting more wellness conscious in time, a lot wants also to commit on a good pair of cross trainers. These are very indestructible and forward-looking just like the real carrying out of a real &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt;. It consumes been systematically on the forefront of design and carrying out when it pertains comfort and style commingled.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Today, kids as babyish as Ashcan School or nine name-conscious
and trend-alert, puma ducati buying at for solid garments rather
than just throwing on what&amp;#8217;s pure. Here are just some of the
brands and trends your children hungered over 2011. The 80&amp;#8242;s
Are Back. You may have noticed a trend this year for evisu jeans,
supra shoes, leggings petticoats, oversized tees, and big &lt;a href=
&quot;http:&quot;&gt;puma speed cat shoes. This is a look that appeals to babies
girls-it&amp;#8217;s quirky and yet smart at the same time.&lt;br&gt;
&lt;a href=&quot;http:&quot;&gt;Puma future cat with success sets the charm for
manner, lifestyle and gambols. This has been believed to serve for
an ideal cross flight simulator. This has been fine-looking by most
jocks and the Speed Cat is an old name for the industriousness
which made &lt;a href=&quot;http:&quot;&gt;Puma shoes gain millions with this
business. With many people converting more wellness conscious in
time, a lot wants also to commit on a good pair of cross trainers.
These are very indestructible and forward-looking just like the
real carrying out of a real &lt;a href=&quot;http:&quot;&gt;Puma future cat. It
consumes been systematically on the forefront of design and
carrying out when it pertains comfort and style commingled.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-14T04:30:36+00:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2011-02-14T05:42:04+00:00</updated-at>
      <user-id type="integer">136860</user-id>
      <version type="integer">13</version>
      <user-name>xixi</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton watches&lt;/a&gt;&lt;/b&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton
watches&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-26T02:07:05+00:00</created-at>
      <creator-id type="integer">29522</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4649</number>
      <permalink>current_page-fails-on-namespaced-controller-with-same-base-name</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>current_page? fails on namespaced controller with same base name</title>
      <updated-at type="datetime">2011-03-26T02:27:40+00:00</updated-at>
      <user-id type="integer">142823</user-id>
      <version type="integer">14</version>
      <user-name>bingbing</user-name>
      <creator-name>Enrico Teotti</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4649</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>354e7215c16cbe9e5385bf453717b9b2d9673291</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-27T19:01:14+01:00</created-at>
      <filename>4649_update_current_page_for_namespaced_controllers.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">537629</id>
      <size type="integer">3289</size>
      <uploader-id type="integer">49045</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/537629/4649_update_current_page_for_namespaced_controllers.diff</url>
    </attachment>
  </attachments>
</ticket>
