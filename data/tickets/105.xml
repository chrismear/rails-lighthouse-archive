<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">15783</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-05-04T06:01:33+01:00</created-at>
  <creator-id type="integer">4238</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">105</number>
  <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
  <priority type="integer">12799</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activerecord activesupport patch time timezone</tag>
  <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
  <updated-at type="datetime">2008-05-09T03:49:40+01:00</updated-at>
  <user-id type="integer">15783</user-id>
  <version type="integer">15</version>
  <user-name>Geoff Buesing</user-name>
  <creator-name>Scott Fleckenstein</creator-name>
  <assigned-user-name>Geoff Buesing</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
  <priority-name nil="true"></priority-name>
  <original-body>For example, say you have a model User with a column banned_at:

@@@ ruby
@user.banned_at = Time.zone.now   # =&gt; Sat, 03 May 2008 21:55:45 PDT -07:00
time_string = @user.banned_at.to_s   # =&gt; &quot;2008-05-03 21:55:45 -0700&quot;
@user.banned_at = time_string # =&gt; Sat, 03 May 2008 21:55:45 UTC +00:00
time_string = @user.banned_at.to_s   # =&gt; &quot;2008-05-03 21:55:45 UTC&quot;
@@@

Patch is attached.</original-body>
  <latest-body>For example, say you have a model User with a column banned_at:

@@@ ruby
@user.banned_at = Time.zone.now   # =&gt; Sat, 03 May 2008 21:55:45 PDT -07:00
time_string = @user.banned_at.to_s   # =&gt; &quot;2008-05-03 21:55:45 -0700&quot;
@user.banned_at = time_string # =&gt; Sat, 03 May 2008 21:55:45 UTC +00:00
time_string = @user.banned_at.to_s   # =&gt; &quot;2008-05-03 21:55:45 UTC&quot;
@@@

Patch is attached.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
For example, say you have a model User with a column banned_at:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;@user.banned_at = Time.zone.now   # =&amp;gt; Sat, 03 May 2008 21:55:45 PDT -07:00
time_string = @user.banned_at.to_s   # =&amp;gt; &amp;quot;2008-05-03 21:55:45 -0700&amp;quot;
@user.banned_at = time_string # =&amp;gt; Sat, 03 May 2008 21:55:45 UTC +00:00
time_string = @user.banned_at.to_s   # =&amp;gt; &amp;quot;2008-05-03 21:55:45 UTC&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
Patch is attached.
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>For example, say you have a model User with a column banned_at:

@@@ ruby
@user.banned_at = Time.zone.now   # =&gt; Sat, 03 May 2008 21:55:45 PDT -07:00
time_string = @user.banned_at.to_s   # =&gt; &quot;2008-05-03 21:55:45 -0700&quot;
@user.banned_at = time_string # =&gt; Sat, 03 May 2008 21:55:45 UTC +00:00
time_string = @user.banned_at.to_s   # =&gt; &quot;2008-05-03 21:55:45 UTC&quot;
@@@

Patch is attached.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
For example, say you have a model User with a column banned_at:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;@user.banned_at = Time.zone.now   # =&amp;gt; Sat, 03 May 2008 21:55:45 PDT -07:00
time_string = @user.banned_at.to_s   # =&amp;gt; &amp;quot;2008-05-03 21:55:45 -0700&amp;quot;
@user.banned_at = time_string # =&amp;gt; Sat, 03 May 2008 21:55:45 UTC +00:00
time_string = @user.banned_at.to_s   # =&amp;gt; &amp;quot;2008-05-03 21:55:45 UTC&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
Patch is attached.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-04T06:01:33+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-04T06:01:33+01:00</updated-at>
      <user-id type="integer">4238</user-id>
      <version type="integer">1</version>
      <user-name>Scott Fleckenstein</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>These tests only pass if your computer's clock is set to the same time zone as Time.zone is set to in the test. Change your computer's clock to any other time zone and the tests fail.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
These tests only pass if your computer's clock is set to the same time zone as Time.zone is set to in the test. Change your computer's clock to any other time zone and the tests fail.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-05T16:53:25+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-05T16:53:25+01:00</updated-at>
      <user-id type="integer">17510</user-id>
      <version type="integer">2</version>
      <user-name>Dan Barry</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>LOL.  My bad.  I'll work on fixes to them :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;
LOL.  My bad.  I'll work on fixes to them :)
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-05T17:02:08+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-05T17:02:08+01:00</updated-at>
      <user-id type="integer">4238</user-id>
      <version type="integer">3</version>
      <user-name>Scott Fleckenstein</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've attached a new patch that works when the machine's clock is set to a different time zone than Time.zone.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I've attached a new patch that works when the machine's clock is set to a different time zone than Time.zone.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-06T00:00:41+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-06T00:00:41+01:00</updated-at>
      <user-id type="integer">17510</user-id>
      <version type="integer">4</version>
      <user-name>Dan Barry</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Thanks Dan!

I was going to work on fixing the patch tonight but I see that you up and solved the problems without me. :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Thanks Dan!
&lt;/p&gt;&lt;p&gt;
I was going to work on fixing the patch tonight but I see that you up and solved the problems without me. :)
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-06T00:20:22+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-06T00:20:22+01:00</updated-at>
      <user-id type="integer">4238</user-id>
      <version type="integer">5</version>
      <user-name>Scott Fleckenstein</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I noticed a problem with DST due to TimeZone not knowing which period it is in. This has been fixed in the new patch (as well as the tests using time zones from both hemispheres so that there is always something that must be adjusted).</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I noticed a problem with DST due to TimeZone not knowing which period it is in. This has been fixed in the new patch (as well as the tests using time zones from both hemispheres so that there is always something that must be adjusted).
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-06T02:57:03+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-06T02:57:03+01:00</updated-at>
      <user-id type="integer">17510</user-id>
      <version type="integer">6</version>
      <user-name>Dan Barry</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>The tests are now consistently passing for me no matter my system date / time zone / DST value. +1, this is a handy feature.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
The tests are now consistently passing for me no matter my system date / time zone / DST value. +1, this is a handy feature.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-06T03:21:13+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-06T03:21:13+01:00</updated-at>
      <user-id type="integer">4063</user-id>
      <version type="integer">7</version>
      <user-name>Kyle Hargraves</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I've been having trouble with time zones in my project. This helps. +1</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I've been having trouble with time zones in my project. This helps. +1
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-06T15:42:07+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-06T15:42:07+01:00</updated-at>
      <user-id type="integer">18775</user-id>
      <version type="integer">8</version>
      <user-name>Kevin Glowacz</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I just realized that strings without specified time zones are interpreted as being in UTC. While one could theoretically just use Time.zone.parse, it defeats the purpose of having all of this happen automatically.

String#to_time should always interpret 'May 5th 2:00pm' as being 2pm in the user's time zone, not UTC. Unless someone can come up with a good reason that this shouldn't be the case, I'll add this as well.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I just realized that strings without specified time zones are interpreted as being in UTC. While one could theoretically just use Time.zone.parse, it defeats the purpose of having all of this happen automatically.
&lt;/p&gt;&lt;p&gt;
String#to_time should always interpret 'May 5th 2:00pm' as being 2pm in the user's time zone, not UTC. Unless someone can come up with a good reason that this shouldn't be the case, I'll add this as well.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-06T16:30:15+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-06T16:30:15+01:00</updated-at>
      <user-id type="integer">17510</user-id>
      <version type="integer">9</version>
      <user-name>Dan Barry</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>The newly attached patch interprets strings without time zone information as being in the current time zone.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
The newly attached patch interprets strings without time zone information as being in the current time zone.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-06T17:50:57+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-06T17:50:57+01:00</updated-at>
      <user-id type="integer">17510</user-id>
      <version type="integer">10</version>
      <user-name>Dan Barry</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15783</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The time zone enhancement to String#to_time does make sense, but it might break apps that rely on the existing behavior (i.e., ignore any time zone info in the string), so I'm hesitant to change it. 

Fortunately, the stated goal of this patch -- to make ActiveRecord time zone aware attributes work with time zone information in a supplied string -- can be achieved without changing String#to_time. We'd just need to make Time.zone.parse respect time zone info in the string (as has been fixed in the existing patch) and change the AR attribute writer method to call Time.zone.parse whenever a string is passed in -- I'd be happy to pull those changes in. 

Let me know if you want to update this patch, or if you want me to take it from here. Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;
The time zone enhancement to String#to_time does make sense, but it might break apps that rely on the existing behavior (i.e., ignore any time zone info in the string), so I'm hesitant to change it.
&lt;/p&gt;&lt;p&gt;
Fortunately, the stated goal of this patch -- to make ActiveRecord time zone aware attributes work with time zone information in a supplied string -- can be achieved without changing String#to_time. We'd just need to make Time.zone.parse respect time zone info in the string (as has been fixed in the existing patch) and change the AR attribute writer method to call Time.zone.parse whenever a string is passed in -- I'd be happy to pull those changes in.
&lt;/p&gt;&lt;p&gt;
Let me know if you want to update this patch, or if you want me to take it from here. Thanks!
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-07T07:52:17+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-07T07:52:17+01:00</updated-at>
      <user-id type="integer">15783</user-id>
      <version type="integer">11</version>
      <user-name>Geoff Buesing</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name>Geoff Buesing</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15783</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>time_zone_parse.diff is attached, a new patch that works as Geoff advertised, replacing #to_time with Time.zone.parse.

Thanks for the advice.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
time_zone_parse.diff is attached, a new patch that works as Geoff advertised, replacing #to_time with Time.zone.parse.
&lt;/p&gt;&lt;p&gt;
Thanks for the advice.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-07T15:02:52+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-07T15:02:52+01:00</updated-at>
      <user-id type="integer">4238</user-id>
      <version type="integer">12</version>
      <user-name>Scott Fleckenstein</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name>Geoff Buesing</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15783</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Geoff,

While I'm not sure whether someone would expect a string without an explicit time zone to be interpreted as UTC or the time zone set in Time.zone, I think that you'd expect a string with a time zone specified to be interpreted as being in that time zone.

I feel that not parsing the time zone given in a string leads to an unnecessary violation of the principle of least surprise: time.to_s.to_time will be different from the original time. It's not even the same time in a different time zone; it's the wrong time.

Is backwards compatibility worth arguably broken behavior?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Geoff,
&lt;/p&gt;&lt;p&gt;
While I'm not sure whether someone would expect a string without an explicit time zone to be interpreted as UTC or the time zone set in Time.zone, I think that you'd expect a string with a time zone specified to be interpreted as being in that time zone.
&lt;/p&gt;&lt;p&gt;
I feel that not parsing the time zone given in a string leads to an unnecessary violation of the principle of least surprise: time.to_s.to_time will be different from the original time. It's not even the same time in a different time zone; it's the wrong time.
&lt;/p&gt;&lt;p&gt;
Is backwards compatibility worth arguably broken behavior?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-07T20:42:58+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-07T20:42:58+01:00</updated-at>
      <user-id type="integer">17510</user-id>
      <version type="integer">13</version>
      <user-name>Dan Barry</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name>Geoff Buesing</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15783</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Scott: thanks for the updated patch; I'll try to pull this in in the next couple of days.

@Dan: String#to_time has ignored the time zone since it was first added in Rails 0.14, over three years ago, and there have been no attempts to fix this behavior since, which is why I'm hesitant to change it now without a compelling use case. 

If you like, please open a separate ticket about this particular issue -- if there's community enthusiasm for this, and no significant downsides that anyone can think of, then we're probably ok to go ahead with this change.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
@Scott: thanks for the updated patch; I'll try to pull this in in the next couple of days.
&lt;/p&gt;&lt;p&gt;
@Dan: String#to_time has ignored the time zone since it was first added in Rails 0.14, over three years ago, and there have been no attempts to fix this behavior since, which is why I'm hesitant to change it now without a compelling use case.
&lt;/p&gt;&lt;p&gt;
If you like, please open a separate ticket about this particular issue -- if there's community enthusiasm for this, and no significant downsides that anyone can think of, then we're probably ok to go ahead with this change.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-08T05:19:21+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-08T05:19:21+01:00</updated-at>
      <user-id type="integer">15783</user-id>
      <version type="integer">14</version>
      <user-name>Geoff Buesing</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name>Geoff Buesing</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15783</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>patch applied in http://github.com/rails/rails/commit/eb5b93be74ed3eca925c1ab9bd4739919ae39a41</body>
      <body-html>&lt;div&gt;&lt;p&gt;
patch applied in &lt;a href=&quot;http://github.com/rails/rails/commit/eb5b93be74ed3eca925c1ab9bd4739919ae39a41&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-05-09T03:49:40+01:00</created-at>
      <creator-id type="integer">4238</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">105</number>
      <permalink>assigning-strings-with-timezone-information-to-timezone-aware-attributes-strips-out-timezone-info</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Assigning strings with timezone information to timezone aware attributes strips out timezone info</title>
      <updated-at type="datetime">2008-05-09T03:49:40+01:00</updated-at>
      <user-id type="integer">15783</user-id>
      <version type="integer">15</version>
      <user-name>Geoff Buesing</user-name>
      <creator-name>Scott Fleckenstein</creator-name>
      <assigned-user-name>Geoff Buesing</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/105</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>ca51ec2484c65ffdbad8f58a0536159e7abc187e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-05-06T17:50:57+01:00</created-at>
      <filename>0003-String-to_time-works-for-string-with-timezone-inform.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">21753</id>
      <size type="integer">6347</size>
      <uploader-id type="integer">17510</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/21753/0003-String-to_time-works-for-string-with-timezone-inform.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>654c9914c31b86f6c3e4972b79f5a38608f3cf2e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-05-07T15:02:52+01:00</created-at>
      <filename>time_zone_parse.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">21900</id>
      <size type="integer">4349</size>
      <uploader-id type="integer">4238</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/21900/time_zone_parse.diff</url>
    </attachment>
  </attachments>
</ticket>
