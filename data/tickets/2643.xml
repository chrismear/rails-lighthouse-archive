<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-26T08:44:29+01:00</created-at>
  <creator-id type="integer">56875</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">2643</number>
  <permalink>pathurl-helpers-broken-for-bigdecimal-id</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>Path/URL helpers broken for BigDecimal ID</title>
  <updated-at type="datetime">2011-02-02T17:09:28+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">6</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Ales Bukovsky</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2643</url>
  <milestone-title>3.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>I'm running a generated tutorial Rails (2.3.2) application on JRuby (1.2.0) against the Oracle 10 database connection via JDBC adapter (0.9.1). The ID column is represented as BigDecimal. None of the pat/URL shortcut helpers (&lt;model&gt;_path, edit_&lt;model&gt;_path etc.) is working in the templates.

Template has a link:

&lt;%= link_to &quot;Show&quot;, book %&gt;

It gives the runtime error:

book_url failed to generate from {:controller=&gt;&quot;books&quot;, :action=&gt;&quot;show&quot;, :id=&gt;#&lt;Book id: #&lt;BigDecimal:175db37,'2.0',1(4)&gt;, title: &quot;Just In Case&quot;, author: &quot;Mike Trenton&quot;&gt;}, expected: {:controller=&gt;&quot;books&quot;, :action=&gt;&quot;show&quot;}, diff: {:id=&gt;#&lt;Book id: #&lt;BigDecimal:1e3c942,'2.0',1(4)&gt;, title: &quot;Just In Case&quot;, author: &quot;Mike Trenton&quot;&gt;}

Using the full specified link_to with :controller, :action and :id works as far as the BigDecimal ID is converted via to_int.

Note that other functions are affected as well if they rely on teh helpers - like form_for, which I did not find a workaround yet.</original-body>
  <latest-body>I'm running a generated tutorial Rails (2.3.2) application on JRuby (1.2.0) against the Oracle 10 database connection via JDBC adapter (0.9.1). The ID column is represented as BigDecimal. None of the pat/URL shortcut helpers (&lt;model&gt;_path, edit_&lt;model&gt;_path etc.) is working in the templates.

Template has a link:

&lt;%= link_to &quot;Show&quot;, book %&gt;

It gives the runtime error:

book_url failed to generate from {:controller=&gt;&quot;books&quot;, :action=&gt;&quot;show&quot;, :id=&gt;#&lt;Book id: #&lt;BigDecimal:175db37,'2.0',1(4)&gt;, title: &quot;Just In Case&quot;, author: &quot;Mike Trenton&quot;&gt;}, expected: {:controller=&gt;&quot;books&quot;, :action=&gt;&quot;show&quot;}, diff: {:id=&gt;#&lt;Book id: #&lt;BigDecimal:1e3c942,'2.0',1(4)&gt;, title: &quot;Just In Case&quot;, author: &quot;Mike Trenton&quot;&gt;}

Using the full specified link_to with :controller, :action and :id works as far as the BigDecimal ID is converted via to_int.

Note that other functions are affected as well if they rely on teh helpers - like form_for, which I did not find a workaround yet.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I'm running a generated tutorial Rails (2.3.2) application on
JRuby (1.2.0) against the Oracle 10 database connection via JDBC
adapter (0.9.1). The ID column is represented as BigDecimal. None
of the pat/URL shortcut helpers (_path, edit__path etc.) is working
in the templates.&lt;/p&gt;
&lt;p&gt;Template has a link:&lt;/p&gt;
&lt;p&gt;&amp;lt;%= link_to &quot;Show&quot;, book %&amp;gt;&lt;/p&gt;
&lt;p&gt;It gives the runtime error:&lt;/p&gt;
&lt;p&gt;book_url failed to generate from {:controller=&amp;gt;&quot;books&quot;,
:action=&amp;gt;&quot;show&quot;, :id=&amp;gt;#, title: &quot;Just In Case&quot;, author: &quot;Mike
Trenton&quot;&amp;gt;}, expected: {:controller=&amp;gt;&quot;books&quot;,
:action=&amp;gt;&quot;show&quot;}, diff: {:id=&amp;gt;#, title: &quot;Just In Case&quot;,
author: &quot;Mike Trenton&quot;&amp;gt;}&lt;/p&gt;
&lt;p&gt;Using the full specified link_to with :controller, :action and
:id works as far as the BigDecimal ID is converted via to_int.&lt;/p&gt;
&lt;p&gt;Note that other functions are affected as well if they rely on
teh helpers - like form_for, which I did not find a workaround
yet.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm running a generated tutorial Rails (2.3.2) application on JRuby (1.2.0) against the Oracle 10 database connection via JDBC adapter (0.9.1). The ID column is represented as BigDecimal. None of the pat/URL shortcut helpers (&lt;model&gt;_path, edit_&lt;model&gt;_path etc.) is working in the templates.

Template has a link:

&lt;%= link_to &quot;Show&quot;, book %&gt;

It gives the runtime error:

book_url failed to generate from {:controller=&gt;&quot;books&quot;, :action=&gt;&quot;show&quot;, :id=&gt;#&lt;Book id: #&lt;BigDecimal:175db37,'2.0',1(4)&gt;, title: &quot;Just In Case&quot;, author: &quot;Mike Trenton&quot;&gt;}, expected: {:controller=&gt;&quot;books&quot;, :action=&gt;&quot;show&quot;}, diff: {:id=&gt;#&lt;Book id: #&lt;BigDecimal:1e3c942,'2.0',1(4)&gt;, title: &quot;Just In Case&quot;, author: &quot;Mike Trenton&quot;&gt;}

Using the full specified link_to with :controller, :action and :id works as far as the BigDecimal ID is converted via to_int.

Note that other functions are affected as well if they rely on teh helpers - like form_for, which I did not find a workaround yet.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm running a generated tutorial Rails (2.3.2) application on
JRuby (1.2.0) against the Oracle 10 database connection via JDBC
adapter (0.9.1). The ID column is represented as BigDecimal. None
of the pat/URL shortcut helpers (&lt;em&gt;path, edit&lt;/em&gt;_path etc.) is
working in the templates.&lt;/p&gt;
&lt;p&gt;Template has a link:&lt;/p&gt;
&lt;p&gt;&amp;lt;%= link_to &quot;Show&quot;, book %&amp;gt;&lt;/p&gt;
&lt;p&gt;It gives the runtime error:&lt;/p&gt;
&lt;p&gt;book_url failed to generate from {:controller=&amp;gt;&quot;books&quot;,
:action=&amp;gt;&quot;show&quot;, :id=&amp;gt;#, title: &quot;Just In Case&quot;, author: &quot;Mike
Trenton&quot;&amp;gt;}, expected: {:controller=&amp;gt;&quot;books&quot;,
:action=&amp;gt;&quot;show&quot;}, diff: {:id=&amp;gt;#, title: &quot;Just In Case&quot;,
author: &quot;Mike Trenton&quot;&amp;gt;}&lt;/p&gt;
&lt;p&gt;Using the full specified link_to with :controller, :action and
:id works as far as the BigDecimal ID is converted via to_int.&lt;/p&gt;
&lt;p&gt;Note that other functions are affected as well if they rely on
teh helpers - like form_for, which I did not find a workaround
yet.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-13T20:17:57+01:00</created-at>
      <creator-id type="integer">56875</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2643</number>
      <permalink>pathurl-helpers-broken-for-bigdecimal-id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Path/URL helpers broken for BigDecimal ID</title>
      <updated-at type="datetime">2009-05-13T20:18:00+01:00</updated-at>
      <user-id type="integer">56875</user-id>
      <version type="integer">1</version>
      <user-name>Ales Bukovsky</user-name>
      <creator-name>Ales Bukovsky</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2643</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>There is apparently a problem in the JDBC adapter (0.9.1) implementation for Oracle.

http://www.ruby-forum.com/topic/180358

As result, the integer column is mapped in the Ruby code as a BigDecimal. With the workaround mentioned in the linked post, the ID is mapped properly as an integer and all problems I've described disappear. I&#8217;m not sure why Rails chokes on BigDecimal IDs but I can understand that integer is required. However, the linked discussion also indicates that the URL/path generation worked with Rails 2.2.2 although the ID originating in teh BigDecimal was created as X.X. So there still could be a problem in the Rails URL generation code when BigDecimal ID is given, because in 2.3.2 it just dies with an error.</body>
      <body-html>&lt;div&gt;&lt;p&gt;There is apparently a problem in the JDBC adapter (0.9.1)
implementation for Oracle.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://www.ruby-forum.com/topic/180358&quot;&gt;http://www.ruby-forum.com/topic/180358&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;As result, the integer column is mapped in the Ruby code as a
BigDecimal. With the workaround mentioned in the linked post, the
ID is mapped properly as an integer and all problems I've described
disappear. I&amp;#8217;m not sure why Rails chokes on BigDecimal IDs
but I can understand that integer is required. However, the linked
discussion also indicates that the URL/path generation worked with
Rails 2.2.2 although the ID originating in teh BigDecimal was
created as X.X. So there still could be a problem in the Rails URL
generation code when BigDecimal ID is given, because in 2.3.2 it
just dies with an error.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-14T14:50:01+01:00</created-at>
      <creator-id type="integer">56875</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2643</number>
      <permalink>pathurl-helpers-broken-for-bigdecimal-id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Path/URL helpers broken for BigDecimal ID</title>
      <updated-at type="datetime">2009-05-14T14:50:04+01:00</updated-at>
      <user-id type="integer">56875</user-id>
      <version type="integer">2</version>
      <user-name>Ales Bukovsky</user-name>
      <creator-name>Ales Bukovsky</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2643</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The typecast issue is now cross-reported in the ActiveRecord JDBC adapter bug tracker as well:

http://kenai.com/jira/browse/ACTIVERECORD_JDBC-17</body>
      <body-html>&lt;div&gt;&lt;p&gt;The typecast issue is now cross-reported in the ActiveRecord
JDBC adapter bug tracker as well:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://kenai.com/jira/browse/ACTIVERECORD_JDBC-17&quot;&gt;http://kenai.com/jira/browse/ACTIVERECORD_JDBC-17&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-14T16:33:08+01:00</created-at>
      <creator-id type="integer">56875</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2643</number>
      <permalink>pathurl-helpers-broken-for-bigdecimal-id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Path/URL helpers broken for BigDecimal ID</title>
      <updated-at type="datetime">2009-05-14T16:33:10+01:00</updated-at>
      <user-id type="integer">56875</user-id>
      <version type="integer">3</version>
      <user-name>Ales Bukovsky</user-name>
      <creator-name>Ales Bukovsky</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2643</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:49+01:00</created-at>
      <creator-id type="integer">56875</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2643</number>
      <permalink>pathurl-helpers-broken-for-bigdecimal-id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Path/URL helpers broken for BigDecimal ID</title>
      <updated-at type="datetime">2010-05-04T18:48:49+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">4</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Ales Bukovsky</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2643</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:35:10+00:00</created-at>
      <creator-id type="integer">56875</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2643</number>
      <permalink>pathurl-helpers-broken-for-bigdecimal-id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Path/URL helpers broken for BigDecimal ID</title>
      <updated-at type="datetime">2011-02-02T17:09:20+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">5</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Ales Bukovsky</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2643</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:35:11+00:00</created-at>
      <creator-id type="integer">56875</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2643</number>
      <permalink>pathurl-helpers-broken-for-bigdecimal-id</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>Path/URL helpers broken for BigDecimal ID</title>
      <updated-at type="datetime">2011-02-02T17:09:28+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">6</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Ales Bukovsky</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2643</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
