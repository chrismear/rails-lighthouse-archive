<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">141</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-07-09T14:20:25+01:00</created-at>
  <creator-id type="integer">24712</creator-id>
  <milestone-due-on type="datetime">2009-08-31T00:00:00+01:00</milestone-due-on>
  <milestone-id type="integer">41987</milestone-id>
  <number type="integer">2893</number>
  <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
  <priority type="integer">4</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>2-3-stable 2.3.2 render</tag>
  <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
  <updated-at type="datetime">2009-08-09T05:24:48+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">20</version>
  <user-name>Repository</user-name>
  <creator-name>JDL</creator-name>
  <assigned-user-name>Michael Koziarski</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
  <milestone-title>2.3.4</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>[Note: I am aware of #2873.  I don't believe that it's the same bug.]

In Rails 2.3.2 and also Rails 2.3-stable (as of July 08, 2009 when I checked it) I am having a problem with render :text =&gt; proc {}

I created a new application with a single controller and a single action.  The contents of the action are straight out of the online docs for render.

@@@
class LinesController &lt; ApplicationController
  def show
    respond_to do |format|
      format.html { render :text =&gt; proc {|response, output|
          10.times do |i|
            output.write(&quot;This is line #{i}\n&quot;)
            output.flush
          end
        }
      }
    end
  end
end
@@@


When I run this under Rails 2.3.2 or 2.3-stable, I see the following.

@@@
$ curl http://localhost:3002/lines
curl: (18) transfer closed with outstanding read data remaining
@@@


If I hit this with a browser I see only the first line.

This is line 0


When I run this under Rails 2.2.2 I see the following response.

@@@
$ curl http://localhost:3002/lines
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9
@@@

For reference, I also started a discussion about this issue on stackoverflow, where I was asked to post a new bug ticket here.
http://stackoverflow.com/questions/1100443/rails-render-text-proc-in-2-2-2-versus-2-3-2</original-body>
  <latest-body>[Note: I am aware of #2873.  I don't believe that it's the same bug.]

In Rails 2.3.2 and also Rails 2.3-stable (as of July 08, 2009 when I checked it) I am having a problem with render :text =&gt; proc {}

I created a new application with a single controller and a single action.  The contents of the action are straight out of the online docs for render.

@@@
class LinesController &lt; ApplicationController
  def show
    respond_to do |format|
      format.html { render :text =&gt; proc {|response, output|
          10.times do |i|
            output.write(&quot;This is line #{i}\n&quot;)
            output.flush
          end
        }
      }
    end
  end
end
@@@


When I run this under Rails 2.3.2 or 2.3-stable, I see the following.

@@@
$ curl http://localhost:3002/lines
curl: (18) transfer closed with outstanding read data remaining
@@@


If I hit this with a browser I see only the first line.

This is line 0


When I run this under Rails 2.2.2 I see the following response.

@@@
$ curl http://localhost:3002/lines
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9
@@@

For reference, I also started a discussion about this issue on stackoverflow, where I was asked to post a new bug ticket here.
http://stackoverflow.com/questions/1100443/rails-render-text-proc-in-2-2-2-versus-2-3-2</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;[Note: I am aware of &lt;a href=&quot;/projects/8994/tickets/2873&quot; title=&quot;Ticket #2873&quot;&gt;#2873&lt;/a&gt;. I don't believe that it's the same
bug.]&lt;/p&gt;
&lt;p&gt;In Rails 2.3.2 and also Rails 2.3-stable (as of July 08, 2009
when I checked it) I am having a problem with render :text =&amp;gt;
proc {}&lt;/p&gt;
&lt;p&gt;I created a new application with a single controller and a
single action. The contents of the action are straight out of the
online docs for render.&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
class LinesController &amp;lt; ApplicationController
  def show
    respond_to do |format|
      format.html { render :text =&amp;gt; proc {|response, output|
          10.times do |i|
            output.write(&amp;quot;This is line #{i}\n&amp;quot;)
            output.flush
          end
        }
      }
    end
  end
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When I run this under Rails 2.3.2 or 2.3-stable, I see the
following.&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
$ curl http://localhost:3002/lines
curl: (18) transfer closed with outstanding read data remaining
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If I hit this with a browser I see only the first line.&lt;/p&gt;
&lt;p&gt;This is line 0&lt;/p&gt;
&lt;p&gt;When I run this under Rails 2.2.2 I see the following
response.&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
$ curl http://localhost:3002/lines
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For reference, I also started a discussion about this issue on
stackoverflow, where I was asked to post a new bug ticket here.
&lt;a href=&quot;http://stackoverflow.com/questions/1100443/rails-render-text-proc-in-2-2-2-versus-2-3-2&quot;&gt;
http://stackoverflow.com/questio...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[Note: I am aware of #2873.  I don't believe that it's the same bug.]

In Rails 2.3.2 and also Rails 2.3-stable (as of July 08, 2009 when I checked it) I am having a problem with render :text =&gt; proc {}

I created a new application with a single controller and a single action.  The contents of the action are straight out of the online docs for render.

@@@
class LinesController &lt; ApplicationController
  def show
    respond_to do |format|
      format.html { render :text =&gt; proc {|response, output|
          10.times do |i|
            output.write(&quot;This is line #{i}\n&quot;)
            output.flush
          end
        }
      }
    end
  end
end
@@@


When I run this under Rails 2.3.2 or 2.3-stable, I see the following.

@@@
$ curl http://localhost:3002/lines
curl: (18) transfer closed with outstanding read data remaining
@@@


If I hit this with a browser I see only the first line.

This is line 0




When I run this under Rails 2.2.2 I see the following response.
@@@
$ curl http://localhost:3002/lines
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9
@@@

For reference, I also started a discussion about this issue on stackoverflow, where I was asked to post a new bug ticket here.
http://stackoverflow.com/questions/1100443/rails-render-text-proc-in-2-2-2-versus-2-3-2


My local system:

OS X 10.5

$ ruby -v

ruby 1.8.6 (2008-03-03 patchlevel 114) [i686-darwin9.3.0]

I tried this with both mongrel and passenger as well.</body>
      <body-html>&lt;div&gt;&lt;p&gt;[Note: I am aware of &lt;a href=&quot;/projects/8994/tickets/2873&quot;
title=&quot;Ticket #2873&quot;&gt;#2873&lt;/a&gt;. I don't believe that it's the same
bug.]&lt;/p&gt;
&lt;p&gt;In Rails 2.3.2 and also Rails 2.3-stable (as of July 08, 2009
when I checked it) I am having a problem with render :text =&amp;gt;
proc {}&lt;/p&gt;
&lt;p&gt;I created a new application with a single controller and a
single action. The contents of the action are straight out of the
online docs for render.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class LinesController &amp;lt; ApplicationController
  def show
    respond_to do |format|
      format.html { render :text =&amp;gt; proc {|response, output|
          10.times do |i|
            output.write(&quot;This is line #{i}\n&quot;)
            output.flush
          end
        }
      }
    end
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;When I run this under Rails 2.3.2 or 2.3-stable, I see the
following.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ curl http://localhost:3002/lines
curl: (18) transfer closed with outstanding read data remaining&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;If I hit this with a browser I see only the first line.&lt;/p&gt;
&lt;p&gt;This is line 0&lt;/p&gt;
&lt;p&gt;When I run this under Rails 2.2.2 I see the following
response.&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ curl http://localhost:3002/lines
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;For reference, I also started a discussion about this issue on
stackoverflow, where I was asked to post a new bug ticket here.&lt;br&gt;
&lt;a href=
&quot;http://stackoverflow.com/questions/1100443/rails-render-text-proc-in-2-2-2-versus-2-3-2&quot;&gt;
http://stackoverflow.com/questions/1100443/rails-render-text-proc-i...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;My local system:&lt;/p&gt;
&lt;p&gt;OS X 10.5&lt;/p&gt;
&lt;p&gt;$ ruby -v&lt;/p&gt;
&lt;p&gt;ruby 1.8.6 (2008-03-03 patchlevel 114) [i686-darwin9.3.0]&lt;/p&gt;
&lt;p&gt;I tried this with both mongrel and passenger as well.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-09T14:20:25+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-07-09T14:24:09+01:00</updated-at>
      <user-id type="integer">24712</user-id>
      <version type="integer">1</version>
      <user-name>JDL</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-03T06:08:50+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2-3-stable 2.3.2 render
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-03T06:08:55+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">2</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7211</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Code above throw error:

&lt;pre&gt; &lt;H1&gt;Internal Server Error&lt;/H1&gt;
    undefined method `flush' for #&amp;lt;ActionController::Response:0x00000002bf4300&amp;gt;
&lt;/pre&gt;

ActionController::Response doesn't contain method _response_ .

Without output.flush code works:

&lt;pre&gt;curl http://localhost:3000/lines/show
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Code above throw error:&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h1&gt;Internal Server Error&lt;/h1&gt;
&lt;pre&gt;

    undefined method `flush' for #&amp;lt;ActionController::Response:0x00000002bf4300&amp;gt;
&lt;/pre&gt;
&lt;p&gt;ActionController::Response doesn't contain method
&lt;em&gt;response&lt;/em&gt; .&lt;/p&gt;
&lt;p&gt;Without output.flush code works:&lt;/p&gt;
&lt;pre&gt;
curl http://localhost:3000/lines/show
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T11:42:14+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T11:42:19+01:00</updated-at>
      <user-id type="integer">64156</user-id>
      <version type="integer">3</version>
      <user-name>Nikolay Petrachkov </user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>CancelProfileIsBroken</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T12:29:47+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 7211
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T12:29:52+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">4</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Verified with 2-3-stable, used the same example and it breaks with both a proc and lambda.

@@@
2893 master % curl http://localhost:3000/lines/show
This is line 0
curl: (18) transfer closed with outstanding read data remaining
@@@

@@@
Processing LinesController#show (for 127.0.0.1 at 2009-08-08 10:39:05) [GET]
Completed in 3ms (View: 1, DB: 0) | 200 OK [http://localhost/lines/show]
Sat Aug 08 10:39:05 -0400 2009: Read error: #&lt;NoMethodError: undefined method `flush' for #&lt;ActionController::Response:0x2915b34&gt;&gt;
/Users/qrush/Dev/bugmash/2893/app/controllers/lines_controller.rb:8:in `show'
/Users/qrush/Dev/bugmash/2893/app/controllers/lines_controller.rb:6:in `times'
/Users/qrush/Dev/bugmash/2893/app/controllers/lines_controller.rb:6:in `show'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/response.rb:153:in `call'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/response.rb:153:in `each'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/reloader.rb:21:in `send'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/reloader.rb:21:in `method_missing'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:37:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:74:in `process'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/Users/qrush/Dev/bugmash/2893/vendor/rails/railties/lib/commands/server.rb:111
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
@@@

This definitely works with 2-2-stable for me as well:

@@@
2893 master % curl http://localhost:3000/lines/show
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified with 2-3-stable, used the same example and it breaks
with both a proc and lambda.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;2893 master % curl http://localhost:3000/lines/show
This is line 0
curl: (18) transfer closed with outstanding read data remaining&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;Processing LinesController#show (for 127.0.0.1 at 2009-08-08 10:39:05) [GET]
Completed in 3ms (View: 1, DB: 0) | 200 OK [http://localhost/lines/show]
Sat Aug 08 10:39:05 -0400 2009: Read error: #&amp;lt;NoMethodError: undefined method `flush' for #&amp;lt;ActionController::Response:0x2915b34&amp;gt;&amp;gt;
/Users/qrush/Dev/bugmash/2893/app/controllers/lines_controller.rb:8:in `show'
/Users/qrush/Dev/bugmash/2893/app/controllers/lines_controller.rb:6:in `times'
/Users/qrush/Dev/bugmash/2893/app/controllers/lines_controller.rb:6:in `show'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/response.rb:153:in `call'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/response.rb:153:in `each'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/reloader.rb:21:in `send'
/Users/qrush/Dev/bugmash/2893/vendor/rails/actionpack/lib/action_controller/reloader.rb:21:in `method_missing'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:37:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:74:in `process'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/opt/local/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/Users/qrush/Dev/bugmash/2893/vendor/rails/railties/lib/commands/server.rb:111
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This definitely works with 2-2-stable for me as well:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;2893 master % curl http://localhost:3000/lines/show
This is line 0
This is line 1
This is line 2
This is line 3
This is line 4
This is line 5
This is line 6
This is line 7
This is line 8
This is line 9&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T15:43:19+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T15:43:25+01:00</updated-at>
      <user-id type="integer">31296</user-id>
      <version type="integer">5</version>
      <user-name>Nick Quaranto</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Verified, as I was watching over Nick's shoulder.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified, as I was watching over Nick's shoulder.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T17:34:37+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T17:34:43+01:00</updated-at>
      <user-id type="integer">10504</user-id>
      <version type="integer">6</version>
      <user-name>Josh Nichols</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Looks like ActionController already supports this. From actionpack/test/controller/rack_test.rb:


@@@ ruby
  def test_streaming_block
    @response.body = Proc.new do |response, output|
      5.times { |n| output.write(n) }
    end
    @response.prepare!

    status, headers, body = @response.to_a
    assert_equal 200, status
    assert_equal({
      &quot;Content-Type&quot; =&gt; &quot;text/html; charset=utf-8&quot;,
      &quot;Cache-Control&quot; =&gt; &quot;no-cache&quot;,
      &quot;Set-Cookie&quot; =&gt; &quot;&quot;
    }, headers)

    parts = []
    body.each { |part| parts &lt;&lt; part }
    assert_equal [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;], parts
  end
@@@

Josh and I have prepared a patch that implements flush on ActionController::Response and warns the user about this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Looks like ActionController already supports this. From
actionpack/test/controller/rack_test.rb:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;  def test_streaming_block
    @response.body = Proc.new do |response, output|
      5.times { |n| output.write(n) }
    end
    @response.prepare!

    status, headers, body = @response.to_a
    assert_equal 200, status
    assert_equal({
      &quot;Content-Type&quot; =&amp;gt; &quot;text/html; charset=utf-8&quot;,
      &quot;Cache-Control&quot; =&amp;gt; &quot;no-cache&quot;,
      &quot;Set-Cookie&quot; =&amp;gt; &quot;&quot;
    }, headers)

    parts = []
    body.each { |part| parts &amp;lt;&amp;lt; part }
    assert_equal [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;], parts
  end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Josh and I have prepared a patch that implements flush on
ActionController::Response and warns the user about this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T17:54:16+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T17:54:18+01:00</updated-at>
      <user-id type="integer">31296</user-id>
      <version type="integer">7</version>
      <user-name>Nick Quaranto</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 on the patch. It giving a deprecation warning seems the most reasonable, since chunking already happens without it, so just warning will give the user a heads up that they can safely remove it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 on the patch. It giving a deprecation warning seems the most
reasonable, since chunking already happens without it, so just
warning will give the user a heads up that they can safely remove
it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T18:01:48+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T18:01:51+01:00</updated-at>
      <user-id type="integer">10504</user-id>
      <version type="integer">8</version>
      <user-name>Josh Nichols</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T18:08:01+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T18:08:02+01:00</updated-at>
      <user-id type="integer">21518</user-id>
      <version type="integer">9</version>
      <user-name>Brian Cardarella</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T18:38:59+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T18:39:00+01:00</updated-at>
      <user-id type="integer">12946</user-id>
      <version type="integer">10</version>
      <user-name>Sam Goldstein</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Adding Yehuda to notifications.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Adding Yehuda to notifications.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T18:49:48+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T18:49:51+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">11</version>
      <user-name>Pratik</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 Patch works.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 Patch works.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T19:05:54+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T19:05:58+01:00</updated-at>
      <user-id type="integer">64156</user-id>
      <version type="integer">12</version>
      <user-name>Nikolay Petrachkov </user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Looks like this is an issue with Rails 3.0 as well, and since the Response class is now under ActionDispatch it needed a new patch. Here's patches for both 2-3-stable and master.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Looks like this is an issue with Rails 3.0 as well, and since
the Response class is now under ActionDispatch it needed a new
patch. Here's patches for both 2-3-stable and master.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T19:55:44+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T19:55:49+01:00</updated-at>
      <user-id type="integer">31296</user-id>
      <version type="integer">13</version>
      <user-name>Nick Quaranto</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>+1 confirmed test and patch apply in both 2-3-stable and master (rake test_action_pack is clean in both branches)</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 confirmed test and patch apply in both 2-3-stable and master
(rake test_action_pack is clean in both branches)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T20:04:13+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T20:04:16+01:00</updated-at>
      <user-id type="integer">10900</user-id>
      <version type="integer">14</version>
      <user-name>Dan Croak</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>+1 and I verified Nick's patch applies cleanly to master - patch applies and suite passes</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 and I verified Nick's patch applies cleanly to master - patch
applies and suite passes&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T20:09:42+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T20:09:45+01:00</updated-at>
      <user-id type="integer">22242</user-id>
      <version type="integer">15</version>
      <user-name>Dan Pickett</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Could you update the docs to omit the flush call?

Then only 2-3-stable needs the deprecation warning and master is fine as-is.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you update the docs to omit the flush call?&lt;/p&gt;
&lt;p&gt;Then only 2-3-stable needs the deprecation warning and master is
fine as-is.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T23:04:46+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T23:04:54+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">16</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Removed the flush call from the docs.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Removed the flush call from the docs.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T23:15:31+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable 2.3.2 bugmash render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-08T23:15:34+01:00</updated-at>
      <user-id type="integer">31296</user-id>
      <version type="integer">17</version>
      <user-name>Nick Quaranto</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>2-3-stable: d39c45690e501e7572de2f70f68224bc95e6bf01</body>
      <body-html>&lt;div&gt;&lt;p&gt;2-3-stable: d39c45690e501e7572de2f70f68224bc95e6bf01&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T01:24:28+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2-3-stable 2.3.2 bugmash render
:state: open
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable 2.3.2 render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-09T01:24:33+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">18</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Thank you very much to everyone who worked on this.  I really appreciate it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thank you very much to everyone who worked on this. I really
appreciate it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T03:27:57+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable 2.3.2 render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-09T03:27:59+01:00</updated-at>
      <user-id type="integer">24712</user-id>
      <version type="integer">19</version>
      <user-name>JDL</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [d39c45690e501e7572de2f70f68224bc95e6bf01]) Adding a deprecation warning for output.flush when rendering a proc or lambda

[#2893 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/d39c45690e501e7572de2f70f68224bc95e6bf01</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/d39c45690e501e7572de2f70f68224bc95e6bf01&quot;
title=
&quot;Changeset [d39c45690e501e7572de2f70f68224bc95e6bf01]&quot;&gt;[d39c45690e501e7572de2f70f68224bc95e6bf01]&lt;/a&gt;)
Adding a deprecation warning for output.flush when rendering a proc
or lambda&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2893&quot; title=
&quot;Ticket #2893&quot;&gt;#2893&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/d39c45690e501e7572de2f70f68224bc95e6bf01&quot;&gt;
http://github.com/rails/rails/commit/d39c45690e501e7572de2f70f68224...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T05:24:46+01:00</created-at>
      <creator-id type="integer">24712</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2893</number>
      <permalink>rails-23x-render-text-proc-problems-with-output-buffer</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable 2.3.2 render</tag>
      <title>Rails 2.3.x - &quot;render :text =&gt; proc&quot; - problems with output buffer</title>
      <updated-at type="datetime">2009-08-09T05:24:48+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">20</version>
      <user-name>Repository</user-name>
      <creator-name>JDL</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2893</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>db05f1915afa46d9bf32b7635ae9526de2722fb3</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-08T19:55:44+01:00</created-at>
      <filename>output_flush_when_rendering_procs_on_2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239110</id>
      <size type="integer">2158</size>
      <uploader-id type="integer">31296</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239110/output_flush_when_rendering_procs_on_2-3-stable.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>f7e328b0441115594d5e8566047f9336f021f6ac</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-08T19:55:45+01:00</created-at>
      <filename>output_flush_when_rendering_procs_on_master.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239111</id>
      <size type="integer">1981</size>
      <uploader-id type="integer">31296</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239111/output_flush_when_rendering_procs_on_master.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>d50fc7bd5e8e44f1b2b827ffb9d2599f0895e2d6</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-08T23:15:32+01:00</created-at>
      <filename>0001-Adding-a-deprecation-warning-for-output.flush-when-r.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239199</id>
      <size type="integer">2695</size>
      <uploader-id type="integer">31296</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239199/0001-Adding-a-deprecation-warning-for-output.flush-when-r.patch</url>
    </attachment>
  </attachments>
</ticket>
