<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-02-18T08:26:48+00:00</created-at>
  <creator-id type="integer">63428</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">3988</number>
  <permalink>patch</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>hold</state>
  <tag>patch</tag>
  <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
  <updated-at type="datetime">2010-10-15T23:01:45+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">20</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>andyjeffries</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>Having got quite used to Rails.root returning a Pathname object to allow easy concatenation of paths, I noticed that Rails.public_path doesn't.  I checked in 2.3.5 and master and it's not in either case.

Am I missing something?  Is there a reason for the inconsistency that I'm unaware of?

I've attached a patch (at Ryan Bigg's suggestion on rails-core) that deprecates public_path and makes a new public method that returns a Pathname (at Nick Quaranto's suggestion on rails-core).</original-body>
  <latest-body>Having got quite used to Rails.root returning a Pathname object to allow easy concatenation of paths, I noticed that Rails.public_path doesn't.  I checked in 2.3.5 and master and it's not in either case.

Am I missing something?  Is there a reason for the inconsistency that I'm unaware of?

I've attached a patch (at Ryan Bigg's suggestion on rails-core) that deprecates public_path and makes a new public method that returns a Pathname (at Nick Quaranto's suggestion on rails-core).</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Having got quite used to Rails.root returning a Pathname object
to allow easy concatenation of paths, I noticed that
Rails.public_path doesn't. I checked in 2.3.5 and master and it's
not in either case.&lt;/p&gt;
&lt;p&gt;Am I missing something? Is there a reason for the inconsistency
that I'm unaware of?&lt;/p&gt;
&lt;p&gt;I've attached a patch (at Ryan Bigg's suggestion on rails-core)
that deprecates public_path and makes a new public method that
returns a Pathname (at Nick Quaranto's suggestion on
rails-core).&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Having got quite used to Rails.root returning a Pathname object to allow easy concatenation of paths, I noticed that Rails.public_path doesn't.  I checked in 2.3.5 and master and it's not in either case.

Am I missing something?  Is there a reason for the inconsistency that I'm unaware of?

I've attached a patch (at Ryan Bigg's suggestion on rails-core) that deprecates public_path and makes a new public method that returns a Pathname (at Nick Quaranto's suggestion on rails-core).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Having got quite used to Rails.root returning a Pathname object
to allow easy concatenation of paths, I noticed that
Rails.public_path doesn't. I checked in 2.3.5 and master and it's
not in either case.&lt;/p&gt;
&lt;p&gt;Am I missing something? Is there a reason for the inconsistency
that I'm unaware of?&lt;/p&gt;
&lt;p&gt;I've attached a patch (at Ryan Bigg's suggestion on rails-core)
that deprecates public_path and makes a new public method that
returns a Pathname (at Nick Quaranto's suggestion on
rails-core).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-18T08:26:48+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] </title>
      <updated-at type="datetime">2010-02-18T08:26:50+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">1</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Fixed the title.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Fixed the title.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-20T18:13:48+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- 
:title: &quot;[PATCH] &quot;
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-20T18:13:51+00:00</updated-at>
      <user-id type="integer">22589</user-id>
      <version type="integer">2</version>
      <user-name>Matt Jones</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-23T21:29:11+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-23T21:29:14+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">3</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hey Andy, thanks for looking at this. Can I propose a different solution though?

In Rails 3, all your application paths are configurable using the config.paths method. So, the proper fix to this issue is indeed deprecate Rails.public_path, but however it should point to config.paths.public.

This is the method which defines the paths:

http://github.com/rails/rails/blob/master/railties/lib/rails/application/configuration.rb#L25

As you can see, it calls super, which gets the paths definitions from the engine:

http://github.com/rails/rails/blob/master/railties/lib/rails/engine/configuration.rb#L13

All you need to do is define paths.public, deprecate Rails.public_path as you already did and ensure tests pass. Are you in mood for trying a new patch then?

Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Andy, thanks for looking at this. Can I propose a different
solution though?&lt;/p&gt;
&lt;p&gt;In Rails 3, all your application paths are configurable using
the config.paths method. So, the proper fix to this issue is indeed
deprecate Rails.public_path, but however it should point to
config.paths.public.&lt;/p&gt;
&lt;p&gt;This is the method which defines the paths:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/rails/rails/blob/master/railties/lib/rails/application/configuration.rb#L25&quot;&gt;
http://github.com/rails/rails/blob/master/railties/lib/rails/applic...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;As you can see, it calls super, which gets the paths definitions
from the engine:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/rails/rails/blob/master/railties/lib/rails/engine/configuration.rb#L13&quot;&gt;
http://github.com/rails/rails/blob/master/railties/lib/rails/engine...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;All you need to do is define paths.public, deprecate
Rails.public_path as you already did and ensure tests pass. Are you
in mood for trying a new patch then?&lt;/p&gt;
&lt;p&gt;Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T10:58:37+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T10:58:38+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">4</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Sure Jos&#233;, I want to start contributing to Rails so I'll definitely try it the new way.  I'll have a go at whipping something up today.  Thanks for the hints.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sure Jos&amp;eacute;, I want to start contributing to Rails so I'll
definitely try it the new way. I'll have a go at whipping something
up today. Thanks for the hints.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T11:01:53+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T11:01:54+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">5</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>You're welcome! If you need any help, post here and I will reply as soon as possible.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You're welcome! If you need any help, post here and I will reply
as soon as possible.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T11:11:07+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T11:11:09+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">6</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've tried to rework the patch, but I fail.  The tests all pass except for a couple of metal ones (where it seems to return the index.html content - not sure that's me).

However, when I try to use stylesheet_link_tag (to test that asset_tag_helper is working) it throws a Nil exception (because Rails.public returns nil at that point).

I'm a bit stuck for why now, as this is my first real look in to Rails and I'm not sure of the startup order.

If you could have a look at my patch and make any suggestions as to where I'm going wrong, I'd appreciate it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've tried to rework the patch, but I fail. The tests all pass
except for a couple of metal ones (where it seems to return the
index.html content - not sure that's me).&lt;/p&gt;
&lt;p&gt;However, when I try to use stylesheet_link_tag (to test that
asset_tag_helper is working) it throws a Nil exception (because
Rails.public returns nil at that point).&lt;/p&gt;
&lt;p&gt;I'm a bit stuck for why now, as this is my first real look in to
Rails and I'm not sure of the startup order.&lt;/p&gt;
&lt;p&gt;If you could have a look at my patch and make any suggestions as
to where I'm going wrong, I'd appreciate it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T12:57:52+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T12:57:56+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">7</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Andy, you get it right. The problem is with the load order. What you will need to do is to create a new initializer in &quot;actionpack/lib/action_controller/railtie.rb&quot; which sets the @@page_cache_directory. Something like:

    initializer &quot;action_controller.set_page_cache_directory&quot; do |app|
      ActionController::Base.page_cache_directory = app.config.paths.public.to_a.first
    end

Instead &quot;app.config.paths.public.to_a.first&quot;, you may also do &quot;Rails.public&quot; as well. Good work so far!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Andy, you get it right. The problem is with the load order. What
you will need to do is to create a new initializer in
&quot;actionpack/lib/action_controller/railtie.rb&quot; which sets the
@@page_cache_directory. Something like:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;initializer &quot;action_controller.set_page_cache_directory&quot; do |app|
  ActionController::Base.page_cache_directory = app.config.paths.public.to_a.first
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Instead &quot;app.config.paths.public.to_a.first&quot;, you may also do
&quot;Rails.public&quot; as well. Good work so far!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:03:56+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:03:58+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">8</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>It appears the metal failures (which now it becomes important I'll list them - test_multiple_metal_endpoints and test_single_metal_endpoint) are me as a vanilla master checkout passes them.

However this simple metal works fine:

# Allow the metal piece to run in isolation
require File.expand_path('../../../config/environment',  __FILE__) unless defined?(Rails)

class Test
  def self.call(env)
    if env[&quot;PATH_INFO&quot;] =~ /^\/test\-metal/
      [200, {&quot;Content-Type&quot; =&gt; &quot;text/html&quot;}, [&quot;Hello, World!&quot;]]
    else
      [404, {&quot;Content-Type&quot; =&gt; &quot;text/html&quot;, &quot;X-Cascade&quot; =&gt; &quot;pass&quot;}, [&quot;Not Found&quot;]]
    end
  end
end</body>
      <body-html>&lt;div&gt;&lt;p&gt;It appears the metal failures (which now it becomes important
I'll list them - test_multiple_metal_endpoints and
test_single_metal_endpoint) are me as a vanilla master checkout
passes them.&lt;/p&gt;
&lt;p&gt;However this simple metal works fine:&lt;/p&gt;
&lt;h1&gt;Allow the metal piece to run in isolation&lt;/h1&gt;
&lt;p&gt;require File.expand_path('../../../config/environment',
&lt;strong&gt;FILE&lt;/strong&gt;) unless defined?(Rails)&lt;/p&gt;
&lt;p&gt;class Test&lt;br&gt;
def self.call(env)&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;if env[&quot;PATH_INFO&quot;] =~ /^\/test\-metal/
  [200, {&quot;Content-Type&quot; =&amp;gt; &quot;text/html&quot;}, [&quot;Hello, World!&quot;]]
else
  [404, {&quot;Content-Type&quot; =&amp;gt; &quot;text/html&quot;, &quot;X-Cascade&quot; =&amp;gt; &quot;pass&quot;}, [&quot;Not Found&quot;]]
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end end&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:05:30+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:05:34+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">9</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Jos&#233; Thanks for that, I guess it's a hint rather than the whole solution, but I can't tell how to apply it to AssetTagHelper?

The helpers are all autoloaded, so they should only be defined on first access.  That shouldn't happen until after the Rails module is defined, right?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jos&amp;eacute; Thanks for that, I guess it's a hint rather than the
whole solution, but I can't tell how to apply it to
AssetTagHelper?&lt;/p&gt;
&lt;p&gt;The helpers are all autoloaded, so they should only be defined
on first access. That shouldn't happen until after the Rails module
is defined, right?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:15:18+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:15:19+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">10</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Imagine that I have a gem that extends AssetTagHelper. I will load it before the application is loaded. In other words, AssetTagHelper can be loaded before the application is defined.

The best solution is to refactor AssertTagHelper to use something like public_path or page_cache_directory as well, that we can also be set in the Railtie.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Imagine that I have a gem that extends AssetTagHelper. I will
load it before the application is loaded. In other words,
AssetTagHelper can be loaded before the application is defined.&lt;/p&gt;
&lt;p&gt;The best solution is to refactor AssertTagHelper to use
something like public_path or page_cache_directory as well, that we
can also be set in the Railtie.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:18:51+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:18:53+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">11</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Oh man alive, this is turning out in to quite a job for my first little patch to dip my toes in!

I'll have a bit of a deeper look at this problem next week then.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Oh man alive, this is turning out in to quite a job for my first
little patch to dip my toes in!&lt;/p&gt;
&lt;p&gt;I'll have a bit of a deeper look at this problem next week
then.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:32:26+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:32:27+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">12</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Sure! Fell free to make different patches too. You can have one to make AssetTagHelper more modular and then have a second patch which changes Rails.public_path.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sure! Fell free to make different patches too. You can have one
to make AssetTagHelper more modular and then have a second patch
which changes Rails.public_path.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:36:16+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:36:17+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">13</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>If you're willing to offer help to a new developer like this, it might be better to take it to email/MSN rather than fill up lighthouse with it.  My email address is andy@andyjeffries.co.uk and MSN is passport@andyjeffries.co.uk</body>
      <body-html>&lt;div&gt;&lt;p&gt;If you're willing to offer help to a new developer like this, it
might be better to take it to email/MSN rather than fill up
lighthouse with it. My email address is &lt;a href=
&quot;mailto:andy@andyjeffries.co.uk&quot;&gt;andy@andyjeffries.co.uk&lt;/a&gt; and
MSN is &lt;a href=
&quot;mailto:passport@andyjeffries.co.uk&quot;&gt;passport@andyjeffries.co.uk&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:37:47+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:37:48+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">14</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The pros of having it in Lighthouse is that it may help other people as well to understand how Rails works. Anyway, I send you an e-mail in case you want to continue by e-mail. Both ways work for me.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The pros of having it in Lighthouse is that it may help other
people as well to understand how Rails works. Anyway, I send you an
e-mail in case you want to continue by e-mail. Both ways work for
me.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-26T13:39:55+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-26T13:39:57+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">15</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I guess it might be a good idea to continue the discussion here. I find that I learn a lot just by following on the discussion.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I guess it might be a good idea to continue the discussion here.
I find that I learn a lot just by following on the discussion.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-28T07:51:23+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-02-28T07:51:24+00:00</updated-at>
      <user-id type="integer">22631</user-id>
      <version type="integer">16</version>
      <user-name>siong1987</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>It seems that Carl was faster and already refactored the whole configuration stuff. What's left is just to deprecate the public_path method (no need to add a Rails.public method).</body>
      <body-html>&lt;div&gt;&lt;p&gt;It seems that Carl was faster and already refactored the whole
configuration stuff. What's left is just to deprecate the
public_path method (no need to add a Rails.public method).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-05T14:46:18+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-03-05T14:46:21+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">17</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>OK, never mind - he's probably done a better job than me anyway (mine still wasn't working).

Did you ever speak to the Core guys to see if they wanted public_path deprecating?


AJ</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK, never mind - he's probably done a better job than me anyway
(mine still wasn't working).&lt;/p&gt;
&lt;p&gt;Did you ever speak to the Core guys to see if they wanted
public_path deprecating?&lt;/p&gt;
&lt;p&gt;AJ&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-05T15:30:04+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-03-05T15:30:09+00:00</updated-at>
      <user-id type="integer">63428</user-id>
      <version type="integer">18</version>
      <user-name>andyjeffries</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I talked with Yehuda and he told me that they already have plans for Rails.public_path. I'm putting this on hold, I hope we will close it in a week or two. Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;I talked with Yehuda and he told me that they already have plans
for Rails.public_path. I'm putting this on hold, I hope we will
close it in a week or two. Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-03-05T20:56:39+00:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-03-05T20:56:43+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">19</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:45+01:00</created-at>
      <creator-id type="integer">63428</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3988</number>
      <permalink>patch</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>patch</tag>
      <title>[PATCH] Deprecate public_path and create 'public' method that returns a Pathname</title>
      <updated-at type="datetime">2010-10-15T23:01:45+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">20</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>andyjeffries</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3988</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>bc07d901beac2762ef52bfaeba6705eb24f7ce31</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-02-18T08:26:48+00:00</created-at>
      <filename>public_path_deprecated_and_to_pathname.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">416292</id>
      <size type="integer">1310</size>
      <uploader-id type="integer">63428</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/416292/public_path_deprecated_and_to_pathname.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>c93d68cec32a51995331ade1380c52959ddaa262</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-02-26T12:57:52+00:00</created-at>
      <filename>0001-andy_public_attempt1.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">426348</id>
      <size type="integer">6926</size>
      <uploader-id type="integer">63428</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/426348/0001-andy_public_attempt1.diff</url>
    </attachment>
  </attachments>
</ticket>
