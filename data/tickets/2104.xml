<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">85</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">false</closed>
  <created-at type="datetime">2009-02-28T23:53:35+00:00</created-at>
  <creator-id type="integer">8819</creator-id>
  <milestone-due-on type="datetime">2011-03-27T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">103410</milestone-id>
  <number type="integer">2104</number>
  <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
  <priority type="integer">2</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>open</state>
  <tag nil="true"></tag>
  <title>script/console execs irb, causes double process-launch and limits other impls</title>
  <updated-at type="datetime">2011-02-27T03:15:37+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">31</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Charles Oliver Nutter</creator-name>
  <assigned-user-name>Jeremy Kemper</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
  <milestone-title>3.0.6</milestone-title>
  <priority-name>Medium</priority-name>
  <original-body>Currently script/console (via railties/lib/commands/console.rb) launches the actual IRB session using exec and by default &quot;irb&quot;. However this causes problems for many reasons:

* Implementations may not have IRB installed as IRB; for example, in JRuby it's &quot;jirb&quot;, and I have Ruby 1.9 installed as irb1.9.
* For implementations with a slower process startup time, this penalizes them. JRuby has to start the JVM twice. On platforms or JVM versions with slow startup, this causes us to be doubly slow.
* On platforms where exec doesn't actually replace the calling process, this cases two processes to be in memory rather than just the one. This affects JRuby and running any impls on Windows.

The odd thing is that it doesn't appear that the exec is actually necessary. I'm attaching a patch that simply launches IRB from within the same process. This resolves all issues I list above. It may not be perfect but it should be a good starting point.

FWIW, the reason it works at all in JRuby is because we have long had a hack in &quot;exec&quot; logic that if the command being executed is &quot;irb&quot; we force it to run in the same JVM. But it's buggy, and we'd like to be able to get rid of that.</original-body>
  <latest-body>Currently script/console (via railties/lib/commands/console.rb) launches the actual IRB session using exec and by default &quot;irb&quot;. However this causes problems for many reasons:

* Implementations may not have IRB installed as IRB; for example, in JRuby it's &quot;jirb&quot;, and I have Ruby 1.9 installed as irb1.9.
* For implementations with a slower process startup time, this penalizes them. JRuby has to start the JVM twice. On platforms or JVM versions with slow startup, this causes us to be doubly slow.
* On platforms where exec doesn't actually replace the calling process, this cases two processes to be in memory rather than just the one. This affects JRuby and running any impls on Windows.

The odd thing is that it doesn't appear that the exec is actually necessary. I'm attaching a patch that simply launches IRB from within the same process. This resolves all issues I list above. It may not be perfect but it should be a good starting point.

FWIW, the reason it works at all in JRuby is because we have long had a hack in &quot;exec&quot; logic that if the command being executed is &quot;irb&quot; we force it to run in the same JVM. But it's buggy, and we'd like to be able to get rid of that.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Currently script/console (via railties/lib/commands/console.rb)
launches the actual IRB session using exec and by default &quot;irb&quot;.
However this causes problems for many reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Implementations may not have IRB installed as IRB; for example,
in JRuby it's &quot;jirb&quot;, and I have Ruby 1.9 installed as irb1.9.&lt;/li&gt;
&lt;li&gt;For implementations with a slower process startup time, this
penalizes them. JRuby has to start the JVM twice. On platforms or
JVM versions with slow startup, this causes us to be doubly
slow.&lt;/li&gt;
&lt;li&gt;On platforms where exec doesn't actually replace the calling
process, this cases two processes to be in memory rather than just
the one. This affects JRuby and running any impls on Windows.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The odd thing is that it doesn't appear that the exec is
actually necessary. I'm attaching a patch that simply launches IRB
from within the same process. This resolves all issues I list
above. It may not be perfect but it should be a good starting
point.&lt;/p&gt;
&lt;p&gt;FWIW, the reason it works at all in JRuby is because we have
long had a hack in &quot;exec&quot; logic that if the command being executed
is &quot;irb&quot; we force it to run in the same JVM. But it's buggy, and
we'd like to be able to get rid of that.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Currently script/console (via railties/lib/commands/console.rb) launches the actual IRB session using exec and by default &quot;irb&quot;. However this causes problems for many reasons:

* Implementations may not have IRB installed as IRB; for example, in JRuby it's &quot;jirb&quot;, and I have Ruby 1.9 installed as irb1.9.
* For implementations with a slower process startup time, this penalizes them. JRuby has to start the JVM twice. On platforms or JVM versions with slow startup, this causes us to be doubly slow.
* On platforms where exec doesn't actually replace the calling process, this cases two processes to be in memory rather than just the one. This affects JRuby and running any impls on Windows.

The odd thing is that it doesn't appear that the exec is actually necessary. I'm attaching a patch that simply launches IRB from within the same process. This resolves all issues I list above. It may not be perfect but it should be a good starting point.

FWIW, the reason it works at all in JRuby is because we have long had a hack in &quot;exec&quot; logic that if the command being executed is &quot;irb&quot; we force it to run in the same JVM. But it's buggy, and we'd like to be able to get rid of that.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Currently script/console (via railties/lib/commands/console.rb)
launches the actual IRB session using exec and by default &quot;irb&quot;.
However this causes problems for many reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Implementations may not have IRB installed as IRB; for example,
in JRuby it's &quot;jirb&quot;, and I have Ruby 1.9 installed as irb1.9.&lt;/li&gt;
&lt;li&gt;For implementations with a slower process startup time, this
penalizes them. JRuby has to start the JVM twice. On platforms or
JVM versions with slow startup, this causes us to be doubly
slow.&lt;/li&gt;
&lt;li&gt;On platforms where exec doesn't actually replace the calling
process, this cases two processes to be in memory rather than just
the one. This affects JRuby and running any impls on Windows.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The odd thing is that it doesn't appear that the exec is
actually necessary. I'm attaching a patch that simply launches IRB
from within the same process. This resolves all issues I list
above. It may not be perfect but it should be a good starting
point.&lt;/p&gt;
&lt;p&gt;FWIW, the reason it works at all in JRuby is because we have
long had a hack in &quot;exec&quot; logic that if the command being executed
is &quot;irb&quot; we force it to run in the same JVM. But it's buggy, and
we'd like to be able to get rid of that.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-28T23:53:35+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-02-28T23:53:37+00:00</updated-at>
      <user-id type="integer">8819</user-id>
      <version type="integer">1</version>
      <user-name>Charles Oliver Nutter</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I just noticed that the script/console script also requires config/boot, which means that the exec is also causing a second load of Rails and the application. So this fix would potentially improve the startup time of the console on all implementations.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I just noticed that the script/console script also requires
config/boot, which means that the exec is also causing a second
load of Rails and the application. So this fix would potentially
improve the startup time of the console on all implementations.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-28T23:58:00+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-02-28T23:58:06+00:00</updated-at>
      <user-id type="integer">8819</user-id>
      <version type="integer">2</version>
      <user-name>Charles Oliver Nutter</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [3b169cd693f45911ee71e26708fb9267811c8d83]) Speed up script/console by launching IRB directly.

[#2104 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/3b169cd693f45911ee71e26708fb9267811c8d83</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [3b169cd693f45911ee71e26708fb9267811c8d83]) Speed up
script/console by launching IRB directly.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2104&quot; title=&quot;Ticket #2104&quot;&gt;#2104&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/3b169cd693f45911ee71e26708fb9267811c8d83&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-01T01:04:46+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-01T01:04:47+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">3</version>
      <user-name>Repository</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Fix for the bug iffy mentions here: http://github.com/rails/rails/commit/3b169cd693f45911ee71e26708fb9267811c8d83#comments</body>
      <body-html>&lt;div&gt;&lt;p&gt;Fix for the bug iffy mentions here: &lt;a href=&quot;http://github.com/rails/rails/commit/3b169cd693f45911ee71e26708fb9267811c8d83#comments&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-02T01:38:42+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-02T01:38:47+00:00</updated-at>
      <user-id type="integer">47655</user-id>
      <version type="integer">4</version>
      <user-name>JasonKing</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-02T01:41:29+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-02T01:41:31+00:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">5</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [04fdb6eccb3a49b26bdbf779031f427da23a8bb4]) Revert &quot;Speed up script/console by launching IRB directly.&quot;

[#2104 state:open]

This reverts commit 3b169cd693f45911ee71e26708fb9267811c8d83.
http://github.com/rails/rails/commit/04fdb6eccb3a49b26bdbf779031f427da23a8bb4</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [04fdb6eccb3a49b26bdbf779031f427da23a8bb4]) Revert &quot;Speed
up script/console by launching IRB directly.&quot;&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2104&quot; title=&quot;Ticket #2104&quot;&gt;#2104&lt;/a&gt; state:open]&lt;/p&gt;
&lt;p&gt;This reverts commit 3b169cd693f45911ee71e26708fb9267811c8d83.
&lt;a href=&quot;http://github.com/rails/rails/commit/04fdb6eccb3a49b26bdbf779031f427da23a8bb4&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-02T03:04:51+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-02T03:04:52+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">6</version>
      <user-name>Repository</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I noticed the whole commit was reverted, even though a fix was proposed. Is there something else wrong with the change?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I noticed the whole commit was reverted, even though a fix was
proposed. Is there something else wrong with the change?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-03T14:43:21+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-03T14:43:24+00:00</updated-at>
      <user-id type="integer">8819</user-id>
      <version type="integer">7</version>
      <user-name>Charles Oliver Nutter</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The fix doesn't work. The environment has already been loaded by boot.rb at that point.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The fix doesn't work. The environment has already been loaded by
boot.rb at that point.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-03T16:45:10+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-03T16:45:11+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Umm, my fix does work, it moves the command line arg parsing into railties/bin/console before the boot is loaded.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Umm, my fix does work, it moves the command line arg parsing
into railties/bin/console before the boot is loaded.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-03T22:01:02+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-03T22:01:03+00:00</updated-at>
      <user-id type="integer">47655</user-id>
      <version type="integer">9</version>
      <user-name>JasonKing</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Sorry Jason, I misread your patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry Jason, I misread your patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-03T22:49:54+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-03T22:50:26+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">10</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Postponing this since existing apps' script/console will appear to work but load the wrong environment. Fixing it will require everyone to `rake rails:update:scripts` which hasn't been part of the 2.3 RC.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Postponing this since existing apps' script/console will appear
to work but load the wrong environment. Fixing it will require
everyone to &lt;code&gt;rake rails:update:scripts&lt;/code&gt; which hasn't
been part of the 2.3 RC.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-08T20:32:27+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 24544
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-08T20:32:30+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">11</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Couldn't the new console behavior be added in a different file, and new script/console require that one instead? Then the old behavior would still work in existing apps and newly-generated apps would get the new behavior, starting up fastest, etc.

I'd really like to see this get into 2.3.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Couldn't the new console behavior be added in a different file,
and new script/console require that one instead? Then the old
behavior would still work in existing apps and newly-generated apps
would get the new behavior, starting up fastest, etc.&lt;/p&gt;
&lt;p&gt;I'd really like to see this get into 2.3.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-13T13:18:31+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-03-13T13:18:34+00:00</updated-at>
      <user-id type="integer">8819</user-id>
      <version type="integer">12</version>
      <user-name>Charles Oliver Nutter</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>hi, i wanted to add my 2 cents by saying that this issue should include the use of /usr/bin/env ruby sherbangs in multiple files. i need to be able to support a custom compiled ruby1.9 on production servers that use 1.8 system gems. unfortunately, console, dbconsole, and lots of other scripts use env to load (for me) the wrong ruby. 

i just returned from dhh and was inspired by his &quot;have it your way&quot; speech. in light of this, why can't we just have an optional RUBY_PATH constant that can be set explicitly if i need to. without it, the scripts do as expected, but if present, it just loads everything from that directory. this seems much cleaner and incurs less overhead than doing all manner of gyrations to &quot;detect&quot; ruby automagically. 

i guess i don't believe that convention over configuration means no explicit configuration at all. however implemented, it should be a clean one-line explicit statement.</body>
      <body-html>&lt;div&gt;&lt;p&gt;hi, i wanted to add my 2 cents by saying that this issue should
include the use of /usr/bin/env ruby sherbangs in multiple files. i
need to be able to support a custom compiled ruby1.9 on production
servers that use 1.8 system gems. unfortunately, console,
dbconsole, and lots of other scripts use env to load (for me) the
wrong ruby.&lt;/p&gt;
&lt;p&gt;i just returned from dhh and was inspired by his &quot;have it your
way&quot; speech. in light of this, why can't we just have an optional
RUBY_PATH constant that can be set explicitly if i need to. without
it, the scripts do as expected, but if present, it just loads
everything from that directory. this seems much cleaner and incurs
less overhead than doing all manner of gyrations to &quot;detect&quot; ruby
automagically.&lt;/p&gt;
&lt;p&gt;i guess i don't believe that convention over configuration means
no explicit configuration at all. however implemented, it should be
a clean one-line explicit statement.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-16T11:28:28+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: console irb jruby
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-05-16T11:28:32+01:00</updated-at>
      <user-id type="integer">57123</user-id>
      <version type="integer">13</version>
      <user-name>buddy12lbcat</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>ok. so not to be a whiner without a solution, i've patched my rails to do the following:
1) symlink /usr/local/ruby/bin -&gt; /usr/local/ruby/&lt;somerubyversion currently 1.9.1-p129&gt;/bin
2) replaced all /usr/bin/env ruby sherbangs with /usr/local/ruby/bin/ruby
3) added RUBY_PATH = '/usr/local/ruby/bin' to boot.rb
4) changed console.rb and other references to RUBY_PLATFORM to say irb = &quot;#{RUBY_PATH}/irb&quot; || RUBY_PLATFORM ... 

not sure if this is generalizeable to other systems, but it seems to take care of most of my issues and allows me to switch ruby versions with just the symlink. i kept the symlink off the usual paths so it doesn't screw with my production 1.8 gems/paths. at the very least this will give me experience maintaining my own rails patches via git clone/rebase. :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;ok. so not to be a whiner without a solution, i've patched my
rails to do the following:&lt;br&gt;
1) symlink /usr/local/ruby/bin -&amp;gt; /usr/local/ruby//bin&lt;br&gt;
2) replaced all /usr/bin/env ruby sherbangs with
/usr/local/ruby/bin/ruby&lt;br&gt;
3) added RUBY_PATH = '/usr/local/ruby/bin' to boot.rb&lt;br&gt;
4) changed console.rb and other references to RUBY_PLATFORM to say
irb = &quot;#{RUBY_PATH}/irb&quot; || RUBY_PLATFORM ...&lt;/p&gt;
&lt;p&gt;not sure if this is generalizeable to other systems, but it
seems to take care of most of my issues and allows me to switch
ruby versions with just the symlink. i kept the symlink off the
usual paths so it doesn't screw with my production 1.8 gems/paths.
at the very least this will give me experience maintaining my own
rails patches via git clone/rebase. :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-16T19:07:53+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-05-16T19:07:57+01:00</updated-at>
      <user-id type="integer">57123</user-id>
      <version type="integer">14</version>
      <user-name>buddy12lbcat</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>sorry looks like lighthouse monkeyed with my post. #1 should say: symlink /usr/local/ruby/bin -&gt; /usr/local/ruby/1.9.1-p129/bin</body>
      <body-html>&lt;div&gt;&lt;p&gt;sorry looks like lighthouse monkeyed with my post. &lt;a href=
&quot;/projects/8994/tickets/1&quot; title=&quot;Ticket #1&quot;&gt;#1&lt;/a&gt; should say:
symlink /usr/local/ruby/bin -&amp;gt;
/usr/local/ruby/1.9.1-p129/bin&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-16T19:11:13+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-05-16T19:11:15+01:00</updated-at>
      <user-id type="integer">57123</user-id>
      <version type="integer">15</version>
      <user-name>buddy12lbcat</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>ok. so maybe rails has done this before :) turns out that if you use rails -r /path/to/ruby it will reset all your shebangs. so don't need that. i have legacy code and don't run rails to create new projects at all so i missed that option. so that just leaves console using path/irb. i defer to the great oz that is rails core.</body>
      <body-html>&lt;div&gt;&lt;p&gt;ok. so maybe rails has done this before :) turns out that if you
use rails -r /path/to/ruby it will reset all your shebangs. so
don't need that. i have legacy code and don't run rails to create
new projects at all so i missed that option. so that just leaves
console using path/irb. i defer to the great oz that is rails
core.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-16T20:07:44+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2009-05-16T20:07:48+01:00</updated-at>
      <user-id type="integer">57123</user-id>
      <version type="integer">16</version>
      <user-name>buddy12lbcat</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:40+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-05-04T18:48:40+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">17</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Any updates to this ticket?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any updates to this ticket?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-17T07:11:34+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-06-17T07:11:43+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">18</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-17T18:48:33+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 71472
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-06-17T18:48:42+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">19</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/27625)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/27625&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-30T04:10:29+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-08-30T04:10:30+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">20</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-15T23:01:30+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 82861
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>console irb jruby ruby1.9</tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-10-15T23:01:30+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">21</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-19T08:33:23+01:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: console irb jruby ruby1.9
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-10-19T08:33:29+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">23</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-08T01:48:44+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-11-08T01:48:50+00:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">25</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/34349)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/34349&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-15T21:04:49+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 88038
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-11-15T21:04:49+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">26</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Any chance of getting this prioritized some day? JRuby itself starts up pretty fast, Rails less so...and with this double-booting it's almost unbearable.

Here's a gist showing the differing times from starting up IRB alone, IRB with RubyGems (with a tweak in my env to speed it up), IRB with RubyGems and boot.rb, and the Rails 3 console. Compared to IRB alone, Rails 3's console takes an order of magnitude longer to start up, and compared to IRB + boot.rb, it's almost 2x, as you'd expect from double-initializing.

https://gist.github.com/713286</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any chance of getting this prioritized some day? JRuby itself
starts up pretty fast, Rails less so...and with this double-booting
it's almost unbearable.&lt;/p&gt;
&lt;p&gt;Here's a gist showing the differing times from starting up IRB
alone, IRB with RubyGems (with a tweak in my env to speed it up),
IRB with RubyGems and boot.rb, and the Rails 3 console. Compared to
IRB alone, Rails 3's console takes an order of magnitude longer to
start up, and compared to IRB + boot.rb, it's almost 2x, as you'd
expect from double-initializing.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;https://gist.github.com/713286&quot;&gt;https://gist.github.com/713286&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-24T07:47:51+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-11-24T07:47:54+00:00</updated-at>
      <user-id type="integer">8819</user-id>
      <version type="integer">27</version>
      <user-name>Charles Oliver Nutter</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Also, to make it sound less snarky...I'd happily work with someone to get an acceptable patch put together.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Also, to make it sound less snarky...I'd happily work with
someone to get an acceptable patch put together.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-24T19:34:27+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-11-24T19:34:31+00:00</updated-at>
      <user-id type="integer">8819</user-id>
      <version type="integer">28</version>
      <user-name>Charles Oliver Nutter</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I haven't really begun digging around in Rails3 yet, but I'm pretty sure your benchmarks should be including `config/application.rb` not `config/boot.rb`.  I think you'll get much more similar times then because `boot.rb` is only doing the Bundler setup now.

You'll get more similar times because... I think your change has been included in Rails3 as part of their general improvements.  Looking in [railties/lib/rails/commands/console.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/commands/console.rb#L44) I see `IRB.start` now.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I haven't really begun digging around in Rails3 yet, but I'm
pretty sure your benchmarks should be including
&lt;code&gt;config/application.rb&lt;/code&gt; not &lt;code&gt;config/boot.rb&lt;/code&gt;.
I think you'll get much more similar times then because
&lt;code&gt;boot.rb&lt;/code&gt; is only doing the Bundler setup now.&lt;/p&gt;
&lt;p&gt;You'll get more similar times because... I think your change has
been included in Rails3 as part of their general improvements.
Looking in &lt;a href=
&quot;https://github.com/rails/rails/blob/master/railties/lib/rails/commands/console.rb#L44&quot;&gt;
railties/lib/rails/commands/console.rb&lt;/a&gt; I see
&lt;code&gt;IRB.start&lt;/code&gt; now.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-24T20:27:06+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2010-11-24T20:27:09+00:00</updated-at>
      <user-id type="integer">71709</user-id>
      <version type="integer">29</version>
      <user-name>Jason King</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/42275)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/42275&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-12T21:58:20+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 92071
</diffable-attributes>
      <milestone-id type="integer">101623</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2011-02-12T21:58:20+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">30</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>3.0.5</milestone-title>
      <priority-name>Medium</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/43692)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/43692&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-27T03:15:37+00:00</created-at>
      <creator-id type="integer">8819</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 101623
</diffable-attributes>
      <milestone-id type="integer">103410</milestone-id>
      <number type="integer">2104</number>
      <permalink>scriptconsole-execs-irb-causes-double-process-launch-and-limits-other-impls</permalink>
      <priority type="integer">2</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>script/console execs irb, causes double process-launch and limits other impls</title>
      <updated-at type="datetime">2011-02-27T03:15:37+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">31</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Charles Oliver Nutter</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2104</url>
      <milestone-title>3.0.6</milestone-title>
      <priority-name>Medium</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>03880dc7754b666bac71ff96ec91cef824bd111b</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-28T23:53:35+00:00</created-at>
      <filename>0001-Move-away-from-using-exec-to-launch-console.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">94413</id>
      <size type="integer">1652</size>
      <uploader-id type="integer">8819</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/94413/0001-Move-away-from-using-exec-to-launch-console.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>bf02dbd584bd679f0e7d7fe4672f7b5d000de967</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-02T01:38:42+00:00</created-at>
      <filename>console_env.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">94617</id>
      <size type="integer">1403</size>
      <uploader-id type="integer">47655</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/94617/console_env.diff</url>
    </attachment>
  </attachments>
</ticket>
