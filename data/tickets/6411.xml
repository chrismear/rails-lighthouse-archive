<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19117</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">false</closed>
  <created-at type="datetime">2011-02-11T09:30:57+00:00</created-at>
  <creator-id type="integer">104141</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6411</number>
  <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>open</state>
  <tag>action_pack action_view i18n</tag>
  <title>i18n fallback doesn't work for localized views</title>
  <updated-at type="datetime">2011-03-03T17:13:46+00:00</updated-at>
  <user-id type="integer">104141</user-id>
  <version type="integer">10</version>
  <user-name>Ola Tuvesson</user-name>
  <creator-name>Ola Tuvesson</creator-name>
  <assigned-user-name>Josh Kalderimis</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
  <priority-name>Low</priority-name>
  <original-body>Given that I have set i18n to fall back (e.g. from &quot;fr-Fr&quot; to just &quot;fr&quot;): 

I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks)

And I have created a localized view (e.g. /help/index.fr.html.erb)

When i18n locale is set to &quot;fr-FR&quot;, then the localized view is not found - yet the language file fr.yml is found. 

Can I monkey patch this somehow?</original-body>
  <latest-body>Given that I have set i18n to fall back (e.g. from &quot;fr-Fr&quot; to just &quot;fr&quot;): 

I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks)

And I have created a localized view (e.g. /help/index.fr.html.erb)

When i18n locale is set to &quot;fr-FR&quot;, then the localized view is not found - yet the language file fr.yml is found. 

Can I monkey patch this somehow?</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Given that I have set i18n to fall back (e.g. from &quot;fr-Fr&quot; to
just &quot;fr&quot;):&lt;/p&gt;
&lt;p&gt;I18n::Backend::Simple.send(:include,
I18n::Backend::Fallbacks)&lt;/p&gt;
&lt;p&gt;And I have created a localized view (e.g.
/help/index.fr.html.erb)&lt;/p&gt;
&lt;p&gt;When i18n locale is set to &quot;fr-FR&quot;, then the localized view is
not found - yet the language file fr.yml is found.&lt;/p&gt;
&lt;p&gt;Can I monkey patch this somehow?&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Given that I have set i18n to fall back (e.g. from &quot;fr-Fr&quot; to just &quot;fr&quot;): 

I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks)

And I have created a localized view (e.g. /help/index.fr.html.erb)

When i18n locale is set to &quot;fr-FR&quot;, then the localized view is not found - yet the language file fr.yml is found. 

Can I monkey patch this somehow?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Given that I have set i18n to fall back (e.g. from &quot;fr-Fr&quot; to
just &quot;fr&quot;):&lt;/p&gt;
&lt;p&gt;I18n::Backend::Simple.send(:include,
I18n::Backend::Fallbacks)&lt;/p&gt;
&lt;p&gt;And I have created a localized view (e.g.
/help/index.fr.html.erb)&lt;/p&gt;
&lt;p&gt;When i18n locale is set to &quot;fr-FR&quot;, then the localized view is
not found - yet the language file fr.yml is found.&lt;/p&gt;
&lt;p&gt;Can I monkey patch this somehow?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-11T09:30:57+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;i18n fallbacks views&quot;</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-11T09:30:59+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">1</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Could someone at least confirm if this is the expected behaviour or not?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could someone at least confirm if this is the expected behaviour
or not?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-12T05:54:57+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;i18n fallbacks views&quot;</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-12T05:54:58+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">2</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19117</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi Ola,

I have spoken to Jos&#233; about this issue and it does seem to be a bug when using I18n Fallbacks.

Thanks for reporting the issue, I will take a look at creating a patch for master this week.

Thanks,

Josh</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Ola,&lt;/p&gt;
&lt;p&gt;I have spoken to Jos&amp;eacute; about this issue and it does seem
to be a bug when using I18n Fallbacks.&lt;/p&gt;
&lt;p&gt;Thanks for reporting the issue, I will take a look at creating a
patch for master this week.&lt;/p&gt;
&lt;p&gt;Thanks,&lt;/p&gt;
&lt;p&gt;Josh&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-13T14:13:45+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:tag: &quot;\&quot;i18n fallbacks views\&quot;&quot;
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-13T14:13:52+00:00</updated-at>
      <user-id type="integer">19117</user-id>
      <version type="integer">3</version>
      <user-name>Josh Kalderimis</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name>Josh Kalderimis</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Thanks Josh! I need this as I'm working on a site which is available in both France and Canada, as well as in French language in other countries. So I en up with lots of language-country combinations; fr-FR, fr-CA, fr-CH, fr-UK - I really don't want to have separate help files for all of them!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks Josh! I need this as I'm working on a site which is
available in both France and Canada, as well as in French language
in other countries. So I en up with lots of language-country
combinations; fr-FR, fr-CA, fr-CH, fr-UK - I really don't want to
have separate help files for all of them!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-13T16:11:17+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 19117
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-13T16:11:25+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">4</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19117</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-13T17:49:48+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-13T17:49:59+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">5</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name>Josh Kalderimis</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19117</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>While waiting for this to be patched, does anyone have any suggestions how I might implement a temporary fix for this? I need to do a new release of my project within the next day or so and this has to include the help pages.</body>
      <body-html>&lt;div&gt;&lt;p&gt;While waiting for this to be patched, does anyone have any
suggestions how I might implement a temporary fix for this? I need
to do a new release of my project within the next day or so and
this has to include the help pages.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-17T12:51:39+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-17T12:51:46+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">6</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name>Josh Kalderimis</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19117</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hey Ola,

Sorry for the delay, http://travis-ci.org is eating up my time. I have one patch I need to attend to first, then this one.

The temp fix could be to check if the file exists and render it if it does, otherwise strip off the country portion. This is a hack and ugly controller code, but it should work.

Thanks,

Josh</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Ola,&lt;/p&gt;
&lt;p&gt;Sorry for the delay, &lt;a href=
&quot;http://travis-ci.org&quot;&gt;http://travis-ci.org&lt;/a&gt; is eating up my
time. I have one patch I need to attend to first, then this
one.&lt;/p&gt;
&lt;p&gt;The temp fix could be to check if the file exists and render it
if it does, otherwise strip off the country portion. This is a hack
and ugly controller code, but it should work.&lt;/p&gt;
&lt;p&gt;Thanks,&lt;/p&gt;
&lt;p&gt;Josh&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-17T12:57:38+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-17T12:57:46+00:00</updated-at>
      <user-id type="integer">19117</user-id>
      <version type="integer">7</version>
      <user-name>Josh Kalderimis</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name>Josh Kalderimis</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19117</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Thanks, that makes sense. But I was wondering which method it is I need to override? I've been digging around in the ActionView source, PathResolver and other places but I can't seem to locate the relevant locale based view lookup - though admittedly I'm not very well traveled in the Rails source. Could you drop me a hint? 

Cheers, 

Ola</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks, that makes sense. But I was wondering which method it is
I need to override? I've been digging around in the ActionView
source, PathResolver and other places but I can't seem to locate
the relevant locale based view lookup - though admittedly I'm not
very well traveled in the Rails source. Could you drop me a
hint?&lt;/p&gt;
&lt;p&gt;Cheers,&lt;/p&gt;
&lt;p&gt;Ola&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-18T09:22:25+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-18T09:22:34+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">8</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name>Josh Kalderimis</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19117</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>For example, putting this in an initializer does _not_ give me the German help view: 

module ActionView
  class LookupContex
    module Details
      def locale
        :de
      end
    end
  end
end</body>
      <body-html>&lt;div&gt;&lt;p&gt;For example, putting this in an initializer does &lt;em&gt;not&lt;/em&gt;
give me the German help view:&lt;/p&gt;
&lt;p&gt;module ActionView&lt;br&gt;
class LookupContex&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;module Details
  def locale
    :de
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end end&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-18T10:23:21+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-02-18T10:23:31+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">9</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name>Josh Kalderimis</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19117</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Any thoughts on this, anyone?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any thoughts on this, anyone?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-03T17:13:39+00:00</created-at>
      <creator-id type="integer">104141</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6411</number>
      <permalink>i18n-fallback-doesnt-work-for-localized-views</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>action_pack action_view i18n</tag>
      <title>i18n fallback doesn't work for localized views</title>
      <updated-at type="datetime">2011-03-03T17:13:46+00:00</updated-at>
      <user-id type="integer">104141</user-id>
      <version type="integer">10</version>
      <user-name>Ola Tuvesson</user-name>
      <creator-name>Ola Tuvesson</creator-name>
      <assigned-user-name>Josh Kalderimis</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6411</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
