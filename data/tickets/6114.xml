<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">7341</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-12-03T21:19:31+00:00</created-at>
  <creator-id type="integer">124732</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71470</milestone-id>
  <number type="integer">6114</number>
  <permalink>asset-refactoring-broke-expansions</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag nil="true"></tag>
  <title>Asset refactoring broke expansions</title>
  <updated-at type="datetime">2010-12-22T08:45:57+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">5</version>
  <user-name>Repository</user-name>
  <creator-name>Matthew Ratzloff</creator-name>
  <assigned-user-name>Piotr Sarnacki</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6114</url>
  <milestone-title>3.1</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>Change [6a609dbc82d03eb92a85970aa157192657f14882](https://github.com/rails/rails/commit/6a609dbc82d03eb92a85970aa157192657f14882) broke expansions (this was arrived via `git bisect`).  Now register_javascript_expansion and register_stylesheet_expansion both set each other's values, so because stylesheets are registered last, Rails produces HTML that tries to load stylesheets as if they were JavaScript.  Was this commit tested?

Here is some debugging of the current (399730bdd2f133e9fecac501e2f2333be5f29aa2) version using a simplified version of our codebase:

    register_javascript_expansion
    ========================================================================
    expansions (parameter):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    javascript expansions (before merge):
    {}

    stylesheet expansions (before merge):
    {}

    javascript expansions (after merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    stylesheet expansions (after merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}


    register_stylesheet_expansion
    ========================================================================
    expansions (parameter):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

    javascript expansions (before merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    stylesheet expansions (before merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    javascript expansions (after merge):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

    stylesheet expansions (after merge):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}
    register_javascript_expansion

If I find a solution I'll try to post a patch.</original-body>
  <latest-body>Change [6a609dbc82d03eb92a85970aa157192657f14882](https://github.com/rails/rails/commit/6a609dbc82d03eb92a85970aa157192657f14882) broke expansions (this was arrived via `git bisect`).  Now register_javascript_expansion and register_stylesheet_expansion both set each other's values, so because stylesheets are registered last, Rails produces HTML that tries to load stylesheets as if they were JavaScript.  Was this commit tested?

Here is some debugging of the current (399730bdd2f133e9fecac501e2f2333be5f29aa2) version using a simplified version of our codebase:

    register_javascript_expansion
    ========================================================================
    expansions (parameter):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    javascript expansions (before merge):
    {}

    stylesheet expansions (before merge):
    {}

    javascript expansions (after merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    stylesheet expansions (after merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}


    register_stylesheet_expansion
    ========================================================================
    expansions (parameter):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

    javascript expansions (before merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    stylesheet expansions (before merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    javascript expansions (after merge):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

    stylesheet expansions (after merge):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}
    register_javascript_expansion

If I find a solution I'll try to post a patch.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Change &lt;a href=
&quot;https://github.com/rails/rails/commit/6a609dbc82d03eb92a85970aa157192657f14882&quot;&gt;
6a609dbc82d03eb92a85970aa157192657f14882&lt;/a&gt; broke expansions (this
was arrived via &lt;code&gt;git bisect&lt;/code&gt;). Now
register_javascript_expansion and register_stylesheet_expansion
both set each other's values, so because stylesheets are registered
last, Rails produces HTML that tries to load stylesheets as if they
were JavaScript. Was this commit tested?&lt;/p&gt;
&lt;p&gt;Here is some debugging of the current
(399730bdd2f133e9fecac501e2f2333be5f29aa2) version using a
simplified version of our codebase:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;register_javascript_expansion
========================================================================
expansions (parameter):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

javascript expansions (before merge):
{}

stylesheet expansions (before merge):
{}

javascript expansions (after merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

stylesheet expansions (after merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}


register_stylesheet_expansion
========================================================================
expansions (parameter):
{:defaults=&amp;gt;[&quot;jquery-ui-1.8.6.g2&quot;], :datatables=&amp;gt;[&quot;jquery-datatables&quot;], :fancybox=&amp;gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&amp;gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

javascript expansions (before merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

stylesheet expansions (before merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

javascript expansions (after merge):
{:defaults=&amp;gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables&quot;], :fancybox=&amp;gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&amp;gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

stylesheet expansions (after merge):
{:defaults=&amp;gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables&quot;], :fancybox=&amp;gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&amp;gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}
register_javascript_expansion&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;If I find a solution I'll try to post a patch.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Change [6a609dbc82d03eb92a85970aa157192657f14882](https://github.com/rails/rails/commit/6a609dbc82d03eb92a85970aa157192657f14882) broke expansions (this was arrived via `git bisect`).  Now register_javascript_expansion and register_stylesheet_expansion both set each other's values, so because stylesheets are registered last, Rails produces HTML that tries to load stylesheets as if they were JavaScript.  Was this commit tested?

Here is some debugging of the current (399730bdd2f133e9fecac501e2f2333be5f29aa2) version using a simplified version of our codebase:

    register_javascript_expansion
    ========================================================================
    expansions (parameter):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    javascript expansions (before merge):
    {}

    stylesheet expansions (before merge):
    {}

    javascript expansions (after merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    stylesheet expansions (after merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}


    register_stylesheet_expansion
    ========================================================================
    expansions (parameter):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

    javascript expansions (before merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    stylesheet expansions (before merge):
    {:defaults=&gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

    javascript expansions (after merge):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

    stylesheet expansions (after merge):
    {:defaults=&gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&gt;[&quot;jquery.supersleight.min&quot;], :datatables=&gt;[&quot;jquery-datatables&quot;], :fancybox=&gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}
    register_javascript_expansion

If I find a solution I'll try to post a patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Change &lt;a href=
&quot;https://github.com/rails/rails/commit/6a609dbc82d03eb92a85970aa157192657f14882&quot;&gt;
6a609dbc82d03eb92a85970aa157192657f14882&lt;/a&gt; broke expansions (this
was arrived via &lt;code&gt;git bisect&lt;/code&gt;). Now
register_javascript_expansion and register_stylesheet_expansion
both set each other's values, so because stylesheets are registered
last, Rails produces HTML that tries to load stylesheets as if they
were JavaScript. Was this commit tested?&lt;/p&gt;
&lt;p&gt;Here is some debugging of the current
(399730bdd2f133e9fecac501e2f2333be5f29aa2) version using a
simplified version of our codebase:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;register_javascript_expansion
========================================================================
expansions (parameter):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

javascript expansions (before merge):
{}

stylesheet expansions (before merge):
{}

javascript expansions (after merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

stylesheet expansions (after merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}


register_stylesheet_expansion
========================================================================
expansions (parameter):
{:defaults=&amp;gt;[&quot;jquery-ui-1.8.6.g2&quot;], :datatables=&amp;gt;[&quot;jquery-datatables&quot;], :fancybox=&amp;gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&amp;gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

javascript expansions (before merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

stylesheet expansions (before merge):
{:defaults=&amp;gt;[&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js&quot;, &quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js&quot;, &quot;jquery-cookie/jquery.cookie&quot;, &quot;rails&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables/media/js/jquery.dataTables&quot;], :fancybox=&amp;gt;[&quot;jquery-fancybox/fancybox/jquery.fancybox-1.3.4.pack&quot;], :multiselect=&amp;gt;[&quot;jquery-tmpl/jquery.tmpl.min&quot;, &quot;jquery-blockui/jquery.blockUI&quot;, &quot;jquery-localisation/jquery.localisation.min&quot;, &quot;jquery-multiselect/js/ui.multiselect&quot;]}

javascript expansions (after merge):
{:defaults=&amp;gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables&quot;], :fancybox=&amp;gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&amp;gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}

stylesheet expansions (after merge):
{:defaults=&amp;gt;[&quot;jquery-ui-1.8.6.g2&quot;], :ie=&amp;gt;[&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;], :ie6=&amp;gt;[&quot;jquery.supersleight.min&quot;], :datatables=&amp;gt;[&quot;jquery-datatables&quot;], :fancybox=&amp;gt;[&quot;../javascripts/jquery-fancybox/style&quot;], :multiselect=&amp;gt;[&quot;../javascripts/jquery-multiselect/css/ui.multiselect&quot;, &quot;jquery-multiselect&quot;]}
register_javascript_expansion&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;If I find a solution I'll try to post a patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-03T21:19:31+00:00</created-at>
      <creator-id type="integer">124732</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6114</number>
      <permalink>asset-refactoring-broke-expansions</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Asset refactoring broke expansions</title>
      <updated-at type="datetime">2010-12-03T21:22:05+00:00</updated-at>
      <user-id type="integer">124732</user-id>
      <version type="integer">1</version>
      <user-name>Matthew Ratzloff</user-name>
      <creator-name>Matthew Ratzloff</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6114</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The problem is that both are reading from ActionView::Helpers::AssetTagHelper::AssetIncludeTag.expansions.  The easiest way to solve the problem is to give each child class its own expansions class variable.

This is a hack since `AssetIncludeTag#expand_sources` references this, but it's a start.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The problem is that both are reading from
ActionView::Helpers::AssetTagHelper::AssetIncludeTag.expansions.
The easiest way to solve the problem is to give each child class
its own expansions class variable.&lt;/p&gt;
&lt;p&gt;This is a hack since &lt;code&gt;AssetIncludeTag#expand_sources&lt;/code&gt;
references this, but it's a start.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-03T21:39:45+00:00</created-at>
      <creator-id type="integer">124732</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6114</number>
      <permalink>asset-refactoring-broke-expansions</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Asset refactoring broke expansions</title>
      <updated-at type="datetime">2010-12-03T21:39:47+00:00</updated-at>
      <user-id type="integer">124732</user-id>
      <version type="integer">2</version>
      <user-name>Matthew Ratzloff</user-name>
      <creator-name>Matthew Ratzloff</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6114</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>For anyone dealing with this issue, here's a monkey patch file that implements the somewhat hacky (but not risky) patch above.  I've placed it under `lib` and required it at the top of `config/application.rb`:

    # See https://rails.lighthouseapp.com/projects/8994/tickets/6114
    require File.expand_path('../../lib/6114_patch', __FILE__)

Hope that helps.</body>
      <body-html>&lt;div&gt;&lt;p&gt;For anyone dealing with this issue, here's a monkey patch file
that implements the somewhat hacky (but not risky) patch above.
I've placed it under &lt;code&gt;lib&lt;/code&gt; and required it at the top of
&lt;code&gt;config/application.rb&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# See https://rails.lighthouseapp.com/projects/8994/tickets/6114
require File.expand_path('../../lib/6114_patch', __FILE__)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Hope that helps.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-03T22:02:22+00:00</created-at>
      <creator-id type="integer">124732</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6114</number>
      <permalink>asset-refactoring-broke-expansions</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Asset refactoring broke expansions</title>
      <updated-at type="datetime">2010-12-03T22:02:58+00:00</updated-at>
      <user-id type="integer">124732</user-id>
      <version type="integer">3</version>
      <user-name>Matthew Ratzloff</user-name>
      <creator-name>Matthew Ratzloff</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6114</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7341</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-16T07:25:26+00:00</created-at>
      <creator-id type="integer">124732</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6114</number>
      <permalink>asset-refactoring-broke-expansions</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Asset refactoring broke expansions</title>
      <updated-at type="datetime">2010-12-16T07:25:34+00:00</updated-at>
      <user-id type="integer">7341</user-id>
      <version type="integer">4</version>
      <user-name>Piotr Sarnacki</user-name>
      <creator-name>Matthew Ratzloff</creator-name>
      <assigned-user-name>Piotr Sarnacki</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6114</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7341</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [09195f10bd3add1be1983a42760113ef2bd31602]) Do not use the same hash instance for expansions [#6114 state:resolved]

Using the same hash instance makes using the same expansions for
both javascripts and stylesheets.
https://github.com/rails/rails/commit/09195f10bd3add1be1983a42760113ef2bd31602</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/09195f10bd3add1be1983a42760113ef2bd31602&quot;
title=
&quot;Changeset [09195f10bd3add1be1983a42760113ef2bd31602]&quot;&gt;[09195f10bd3add1be1983a42760113ef2bd31602]&lt;/a&gt;)
Do not use the same hash instance for expansions [&lt;a href=
&quot;/projects/8994/tickets/6114&quot; title=&quot;Ticket #6114&quot;&gt;#6114&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Using the same hash instance makes using the same expansions
for&lt;br&gt;
both javascripts and stylesheets.&lt;br&gt;
&lt;a href=
&quot;https://github.com/rails/rails/commit/09195f10bd3add1be1983a42760113ef2bd31602&quot;&gt;
https://github.com/rails/rails/commit/09195f10bd3add1be1983a4276011...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-12-22T08:45:50+00:00</created-at>
      <creator-id type="integer">124732</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6114</number>
      <permalink>asset-refactoring-broke-expansions</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Asset refactoring broke expansions</title>
      <updated-at type="datetime">2010-12-22T08:45:57+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">5</version>
      <user-name>Repository</user-name>
      <creator-name>Matthew Ratzloff</creator-name>
      <assigned-user-name>Piotr Sarnacki</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6114</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>2d932bcda24c15efd7046e937b2c579d75cd8bc7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-12-03T21:39:45+00:00</created-at>
      <filename>expansions.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">802564</id>
      <size type="integer">1886</size>
      <uploader-id type="integer">124732</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/802564/expansions.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>1469ed6dc54aee3436ff976a1bf719b9a49a04f7</code>
      <content-type>text/x-ruby-script</content-type>
      <created-at type="datetime">2010-12-03T22:02:22+00:00</created-at>
      <filename>6114_patch.rb</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">802603</id>
      <size type="integer">543</size>
      <uploader-id type="integer">124732</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/802603/6114_patch.rb</url>
    </attachment>
  </attachments>
</ticket>
