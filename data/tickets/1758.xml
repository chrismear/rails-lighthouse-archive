<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-01-14T06:37:35+00:00</created-at>
  <creator-id type="integer">20374</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">1758</number>
  <permalink>patch-to-adapter_test-cases-so-that-the-tests-work-for-all-adapters</permalink>
  <priority type="integer">1063</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>duplicate</state>
  <tag>activerecord oracle tests verified</tag>
  <title>Patch to adapter_test cases so that the tests work for all adapters </title>
  <updated-at type="datetime">2009-08-09T22:33:16+01:00</updated-at>
  <user-id type="integer">1366</user-id>
  <version type="integer">6</version>
  <user-name>Pratik</user-name>
  <creator-name>rwc9u</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1758</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>The following two tests assert that the database adapter returns the appropriate limit and offset sql; however, limit and offset are not supported in Oracle, so the tests currently fail for the Oracle adapter (the oracle adapters handle this by making the sql query a subselect and using oracles rownums in the outer select).

* test_add_limit_offset_should_sanitize_sql_injection_for_limit_without_comas
* test_add_limit_offset_should_sanitize_sql_injection_for_limit_with_comas

Instead of adding another conditional check of the current adapter under test my patch changes the asserts to check that the sql injection is not present in the resulting limit/offset sql. This changes the tests to be adapter agnostic.

I have tested these changes with the following adapters: MySQL, Postgres, SQLite3, and OracleEnhanced.</original-body>
  <latest-body>The following two tests assert that the database adapter returns the appropriate limit and offset sql; however, limit and offset are not supported in Oracle, so the tests currently fail for the Oracle adapter (the oracle adapters handle this by making the sql query a subselect and using oracles rownums in the outer select).

* test_add_limit_offset_should_sanitize_sql_injection_for_limit_without_comas
* test_add_limit_offset_should_sanitize_sql_injection_for_limit_with_comas

Instead of adding another conditional check of the current adapter under test my patch changes the asserts to check that the sql injection is not present in the resulting limit/offset sql. This changes the tests to be adapter agnostic.

I have tested these changes with the following adapters: MySQL, Postgres, SQLite3, and OracleEnhanced.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The following two tests assert that the database adapter returns
the appropriate limit and offset sql; however, limit and offset are
not supported in Oracle, so the tests currently fail for the Oracle
adapter (the oracle adapters handle this by making the sql query a
subselect and using oracles rownums in the outer select).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
test_add_limit_offset_should_sanitize_sql_injection_for_limit_without_comas&lt;/li&gt;
&lt;li&gt;
test_add_limit_offset_should_sanitize_sql_injection_for_limit_with_comas&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Instead of adding another conditional check of the current
adapter under test my patch changes the asserts to check that the
sql injection is not present in the resulting limit/offset sql.
This changes the tests to be adapter agnostic.&lt;/p&gt;
&lt;p&gt;I have tested these changes with the following adapters: MySQL,
Postgres, SQLite3, and OracleEnhanced.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The following two tests assert that the database adapter returns the appropriate limit and offset sql; however, limit and offset are not supported in Oracle, so the tests currently fail for the Oracle adapter (the oracle adapters handle this by making the sql query a subselect and using oracles rownums in the outer select).

* test_add_limit_offset_should_sanitize_sql_injection_for_limit_without_comas
* test_add_limit_offset_should_sanitize_sql_injection_for_limit_with_comas

Instead of adding another conditional check of the current adapter under test my patch changes the asserts to check that the sql injection is not present in the resulting limit/offset sql. This changes the tests to be adapter agnostic.

I have tested these changes with the following adapters: MySQL, Postgres, SQLite3, and OracleEnhanced.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The following two tests assert that the database adapter returns
the appropriate limit and offset sql; however, limit and offset are
not supported in Oracle, so the tests currently fail for the Oracle
adapter (the oracle adapters handle this by making the sql query a
subselect and using oracles rownums in the outer select).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
test_add_limit_offset_should_sanitize_sql_injection_for_limit_without_comas&lt;/li&gt;
&lt;li&gt;
test_add_limit_offset_should_sanitize_sql_injection_for_limit_with_comas&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Instead of adding another conditional check of the current
adapter under test my patch changes the asserts to check that the
sql injection is not present in the resulting limit/offset sql.
This changes the tests to be adapter agnostic.&lt;/p&gt;
&lt;p&gt;I have tested these changes with the following adapters: MySQL,
Postgres, SQLite3, and OracleEnhanced.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-14T06:37:35+00:00</created-at>
      <creator-id type="integer">20374</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1758</number>
      <permalink>patch-to-adapter_test-cases-so-that-the-tests-work-for-all-adapters</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord oracle tests</tag>
      <title>Patch to adapter_test cases so that the tests work for all adapters </title>
      <updated-at type="datetime">2009-01-14T06:37:36+00:00</updated-at>
      <user-id type="integer">20374</user-id>
      <version type="integer">1</version>
      <user-name>rwc9u</user-name>
      <creator-name>rwc9u</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1758</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 Tests pass.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 Tests pass.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-23T19:51:20+00:00</created-at>
      <creator-id type="integer">20374</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1758</number>
      <permalink>patch-to-adapter_test-cases-so-that-the-tests-work-for-all-adapters</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord oracle tests</tag>
      <title>Patch to adapter_test cases so that the tests work for all adapters </title>
      <updated-at type="datetime">2009-01-23T19:51:23+00:00</updated-at>
      <user-id type="integer">21821</user-id>
      <version type="integer">2</version>
      <user-name>Pat George</user-name>
      <creator-name>rwc9u</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1758</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 Tests pass.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 Tests pass.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-23T20:19:46+00:00</created-at>
      <creator-id type="integer">20374</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1758</number>
      <permalink>patch-to-adapter_test-cases-so-that-the-tests-work-for-all-adapters</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord oracle tests</tag>
      <title>Patch to adapter_test cases so that the tests work for all adapters </title>
      <updated-at type="datetime">2009-01-23T20:19:47+00:00</updated-at>
      <user-id type="integer">23189</user-id>
      <version type="integer">3</version>
      <user-name>Christopher Murphy</user-name>
      <creator-name>rwc9u</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1758</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1, but Oracle still sucks :-)

I think this patch actually improves the readability of the tests too, because it now asserts the intention of avoiding the sql injection as opposed to checking the expected output.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1, but Oracle still sucks :-)&lt;/p&gt;
&lt;p&gt;I think this patch actually improves the readability of the
tests too, because it now asserts the intention of avoiding the sql
injection as opposed to checking the expected output.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-24T22:50:22+00:00</created-at>
      <creator-id type="integer">20374</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1758</number>
      <permalink>patch-to-adapter_test-cases-so-that-the-tests-work-for-all-adapters</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord oracle tests</tag>
      <title>Patch to adapter_test cases so that the tests work for all adapters </title>
      <updated-at type="datetime">2009-01-24T22:50:26+00:00</updated-at>
      <user-id type="integer">12160</user-id>
      <version type="integer">4</version>
      <user-name>Ryan McGeary</user-name>
      <creator-name>rwc9u</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1758</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 Oracle enhanced adapter tests pass</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 Oracle enhanced adapter tests pass&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-15T20:52:22+00:00</created-at>
      <creator-id type="integer">20374</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord oracle tests
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1758</number>
      <permalink>patch-to-adapter_test-cases-so-that-the-tests-work-for-all-adapters</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord oracle tests verified</tag>
      <title>Patch to adapter_test cases so that the tests work for all adapters </title>
      <updated-at type="datetime">2009-03-15T20:52:27+00:00</updated-at>
      <user-id type="integer">3839</user-id>
      <version type="integer">5</version>
      <user-name>Raimonds Simanovskis</user-name>
      <creator-name>rwc9u</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1758</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This has been fixed in master already.

Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This has been fixed in master already.&lt;/p&gt;
&lt;p&gt;Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T22:33:10+01:00</created-at>
      <creator-id type="integer">20374</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1758</number>
      <permalink>patch-to-adapter_test-cases-so-that-the-tests-work-for-all-adapters</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>duplicate</state>
      <tag>activerecord oracle tests verified</tag>
      <title>Patch to adapter_test cases so that the tests work for all adapters </title>
      <updated-at type="datetime">2009-08-09T22:33:16+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">6</version>
      <user-name>Pratik</user-name>
      <creator-name>rwc9u</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1758</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>760b7f0c682e73d99fbf0d654fdeaa6e9b21f7ee</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-01-14T06:37:35+00:00</created-at>
      <filename>adapter_test_patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">78178</id>
      <size type="integer">2325</size>
      <uploader-id type="integer">20374</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/78178/adapter_test_patch.diff</url>
    </attachment>
  </attachments>
</ticket>
