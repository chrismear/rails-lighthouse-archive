<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-01-04T16:24:38+00:00</created-at>
  <creator-id type="integer">30291</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">3721</number>
  <permalink>error-in-uniquenessvalidationtest</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>activerecord bugmash postgresql rails3</tag>
  <title>Error in UniquenessValidationTest</title>
  <updated-at type="datetime">2011-01-04T16:24:38+00:00</updated-at>
  <user-id type="integer">65556</user-id>
  <version type="integer">3</version>
  <user-name>Rizwan Reza</user-name>
  <creator-name>Anuj Dutta</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3721</url>
  <priority-name nil="true"></priority-name>
  <original-body>Only on running test_postgresql

&lt;pre&gt;
  1) Error:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest):
ActiveRecord::StatementInvalid: PGError: ERROR:  value too long for type character varying(5)
: INSERT INTO &quot;events&quot; (&quot;title&quot;) VALUES (E'&#19968;&#20108;&#19977;&#22235;&#20116;') RETURNING &quot;id&quot;
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:206:in `rescue in log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:196:in `log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:552:in `execute'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/helper.rb:42:in `execute_with_query_record'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1036:in `select_raw'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1023:in `select'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:62:in `select_all_with_query_cache'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:13:in `select_one'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:19:in `select_value'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:491:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/engines/sql/engine.rb:18:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/writes.rb:20:in `call'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/session.rb:32:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/relation.rb:64:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/relation.rb:159:in `method_missing'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2498:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/timestamp.rb:55:in `create_with_timestamps'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:268:in `block in create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_create_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:267:in `create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2474:in `create_or_update'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:261:in `block in create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_save_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:260:in `create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2156:in `save'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/validations.rb:47:in `save_with_validation'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/attribute_methods/dirty.rb:19:in `save_with_dirty'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:229:in `block in with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:182:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `block in save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:764:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:248:in `block in test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/test_case.rb:60:in `with_kcode'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:246:in `test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/gems/mocha-0.9.8/lib/mocha/integration/mini_test/version_131_and_above.rb:26:in `run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:32:in `block in run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:432:in `_run_setup_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:31:in `run'

2194 tests, 7648 assertions, 0 failures, 1 errors, 0 skips

&lt;/pre&gt;</original-body>
  <latest-body>Only on running test_postgresql

&lt;pre&gt;
  1) Error:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest):
ActiveRecord::StatementInvalid: PGError: ERROR:  value too long for type character varying(5)
: INSERT INTO &quot;events&quot; (&quot;title&quot;) VALUES (E'&#19968;&#20108;&#19977;&#22235;&#20116;') RETURNING &quot;id&quot;
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:206:in `rescue in log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:196:in `log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:552:in `execute'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/helper.rb:42:in `execute_with_query_record'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1036:in `select_raw'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1023:in `select'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:62:in `select_all_with_query_cache'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:13:in `select_one'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:19:in `select_value'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:491:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/engines/sql/engine.rb:18:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/writes.rb:20:in `call'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/session.rb:32:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/relation.rb:64:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/relation.rb:159:in `method_missing'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2498:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/timestamp.rb:55:in `create_with_timestamps'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:268:in `block in create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_create_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:267:in `create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2474:in `create_or_update'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:261:in `block in create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_save_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:260:in `create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2156:in `save'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/validations.rb:47:in `save_with_validation'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/attribute_methods/dirty.rb:19:in `save_with_dirty'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:229:in `block in with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:182:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `block in save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:764:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:248:in `block in test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/test_case.rb:60:in `with_kcode'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:246:in `test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/gems/mocha-0.9.8/lib/mocha/integration/mini_test/version_131_and_above.rb:26:in `run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:32:in `block in run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:432:in `_run_setup_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:31:in `run'

2194 tests, 7648 assertions, 0 failures, 1 errors, 0 skips

&lt;/pre&gt;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Only on running test_postgresql&lt;/p&gt;
&lt;pre&gt;
  1) Error:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest):
ActiveRecord::StatementInvalid: PGError: ERROR:  value too long for type character varying(5)
: INSERT INTO &quot;events&quot; (&quot;title&quot;) VALUES (E'&amp;#19968;&amp;#20108;&amp;#19977;&amp;#22235;&amp;#20116;') RETURNING &quot;id&quot;
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:206:in `rescue in log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:196:in `log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:552:in `execute'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/helper.rb:42:in `execute_with_query_record'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1036:in `select_raw'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1023:in `select'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:62:in `select_all_with_query_cache'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:13:in `select_one'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:19:in `select_value'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:491:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/engines/sql/engine.rb:18:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/writes.rb:20:in `call'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/session.rb:32:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/relation.rb:64:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/relation.rb:159:in `method_missing'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2498:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/timestamp.rb:55:in `create_with_timestamps'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:268:in `block in create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_create_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:267:in `create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2474:in `create_or_update'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:261:in `block in create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_save_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:260:in `create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2156:in `save'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/validations.rb:47:in `save_with_validation'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/attribute_methods/dirty.rb:19:in `save_with_dirty'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:229:in `block in with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:182:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `block in save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:764:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:248:in `block in test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/test_case.rb:60:in `with_kcode'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:246:in `test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/gems/mocha-0.9.8/lib/mocha/integration/mini_test/version_131_and_above.rb:26:in `run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:32:in `block in run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:432:in `_run_setup_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:31:in `run'

2194 tests, 7648 assertions, 0 failures, 1 errors, 0 skips

&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Only on running test_postgresql

&lt;pre&gt;
  1) Error:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest):
ActiveRecord::StatementInvalid: PGError: ERROR:  value too long for type character varying(5)
: INSERT INTO &quot;events&quot; (&quot;title&quot;) VALUES (E'&#19968;&#20108;&#19977;&#22235;&#20116;') RETURNING &quot;id&quot;
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:206:in `rescue in log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:196:in `log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:552:in `execute'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/helper.rb:42:in `execute_with_query_record'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1036:in `select_raw'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1023:in `select'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:62:in `select_all_with_query_cache'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:13:in `select_one'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:19:in `select_value'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:491:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/engines/sql/engine.rb:18:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/writes.rb:20:in `call'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/session.rb:32:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/relation.rb:64:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/relation.rb:159:in `method_missing'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2498:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/timestamp.rb:55:in `create_with_timestamps'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:268:in `block in create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_create_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:267:in `create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2474:in `create_or_update'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:261:in `block in create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_save_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:260:in `create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2156:in `save'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/validations.rb:47:in `save_with_validation'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/attribute_methods/dirty.rb:19:in `save_with_dirty'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:229:in `block in with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:182:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `block in save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:764:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:248:in `block in test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/test_case.rb:60:in `with_kcode'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:246:in `test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/gems/mocha-0.9.8/lib/mocha/integration/mini_test/version_131_and_above.rb:26:in `run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:32:in `block in run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:432:in `_run_setup_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:31:in `run'

2194 tests, 7648 assertions, 0 failures, 1 errors, 0 skips

&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Only on running test_postgresql&lt;/p&gt;
&lt;pre&gt;
  1) Error:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest):
ActiveRecord::StatementInvalid: PGError: ERROR:  value too long for type character varying(5)
: INSERT INTO &quot;events&quot; (&quot;title&quot;) VALUES (E'&amp;#19968;&amp;#20108;&amp;#19977;&amp;#22235;&amp;#20116;') RETURNING &quot;id&quot;
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:206:in `rescue in log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:196:in `log'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:552:in `execute'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/helper.rb:42:in `execute_with_query_record'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1036:in `select_raw'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1023:in `select'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:62:in `select_all_with_query_cache'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:13:in `select_one'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:19:in `select_value'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:491:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/engines/sql/engine.rb:18:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/writes.rb:20:in `call'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/session.rb:32:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/dirs/arel/lib/arel/algebra/relations/relation.rb:64:in `insert'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/relation.rb:159:in `method_missing'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2498:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/timestamp.rb:55:in `create_with_timestamps'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:268:in `block in create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_create_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:267:in `create_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2474:in `create_or_update'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:261:in `block in create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:427:in `_run_save_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/callbacks.rb:260:in `create_or_update_with_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:2156:in `save'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/validations.rb:47:in `save_with_validation'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/attribute_methods/dirty.rb:19:in `save_with_dirty'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:229:in `block in with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:182:in `transaction'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `block in save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/transactions.rb:196:in `save_with_transactions'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/base.rb:764:in `create'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:248:in `block in test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/lib/active_record/test_case.rb:60:in `with_kcode'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:246:in `test_validate_uniqueness_with_limit_and_utf8'
    /Users/andhapp/Projects/git-repository/andhapp-rails/vendor/gems/ruby/1.9.1/gems/mocha-0.9.8/lib/mocha/integration/mini_test/version_131_and_above.rb:26:in `run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:32:in `block in run'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/callbacks.rb:432:in `_run_setup_callbacks'
    /Users/andhapp/Projects/git-repository/andhapp-rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:31:in `run'

2194 tests, 7648 assertions, 0 failures, 1 errors, 0 skips

&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T06:53:53+00:00</created-at>
      <creator-id type="integer">30291</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3721</number>
      <permalink>error-in-uniquenessvalidationtest</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bugmash postgresql rails3</tag>
      <title>Error in UniquenessValidationTest</title>
      <updated-at type="datetime">2010-01-17T06:53:54+00:00</updated-at>
      <user-id type="integer">30291</user-id>
      <version type="integer">1</version>
      <user-name>Anuj Dutta</user-name>
      <creator-name>Anuj Dutta</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3721</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This ticket is invalid as the database must be created with utf-8 encoding. Here's the solution:

&lt;pre&gt;
CREATE DATABASE activerecord_unittest template=template0 encoding='utf-8';
CREATE DATABASE activerecord_unittest2 template=template0 encoding='utf-8'; 
&lt;/pre&gt;

Related ticket:
https://rails.lighthouseapp.com/projects/16213-rails-guides/tickets/97-contributing-to-rails-guide-gotcha#ticket-97-2</body>
      <body-html>&lt;div&gt;&lt;p&gt;This ticket is invalid as the database must be created with
utf-8 encoding. Here's the solution:&lt;/p&gt;
&lt;pre&gt;
CREATE DATABASE activerecord_unittest template=template0 encoding='utf-8';
CREATE DATABASE activerecord_unittest2 template=template0 encoding='utf-8'; 
&lt;/pre&gt;
&lt;p&gt;Related ticket:&lt;br&gt;
&lt;a href=
&quot;https://rails.lighthouseapp.com/projects/16213-rails-guides/tickets/97-contributing-to-rails-guide-gotcha#ticket-97-2&quot;&gt;
https://rails.lighthouseapp.com/projects/16213-rails-guides/tickets...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-18T11:02:18+00:00</created-at>
      <creator-id type="integer">30291</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3721</number>
      <permalink>error-in-uniquenessvalidationtest</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bugmash postgresql rails3</tag>
      <title>Error in UniquenessValidationTest</title>
      <updated-at type="datetime">2010-01-18T11:02:19+00:00</updated-at>
      <user-id type="integer">30291</user-id>
      <version type="integer">2</version>
      <user-name>Anuj Dutta</user-name>
      <creator-name>Anuj Dutta</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3721</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-20T10:34:27+00:00</created-at>
      <creator-id type="integer">30291</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3721</number>
      <permalink>error-in-uniquenessvalidationtest</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>activerecord bugmash postgresql rails3</tag>
      <title>Error in UniquenessValidationTest</title>
      <updated-at type="datetime">2010-01-20T10:34:29+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">3</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Anuj Dutta</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3721</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Do you what kinds of the match is the most interesting and exciting? You may be surely to say it is &lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl jerseys&lt;/a&gt; match. NFL, which is named National Football League, has 32 teams. As the most famous professional NFL American Football League, it has the most fans in America. Nowadays football has become the world famous sport item. There are a lot of football fans all over the world.&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale authentic nfl jerseys&lt;/a&gt; Whether the match or the fans are all crazy, they are cheer for the excellent and splendid match. We can learn more from the team.In order to meet the fans&#8217; demand,&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;nfl throwback jerseys&lt;/a&gt; our shop provides different kinds of the authentic &lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;. From here, you can choose any kinds of the jerseys. We also provide different sizes and colors to satisfy you. Watching the match is wonderful but adding the NFL jerseys is more interesting. You can image you are play with the teams in the match. In all, it is hard to use the word to express our joy. Only you take part in it, you can know that feeling. Moreover, the high quality of the &lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;authentic nfl jerseys&lt;/a&gt; we provide for you.Our main advantage: superior quality and no Mini order. With rich experience in dealing with all kinds of NFL jerseys, most of our products have no minimum order requirements: both large and small orders are welcome, so you can retail products at wholesale prices!&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl jerseys&lt;/a&gt; We are the professional wholesale NFL Jerseys. However, if wholesalers purchase bigger, then can enjoy even larger discounts! Browse our websites &lt;a href=&quot; http://www.wholesale-nflshop.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;, a huge range of products with cheap price but high quality are waiting for you!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Do you what kinds of the match is the most interesting and
exciting? You may be surely to say it is &lt;a href=
&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl jerseys&lt;/a&gt; match.
NFL, which is named National Football League, has 32 teams. As the
most famous professional NFL American Football League, it has the
most fans in America. Nowadays football has become the world famous
sport item. There are a lot of football fans all over the
world.&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale
authentic nfl jerseys&lt;/a&gt; Whether the match or the fans are all
crazy, they are cheer for the excellent and splendid match. We can
learn more from the team.In order to meet the fans&amp;#8217;
demand,&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;nfl throwback
jerseys&lt;/a&gt; our shop provides different kinds of the authentic
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl
jerseys&lt;/a&gt;. From here, you can choose any kinds of the jerseys. We
also provide different sizes and colors to satisfy you. Watching
the match is wonderful but adding the NFL jerseys is more
interesting. You can image you are play with the teams in the
match. In all, it is hard to use the word to express our joy. Only
you take part in it, you can know that feeling. Moreover, the high
quality of the &lt;a href=
&quot;http://www.wholesalenflstore.com/&quot;&gt;authentic nfl jerseys&lt;/a&gt; we
provide for you.Our main advantage: superior quality and no Mini
order. With rich experience in dealing with all kinds of NFL
jerseys, most of our products have no minimum order requirements:
both large and small orders are welcome, so you can retail products
at wholesale prices!&lt;a href=
&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl jerseys&lt;/a&gt; We are
the professional wholesale NFL Jerseys. However, if wholesalers
purchase bigger, then can enjoy even larger discounts! Browse our
websites &lt;a&gt;wholesale nfl jerseys&lt;/a&gt;, a huge range of products
with cheap price but high quality are waiting for you!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-04T06:04:50+00:00</created-at>
      <creator-id type="integer">30291</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3721</number>
      <permalink>error-in-uniquenessvalidationtest</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>activerecord bugmash postgresql rails3</tag>
      <title>Error in UniquenessValidationTest</title>
      <updated-at type="datetime">2011-01-04T16:24:38+00:00</updated-at>
      <user-id type="integer">131088</user-id>
      <version type="integer">4</version>
      <user-name>icooky</user-name>
      <creator-name>Anuj Dutta</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3721</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
