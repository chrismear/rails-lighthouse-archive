From 8119e453d2e5a7c94ad0473252d2cedb8ab2df52 Mon Sep 17 00:00:00 2001
From: Victor Costan <costan@gmail.com>
Date: Sat, 7 Aug 2010 20:52:23 -0400
Subject: [PATCH] Removed DEFAULT_*_OPTIONS in FormHelper. [#5332 state:resolved]

---
 actionpack/lib/action_view/helpers/form_helper.rb  |   11 +-
 .../test/template/active_model_helper_test.rb      |    6 +-
 actionpack/test/template/form_helper_test.rb       |  240 ++++++++++----------
 3 files changed, 126 insertions(+), 131 deletions(-)

diff --git a/actionpack/lib/action_view/helpers/form_helper.rb b/actionpack/lib/action_view/helpers/form_helper.rb
index ebe055b..93aff7b 100644
--- a/actionpack/lib/action_view/helpers/form_helper.rb
+++ b/actionpack/lib/action_view/helpers/form_helper.rb
@@ -845,10 +845,6 @@ module ActionView
 
       attr_reader :method_name, :object_name
 
-      DEFAULT_FIELD_OPTIONS     = { "size" => 30 }.freeze
-      DEFAULT_RADIO_OPTIONS     = { }.freeze
-      DEFAULT_TEXT_AREA_OPTIONS = { "cols" => 40, "rows" => 20 }.freeze
-
       def initialize(object_name, method_name, template_object, object = nil)
         @object_name, @method_name = object_name.to_s.dup, method_name.to_s.dup
         @template_object = template_object
@@ -898,8 +894,7 @@ module ActionView
 
       def to_input_field_tag(field_type, options = {})
         options = options.stringify_keys
-        options["size"] = options["maxlength"] || DEFAULT_FIELD_OPTIONS["size"] unless options.key?("size")
-        options = DEFAULT_FIELD_OPTIONS.merge(options)
+        options["size"] = options["maxlength"] unless options.key?("size")
         if field_type == "hidden"
           options.delete("size")
         end
@@ -919,7 +914,7 @@ module ActionView
       end
 
       def to_radio_button_tag(tag_value, options = {})
-        options = DEFAULT_RADIO_OPTIONS.merge(options.stringify_keys)
+        options = options.stringify_keys
         options["type"]     = "radio"
         options["value"]    = tag_value
         if options.has_key?("checked")
@@ -934,7 +929,7 @@ module ActionView
       end
 
       def to_text_area_tag(options = {})
-        options = DEFAULT_TEXT_AREA_OPTIONS.merge(options.stringify_keys)
+        options = options.stringify_keys
         add_default_name_and_id(options)
 
         if size = options.delete("size")
diff --git a/actionpack/test/template/active_model_helper_test.rb b/actionpack/test/template/active_model_helper_test.rb
index 6ab244d..2102488 100644
--- a/actionpack/test/template/active_model_helper_test.rb
+++ b/actionpack/test/template/active_model_helper_test.rb
@@ -27,14 +27,14 @@ class ActiveModelHelperTest < ActionView::TestCase
 
   def test_text_area_with_errors
     assert_dom_equal(
-      %(<div class="field_with_errors"><textarea cols="40" id="post_body" name="post[body]" rows="20">Back to the hill and over it again!</textarea></div>),
+      %(<div class="field_with_errors"><textarea id="post_body" name="post[body]">Back to the hill and over it again!</textarea></div>),
       text_area("post", "body")
     )
   end
 
   def test_text_field_with_errors
     assert_dom_equal(
-      %(<div class="field_with_errors"><input id="post_author_name" name="post[author_name]" size="30" type="text" value="" /></div>),
+      %(<div class="field_with_errors"><input id="post_author_name" name="post[author_name]" type="text" value="" /></div>),
       text_field("post", "author_name")
     )
   end
@@ -53,7 +53,7 @@ class ActiveModelHelperTest < ActionView::TestCase
     end
 
     assert_dom_equal(
-      %(<div class="field_with_errors"><input id="post_author_name" name="post[author_name]" size="30" type="text" value="" /> <span class="error">can't be empty</span></div>),
+      %(<div class="field_with_errors"><input id="post_author_name" name="post[author_name]" type="text" value="" /> <span class="error">can't be empty</span></div>),
       text_field("post", "author_name")
     )
   ensure
diff --git a/actionpack/test/template/form_helper_test.rb b/actionpack/test/template/form_helper_test.rb
index 9086a23..fd28194 100644
--- a/actionpack/test/template/form_helper_test.rb
+++ b/actionpack/test/template/form_helper_test.rb
@@ -162,27 +162,27 @@ class FormHelperTest < ActionView::TestCase
 
   def test_text_field
     assert_dom_equal(
-      '<input id="post_title" name="post[title]" size="30" type="text" value="Hello World" />', text_field("post", "title")
+      '<input id="post_title" name="post[title]" type="text" value="Hello World" />', text_field("post", "title")
     )
     assert_dom_equal(
-      '<input id="post_title" name="post[title]" size="30" type="password" value="Hello World" />', password_field("post", "title")
+      '<input id="post_title" name="post[title]" type="password" value="Hello World" />', password_field("post", "title")
     )
     assert_dom_equal(
-      '<input id="person_name" name="person[name]" size="30" type="password" />', password_field("person", "name")
+      '<input id="person_name" name="person[name]" type="password" />', password_field("person", "name")
     )
   end
 
   def test_text_field_with_escapes
     @post.title = "<b>Hello World</b>"
     assert_dom_equal(
-      '<input id="post_title" name="post[title]" size="30" type="text" value="&lt;b&gt;Hello World&lt;/b&gt;" />', text_field("post", "title")
+      '<input id="post_title" name="post[title]" type="text" value="&lt;b&gt;Hello World&lt;/b&gt;" />', text_field("post", "title")
     )
   end
 
   def test_text_field_with_html_entities
     @post.title = "The HTML Entity for & is &amp;"
     assert_dom_equal(
-      '<input id="post_title" name="post[title]" size="30" type="text" value="The HTML Entity for &amp; is &amp;amp;" />',
+      '<input id="post_title" name="post[title]" type="text" value="The HTML Entity for &amp; is &amp;amp;" />',
       text_field("post", "title")
     )
   end
@@ -206,13 +206,13 @@ class FormHelperTest < ActionView::TestCase
   end
 
   def test_text_field_with_nil_value
-    expected = '<input id="post_title" name="post[title]" size="30" type="text" />'
+    expected = '<input id="post_title" name="post[title]" type="text" />'
     assert_dom_equal expected, text_field("post", "title", :value => nil)
   end
 
   def test_text_field_doesnt_change_param_values
     object_name = 'post[]'
-    expected = '<input id="post_123_title" name="post[123][title]" size="30" type="text" value="Hello World" />'
+    expected = '<input id="post_123_title" name="post[123][title]" type="text" value="Hello World" />'
     assert_equal expected, text_field(object_name, "title")
     assert_equal object_name, "post[]"
   end
@@ -246,14 +246,14 @@ class FormHelperTest < ActionView::TestCase
   end
 
   def test_text_field_with_custom_type
-    assert_dom_equal '<input id="user_email" size="30" name="user[email]" type="email" />',
+    assert_dom_equal '<input id="user_email" name="user[email]" type="email" />',
       text_field("user", "email", :type => "email")
   end
 
   def test_text_field_from_a_user_defined_method
     @developer = Developer.new
     assert_dom_equal(
-      '<input id="developer_name" name="developer[name]" size="30" type="text" value="Santiago" />', text_field("developer", "name")
+      '<input id="developer_name" name="developer[name]" type="text" value="Santiago" />', text_field("developer", "name")
     )
   end
 
@@ -362,7 +362,7 @@ class FormHelperTest < ActionView::TestCase
 
   def test_text_area
     assert_dom_equal(
-      '<textarea cols="40" id="post_body" name="post[body]" rows="20">Back to the hill and over it again!</textarea>',
+      '<textarea id="post_body" name="post[body]">Back to the hill and over it again!</textarea>',
       text_area("post", "body")
     )
   end
@@ -370,14 +370,14 @@ class FormHelperTest < ActionView::TestCase
   def test_text_area_with_escapes
     @post.body        = "Back to <i>the</i> hill and over it again!"
     assert_dom_equal(
-      '<textarea cols="40" id="post_body" name="post[body]" rows="20">Back to &lt;i&gt;the&lt;/i&gt; hill and over it again!</textarea>',
+      '<textarea id="post_body" name="post[body]">Back to &lt;i&gt;the&lt;/i&gt; hill and over it again!</textarea>',
       text_area("post", "body")
     )
   end
 
   def test_text_area_with_alternate_value
     assert_dom_equal(
-      '<textarea cols="40" id="post_body" name="post[body]" rows="20">Testing alternate values.</textarea>',
+      '<textarea id="post_body" name="post[body]">Testing alternate values.</textarea>',
       text_area("post", "body", :value => 'Testing alternate values.')
     )
   end
@@ -385,7 +385,7 @@ class FormHelperTest < ActionView::TestCase
   def test_text_area_with_html_entities
     @post.body        = "The HTML Entity for & is &amp;"
     assert_dom_equal(
-      '<textarea cols="40" id="post_body" name="post[body]" rows="20">The HTML Entity for &amp; is &amp;amp;</textarea>',
+      '<textarea id="post_body" name="post[body]">The HTML Entity for &amp; is &amp;amp;</textarea>',
       text_area("post", "body")
     )
   end
@@ -398,41 +398,41 @@ class FormHelperTest < ActionView::TestCase
   end
 
   def test_search_field
-    expected = %{<input id="contact_notes_query" size="30" name="contact[notes_query]" type="search" />}
+    expected = %{<input id="contact_notes_query" name="contact[notes_query]" type="search" />}
     assert_dom_equal(expected, search_field("contact", "notes_query"))
   end
 
   def test_telephone_field
-    expected = %{<input id="user_cell" size="30" name="user[cell]" type="tel" />}
+    expected = %{<input id="user_cell" name="user[cell]" type="tel" />}
     assert_dom_equal(expected, telephone_field("user", "cell"))
   end
 
   def test_url_field
-    expected = %{<input id="user_homepage" size="30" name="user[homepage]" type="url" />}
+    expected = %{<input id="user_homepage" name="user[homepage]" type="url" />}
     assert_dom_equal(expected, url_field("user", "homepage"))
   end
 
   def test_email_field
-    expected = %{<input id="user_address" size="30" name="user[address]" type="email" />}
+    expected = %{<input id="user_address" name="user[address]" type="email" />}
     assert_dom_equal(expected, email_field("user", "address"))
   end
 
   def test_number_field
-    expected = %{<input name="order[quantity]" size="30" max="9" id="order_quantity" type="number" min="1" />}
+    expected = %{<input name="order[quantity]" max="9" id="order_quantity" type="number" min="1" />}
     assert_dom_equal(expected, number_field("order", "quantity", :in => 1...10))
   end
 
   def test_range_input
-    expected = %{<input name="hifi[volume]" step="0.1" size="30" max="11" id="hifi_volume" type="range" min="0" />}
+    expected = %{<input name="hifi[volume]" step="0.1" max="11" id="hifi_volume" type="range" min="0" />}
     assert_dom_equal(expected, range_field("hifi", "volume", :in => 0..11, :step => 0.1))
   end
 
   def test_explicit_name
     assert_dom_equal(
-      '<input id="post_title" name="dont guess" size="30" type="text" value="Hello World" />', text_field("post", "title", "name" => "dont guess")
+      '<input id="post_title" name="dont guess" type="text" value="Hello World" />', text_field("post", "title", "name" => "dont guess")
     )
     assert_dom_equal(
-      '<textarea cols="40" id="post_body" name="really!" rows="20">Back to the hill and over it again!</textarea>',
+      '<textarea id="post_body" name="really!">Back to the hill and over it again!</textarea>',
       text_area("post", "body", "name" => "really!")
     )
     assert_dom_equal(
@@ -449,10 +449,10 @@ class FormHelperTest < ActionView::TestCase
 
   def test_explicit_id
     assert_dom_equal(
-      '<input id="dont guess" name="post[title]" size="30" type="text" value="Hello World" />', text_field("post", "title", "id" => "dont guess")
+      '<input id="dont guess" name="post[title]" type="text" value="Hello World" />', text_field("post", "title", "id" => "dont guess")
     )
     assert_dom_equal(
-      '<textarea cols="40" id="really!" name="post[body]" rows="20">Back to the hill and over it again!</textarea>',
+      '<textarea id="really!" name="post[body]">Back to the hill and over it again!</textarea>',
       text_area("post", "body", "id" => "really!")
     )
     assert_dom_equal(
@@ -469,10 +469,10 @@ class FormHelperTest < ActionView::TestCase
 
   def test_nil_id
     assert_dom_equal(
-      '<input name="post[title]" size="30" type="text" value="Hello World" />', text_field("post", "title", "id" => nil)
+      '<input name="post[title]" type="text" value="Hello World" />', text_field("post", "title", "id" => nil)
     )
     assert_dom_equal(
-      '<textarea cols="40" name="post[body]" rows="20">Back to the hill and over it again!</textarea>',
+      '<textarea name="post[body]">Back to the hill and over it again!</textarea>',
       text_area("post", "body", "id" => nil)
     )
     assert_dom_equal(
@@ -499,11 +499,11 @@ class FormHelperTest < ActionView::TestCase
 
   def test_index
     assert_dom_equal(
-      '<input name="post[5][title]" size="30" id="post_5_title" type="text" value="Hello World" />',
+      '<input name="post[5][title]" id="post_5_title" type="text" value="Hello World" />',
       text_field("post", "title", "index" => 5)
     )
     assert_dom_equal(
-      '<textarea cols="40" name="post[5][body]" id="post_5_body" rows="20">Back to the hill and over it again!</textarea>',
+      '<textarea name="post[5][body]" id="post_5_body">Back to the hill and over it again!</textarea>',
       text_area("post", "body", "index" => 5)
     )
     assert_dom_equal(
@@ -526,11 +526,11 @@ class FormHelperTest < ActionView::TestCase
 
   def test_index_with_nil_id
     assert_dom_equal(
-      '<input name="post[5][title]" size="30" type="text" value="Hello World" />',
+      '<input name="post[5][title]" type="text" value="Hello World" />',
       text_field("post", "title", "index" => 5, 'id' => nil)
     )
     assert_dom_equal(
-      '<textarea cols="40" name="post[5][body]" rows="20">Back to the hill and over it again!</textarea>',
+      '<textarea name="post[5][body]">Back to the hill and over it again!</textarea>',
       text_area("post", "body", "index" => 5, 'id' => nil)
     )
     assert_dom_equal(
@@ -558,10 +558,10 @@ class FormHelperTest < ActionView::TestCase
       label("post[]", "title")
     )
     assert_dom_equal(
-      "<input id=\"post_#{pid}_title\" name=\"post[#{pid}][title]\" size=\"30\" type=\"text\" value=\"Hello World\" />", text_field("post[]","title")
+      "<input id=\"post_#{pid}_title\" name=\"post[#{pid}][title]\" type=\"text\" value=\"Hello World\" />", text_field("post[]","title")
     )
     assert_dom_equal(
-      "<textarea cols=\"40\" id=\"post_#{pid}_body\" name=\"post[#{pid}][body]\" rows=\"20\">Back to the hill and over it again!</textarea>",
+      "<textarea id=\"post_#{pid}_body\" name=\"post[#{pid}][body]\">Back to the hill and over it again!</textarea>",
       text_area("post[]", "body")
     )
     assert_dom_equal(
@@ -580,11 +580,11 @@ class FormHelperTest < ActionView::TestCase
   def test_auto_index_with_nil_id
     pid = @post.id
     assert_dom_equal(
-      "<input name=\"post[#{pid}][title]\" size=\"30\" type=\"text\" value=\"Hello World\" />",
+      "<input name=\"post[#{pid}][title]\" type=\"text\" value=\"Hello World\" />",
       text_field("post[]","title", :id => nil)
     )
     assert_dom_equal(
-      "<textarea cols=\"40\" name=\"post[#{pid}][body]\" rows=\"20\">Back to the hill and over it again!</textarea>",
+      "<textarea name=\"post[#{pid}][body]\">Back to the hill and over it again!</textarea>",
       text_area("post[]", "body", :id => nil)
     )
     assert_dom_equal(
@@ -615,8 +615,8 @@ class FormHelperTest < ActionView::TestCase
       "<form accept-charset='UTF-8' action='http://www.example.com' id='create-post' method='post'>" +
       snowman +
       "<label for='post_title'>The Title</label>" +
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />" +
       "<input name='commit' id='post_submit' type='submit' value='Create post' />" +
@@ -636,8 +636,8 @@ class FormHelperTest < ActionView::TestCase
 
     expected =  whole_form("/posts/123", "create-post", "other_name_edit", :method => "put") do
       "<label for='other_name_title' class='post_title'>Title</label>" +
-      "<input name='other_name[title]' size='30' id='other_name_title' value='Hello World' type='text' />" +
-      "<textarea name='other_name[body]' id='other_name_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='other_name[title]' id='other_name_title' value='Hello World' type='text' />" +
+      "<textarea name='other_name[body]' id='other_name_body'>Back to the hill and over it again!</textarea>" +
       "<input name='other_name[secret]' value='0' type='hidden' />" +
       "<input name='other_name[secret]' checked='checked' id='other_name_secret' value='1' type='checkbox' />" +
       "<input name='commit' id='other_name_submit' value='Create post' type='submit' />"
@@ -656,8 +656,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form("http://www.example.com", "create-post", nil, "put") do
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />"
     end
@@ -675,8 +675,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form("http://www.example.com", "create-post", nil, :method => "put", :remote => true) do
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />"
     end
@@ -694,8 +694,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form("http://www.example.com", nil, nil, :remote => true) do
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />"
     end
@@ -711,8 +711,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form("http://www.example.com", "create-post") do
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />"
     end
@@ -732,8 +732,8 @@ class FormHelperTest < ActionView::TestCase
 
     expected = whole_form do
       "<label for='post_123_title'>Title</label>" +
-      "<input name='post[123][title]' size='30' type='text' id='post_123_title' value='Hello World' />" +
-      "<textarea name='post[123][body]' id='post_123_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[123][title]' type='text' id='post_123_title' value='Hello World' />" +
+      "<textarea name='post[123][body]' id='post_123_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[123][secret]' type='hidden' value='0' />" +
       "<input name='post[123][secret]' checked='checked' type='checkbox' id='post_123_secret' value='1' />"
     end
@@ -751,8 +751,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected = whole_form do
-      "<input name='post[][title]' size='30' type='text' id='post__title' value='Hello World' />" +
-      "<textarea name='post[][body]' id='post__body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[][title]' type='text' id='post__title' value='Hello World' />" +
+      "<textarea name='post[][body]' id='post__body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[][secret]' type='hidden' value='0' />" +
       "<input name='post[][secret]' checked='checked' type='checkbox' id='post__secret' value='1' />"
     end
@@ -841,7 +841,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  "<input name='post[comment][title]' size='30' type='text' id='post_comment_title' value='Hello World' />"
+                  "<input name='post[comment][title]' type='text' id='post_comment_title' value='Hello World' />"
                 end
 
     assert_dom_equal expected, output_buffer
@@ -858,8 +858,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  "<input name='post[123][title]' size='30' type='text' id='post_123_title' value='Hello World' />" +
-                  "<input name='post[123][comment][][name]' size='30' type='text' id='post_123_comment__name' value='new comment' />"
+                  "<input name='post[123][title]' type='text' id='post_123_title' value='Hello World' />" +
+                  "<input name='post[123][comment][][name]' type='text' id='post_123_comment__name' value='new comment' />"
                 end
 
     assert_dom_equal expected, output_buffer
@@ -876,8 +876,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  "<input name='post[1][title]' size='30' type='text' id='post_1_title' value='Hello World' />" +
-                  "<input name='post[1][comment][1][name]' size='30' type='text' id='post_1_comment_1_name' value='new comment' />"
+                  "<input name='post[1][title]' type='text' id='post_1_title' value='Hello World' />" +
+                  "<input name='post[1][comment][1][name]' type='text' id='post_1_comment_1_name' value='new comment' />"
                 end
 
     assert_dom_equal expected, output_buffer
@@ -893,7 +893,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  "<input name='post[1][comment][title]' size='30' type='text' id='post_1_comment_title' value='Hello World' />"
+                  "<input name='post[1][comment][title]' type='text' id='post_1_comment_title' value='Hello World' />"
                 end
 
     assert_dom_equal expected, output_buffer
@@ -909,7 +909,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  "<input name='post[1][comment][5][title]' size='30' type='text' id='post_1_comment_5_title' value='Hello World' />"
+                  "<input name='post[1][comment][5][title]' type='text' id='post_1_comment_5_title' value='Hello World' />"
                 end
 
     assert_dom_equal expected, output_buffer
@@ -925,7 +925,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  "<input name='post[123][comment][title]' size='30' type='text' id='post_123_comment_title' value='Hello World' />"
+                  "<input name='post[123][comment][title]' type='text' id='post_123_comment_title' value='Hello World' />"
                 end
 
     assert_dom_equal expected, output_buffer
@@ -957,7 +957,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  "<input name='post[123][comment][123][title]' size='30' type='text' id='post_123_comment_123_title' value='Hello World' />"
+                  "<input name='post[123][comment][123][title]' type='text' id='post_123_comment_123_title' value='Hello World' />"
                 end
 
     assert_dom_equal expected, output_buffer
@@ -978,9 +978,9 @@ class FormHelperTest < ActionView::TestCase
       end
 
       expected =  whole_form do
-                    "<input name='post[123][comment][5][title]' size='30' type='text' id='post_123_comment_5_title' value='Hello World' />"
+                    "<input name='post[123][comment][5][title]' type='text' id='post_123_comment_5_title' value='Hello World' />"
                   end + whole_form do
-                    "<input name='post[1][comment][123][title]' size='30' type='text' id='post_1_comment_123_title' value='Hello World' />"
+                    "<input name='post[1][comment][123][title]' type='text' id='post_1_comment_123_title' value='Hello World' />"
                   end
 
       assert_dom_equal expected, output_buffer
@@ -1000,8 +1000,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_author_attributes_name" name="post[author_attributes][name]" size="30" type="text" value="new author" />'
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_author_attributes_name" name="post[author_attributes][name]" type="text" value="new author" />'
                 end
 
     assert_dom_equal expected, output_buffer
@@ -1031,8 +1031,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_author_attributes_name" name="post[author_attributes][name]" size="30" type="text" value="author #321" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_author_attributes_name" name="post[author_attributes][name]" type="text" value="author #321" />' +
                   '<input id="post_author_attributes_id" name="post[author_attributes][id]" type="hidden" value="321" />'
                 end
 
@@ -1053,9 +1053,9 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
                   '<input id="post_author_attributes_id" name="post[author_attributes][id]" type="hidden" value="321" />' +
-                  '<input id="post_author_attributes_name" name="post[author_attributes][name]" size="30" type="text" value="author #321" />'
+                  '<input id="post_author_attributes_name" name="post[author_attributes][name]" type="text" value="author #321" />'
                 end
 
     assert_dom_equal expected, output_buffer
@@ -1076,10 +1076,10 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="comment #1" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="comment #1" />' +
                   '<input id="post_comments_attributes_0_id" name="post[comments_attributes][0][id]" type="hidden" value="1" />' +
-                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" size="30" type="text" value="comment #2" />' +
+                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" type="text" value="comment #2" />' +
                   '<input id="post_comments_attributes_1_id" name="post[comments_attributes][1][id]" type="hidden" value="2" />'
                 end
 
@@ -1102,11 +1102,11 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
                   '<input id="post_comments_attributes_0_id" name="post[comments_attributes][0][id]" type="hidden" value="1" />' +
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="comment #1" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="comment #1" />' +
                   '<input id="post_comments_attributes_1_id" name="post[comments_attributes][1][id]" type="hidden" value="2" />' +
-                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" size="30" type="text" value="comment #2" />'
+                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" type="text" value="comment #2" />'
                 end
 
     assert_dom_equal expected, output_buffer
@@ -1127,9 +1127,9 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="new comment" />' +
-                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" size="30" type="text" value="new comment" />'
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="new comment" />' +
+                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" type="text" value="new comment" />'
                 end
 
     assert_dom_equal expected, output_buffer
@@ -1150,10 +1150,10 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="comment #321" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="comment #321" />' +
                   '<input id="post_comments_attributes_0_id" name="post[comments_attributes][0][id]" type="hidden" value="321" />' +
-                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" size="30" type="text" value="new comment" />'
+                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" type="text" value="new comment" />'
                 end
 
     assert_dom_equal expected, output_buffer
@@ -1170,7 +1170,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />'
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />'
                 end
 
     assert_dom_equal expected, output_buffer
@@ -1189,10 +1189,10 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="comment #1" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="comment #1" />' +
                   '<input id="post_comments_attributes_0_id" name="post[comments_attributes][0][id]" type="hidden" value="1" />' +
-                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" size="30" type="text" value="comment #2" />' +
+                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" type="text" value="comment #2" />' +
                   '<input id="post_comments_attributes_1_id" name="post[comments_attributes][1][id]" type="hidden" value="2" />'
                 end
 
@@ -1213,10 +1213,10 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="comment #1" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="comment #1" />' +
                   '<input id="post_comments_attributes_0_id" name="post[comments_attributes][0][id]" type="hidden" value="1" />' +
-                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" size="30" type="text" value="comment #2" />' +
+                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" type="text" value="comment #2" />' +
                   '<input id="post_comments_attributes_1_id" name="post[comments_attributes][1][id]" type="hidden" value="2" />'
                 end
 
@@ -1238,10 +1238,10 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input name="post[title]" size="30" type="text" id="post_title" value="Hello World" />' +
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="comment #321" />' +
+                  '<input name="post[title]" type="text" id="post_title" value="Hello World" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="comment #321" />' +
                   '<input id="post_comments_attributes_0_id" name="post[comments_attributes][0][id]" type="hidden" value="321" />' +
-                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" size="30" type="text" value="new comment" />'
+                  '<input id="post_comments_attributes_1_name" name="post[comments_attributes][1][name]" type="text" value="new comment" />'
                 end
 
     assert_dom_equal expected, output_buffer
@@ -1260,7 +1260,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input id="post_comments_attributes_abc_name" name="post[comments_attributes][abc][name]" size="30" type="text" value="comment #321" />' +
+                  '<input id="post_comments_attributes_abc_name" name="post[comments_attributes][abc][name]" type="text" value="comment #321" />' +
                   '<input id="post_comments_attributes_abc_id" name="post[comments_attributes][abc][id]" type="hidden" value="321" />'
                 end
 
@@ -1298,16 +1298,16 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" size="30" type="text" value="comment #321" />' +
-                  '<input id="post_comments_attributes_0_relevances_attributes_0_value" name="post[comments_attributes][0][relevances_attributes][0][value]" size="30" type="text" value="commentrelevance #314" />' +
+                  '<input id="post_comments_attributes_0_name" name="post[comments_attributes][0][name]" type="text" value="comment #321" />' +
+                  '<input id="post_comments_attributes_0_relevances_attributes_0_value" name="post[comments_attributes][0][relevances_attributes][0][value]" type="text" value="commentrelevance #314" />' +
                   '<input id="post_comments_attributes_0_relevances_attributes_0_id" name="post[comments_attributes][0][relevances_attributes][0][id]" type="hidden" value="314" />' +
                   '<input id="post_comments_attributes_0_id" name="post[comments_attributes][0][id]" type="hidden" value="321" />' +
-                  '<input id="post_tags_attributes_0_value" name="post[tags_attributes][0][value]" size="30" type="text" value="tag #123" />' +
-                  '<input id="post_tags_attributes_0_relevances_attributes_0_value" name="post[tags_attributes][0][relevances_attributes][0][value]" size="30" type="text" value="tagrelevance #3141" />' +
+                  '<input id="post_tags_attributes_0_value" name="post[tags_attributes][0][value]" type="text" value="tag #123" />' +
+                  '<input id="post_tags_attributes_0_relevances_attributes_0_value" name="post[tags_attributes][0][relevances_attributes][0][value]" type="text" value="tagrelevance #3141" />' +
                   '<input id="post_tags_attributes_0_relevances_attributes_0_id" name="post[tags_attributes][0][relevances_attributes][0][id]" type="hidden" value="3141" />' +
                   '<input id="post_tags_attributes_0_id" name="post[tags_attributes][0][id]" type="hidden" value="123" />' +
-                  '<input id="post_tags_attributes_1_value" name="post[tags_attributes][1][value]" size="30" type="text" value="tag #456" />' +
-                  '<input id="post_tags_attributes_1_relevances_attributes_0_value" name="post[tags_attributes][1][relevances_attributes][0][value]" size="30" type="text" value="tagrelevance #31415" />' +
+                  '<input id="post_tags_attributes_1_value" name="post[tags_attributes][1][value]" type="text" value="tag #456" />' +
+                  '<input id="post_tags_attributes_1_relevances_attributes_0_value" name="post[tags_attributes][1][relevances_attributes][0][value]" type="text" value="tagrelevance #31415" />' +
                   '<input id="post_tags_attributes_1_relevances_attributes_0_id" name="post[tags_attributes][1][relevances_attributes][0][id]" type="hidden" value="31415" />' +
                   '<input id="post_tags_attributes_1_id" name="post[tags_attributes][1][id]" type="hidden" value="456" />'
                 end
@@ -1323,8 +1323,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />"
 
@@ -1339,8 +1339,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =
-      "<input name='post[123][title]' size='30' type='text' id='post_123_title' value='Hello World' />" +
-      "<textarea name='post[123][body]' id='post_123_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[123][title]' type='text' id='post_123_title' value='Hello World' />" +
+      "<textarea name='post[123][body]' id='post_123_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[123][secret]' type='hidden' value='0' />" +
       "<input name='post[123][secret]' checked='checked' type='checkbox' id='post_123_secret' value='1' />"
 
@@ -1355,8 +1355,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =
-      "<input name='post[][title]' size='30' type='text' id='post__title' value='Hello World' />" +
-      "<textarea name='post[][body]' id='post__body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[][title]' type='text' id='post__title' value='Hello World' />" +
+      "<textarea name='post[][body]' id='post__body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[][secret]' type='hidden' value='0' />" +
       "<input name='post[][secret]' checked='checked' type='checkbox' id='post__secret' value='1' />"
 
@@ -1371,8 +1371,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =
-      "<input name='post[abc][title]' size='30' type='text' id='post_abc_title' value='Hello World' />" +
-      "<textarea name='post[abc][body]' id='post_abc_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[abc][title]' type='text' id='post_abc_title' value='Hello World' />" +
+      "<textarea name='post[abc][body]' id='post_abc_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[abc][secret]' type='hidden' value='0' />" +
       "<input name='post[abc][secret]' checked='checked' type='checkbox' id='post_abc_secret' value='1' />"
 
@@ -1387,8 +1387,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />"
 
@@ -1403,8 +1403,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='post[secret]' type='hidden' value='0' />" +
       "<input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' />"
 
@@ -1418,7 +1418,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     assert_dom_equal "<label for=\"author_post_title\">Title</label>" +
-    "<input name='author[post][title]' size='30' type='text' id='author_post_title' value='Hello World' />",
+    "<input name='author[post][title]' type='text' id='author_post_title' value='Hello World' />",
       output_buffer
   end
 
@@ -1429,7 +1429,7 @@ class FormHelperTest < ActionView::TestCase
     end
 
     assert_dom_equal "<label for=\"author_post_1_title\">Title</label>" +
-      "<input name='author[post][1][title]' size='30' type='text' id='author_post_1_title' value='Hello World' />",
+      "<input name='author[post][1][title]' type='text' id='author_post_1_title' value='Hello World' />",
       output_buffer
   end
 
@@ -1452,8 +1452,8 @@ class FormHelperTest < ActionView::TestCase
     expected =
       "<form accept-charset='UTF-8' action='http://www.example.com' id='create-post' method='post'>" +
       snowman +
-      "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-      "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
+      "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+      "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
       "<input name='parent_post[secret]' type='hidden' value='0' />" +
       "<input name='parent_post[secret]' checked='checked' type='checkbox' id='parent_post_secret' value='1' />" +
       "</form>"
@@ -1475,9 +1475,9 @@ class FormHelperTest < ActionView::TestCase
 
     expected =
       whole_form("http://www.example.com", "create-post") do
-        "<input name='post[title]' size='30' type='text' id='post_title' value='Hello World' />" +
-        "<textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea>" +
-        "<input name='post[comment][name]' type='text' id='post_comment_name' value='new comment' size='30' />"
+        "<input name='post[title]' type='text' id='post_title' value='Hello World' />" +
+        "<textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea>" +
+        "<input name='post[comment][name]' type='text' id='post_comment_name' value='new comment' />"
       end
 
     assert_dom_equal expected, output_buffer
@@ -1503,8 +1503,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-        "<label for='title'>Title:</label> <input name='post[title]' size='30' type='text' id='post_title' value='Hello World' /><br/>" +
-        "<label for='body'>Body:</label> <textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea><br/>" +
+        "<label for='title'>Title:</label> <input name='post[title]' type='text' id='post_title' value='Hello World' /><br/>" +
+        "<label for='body'>Body:</label> <textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea><br/>" +
         "<label for='secret'>Secret:</label> <input name='post[secret]' type='hidden' value='0' /><input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' /><br/>"
       end
 
@@ -1551,8 +1551,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =  whole_form do
-      "<label for='title'>Title:</label> <input name='post[title]' size='30' type='text' id='post_title' value='Hello World' /><br/>" +
-      "<label for='body'>Body:</label> <textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea><br/>" +
+      "<label for='title'>Title:</label> <input name='post[title]' type='text' id='post_title' value='Hello World' /><br/>" +
+      "<label for='body'>Body:</label> <textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea><br/>" +
       "<label for='secret'>Secret:</label> <input name='post[secret]' type='hidden' value='0' /><input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' /><br/>"
     end
 
@@ -1569,8 +1569,8 @@ class FormHelperTest < ActionView::TestCase
     end
 
     expected =
-      "<label for='title'>Title:</label> <input name='post[title]' size='30' type='text' id='post_title' value='Hello World' /><br/>" +
-      "<label for='body'>Body:</label> <textarea name='post[body]' id='post_body' rows='20' cols='40'>Back to the hill and over it again!</textarea><br/>" +
+      "<label for='title'>Title:</label> <input name='post[title]' type='text' id='post_title' value='Hello World' /><br/>" +
+      "<label for='body'>Body:</label> <textarea name='post[body]' id='post_body'>Back to the hill and over it again!</textarea><br/>" +
       "<label for='secret'>Secret:</label> <input name='post[secret]' type='hidden' value='0' /><input name='post[secret]' checked='checked' type='checkbox' id='post_secret' value='1' /><br/>"
 
     assert_dom_equal expected, output_buffer
-- 
1.7.0.4

