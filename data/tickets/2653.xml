<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">85</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-16T07:20:11+00:00</created-at>
  <creator-id type="integer">15613</creator-id>
  <milestone-due-on type="datetime">2009-08-31T00:00:00+01:00</milestone-due-on>
  <milestone-id type="integer">41987</milestone-id>
  <number type="integer">2653</number>
  <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag nil="true"></tag>
  <title>validates_uniqueness_of unicode aware field length</title>
  <updated-at type="datetime">2011-02-16T07:20:12+00:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">22</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Jacob Burkhart</creator-name>
  <assigned-user-name>Jeremy Kemper</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
  <milestone-title>2.3.4</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>If I have a validates_uniqueness_of column with limit 50 and set it to:

&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;

rails incorrectly runs a check for anything existing where that column equals

&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;?

The problem is in validates_uniqueness_of string concatenation (implemented in #1042)

http://github.com/rails/rails/blob/b6bac73b282c7e500c43810f2a937fc0047e5979/activerecord/lib/active_record/validations.rb#L729

@@@ ruby
            value = column.limit ? value.to_s[0, column.limit] : value.to_s
@@@

should be changed to

@@@ ruby
            value = column.limit ? value.to_s.mb_chars[0, column.limit].to_s : value.to_s
@@@

NOTE: also to reproduce you must have set encoding: utf8 in database.yml, and your database table must be &quot;convert to character set utf8&quot;</original-body>
  <latest-body>If I have a validates_uniqueness_of column with limit 50 and set it to:

&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;

rails incorrectly runs a check for anything existing where that column equals

&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;?

The problem is in validates_uniqueness_of string concatenation (implemented in #1042)

http://github.com/rails/rails/blob/b6bac73b282c7e500c43810f2a937fc0047e5979/activerecord/lib/active_record/validations.rb#L729

@@@ ruby
            value = column.limit ? value.to_s[0, column.limit] : value.to_s
@@@

should be changed to

@@@ ruby
            value = column.limit ? value.to_s.mb_chars[0, column.limit].to_s : value.to_s
@@@

NOTE: also to reproduce you must have set encoding: utf8 in database.yml, and your database table must be &quot;convert to character set utf8&quot;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;If I have a validates_uniqueness_of column with limit 50 and set
it to:&lt;/p&gt;
&lt;p&gt;
&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&lt;/p&gt;
&lt;p&gt;rails incorrectly runs a check for anything existing where that
column equals&lt;/p&gt;
&lt;p&gt;
&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;?&lt;/p&gt;
&lt;p&gt;The problem is in validates_uniqueness_of string concatenation
(implemented in &lt;a href=&quot;/projects/8994/tickets/1042&quot; title=&quot;Ticket #1042&quot;&gt;#1042&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/rails/rails/blob/b6bac73b282c7e500c43810f2a937fc0047e5979/activerecord/lib/active_record/validations.rb#L729&quot;&gt;
http://github.com/rails/rails/bl...&lt;/a&gt;&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
            value = column.limit ? value.to_s[0, column.limit] : value.to_s
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;should be changed to&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
            value = column.limit ? value.to_s.mb_chars[0, column.limit].to_s : value.to_s
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;NOTE: also to reproduce you must have set encoding: utf8 in
database.yml, and your database table must be &quot;convert to character
set utf8&quot;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If I have a validates_uniqueness_of column with limit 50 and set it to:

&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;

rails incorrectly runs a check for anything existing where that column equals

&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;&#5065;&#5066;&#5064;?

The problem is in validates_uniqueness_of string concatenation (implemented in #1042)

http://github.com/rails/rails/blob/b6bac73b282c7e500c43810f2a937fc0047e5979/activerecord/lib/active_record/validations.rb#L729

@@@ ruby
value = column.limit ? value.to_s[0, column.limit] : value.to_s
@@@

should be changed to

@@@ ruby
value = column.limit ? value.to_s.mb_chars[0, column.limit].to_s : value.to_s
@@@

NOTE: also to reproduce you must have set encoding: utf8 in database.yml, and your database table must be &quot;convert to character set utf8&quot;</body>
      <body-html>&lt;div&gt;&lt;p&gt;If I have a validates_uniqueness_of column with limit 50 and set
it to:&lt;/p&gt;
&lt;p&gt;
&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&lt;/p&gt;
&lt;p&gt;rails incorrectly runs a check for anything existing where that
column equals&lt;/p&gt;
&lt;p&gt;
&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;&amp;#5065;&amp;#5066;&amp;#5064;?&lt;/p&gt;
&lt;p&gt;The problem is in validates_uniqueness_of string concatenation
(implemented in &lt;a href=&quot;/projects/8994/tickets/1042&quot; title=
&quot;Ticket #1042&quot;&gt;#1042&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/rails/rails/blob/b6bac73b282c7e500c43810f2a937fc0047e5979/activerecord/lib/active_record/validations.rb#L729&quot;&gt;
http://github.com/rails/rails/blob/b6bac73b282c7e500c43810f2a937fc0...&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;value = column.limit ? value.to_s[0, column.limit] : value.to_s&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;should be changed to&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;value = column.limit ? value.to_s.mb_chars[0, column.limit].to_s : value.to_s&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;NOTE: also to reproduce you must have set encoding: utf8 in
database.yml, and your database table must be &quot;convert to character
set utf8&quot;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-15T18:27:31+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-05-15T18:28:16+01:00</updated-at>
      <user-id type="integer">15613</user-id>
      <version type="integer">1</version>
      <user-name>Jacob Burkhart</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-06T14:39:00+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-06T14:39:05+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">2</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>there seems to be a problem indeed - the validates_uniqueness select statement doesn't seem to work with utf8
so verified with mysql
I get outright errors with postgresql, while the encoding is UTF8 and so should work.
linked to 2883 i think

added tests, and i'll now look for a fix</body>
      <body-html>&lt;div&gt;&lt;p&gt;there seems to be a problem indeed - the validates_uniqueness
select statement doesn't seem to work with utf8&lt;br&gt;
so verified with mysql&lt;br&gt;
I get outright errors with postgresql, while the encoding is UTF8
and so should work.&lt;br&gt;
linked to 2883 i think&lt;/p&gt;
&lt;p&gt;added tests, and i'll now look for a fix&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T15:02:56+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-08T15:03:00+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">3</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>sorry about the lack of punctuation, there were line breaks in there.</body>
      <body-html>&lt;div&gt;&lt;p&gt;sorry about the lack of punctuation, there were line breaks in
there.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T15:03:40+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-08T15:03:43+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">4</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>well, i updated the patch: this fix works for postgresql and sqlite3, still not for mysql though.</body>
      <body-html>&lt;div&gt;&lt;p&gt;well, i updated the patch: this fix works for postgresql and
sqlite3, still not for mysql though.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T16:17:40+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-08T16:17:43+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">5</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>and now a clean patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;and now a clean patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T22:41:27+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-08T22:41:33+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">6</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T22:48:09+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-08T22:48:14+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">7</version>
      <user-name>Pratik</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Nice fix, +1. Needs rebase against master.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Nice fix, +1. Needs rebase against master.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T03:27:12+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T03:27:17+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>rebased against master</body>
      <body-html>&lt;div&gt;&lt;p&gt;rebased against master&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T09:25:41+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T09:25:45+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">9</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>not reproducible 

-1 The patch fails on master. 

@@@ ruby
Created an event whose title, with limit taken into account, is not unique.
&lt;false&gt; is not true.

@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;not reproducible&lt;/p&gt;
&lt;p&gt;-1 The patch fails on master.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;Created an event whose title, with limit taken into account, is not unique.
&amp;lt;false&amp;gt; is not true.&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T15:51:03+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T15:51:06+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">10</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>-1 Patch applies on master but fails test, i was unable to trace the generated SQL in the tests log to see what is really going on.
Since mb_chars[x,x] is obviously working, i suspect the DB is the one to blame. (MySQL)

@@@ plain
  1) Failure:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest)
    [./test/cases/validations/uniqueness_validation_test.rb:246:in `test_validate_uniqueness_with_limit_and_utf8'
     ./test/cases/../../lib/active_record/test_case.rb:57:in `with_kcode'
     ./test/cases/validations/uniqueness_validation_test.rb:241:in `test_validate_uniqueness_with_limit_and_utf8'
     ./test/cases/../../lib/../../activemodel/lib/../../activesupport/lib/active_support/testing/setup_and_teardown.rb:62:in `__send__'
     ./test/cases/../../lib/../../activemodel/lib/../../activesupport/lib/active_support/testing/setup_and_teardown.rb:62:in `run']:
Created an event whose title, with limit taken into account, is not unique.
&lt;false&gt; is not true.
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 Patch applies on master but fails test, i was unable to trace
the generated SQL in the tests log to see what is really going on.
Since mb_chars[x,x] is obviously working, i suspect the DB is the
one to blame. (MySQL)&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;plain&quot;&gt;  1) Failure:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest)
    [./test/cases/validations/uniqueness_validation_test.rb:246:in `test_validate_uniqueness_with_limit_and_utf8'
     ./test/cases/../../lib/active_record/test_case.rb:57:in `with_kcode'
     ./test/cases/validations/uniqueness_validation_test.rb:241:in `test_validate_uniqueness_with_limit_and_utf8'
     ./test/cases/../../lib/../../activemodel/lib/../../activesupport/lib/active_support/testing/setup_and_teardown.rb:62:in `__send__'
     ./test/cases/../../lib/../../activemodel/lib/../../activesupport/lib/active_support/testing/setup_and_teardown.rb:62:in `run']:
Created an event whose title, with limit taken into account, is not unique.
&amp;lt;false&amp;gt; is not true.&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T17:18:23+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T17:18:29+01:00</updated-at>
      <user-id type="integer">10379</user-id>
      <version type="integer">11</version>
      <user-name>Elad Meidar</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>exactly - it works for postgres and sqlite3, but not for mysql.</body>
      <body-html>&lt;div&gt;&lt;p&gt;exactly - it works for postgres and sqlite3, but not for
mysql.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T20:10:39+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T20:10:40+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">12</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Works for mysql if you regenerate your test dbs. Drop both dbs and recreate with `rake mysql:build_databases`. This corrects the default charset and collation.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Works for mysql if you regenerate your test dbs. Drop both dbs
and recreate with &lt;code&gt;rake mysql:build_databases&lt;/code&gt;. This
corrects the default charset and collation.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T20:55:03+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T20:55:06+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">13</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [c5896bfd8432f6b7a1c6cb06486c5c85eafe9450]) validate uniqueness with limit in utf8

[#2653 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/c5896bfd8432f6b7a1c6cb06486c5c85eafe9450</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/c5896bfd8432f6b7a1c6cb06486c5c85eafe9450&quot;
title=
&quot;Changeset [c5896bfd8432f6b7a1c6cb06486c5c85eafe9450]&quot;&gt;[c5896bfd8432f6b7a1c6cb06486c5c85eafe9450]&lt;/a&gt;)
validate uniqueness with limit in utf8&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2653&quot; title=
&quot;Ticket #2653&quot;&gt;#2653&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/c5896bfd8432f6b7a1c6cb06486c5c85eafe9450&quot;&gt;
http://github.com/rails/rails/commit/c5896bfd8432f6b7a1c6cb06486c5c...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T20:55:31+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T20:55:32+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">14</version>
      <user-name>Repository</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [f6f04f1549cea33385323b6a1fd2c58855927d15]) validate uniqueness with limit in utf8

[#2653 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/f6f04f1549cea33385323b6a1fd2c58855927d15</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/f6f04f1549cea33385323b6a1fd2c58855927d15&quot;
title=
&quot;Changeset [f6f04f1549cea33385323b6a1fd2c58855927d15]&quot;&gt;[f6f04f1549cea33385323b6a1fd2c58855927d15]&lt;/a&gt;)
validate uniqueness with limit in utf8&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2653&quot; title=
&quot;Ticket #2653&quot;&gt;#2653&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/f6f04f1549cea33385323b6a1fd2c58855927d15&quot;&gt;
http://github.com/rails/rails/commit/f6f04f1549cea33385323b6a1fd2c5...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T20:55:32+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>bugmash</tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T20:55:32+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">15</version>
      <user-name>Repository</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T20:55:42+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T20:55:43+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">16</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I found what makes the test pass (and is also the condition for it to work for mysql: explicit utf8 encoding.  I copied the little hack from another test.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I found what makes the test pass (and is also the condition for
it to work for mysql: explicit utf8 encoding. I copied the little
hack from another test.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T21:08:56+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T21:08:57+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">17</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Elise, tests already pass for me on mysql. Why is this patch needed?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Elise, tests already pass for me on mysql. Why is this patch
needed?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T22:32:50+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T22:32:55+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">18</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(first do `rake mysql:rebuild_databases` to fix the old test database's charset and collation)</body>
      <body-html>&lt;div&gt;&lt;p&gt;(first do &lt;code&gt;rake mysql:rebuild_databases&lt;/code&gt; to fix the
old test database's charset and collation)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T22:34:21+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T22:34:22+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">19</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Jeremy, i think your DB is properly configured (for utf8 encoding) - as you can see from Elad's comments (and mine), the mysql still failed, as opposed to the other db's.

this patch checks for that, by doing a query and seeing if the select works properly.  I use the same extra bit of code that is used in the test_validate_case_insensitive_uniqueness.

It's a bit of a hack, but i tried different things, like removing the 'BINARY' = connection.case_sensitive_equality_operator for is_utf8? , but that resulted in collation errors in the mysql database, which seems to have LATIN_C1 encoding.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jeremy, i think your DB is properly configured (for utf8
encoding) - as you can see from Elad's comments (and mine), the
mysql still failed, as opposed to the other db's.&lt;/p&gt;
&lt;p&gt;this patch checks for that, by doing a query and seeing if the
select works properly. I use the same extra bit of code that is
used in the test_validate_case_insensitive_uniqueness.&lt;/p&gt;
&lt;p&gt;It's a bit of a hack, but i tried different things, like
removing the 'BINARY' = connection.case_sensitive_equality_operator
for is_utf8? , but that resulted in collation errors in the mysql
database, which seems to have LATIN_C1 encoding.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T22:39:50+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T22:39:54+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">20</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>aha, sorry, missed your comment.  Ignore the patch then, sorry.</body>
      <body-html>&lt;div&gt;&lt;p&gt;aha, sorry, missed your comment. Ignore the patch then,
sorry.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T22:45:42+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-09T22:45:46+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">21</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Elise, this would be a useful bit of code for test/connections/native_mysql/connection.rb so we can fail fast and advise a database rebuild instead of leaving Rails testers with odd, unexplained test failures.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Elise, this would be a useful bit of code for
test/connections/native_mysql/connection.rb so we can fail fast and
advise a database rebuild instead of leaving Rails testers with
odd, unexplained test failures.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T05:48:20+01:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2009-08-10T05:48:21+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">22</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Good &lt;a href=http://www.sale-puma.com&gt;Puma shoes sale&lt;/a&gt; information for &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; fans: Yesterday, German sportswear maker Cheap Running Shoes purchased effectively lot of money Brands. The transaction entails the Cobra brand, too as linked inventory, intellectual house and endorsement contracts. It also helps make &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Shoes . They provide you with the utmost game and support all through the feet.You can happen around several types of basketball sneakers such as high-top,low-top and mid-top.The &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt; and boots give you best ankle support will support want you to obtain steadiness.
As we konw,Trail &lt;a href=http://www.sale-puma.com&gt;Puma Drift Cat&lt;/a&gt; Shoes black, Trail &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; ShoesWhite Black? 50 many years backshore are actually released within a great accomplishment. Trail Running Shoes speed cat shoes?go in add-on to King Pele into planet tournament finals, bottom tennis discs matchrs within pasture inhabit an vital area in hold out in Wimbledon Dun; Its working firms have premier manufacturers and major marketplace positions in distilled spirits, residence and security, and golf products. The reply go all through the &lt;a href=http://www.sale-puma.com&gt;Cheap puma shoes&lt;/a&gt; on sale-here you are able to happen around several distcoun.&lt;a href=http://www.sale-puma.com&gt;puma shoes on sale &lt;/a&gt;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good &lt;a href=&quot;http:&quot;&gt;Puma shoes sale information for &lt;a href=
&quot;http:&quot;&gt;Puma shoes fans: Yesterday, German sportswear maker Cheap
Running Shoes purchased effectively lot of money Brands. The
transaction entails the Cobra brand, too as linked inventory,
intellectual house and endorsement contracts. It also helps make
&lt;a href=&quot;http:&quot;&gt;puma speed cat Shoes . They provide you with the
utmost game and support all through the feet.You can happen around
several types of basketball sneakers such as high-top,low-top and
mid-top.The &lt;a href=&quot;http:&quot;&gt;Puma shoes online and boots give you
best ankle support will support want you to obtain steadiness.&lt;br&gt;
As we konw,Trail &lt;a href=&quot;http:&quot;&gt;Puma Drift Cat Shoes black, Trail
&lt;a href=&quot;http:&quot;&gt;Puma future cat ShoesWhite Black? 50 many years
backshore are actually released within a great accomplishment.
Trail Running Shoes speed cat shoes?go in add-on to King Pele into
planet tournament finals, bottom tennis discs matchrs within
pasture inhabit an vital area in hold out in Wimbledon Dun; Its
working firms have premier manufacturers and major marketplace
positions in distilled spirits, residence and security, and golf
products. The reply go all through the &lt;a href=&quot;http:&quot;&gt;Cheap puma
shoes on sale-here you are able to happen around several
distcoun.&lt;a href=&quot;http:&quot;&gt;puma shoes on sale .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-16T07:10:40+00:00</created-at>
      <creator-id type="integer">15613</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2653</number>
      <permalink>validates_uniqueness_of-unicode-aware-field-length</permalink>
      <priority type="integer">10</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>validates_uniqueness_of unicode aware field length</title>
      <updated-at type="datetime">2011-02-16T07:20:11+00:00</updated-at>
      <user-id type="integer">137258</user-id>
      <version type="integer">23</version>
      <user-name>fgfhnmn</user-name>
      <creator-name>Jacob Burkhart</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2653</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>912cb5e9b20a334a3d041629beceda88313af641</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-08T22:43:29+01:00</created-at>
      <filename>validate_uniqueness_utf8.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239185</id>
      <size type="integer">2975</size>
      <uploader-id type="integer">36650</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239185/validate_uniqueness_utf8.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>1b010c93685a4bd90e708d0f98ea119fe13449de</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-09T09:25:41+01:00</created-at>
      <filename>validate_uniqueness_utf8.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239299</id>
      <size type="integer">2257</size>
      <uploader-id type="integer">36650</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239299/validate_uniqueness_utf8.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>c7afa925920d80626dc97b5f78a985f9dcd0e320</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-09T21:08:56+01:00</created-at>
      <filename>validate_uniqueness_utf8_test_patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239409</id>
      <size type="integer">1488</size>
      <uploader-id type="integer">36650</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239409/validate_uniqueness_utf8_test_patch.diff</url>
    </attachment>
  </attachments>
</ticket>
