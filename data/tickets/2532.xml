<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-04-21T05:03:13+01:00</created-at>
  <creator-id type="integer">30</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">2532</number>
  <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
  <priority type="integer">1675</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>activerecord-store cookie-store failsafe patch session</tag>
  <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
  <updated-at type="datetime">2011-02-02T18:21:27+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">9</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Erik Bryn</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
  <milestone-title>3.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Needed more session storage, so I had to switch from the cookie to ActiveRecord session store. On the first request after changing the store in config/environment.rb, the old cookie session store session ID is read from the cookie as the active session ID, which is in a different format than the md5-hash session ID. Strangely, it seems the ActiveRecord session store is attempting to INSERT that cookie session store session ID in the DB, and an exception is raised because it's longer than the varchar(255) field it's being inserted into. Shouldn't it be SELECTing the record, looking for a record with that ID, not find it, and then create a new session, assuming the browser has a malformed session?

Here's the full error:
/!\ FAILSAFE /!\  Mon Apr 20 20:41:12 -0700 2009
  Status: 500 Internal Server Error
  DBI::DatabaseError: 22001 (8152) [unixODBC][FreeTDS][SQL Server]String or binary data would be truncated.: INSERT INTO [sessions] ([updated_at], [session_id], [data]) VALUES('2009-04-20 20:41:12.626', 'BAh7DToLcHVic2RiQzoeSGFzaFdpdGhJbmRpZmZlcmVudEFjY2Vzc3sHIgxmaWx0ZXJzQzsGew8iCWRhdGVJdToJVGltZQ2HDhuAAAAAAAY6H0BtYXJzaGFsX3dpdGhfdXRjX2NvZXJjaW9uRiIKdHJpYWwwIg9wcm9kdWN0X2lkMCIJdHlwZTAiD2NvbXBhbnlfaWQwIgl5ZWFyMCIQc291cmNlX3R5cGUiCGFsbCIKc2luY2UiBzF5Ig5zZWN0b3JfaWRpBiIOc291cmNlX2lkIghhbGwiDHZpZXdfYnkiDmNvbXBhbmllczoOaG9zdF9uYW1lIhd3d3cuY3ZwaXBlbGluZS5jb206DnNlY3Rvcl9pZGkGOhNhc3Bfc2Vzc2lvbl9pZCIlMzZkYjkzZGE0OTkzMzk1MmMyN2QyNjBhMzVjOTIzNmU6EF9jc3JmX3Rva2VuIjFRaVZoejdCeG9XRXpEQXRnNlNMWEpSQ1BnVG5tVDV3dGpFbW9qMWY3dk1RPToMdXNlcl9pZGkCUQQiCmZsYXNoSUM6J0FjdGlvbkNvbnRyb2xsZXI6OkZsYXNoOjpGbGFzaEhhc2h7AAY6CkB1c2VkewA6D3Nlc3Npb25faWQiJTM5NDQzZTM5MjUzMjZkMDliYWMzZDIwZTExOGFjOGZi--fd35c1c2382480db37e49920a8c96a1b5de69b55', 'BAh7CjoLcHVic2RiQzoeSGFzaFdpdGhJbmRpZmZlcmVudEFjY2Vzc3sHIgxm
aWx0ZXJzQzsGewsiCWRhdGVJdToJVGltZQ3HTBuAAAAAAAY6H0BtYXJzaGFs
X3dpdGhfdXRjX2NvZXJjaW9uRiIKdHJpYWwwIgpzaW5jZSIIMTRkIhBzb3Vy
Y2VfdHlwZSIIYWxsIgtzb3VyY2UiCGFsbCIOc2VjdG9yX2lkaQciDHZpZXdf
YnkiDmNvbXBhbmllczoOaG9zdF9uYW1lIhd3d3cuY3ZwaXBlbGluZS5jb206
DHVzZXJfaWRpAlEEOg5zZWN0b3JfaWRpBjoTYXNwX3Nlc3Npb25faWQiJTM2
ZGI5M2RhNDk5MzM5NTJjMjdkMjYwYTM1YzkyMzZl
')
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract_adapter.rb:212:in `log'
    /usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:726:in `raw_execute'
    /usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:336:in `execute'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:259:in `insert_sql'
    /usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:713:in `insert_sql'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:44:in `insert_without_query_dirty'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:18:in `insert'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2902:in `create_without_timestamps'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/timestamp.rb:29:in `create_without_callbacks'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/callbacks.rb:266:in `create'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2868:in `create_or_update_without_callbacks'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/callbacks.rb:250:in `create_or_update'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2539:in `save_without_validation'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/validations.rb:1009:in `save_without_dirty'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/dirty.rb:79:in `save_without_transactions'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:229:in `send'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:229:in `with_transaction_returning_status'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:182:in `transaction'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:196:in `save'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:196:in `save'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/session_store.rb:300:in `set_session'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:1453:in `silence'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/session_store.rb:297:in `set_session'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/abstract_store.rb:132:in `call'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50</original-body>
  <latest-body>Needed more session storage, so I had to switch from the cookie to ActiveRecord session store. On the first request after changing the store in config/environment.rb, the old cookie session store session ID is read from the cookie as the active session ID, which is in a different format than the md5-hash session ID. Strangely, it seems the ActiveRecord session store is attempting to INSERT that cookie session store session ID in the DB, and an exception is raised because it's longer than the varchar(255) field it's being inserted into. Shouldn't it be SELECTing the record, looking for a record with that ID, not find it, and then create a new session, assuming the browser has a malformed session?

Here's the full error:
/!\ FAILSAFE /!\  Mon Apr 20 20:41:12 -0700 2009
  Status: 500 Internal Server Error
  DBI::DatabaseError: 22001 (8152) [unixODBC][FreeTDS][SQL Server]String or binary data would be truncated.: INSERT INTO [sessions] ([updated_at], [session_id], [data]) VALUES('2009-04-20 20:41:12.626', 'BAh7DToLcHVic2RiQzoeSGFzaFdpdGhJbmRpZmZlcmVudEFjY2Vzc3sHIgxmaWx0ZXJzQzsGew8iCWRhdGVJdToJVGltZQ2HDhuAAAAAAAY6H0BtYXJzaGFsX3dpdGhfdXRjX2NvZXJjaW9uRiIKdHJpYWwwIg9wcm9kdWN0X2lkMCIJdHlwZTAiD2NvbXBhbnlfaWQwIgl5ZWFyMCIQc291cmNlX3R5cGUiCGFsbCIKc2luY2UiBzF5Ig5zZWN0b3JfaWRpBiIOc291cmNlX2lkIghhbGwiDHZpZXdfYnkiDmNvbXBhbmllczoOaG9zdF9uYW1lIhd3d3cuY3ZwaXBlbGluZS5jb206DnNlY3Rvcl9pZGkGOhNhc3Bfc2Vzc2lvbl9pZCIlMzZkYjkzZGE0OTkzMzk1MmMyN2QyNjBhMzVjOTIzNmU6EF9jc3JmX3Rva2VuIjFRaVZoejdCeG9XRXpEQXRnNlNMWEpSQ1BnVG5tVDV3dGpFbW9qMWY3dk1RPToMdXNlcl9pZGkCUQQiCmZsYXNoSUM6J0FjdGlvbkNvbnRyb2xsZXI6OkZsYXNoOjpGbGFzaEhhc2h7AAY6CkB1c2VkewA6D3Nlc3Npb25faWQiJTM5NDQzZTM5MjUzMjZkMDliYWMzZDIwZTExOGFjOGZi--fd35c1c2382480db37e49920a8c96a1b5de69b55', 'BAh7CjoLcHVic2RiQzoeSGFzaFdpdGhJbmRpZmZlcmVudEFjY2Vzc3sHIgxm
aWx0ZXJzQzsGewsiCWRhdGVJdToJVGltZQ3HTBuAAAAAAAY6H0BtYXJzaGFs
X3dpdGhfdXRjX2NvZXJjaW9uRiIKdHJpYWwwIgpzaW5jZSIIMTRkIhBzb3Vy
Y2VfdHlwZSIIYWxsIgtzb3VyY2UiCGFsbCIOc2VjdG9yX2lkaQciDHZpZXdf
YnkiDmNvbXBhbmllczoOaG9zdF9uYW1lIhd3d3cuY3ZwaXBlbGluZS5jb206
DHVzZXJfaWRpAlEEOg5zZWN0b3JfaWRpBjoTYXNwX3Nlc3Npb25faWQiJTM2
ZGI5M2RhNDk5MzM5NTJjMjdkMjYwYTM1YzkyMzZl
')
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract_adapter.rb:212:in `log'
    /usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:726:in `raw_execute'
    /usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:336:in `execute'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:259:in `insert_sql'
    /usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:713:in `insert_sql'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:44:in `insert_without_query_dirty'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:18:in `insert'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2902:in `create_without_timestamps'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/timestamp.rb:29:in `create_without_callbacks'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/callbacks.rb:266:in `create'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2868:in `create_or_update_without_callbacks'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/callbacks.rb:250:in `create_or_update'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2539:in `save_without_validation'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/validations.rb:1009:in `save_without_dirty'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/dirty.rb:79:in `save_without_transactions'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:229:in `send'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:229:in `with_transaction_returning_status'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:182:in `transaction'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:196:in `save'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:196:in `save'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/session_store.rb:300:in `set_session'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:1453:in `silence'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/session_store.rb:297:in `set_session'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/abstract_store.rb:132:in `call'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    /usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Needed more session storage, so I had to switch from the cookie
to ActiveRecord session store. On the first request after changing
the store in config/environment.rb, the old cookie session store
session ID is read from the cookie as the active session ID, which
is in a different format than the md5-hash session ID. Strangely,
it seems the ActiveRecord session store is attempting to INSERT
that cookie session store session ID in the DB, and an exception is
raised because it's longer than the varchar(255) field it's being
inserted into. Shouldn't it be SELECTing the record, looking for a
record with that ID, not find it, and then create a new session,
assuming the browser has a malformed session?&lt;/p&gt;
&lt;p&gt;Here's the full error: /!\ FAILSAFE /!\ Mon Apr 20 20:41:12
-0700 2009 Status: 500 Internal Server Error DBI::DatabaseError:
22001 (8152) [unixODBC][FreeTDS][SQL Server]String or binary data
would be truncated.: INSERT INTO [sessions] ([updated_at],
[session_id], [data]) VALUES('2009-04-20 20:41:12.626',
'BAh7DToLcHVic2RiQzoeSGFzaFdpdGhJbmRpZmZlcmVudEFjY2Vzc3sHIgxmaWx0ZXJzQzsGew8iCWRhdGVJdToJVGltZQ2HDhuAAAAAAAY6H0BtYXJzaGFsX3dpdGhfdXRjX2NvZXJjaW9uRiIKdHJpYWwwIg9wcm9kdWN0X2lkMCIJdHlwZTAiD2NvbXBhbnlfaWQwIgl5ZWFyMCIQc291cmNlX3R5cGUiCGFsbCIKc2luY2UiBzF5Ig5zZWN0b3JfaWRpBiIOc291cmNlX2lkIghhbGwiDHZpZXdfYnkiDmNvbXBhbmllczoOaG9zdF9uYW1lIhd3d3cuY3ZwaXBlbGluZS5jb206DnNlY3Rvcl9pZGkGOhNhc3Bfc2Vzc2lvbl9pZCIlMzZkYjkzZGE0OTkzMzk1MmMyN2QyNjBhMzVjOTIzNmU6EF9jc3JmX3Rva2VuIjFRaVZoejdCeG9XRXpEQXRnNlNMWEpSQ1BnVG5tVDV3dGpFbW9qMWY3dk1RPToMdXNlcl9pZGkCUQQiCmZsYXNoSUM6J0FjdGlvbkNvbnRyb2xsZXI6OkZsYXNoOjpGbGFzaEhhc2h7AAY6CkB1c2VkewA6D3Nlc3Npb25faWQiJTM5NDQzZTM5MjUzMjZkMDliYWMzZDIwZTExOGFjOGZi--fd35c1c2382480db37e49920a8c96a1b5de69b55',
'BAh7CjoLcHVic2RiQzoeSGFzaFdpdGhJbmRpZmZlcmVudEFjY2Vzc3sHIgxm
aWx0ZXJzQzsGewsiCWRhdGVJdToJVGltZQ3HTBuAAAAAAAY6H0BtYXJzaGFs
X3dpdGhfdXRjX2NvZXJjaW9uRiIKdHJpYWwwIgpzaW5jZSIIMTRkIhBzb3Vy
Y2VfdHlwZSIIYWxsIgtzb3VyY2UiCGFsbCIOc2VjdG9yX2lkaQciDHZpZXdf
YnkiDmNvbXBhbmllczoOaG9zdF9uYW1lIhd3d3cuY3ZwaXBlbGluZS5jb206
DHVzZXJfaWRpAlEEOg5zZWN0b3JfaWRpBjoTYXNwX3Nlc3Npb25faWQiJTM2
ZGI5M2RhNDk5MzM5NTJjMjdkMjYwYTM1YzkyMzZl ')&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract_adapter.rb:212:in `log'
/usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:726:in `raw_execute'
/usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:336:in `execute'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:259:in `insert_sql'
/usr/lib/ruby/gems/1.8/gems/rails-sqlserver-2000-2005-adapter-2.2.14/lib/active_record/connection_adapters/sqlserver_adapter.rb:713:in `insert_sql'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:44:in `insert_without_query_dirty'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:18:in `insert'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2902:in `create_without_timestamps'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/timestamp.rb:29:in `create_without_callbacks'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/callbacks.rb:266:in `create'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2868:in `create_or_update_without_callbacks'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/callbacks.rb:250:in `create_or_update'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:2539:in `save_without_validation'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/validations.rb:1009:in `save_without_dirty'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/dirty.rb:79:in `save_without_transactions'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:229:in `send'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:229:in `with_transaction_returning_status'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:182:in `transaction'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:196:in `save'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:196:in `save'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/session_store.rb:300:in `set_session'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/base.rb:1453:in `silence'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/session_store.rb:297:in `set_session'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/abstract_store.rb:132:in `call'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/usr/lib/ruby/gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Needed more session storage, so I had to switch from the cookie to ActiveRecord session store. On the first request after changing the store in config/environment.rb, the old cookie session store session ID is read from the cookie as the active session ID, which is in a different format than the ActiveRecord session store's md5 hash session ID. Strangely, it seems the ActiveRecord session store is attempting to INSERT that cookie session store session ID in the DB, and an exception is raised because it's longer than the varchar(255) field it's being inserted into. Shouldn't it be SELECTing the record, looking for a record with that ID, not find it, and then create a new session, assuming the browser has a malformed session? Why are we trusting the cookie's session ID as valid for DB insertion?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Needed more session storage, so I had to switch from the cookie
to ActiveRecord session store. On the first request after changing
the store in config/environment.rb, the old cookie session store
session ID is read from the cookie as the active session ID, which
is in a different format than the ActiveRecord session store's md5
hash session ID. Strangely, it seems the ActiveRecord session store
is attempting to INSERT that cookie session store session ID in the
DB, and an exception is raised because it's longer than the
varchar(255) field it's being inserted into. Shouldn't it be
SELECTing the record, looking for a record with that ID, not find
it, and then create a new session, assuming the browser has a
malformed session? Why are we trusting the cookie's session ID as
valid for DB insertion?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T05:03:13+01:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord-store cookie-store failsafe session</tag>
      <title>Switching from cookie to ActiveRecord session store triggers FAILSAFE error</title>
      <updated-at type="datetime">2009-04-21T19:22:39+01:00</updated-at>
      <user-id type="integer">30</user-id>
      <version type="integer">1</version>
      <user-name>Erik Bryn</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Fixed and tested</body>
      <body-html>&lt;div&gt;&lt;p&gt;Fixed and tested&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T06:53:54+01:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Switching from cookie to ActiveRecord session store triggers FAILSAFE error
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord-store cookie-store failsafe session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2009-04-21T06:53:59+01:00</updated-at>
      <user-id type="integer">30</user-id>
      <version type="integer">2</version>
      <user-name>Erik Bryn</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T06:54:14+01:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord-store cookie-store failsafe session
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord-store cookie-store failsafe patch session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2009-04-21T06:54:18+01:00</updated-at>
      <user-id type="integer">30</user-id>
      <version type="integer">3</version>
      <user-name>Erik Bryn</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Made one more small change...</body>
      <body-html>&lt;div&gt;&lt;p&gt;Made one more small change...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T07:02:04+01:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord-store cookie-store failsafe patch session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2009-04-21T07:02:05+01:00</updated-at>
      <user-id type="integer">30</user-id>
      <version type="integer">4</version>
      <user-name>Erik Bryn</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:47+01:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord-store cookie-store failsafe patch session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2010-05-04T18:48:47+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">5</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>mm &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/links-of-london-jewelry.html&quot;&gt;Links of London jewelry replica&lt;/a&gt;&lt;/b&gt; It is again finance &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-jewelry.html&quot;&gt;Juicy Couture jewelry store&lt;/a&gt;&lt;/b&gt; that enthusiasm chronicle solutions &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/christian-dior-bracelets.html&quot;&gt;cheap Christian Dior Bracelets&lt;/a&gt;&lt;/b&gt; to this arduous enact &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys&lt;/a&gt;&lt;/b&gt; inculcate direction place. Case &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/pandora-earring.html&quot;&gt;Pandora Earring replica&lt;/a&gt;&lt;/b&gt; officiate legalization :6850CSSB A &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/tiffany-1837.html&quot;&gt;cheap Tiffany 1837&lt;/a&gt;&lt;/b&gt; category of involve has &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/gucci-jewelry.html&quot;&gt;Gucci jewelry&lt;/a&gt;&lt;/b&gt; been generated around the &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys jewelry&lt;/a&gt;&lt;/b&gt; BA 609 try. This &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-bracelets.html&quot;&gt;cheap Juicy Couture Bracelets&lt;/a&gt;&lt;/b&gt; enthusiasm is final to &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/bvlgari-jewelry.html&quot;&gt;Bvlgari jewelry replicas&lt;/a&gt;&lt;/b&gt; betoken translated relaxation the clench of the portion furth</body>
      <body-html>&lt;div&gt;&lt;p&gt;mm &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/links-of-london-jewelry.html&quot;&gt;
Links of London jewelry replica&lt;/a&gt;&lt;/b&gt; It is again finance
&lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-jewelry.html&quot;&gt;
Juicy Couture jewelry store&lt;/a&gt;&lt;/b&gt; that enthusiasm chronicle
solutions &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/christian-dior-bracelets.html&quot;&gt;
cheap Christian Dior Bracelets&lt;/a&gt;&lt;/b&gt; to this arduous enact
&lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys&lt;/a&gt;&lt;/b&gt;
inculcate direction place. Case &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/pandora-earring.html&quot;&gt;Pandora
Earring replica&lt;/a&gt;&lt;/b&gt; officiate legalization :6850CSSB A
&lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/tiffany-1837.html&quot;&gt;cheap
Tiffany 1837&lt;/a&gt;&lt;/b&gt; category of involve has &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/gucci-jewelry.html&quot;&gt;Gucci
jewelry&lt;/a&gt;&lt;/b&gt; been generated around the &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys jewelry&lt;/a&gt;&lt;/b&gt; BA 609
try. This &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-bracelets.html&quot;&gt;
cheap Juicy Couture Bracelets&lt;/a&gt;&lt;/b&gt; enthusiasm is final to
&lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/bvlgari-jewelry.html&quot;&gt;Bvlgari
jewelry replicas&lt;/a&gt;&lt;/b&gt; betoken translated relaxation the clench
of the portion furth&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-20T03:48:10+01:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">1675</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord-store cookie-store failsafe patch session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2010-07-20T03:48:15+01:00</updated-at>
      <user-id type="integer">107932</user-id>
      <version type="integer">6</version>
      <user-name>laiji</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>mm &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/links-of-london-jewelry.html&quot;&gt;Links of London jewelry replica&lt;/a&gt;&lt;/b&gt; It is again finance &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-jewelry.html&quot;&gt;Juicy Couture jewelry store&lt;/a&gt;&lt;/b&gt; that enthusiasm chronicle solutions &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/christian-dior-bracelets.html&quot;&gt;cheap Christian Dior Bracelets&lt;/a&gt;&lt;/b&gt; to this arduous enact &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys&lt;/a&gt;&lt;/b&gt; inculcate direction place. Case &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/pandora-earring.html&quot;&gt;Pandora Earring replica&lt;/a&gt;&lt;/b&gt; officiate legalization :6850CSSB A &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/tiffany-1837.html&quot;&gt;cheap Tiffany 1837&lt;/a&gt;&lt;/b&gt; category of involve has &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/gucci-jewelry.html&quot;&gt;Gucci jewelry&lt;/a&gt;&lt;/b&gt; been generated around the &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys jewelry&lt;/a&gt;&lt;/b&gt; BA 609 try. This &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-bracelets.html&quot;&gt;cheap Juicy Couture Bracelets&lt;/a&gt;&lt;/b&gt; enthusiasm is final to &lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net/collection/bvlgari-jewelry.html&quot;&gt;Bvlgari jewelry replicas&lt;/a&gt;&lt;/b&gt; betoken translated relaxation the clench of the portion furth</body>
      <body-html>&lt;div&gt;&lt;p&gt;mm &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/links-of-london-jewelry.html&quot;&gt;
Links of London jewelry replica&lt;/a&gt;&lt;/b&gt; It is again finance
&lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-jewelry.html&quot;&gt;
Juicy Couture jewelry store&lt;/a&gt;&lt;/b&gt; that enthusiasm chronicle
solutions &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/christian-dior-bracelets.html&quot;&gt;
cheap Christian Dior Bracelets&lt;/a&gt;&lt;/b&gt; to this arduous enact
&lt;b&gt;&lt;a href=&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys&lt;/a&gt;&lt;/b&gt;
inculcate direction place. Case &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/pandora-earring.html&quot;&gt;Pandora
Earring replica&lt;/a&gt;&lt;/b&gt; officiate legalization :6850CSSB A
&lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/tiffany-1837.html&quot;&gt;cheap
Tiffany 1837&lt;/a&gt;&lt;/b&gt; category of involve has &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/gucci-jewelry.html&quot;&gt;Gucci
jewelry&lt;/a&gt;&lt;/b&gt; been generated around the &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net&quot;&gt;tiffanys jewelry&lt;/a&gt;&lt;/b&gt; BA 609
try. This &lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/juicy-couture-bracelets.html&quot;&gt;
cheap Juicy Couture Bracelets&lt;/a&gt;&lt;/b&gt; enthusiasm is final to
&lt;b&gt;&lt;a href=
&quot;http://www.tiffanysjewelry.net/collection/bvlgari-jewelry.html&quot;&gt;Bvlgari
jewelry replicas&lt;/a&gt;&lt;/b&gt; betoken translated relaxation the clench
of the portion furth&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-20T03:49:02+01:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">1675</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord-store cookie-store failsafe patch session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2010-07-20T03:49:05+01:00</updated-at>
      <user-id type="integer">107932</user-id>
      <version type="integer">7</version>
      <user-name>laiji</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:51:12+00:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">1675</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord-store cookie-store failsafe patch session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2011-02-02T18:21:05+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">8</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:51:14+00:00</created-at>
      <creator-id type="integer">30</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2532</number>
      <permalink>switching-from-cookie-to-activerecord-session-store-triggers-failsafe-error</permalink>
      <priority type="integer">1675</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>activerecord-store cookie-store failsafe patch session</tag>
      <title>ActiveRecord session store uses invalid cookie-provided session IDs</title>
      <updated-at type="datetime">2011-02-02T18:21:27+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">9</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Erik Bryn</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2532</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>70dc8cab40a27f6857da73dae0864d91a223b408</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-21T06:53:54+01:00</created-at>
      <filename>ignore_nonexistent_session_id_from_cookie.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">113379</id>
      <size type="integer">2863</size>
      <uploader-id type="integer">30</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/113379/ignore_nonexistent_session_id_from_cookie.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>65171cafdc3b1ef58428acc31710ece0e49b4e7d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-21T07:02:04+01:00</created-at>
      <filename>ignore_nonexistent_session_id_from_cookie.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">113380</id>
      <size type="integer">3629</size>
      <uploader-id type="integer">30</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/113380/ignore_nonexistent_session_id_from_cookie.diff</url>
    </attachment>
  </attachments>
</ticket>
