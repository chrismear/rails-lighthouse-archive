<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-06-30T20:41:43+01:00</created-at>
  <creator-id type="integer">18775</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">518</number>
  <permalink>index-does-not-work-on-fields_for-select</permalink>
  <priority type="integer">15</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>actionpack patch tested</tag>
  <title>index does not work on fields_for select</title>
  <updated-at type="datetime">2009-01-21T11:08:48+00:00</updated-at>
  <user-id type="integer">23523</user-id>
  <version type="integer">8</version>
  <user-name>Tom Stuart</user-name>
  <creator-name>Kevin Glowacz</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>@@@ ruby
fields_for :post, @post, :index =&gt; 1 do |f|
  f.select(:category, %w( abe &lt;mus&gt; hest))
end
@@@

currently does not add the index to the id and name.

This patch fixes and tests for it (including the other select methods)
It also adds tests to prove that f.select works with auto_index</original-body>
  <latest-body>@@@ ruby
fields_for :post, @post, :index =&gt; 1 do |f|
  f.select(:category, %w( abe &lt;mus&gt; hest))
end
@@@

currently does not add the index to the id and name.

This patch fixes and tests for it (including the other select methods)
It also adds tests to prove that f.select works with auto_index</latest-body>
  <original-body-html>&lt;div&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;fields_for :post, @post, :index =&amp;gt; 1 do |f|
  f.select(:category, %w( abe &amp;lt;mus&amp;gt; hest))
end&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
currently does not add the index to the id and name.
&lt;/p&gt;&lt;p&gt;
This patch fixes and tests for it (including the other select methods)
&lt;/p&gt;&lt;p&gt;
It also adds tests to prove that f.select works with auto_index
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@@@ ruby
fields_for :post, @post, :index =&gt; 1 do |f|
  f.select(:category, %w( abe &lt;mus&gt; hest))
end
@@@

currently does not add the index to the id and name.

This patch fixes and tests for it (including the other select methods)
It also adds tests to prove that f.select works with auto_index</body>
      <body-html>&lt;div&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;fields_for :post, @post, :index =&amp;gt; 1 do |f|
  f.select(:category, %w( abe &amp;lt;mus&amp;gt; hest))
end&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
currently does not add the index to the id and name.
&lt;/p&gt;&lt;p&gt;
This patch fixes and tests for it (including the other select methods)
&lt;/p&gt;&lt;p&gt;
It also adds tests to prove that f.select works with auto_index
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-06-30T20:41:43+01:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2008-06-30T20:41:43+01:00</updated-at>
      <user-id type="integer">18775</user-id>
      <version type="integer">1</version>
      <user-name>Kevin Glowacz</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Merged Kevin's patch and my old patch for what I feel like is a better patch. Any love?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Merged Kevin's patch and my old patch for what I feel like is a better patch. Any love?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-12T23:03:44+01:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2008-07-12T23:03:44+01:00</updated-at>
      <user-id type="integer">9830</user-id>
      <version type="integer">2</version>
      <user-name>RSL</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Updated to right format. My bad :(</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Updated to right format. My bad :(
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-13T00:38:21+01:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2008-07-13T00:38:21+01:00</updated-at>
      <user-id type="integer">9830</user-id>
      <version type="integer">3</version>
      <user-name>RSL</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Oops. Fixed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Oops. Fixed.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-13T01:00:55+01:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2008-07-13T01:00:55+01:00</updated-at>
      <user-id type="integer">9830</user-id>
      <version type="integer">4</version>
      <user-name>RSL</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [95812d5eafc3b63ce5eeb0748a5d0132f5108b64]) Ensure :index works with fields_for select methods. [#518 state:resolved]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/95812d5eafc3b63ce5eeb0748a5d0132f5108b64</body>
      <body-html>&lt;div&gt;&lt;p&gt;
(from [95812d5eafc3b63ce5eeb0748a5d0132f5108b64]) Ensure :index works with fields_for select methods. [#518 state:resolved]
&lt;/p&gt;&lt;p&gt;
Signed-off-by: Pratik Naik 
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/95812d5eafc3b63ce5eeb0748a5d0132f5108b64&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-14T01:44:34+01:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2008-07-14T01:44:34+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">5</version>
      <user-name>Repository</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Can we have the same treatment for date_helper.rb, please?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Can we have the same treatment for date_helper.rb, please?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-14T08:02:20+01:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2008-07-14T08:02:20+01:00</updated-at>
      <user-id type="integer">813</user-id>
      <version type="integer">6</version>
      <user-name>Tom Stuart</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Is this the same issue as stated here (http://dev.rubyonrails.org/ticket/10551)?

Seems to me that date_helper.rb needs to be updated as Tom Stuart pointed out.

Patch on Rails Trac works (I did not run the test) but basically it changes the following:

elsif @auto_index
to
elsif defined?(@auto_index)

Attached patch.diff which includes test updates but this was for rails v.2.0.1. This must have gotten lost during the switch to Lighthouse.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Is this the same issue as stated here (&lt;a href=&quot;http://dev.rubyonrails.org/ticket/10551)&quot;&gt;http://dev.rubyonrails.org/ticke...&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Seems to me that date_helper.rb needs to be updated as Tom Stuart pointed out.&lt;/p&gt;

&lt;p&gt;Patch on Rails Trac works (I did not run the test) but basically it changes the following:&lt;/p&gt;

&lt;p&gt;elsif @auto_index
to
elsif defined?(@auto_index)&lt;/p&gt;

&lt;p&gt;Attached patch.diff which includes test updates but this was for rails v.2.0.1. This must have gotten lost during the switch to Lighthouse.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-26T00:41:36+01:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2008-08-26T00:41:36+01:00</updated-at>
      <user-id type="integer">29978</user-id>
      <version type="integer">7</version>
      <user-name>Dewey Bushaw</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Resolved by [this commit](http://github.com/rails/rails/commit/7260852).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Resolved by &lt;a href=&quot;http://github.com/rails/rails/commit/7260852&quot;&gt;this commit&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-01-21T11:08:44+00:00</created-at>
      <creator-id type="integer">18775</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">518</number>
      <permalink>index-does-not-work-on-fields_for-select</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionpack patch tested</tag>
      <title>index does not work on fields_for select</title>
      <updated-at type="datetime">2009-01-21T11:08:48+00:00</updated-at>
      <user-id type="integer">23523</user-id>
      <version type="integer">8</version>
      <user-name>Tom Stuart</user-name>
      <creator-name>Kevin Glowacz</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/518</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>709c5d50924f8814073e6166ccc3983ae7949580</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-06-30T20:41:43+01:00</created-at>
      <filename>index-on-fields_for.select.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">30106</id>
      <size type="integer">7444</size>
      <uploader-id type="integer">18775</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/30106/index-on-fields_for.select.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>1cfca5c799c840d6e167cc0bc7a4d81330098384</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-07-13T01:00:55+01:00</created-at>
      <filename>merged_patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">32258</id>
      <size type="integer">45590</size>
      <uploader-id type="integer">9830</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/32258/merged_patch.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>2e46c279404d25c949935d0f6b6f00836d524513</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-08-26T00:41:35+01:00</created-at>
      <filename>patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">41424</id>
      <size type="integer">3781</size>
      <uploader-id type="integer">29978</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/41424/patch.diff</url>
    </attachment>
  </attachments>
</ticket>
