<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">6</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-10-15T07:37:48+01:00</created-at>
  <creator-id type="integer">53012</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">2415</number>
  <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
  <priority type="integer">1568</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
  <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
  <updated-at type="datetime">2010-10-15T23:01:31+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">37</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>vlad (at breyter)</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>When a parent accepts_nested_attributes_for :chilld and you call parent.update_attributes(hash) if the hash has an :id entry in the child_attributes subhash then the update_attributes call with return true without updating the associated object, this happens regardless of if the rest of the data in the subhash is valid or not, here is an example.

@@@ ruby
order = Order.first
=&gt; #&lt;Order id: 1, client_id: 1, amount: 123, created_at: &quot;2009-04-03 23:09:03&quot;, updated_at: &quot;2009-04-03 23:09:03&quot;&gt;
attrs = {:client_attributes =&gt; {:state =&gt; &quot;ASDASDADAD&quot;, :id =&gt; 12931204}}
=&gt; {:client_attributes=&gt;{:state=&gt;&quot;ASDASDADAD&quot;, :id=&gt;12931204}}
order.client
=&gt; #&lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&gt;
order.update_attributes(attrs)
=&gt; true
order.client
=&gt; #&lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&gt;
attrs = {:client_attributes =&gt; {:state =&gt; &quot;ASDASDADAD&quot;}}
=&gt; {:client_attributes=&gt;{:state=&gt;&quot;ASDASDADAD&quot;}}
order.update_attributes(attrs)
=&gt; false
order.client
=&gt; #&lt;Client id: nil, name: nil, state: &quot;ASDASDADAD&quot;, created_at: nil, updated_at: nil&gt;
order.errors.full_messages
=&gt; [&quot;Client state is not included in the list&quot;]
@@@</original-body>
  <latest-body>When a parent accepts_nested_attributes_for :chilld and you call parent.update_attributes(hash) if the hash has an :id entry in the child_attributes subhash then the update_attributes call with return true without updating the associated object, this happens regardless of if the rest of the data in the subhash is valid or not, here is an example.

@@@ ruby
order = Order.first
=&gt; #&lt;Order id: 1, client_id: 1, amount: 123, created_at: &quot;2009-04-03 23:09:03&quot;, updated_at: &quot;2009-04-03 23:09:03&quot;&gt;
attrs = {:client_attributes =&gt; {:state =&gt; &quot;ASDASDADAD&quot;, :id =&gt; 12931204}}
=&gt; {:client_attributes=&gt;{:state=&gt;&quot;ASDASDADAD&quot;, :id=&gt;12931204}}
order.client
=&gt; #&lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&gt;
order.update_attributes(attrs)
=&gt; true
order.client
=&gt; #&lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&gt;
attrs = {:client_attributes =&gt; {:state =&gt; &quot;ASDASDADAD&quot;}}
=&gt; {:client_attributes=&gt;{:state=&gt;&quot;ASDASDADAD&quot;}}
order.update_attributes(attrs)
=&gt; false
order.client
=&gt; #&lt;Client id: nil, name: nil, state: &quot;ASDASDADAD&quot;, created_at: nil, updated_at: nil&gt;
order.errors.full_messages
=&gt; [&quot;Client state is not included in the list&quot;]
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When a parent accepts_nested_attributes_for :chilld and you call
parent.update_attributes(hash) if the hash has an :id entry in the
child_attributes subhash then the update_attributes call with
return true without updating the associated object, this happens
regardless of if the rest of the data in the subhash is valid or
not, here is an example.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;order = Order.first
=&amp;gt; #&amp;lt;Order id: 1, client_id: 1, amount: 123, created_at: &quot;2009-04-03 23:09:03&quot;, updated_at: &quot;2009-04-03 23:09:03&quot;&amp;gt;
attrs = {:client_attributes =&amp;gt; {:state =&amp;gt; &quot;ASDASDADAD&quot;, :id =&amp;gt; 12931204}}
=&amp;gt; {:client_attributes=&amp;gt;{:state=&amp;gt;&quot;ASDASDADAD&quot;, :id=&amp;gt;12931204}}
order.client
=&amp;gt; #&amp;lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&amp;gt;
order.update_attributes(attrs)
=&amp;gt; true
order.client
=&amp;gt; #&amp;lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&amp;gt;
attrs = {:client_attributes =&amp;gt; {:state =&amp;gt; &quot;ASDASDADAD&quot;}}
=&amp;gt; {:client_attributes=&amp;gt;{:state=&amp;gt;&quot;ASDASDADAD&quot;}}
order.update_attributes(attrs)
=&amp;gt; false
order.client
=&amp;gt; #&amp;lt;Client id: nil, name: nil, state: &quot;ASDASDADAD&quot;, created_at: nil, updated_at: nil&amp;gt;
order.errors.full_messages
=&amp;gt; [&quot;Client state is not included in the list&quot;]&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When a parent accepts_nested_attributes_for :chilld and you call parent.update_attributes(hash) if the hash has an :id entry in the child_attributes subhash then the update_attributes call with return true without updating the associated object, this happens regardless of if the rest of the data in the subhash is valid or not, here is an example.

@@@ ruby
order = Order.first
=&gt; #&lt;Order id: 1, client_id: 1, amount: 123, created_at: &quot;2009-04-03 23:09:03&quot;, updated_at: &quot;2009-04-03 23:09:03&quot;&gt;
attrs = {:client_attributes =&gt; {:state =&gt; &quot;ASDASDADAD&quot;, :id =&gt; 12931204}}
=&gt; {:client_attributes=&gt;{:state=&gt;&quot;ASDASDADAD&quot;, :id=&gt;12931204}}
order.client
=&gt; #&lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&gt;
order.update_attributes(attrs)
=&gt; true
order.client
=&gt; #&lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&gt;
attrs = {:client_attributes =&gt; {:state =&gt; &quot;ASDASDADAD&quot;}}
=&gt; {:client_attributes=&gt;{:state=&gt;&quot;ASDASDADAD&quot;}}
order.update_attributes(attrs)
=&gt; false
order.client
=&gt; #&lt;Client id: nil, name: nil, state: &quot;ASDASDADAD&quot;, created_at: nil, updated_at: nil&gt;
order.errors.full_messages
=&gt; [&quot;Client state is not included in the list&quot;]
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;When a parent accepts_nested_attributes_for :chilld and you call
parent.update_attributes(hash) if the hash has an :id entry in the
child_attributes subhash then the update_attributes call with
return true without updating the associated object, this happens
regardless of if the rest of the data in the subhash is valid or
not, here is an example.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;order = Order.first
=&amp;gt; #&amp;lt;Order id: 1, client_id: 1, amount: 123, created_at: &quot;2009-04-03 23:09:03&quot;, updated_at: &quot;2009-04-03 23:09:03&quot;&amp;gt;
attrs = {:client_attributes =&amp;gt; {:state =&amp;gt; &quot;ASDASDADAD&quot;, :id =&amp;gt; 12931204}}
=&amp;gt; {:client_attributes=&amp;gt;{:state=&amp;gt;&quot;ASDASDADAD&quot;, :id=&amp;gt;12931204}}
order.client
=&amp;gt; #&amp;lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&amp;gt;
order.update_attributes(attrs)
=&amp;gt; true
order.client
=&amp;gt; #&amp;lt;Client id: 1, name: &quot;blad&quot;, state: &quot;NY&quot;, created_at: &quot;2009-04-03 23:07:50&quot;, updated_at: &quot;2009-04-03 23:07:50&quot;&amp;gt;
attrs = {:client_attributes =&amp;gt; {:state =&amp;gt; &quot;ASDASDADAD&quot;}}
=&amp;gt; {:client_attributes=&amp;gt;{:state=&amp;gt;&quot;ASDASDADAD&quot;}}
order.update_attributes(attrs)
=&amp;gt; false
order.client
=&amp;gt; #&amp;lt;Client id: nil, name: nil, state: &quot;ASDASDADAD&quot;, created_at: nil, updated_at: nil&amp;gt;
order.errors.full_messages
=&amp;gt; [&quot;Client state is not included in the list&quot;]&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-04T07:12:36+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-01-03T21:09:07+00:00</updated-at>
      <user-id type="integer">53012</user-id>
      <version type="integer">1</version>
      <user-name>vlad (at breyter)</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-30T19:55:16+00:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2009-12-30T19:55:20+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">2</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-07T16:24:25+00:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>2.3.2 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-01-07T16:24:28+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">3</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [9550916903c931161f04a98091fba712d7fa5c1d]) Raise a RecordNotFound if an ID in nested attributes is given but doesn't return a record. [#2415 state:resolved]
http://github.com/rails/rails/commit/9550916903c931161f04a98091fba712d7fa5c1d</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/9550916903c931161f04a98091fba712d7fa5c1d&quot;
title=
&quot;Changeset [9550916903c931161f04a98091fba712d7fa5c1d]&quot;&gt;[9550916903c931161f04a98091fba712d7fa5c1d]&lt;/a&gt;)
Raise a RecordNotFound if an ID in nested attributes is given but
doesn't return a record. [&lt;a href=&quot;/projects/8994/tickets/2415&quot;
title=&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt; state:resolved] &lt;a href=
&quot;http://github.com/rails/rails/commit/9550916903c931161f04a98091fba712d7fa5c1d&quot;&gt;
http://github.com/rails/rails/commit/9550916903c931161f04a98091fba7...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-07T19:15:03+00:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-01-07T19:15:04+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">4</version>
      <user-name>Repository</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [0dbe0f670e08e6adfedc395dadb9859ca2df6d4b]) Raise a RecordNotFound if an ID in nested attributes is given but doesn't return a record. [#2415 state:resolved]
http://github.com/rails/rails/commit/0dbe0f670e08e6adfedc395dadb9859ca2df6d4b</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/0dbe0f670e08e6adfedc395dadb9859ca2df6d4b&quot;
title=
&quot;Changeset [0dbe0f670e08e6adfedc395dadb9859ca2df6d4b]&quot;&gt;[0dbe0f670e08e6adfedc395dadb9859ca2df6d4b]&lt;/a&gt;)
Raise a RecordNotFound if an ID in nested attributes is given but
doesn't return a record. [&lt;a href=&quot;/projects/8994/tickets/2415&quot;
title=&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt; state:resolved] &lt;a href=
&quot;http://github.com/rails/rails/commit/0dbe0f670e08e6adfedc395dadb9859ca2df6d4b&quot;&gt;
http://github.com/rails/rails/commit/0dbe0f670e08e6adfedc395dadb985...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-07T19:32:29+00:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-01-07T19:32:30+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">5</version>
      <user-name>Repository</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This patch does help clarify what is going on, but does not solve the issue when creating a new object.

For example:

Order model:

class Order &lt; ActiveRecord::Base
 belongs_to :customer
 accepts_nested_attributes_for :customer
end

Parameters: 

{&quot;action&quot;=&gt;&quot;create&quot;, &quot;authenticity_token&quot;=&gt;&quot;ZXdeEAgTsQFIihAFgVBaTsf9GR6o/cuCNmphc4OaMzU=&quot;, &quot;order&quot;=&gt;{ &quot;customer_attributes&quot;=&gt;{&quot;company&quot;=&gt;&quot;TestCompany&quot;, &quot;phone_alt&quot;=&gt;&quot;555-555-8251&quot;, &quot;id&quot;=&gt;&quot;101&quot;, &quot;last_name&quot;=&gt;&quot;Jones&quot;, &quot;phone&quot;=&gt;&quot;&quot;, &quot;fax&quot;=&gt;&quot;555-222-3333&quot;, &quot;first_name&quot;=&gt;&quot;Bob&quot;, &quot;email&quot;=&gt;&quot;bob@notreal.com&quot;}, &quot;invoice_comments&quot;=&gt;&quot;&quot;, &quot;customer_id&quot;=&gt;&quot;101&quot;} }

Results in:

ActiveRecord::RecordNotFound (Couldn't find Customer with ID=101 for Order with ID=):

To further explain, the use-case-scenario of this is that I am building a system where there will be an order form, and in this order form there is a nested form for a customer.  The goals of the application are to both allow the user to create a new order, and simultaneously associate this new order with a given customer (in this case customer id 101) and also if they choose update the customers information at the same time.  (IE - the customer has made orders in the past, but calls in to make a new order today, and also gives a new phone number.  no need to go back to another form to update the phone number when you should just be able to do it from the order form.)

For fun I have also tried to omit params[:order][:customer_id] = 101, but this does not make a difference.  Tried this with the http://github.com/rails/rails/commits/2-3-stable branch checked out moments ago.

Thanks for any light you can shed!</body>
      <body-html>&lt;div&gt;&lt;p&gt;This patch does help clarify what is going on, but does not
solve the issue when creating a new object.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;p&gt;Order model:&lt;/p&gt;
&lt;p&gt;class Order &amp;lt; ActiveRecord::Base&lt;br&gt;
belongs_to :customer accepts_nested_attributes_for :customer
end&lt;/p&gt;
&lt;p&gt;Parameters:&lt;/p&gt;
&lt;p&gt;{&quot;action&quot;=&amp;gt;&quot;create&quot;,
&quot;authenticity_token&quot;=&amp;gt;&quot;ZXdeEAgTsQFIihAFgVBaTsf9GR6o/cuCNmphc4OaMzU=&quot;,
&quot;order&quot;=&amp;gt;{
&quot;customer_attributes&quot;=&amp;gt;{&quot;company&quot;=&amp;gt;&quot;TestCompany&quot;,
&quot;phone_alt&quot;=&amp;gt;&quot;555-555-8251&quot;, &quot;id&quot;=&amp;gt;&quot;101&quot;,
&quot;last_name&quot;=&amp;gt;&quot;Jones&quot;, &quot;phone&quot;=&amp;gt;&quot;&quot;, &quot;fax&quot;=&amp;gt;&quot;555-222-3333&quot;,
&quot;first_name&quot;=&amp;gt;&quot;Bob&quot;, &quot;email&quot;=&amp;gt;&quot;&lt;a href=
&quot;mailto:bob@notreal.com&quot;&gt;bob@notreal.com&lt;/a&gt;&quot;},
&quot;invoice_comments&quot;=&amp;gt;&quot;&quot;, &quot;customer_id&quot;=&amp;gt;&quot;101&quot;} }&lt;/p&gt;
&lt;p&gt;Results in:&lt;/p&gt;
&lt;p&gt;ActiveRecord::RecordNotFound (Couldn't find Customer with ID=101
for Order with ID=):&lt;/p&gt;
&lt;p&gt;To further explain, the use-case-scenario of this is that I am
building a system where there will be an order form, and in this
order form there is a nested form for a customer. The goals of the
application are to both allow the user to create a new order, and
simultaneously associate this new order with a given customer (in
this case customer id 101) and also if they choose update the
customers information at the same time. (IE - the customer has made
orders in the past, but calls in to make a new order today, and
also gives a new phone number. no need to go back to another form
to update the phone number when you should just be able to do it
from the order form.)&lt;/p&gt;
&lt;p&gt;For fun I have also tried to omit params[:order][:customer_id] =
101, but this does not make a difference. Tried this with the
&lt;a href=
&quot;http://github.com/rails/rails/commits/2-3-stable&quot;&gt;http://github.com/rails/rails/commits/2-3-stable&lt;/a&gt;
branch checked out moments ago.&lt;/p&gt;
&lt;p&gt;Thanks for any light you can shed!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-20T01:38:44+00:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-01-20T01:38:46+00:00</updated-at>
      <user-id type="integer">74993</user-id>
      <version type="integer">6</version>
      <user-name>Scott Rushforth</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-20T18:24:27+00:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 accepts_nested_attributes_for
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-01-20T18:24:29+00:00</updated-at>
      <user-id type="integer">74993</user-id>
      <version type="integer">7</version>
      <user-name>Scott Rushforth</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>As Scoot Rushforth described it, the patch doesn't solve the problem. The ActiveRecord::RecordNotFound exception should be raised only if the nested record is not found, __not__ when the association is missing. In that case a new association in the join table should be created.

The description of the method assign_nested_attributes_for_collection_association (nested_attributes.rb) says:
&gt;    Hashes with an &lt;tt&gt;:id&lt;/tt&gt; value matching an existing associated record
&gt;    will update that record. Hashes without an &lt;tt&gt;:id&lt;/tt&gt; value will build
&gt;    a new record for the association. Hashes with a matching &lt;tt&gt;:id&lt;/tt&gt;
&gt;    value and a &lt;tt&gt;:_destroy&lt;/tt&gt; key set to a truthy value will mark the
&gt;    matched record for destruction.

If the id is not passed, a new record and a new association will be created. 

If the id is passed, the record will be updated (as described), but the association should be checked/created as well.

In a nested form, the user should be able to either create a new (nested) record, or choose an existing one. Currently, choosing an existing record results in the ActiveRecord::RecordNotFound error.</body>
      <body-html>&lt;div&gt;&lt;p&gt;As Scoot Rushforth described it, the patch doesn't solve the
problem. The ActiveRecord::RecordNotFound exception should be
raised only if the nested record is not found, &lt;strong&gt;not&lt;/strong&gt;
when the association is missing. In that case a new association in
the join table should be created.&lt;/p&gt;
&lt;p&gt;The description of the method
assign_nested_attributes_for_collection_association
(nested_attributes.rb) says:&lt;br&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hashes with an &lt;tt&gt;:id&lt;/tt&gt; value matching an existing
associated record will update that record. Hashes without an
&lt;tt&gt;:id&lt;/tt&gt; value will build a new record for the association.
Hashes with a matching &lt;tt&gt;:id&lt;/tt&gt; value and a &lt;tt&gt;:_destroy&lt;/tt&gt;
key set to a truthy value will mark the matched record for
destruction.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If the id is not passed, a new record and a new association will
be created.&lt;/p&gt;
&lt;p&gt;If the id is passed, the record will be updated (as described),
but the association should be checked/created as well.&lt;/p&gt;
&lt;p&gt;In a nested form, the user should be able to either create a new
(nested) record, or choose an existing one. Currently, choosing an
existing record results in the ActiveRecord::RecordNotFound
error.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-13T16:53:40+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-05-13T17:32:50+01:00</updated-at>
      <user-id type="integer">99157</user-id>
      <version type="integer">8</version>
      <user-name>David</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This ticket breaks our application. I've distilled it down to http://github.com/radar/rails-test-app/tree/anaf_has_one.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This ticket breaks our application. I've distilled it down to
&lt;a href=
&quot;http://github.com/radar/rails-test-app/tree/anaf_has_one&quot;&gt;http://github.com/radar/rails-test-app/tree/anaf_has_one&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-31T07:55:48+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-05-31T07:55:57+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">9</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hey Ryan, can you add a failing test to Rails test suite? In my understanding, the current patch is completely wrong, so feel free to revert it as well!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Ryan, can you add a failing test to Rails test suite? In my
understanding, the current patch is completely wrong, so feel free
to revert it as well!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-31T08:00:06+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
:milestone: 50064
:assigned_user: 8406
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-05-31T08:00:17+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">10</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This patch *should* duplicate the issue, but it's not. I have to leave work now (end of the day). As far as I know, this is what is happening.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This patch &lt;em&gt;should&lt;/em&gt; duplicate the issue, but it's not. I
have to leave work now (end of the day). As far as I know, this is
what is happening.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-31T08:27:10+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-05-31T08:27:20+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">11</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>It seems, this bug is a side effect of another bug: 4766.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It seems, this bug is a side effect of another bug: 4766.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-07T15:54:26+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-07T15:54:39+01:00</updated-at>
      <user-id type="integer">102021</user-id>
      <version type="integer">12</version>
      <user-name>Sharad Jain</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>running into the same issue with belongs_to relationships.</body>
      <body-html>&lt;div&gt;&lt;p&gt;running into the same issue with belongs_to relationships.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-09T19:41:51+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-09T19:42:08+01:00</updated-at>
      <user-id type="integer">21548</user-id>
      <version type="integer">13</version>
      <user-name>George Montana Harkin</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@Ryan,

I think the test just needs an :id field.  

I've created a patch that solves our issues related to this bug. It fixes the problem by creating a new instance of the class if attributes['id'] is set.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Ryan,&lt;/p&gt;
&lt;p&gt;I think the test just needs an :id field.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;I've created a patch that solves our issues related to this bug.
It fixes the problem by creating a new instance of the class if
attributes['id'] is set.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-11T21:09:30+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 2.3.6 accepts_nested_attributes_for
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for &quot;rails 2.3.8&quot;</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-11T21:09:45+01:00</updated-at>
      <user-id type="integer">21548</user-id>
      <version type="integer">14</version>
      <user-name>George Montana Harkin</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>We need a failing test case in order to apply any patch. Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;We need a failing test case in order to apply any patch.
Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-11T21:27:14+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for &quot;rails 2.3.8&quot;</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-11T21:27:30+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">15</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Thanks for the note Jos&#233;.  Attached is an updated test (which found issues in my patch.) and an updated patch (thanks to the tests).

Apply the tests patch to see the issues. Apply the code patch to fix the tests.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks for the note Jos&amp;eacute;. Attached is an updated test
(which found issues in my patch.) and an updated patch (thanks to
the tests).&lt;/p&gt;
&lt;p&gt;Apply the tests patch to see the issues. Apply the code patch to
fix the tests.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-14T17:48:03+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 accepts_nested_attributes_for &quot;rails 2.3.8&quot;</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-14T17:48:38+01:00</updated-at>
      <user-id type="integer">21548</user-id>
      <version type="integer">16</version>
      <user-name>George Montana Harkin</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-14T18:38:44+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 2.3.6 accepts_nested_attributes_for &quot;rails 2.3.8&quot;
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-14T18:39:01+01:00</updated-at>
      <user-id type="integer">21548</user-id>
      <version type="integer">17</version>
      <user-name>George Montana Harkin</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Same for me.

class Part &lt; ActiveRecord::Base
end

class Partquantity &lt; ActiveRecord::Base
  belongs_to :part
### also same problem with has_one
  accepts_nested_attributes_for :part
end

&lt;% form_for(@partquantity) do |pq_form| %&gt;
  &lt;%= pq_form.error_messages %&gt;

 &lt;% pq_form.fields_for :part do |part_form| %&gt;
   &lt;p&gt;
     &lt;%= part_form.label :id, 'Select Part:' %&gt;
     &lt;%= part_form.select :id,  options_from_collection_for_select(@parts, 'id', 'code') %&gt;
   &lt;/p&gt;
 &lt;% end %&gt;
  ....
 &lt;% end %&gt;


Form submission results in the rollowing request attributes:
{&quot;authenticity_token&quot;=&gt;&quot;K0AhiY3Uozqj9VpgqhswgXcNMNuO2Yzfgfp3xOgsQrs=&quot;,
 &quot;partquantity&quot;=&gt;{&quot;part_attributes&quot;=&gt;{&quot;id&quot;=&gt;&quot;2&quot;},
 &quot;quantity&quot;=&gt;&quot;ii&quot;},
 &quot;commit&quot;=&gt;&quot;Create&quot;}

and when I do @partquantity = Partquantity.new(params[:partquantity) I get:

Couldn't find Part with ID=2 for Partquantity with ID=</body>
      <body-html>&lt;div&gt;&lt;p&gt;Same for me.&lt;/p&gt;
&lt;p&gt;class Part &amp;lt; ActiveRecord::Base&lt;br&gt;
end&lt;/p&gt;
&lt;p&gt;class Partquantity &amp;lt; ActiveRecord::Base&lt;br&gt;
belongs_to :part&lt;/p&gt;
&lt;h3&gt;also same problem with has_one&lt;/h3&gt;
&lt;p&gt;accepts_nested_attributes_for :part end&lt;/p&gt;
&lt;p&gt;&amp;lt;% form_for(@partquantity) do |pq_form| %&amp;gt;&lt;br&gt;
&amp;lt;%= pq_form.error_messages %&amp;gt;&lt;/p&gt;
&lt;p&gt;&amp;lt;% pq_form.fields_for :part do |part_form| %&amp;gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; &amp;lt;%= part_form.label :id, 'Select Part:' %&amp;gt;
 &amp;lt;%= part_form.select :id,  options_from_collection_for_select(@parts, 'id', 'code') %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&amp;lt;% end %&amp;gt; .... &amp;lt;% end %&amp;gt;
&lt;p&gt;Form submission results in the rollowing request attributes:&lt;br&gt;
{&quot;authenticity_token&quot;=&amp;gt;&quot;K0AhiY3Uozqj9VpgqhswgXcNMNuO2Yzfgfp3xOgsQrs=&quot;,
&quot;partquantity&quot;=&amp;gt;{&quot;part_attributes&quot;=&amp;gt;{&quot;id&quot;=&amp;gt;&quot;2&quot;},
&quot;quantity&quot;=&amp;gt;&quot;ii&quot;}, &quot;commit&quot;=&amp;gt;&quot;Create&quot;}&lt;/p&gt;
&lt;p&gt;and when I do @partquantity =
Partquantity.new(params[:partquantity) I get:&lt;/p&gt;
&lt;p&gt;Couldn't find Part with ID=2 for Partquantity with ID=&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-16T23:54:19+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-16T23:54:32+01:00</updated-at>
      <user-id type="integer">103589</user-id>
      <version type="integer">18</version>
      <user-name>techy_bolek</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Hey George, thanks for the patch! Just two notes: could you please create them using the format described here: 

http://rails.lighthouseapp.com/projects/8994/sending-patches

Also, it would be better if you used &quot;reflect_on_association(association_name)&quot; to retrieve associations (since it's the official API) instead of &quot;reflections[association_name]&quot;.

Thanks a bunch!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey George, thanks for the patch! Just two notes: could you
please create them using the format described here:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://rails.lighthouseapp.com/projects/8994/sending-patches&quot;&gt;http://rails.lighthouseapp.com/projects/8994/sending-patches&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Also, it would be better if you used
&quot;reflect_on_association(association_name)&quot; to retrieve associations
(since it's the official API) instead of
&quot;reflections[association_name]&quot;.&lt;/p&gt;
&lt;p&gt;Thanks a bunch!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T08:26:32+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-23T08:26:45+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">19</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Jos&#233;, An updated patch is attached.

I've also created a branch in github if that is easier: http://github.com/harking/rails/tree/2415_fix_for_accepts_nested_attributes_for</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jos&amp;eacute;, An updated patch is attached.&lt;/p&gt;
&lt;p&gt;I've also created a branch in github if that is easier: &lt;a href=
&quot;http://github.com/harking/rails/tree/2415_fix_for_accepts_nested_attributes_for&quot;&gt;
http://github.com/harking/rails/tree/2415_fix_for_accepts_nested_at...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T16:25:42+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-23T16:25:57+01:00</updated-at>
      <user-id type="integer">21548</user-id>
      <version type="integer">20</version>
      <user-name>George Montana Harkin</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>George, I already applied in the 2-3-stable branch. Could you please provide a patch for master?</body>
      <body-html>&lt;div&gt;&lt;p&gt;George, I already applied in the 2-3-stable branch. Could you
please provide a patch for master?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T16:32:26+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-23T16:33:10+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">21</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T16:32:41+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 73534
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-23T16:32:57+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">22</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>(from [7d2173ec5c68e10807da96f4bc8bc6ab1e89c167]) Fixes #2415 by creating a new instance of the Model when saving attributes to that model and the associated attributes already exist. Tests included. [#2415 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/7d2173ec5c68e10807da96f4bc8bc6ab1e89c167</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/7d2173ec5c68e10807da96f4bc8bc6ab1e89c167&quot;
title=
&quot;Changeset [7d2173ec5c68e10807da96f4bc8bc6ab1e89c167]&quot;&gt;[7d2173ec5c68e10807da96f4bc8bc6ab1e89c167]&lt;/a&gt;)
Fixes &lt;a href=&quot;/projects/8994/tickets/2415&quot; title=
&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt; by creating a new instance of the Model
when saving attributes to that model and the associated attributes
already exist. Tests included. [&lt;a href=
&quot;/projects/8994/tickets/2415&quot; title=&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/7d2173ec5c68e10807da96f4bc8bc6ab1e89c167&quot;&gt;
http://github.com/rails/rails/commit/7d2173ec5c68e10807da96f4bc8bc6...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-23T16:39:02+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-23T16:39:16+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">23</version>
      <user-name>Repository</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>(from [7d2173ec5c68e10807da96f4bc8bc6ab1e89c167]) Fixes #2415 by creating a new instance of the Model when saving attributes to that model and the associated attributes already exist. Tests included. [#2415 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/7d2173ec5c68e10807da96f4bc8bc6ab1e89c167</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/7d2173ec5c68e10807da96f4bc8bc6ab1e89c167&quot;
title=
&quot;Changeset [7d2173ec5c68e10807da96f4bc8bc6ab1e89c167]&quot;&gt;[7d2173ec5c68e10807da96f4bc8bc6ab1e89c167]&lt;/a&gt;)
Fixes &lt;a href=&quot;/projects/8994/tickets/2415&quot; title=
&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt; by creating a new instance of the Model
when saving attributes to that model and the associated attributes
already exist. Tests included. [&lt;a href=
&quot;/projects/8994/tickets/2415&quot; title=&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/7d2173ec5c68e10807da96f4bc8bc6ab1e89c167&quot;&gt;
http://github.com/rails/rails/commit/7d2173ec5c68e10807da96f4bc8bc6...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-23T16:39:06+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-23T16:39:31+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">24</version>
      <user-name>Repository</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Needs a patch for master.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Needs a patch for master.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T16:40:27+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-23T16:40:41+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">25</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Attached is a patch for master. I just manually applied the 2-3-stable patch. The tests pass so I didn't change anything. Also maintained ownership because George did all the hardwork! :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached is a patch for master. I just manually applied the
2-3-stable patch. The tests pass so I didn't change anything. Also
maintained ownership because George did all the hardwork! :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-27T14:39:07+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-27T14:39:33+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">26</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>(from [0c0b0aa0f223523331afdc157fb3992a121bf497]) Fixes #2415 by creating a new instance of the Model when saving attributes to that model and the associated attributes already exist. Tests included. [#2415 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/0c0b0aa0f223523331afdc157fb3992a121bf497</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/0c0b0aa0f223523331afdc157fb3992a121bf497&quot;
title=
&quot;Changeset [0c0b0aa0f223523331afdc157fb3992a121bf497]&quot;&gt;[0c0b0aa0f223523331afdc157fb3992a121bf497]&lt;/a&gt;)
Fixes &lt;a href=&quot;/projects/8994/tickets/2415&quot; title=
&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt; by creating a new instance of the Model
when saving attributes to that model and the associated attributes
already exist. Tests included. [&lt;a href=
&quot;/projects/8994/tickets/2415&quot; title=&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/0c0b0aa0f223523331afdc157fb3992a121bf497&quot;&gt;
http://github.com/rails/rails/commit/0c0b0aa0f223523331afdc157fb399...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-27T15:59:48+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-27T16:00:04+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">27</version>
      <user-name>Repository</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>(from [0c0b0aa0f223523331afdc157fb3992a121bf497]) Fixes #2415 by creating a new instance of the Model when saving attributes to that model and the associated attributes already exist. Tests included. [#2415 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/0c0b0aa0f223523331afdc157fb3992a121bf497</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/0c0b0aa0f223523331afdc157fb3992a121bf497&quot;
title=
&quot;Changeset [0c0b0aa0f223523331afdc157fb3992a121bf497]&quot;&gt;[0c0b0aa0f223523331afdc157fb3992a121bf497]&lt;/a&gt;)
Fixes &lt;a href=&quot;/projects/8994/tickets/2415&quot; title=
&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt; by creating a new instance of the Model
when saving attributes to that model and the associated attributes
already exist. Tests included. [&lt;a href=
&quot;/projects/8994/tickets/2415&quot; title=&quot;Ticket #2415&quot;&gt;#2415&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/0c0b0aa0f223523331afdc157fb3992a121bf497&quot;&gt;
http://github.com/rails/rails/commit/0c0b0aa0f223523331afdc157fb399...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-27T15:59:49+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-27T16:00:19+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">28</version>
      <user-name>Repository</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>Thanks Rohit and Jos&#233;!  RailsCommunity++</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks Rohit and Jos&amp;eacute;! RailsCommunity++&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-28T16:21:23+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 2.3.6 2.3.8 accepts_nested_attributes_for patch
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-06-28T16:22:03+01:00</updated-at>
      <user-id type="integer">21548</user-id>
      <version type="integer">29</version>
      <user-name>George Montana Harkin</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>This is preliminary, but I just installed 2-3-stable. It fixed one-level-deep nested attribute updating, but I am still seeing a problem when there is more than one level of nesting. In that case, it is looking like the &quot;grandchildren&quot; records are only updated if at least one attribute changes in the related &quot;child&quot; record. Otherwise, no update is done on the grandchildren.

It's quite possible that this is my problem...anyone else?</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is preliminary, but I just installed 2-3-stable. It fixed
one-level-deep nested attribute updating, but I am still seeing a
problem when there is more than one level of nesting. In that case,
it is looking like the &quot;grandchildren&quot; records are only updated if
at least one attribute changes in the related &quot;child&quot; record.
Otherwise, no update is done on the grandchildren.&lt;/p&gt;
&lt;p&gt;It's quite possible that this is my problem...anyone else?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-01T19:07:06+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-07-01T19:07:48+01:00</updated-at>
      <user-id type="integer">105454</user-id>
      <version type="integer">30</version>
      <user-name>scrozier</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>I'm also having the same problem with the update_attributes when using a two level deep nested resources. It will update the first level child but not the second level one. Should we open a new ticket or keep going in this one?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm also having the same problem with the update_attributes when
using a two level deep nested resources. It will update the first
level child but not the second level one. Should we open a new
ticket or keep going in this one?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-28T17:50:39+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-07-28T17:50:43+01:00</updated-at>
      <user-id type="integer">16152</user-id>
      <version type="integer">31</version>
      <user-name>Rafael Cardoso</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>@Rafael did you try with rails edge?

If it is still an issue please open a new ticket and refer to this ticket as 'related'. Yours is related to grandchildren while original ticket is related to children. So lets keep them separate.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Rafael did you try with rails edge?&lt;/p&gt;
&lt;p&gt;If it is still an issue please open a new ticket and refer to
this ticket as 'related'. Yours is related to grandchildren while
original ticket is related to children. So lets keep them
separate.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-28T18:17:45+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-07-28T18:17:49+01:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">32</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>@Neeraj I did not before, I just did check and in fact it is correct for the 2.3.9 version.
Thank you.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Neeraj I did not before, I just did check and in fact it is
correct for the 2.3.9 version. Thank you.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-28T22:03:37+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-07-28T22:03:45+01:00</updated-at>
      <user-id type="integer">16152</user-id>
      <version type="integer">33</version>
      <user-name>Rafael Cardoso</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>http://github.com/rails/rails/commit/96183e0f284bab27667e5a38fa6a1578eb029585 due to CVE-2010-3933 rolled this patch back. We'll have to reopen.</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=
&quot;http://github.com/rails/rails/commit/96183e0f284bab27667e5a38fa6a1578eb029585&quot;&gt;
http://github.com/rails/rails/commit/96183e0f284bab27667e5a38fa6a15...&lt;/a&gt;
due to CVE-2010-3933 rolled this patch back. We'll have to
reopen.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T04:56:52+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-10-15T04:56:55+01:00</updated-at>
      <user-id type="integer">21548</user-id>
      <version type="integer">34</version>
      <user-name>George Montana Harkin</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>Patch reverted, ticket resurrected.

How rare.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Patch reverted, ticket resurrected.&lt;/p&gt;
&lt;p&gt;How rare.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-15T05:54:08+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-10-15T05:54:13+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">35</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>No, we are not opening it back. The security bug is intrinsic to the feature asked here.

If you want to implement the behavior asked in this ticket, you will be better of updating the nested records using ajax and the update the associations in the parent object using &quot;#{association}_ids&quot;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;No, we are not opening it back. The security bug is intrinsic to
the feature asked here.&lt;/p&gt;
&lt;p&gt;If you want to implement the behavior asked in this ticket, you
will be better of updating the nested records using ajax and the
update the associations in the parent object using
&quot;#{association}_ids&quot;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T07:37:48+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-10-15T07:42:11+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">36</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:31+01:00</created-at>
      <creator-id type="integer">53012</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">2415</number>
      <permalink>accepts_nested_attributes_for-doest-work-when-nested_attributes-hash-has-an-id-entry</permalink>
      <priority type="integer">1568</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3.2 2.3.6 2.3.8 3.0 accepts_nested_attributes_for patch</tag>
      <title>accepts_nested_attributes_for does't work when nested_attributes hash has an :id entry</title>
      <updated-at type="datetime">2010-10-15T23:01:31+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">37</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>vlad (at breyter)</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2415</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>def89050363f65437de81f853ff3e004c45f1163</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-31T08:27:10+01:00</created-at>
      <filename>0001-attempting-to-add-a-failing-test-for-obj-has_one-hab.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">540411</id>
      <size type="integer">3136</size>
      <uploader-id type="integer">14998</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/540411/0001-attempting-to-add-a-failing-test-for-obj-has_one-hab.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>efac6f1d87f3a52afe3228adf1dcbd0ed4301cc4</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-11T21:09:30+01:00</created-at>
      <filename>patch-for-saving-attributes-that-contain-records-that-have-already-exist.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">556660</id>
      <size type="integer">1666</size>
      <uploader-id type="integer">21548</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/556660/patch-for-saving-attributes-that-contain-records-that-have-already-exist.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>c03fe8c69bfe80ca0565e370b78b5c6f88212f90</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-14T17:48:03+01:00</created-at>
      <filename>patch-for-saving-attributes-that-contain-records-that-have-already-exist-tests.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">558258</id>
      <size type="integer">2757</size>
      <uploader-id type="integer">21548</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/558258/patch-for-saving-attributes-that-contain-records-that-have-already-exist-tests.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>10acf7e3d32507795d6e00db478662cbc428a1ae</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-14T17:48:05+01:00</created-at>
      <filename>patch-for-saving-attributes-that-contain-records-that-have-already-exist.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">558259</id>
      <size type="integer">2739</size>
      <uploader-id type="integer">21548</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/558259/patch-for-saving-attributes-that-contain-records-that-have-already-exist.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>a461c8ac87b6a9d5d24682540dfbd0cd7c0b6f22</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-23T16:25:42+01:00</created-at>
      <filename>2415_fix_for_accepts_nested_attributes_for.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">570629</id>
      <size type="integer">6697</size>
      <uploader-id type="integer">21548</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/570629/2415_fix_for_accepts_nested_attributes_for.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>a0e08aaaf9e8007734a906f2c7c06736abcbe01a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-27T14:39:07+01:00</created-at>
      <filename>2415_for_master.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">577803</id>
      <size type="integer">6605</size>
      <uploader-id type="integer">89656</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/577803/2415_for_master.diff</url>
    </attachment>
  </attachments>
</ticket>
