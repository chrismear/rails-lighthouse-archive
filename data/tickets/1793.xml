<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">22589</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-01-23T21:13:48+00:00</created-at>
  <creator-id type="integer">1607</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">1793</number>
  <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
  <priority type="integer">1092</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>gems patch rake</tag>
  <title>Make rake gems:build respect Rails.env</title>
  <updated-at type="datetime">2011-02-02T17:44:20+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">8</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Mark Van Holstyn</creator-name>
  <assigned-user-name>Matt Jones</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
  <milestone-title>3.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>If gems are configured in config/environments/test.rb and &quot;rake gems:build&quot; is run in the production environment, the gems configured for the test environment are built. This forces the production machine to have the necessary libraries installed to build all gems used for testing.

This patch updates &quot;rake gems:build&quot; to only build gems configured for the current Rails.env.</original-body>
  <latest-body>If gems are configured in config/environments/test.rb and &quot;rake gems:build&quot; is run in the production environment, the gems configured for the test environment are built. This forces the production machine to have the necessary libraries installed to build all gems used for testing.

This patch updates &quot;rake gems:build&quot; to only build gems configured for the current Rails.env.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;If gems are configured in config/environments/test.rb and &quot;rake
gems:build&quot; is run in the production environment, the gems
configured for the test environment are built. This forces the
production machine to have the necessary libraries installed to
build all gems used for testing.&lt;/p&gt;
&lt;p&gt;This patch updates &quot;rake gems:build&quot; to only build gems
configured for the current Rails.env.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If gems are configured in config/environments/test.rb and &quot;rake gems:build&quot; is run in the production environment, the gems configured for the test environment are built. This forces the production machine to have the necessary libraries installed to build all gems used for testing.

This patch updates &quot;rake gems:build&quot; to only build gems configured for the current Rails.env.</body>
      <body-html>&lt;div&gt;&lt;p&gt;If gems are configured in config/environments/test.rb and &quot;rake
gems:build&quot; is run in the production environment, the gems
configured for the test environment are built. This forces the
production machine to have the necessary libraries installed to
build all gems used for testing.&lt;/p&gt;
&lt;p&gt;This patch updates &quot;rake gems:build&quot; to only build gems
configured for the current Rails.env.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-23T21:13:48+00:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>gems rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2009-01-23T21:13:49+00:00</updated-at>
      <user-id type="integer">1607</user-id>
      <version type="integer">1</version>
      <user-name>Mark Van Holstyn</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">22589</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-23T21:17:54+00:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: gems rake
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>gems patch rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2009-01-23T21:17:59+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">2</version>
      <user-name>Pratik</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name>Matt Jones</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">22589</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-24T08:21:21+00:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>gems patch rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2009-01-24T08:21:25+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">3</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name>Matt Jones</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">22589</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>-1 on this; haven't tested it, but it will most likely cause some spectacular failures in edge cases. Notably, one of the primary gems that needs building in many apps is RedCloth; it gets pulled in by Rails under some conditions on loading the environment, and dies messily (Bus error, on OSX) if the native support isn't present. That's the whole reason that the environment isn't loaded by the gems:build task...

This is really part of #1721; the whole idea needs to be restructured.</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 on this; haven't tested it, but it will most likely cause
some spectacular failures in edge cases. Notably, one of the
primary gems that needs building in many apps is RedCloth; it gets
pulled in by Rails under some conditions on loading the
environment, and dies messily (Bus error, on OSX) if the native
support isn't present. That's the whole reason that the environment
isn't loaded by the gems:build task...&lt;/p&gt;
&lt;p&gt;This is really part of &lt;a href=&quot;/projects/8994/tickets/1721&quot; title=&quot;Ticket #1721&quot;&gt;#1721&lt;/a&gt;; the whole idea needs to be
restructured.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-25T23:26:52+00:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>gems patch rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2009-01-25T23:26:53+00:00</updated-at>
      <user-id type="integer">22589</user-id>
      <version type="integer">4</version>
      <user-name>Matt Jones</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name>Matt Jones</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">22589</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This should no longer be an issue as of 2.3</body>
      <body-html>&lt;div&gt;&lt;p&gt;This should no longer be an issue as of 2.3&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-27T19:07:07+00:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>gems patch rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2009-03-27T19:07:08+00:00</updated-at>
      <user-id type="integer">8721</user-id>
      <version type="integer">5</version>
      <user-name>David Dollar</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name>Matt Jones</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">22589</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:38+01:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>gems patch rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2010-05-04T18:48:38+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">6</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name>Matt Jones</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">22589</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:42:14+00:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">1092</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>gems patch rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2011-02-02T17:44:01+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">7</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name>Matt Jones</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">22589</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:42:16+00:00</created-at>
      <creator-id type="integer">1607</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1793</number>
      <permalink>make-rake-gemsbuild-respect-railsenv</permalink>
      <priority type="integer">1092</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>gems patch rake</tag>
      <title>Make rake gems:build respect Rails.env</title>
      <updated-at type="datetime">2011-02-02T17:44:20+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">8</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Mark Van Holstyn</creator-name>
      <assigned-user-name>Matt Jones</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1793</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>47f1daed2d67a450cb2a402c56850fb9fd0eb624</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-01-23T21:13:48+00:00</created-at>
      <filename>gems_build.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">81293</id>
      <size type="integer">1704</size>
      <uploader-id type="integer">1607</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/81293/gems_build.diff</url>
    </attachment>
  </attachments>
</ticket>
