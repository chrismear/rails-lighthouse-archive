<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-10-14T17:50:16+01:00</created-at>
  <creator-id type="integer">46640</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">3377</number>
  <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
  <priority type="integer">162255</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
  <updated-at type="datetime">2011-02-02T16:47:25+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">10</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Denis</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
  <priority-name nil="true"></priority-name>
  <original-body>The recent changes to Hash.from_xml seem to be a mess.  As best I can tell from the related bugs, in 2.3.2 Hash.from_xml was broken for all-caps tags (#2604); it converted them to lowercase.  In 2.3.2 Hash.from_xml's behavior with camelCase elements was to underscore them.

In attempting to fix the all-caps tags bug, commit [4c4133](http://github.com/rails/rails/commit/eb201e64c0b68aee6d0715d44cf48178204c4133) which is in 2.3.4, at least, fixed Hash.from_xml for all-cap tags, but broke it for with camelCase tags, and no longer converted them to underscore (maybe #2334? that bug is sort of confusing).  @dstrelau in that commit claims that they never should have been converted to underscore in the first place, although I've never found anything where that was documented.

Not sure whether this is actually a bug, or just needs documentation (and unit tests) as to what the behavior should (and should remain to) be.</original-body>
  <latest-body>The recent changes to Hash.from_xml seem to be a mess.  As best I can tell from the related bugs, in 2.3.2 Hash.from_xml was broken for all-caps tags (#2604); it converted them to lowercase.  In 2.3.2 Hash.from_xml's behavior with camelCase elements was to underscore them.

In attempting to fix the all-caps tags bug, commit [4c4133](http://github.com/rails/rails/commit/eb201e64c0b68aee6d0715d44cf48178204c4133) which is in 2.3.4, at least, fixed Hash.from_xml for all-cap tags, but broke it for with camelCase tags, and no longer converted them to underscore (maybe #2334? that bug is sort of confusing).  @dstrelau in that commit claims that they never should have been converted to underscore in the first place, although I've never found anything where that was documented.

Not sure whether this is actually a bug, or just needs documentation (and unit tests) as to what the behavior should (and should remain to) be.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The recent changes to Hash.from_xml seem to be a mess. As best I
can tell from the related bugs, in 2.3.2 Hash.from_xml was broken
for all-caps tags (#2604); it converted them to lowercase. In 2.3.2
Hash.from_xml's behavior with camelCase elements was to underscore
them.&lt;/p&gt;
&lt;p&gt;In attempting to fix the all-caps tags bug, commit &lt;a href=
&quot;http://github.com/rails/rails/commit/eb201e64c0b68aee6d0715d44cf48178204c4133&quot;&gt;
4c4133&lt;/a&gt; which is in 2.3.4, at least, fixed Hash.from_xml for
all-cap tags, but broke it for with camelCase tags, and no longer
converted them to underscore (maybe &lt;a href=
&quot;/projects/8994/tickets/2334&quot; title=&quot;Ticket #2334&quot;&gt;#2334&lt;/a&gt;? that
bug is sort of confusing). @dstrelau in that commit claims that
they never should have been converted to underscore in the first
place, although I've never found anything where that was
documented.&lt;/p&gt;
&lt;p&gt;Not sure whether this is actually a bug, or just needs
documentation (and unit tests) as to what the behavior should (and
should remain to) be.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The recent changes to Hash.from_xml seem to be a mess.  As best I can tell from the related bugs, in 2.3.2 Hash#from_xml was broken for all-caps tags (#2604); it converted them to lowercase.  In 2.3.2 Hash#from_xml's behavior with camelCase elements was to underscore them.

In attempting to fix the all-caps tags bug, commit [eb201e](http://github.com/rails/rails/commit/eb201e64c0b68aee6d0715d44cf48178204c4133) which is in 2.3.4, at least, fixed Hash#from_xml for all-cap tags, but broke it for with camelCase tags, and no longer converted them to underscore (maybe #2334? that bug is sort of confusing).  @dstrelau in that commit claims that they never should have been converted to underscore in the first place, although I've never found anything where that was documented.

Not sure whether this is actually a bug, or just needs documentation (and unit tests) as to what the behavior should (and should remain to) be.  I'd be happpy to add unit tests once that's decided.

The other related commit is [aa5cdb](http://github.com/rails/rails/commit/aa5cdb0d47fb5484bfdde8244df7efeb2175bf3a).</body>
      <body-html>&lt;div&gt;&lt;p&gt;The recent changes to Hash.from_xml seem to be a mess. As best I
can tell from the related bugs, in 2.3.2 Hash#from_xml was broken
for all-caps tags (#2604); it converted them to lowercase. In 2.3.2
Hash#from_xml's behavior with camelCase elements was to underscore
them.&lt;/p&gt;
&lt;p&gt;In attempting to fix the all-caps tags bug, commit &lt;a href=
&quot;http://github.com/rails/rails/commit/eb201e64c0b68aee6d0715d44cf48178204c4133&quot;&gt;
eb201e&lt;/a&gt; which is in 2.3.4, at least, fixed Hash#from_xml for
all-cap tags, but broke it for with camelCase tags, and no longer
converted them to underscore (maybe &lt;a href=
&quot;/projects/8994/tickets/2334&quot; title=&quot;Ticket #2334&quot;&gt;#2334&lt;/a&gt;? that
bug is sort of confusing). @dstrelau in that commit claims that
they never should have been converted to underscore in the first
place, although I've never found anything where that was
documented.&lt;/p&gt;
&lt;p&gt;Not sure whether this is actually a bug, or just needs
documentation (and unit tests) as to what the behavior should (and
should remain to) be. I'd be happpy to add unit tests once that's
decided.&lt;/p&gt;
&lt;p&gt;The other related commit is &lt;a href=
&quot;http://github.com/rails/rails/commit/aa5cdb0d47fb5484bfdde8244df7efeb2175bf3a&quot;&gt;
aa5cdb&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-10-14T17:50:16+01:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.4 from_xml hash</tag>
      <title>Hash.from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2009-10-14T17:56:47+01:00</updated-at>
      <user-id type="integer">46640</user-id>
      <version type="integer">1</version>
      <user-name>Denis</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>And of course the bug title should say Hash#from_xml, not Hash.from_xml.</body>
      <body-html>&lt;div&gt;&lt;p&gt;And of course the bug title should say Hash#from_xml, not
Hash.from_xml.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-10-14T17:57:46+01:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.4 from_xml hash</tag>
      <title>Hash.from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2009-10-14T17:57:48+01:00</updated-at>
      <user-id type="integer">46640</user-id>
      <version type="integer">2</version>
      <user-name>Denis</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-10-14T17:58:08+01:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Hash.from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.4 from_xml hash</tag>
      <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2009-10-14T17:58:11+01:00</updated-at>
      <user-id type="integer">46640</user-id>
      <version type="integer">3</version>
      <user-name>Denis</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I agree that it's a mess. I was depending on the de-camelization (i.e. underscoring) as I have a controller that accepts XML in the POST. It was nice (though surprising) that it was auto-magically translated into underscore-style element names, since it meant I could pretty much dump portions of the params Hash into my model as you would in a normal REST POST/PUT operation.

While the behavior may have been wrong, reverting to the old behavior has broken those of us that depend on the new way - without even giving us a good workaround short of monkey-patching. 

I wonder if part of the problem here is that this code lives in ActiveSupport, where I suppose it doesn't make a lot of sense to be mucking with the element names as they get turned into a Hash. This seems more the responsibility of the ActionController::ParamsParser.  

Wherever it lives, some of us need this behavior back. I think it's best to leave the default behavior as it now stands, but to provide an option to do the underscorization.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I agree that it's a mess. I was depending on the de-camelization
(i.e. underscoring) as I have a controller that accepts XML in the
POST. It was nice (though surprising) that it was auto-magically
translated into underscore-style element names, since it meant I
could pretty much dump portions of the params Hash into my model as
you would in a normal REST POST/PUT operation.&lt;/p&gt;
&lt;p&gt;While the behavior may have been wrong, reverting to the old
behavior has broken those of us that depend on the new way -
without even giving us a good workaround short of
monkey-patching.&lt;/p&gt;
&lt;p&gt;I wonder if part of the problem here is that this code lives in
ActiveSupport, where I suppose it doesn't make a lot of sense to be
mucking with the element names as they get turned into a Hash. This
seems more the responsibility of the
ActionController::ParamsParser.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Wherever it lives, some of us need this behavior back. I think
it's best to leave the default behavior as it now stands, but to
provide an option to do the underscorization.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-06T18:11:51+00:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.4 from_xml hash</tag>
      <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2009-12-06T18:11:53+00:00</updated-at>
      <user-id type="integer">38672</user-id>
      <version type="integer">4</version>
      <user-name>Mike Grafton</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have an xml feed that comes in in all caps.  It used to come in downcased, which I disliked, but wrote my code to accomodate.  It now comes in correctly, which I like.  What I don't like is being forced to make these changes because of a minor version bump.  I'm about to settle into yet another night of converting hash keys, for the second time.  

The series of patches leading up to this are irresponsible.  

Were there deprecation warnings?  No.
Were there blog posts alerting us to these changes?  No.
Are there options in ActiveSupport where I can specify how I want tags handled?  If so, I can't find them.

Core fail.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have an xml feed that comes in in all caps. It used to come in
downcased, which I disliked, but wrote my code to accomodate. It
now comes in correctly, which I like. What I don't like is being
forced to make these changes because of a minor version bump. I'm
about to settle into yet another night of converting hash keys, for
the second time.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;The series of patches leading up to this are
irresponsible.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Were there deprecation warnings? No.&lt;br&gt;
Were there blog posts alerting us to these changes? No.&lt;br&gt;
Are there options in ActiveSupport where I can specify how I want
tags handled? If so, I can't find them.&lt;/p&gt;
&lt;p&gt;Core fail.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-12T02:42:41+00:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.4 from_xml hash</tag>
      <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2010-01-12T02:42:42+00:00</updated-at>
      <user-id type="integer">5060</user-id>
      <version type="integer">5</version>
      <user-name>Jeff Dean</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Any updates here?

I'm afraid your ticket was never opened or looked at by a core member.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any updates here?&lt;/p&gt;
&lt;p&gt;I'm afraid your ticket was never opened or looked at by a core
member.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-07T05:47:43+01:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">162255</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.4 from_xml hash</tag>
      <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2010-10-07T05:47:47+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">6</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-09T21:47:59+01:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.4 from_xml hash
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">162255</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2010-10-09T21:48:03+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">8</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:30:57+00:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">162255</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2011-02-02T16:47:15+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">9</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:30:58+00:00</created-at>
      <creator-id type="integer">46640</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3377</number>
      <permalink>hashfrom_xml-converted-camelcase-to-underscore-in-232-doesnt-in-234</permalink>
      <priority type="integer">162255</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>Hash#from_xml converted camelCase to underscore in 2.3.2, doesn't in 2.3.4</title>
      <updated-at type="datetime">2011-02-02T16:47:25+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">10</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Denis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3377</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
