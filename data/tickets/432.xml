<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-06-16T20:42:05+01:00</created-at>
  <creator-id type="integer">23575</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">432</number>
  <permalink>mysql-adapter-with-mediumt-support</permalink>
  <priority type="integer">17627</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>2.1 activerecord enhancement mysql patch</tag>
  <title>mysql adapter with mediumt support</title>
  <updated-at type="datetime">2008-10-23T16:21:55+01:00</updated-at>
  <user-id type="integer">23575</user-id>
  <version type="integer">1</version>
  <user-name>Rasmus</user-name>
  <creator-name>Rasmus</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/432</url>
  <priority-name nil="true"></priority-name>
  <original-body>First of all: this is my first time ever contributing to an open source project, so please let me know if I've done something wrong.

As of rails 2.1 the mysql adapter of activerecord, is able to use more appropriate data types for integers instead of just the standard INT data type in mysql. However, the MEDIUMINT data type seem to have been left out for some reason. Integer with a length of 5 or 6 should be stored as an mediumt in order to obtain optimal performance from mysql. With this patch, mediumint is now supported.

Also, the lengths have been corrected so that they know fit more appropriately. For instance SMALLINT is now used for integers with length 0-4 instead of 0-3.

I hope this patch is useful. If not, excuse me for my newbie-ism within open source contribution and rails in general.

-Ras</original-body>
  <latest-body>First of all: this is my first time ever contributing to an open source project, so please let me know if I've done something wrong.

As of rails 2.1 the mysql adapter of activerecord, is able to use more appropriate data types for integers instead of just the standard INT data type in mysql. However, the MEDIUMINT data type seem to have been left out for some reason. Integer with a length of 5 or 6 should be stored as an mediumt in order to obtain optimal performance from mysql. With this patch, mediumint is now supported.

Also, the lengths have been corrected so that they know fit more appropriately. For instance SMALLINT is now used for integers with length 0-4 instead of 0-3.

I hope this patch is useful. If not, excuse me for my newbie-ism within open source contribution and rails in general.

-Ras</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
First of all: this is my first time ever contributing to an open source project, so please let me know if I've done something wrong.
&lt;/p&gt;&lt;p&gt;
As of rails 2.1 the mysql adapter of activerecord, is able to use more appropriate data types for integers instead of just the standard INT data type in mysql. However, the MEDIUMINT data type seem to have been left out for some reason. Integer with a length of 5 or 6 should be stored as an mediumt in order to obtain optimal performance from mysql. With this patch, mediumint is now supported.
&lt;/p&gt;&lt;p&gt;
Also, the lengths have been corrected so that they know fit more appropriately. For instance SMALLINT is now used for integers with length 0-4 instead of 0-3.
&lt;/p&gt;&lt;p&gt;
I hope this patch is useful. If not, excuse me for my newbie-ism within open source contribution and rails in general.
&lt;/p&gt;&lt;p&gt;
-Ras
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>First of all: this is my first time ever contributing to an open source project, so please let me know if I've done something wrong.

As of rails 2.1 the mysql adapter of activerecord, is able to use more appropriate data types for integers instead of just the standard INT data type in mysql. However, the MEDIUMINT data type seem to have been left out for some reason. Integer with a length of 5 or 6 should be stored as an mediumt in order to obtain optimal performance from mysql. With this patch, mediumint is now supported.

Also, the lengths have been corrected so that they know fit more appropriately. For instance SMALLINT is now used for integers with length 0-4 instead of 0-3.

I hope this patch is useful. If not, excuse me for my newbie-ism.

-Ras</body>
      <body-html>&lt;div&gt;&lt;p&gt;First of all: this is my first time ever contributing to an open
source project, so please let me know if I've done something
wrong.&lt;/p&gt;
&lt;p&gt;As of rails 2.1 the mysql adapter of activerecord, is able to
use more appropriate data types for integers instead of just the
standard INT data type in mysql. However, the MEDIUMINT data type
seem to have been left out for some reason. Integer with a length
of 5 or 6 should be stored as an mediumt in order to obtain optimal
performance from mysql. With this patch, mediumint is now
supported.&lt;/p&gt;
&lt;p&gt;Also, the lengths have been corrected so that they know fit more
appropriately. For instance SMALLINT is now used for integers with
length 0-4 instead of 0-3.&lt;/p&gt;
&lt;p&gt;I hope this patch is useful. If not, excuse me for my
newbie-ism.&lt;/p&gt;
&lt;p&gt;-Ras&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-06-16T21:38:48+01:00</created-at>
      <creator-id type="integer">23575</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">432</number>
      <permalink>mysql-adapter-with-mediumt-support</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>mysql adapter with mediumt support</title>
      <updated-at type="datetime">2008-10-23T16:21:50+01:00</updated-at>
      <user-id type="integer">23575</user-id>
      <version type="integer">1</version>
      <user-name>Rasmus</user-name>
      <creator-name>Rasmus</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/432</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-06-18T19:20:49+01:00</created-at>
      <creator-id type="integer">23575</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">432</number>
      <permalink>mysql-adapter-with-mediumt-support</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>mysql adapter with mediumt support</title>
      <updated-at type="datetime">2008-06-18T19:20:49+01:00</updated-at>
      <user-id type="integer">23575</user-id>
      <version type="integer">2</version>
      <user-name>Rasmus</user-name>
      <creator-name>Rasmus</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/432</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Is this still an issue with Edge rails ? I see mysql_adapter already seems to be having support for medium int.

Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Is this still an issue with Edge rails ? I see mysql_adapter already seems to be having support for medium int.
&lt;/p&gt;&lt;p&gt;
Thanks.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-09T13:18:02+01:00</created-at>
      <creator-id type="integer">23575</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">432</number>
      <permalink>mysql-adapter-with-mediumt-support</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.1 activerecord enhancement mysql patch</tag>
      <title>mysql adapter with mediumt support</title>
      <updated-at type="datetime">2008-07-09T13:18:02+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">3</version>
      <user-name>Pratik</user-name>
      <creator-name>Rasmus</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/432</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thank you for your reply.

Jeremy Kemper added mediumint here:
http://github.com/rails/rails/commit/4498aad4acda002b8f213f13c4acd52cba04d224

However, I'm personally not sure he has done everything correct.

Example (taken from jeremy's commit):
when 1; 'tinyint'
when 2; 'smallint'
when 3; 'mediumint'

For instance, doesn't this mean that rails will choose mediumint as data type for storing integers with a length of 3? That should be smallint! Smallint holds (if signed) -32768 to 32767 so it would easy hold an integer with length of 3 and even 4. Using mediumint here just wastes disk space and increase mysql memory consumption without any reason.

As I understand rails and mysql data types, it should rather be something like:
when 0..2; 'tinyint'
when 2..4; 'smallint'
when 5..6; 'mediumint'
when 7..9; 'int'
when 9..20; 'bigint'

Or am I missing something here?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Thank you for your reply.
&lt;/p&gt;&lt;p&gt;
Jeremy Kemper added mediumint here:
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/4498aad4acda002b8f213f13c4acd52cba04d224&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;
&lt;/p&gt;&lt;p&gt;
However, I'm personally not sure he has done everything correct.
&lt;/p&gt;&lt;p&gt;
Example (taken from jeremy's commit):
&lt;/p&gt;&lt;p&gt;
when 1; 'tinyint'
&lt;/p&gt;&lt;p&gt;
when 2; 'smallint'
&lt;/p&gt;&lt;p&gt;
when 3; 'mediumint'
&lt;/p&gt;&lt;p&gt;
For instance, doesn't this mean that rails will choose mediumint as data type for storing integers with a length of 3? That should be smallint! Smallint holds (if signed) -32768 to 32767 so it would easy hold an integer with length of 3 and even 4. Using mediumint here just wastes disk space and increase mysql memory consumption without any reason.
&lt;/p&gt;&lt;p&gt;
As I understand rails and mysql data types, it should rather be something like:
&lt;/p&gt;&lt;p&gt;
when 0..2; 'tinyint'
&lt;/p&gt;&lt;p&gt;
when 2..4; 'smallint'
&lt;/p&gt;&lt;p&gt;
when 5..6; 'mediumint'
&lt;/p&gt;&lt;p&gt;
when 7..9; 'int'
&lt;/p&gt;&lt;p&gt;
when 9..20; 'bigint'
&lt;/p&gt;&lt;p&gt;
Or am I missing something here?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-09T13:32:04+01:00</created-at>
      <creator-id type="integer">23575</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">432</number>
      <permalink>mysql-adapter-with-mediumt-support</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.1 activerecord enhancement mysql patch</tag>
      <title>mysql adapter with mediumt support</title>
      <updated-at type="datetime">2008-07-09T13:32:04+01:00</updated-at>
      <user-id type="integer">23575</user-id>
      <version type="integer">4</version>
      <user-name>Rasmus</user-name>
      <creator-name>Rasmus</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/432</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm not sure to be honest. But you should probably send an email to rails core mailing list - http://groups.google.com/group/rubyonrails-core

Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I'm not sure to be honest. But you should probably send an email to rails core mailing list - &lt;a href=&quot;http://groups.google.com/group/rubyonrails-core&quot;&gt;http://groups.google.com/group/r...&lt;/a&gt;
&lt;/p&gt;&lt;p&gt;
Thanks.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-09T14:02:10+01:00</created-at>
      <creator-id type="integer">23575</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">432</number>
      <permalink>mysql-adapter-with-mediumt-support</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.1 activerecord enhancement mysql patch</tag>
      <title>mysql adapter with mediumt support</title>
      <updated-at type="datetime">2008-07-09T14:02:10+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">5</version>
      <user-name>Pratik</user-name>
      <creator-name>Rasmus</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/432</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>d6f85e949c0557b0d6bc59915c50c462bbb1133e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-06-16T20:42:05+01:00</created-at>
      <filename>mysql_adapter_with_mediumint.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">27703</id>
      <size type="integer">1102</size>
      <uploader-id type="integer">23575</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/27703/mysql_adapter_with_mediumint.diff</url>
    </attachment>
  </attachments>
</ticket>
