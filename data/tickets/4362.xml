<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-04-10T11:00:35+01:00</created-at>
  <creator-id type="integer">26024</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4362</number>
  <permalink>patch-make-translate-less-safe-and-more-convenient</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>actionpack patch translate</tag>
  <title>[PATCH] Make translate less safe and more convenient</title>
  <updated-at type="datetime">2010-04-14T01:36:44+01:00</updated-at>
  <user-id type="integer">83</user-id>
  <version type="integer">3</version>
  <user-name>DHH</user-name>
  <creator-name>Craig Davey</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4362</url>
  <priority-name>Low</priority-name>
  <original-body>Currently, the translate helper marks all of it&#8217;s output as safe HTML.

This is a problem because storing translations as safely encoded HTML is a pain. And it becomes unsuitable if your translations are also used in non-HTML formats (such as plain text email). Most of the time translations are plain text so lets start treating them that way.

This patch changes the translate helper so that it doesn&#8217;t mark all translations as safe HTML. By default it leaves translations untouched so that encoding and safeness can be deferred to friends and helpers.

To handle the uncommon case where a translation includes HTML this patch also adds a naming convention for translation keys. When a key has the suffix &quot;_html&quot; or the last element of the key is the word &quot;html&quot; the translate helper will output a safe HTML string.

This naming convention helps to identify translations that include HTML tags so that you know what kind of output to expect when you call translate in a template.</original-body>
  <latest-body>Currently, the translate helper marks all of it&#8217;s output as safe HTML.

This is a problem because storing translations as safely encoded HTML is a pain. And it becomes unsuitable if your translations are also used in non-HTML formats (such as plain text email). Most of the time translations are plain text so lets start treating them that way.

This patch changes the translate helper so that it doesn&#8217;t mark all translations as safe HTML. By default it leaves translations untouched so that encoding and safeness can be deferred to friends and helpers.

To handle the uncommon case where a translation includes HTML this patch also adds a naming convention for translation keys. When a key has the suffix &quot;_html&quot; or the last element of the key is the word &quot;html&quot; the translate helper will output a safe HTML string.

This naming convention helps to identify translations that include HTML tags so that you know what kind of output to expect when you call translate in a template.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Currently, the translate helper marks all of it&amp;#8217;s output
as safe HTML.&lt;/p&gt;
&lt;p&gt;This is a problem because storing translations as safely encoded
HTML is a pain. And it becomes unsuitable if your translations are
also used in non-HTML formats (such as plain text email). Most of
the time translations are plain text so lets start treating them
that way.&lt;/p&gt;
&lt;p&gt;This patch changes the translate helper so that it doesn&amp;#8217;t
mark all translations as safe HTML. By default it leaves
translations untouched so that encoding and safeness can be
deferred to friends and helpers.&lt;/p&gt;
&lt;p&gt;To handle the uncommon case where a translation includes HTML
this patch also adds a naming convention for translation keys. When
a key has the suffix &quot;_html&quot; or the last element of the key is the
word &quot;html&quot; the translate helper will output a safe HTML
string.&lt;/p&gt;
&lt;p&gt;This naming convention helps to identify translations that
include HTML tags so that you know what kind of output to expect
when you call translate in a template.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Currently, the translate helper marks all of it&#8217;s output as safe HTML.

This is a problem because storing translations as safely encoded HTML is a pain. And it becomes unsuitable if your translations are also used in non-HTML formats (such as plain text email). Most of the time translations are plain text so lets start treating them that way.

This patch changes the translate helper so that it doesn&#8217;t mark all translations as safe HTML. By default it leaves translations untouched so that encoding and safeness can be deferred to friends and helpers.

To handle the uncommon case where a translation includes HTML this patch also adds a naming convention for translation keys. When a key has the suffix &quot;_html&quot; or the last element of the key is the word &quot;html&quot; the translate helper will output a safe HTML string.

This naming convention helps to identify translations that include HTML tags so that you know what kind of output to expect when you call translate in a template.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Currently, the translate helper marks all of it&amp;#8217;s output
as safe HTML.&lt;/p&gt;
&lt;p&gt;This is a problem because storing translations as safely encoded
HTML is a pain. And it becomes unsuitable if your translations are
also used in non-HTML formats (such as plain text email). Most of
the time translations are plain text so lets start treating them
that way.&lt;/p&gt;
&lt;p&gt;This patch changes the translate helper so that it doesn&amp;#8217;t
mark all translations as safe HTML. By default it leaves
translations untouched so that encoding and safeness can be
deferred to friends and helpers.&lt;/p&gt;
&lt;p&gt;To handle the uncommon case where a translation includes HTML
this patch also adds a naming convention for translation keys. When
a key has the suffix &quot;_html&quot; or the last element of the key is the
word &quot;html&quot; the translate helper will output a safe HTML
string.&lt;/p&gt;
&lt;p&gt;This naming convention helps to identify translations that
include HTML tags so that you know what kind of output to expect
when you call translate in a template.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-10T11:00:35+01:00</created-at>
      <creator-id type="integer">26024</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4362</number>
      <permalink>patch-make-translate-less-safe-and-more-convenient</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>[PATCH] Make translate less safe and more convenient</title>
      <updated-at type="datetime">2010-04-10T11:00:46+01:00</updated-at>
      <user-id type="integer">26024</user-id>
      <version type="integer">1</version>
      <user-name>Craig Davey</user-name>
      <creator-name>Craig Davey</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4362</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-10T11:02:46+01:00</created-at>
      <creator-id type="integer">26024</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4362</number>
      <permalink>patch-make-translate-less-safe-and-more-convenient</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack patch translate</tag>
      <title>[PATCH] Make translate less safe and more convenient</title>
      <updated-at type="datetime">2010-04-10T11:02:51+01:00</updated-at>
      <user-id type="integer">26024</user-id>
      <version type="integer">2</version>
      <user-name>Craig Davey</user-name>
      <creator-name>Craig Davey</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4362</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-14T01:36:42+01:00</created-at>
      <creator-id type="integer">26024</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4362</number>
      <permalink>patch-make-translate-less-safe-and-more-convenient</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>actionpack patch translate</tag>
      <title>[PATCH] Make translate less safe and more convenient</title>
      <updated-at type="datetime">2010-04-14T01:36:44+01:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">3</version>
      <user-name>DHH</user-name>
      <creator-name>Craig Davey</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4362</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>ba76cd88086575561f00a8a96976af89148f0e51</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-04-10T11:00:36+01:00</created-at>
      <filename>translate_helper.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">478147</id>
      <size type="integer">5983</size>
      <uploader-id type="integer">26024</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/478147/translate_helper.diff</url>
    </attachment>
  </attachments>
</ticket>
