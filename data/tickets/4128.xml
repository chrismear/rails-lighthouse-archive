<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">15159</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-27T17:39:55+01:00</created-at>
  <creator-id type="integer">40272</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4128</number>
  <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
  <title>[PATCH] rake db:create creates development db only</title>
  <updated-at type="datetime">2011-01-12T14:46:44+00:00</updated-at>
  <user-id type="integer">74047</user-id>
  <version type="integer">9</version>
  <user-name>viktor tron (strawberry)</user-name>
  <creator-name>Santiago Pastorino</creator-name>
  <assigned-user-name>Mikel Lindsaar</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Perhaps we should use rake db:create:all to create all the databases or rake db:create RAILS_ENV=test to create only test</original-body>
  <latest-body>Perhaps we should use rake db:create:all to create all the databases or rake db:create RAILS_ENV=test to create only test</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Perhaps we should use rake db:create:all to create all the
databases or rake db:create RAILS_ENV=test to create only test&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Perhaps we should use rake db:create:all to create all the databases or rake db:create RAILS_ENV=test to create only test</body>
      <body-html>&lt;div&gt;&lt;p&gt;Perhaps we should use rake db:create:all to create all the
databases or rake db:create RAILS_ENV=test to create only test&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-08T01:48:34+00:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-03-08T01:48:36+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">1</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>What problem are you trying to solve here?

Ie, how does the current system cause you problems?

This is the usual flow for most people who are testing:

@@@ shell
$ rails g migration ...
$ rake db:migrate
$ rake test
@@@

Which promptly blows up -&gt; no test database.

Mikel</body>
      <body-html>&lt;div&gt;&lt;p&gt;What problem are you trying to solve here?&lt;/p&gt;
&lt;p&gt;Ie, how does the current system cause you problems?&lt;/p&gt;
&lt;p&gt;This is the usual flow for most people who are testing:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;shell&quot;&gt;$ rails g migration ...
$ rake db:migrate
$ rake test&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Which promptly blows up -&amp;gt; no test database.&lt;/p&gt;
&lt;p&gt;Mikel&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-09T02:35:40+00:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-03-09T02:35:45+00:00</updated-at>
      <user-id type="integer">15159</user-id>
      <version type="integer">2</version>
      <user-name>Mikel Lindsaar</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm trying to have rake db:create to not create test database.
I think that should be the right way and the least surprise for users.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm trying to have rake db:create to not create test
database.&lt;br&gt;
I think that should be the right way and the least surprise for
users.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-09T10:22:16+00:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-03-09T10:22:17+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">3</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>santiago@debian:/tmp/test_app$ ls db/
seeds.rb
santiago@debian:/tmp/test_app$ rake db:create
(in /tmp/test_app)
santiago@debian:/tmp/test_app$ ls db/
development.sqlite3  seeds.rb  test.sqlite3
santiago@debian:/tmp/test_app$ rake db:drop
(in /tmp/test_app)
santiago@debian:/tmp/test_app$ ls db/
seeds.rb  test.sqlite3
santiago@debian:/tmp/test_app$ rake db:drop RAILS_ENV=test
(in /tmp/test_app)
santiago@debian:/tmp/test_app$ ls db/
seeds.rb</body>
      <body-html>&lt;div&gt;&lt;p&gt;santiago@debian:/tmp/test_app$ ls db/&lt;br&gt;
seeds.rb&lt;br&gt;
santiago@debian:/tmp/test_app$ rake db:create&lt;br&gt;
(in /tmp/test_app) santiago@debian:/tmp/test_app$ ls db/&lt;br&gt;
development.sqlite3 seeds.rb test.sqlite3&lt;br&gt;
santiago@debian:/tmp/test_app$ rake db:drop&lt;br&gt;
(in /tmp/test_app) santiago@debian:/tmp/test_app$ ls db/&lt;br&gt;
seeds.rb test.sqlite3&lt;br&gt;
santiago@debian:/tmp/test_app$ rake db:drop RAILS_ENV=test&lt;br&gt;
(in /tmp/test_app) santiago@debian:/tmp/test_app$ ls db/&lt;br&gt;
seeds.rb&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-09T11:31:44+00:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-03-09T11:31:45+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">4</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I understand now what you do Mikel, thanks</body>
      <body-html>&lt;div&gt;&lt;p&gt;I understand now what you do Mikel, thanks&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-03-09T18:16:19+00:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-03-09T18:16:21+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">5</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This is because db:reset and db:setup tasks depend on it, and it's convenient to have test db created along with dev.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is because db:reset and db:setup tasks depend on it, and
it's convenient to have test db created along with dev.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-03-09T18:25:34+00:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-03-09T18:25:39+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">6</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>The most cool online shoes shop where you can find the most fashion designers shoes, include
Manolo Blahnik shoes, Jimmy Choo shoes, Christian Louboutin shoes and more. 
we offer high quality highheels at low price.
&lt;a href='http://www.fashionshoesmart.com'&gt;Manolo Blahnik Shoes&lt;/a&gt;
&lt;a href='http://www.fashionshoesmart.com'&gt;Jimmy Choo Shoes&lt;/a&gt;
&lt;a href='http://www.fashionshoesmart.com'&gt;Manolo Blahnik&lt;/a&gt;
&lt;a href='http://www.fashionshoesmart.com'&gt;Jimmy Choo&lt;/a&gt;

Cheap balenciaga purses, &lt;a href='http://www.poboshop.com'&gt;balenciaga handbags&lt;/a&gt;, balenciaga wallets onsale, 
Luxuy handbags, purses, high quality at low price at poboshop.com.
&lt;a href='http://www.balenciagaonsale.com'&gt;balenciaga bags&lt;/a&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;The most cool online shoes shop where you can find the most
fashion designers shoes, include&lt;br&gt;
Manolo Blahnik shoes, Jimmy Choo shoes, Christian Louboutin shoes
and more.&lt;br&gt;
we offer high quality highheels at low price.&lt;br&gt;
&lt;a href=&quot;http://www.fashionshoesmart.com&quot;&gt;Manolo Blahnik
Shoes&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.fashionshoesmart.com&quot;&gt;Jimmy Choo Shoes&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.fashionshoesmart.com&quot;&gt;Manolo Blahnik&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.fashionshoesmart.com&quot;&gt;Jimmy Choo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Cheap balenciaga purses, &lt;a href=
&quot;http://www.poboshop.com&quot;&gt;balenciaga handbags&lt;/a&gt;, balenciaga
wallets onsale,&lt;br&gt;
Luxuy handbags, purses, high quality at low price at
poboshop.com.&lt;br&gt;
&lt;a href=&quot;http://www.balenciagaonsale.com&quot;&gt;balenciaga bags&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-27T15:22:54+01:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-07-27T17:39:55+01:00</updated-at>
      <user-id type="integer">109040</user-id>
      <version type="integer">7</version>
      <user-name>matin</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:47+01:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2010-10-15T23:01:47+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>this issue
https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/5313
points out this inconsistency between create and drop behaviour and 
to my satisfaction a non-sneaky solution seems agreed upon:

to have 
    RAILS_ENV=development rake db:create 
do what is says (create ONLY dev and not test) in the doc
    $ rake -D db:create 
    (in /home/tron/Work/Repowt)
    rake db:create
        Create the database from config/database.yml for the current Rails.env (use db:create:all to create all dbs in the config)</body>
      <body-html>&lt;div&gt;&lt;p&gt;this issue&lt;br&gt;
&lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/5313&quot;&gt;
https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets...&lt;/a&gt;&lt;br&gt;
points out this inconsistency between create and drop behaviour
and&lt;br&gt;
to my satisfaction a non-sneaky solution seems agreed upon:&lt;/p&gt;
&lt;p&gt;to have&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;RAILS_ENV=development rake db:create&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;do what is says (create ONLY dev and not test) in the
doc&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ rake -D db:create
(in /home/tron/Work/Repowt)
rake db:create
    Create the database from config/database.yml for the current Rails.env (use db:create:all to create all dbs in the config)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-12T14:46:33+00:00</created-at>
      <creator-id type="integer">40272</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4128</number>
      <permalink>patch-rake-dbcreate-creates-development-db-only</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>3.0 &quot;activerecord 3.0&quot; patch tasks</tag>
      <title>[PATCH] rake db:create creates development db only</title>
      <updated-at type="datetime">2011-01-12T14:46:44+00:00</updated-at>
      <user-id type="integer">74047</user-id>
      <version type="integer">9</version>
      <user-name>viktor tron (strawberry)</user-name>
      <creator-name>Santiago Pastorino</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4128</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>29fc498ff35b2bde2b5815356113f3b195fd8d78</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-03-08T01:48:35+00:00</created-at>
      <filename>rake_databases.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">437328</id>
      <size type="integer">1146</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/437328/rake_databases.patch</url>
    </attachment>
  </attachments>
</ticket>
