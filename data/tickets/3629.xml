<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-12-29T19:53:48+00:00</created-at>
  <creator-id type="integer">40279</creator-id>
  <milestone-due-on type="datetime">2010-01-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">50064</milestone-id>
  <number type="integer">3629</number>
  <permalink>weird-behavior-on-error_messages_for</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2-3-stable error_messages_for</tag>
  <title>weird behavior on error_messages_for</title>
  <updated-at type="datetime">2010-10-16T23:36:20+01:00</updated-at>
  <user-id type="integer">81551</user-id>
  <version type="integer">10</version>
  <user-name>Andrea Campi</user-name>
  <creator-name>Daniel Lopes</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
  <milestone-title>2.3.6</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I'm not sure if it is a bug, but it causes a weird behavior. 

In these lines 
[error_messages_for in Rails 2.3.5](http://github.com/rails/rails/blob/45494580d9405e80ba124d17c8379436883c8c78/actionpack/lib/action_view/helpers/active_record_helper.rb#L196-197) the gsub call force you to have a locale file with models like that:

@@@
models:
  bank account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;
@@@

Instead of

@@@
models:
  bank_account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;
@@@

And when you call something like BankAccount.human_name it will returns &quot;Bankaccount&quot; instead of &quot;conta&quot;.</original-body>
  <latest-body>I'm not sure if it is a bug, but it causes a weird behavior. 

In these lines 
[error_messages_for in Rails 2.3.5](http://github.com/rails/rails/blob/45494580d9405e80ba124d17c8379436883c8c78/actionpack/lib/action_view/helpers/active_record_helper.rb#L196-197) the gsub call force you to have a locale file with models like that:

@@@
models:
  bank account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;
@@@

Instead of

@@@
models:
  bank_account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;
@@@

And when you call something like BankAccount.human_name it will returns &quot;Bankaccount&quot; instead of &quot;conta&quot;.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I'm not sure if it is a bug, but it causes a weird behavior.&lt;/p&gt;
&lt;p&gt;In these lines&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/blob/45494580d9405e80ba124d17c8379436883c8c78/actionpack/lib/action_view/helpers/active_record_helper.rb#L196-197&quot;&gt;
error_messages_for in Rails 2.3.5&lt;/a&gt; the gsub call force you to
have a locale file with models like that:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;models:
  bank account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Instead of&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;models:
  bank_account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;And when you call something like BankAccount.human_name it will
returns &quot;Bankaccount&quot; instead of &quot;conta&quot;.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm not sure if it is a bug, but it causes a weird behavior. 

In these lines 
[error_messages_for in Rails 2.3.5](http://github.com/rails/rails/blob/45494580d9405e80ba124d17c8379436883c8c78/actionpack/lib/action_view/helpers/active_record_helper.rb#L196-197) the gsub call force you to have a locale file with models like that:

@@@
models:
  bank account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;
@@@

Instead of

@@@
models:
  bank_account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;
@@@

And when you call something like BankAccount.human_name it will returns &quot;Bankaccount&quot; instead of &quot;conta&quot;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm not sure if it is a bug, but it causes a weird behavior.&lt;/p&gt;
&lt;p&gt;In these lines&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/blob/45494580d9405e80ba124d17c8379436883c8c78/actionpack/lib/action_view/helpers/active_record_helper.rb#L196-197&quot;&gt;
error_messages_for in Rails 2.3.5&lt;/a&gt; the gsub call force you to
have a locale file with models like that:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;models:
  bank account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Instead of&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;models:
  bank_account:
    one: &quot;conta&quot;
    other: &quot;contas&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;And when you call something like BankAccount.human_name it will
returns &quot;Bankaccount&quot; instead of &quot;conta&quot;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-29T19:53:48+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.5</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2009-12-29T19:53:49+00:00</updated-at>
      <user-id type="integer">40279</user-id>
      <version type="integer">1</version>
      <user-name>Daniel Lopes</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am experiencing the same problem. Looks as `error_messages_for` does a `gsub('_', ' ')` on the object name before handing it to i18n. My current workaround:

@@@
de:
  active_record:
    models:
      back_account: &quot;Bankkonto&quot;
      back account: &quot;Bankkonto&quot;
@@@

So both `BankAccount.human_name` and `error_messages_for :bank_account` return the same translated model name.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am experiencing the same problem. Looks as
&lt;code&gt;error_messages_for&lt;/code&gt; does a &lt;code&gt;gsub('_', ' ')&lt;/code&gt;
on the object name before handing it to i18n. My current
workaround:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;de:
  active_record:
    models:
      back_account: &quot;Bankkonto&quot;
      back account: &quot;Bankkonto&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;So both &lt;code&gt;BankAccount.human_name&lt;/code&gt; and
&lt;code&gt;error_messages_for :bank_account&lt;/code&gt; return the same
translated model name.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-16T13:00:00+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.5</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-02-16T13:00:03+00:00</updated-at>
      <user-id type="integer">36086</user-id>
      <version type="integer">2</version>
      <user-name>Martin Andert</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-16T13:02:37+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.5
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.5 error_messages_for i18n</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-02-16T13:02:39+00:00</updated-at>
      <user-id type="integer">36086</user-id>
      <version type="integer">3</version>
      <user-name>Martin Andert</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Could you please provide a failing test case?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you please provide a failing test case?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-16T23:26:32+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.5 error_messages_for i18n</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-02-16T23:26:35+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">4</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have attached a failing test case.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have attached a failing test case.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-17T13:56:24+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.5 error_messages_for i18n
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>18 2 error_messages_for</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-02-17T13:56:33+00:00</updated-at>
      <user-id type="integer">36086</user-id>
      <version type="integer">5</version>
      <user-name>Martin Andert</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>And here is the test case and the fix in one patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;And here is the test case and the fix in one patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-17T13:57:32+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>18 2 error_messages_for</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-02-17T13:57:33+00:00</updated-at>
      <user-id type="integer">36086</user-id>
      <version type="integer">6</version>
      <user-name>Martin Andert</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [6227ec11f0bd10e0b987e2dc9030e57de6d46d54]) Fix error_messages_for i18n issue if object_name has underscores [#3629 status:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/6227ec11f0bd10e0b987e2dc9030e57de6d46d54</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/6227ec11f0bd10e0b987e2dc9030e57de6d46d54&quot;
title=
&quot;Changeset [6227ec11f0bd10e0b987e2dc9030e57de6d46d54]&quot;&gt;[6227ec11f0bd10e0b987e2dc9030e57de6d46d54]&lt;/a&gt;)
Fix error_messages_for i18n issue if object_name has underscores
[&lt;a href=&quot;/projects/8994/tickets/3629&quot; title=
&quot;Ticket #3629&quot;&gt;#3629&lt;/a&gt; status:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/6227ec11f0bd10e0b987e2dc9030e57de6d46d54&quot;&gt;
http://github.com/rails/rails/commit/6227ec11f0bd10e0b987e2dc9030e5...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-17T20:08:28+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>18 2 error_messages_for</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-02-17T20:08:29+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">7</version>
      <user-name>Repository</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Awesome! Just applied.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Awesome! Just applied.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-02-17T20:08:51+00:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>18 2 error_messages_for</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-02-17T20:08:54+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">8</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-10T23:43:46+01:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 18 2 error_messages_for
:priority: 0
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2 error_messages_for</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-10-10T23:43:51+01:00</updated-at>
      <user-id type="integer">81551</user-id>
      <version type="integer">9</version>
      <user-name>Andrea Campi</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-16T23:36:16+01:00</created-at>
      <creator-id type="integer">40279</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2 error_messages_for
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3629</number>
      <permalink>weird-behavior-on-error_messages_for</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2-3-stable error_messages_for</tag>
      <title>weird behavior on error_messages_for</title>
      <updated-at type="datetime">2010-10-16T23:36:20+01:00</updated-at>
      <user-id type="integer">81551</user-id>
      <version type="integer">10</version>
      <user-name>Andrea Campi</user-name>
      <creator-name>Daniel Lopes</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3629</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>c74db00f38cdcb34c64e6d08068f4c1eee1fb2d8</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-02-17T13:56:24+00:00</created-at>
      <filename>failing_test_case_for_3629.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">413868</id>
      <size type="integer">1490</size>
      <uploader-id type="integer">36086</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/413868/failing_test_case_for_3629.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>c0c24bff166a30ae5e60e632800ae3f481d0cfc5</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-02-17T13:57:32+00:00</created-at>
      <filename>patch_for_3629.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">413871</id>
      <size type="integer">3363</size>
      <uploader-id type="integer">36086</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/413871/patch_for_3629.diff</url>
    </attachment>
  </attachments>
</ticket>
