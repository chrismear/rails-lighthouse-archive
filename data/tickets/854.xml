<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-08-18T20:42:19+01:00</created-at>
  <creator-id type="integer">22814</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">854</number>
  <permalink>has_one-unexpected-behaviour</permalink>
  <priority type="integer">311</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2.1 activerecord bug patch tested</tag>
  <title>has_one natural assignment to already associated record</title>
  <updated-at type="datetime">2008-08-25T09:30:54+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">5</version>
  <user-name>Repository</user-name>
  <creator-name>qoobaa</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/854</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Example from the http://www.simpltry.com/2008/07/08/has_one-weirdness/ :

&gt;&gt; user = User.first  
=&gt; #&lt;User id: 1&gt;  
&gt;&gt; user.email = Email.find(user.email.id)  
=&gt; #&lt;Email id: 1, user_id: 1&gt;  
&gt;&gt; user.reload  
=&gt; #&lt;User id: 1&gt;  
&gt;&gt; user.email  
=&gt; nil 

I've spent over two hours on debugging it in my code (I used callbacks to associate objects). It was really surprising - I think it's not the obvious and expected behaviour.</original-body>
  <latest-body>Example from the http://www.simpltry.com/2008/07/08/has_one-weirdness/ :

&gt;&gt; user = User.first  
=&gt; #&lt;User id: 1&gt;  
&gt;&gt; user.email = Email.find(user.email.id)  
=&gt; #&lt;Email id: 1, user_id: 1&gt;  
&gt;&gt; user.reload  
=&gt; #&lt;User id: 1&gt;  
&gt;&gt; user.email  
=&gt; nil 

I've spent over two hours on debugging it in my code (I used callbacks to associate objects). It was really surprising - I think it's not the obvious and expected behaviour.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Example from the &lt;a href=&quot;http://www.simpltry.com/2008/07/08/has_one-weirdness/&quot;&gt;http://www.simpltry.com/2008/07/...&lt;/a&gt; :&lt;/p&gt;

&lt;blockquote&gt;&lt;blockquote&gt;&lt;p&gt;user = User.first
=&gt; #
user.email = Email.find(user.email.id)
=&gt; #
user.reload
=&gt; #
user.email
=&gt; nil&lt;/p&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;

&lt;p&gt;I've spent over two hours on debugging it in my code (I used callbacks to associate objects). It was really surprising - I think it's not the obvious and expected behaviour.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Example from the http://www.simpltry.com/2008/07/08/has_one-weirdness/ :

@@@ ruby
&gt;&gt; user = User.first  
=&gt; #&lt;User id: 1&gt;  
&gt;&gt; user.email = Email.find(user.email.id)  
=&gt; #&lt;Email id: 1, user_id: 1&gt;  
&gt;&gt; user.reload  
=&gt; #&lt;User id: 1&gt;  
&gt;&gt; user.email  
=&gt; nil 
@@@

I've spent over two hours on debugging it in my code (I used callbacks to associate objects). It's really surprising - I think it's not the obvious and expected behaviour.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Example from the &lt;a href=&quot;http://www.simpltry.com/2008/07/08/has_one-weirdness/&quot;&gt;http://www.simpltry.com/2008/07/...&lt;/a&gt; :&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
&amp;gt;&amp;gt; user = User.first
=&amp;gt; #&amp;lt;User id: 1&amp;gt;
&amp;gt;&amp;gt; user.email = Email.find(user.email.id)
=&amp;gt; #&amp;lt;Email id: 1, user_id: 1&amp;gt;
&amp;gt;&amp;gt; user.reload
=&amp;gt; #&amp;lt;User id: 1&amp;gt;
&amp;gt;&amp;gt; user.email
=&amp;gt; nil
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I've spent over two hours on debugging it in my code (I used callbacks to associate objects). It's really surprising - I think it's not the obvious and expected behaviour.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-18T20:47:27+01:00</created-at>
      <creator-id type="integer">22814</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">854</number>
      <permalink>has_one-unexpected-behaviour</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug</tag>
      <title>has_one unexpected behaviour</title>
      <updated-at type="datetime">2008-08-18T20:47:27+01:00</updated-at>
      <user-id type="integer">22814</user-id>
      <version type="integer">1</version>
      <user-name>qoobaa</user-name>
      <creator-name>qoobaa</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/854</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've fixed the bug and created a simple test_has_one_natural_assignment_to_already_associated_record.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've fixed the bug and created a simple test_has_one_natural_assignment_to_already_associated_record.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-21T12:04:00+01:00</created-at>
      <creator-id type="integer">22814</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.1 activerecord bug
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">854</number>
      <permalink>has_one-unexpected-behaviour</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug patch tested</tag>
      <title>has_one unexpected behaviour</title>
      <updated-at type="datetime">2008-08-21T12:04:00+01:00</updated-at>
      <user-id type="integer">22814</user-id>
      <version type="integer">2</version>
      <user-name>qoobaa</user-name>
      <creator-name>qoobaa</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/854</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-21T12:07:46+01:00</created-at>
      <creator-id type="integer">22814</creator-id>
      <diffable-attributes type="yaml">--- 
:title: has_one unexpected behaviour
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">854</number>
      <permalink>has_one-unexpected-behaviour</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug patch tested</tag>
      <title>has_one natural assignment to already associated record</title>
      <updated-at type="datetime">2008-08-21T12:07:46+01:00</updated-at>
      <user-id type="integer">22814</user-id>
      <version type="integer">3</version>
      <user-name>qoobaa</user-name>
      <creator-name>qoobaa</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/854</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [ea40f71431a821b2ddb37be6ea3ee7d8dac63b85]) Fix that has_one natural assignment to already associated record. [#854 state:resolved]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/ea40f71431a821b2ddb37be6ea3ee7d8dac63b85</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [ea40f71431a821b2ddb37be6ea3ee7d8dac63b85]) Fix that has_one natural assignment to already associated record. [&lt;a href=&quot;/projects/8994/tickets/854&quot; title=&quot;Ticket #854&quot;&gt;#854&lt;/a&gt; state:resolved]&lt;/p&gt;

&lt;p&gt;Signed-off-by: Pratik Naik &lt;a href=&quot;&amp;amp;#x6d;&amp;amp;#x61;&amp;amp;#105;&amp;amp;#x6c;&amp;amp;#x74;&amp;amp;#x6f;&amp;amp;#x3a;&amp;amp;#112;&amp;amp;#x72;&amp;amp;#x61;&amp;amp;#116;&amp;amp;#x69;&amp;amp;#x6b;&amp;amp;#110;&amp;amp;#97;&amp;amp;#x69;&amp;amp;#x6b;&amp;amp;#64;&amp;amp;#x67;&amp;amp;#x6d;&amp;amp;#x61;&amp;amp;#105;&amp;amp;#108;&amp;amp;#x2e;&amp;amp;#x63;&amp;amp;#111;&amp;amp;#x6d;&quot;&gt;&amp;#112;&amp;#x72;&amp;#97;&amp;#x74;&amp;#105;&amp;#107;&amp;#x6e;&amp;#97;&amp;#x69;&amp;#107;&amp;#x40;&amp;#x67;&amp;#109;&amp;#x61;&amp;#x69;&amp;#x6c;&amp;#46;&amp;#x63;&amp;#111;&amp;#x6d;&lt;/a&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/ea40f71431a821b2ddb37be6ea3ee7d8dac63b85&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-21T15:30:16+01:00</created-at>
      <creator-id type="integer">22814</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">854</number>
      <permalink>has_one-unexpected-behaviour</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.1 activerecord bug patch tested</tag>
      <title>has_one natural assignment to already associated record</title>
      <updated-at type="datetime">2008-08-21T15:30:16+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">4</version>
      <user-name>Repository</user-name>
      <creator-name>qoobaa</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/854</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [2242d3faf12dfc381850e2269016dd4ba95bad86]) Fix that has_one natural assignment to already associated record. [#854 state:resolved]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/2242d3faf12dfc381850e2269016dd4ba95bad86</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [2242d3faf12dfc381850e2269016dd4ba95bad86]) Fix that has_one natural assignment to already associated record. [&lt;a href=&quot;/projects/8994/tickets/854&quot; title=&quot;Ticket #854&quot;&gt;#854&lt;/a&gt; state:resolved]&lt;/p&gt;

&lt;p&gt;Signed-off-by: Pratik Naik &lt;a&gt;&amp;#112;&amp;#x72;&amp;#x61;&amp;#116;&amp;#105;&amp;#x6b;&amp;#x6e;&amp;#x61;&amp;#x69;&amp;#x6b;&amp;#x40;&amp;#103;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#108;&amp;#46;&amp;#99;&amp;#111;&amp;#109;&lt;/a&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/2242d3faf12dfc381850e2269016dd4ba95bad86&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-25T09:30:54+01:00</created-at>
      <creator-id type="integer">22814</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">854</number>
      <permalink>has_one-unexpected-behaviour</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.1 activerecord bug patch tested</tag>
      <title>has_one natural assignment to already associated record</title>
      <updated-at type="datetime">2008-08-25T09:30:54+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">5</version>
      <user-name>Repository</user-name>
      <creator-name>qoobaa</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/854</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>d9d442af329c161681b8946328497a4937d8ce19</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-08-21T12:04:00+01:00</created-at>
      <filename>has_one_natural_assignment_to_already_associated_record.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">40663</id>
      <size type="integer">2083</size>
      <uploader-id type="integer">22814</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/40663/has_one_natural_assignment_to_already_associated_record.diff</url>
    </attachment>
  </attachments>
</ticket>
