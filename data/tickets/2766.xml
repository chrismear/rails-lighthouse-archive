<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-06-05T05:01:31+01:00</created-at>
  <creator-id type="integer">23629</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2766</number>
  <permalink>allow-absolute-paths-for-the-asset-cache-option</permalink>
  <priority type="integer">1873</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>assets cache tests</tag>
  <title>Allow absolute paths for the asset :cache option</title>
  <updated-at type="datetime">2009-06-11T05:35:07+01:00</updated-at>
  <user-id type="integer">141</user-id>
  <version type="integer">6</version>
  <user-name>Michael Koziarski</user-name>
  <creator-name>Andrew Kaspick</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2766</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>This patch allows using an absolute path with the :cache option for stylesheet_link_tag and javascript_include_tag which didn't work before...

stylesheet_link_tag(:all, :cache =&gt; &quot;/absolute/test&quot;)

Relative paths are accepted such as...

stylesheet_link_tag(:all, :cache =&gt; &quot;../relative/test&quot;)

so this patch makes things more consitent and allows both.</original-body>
  <latest-body>This patch allows using an absolute path with the :cache option for stylesheet_link_tag and javascript_include_tag which didn't work before...

stylesheet_link_tag(:all, :cache =&gt; &quot;/absolute/test&quot;)

Relative paths are accepted such as...

stylesheet_link_tag(:all, :cache =&gt; &quot;../relative/test&quot;)

so this patch makes things more consitent and allows both.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;This patch allows using an absolute path with the :cache option
for stylesheet_link_tag and javascript_include_tag which didn't
work before...&lt;/p&gt;
&lt;p&gt;stylesheet_link_tag(:all, :cache =&amp;gt; &quot;/absolute/test&quot;)&lt;/p&gt;
&lt;p&gt;Relative paths are accepted such as...&lt;/p&gt;
&lt;p&gt;stylesheet_link_tag(:all, :cache =&amp;gt; &quot;../relative/test&quot;)&lt;/p&gt;
&lt;p&gt;so this patch makes things more consitent and allows both.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This patch allows using an absolute path with the :cache option for stylesheet_link_tag and javascript_include_tag which didn't work before...

stylesheet_link_tag(:all, :cache =&gt; &quot;/absolute/test&quot;)

Relative paths are accepted such as...

stylesheet_link_tag(:all, :cache =&gt; &quot;../relative/test&quot;)

so this patch makes things more consitent and allows both.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This patch allows using an absolute path with the :cache option
for stylesheet_link_tag and javascript_include_tag which didn't
work before...&lt;/p&gt;
&lt;p&gt;stylesheet_link_tag(:all, :cache =&amp;gt; &quot;/absolute/test&quot;)&lt;/p&gt;
&lt;p&gt;Relative paths are accepted such as...&lt;/p&gt;
&lt;p&gt;stylesheet_link_tag(:all, :cache =&amp;gt; &quot;../relative/test&quot;)&lt;/p&gt;
&lt;p&gt;so this patch makes things more consitent and allows both.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-05T05:01:31+01:00</created-at>
      <creator-id type="integer">23629</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2766</number>
      <permalink>allow-absolute-paths-for-the-asset-cache-option</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>assets cache tests</tag>
      <title>Allow absolute paths for the asset :cache option</title>
      <updated-at type="datetime">2009-06-05T05:01:33+01:00</updated-at>
      <user-id type="integer">23629</user-id>
      <version type="integer">1</version>
      <user-name>Andrew Kaspick</user-name>
      <creator-name>Andrew Kaspick</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2766</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Those aren't (strictly speaking) absolute paths though?  They're still relative to the public directory?  

Out of interest, what's the use case that you have in mind where storing it in public is ok but in public/javascripts isn't?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Those aren't (strictly speaking) absolute paths though? They're
still relative to the public directory?&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Out of interest, what's the use case that you have in mind where
storing it in public is ok but in public/javascripts isn't?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T04:28:00+01:00</created-at>
      <creator-id type="integer">23629</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2766</number>
      <permalink>allow-absolute-paths-for-the-asset-cache-option</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>assets cache tests</tag>
      <title>Allow absolute paths for the asset :cache option</title>
      <updated-at type="datetime">2009-06-10T04:28:00+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">2</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Andrew Kaspick</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2766</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Absolute to the asset dir (public) that is, just as any path reference can be absolute with respect to the asset dir used with any of the current asset methods (image_tag, stylesheet_link_tag, javascript_tag)

@@@ ruby
image_tag '/otherimages/image.png' # &quot;absolute&quot; reference
@@@

The use case this came from is where I have bluetrip (css framework) installed in the base asset dir (public).  Bluetrip refers to images in it's stylesheets relative to that stylesheets location, so it expects the css file to reside in a specific directory in order to for the image references to resolve correctly.

@@@ ruby
&lt;%= stylesheet_link_tag '/bluetrip/css/screen', '/bluetrip/css/style' %&gt;
@@@

When stylesheet_link_tag is used with the :cache option, that collapses all of these css files into one file in the public/stylesheets directory, so the images are no longer in the correct relative spot for this new cached css file.

@@@ css
.somerule {
  background-image: url(../resources/ok.png);
}
@@@

This is how I currently fix the problem; by using a '../bluetrip/css/blueprint' &quot;relative&quot; path.

@@@ ruby
&lt;%= stylesheet_link_tag '/bluetrip/css/screen', '/bluetrip/css/style', :cache =&gt; '../bluetrip/css/bluetrip' %&gt;
@@@

With my patch I'd be able to change that to an &quot;absolute&quot; path, just like any other asset file reference.

@@@ ruby
&lt;%= stylesheet_link_tag '/bluetrip/css/screen', '/bluetrip/css/style', :cache =&gt; '/bluetrip/css/blueprint' %&gt;
@@@

It's a minor difference, but follows the same path naming rules that are used in the rest of the asset method.  Also without this patch, the cached file is saved as 'public/stylesheets/bluetrip/css/blueprint.css', which is not correct for allowing the image references in the stylesheet to resolve.

If I'm not clear with my explanation, please let me know.

Thanks</body>
      <body-html>&lt;div&gt;&lt;p&gt;Absolute to the asset dir (public) that is, just as any path
reference can be absolute with respect to the asset dir used with
any of the current asset methods (image_tag, stylesheet_link_tag,
javascript_tag)&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;image_tag '/otherimages/image.png' # &quot;absolute&quot; reference&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The use case this came from is where I have bluetrip (css
framework) installed in the base asset dir (public). Bluetrip
refers to images in it's stylesheets relative to that stylesheets
location, so it expects the css file to reside in a specific
directory in order to for the image references to resolve
correctly.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;&amp;lt;%= stylesheet_link_tag '/bluetrip/css/screen', '/bluetrip/css/style' %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;When stylesheet_link_tag is used with the :cache option, that
collapses all of these css files into one file in the
public/stylesheets directory, so the images are no longer in the
correct relative spot for this new cached css file.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;css&quot;&gt;.somerule {
  background-image: url(../resources/ok.png);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This is how I currently fix the problem; by using a
'../bluetrip/css/blueprint' &quot;relative&quot; path.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;&amp;lt;%= stylesheet_link_tag '/bluetrip/css/screen', '/bluetrip/css/style', :cache =&amp;gt; '../bluetrip/css/bluetrip' %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;With my patch I'd be able to change that to an &quot;absolute&quot; path,
just like any other asset file reference.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;&amp;lt;%= stylesheet_link_tag '/bluetrip/css/screen', '/bluetrip/css/style', :cache =&amp;gt; '/bluetrip/css/blueprint' %&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;It's a minor difference, but follows the same path naming rules
that are used in the rest of the asset method. Also without this
patch, the cached file is saved as
'public/stylesheets/bluetrip/css/blueprint.css', which is not
correct for allowing the image references in the stylesheet to
resolve.&lt;/p&gt;
&lt;p&gt;If I'm not clear with my explanation, please let me know.&lt;/p&gt;
&lt;p&gt;Thanks&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T04:56:06+01:00</created-at>
      <creator-id type="integer">23629</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2766</number>
      <permalink>allow-absolute-paths-for-the-asset-cache-option</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>assets cache tests</tag>
      <title>Allow absolute paths for the asset :cache option</title>
      <updated-at type="datetime">2009-06-10T04:56:06+01:00</updated-at>
      <user-id type="integer">23629</user-id>
      <version type="integer">3</version>
      <user-name>Andrew Kaspick</user-name>
      <creator-name>Andrew Kaspick</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2766</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK,  Last thing is this patch doesn't clean up after itself right.

Run rake test a few times and then git status.

If you can fix that I'll apply it to master.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK, Last thing is this patch doesn't clean up after itself
right.&lt;/p&gt;
&lt;p&gt;Run rake test a few times and then git status.&lt;/p&gt;
&lt;p&gt;If you can fix that I'll apply it to master.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T09:50:19+01:00</created-at>
      <creator-id type="integer">23629</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2766</number>
      <permalink>allow-absolute-paths-for-the-asset-cache-option</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>assets cache tests</tag>
      <title>Allow absolute paths for the asset :cache option</title>
      <updated-at type="datetime">2009-06-10T09:50:19+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">4</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Andrew Kaspick</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2766</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Updated with new patch file.

Thanks</body>
      <body-html>&lt;div&gt;&lt;p&gt;Updated with new patch file.&lt;/p&gt;
&lt;p&gt;Thanks&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T17:05:23+01:00</created-at>
      <creator-id type="integer">23629</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2766</number>
      <permalink>allow-absolute-paths-for-the-asset-cache-option</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>assets cache tests</tag>
      <title>Allow absolute paths for the asset :cache option</title>
      <updated-at type="datetime">2009-06-10T17:05:23+01:00</updated-at>
      <user-id type="integer">23629</user-id>
      <version type="integer">5</version>
      <user-name>Andrew Kaspick</user-name>
      <creator-name>Andrew Kaspick</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2766</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-06-11T05:35:07+01:00</created-at>
      <creator-id type="integer">23629</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2766</number>
      <permalink>allow-absolute-paths-for-the-asset-cache-option</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>assets cache tests</tag>
      <title>Allow absolute paths for the asset :cache option</title>
      <updated-at type="datetime">2009-06-11T05:35:07+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">6</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Andrew Kaspick</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2766</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>7b056c1f810f8aee038d10a41919ec6e3778c67c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-06-05T05:01:31+01:00</created-at>
      <filename>absolute_cache.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">129904</id>
      <size type="integer">4058</size>
      <uploader-id type="integer">23629</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/129904/absolute_cache.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>9f8c0b2ec36b7b49aa28ec4f6e750d5d47ba569e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-06-10T17:05:19+01:00</created-at>
      <filename>absolute_cache.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">131649</id>
      <size type="integer">5851</size>
      <uploader-id type="integer">23629</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/131649/absolute_cache.diff</url>
    </attachment>
  </attachments>
</ticket>
