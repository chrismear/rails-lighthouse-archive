<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">40272</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-08-12T15:56:30+01:00</created-at>
  <creator-id type="integer">53325</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5365</number>
  <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
  <title>Touch-ing with counter cache results in an erro</title>
  <updated-at type="datetime">2010-08-17T02:48:11+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">16</version>
  <user-name>Repository</user-name>
  <creator-name>Neil Middleton</creator-name>
  <assigned-user-name>Santiago Pastorino</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
  <priority-name>Low</priority-name>
  <original-body>We have two models, one of 'things' and one of 'likes'

The relationship is :

#Thing
  has_many :likes

#Like
  belongs_to :thing, :counter_cache =&gt; :like_count, :touch =&gt; :true

If I then create a like against a thing the attached stack is returned with:

NoMethodError: undefined method `true=' for #&lt;Thing:0x2b2c49df9788&gt;

Removing :touch =&gt; :true from the Likes model makes the error go away, but then leaves your Thing model with a stale timestamp which is a bad thing.

This worked in all previous Rails 3.0 beta's but now appears to have changed.</original-body>
  <latest-body>We have two models, one of 'things' and one of 'likes'

The relationship is :

#Thing
  has_many :likes

#Like
  belongs_to :thing, :counter_cache =&gt; :like_count, :touch =&gt; :true

If I then create a like against a thing the attached stack is returned with:

NoMethodError: undefined method `true=' for #&lt;Thing:0x2b2c49df9788&gt;

Removing :touch =&gt; :true from the Likes model makes the error go away, but then leaves your Thing model with a stale timestamp which is a bad thing.

This worked in all previous Rails 3.0 beta's but now appears to have changed.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;We have two models, one of 'things' and one of 'likes'&lt;/p&gt;
&lt;p&gt;The relationship is :&lt;/p&gt;
&lt;h1&gt;Thing&lt;/h1&gt;
&lt;p&gt;has_many :likes&lt;/p&gt;
&lt;h1&gt;Like&lt;/h1&gt;
&lt;p&gt;belongs_to :thing, :counter_cache =&amp;gt; :like_count, :touch
=&amp;gt; :true&lt;/p&gt;
&lt;p&gt;If I then create a like against a thing the attached stack is
returned with:&lt;/p&gt;
&lt;p&gt;NoMethodError: undefined method &lt;code&gt;true=' for
#&amp;lt;Thing:0x2b2c49df9788&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Removing :touch =&amp;gt; :true from the Likes model makes the error
go away, but then leaves your Thing model with a stale timestamp
which is a bad thing.&lt;/p&gt;
&lt;p&gt;This worked in all previous Rails 3.0 beta's but now appears to
have changed.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>We have two models, one of 'things' and one of 'likes'

The relationship is :

#Thing
  has_many :likes

#Like
  belongs_to :thing, :counter_cache =&gt; :like_count, :touch =&gt; :true

If I then create a like against a thing the attached stack is returned with:

NoMethodError: undefined method `true=' for #&lt;Thing:0x2b2c49df9788&gt;

Removing :touch =&gt; :true from the Likes model makes the error go away, but then leaves your Thing model with a stale timestamp which is a bad thing.

This worked in all previous Rails 3.0 beta's but now appears to have changed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;We have two models, one of 'things' and one of 'likes'&lt;/p&gt;
&lt;p&gt;The relationship is :&lt;/p&gt;
&lt;h1&gt;Thing&lt;/h1&gt;
&lt;p&gt;has_many :likes&lt;/p&gt;
&lt;h1&gt;Like&lt;/h1&gt;
&lt;p&gt;belongs_to :thing, :counter_cache =&amp;gt; :like_count, :touch
=&amp;gt; :true&lt;/p&gt;
&lt;p&gt;If I then create a like against a thing the attached stack is
returned with:&lt;/p&gt;
&lt;p&gt;NoMethodError: undefined method &lt;code&gt;true=' for
#&amp;lt;Thing:0x2b2c49df9788&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Removing :touch =&amp;gt; :true from the Likes model makes the error
go away, but then leaves your Thing model with a stale timestamp
which is a bad thing.&lt;/p&gt;
&lt;p&gt;This worked in all previous Rails 3.0 beta's but now appears to
have changed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T15:56:30+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T15:56:32+01:00</updated-at>
      <user-id type="integer">53325</user-id>
      <version type="integer">1</version>
      <user-name>Neil Middleton</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Could you please add a failing test case to Rails test suite?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you please add a failing test case to Rails test
suite?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T16:59:05+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T16:59:08+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">2</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hi Jos&#233;,

I would love to, but am not sure how, and therefore can't be sure that the test would be correct.

N</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Jos&amp;eacute;,&lt;/p&gt;
&lt;p&gt;I would love to, but am not sure how, and therefore can't be
sure that the test would be correct.&lt;/p&gt;
&lt;p&gt;N&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:07:23+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:07:25+01:00</updated-at>
      <user-id type="integer">53325</user-id>
      <version type="integer">3</version>
      <user-name>Neil Middleton</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This isn't a bug. When you use a symbol with :touch it attempts to update an attribute with that same name. He just needs to use :touch =&gt; true to update the updated_at field.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This isn't a bug. When you use a symbol with :touch it attempts
to update an attribute with that same name. He just needs to use
:touch =&amp;gt; true to update the updated_at field.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:39:18+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:39:22+01:00</updated-at>
      <user-id type="integer">30535</user-id>
      <version type="integer">4</version>
      <user-name>Mark Turner</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK - had a stab at it - I've altered the models so that the issue causes some tests to fail.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK - had a stab at it - I've altered the models so that the
issue causes some tests to fail.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:41:09+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:41:11+01:00</updated-at>
      <user-id type="integer">53325</user-id>
      <version type="integer">5</version>
      <user-name>Neil Middleton</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Here is a passing test using the correct syntax for touch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here is a passing test using the correct syntax for touch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:45:40+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:45:44+01:00</updated-at>
      <user-id type="integer">30535</user-id>
      <version type="integer">6</version>
      <user-name>Mark Turner</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>@Mark it seems you're correct.  In my app this is now working as it should.  However, I'm not sure how this was previously working prior to rails3.0.0.rc</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Mark it seems you're correct. In my app this is now working as
it should. However, I'm not sure how this was previously working
prior to rails3.0.0.rc&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:46:06+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:46:08+01:00</updated-at>
      <user-id type="integer">53325</user-id>
      <version type="integer">7</version>
      <user-name>Neil Middleton</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>@Niel, you did find a corner case we didn't have a test for.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Niel, you did find a corner case we didn't have a test for.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:46:50+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:46:53+01:00</updated-at>
      <user-id type="integer">30535</user-id>
      <version type="integer">8</version>
      <user-name>Mark Turner</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>@Mark - well, it's nice to make a rails contribution - no matter how small ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Mark - well, it's nice to make a rails contribution - no matter
how small ;)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:48:20+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:48:22+01:00</updated-at>
      <user-id type="integer">53325</user-id>
      <version type="integer">9</version>
      <user-name>Neil Middleton</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-12T17:50:05+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: &quot;\&quot;activerecord rails3\&quot; \&quot;rails 3.0.0.rc\&quot; touch&quot;
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-12T17:50:10+01:00</updated-at>
      <user-id type="integer">30535</user-id>
      <version type="integer">10</version>
      <user-name>Mark Turner</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-13T23:51:09+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an error</title>
      <updated-at type="datetime">2010-08-13T23:51:12+01:00</updated-at>
      <user-id type="integer">30535</user-id>
      <version type="integer">11</version>
      <user-name>Mark Turner</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Any word on the test patch I added?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any word on the test patch I added?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-16T23:28:46+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Touch-ing with counter cache results in an error
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an erro</title>
      <updated-at type="datetime">2010-08-16T23:28:48+01:00</updated-at>
      <user-id type="integer">30535</user-id>
      <version type="integer">12</version>
      <user-name>Mark Turner</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [6177a0be96cebac129d0e20d2b5ec009a00fa56c]) added testcase for belongs_to with a counter_cache and touch

[#5365 state:committed]

Signed-off-by: Santiago Pastorino &lt;santiago@wyeworks.com&gt;
http://github.com/rails/rails/commit/6177a0be96cebac129d0e20d2b5ec009a00fa56c</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/6177a0be96cebac129d0e20d2b5ec009a00fa56c&quot;
title=
&quot;Changeset [6177a0be96cebac129d0e20d2b5ec009a00fa56c]&quot;&gt;[6177a0be96cebac129d0e20d2b5ec009a00fa56c]&lt;/a&gt;)
added testcase for belongs_to with a counter_cache and touch&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/5365&quot; title=
&quot;Ticket #5365&quot;&gt;#5365&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Santiago Pastorino &lt;a href=
&quot;mailto:santiago@wyeworks.com&quot;&gt;santiago@wyeworks.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/6177a0be96cebac129d0e20d2b5ec009a00fa56c&quot;&gt;
http://github.com/rails/rails/commit/6177a0be96cebac129d0e20d2b5ec0...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-08-17T02:44:30+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an erro</title>
      <updated-at type="datetime">2010-08-17T02:44:31+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">13</version>
      <user-name>Repository</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [f1b33f7f22b7cddb7a80afbfa134a62600391b22]) Restore pet -&gt; owner relationship to the previous state

[#5365]
http://github.com/rails/rails/commit/f1b33f7f22b7cddb7a80afbfa134a62600391b22</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/f1b33f7f22b7cddb7a80afbfa134a62600391b22&quot;
title=
&quot;Changeset [f1b33f7f22b7cddb7a80afbfa134a62600391b22]&quot;&gt;[f1b33f7f22b7cddb7a80afbfa134a62600391b22]&lt;/a&gt;)
Restore pet -&amp;gt; owner relationship to the previous state&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/5365&quot; title=
&quot;Ticket #5365&quot;&gt;#5365&lt;/a&gt;] &lt;a href=
&quot;http://github.com/rails/rails/commit/f1b33f7f22b7cddb7a80afbfa134a62600391b22&quot;&gt;
http://github.com/rails/rails/commit/f1b33f7f22b7cddb7a80afbfa134a6...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-08-17T02:47:16+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an erro</title>
      <updated-at type="datetime">2010-08-17T02:47:17+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">14</version>
      <user-name>Repository</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [6f478b06989ee10b63c9581b266b60bb946afd4f]) Restore pet -&gt; owner relationship to the previous state

[#5365]
http://github.com/rails/rails/commit/6f478b06989ee10b63c9581b266b60bb946afd4f</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/6f478b06989ee10b63c9581b266b60bb946afd4f&quot;
title=
&quot;Changeset [6f478b06989ee10b63c9581b266b60bb946afd4f]&quot;&gt;[6f478b06989ee10b63c9581b266b60bb946afd4f]&lt;/a&gt;)
Restore pet -&amp;gt; owner relationship to the previous state&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/5365&quot; title=
&quot;Ticket #5365&quot;&gt;#5365&lt;/a&gt;] &lt;a href=
&quot;http://github.com/rails/rails/commit/6f478b06989ee10b63c9581b266b60bb946afd4f&quot;&gt;
http://github.com/rails/rails/commit/6f478b06989ee10b63c9581b266b60...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-08-17T02:48:09+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an erro</title>
      <updated-at type="datetime">2010-08-17T02:48:10+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">15</version>
      <user-name>Repository</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [fc43c62fc68bc6a75fd57c2da252ede00dd319ba]) added testcase for belongs_to with a counter_cache and touch

[#5365 state:committed]

Signed-off-by: Santiago Pastorino &lt;santiago@wyeworks.com&gt;
http://github.com/rails/rails/commit/fc43c62fc68bc6a75fd57c2da252ede00dd319ba</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/fc43c62fc68bc6a75fd57c2da252ede00dd319ba&quot;
title=
&quot;Changeset [fc43c62fc68bc6a75fd57c2da252ede00dd319ba]&quot;&gt;[fc43c62fc68bc6a75fd57c2da252ede00dd319ba]&lt;/a&gt;)
added testcase for belongs_to with a counter_cache and touch&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/5365&quot; title=
&quot;Ticket #5365&quot;&gt;#5365&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Santiago Pastorino
&lt;a&gt;santiago@wyeworks.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/fc43c62fc68bc6a75fd57c2da252ede00dd319ba&quot;&gt;
http://github.com/rails/rails/commit/fc43c62fc68bc6a75fd57c2da252ed...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-08-17T02:48:09+01:00</created-at>
      <creator-id type="integer">53325</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5365</number>
      <permalink>touch-ing-with-counter-cache-results-in-an-error</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;activerecord rails3&quot; patch &quot;rails 3.0.0.rc&quot; touch</tag>
      <title>Touch-ing with counter cache results in an erro</title>
      <updated-at type="datetime">2010-08-17T02:48:11+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">16</version>
      <user-name>Repository</user-name>
      <creator-name>Neil Middleton</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5365</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>1e99c5c347bfa2d2197ccb4e1f185ff60dc0c05e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-08-12T15:56:30+01:00</created-at>
      <filename>backtrace.txt</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">625819</id>
      <size type="integer">9084</size>
      <uploader-id type="integer">53325</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/625819/backtrace.txt</url>
    </attachment>
    <attachment type="Attachment">
      <code>83e4ca52f976c73748b5814b3091d72d01b509f1</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-08-12T17:41:09+01:00</created-at>
      <filename>5365_test.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">625993</id>
      <size type="integer">1021</size>
      <uploader-id type="integer">53325</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/625993/5365_test.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>8d29f827da839441b04652bc9f7adb5647f16cf9</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-08-12T17:45:40+01:00</created-at>
      <filename>touch-association-counter.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">626011</id>
      <size type="integer">1409</size>
      <uploader-id type="integer">30535</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/626011/touch-association-counter.patch</url>
    </attachment>
  </attachments>
</ticket>
