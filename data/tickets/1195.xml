<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">141</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-10-08T22:52:50+01:00</created-at>
  <creator-id type="integer">22437</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1195</number>
  <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
  <priority type="integer">12</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>2.2.2 bug bug encoding iconv inflector</tag>
  <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
  <updated-at type="datetime">2009-02-06T04:12:06+00:00</updated-at>
  <user-id type="integer">22427</user-id>
  <version type="integer">14</version>
  <user-name>David Reese</user-name>
  <creator-name>James Kebinger</creator-name>
  <assigned-user-name>Michael Koziarski</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
  <priority-name nil="true"></priority-name>
  <original-body>After moving to edge rails on a OS X 10.4 machine, script/server throws the error `iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding) on launch.

The function in question reads as follows:

    # Replaces accented characters with their ascii equivalents.
    def transliterate(string)
      Iconv.iconv('ascii//translit//IGNORE', 'utf-8', string).to_s
    end

The problem is resolved by switching the order of the arguments like this: 

Iconv.iconv('ascii//ignore//translit', 'utf-8', string).to_s

That format starts on both Tiger and Leopard, whereas the current syntax in edge rails only starts on Leopard.

The ruby version on the machine that fails is 1.8.6 (2008-08-11 patchlevel 287). The IConv class passes through to an external library though, so the version of that is probably at issue

The stack dump is as follows:
/Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `transliterate'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:281
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support.rb:26
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/railties/lib/commands/server.rb:1
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from script/server:3</original-body>
  <latest-body>After moving to edge rails on a OS X 10.4 machine, script/server throws the error `iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding) on launch.

The function in question reads as follows:

    # Replaces accented characters with their ascii equivalents.
    def transliterate(string)
      Iconv.iconv('ascii//translit//IGNORE', 'utf-8', string).to_s
    end

The problem is resolved by switching the order of the arguments like this: 

Iconv.iconv('ascii//ignore//translit', 'utf-8', string).to_s

That format starts on both Tiger and Leopard, whereas the current syntax in edge rails only starts on Leopard.

The ruby version on the machine that fails is 1.8.6 (2008-08-11 patchlevel 287). The IConv class passes through to an external library though, so the version of that is probably at issue

The stack dump is as follows:
/Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `transliterate'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:281
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support.rb:26
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/railties/lib/commands/server.rb:1
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from script/server:3</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;After moving to edge rails on a OS X 10.4 machine, script/server
throws the error &lt;code&gt;iconv': invalid encoding
(&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding) on
launch.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;The function in question reads as follows:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# Replaces accented characters with their ascii equivalents.
def transliterate(string)
  Iconv.iconv('ascii//translit//IGNORE', 'utf-8', string).to_s
end
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The problem is resolved by switching the order of the arguments
like this:&lt;/p&gt;
&lt;p&gt;Iconv.iconv('ascii//ignore//translit', 'utf-8', string).to_s&lt;/p&gt;
&lt;p&gt;That format starts on both Tiger and Leopard, whereas the
current syntax in edge rails only starts on Leopard.&lt;/p&gt;
&lt;p&gt;The ruby version on the machine that fails is 1.8.6 (2008-08-11
patchlevel 287). The IConv class passes through to an external
library though, so the version of that is probably at issue&lt;/p&gt;
&lt;p&gt;The stack dump is as follows: /Users/Cris/Documents/Aptana
Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in
&lt;code&gt;iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;)
(Iconv::InvalidEncoding)&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `transliterate'
    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:281
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support.rb:26
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/railties/lib/commands/server.rb:1
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from script/server:3
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>After moving to edge rails on a OS X 10.4 machine, script/server throws the error `iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding) on launch.

The function in question reads as follows:

    # Replaces accented characters with their ascii equivalents.
    def transliterate(string)
      Iconv.iconv('ascii//translit//IGNORE', 'utf-8', string).to_s
    end

The problem is resolved by switching the order of the arguments like this: 

Iconv.iconv('ascii//ignore//translit', 'utf-8', string).to_s

That format starts on both Tiger and Leopard, whereas the current syntax in edge rails only starts on Leopard.

The ruby version on the machine that fails is 1.8.6 (2008-08-11 patchlevel 287). The IConv class passes through to an external library though, so the version of that is probably at issue

The stack dump is as follows:
/Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `transliterate'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:281
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support.rb:26
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/railties/lib/commands/server.rb:1
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
        from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
        from script/server:3</body>
      <body-html>&lt;div&gt;&lt;p&gt;After moving to edge rails on a OS X 10.4 machine, script/server
throws the error &lt;code&gt;iconv': invalid encoding
(&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding) on
launch.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;The function in question reads as follows:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# Replaces accented characters with their ascii equivalents.
def transliterate(string)
  Iconv.iconv('ascii//translit//IGNORE', 'utf-8', string).to_s
end
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The problem is resolved by switching the order of the arguments
like this:&lt;/p&gt;
&lt;p&gt;Iconv.iconv('ascii//ignore//translit', 'utf-8', string).to_s&lt;/p&gt;
&lt;p&gt;That format starts on both Tiger and Leopard, whereas the
current syntax in edge rails only starts on Leopard.&lt;/p&gt;
&lt;p&gt;The ruby version on the machine that fails is 1.8.6 (2008-08-11
patchlevel 287). The IConv class passes through to an external
library though, so the version of that is probably at issue&lt;/p&gt;
&lt;p&gt;The stack dump is as follows: /Users/Cris/Documents/Aptana
Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in
&lt;code&gt;iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;)
(Iconv::InvalidEncoding)&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:276:in `transliterate'
    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support/inflector.rb:281
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/activesupport/lib/active_support.rb:26
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from /Users/Cris/Documents/Aptana Studio/insights/vendor/rails/railties/lib/commands/server.rb:1
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from script/server:3
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-08T22:52:50+01:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 encoding iconv inflector invalid</tag>
      <title>crash on server launch `iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-10-08T22:53:21+01:00</updated-at>
      <user-id type="integer">22437</user-id>
      <version type="integer">1</version>
      <user-name>James Kebinger</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-08T22:53:56+01:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:title: &quot;crash on server launch `iconv': invalid encoding (\&quot;ascii//translit//IGNORE\&quot;, \&quot;utf-8\&quot;) (Iconv::InvalidEncoding)&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 encoding iconv inflector invalid</tag>
      <title>server crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-10-08T22:53:58+01:00</updated-at>
      <user-id type="integer">22437</user-id>
      <version type="integer">2</version>
      <user-name>James Kebinger</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm getting the same with Edge on Windows XP with Ruby 1.8.6 and iconv 1.9. It doesn't just stop the server from working, anything that uses the framework (e.g. rake tasks) also breaks.

The fix suggested by James works on Windows too.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm getting the same with Edge on Windows XP with Ruby 1.8.6 and
iconv 1.9. It doesn't just stop the server from working, anything
that uses the framework (e.g. rake tasks) also breaks.&lt;/p&gt;
&lt;p&gt;The fix suggested by James works on Windows too.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-14T10:31:53+01:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.2 encoding iconv inflector invalid
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 bug bug encoding iconv inflector</tag>
      <title>server crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-10-14T10:31:56+01:00</updated-at>
      <user-id type="integer">10510</user-id>
      <version type="integer">3</version>
      <user-name>Rob Anderton</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-14T10:33:16+01:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:title: &quot;server crashes on launch 'iconv': invalid encoding (\&quot;ascii//translit//IGNORE\&quot;, \&quot;utf-8\&quot;) (Iconv::InvalidEncoding)&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-10-14T10:33:20+01:00</updated-at>
      <user-id type="integer">10510</user-id>
      <version type="integer">4</version>
      <user-name>Rob Anderton</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-14T13:43:33+01:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-10-14T13:43:37+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">5</version>
      <user-name>Pratik</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [e0993c6c376d62716757a8a7f476ed0c369d0fc7]) Reverse the order of the iconv arguments to remain compatible with older rubies / iconvs.

[#1195 state:resolved]
http://github.com/rails/rails/commit/e0993c6c376d62716757a8a7f476ed0c369d0fc7</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [e0993c6c376d62716757a8a7f476ed0c369d0fc7]) Reverse the
order of the iconv arguments to remain compatible with older rubies
/ iconvs.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/1195&quot; title=&quot;Ticket #1195&quot;&gt;#1195&lt;/a&gt; state:resolved] &lt;a href=&quot;http://github.com/rails/rails/commit/e0993c6c376d62716757a8a7f476ed0c369d0fc7&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-10-14T20:25:37+01:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-10-14T20:25:41+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">6</version>
      <user-name>Repository</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [757e4364dc3f808f0002a6c8cb03531e69e2f356]) Fix: counter_cache should decrement on deleting associated records.

[#1195 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/757e4364dc3f808f0002a6c8cb03531e69e2f356</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [757e4364dc3f808f0002a6c8cb03531e69e2f356]) Fix:
counter_cache should decrement on deleting associated records.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/1195&quot; title=&quot;Ticket #1195&quot;&gt;#1195&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/757e4364dc3f808f0002a6c8cb03531e69e2f356&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-12-10T19:05:11+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-12-10T19:05:12+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">7</version>
      <user-name>Repository</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [c9e176de78067c5941233b12686276d3016fbb38]) Fix: counter_cache should decrement on deleting associated records.

[#1195 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/c9e176de78067c5941233b12686276d3016fbb38</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [c9e176de78067c5941233b12686276d3016fbb38]) Fix:
counter_cache should decrement on deleting associated records.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/1195&quot; title=&quot;Ticket #1195&quot;&gt;#1195&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/c9e176de78067c5941233b12686276d3016fbb38&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-12-10T19:05:12+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-12-10T19:05:12+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">8</version>
      <user-name>Repository</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [05f2183747c8e75c9e8bbaadb9573b4bdf41ecfc]) Fix: counter_cache should decrement on deleting associated records.

[#1195 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/05f2183747c8e75c9e8bbaadb9573b4bdf41ecfc</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [05f2183747c8e75c9e8bbaadb9573b4bdf41ecfc]) Fix:
counter_cache should decrement on deleting associated records.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/1195&quot; title=&quot;Ticket #1195&quot;&gt;#1195&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/05f2183747c8e75c9e8bbaadb9573b4bdf41ecfc&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-12-10T19:05:15+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2008-12-10T19:05:16+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">9</version>
      <user-name>Repository</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I believe this fix is not complete.  On NetBSD, I get this:

irb(main):003:0&gt; Iconv.iconv('ascii//ignore//translit', 'utf-8', 'test')
Iconv::InvalidEncoding: invalid encoding (&quot;ascii//ignore//translit&quot;, &quot;utf-8&quot;)
        from (irb):3:in `iconv'
        from (irb):3
        from :0

This is using the built-in libc version of the iconv library, built on a fairly recent NetBSD source tarball.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I believe this fix is not complete. On NetBSD, I get this:&lt;/p&gt;
&lt;p&gt;irb(main):003:0&amp;gt; Iconv.iconv('ascii//ignore//translit',
'utf-8', 'test') Iconv::InvalidEncoding: invalid encoding
(&quot;ascii//ignore//translit&quot;, &quot;utf-8&quot;)&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    from (irb):3:in `iconv'
    from (irb):3
    from :0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This is using the built-in libc version of the iconv library,
built on a fairly recent NetBSD source tarball.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-03T15:25:10+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.2 bug bug encoding iconv inflector
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2009-02-03T15:25:13+00:00</updated-at>
      <user-id type="integer">46063</user-id>
      <version type="integer">10</version>
      <user-name>explorer-lighthouse-skandragon (at flame)</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>That changeset has nothing to do with this ticket</body>
      <body-html>&lt;div&gt;&lt;p&gt;That changeset has nothing to do with this ticket&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-06T00:28:28+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2009-02-06T00:28:33+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">11</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [3c006d428b3d3d306185f620cce3821b1bdb636f]) Handle every error that can come out of the Iconv branch by rescuing and returning nil

[#1195 state:committed]

Conflicts:

	activesupport/lib/active_support/inflector.rb
http://github.com/rails/rails/commit/3c006d428b3d3d306185f620cce3821b1bdb636f</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [3c006d428b3d3d306185f620cce3821b1bdb636f]) Handle every
error that can come out of the Iconv branch by rescuing and
returning nil&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/1195&quot; title=&quot;Ticket #1195&quot;&gt;#1195&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Conflicts:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;activesupport/lib/active_support/inflector.rb
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/rails/rails/commit/3c006d428b3d3d306185f620cce3821b1bdb636f&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-06T00:48:44+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2009-02-06T00:48:45+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">12</version>
      <user-name>Repository</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [4e4f961c112f1ffac73a1397d94dfbb4a10effae]) Handle every error that can come out of the Iconv branch by rescuing and returning nil

[#1195 state:committed]
http://github.com/rails/rails/commit/4e4f961c112f1ffac73a1397d94dfbb4a10effae</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [4e4f961c112f1ffac73a1397d94dfbb4a10effae]) Handle every
error that can come out of the Iconv branch by rescuing and
returning nil&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/1195&quot; title=&quot;Ticket #1195&quot;&gt;#1195&lt;/a&gt; state:committed] &lt;a href=&quot;http://github.com/rails/rails/commit/4e4f961c112f1ffac73a1397d94dfbb4a10effae&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-06T00:48:55+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2009-02-06T00:48:57+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">13</version>
      <user-name>Repository</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Commit 3c006d428b3d3d306185f620cce3821b1bdb636f (rails 2.2), rails errors out -- the line should be if, not elseif.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Commit 3c006d428b3d3d306185f620cce3821b1bdb636f (rails 2.2),
rails errors out -- the line should be if, not elseif.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-06T04:12:03+00:00</created-at>
      <creator-id type="integer">22437</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1195</number>
      <permalink>iconv-invalid-encoding-asciitranslitignore-utf-8-iconvinvalidencoding</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.2.2 bug bug encoding iconv inflector</tag>
      <title>framework crashes on launch 'iconv': invalid encoding (&quot;ascii//translit//IGNORE&quot;, &quot;utf-8&quot;) (Iconv::InvalidEncoding)</title>
      <updated-at type="datetime">2009-02-06T04:12:06+00:00</updated-at>
      <user-id type="integer">22427</user-id>
      <version type="integer">14</version>
      <user-name>David Reese</user-name>
      <creator-name>James Kebinger</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1195</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
</ticket>
