<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-11-25T12:13:43+00:00</created-at>
  <creator-id type="integer">33030</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4471</number>
  <permalink>rake-tasks-completely-screwed-up</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>rake tasks</tag>
  <title>Rake Tasks completely screwed up</title>
  <updated-at type="datetime">2010-11-25T12:13:43+00:00</updated-at>
  <user-id type="integer">28715</user-id>
  <version type="integer">22</version>
  <user-name>Jeff Rafter</user-name>
  <creator-name>Kane</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I observed the following behaviour in rails3 beta3.

first of all, it is not possible to modify framework raketasks from lib/tasks/myraketasks.rake as in rails 2.3.5 cause rake tasks from gems are loaded after tasks in lib/tasks. i think this sucks.

therefore to modify tasks i had to do this in the Rakefile. 
I found some terrifying behaviour:

@@@ ruby
Rails::Application.load_tasks

Rake::Task['db:schema:load'].enhance do
  puts Rails.env
  puts ActiveRecord::Base.connection.inspect
end
@@@


if i invoke spec:models i get this output:
@@@ ruby
development
&lt;ActiveRecord::ConnectionAdapters::PostgreSQLAdapter:0x7f220048a818 @logger=#&lt;ActiveSupport::BufferedLogger:0x7f2200804598 @guard=#&lt;Mutex:0x7f22007ec3a8&gt;, @log=#&lt;File:/home/myusername/myproject/log/development.log&gt;, @auto_flushing=1, @level=0, @buffer={}&gt;, @config={:host=&gt;&quot;localhost&quot;, :database=&gt;&quot;myproject_test&quot;, :adapter=&gt;&quot;postgresql&quot;, :pool=&gt;5, :username=&gt;&quot;postgres&quot;, :password=&gt;&quot;postgres&quot;}, @runtime=76.7457485198975, @query_cache_enabled=false, @connection=#&lt;PGconn:0x7f220048a700&gt;, @connection_parameters=[&quot;localhost&quot;, 5432, nil, nil, &quot;myproject_test&quot;, &quot;postgres&quot;, &quot;postgres&quot;], @postgresql_version=80403, @async=nil, @active=nil, @query_cache={}&gt;
@@@

WTF?!
Rails.env is development?! log is development too?</original-body>
  <latest-body>I observed the following behaviour in rails3 beta3.

first of all, it is not possible to modify framework raketasks from lib/tasks/myraketasks.rake as in rails 2.3.5 cause rake tasks from gems are loaded after tasks in lib/tasks. i think this sucks.

therefore to modify tasks i had to do this in the Rakefile. 
I found some terrifying behaviour:

@@@ ruby
Rails::Application.load_tasks

Rake::Task['db:schema:load'].enhance do
  puts Rails.env
  puts ActiveRecord::Base.connection.inspect
end
@@@


if i invoke spec:models i get this output:
@@@ ruby
development
&lt;ActiveRecord::ConnectionAdapters::PostgreSQLAdapter:0x7f220048a818 @logger=#&lt;ActiveSupport::BufferedLogger:0x7f2200804598 @guard=#&lt;Mutex:0x7f22007ec3a8&gt;, @log=#&lt;File:/home/myusername/myproject/log/development.log&gt;, @auto_flushing=1, @level=0, @buffer={}&gt;, @config={:host=&gt;&quot;localhost&quot;, :database=&gt;&quot;myproject_test&quot;, :adapter=&gt;&quot;postgresql&quot;, :pool=&gt;5, :username=&gt;&quot;postgres&quot;, :password=&gt;&quot;postgres&quot;}, @runtime=76.7457485198975, @query_cache_enabled=false, @connection=#&lt;PGconn:0x7f220048a700&gt;, @connection_parameters=[&quot;localhost&quot;, 5432, nil, nil, &quot;myproject_test&quot;, &quot;postgres&quot;, &quot;postgres&quot;], @postgresql_version=80403, @async=nil, @active=nil, @query_cache={}&gt;
@@@

WTF?!
Rails.env is development?! log is development too?</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I observed the following behaviour in rails3 beta3.&lt;/p&gt;
&lt;p&gt;first of all, it is not possible to modify framework raketasks
from lib/tasks/myraketasks.rake as in rails 2.3.5 cause rake tasks
from gems are loaded after tasks in lib/tasks. i think this
sucks.&lt;/p&gt;
&lt;p&gt;therefore to modify tasks i had to do this in the Rakefile.&lt;br&gt;
I found some terrifying behaviour:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;Rails::Application.load_tasks

Rake::Task['db:schema:load'].enhance do
  puts Rails.env
  puts ActiveRecord::Base.connection.inspect
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;if i invoke spec:models i get this output:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;development
&amp;lt;ActiveRecord::ConnectionAdapters::PostgreSQLAdapter:0x7f220048a818 @logger=#&amp;lt;ActiveSupport::BufferedLogger:0x7f2200804598 @guard=#&amp;lt;Mutex:0x7f22007ec3a8&amp;gt;, @log=#&amp;lt;File:/home/myusername/myproject/log/development.log&amp;gt;, @auto_flushing=1, @level=0, @buffer={}&amp;gt;, @config={:host=&amp;gt;&quot;localhost&quot;, :database=&amp;gt;&quot;myproject_test&quot;, :adapter=&amp;gt;&quot;postgresql&quot;, :pool=&amp;gt;5, :username=&amp;gt;&quot;postgres&quot;, :password=&amp;gt;&quot;postgres&quot;}, @runtime=76.7457485198975, @query_cache_enabled=false, @connection=#&amp;lt;PGconn:0x7f220048a700&amp;gt;, @connection_parameters=[&quot;localhost&quot;, 5432, nil, nil, &quot;myproject_test&quot;, &quot;postgres&quot;, &quot;postgres&quot;], @postgresql_version=80403, @async=nil, @active=nil, @query_cache={}&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;WTF?!&lt;br&gt;
Rails.env is development?! log is development too?&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I observed the following behaviour in rails3 beta3.

first of all, it is not possible to modify framework raketasks from lib/tasks/myraketasks.rake as in rails 2.3.5 cause rake tasks from gems are loaded after tasks in lib/tasks. i think this sucks.

therefore to modify tasks i had to do this in the Rakefile. 
I found some terrifying behaviour:

@@@ ruby
Rails::Application.load_tasks

Rake::Task['db:schema:load'].enhance do
  puts Rails.env
  puts ActiveRecord::Base.connection.inspect
end
@@@


if i invoke spec:models i get this output:
@@@ ruby
development
&lt;ActiveRecord::ConnectionAdapters::PostgreSQLAdapter:0x7f220048a818 @logger=#&lt;ActiveSupport::BufferedLogger:0x7f2200804598 @guard=#&lt;Mutex:0x7f22007ec3a8&gt;, @log=#&lt;File:/home/myusername/myproject/log/development.log&gt;, @auto_flushing=1, @level=0, @buffer={}&gt;, @config={:host=&gt;&quot;localhost&quot;, :database=&gt;&quot;myproject_test&quot;, :adapter=&gt;&quot;postgresql&quot;, :pool=&gt;5, :username=&gt;&quot;postgres&quot;, :password=&gt;&quot;postgres&quot;}, @runtime=76.7457485198975, @query_cache_enabled=false, @connection=#&lt;PGconn:0x7f220048a700&gt;, @connection_parameters=[&quot;localhost&quot;, 5432, nil, nil, &quot;myproject_test&quot;, &quot;postgres&quot;, &quot;postgres&quot;], @postgresql_version=80403, @async=nil, @active=nil, @query_cache={}&gt;
@@@

WTF?!
Rails.env is development?! log is development too?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I observed the following behaviour in rails3 beta3.&lt;/p&gt;
&lt;p&gt;first of all, it is not possible to modify framework raketasks
from lib/tasks/myraketasks.rake as in rails 2.3.5 cause rake tasks
from gems are loaded after tasks in lib/tasks. i think this
sucks.&lt;/p&gt;
&lt;p&gt;therefore to modify tasks i had to do this in the Rakefile.&lt;br&gt;
I found some terrifying behaviour:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;Rails::Application.load_tasks

Rake::Task['db:schema:load'].enhance do
  puts Rails.env
  puts ActiveRecord::Base.connection.inspect
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;if i invoke spec:models i get this output:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;development
&amp;lt;ActiveRecord::ConnectionAdapters::PostgreSQLAdapter:0x7f220048a818 @logger=#&amp;lt;ActiveSupport::BufferedLogger:0x7f2200804598 @guard=#&amp;lt;Mutex:0x7f22007ec3a8&amp;gt;, @log=#&amp;lt;File:/home/myusername/myproject/log/development.log&amp;gt;, @auto_flushing=1, @level=0, @buffer={}&amp;gt;, @config={:host=&amp;gt;&quot;localhost&quot;, :database=&amp;gt;&quot;myproject_test&quot;, :adapter=&amp;gt;&quot;postgresql&quot;, :pool=&amp;gt;5, :username=&amp;gt;&quot;postgres&quot;, :password=&amp;gt;&quot;postgres&quot;}, @runtime=76.7457485198975, @query_cache_enabled=false, @connection=#&amp;lt;PGconn:0x7f220048a700&amp;gt;, @connection_parameters=[&quot;localhost&quot;, 5432, nil, nil, &quot;myproject_test&quot;, &quot;postgres&quot;, &quot;postgres&quot;], @postgresql_version=80403, @async=nil, @active=nil, @query_cache={}&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;WTF?!&lt;br&gt;
Rails.env is development?! log is development too?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-25T15:25:56+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-25T15:25:58+01:00</updated-at>
      <user-id type="integer">33030</user-id>
      <version type="integer">1</version>
      <user-name>Kane</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-25T20:04:17+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-25T20:04:20+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">2</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ok, we have two issues here.

The first one is about rake tasks in gems being loaded after, point taken. This should be fixed.

The second one is about the output being development needs further investigation. Is rake spec:models setting the environment to test? When? Maybe your rake task is being executed before rspec has the chance to set the environment to test?

So could you please investigate the second issue and give more information? I will provide a patch for the former.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, we have two issues here.&lt;/p&gt;
&lt;p&gt;The first one is about rake tasks in gems being loaded after,
point taken. This should be fixed.&lt;/p&gt;
&lt;p&gt;The second one is about the output being development needs
further investigation. Is rake spec:models setting the environment
to test? When? Maybe your rake task is being executed before rspec
has the chance to set the environment to test?&lt;/p&gt;
&lt;p&gt;So could you please investigate the second issue and give more
information? I will provide a patch for the former.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-25T20:12:53+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-25T20:12:55+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">3</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Some notes on the second point:

- the `enhance` method adds functionality that runs after the specified task. See [this](http://www.dcmanges.com/blog/modifying-rake-tasks) for more details.

- there's a certain amount of setup done in development mode before the test stuff can be loaded, for instance to handle loading the schema from dev into test.

- the connection is in a somewhat mixed state; I'm guessing the `myproject_test` DB is in the test environment...</body>
      <body-html>&lt;div&gt;&lt;p&gt;Some notes on the second point:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;the &lt;code&gt;enhance&lt;/code&gt; method adds functionality that runs
after the specified task. See &lt;a href=
&quot;http://www.dcmanges.com/blog/modifying-rake-tasks&quot;&gt;this&lt;/a&gt; for
more details.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;there's a certain amount of setup done in development mode
before the test stuff can be loaded, for instance to handle loading
the schema from dev into test.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;the connection is in a somewhat mixed state; I'm guessing the
&lt;code&gt;myproject_test&lt;/code&gt; DB is in the test environment...&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-26T01:22:05+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-26T01:22:10+01:00</updated-at>
      <user-id type="integer">22589</user-id>
      <version type="integer">4</version>
      <user-name>Matt Jones</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Thanks Matt. A few more questions: how does the current behavior compares with Rails 2.3? Do you have any fix in mind?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks Matt. A few more questions: how does the current behavior
compares with Rails 2.3? Do you have any fix in mind?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-26T07:29:00+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-26T07:29:02+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">5</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [e461e1bc0ec0a5c365840031309b83143e12955a]) Ensure application rake tasks and generators are loaded after the ones specified in railties/engines/rails. [#4471 state:resolved]
http://github.com/rails/rails/commit/e461e1bc0ec0a5c365840031309b83143e12955a</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/e461e1bc0ec0a5c365840031309b83143e12955a&quot;
title=
&quot;Changeset [e461e1bc0ec0a5c365840031309b83143e12955a]&quot;&gt;[e461e1bc0ec0a5c365840031309b83143e12955a]&lt;/a&gt;)
Ensure application rake tasks and generators are loaded after the
ones specified in railties/engines/rails. [&lt;a href=
&quot;/projects/8994/tickets/4471&quot; title=&quot;Ticket #4471&quot;&gt;#4471&lt;/a&gt;
state:resolved] &lt;a href=
&quot;http://github.com/rails/rails/commit/e461e1bc0ec0a5c365840031309b83143e12955a&quot;&gt;
http://github.com/rails/rails/commit/e461e1bc0ec0a5c365840031309b83...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-26T08:53:44+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-26T08:53:45+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">6</version>
      <user-name>Repository</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>So regarding the second issue:
I assumed if i run rake db:test:prepare everything would be run in evironment test.
I didnt looked how deep this goes and how many and which rake tasks are affected.

So Matt, im not sure if i get you right, but i dont think Rails.env should be dev in any point in the process. Im aware that the process involves loading the dev database, but the env should be definitely test right?</body>
      <body-html>&lt;div&gt;&lt;p&gt;So regarding the second issue:&lt;br&gt;
I assumed if i run rake db:test:prepare everything would be run in
evironment test.&lt;br&gt;
I didnt looked how deep this goes and how many and which rake tasks
are affected.&lt;/p&gt;
&lt;p&gt;So Matt, im not sure if i get you right, but i dont think
Rails.env should be dev in any point in the process. Im aware that
the process involves loading the dev database, but the env should
be definitely test right?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-28T20:40:01+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-28T20:40:04+01:00</updated-at>
      <user-id type="integer">33030</user-id>
      <version type="integer">7</version>
      <user-name>Kane</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-28T20:42:33+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-28T20:42:34+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">8</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>New Bug:

running rake db:seed executes the db/seeds.rb script twice times:

@@@ ruby 
    puts &quot;Creating Basic Admin&quot;
    u = User.create(:email =&gt; 'admin@yeti-media.com' , :password =&gt; 'admin123', :password_confirmation =&gt; 'admin123')
    u.admin = true
    u.confirmation_sent_at = u.confirmed_at = Time.now.to_s
    u.confirmation_token = nil
    u.save
    puts &quot;Basic Admin Created&quot;
@@@

Got this output:

rake db:seed


Creating Basic Admin
Basic Admin Created
Creating Basic Admin
Basic Admin Created</body>
      <body-html>&lt;div&gt;&lt;p&gt;New Bug:&lt;/p&gt;
&lt;p&gt;running rake db:seed executes the db/seeds.rb script twice
times:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;    puts &quot;Creating Basic Admin&quot;
    u = User.create(:email =&amp;gt; 'admin@yeti-media.com' , :password =&amp;gt; 'admin123', :password_confirmation =&amp;gt; 'admin123')
    u.admin = true
    u.confirmation_sent_at = u.confirmed_at = Time.now.to_s
    u.confirmation_token = nil
    u.save
    puts &quot;Basic Admin Created&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Got this output:&lt;/p&gt;
&lt;p&gt;rake db:seed&lt;/p&gt;
&lt;p&gt;Creating Basic Admin&lt;br&gt;
Basic Admin Created&lt;br&gt;
Creating Basic Admin&lt;br&gt;
Basic Admin Created&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-29T23:21:11+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-29T23:21:12+01:00</updated-at>
      <user-id type="integer">15203</user-id>
      <version type="integer">9</version>
      <user-name>Nicolas Alejandro Santa</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Which rails version? This happens in rails master? It happens with this task only or all others?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Which rails version? This happens in rails master? It happens
with this task only or all others?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-30T09:19:18+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-30T09:19:20+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">10</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Nicolas, I just create a new application from Rails source and put the following in my db/seeds.rb

    puts &quot;OMG&quot;

I invoked &quot;rake db:seed&quot; and it printed &quot;OMG&quot; just once, as expected.

Kane, regarding the other bug, can you please create a failing test case here:

  http://github.com/rails/rails/blob/master/railties/test/application/rake_test.rb

Please let me know if you have any doubts.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Nicolas, I just create a new application from Rails source and
put the following in my db/seeds.rb&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;puts &quot;OMG&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I invoked &quot;rake db:seed&quot; and it printed &quot;OMG&quot; just once, as
expected.&lt;/p&gt;
&lt;p&gt;Kane, regarding the other bug, can you please create a failing
test case here:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/rails/rails/blob/master/railties/test/application/rake_test.rb&quot;&gt;
http://github.com/rails/rails/blob/master/railties/test/application...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Please let me know if you have any doubts.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-30T12:18:10+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-04-30T12:18:13+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">11</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Can some bugmashers reproduce this behavior?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can some bugmashers reproduce this behavior?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-15T01:50:25+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-05-15T01:50:26+01:00</updated-at>
      <user-id type="integer">22242</user-id>
      <version type="integer">12</version>
      <user-name>Dan Pickett</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Unable to reproduce in 3.0.0beta3</body>
      <body-html>&lt;div&gt;&lt;p&gt;Unable to reproduce in 3.0.0beta3&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-15T17:48:16+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-05-15T17:48:18+01:00</updated-at>
      <user-id type="integer">78116</user-id>
      <version type="integer">13</version>
      <user-name>Gavin Stark</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-16T02:57:29+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-05-16T02:57:30+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">14</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hey Jos&#233; 
i attached the requested failing test case</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Jos&amp;eacute;&lt;br&gt;
i attached the requested failing test case&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-26T22:06:35+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag nil="true"></tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-05-26T22:06:49+01:00</updated-at>
      <user-id type="integer">33030</user-id>
      <version type="integer">15</version>
      <user-name>Kane</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-15T15:12:09+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
:state: invalid
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-06-15T15:12:23+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">16</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-15T15:57:30+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-06-15T15:57:42+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">17</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Could someone please check what is the behavior in Rails 2.3? I'm almost sure that db:test:prepare needs to run in development as Matt pointed out. In other words, you should not be enhancing it to add custom behavior.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could someone please check what is the behavior in Rails 2.3?
I'm almost sure that db:test:prepare needs to run in development as
Matt pointed out. In other words, you should not be enhancing it to
add custom behavior.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-20T11:09:48+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-06-20T11:09:57+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">18</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-20T11:10:01+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 74033
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-06-20T11:10:10+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">19</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Yes, I confirmed this one. When you call rake test, it is actually in development, because you did not pass RAILS_ENV=test. Then it does all setup in development and finally invoke the test command, by shelling out with the proper env configured. There is not much we can do here.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yes, I confirmed this one. When you call rake test, it is
actually in development, because you did not pass RAILS_ENV=test.
Then it does all setup in development and finally invoke the test
command, by shelling out with the proper env configured. There is
not much we can do here.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-21T14:30:43+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-07-21T14:30:45+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">20</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:52+01:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-10-15T23:01:52+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">21</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I was able to reproduce Nicolas' duplication bug in Rails 3.0.3. Entering puts &quot;OMG!&quot; in db/seeds.rb and calling rake db:seed shows the message twice (meaning the rake task is called twice). I spent some time digging around and found that my rake tasks in my application were being loaded twice (duplicating the task). This was caused by the annotate-models gem and associated tasks. Removing those and the behavior was fine. Ultimately instead of

  ENV['position'] ||= 'after'
  require 'annotate_models/tasks'

I now have 


  ENV['position'] ||= 'after'
  desc &quot;Add schema information (as comments) to model and fixture files&quot;
  task :annotate_models =&gt; :environment do
    require 'annotate_models'
    options={}
    options[:position_in_class] = ENV['position_in_class'] || ENV['position']
    options[:position_in_fixture] = ENV['position_in_fixture'] || ENV['position']  
    AnnotateModels.do_annotations(options)
  end

  desc &quot;Remove schema information from model and fixture files&quot;
  task :remove_annotation =&gt; :environment do
    require 'annotate_models'
    AnnotateModels.remove_annotations
  end

And everything works as expected.

Cheers,
Jeff</body>
      <body-html>&lt;div&gt;&lt;p&gt;I was able to reproduce Nicolas' duplication bug in Rails 3.0.3.
Entering puts &quot;OMG!&quot; in db/seeds.rb and calling rake db:seed shows
the message twice (meaning the rake task is called twice). I spent
some time digging around and found that my rake tasks in my
application were being loaded twice (duplicating the task). This
was caused by the annotate-models gem and associated tasks.
Removing those and the behavior was fine. Ultimately instead of&lt;/p&gt;
&lt;p&gt;ENV['position'] ||= 'after' require 'annotate_models/tasks'&lt;/p&gt;
&lt;p&gt;I now have&lt;/p&gt;
&lt;p&gt;ENV['position'] ||= 'after' desc &quot;Add schema information (as
comments) to model and fixture files&quot; task :annotate_models =&amp;gt;
:environment do&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;require 'annotate_models'
options={}
options[:position_in_class] = ENV['position_in_class'] || ENV['position']
options[:position_in_fixture] = ENV['position_in_fixture'] || ENV['position']  
AnnotateModels.do_annotations(options)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end&lt;/p&gt;
&lt;p&gt;desc &quot;Remove schema information from model and fixture files&quot;
task :remove_annotation =&amp;gt; :environment do&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;require 'annotate_models'
AnnotateModels.remove_annotations&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end&lt;/p&gt;
&lt;p&gt;And everything works as expected.&lt;/p&gt;
&lt;p&gt;Cheers,&lt;br&gt;
Jeff&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-23T20:26:12+00:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-11-23T20:26:14+00:00</updated-at>
      <user-id type="integer">28715</user-id>
      <version type="integer">22</version>
      <user-name>Jeff Rafter</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;UGG Classic Cardy&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;Ugg Cardy Boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;UGG Classic Boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;UGG Boots Sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic boot&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic argyle knit&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic short&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;authentic ugg australia women's classic short #5825 - black sheepskin&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic mini grey&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;cheap classic tall ugg boots 5815 mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic cardy boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg kids classic 12 purple&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;super cheap ugg classic mini boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall boot&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;really cheap ugg classic mini&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic short boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg kids classic boots purple 12&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg boots classic tall&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic cardy ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall stripe cable knit boot&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg fern suede classic short&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic cardy ugg boots cream&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic short ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic short ugg in grey&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg australia classic tall boot for women&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg boots size 9 color mulberry classic tall boot&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall on sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall wool stripe&lt;/a&gt;, Buy It Now!

&lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg boots 4 u&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;cardy ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;uggs sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;classic cardy ugg&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic cardy&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy boots on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic cardy boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy chocolate&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg boots cardy&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;classic cardy ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;classic cardy ugg boots cream&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;adirondack tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic tall boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg mosaic tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg tall boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;cheap classic tall ugg boots 5815 mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;classic tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic tall boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;sundance tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg boots classic tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg adirondack tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic tall wool&lt;/a&gt;. Have You Best Choice, Buy It Now!

&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet stores&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store locations in pa hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boot outlets&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg discount outlets&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boots outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg online outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlets&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boot outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg factory outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg australia outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boots outlet store&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet point pleasant nj hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store nj hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlets in usa&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;best ugg outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;outlet for ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet in cabazon hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store clinton ct hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs at the wrentham outlet hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs outlets in new york&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs outlets&lt;/a&gt;. Buy It Now!


&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boot sale clearance&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots on sale authorized&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg cove boots sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg cardy boots on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots for sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg tall boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;sale ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg men's rockville insulated sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg knightsbridge on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg slippers on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;knock off ugg boots for sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg cardy sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg low pro drawstring on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg dakota sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;cheap uggs the only boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;sale on uggs&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;mens uggs on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;sale uggs&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs woman sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs clogs sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs for sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;discount uggs boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs discount&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;discount uggs&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs discount boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs gray cardy sale discount free shipping&lt;/a&gt;, Buy It Now!


&lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs the only boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uggs for cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap ugg&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;ugg boots cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap kids uggs&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap classic tall ugg boots 5815 mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uggs cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uk cheap ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;super cheap ugg classic mini boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs the only boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uggs for cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap kids uggs&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uggs cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap authentic uggs&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;what are stores that sell uggs for cheap&lt;/a&gt;. Buy It Now!


&lt;a href=&quot;http://www.ugggirl.com&quot;&gt; UGG Girls&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt; Girl UGGS&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots   Girls&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg brand boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots uk&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg australia boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;discount ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;what stores sell ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots on sale authorized&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;us ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;mens ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;australian ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg cove boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;fur inside ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;kids ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg bailey boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;adirondack tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;shopping for ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg mini boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;womens ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;lowest price ugg boots&lt;/a&gt;,&lt;a href=&quot;http://www.ugggirl.com&quot;&gt; baby ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg style boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;knock off ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots discount&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg cove boots sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;discounted ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg roseberry boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;purple ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots sydney&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugggirl.com&quot;&gt;ugg boots store&lt;/a&gt; SO Cheap With Free Shipping!</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;UGG Classic
Cardy&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;Ugg Cardy
Boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;UGG Classic
Boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;UGG Boots
Sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic
boot&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic
argyle knit&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg
classic tall boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic short&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;authentic ugg australia women's
classic short&lt;/a&gt; &lt;a href=&quot;/projects/8994/tickets/5825&quot; title=
&quot;Ticket #5825&quot;&gt;#5825&lt;/a&gt; - black sheepskin, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic mini grey&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;cheap classic tall ugg
boots 5815 mulberry&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic cardy boots&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic tall ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg kids
classic 12 purple&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;super cheap ugg classic mini
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic
tall boot&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;really
cheap ugg classic mini&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic short
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg kids
classic boots purple 12&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg boots classic tall&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic cardy ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic
tall stripe cable knit boot&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg fern suede classic
short&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic cardy
ugg boots cream&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;classic short ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;classic short ugg in
grey&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg australia
classic tall boot for women&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg boots size 9 color mulberry
classic tall boot&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall on sale&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg-classic-boots.com&quot;&gt;ugg classic tall wool
stripe&lt;/a&gt;, Buy It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg boots 4 u&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;cardy ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;uggs sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;classic cardy ugg&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg classic cardy&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy boots on sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg classic cardy boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy chocolate&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg boots cardy&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;classic cardy ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;classic cardy ugg boots cream&lt;/a&gt;,
&lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy boot&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg cardy boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;adirondack tall ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic tall boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic tall&lt;/a&gt;,
&lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg mosaic tall&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;ugg tall boot sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggboots4you.com&quot;&gt;cheap classic tall ugg boots 5815
mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;classic tall
ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic
tall boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg classic
cardy tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;sundance tall
ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg boots
classic tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg
adirondack tall&lt;/a&gt;, &lt;a href=&quot;http://www.uggboots4you.com&quot;&gt;ugg
classic tall wool&lt;/a&gt;. Have You Best Choice, Buy It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet stores&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet&lt;/a&gt;, &lt;a href=
&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store locations in pa hit
bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boot outlets&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg discount outlets&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boots outlet&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg online outlet&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlets&lt;/a&gt;, &lt;a href=
&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boot outlet&lt;/a&gt;, &lt;a href=
&quot;http://www.uggoutlet-us.com&quot;&gt;ugg factory outlet&lt;/a&gt;, &lt;a href=
&quot;http://www.uggoutlet-us.com&quot;&gt;ugg australia outlet&lt;/a&gt;, &lt;a href=
&quot;http://www.uggoutlet-us.com&quot;&gt;ugg boots outlet store&lt;/a&gt;, &lt;a href=
&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet point pleasant nj hit
bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store nj
hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlets in
usa&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;best ugg outlet&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;outlet for ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet in cabazon hit
bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;ugg outlet store clinton ct
hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs outlet&lt;/a&gt;,
&lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs at the wrentham outlet
hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs outlets in
new york&lt;/a&gt;, &lt;a href=&quot;http://www.uggoutlet-us.com&quot;&gt;uggs
outlets&lt;/a&gt;. Buy It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots on sale&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boot sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;ugg boot sale clearance&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots sale&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots on sale authorized&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg cove boots sale&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg cardy boots on
sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg boots for
sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg tall boot
sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;sale ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg men's
rockville insulated sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;ugg knightsbridge on sale&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg slippers on sale&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;knock off ugg boots for
sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg cardy
sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg low pro
drawstring on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;ugg
dakota sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs on
sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;cheap uggs the
only boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;uggs
sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;sale on uggs&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;mens uggs on sale&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshopping-au.com&quot;&gt;sale uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;uggs woman sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;uggs clogs sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;uggs for sale&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;discount uggs boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;uggs discount&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;discount uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;uggs discount boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshopping-au.com&quot;&gt;uggs gray cardy sale discount free
shipping&lt;/a&gt;, Buy It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs the only boot sale&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uggs for cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap ugg&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;ugg boots cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap kids uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap classic tall ugg boots 5815
mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uggs cheap&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uk cheap ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;super cheap ugg classic mini boots&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap uggs the only boot sale&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg2boots.com&quot;&gt;uggs for cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap kids uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;uggs cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;cheap authentic uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg2boots.com&quot;&gt;what are stores that sell uggs for
cheap&lt;/a&gt;. Buy It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.ugggirl.com&quot;&gt;UGG Girls&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;Girl UGGS&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots Girls&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg brand boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots uk&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots sale&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg australia boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;discount ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;what stores sell ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots on sale authorized&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;us ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;mens ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;australian ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg cove boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;fur inside ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;kids ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg bailey boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;adirondack tall ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;shopping for ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg mini boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;womens ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;lowest price ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;baby ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg style boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;knock off ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots discount&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg cove boots sale&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;discounted ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg roseberry boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;purple ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots sydney&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.ugggirl.com&quot;&gt;ugg boots store&lt;/a&gt; SO Cheap With Free
Shipping!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-25T12:08:55+00:00</created-at>
      <creator-id type="integer">33030</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4471</number>
      <permalink>rake-tasks-completely-screwed-up</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>rake tasks</tag>
      <title>Rake Tasks completely screwed up</title>
      <updated-at type="datetime">2010-11-25T12:13:43+00:00</updated-at>
      <user-id type="integer">126684</user-id>
      <version type="integer">23</version>
      <user-name>zara</user-name>
      <creator-name>Kane</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4471</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>f238436f4daa65d7d2990edd8ebdfe95134b3a66</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-26T22:06:35+01:00</created-at>
      <filename>raketasks.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">535927</id>
      <size type="integer">1642</size>
      <uploader-id type="integer">33030</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/535927/raketasks.diff</url>
    </attachment>
  </attachments>
</ticket>
