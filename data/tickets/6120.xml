<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-12-06T14:57:55+00:00</created-at>
  <creator-id type="integer">60702</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6120</number>
  <permalink>flash-message-dont-clear</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>303 flash</tag>
  <title>Flash message don't clear</title>
  <updated-at type="datetime">2011-03-07T00:00:36+00:00</updated-at>
  <user-id type="integer">136779</user-id>
  <version type="integer">7</version>
  <user-name>rails</user-name>
  <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
  <priority-name nil="true"></priority-name>
  <original-body>In all request the flash is a same.</original-body>
  <latest-body>In all request the flash is a same.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;In all request the flash is a same.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>In all request the flash is a same.</body>
      <body-html>&lt;div&gt;&lt;p&gt;In all request the flash is a same.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-06T14:57:55+00:00</created-at>
      <creator-id type="integer">60702</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6120</number>
      <permalink>flash-message-dont-clear</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0.3 flash</tag>
      <title>Flash message don't clear</title>
      <updated-at type="datetime">2010-12-06T14:58:00+00:00</updated-at>
      <user-id type="integer">60702</user-id>
      <version type="integer">1</version>
      <user-name>Rafael Mendon&#231;a Fran&#231;a</user-name>
      <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Could you please show us some code and give more details about the problem?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you please show us some code and give more details about
the problem?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-06T15:15:55+00:00</created-at>
      <creator-id type="integer">60702</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6120</number>
      <permalink>flash-message-dont-clear</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0.3 flash</tag>
      <title>Flash message don't clear</title>
      <updated-at type="datetime">2010-12-06T15:15:59+00:00</updated-at>
      <user-id type="integer">9127</user-id>
      <version type="integer">2</version>
      <user-name>Falk Pauser</user-name>
      <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Sorry. I think that this behavior occurs because I set the session_store like this:

    App::Application.config.session_store :cookie_store, :key =&gt; '_app_session', :domain =&gt; :all

My application have many subdomains. In the default subdomain the flash behaves properly. But, inside subdomains, the flash has the same content in all requests.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry. I think that this behavior occurs because I set the
session_store like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;App::Application.config.session_store :cookie_store, :key =&amp;gt; '_app_session', :domain =&amp;gt; :all&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;My application have many subdomains. In the default subdomain
the flash behaves properly. But, inside subdomains, the flash has
the same content in all requests.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-06T15:25:58+00:00</created-at>
      <creator-id type="integer">60702</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6120</number>
      <permalink>flash-message-dont-clear</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0.3 flash</tag>
      <title>Flash message don't clear</title>
      <updated-at type="datetime">2010-12-06T15:26:02+00:00</updated-at>
      <user-id type="integer">60702</user-id>
      <version type="integer">3</version>
      <user-name>Rafael Mendon&#231;a Fran&#231;a</user-name>
      <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Could it be that there is still a cookie on the system from before you set :domain =&gt; all? If that's the case then the browser will send both session cookies and rack will pick the first one it gets, which may not be the one you want.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could it be that there is still a cookie on the system from
before you set :domain =&amp;gt; all? If that's the case then the
browser will send both session cookies and rack will pick the first
one it gets, which may not be the one you want.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-06T15:40:10+00:00</created-at>
      <creator-id type="integer">60702</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6120</number>
      <permalink>flash-message-dont-clear</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0.3 flash</tag>
      <title>Flash message don't clear</title>
      <updated-at type="datetime">2010-12-06T15:40:14+00:00</updated-at>
      <user-id type="integer">8551</user-id>
      <version type="integer">4</version>
      <user-name>Fjan</user-name>
      <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I clear all the cookies, but get the same flash message.

But, I change the :domain option for the my domain name instead of :all and the flash message works fine.

With :all option the application generate a cookie for all subdomains. I think it's like Fjan said, the rack pick the first one that have the same flash message.

It's works now. Thank you guys.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I clear all the cookies, but get the same flash message.&lt;/p&gt;
&lt;p&gt;But, I change the :domain option for the my domain name instead
of :all and the flash message works fine.&lt;/p&gt;
&lt;p&gt;With :all option the application generate a cookie for all
subdomains. I think it's like Fjan said, the rack pick the first
one that have the same flash message.&lt;/p&gt;
&lt;p&gt;It's works now. Thank you guys.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-06T15:46:35+00:00</created-at>
      <creator-id type="integer">60702</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6120</number>
      <permalink>flash-message-dont-clear</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0.3 flash</tag>
      <title>Flash message don't clear</title>
      <updated-at type="datetime">2010-12-06T15:46:39+00:00</updated-at>
      <user-id type="integer">60702</user-id>
      <version type="integer">5</version>
      <user-name>Rafael Mendon&#231;a Fran&#231;a</user-name>
      <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-07T00:00:05+00:00</created-at>
      <creator-id type="integer">60702</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 3.0.3 flash
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6120</number>
      <permalink>flash-message-dont-clear</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>303 flash</tag>
      <title>Flash message don't clear</title>
      <updated-at type="datetime">2011-03-07T00:00:11+00:00</updated-at>
      <user-id type="integer">136779</user-id>
      <version type="integer">6</version>
      <user-name>rails</user-name>
      <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-07T00:00:06+00:00</created-at>
      <creator-id type="integer">60702</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6120</number>
      <permalink>flash-message-dont-clear</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>303 flash</tag>
      <title>Flash message don't clear</title>
      <updated-at type="datetime">2011-03-07T00:00:36+00:00</updated-at>
      <user-id type="integer">136779</user-id>
      <version type="integer">7</version>
      <user-name>rails</user-name>
      <creator-name>Rafael Mendon&#231;a Fran&#231;a</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6120</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
