<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">141</assigned-user-id>
  <attachments-count type="integer">6</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-04-02T22:11:54+01:00</created-at>
  <creator-id type="integer">52870</creator-id>
  <milestone-due-on type="datetime">2009-08-31T00:00:00+01:00</milestone-due-on>
  <milestone-id type="integer">41987</milestone-id>
  <number type="integer">2401</number>
  <permalink>fields_for-nested-fubars-index</permalink>
  <priority type="integer">14</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>fields_for nested patch</tag>
  <title>fields_for nested fubars index</title>
  <updated-at type="datetime">2009-07-02T20:46:43+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">20</version>
  <user-name>Repository</user-name>
  <creator-name>ara.t.howard</creator-name>
  <assigned-user-name>Michael Koziarski</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
  <milestone-title>2.3.4</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>using fields_for with a nested attribute numbers the resource index incorrectly.  although this does not cause an exception it does make scripting js to add additional form elements harder and more error prone than it needs to be since the form elements generated do reflect the size of the actual association.</original-body>
  <latest-body>using fields_for with a nested attribute numbers the resource index incorrectly.  although this does not cause an exception it does make scripting js to add additional form elements harder and more error prone than it needs to be since the form elements generated do reflect the size of the actual association.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;using fields_for with a nested attribute numbers the resource
index incorrectly. although this does not cause an exception it
does make scripting js to add additional form elements harder and
more error prone than it needs to be since the form elements
generated do reflect the size of the actual association.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>using fields_for with a nested attribute numbers the resource index incorrectly.  although this does not cause an exception it does make scripting js to add additional form elements harder and more error prone than it needs to be since the form elements generated do reflect the size of the actual association.</body>
      <body-html>&lt;div&gt;&lt;p&gt;using fields_for with a nested attribute numbers the resource
index incorrectly. although this does not cause an exception it
does make scripting js to add additional form elements harder and
more error prone than it needs to be since the form elements
generated do reflect the size of the actual association.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-02T22:11:54+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>fields_for nested</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-02T22:11:56+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">1</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1

I've tested and this works well.

I just recommend you to put some parenthesis in your patch, to agree with Rails code:

def nested_child_index(association_name)</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;I've tested and this works well.&lt;/p&gt;
&lt;p&gt;I just recommend you to put some parenthesis in your patch, to
agree with Rails code:&lt;/p&gt;
&lt;p&gt;def nested_child_index(association_name)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-02T22:31:09+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>fields_for nested</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-02T22:31:12+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">2</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>new patch, with parens</body>
      <body-html>&lt;div&gt;&lt;p&gt;new patch, with parens&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-02T22:47:56+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>fields_for nested</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-02T22:48:00+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">3</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-02T22:48:12+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: fields_for nested
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-02T22:48:16+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">4</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Will test this out later today (evening for me).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Will test this out later today (evening for me).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T08:40:33+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-03T08:40:34+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">5</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>thanks a bunch.  i'm running patched here and it's a-ok.</body>
      <body-html>&lt;div&gt;&lt;p&gt;thanks a bunch. i'm running patched here and it's a-ok.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T15:45:52+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-03T15:45:57+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">6</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The change is good, however I have a few questions about the patch and took the liberty to rewrite it with these notes.

* There was no test for the case where the association would be passed in as a string _and_ a symbol. However, the code seemed to indicate that you were, rightfully so, thinking of this case.
* Why did you choose to use &quot;ensure&quot;? There was at least no test which indicated why afaik.
* The test name did not really describe what it was gonna test.

Thoughts?</body>
      <body-html>&lt;div&gt;&lt;p&gt;The change is good, however I have a few questions about the
patch and took the liberty to rewrite it with these notes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;There was no test for the case where the association would be
passed in as a string &lt;em&gt;and&lt;/em&gt; a symbol. However, the code
seemed to indicate that you were, rightfully so, thinking of this
case.&lt;/li&gt;
&lt;li&gt;Why did you choose to use &quot;ensure&quot;? There was at least no test
which indicated why afaik.&lt;/li&gt;
&lt;li&gt;The test name did not really describe what it was gonna
test.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thoughts?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T20:08:07+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-03T20:08:10+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">7</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body># There was no test for the case where the association would be passed in as a string and a symbol. However, the code seemed to indicate that you were, rightfully so, thinking of this case.

well, it isn't the case that the association should be a symbol or a string - it could be anything that responds to #to_s, a custom class, a stringio, etc.  that's why there is no test for symbol explicitly but simply ducktype to string no matter what's passed in.  for instance ['posts'] would work and so would [:posts].  this is useful in a *args case.  however, testing all possible stringlike intputs seems unreasonable.

# Why did you choose to use &quot;ensure&quot;? There was at least no test which indicated why afaik.

it's there because ruby lacks a prefix increment function (++i).  the previous code uses the obfusication pattern of initializing with -1 and using +=, but that really doesn't read 'starts at zero and increments by 1'.  ensure is a good way to implement prefix increment in ruby since it increments on the way out of the method, after the return value has been determined.


# The test name did not really describe what it was gonna test

guilty as charged.  ;-)  not for lack of trying though!

thanks for the work on this - it really makes adding elements via js vastly simpler.</body>
      <body-html>&lt;div&gt;&lt;h1&gt;There was no test for the case where the association would be
passed in as a string and a symbol. However, the code seemed to
indicate that you were, rightfully so, thinking of this case.&lt;/h1&gt;
&lt;p&gt;well, it isn't the case that the association should be a symbol
or a string - it could be anything that responds to #to_s, a custom
class, a stringio, etc. that's why there is no test for symbol
explicitly but simply ducktype to string no matter what's passed
in. for instance ['posts'] would work and so would [:posts]. this
is useful in a *args case. however, testing all possible stringlike
intputs seems unreasonable.&lt;/p&gt;
&lt;h1&gt;Why did you choose to use &quot;ensure&quot;? There was at least no test
which indicated why afaik.&lt;/h1&gt;
&lt;p&gt;it's there because ruby lacks a prefix increment function (++i).
the previous code uses the obfusication pattern of initializing
with -1 and using +=, but that really doesn't read 'starts at zero
and increments by 1'. ensure is a good way to implement prefix
increment in ruby since it increments on the way out of the method,
after the return value has been determined.&lt;/p&gt;
&lt;h1&gt;The test name did not really describe what it was gonna
test&lt;/h1&gt;
&lt;p&gt;guilty as charged. ;-) not for lack of trying though!&lt;/p&gt;
&lt;p&gt;thanks for the work on this - it really makes adding elements
via js vastly simpler.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T20:22:58+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-03T20:23:00+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">8</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>oh crap.  should have read 'Formatting help'.  sorry bout that.</body>
      <body-html>&lt;div&gt;&lt;p&gt;oh crap. should have read 'Formatting help'. sorry bout
that.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T20:23:27+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-03T20:23:32+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">9</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>&gt; well, it isn't the case that the association should be a symbol or a string - it could be anything that responds to #to_s, a custom class, a stringio, etc. that's why there is no test for symbol explicitly but simply ducktype to string no matter what's passed in. for instance ['posts'] would work and so would [:posts]. this is useful in a *args case. however, testing all possible stringlike intputs seems unreasonable.

True, I changed it back to #to_s again. But adding at least one different object in the test is at place.

&gt; it's there because ruby lacks a prefix increment function (++i). the previous code uses the obfusication pattern of initializing with -1 and using +=, but that really doesn't read 'starts at zero and increments by 1'. ensure is a good way to implement prefix increment in ruby since it increments on the way out of the method, after the return value has been determined.

Fair enough, I changed this back. Thanks for the trick ;-)

&gt; oh crap. should have read 'Formatting help'. sorry bout that.

Yeah the lack of a preview on LH doesn't help either&#8230;

&gt; guilty as charged. ;-) not for lack of trying though!
&gt; thanks for the work on this - it really makes adding elements via js vastly simpler.

Yes definitely, thanks again.</body>
      <body-html>&lt;div&gt;&lt;blockquote&gt;
&lt;p&gt;well, it isn't the case that the association should be a symbol
or a string - it could be anything that responds to #to_s, a custom
class, a stringio, etc. that's why there is no test for symbol
explicitly but simply ducktype to string no matter what's passed
in. for instance ['posts'] would work and so would [:posts]. this
is useful in a *args case. however, testing all possible stringlike
intputs seems unreasonable.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;True, I changed it back to #to_s again. But adding at least one
different object in the test is at place.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;it's there because ruby lacks a prefix increment function (++i).
the previous code uses the obfusication pattern of initializing
with -1 and using +=, but that really doesn't read 'starts at zero
and increments by 1'. ensure is a good way to implement prefix
increment in ruby since it increments on the way out of the method,
after the return value has been determined.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Fair enough, I changed this back. Thanks for the trick ;-)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;oh crap. should have read 'Formatting help'. sorry bout
that.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Yeah the lack of a preview on LH doesn't help either&amp;#8230;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;guilty as charged. ;-) not for lack of trying though! thanks for
the work on this - it really makes adding elements via js vastly
simpler.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Yes definitely, thanks again.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T20:58:30+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-03T20:58:31+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">10</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-05T16:18:22+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 8406
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-05T16:18:27+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">11</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-22T18:33:28+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-04-22T18:33:29+01:00</updated-at>
      <user-id type="integer">53349</user-id>
      <version type="integer">12</version>
      <user-name>DerGuteMoritz</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>May I suggest a slightly different patch for this problem. Take a look at the patch.

It uses the local string 'name' as key. It is more informative, but it may be slower, since it is not a symbol.</body>
      <body-html>&lt;div&gt;&lt;p&gt;May I suggest a slightly different patch for this problem. Take
a look at the patch.&lt;/p&gt;
&lt;p&gt;It uses the local string 'name' as key. It is more informative,
but it may be slower, since it is not a symbol.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T13:15:50+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-05-11T13:15:54+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">13</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>checkout my initial patch, it did exactly this.  the concept simply got dropped when others hacked on it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;checkout my initial patch, it did exactly this. the concept
simply got dropped when others hacked on it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T16:24:18+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-05-11T16:24:19+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">14</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@ara.t.howard

Your initial patch uses &quot;association_name&quot; as argument to nested_child_index, whereas I suggest (in my patch) to use the local variable called &quot;name&quot; as argument to nested_child _index.

I fear that if not using a fully qualified parameter name (such as &quot;name&quot;), then using a unqualified value like association_name will eventually turn up again further down the parameter structure. If you are interested I will try to make a test that fails that illustrates the problem.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@ara.t.howard&lt;/p&gt;
&lt;p&gt;Your initial patch uses &quot;association_name&quot; as argument to
nested_child_index, whereas I suggest (in my patch) to use the
local variable called &quot;name&quot; as argument to nested_child
_index.&lt;/p&gt;
&lt;p&gt;I fear that if not using a fully qualified parameter name (such
as &quot;name&quot;), then using a unqualified value like association_name
will eventually turn up again further down the parameter structure.
If you are interested I will try to make a test that fails that
illustrates the problem.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T11:12:16+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-05-12T11:12:19+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">15</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@Jarl You're right, it's a good improvement. Please do add the failing test you are talking about.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Jarl You're right, it's a good improvement. Please do add the
failing test you are talking about.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-12T11:16:41+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-05-12T11:16:46+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">16</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>As per request by Eloy Duran.

I have changed the test (initially made by ara.t.howard) to a stricter test testing for the case where sub-associations have same names.

Now the test fails with the initial patch, but passes with my patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;As per request by Eloy Duran.&lt;/p&gt;
&lt;p&gt;I have changed the test (initially made by ara.t.howard) to a
stricter test testing for the case where sub-associations have same
names.&lt;/p&gt;
&lt;p&gt;Now the test fails with the initial patch, but passes with my
patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-13T14:17:22+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-05-13T14:17:24+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">17</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>Is this good to go eloy?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Is this good to go eloy?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-09T09:16:34+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-06-09T09:16:40+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">18</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>(from [1c855ad4e7c14fbf08edc1f1eb9b3c6fe186b701]) My suggestion to fix ticket 2401 [#2401 state:resolved]

Signed-off-by: Yehuda Katz + Carl Lerche &lt;ykatz+clerche@engineyard.com&gt;
http://github.com/rails/rails/commit/1c855ad4e7c14fbf08edc1f1eb9b3c6fe186b701</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/1c855ad4e7c14fbf08edc1f1eb9b3c6fe186b701&quot;
title=
&quot;Changeset [1c855ad4e7c14fbf08edc1f1eb9b3c6fe186b701]&quot;&gt;[1c855ad4e7c14fbf08edc1f1eb9b3c6fe186b701]&lt;/a&gt;)
My suggestion to fix ticket 2401 [&lt;a href=
&quot;/projects/8994/tickets/2401&quot; title=&quot;Ticket #2401&quot;&gt;#2401&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Yehuda Katz + Carl Lerche
&lt;a&gt;ykatz+clerche@engineyard.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/1c855ad4e7c14fbf08edc1f1eb9b3c6fe186b701&quot;&gt;
http://github.com/rails/rails/commit/1c855ad4e7c14fbf08edc1f1eb9b3c...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-02T20:46:38+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-07-02T20:46:39+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">19</version>
      <user-name>Repository</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>(from [e61afed6f8d2ef6a580ba00a5beaaaf0bf2ddb9a]) My suggestion to fix ticket 2401 [#2401 state:resolved]

Signed-off-by: Yehuda Katz + Carl Lerche &lt;ykatz+clerche@engineyard.com&gt;
http://github.com/rails/rails/commit/e61afed6f8d2ef6a580ba00a5beaaaf0bf2ddb9a</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/e61afed6f8d2ef6a580ba00a5beaaaf0bf2ddb9a&quot;
title=
&quot;Changeset [e61afed6f8d2ef6a580ba00a5beaaaf0bf2ddb9a]&quot;&gt;[e61afed6f8d2ef6a580ba00a5beaaaf0bf2ddb9a]&lt;/a&gt;)
My suggestion to fix ticket 2401 [&lt;a href=
&quot;/projects/8994/tickets/2401&quot; title=&quot;Ticket #2401&quot;&gt;#2401&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Yehuda Katz + Carl Lerche
&lt;a&gt;ykatz+clerche@engineyard.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/e61afed6f8d2ef6a580ba00a5beaaaf0bf2ddb9a&quot;&gt;
http://github.com/rails/rails/commit/e61afed6f8d2ef6a580ba00a5beaaa...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-02T20:46:42+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2401</number>
      <permalink>fields_for-nested-fubars-index</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>fields_for nested patch</tag>
      <title>fields_for nested fubars index</title>
      <updated-at type="datetime">2009-07-02T20:46:43+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">20</version>
      <user-name>Repository</user-name>
      <creator-name>ara.t.howard</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2401</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>4b5154642aeb2ce2945e72ac1bcd9342ad01d591</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-02T22:11:54+01:00</created-at>
      <filename>make_fields_for_work_with_multiple_nested_attributes.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">107394</id>
      <size type="integer">4699</size>
      <uploader-id type="integer">52870</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/107394/make_fields_for_work_with_multiple_nested_attributes.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>ec057097e0c9aa76f541a6d0751a12d50b983d2a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-02T22:47:56+01:00</created-at>
      <filename>make_fields_for_work_with_multiple_nested_attributes.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">107418</id>
      <size type="integer">4700</size>
      <uploader-id type="integer">52870</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/107418/make_fields_for_work_with_multiple_nested_attributes.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>4697316357024a55a6f971efebfba3837fa6f1f5</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-03T20:08:07+01:00</created-at>
      <filename>make_fields_for_work_with_multiple_nested_attributes.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">107856</id>
      <size type="integer">4670</size>
      <uploader-id type="integer">8406</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/107856/make_fields_for_work_with_multiple_nested_attributes.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>307a2c9d6cfeaa7700697027897075925b05a965</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-03T20:58:30+01:00</created-at>
      <filename>make_fields_for_work_with_multiple_nested_attributes.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">107890</id>
      <size type="integer">4782</size>
      <uploader-id type="integer">8406</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/107890/make_fields_for_work_with_multiple_nested_attributes.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>99739a9bea7fdf3104786e1c1328a89865f70978</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-11T13:15:50+01:00</created-at>
      <filename>make_fields_for_work_with_multiple_nested_attributes_jarl.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">120981</id>
      <size type="integer">4926</size>
      <uploader-id type="integer">55442</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/120981/make_fields_for_work_with_multiple_nested_attributes_jarl.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>3995e0101b9cb0f895f61159cf85d152308f3610</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-13T14:17:22+01:00</created-at>
      <filename>make_fields_for_work_with_multiple_nested_attributes_jarl.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">122043</id>
      <size type="integer">7569</size>
      <uploader-id type="integer">55442</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/122043/make_fields_for_work_with_multiple_nested_attributes_jarl.diff</url>
    </attachment>
  </attachments>
</ticket>
