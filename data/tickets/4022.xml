<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-08-03T04:43:34+01:00</created-at>
  <creator-id type="integer">7315</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4022</number>
  <permalink>generated-mailer-test-failure</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>&quot;rails3 generators&quot;</tag>
  <title>generated mailer test failure</title>
  <updated-at type="datetime">2010-10-15T23:01:45+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">7</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>David Chelimsky</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>As of a7b78e86b3b78cf4f461cd372d914ff3a6295c1b (Sun Feb 21 14:40:48 2010 +0100), if you cd up one directory from the rails repo and run the following:

@@@
ruby rails/railties/bin/rails example_app --dev
cd example_app
rake db:migrate
rake db:test:prepare
script/rails g mailer Notifications signup
rake test
@@@

... you'll see an error message like this:

@@@
Started
F
Finished in 0.289269 seconds.

  1) Failure:
test_signup(NotificationsTest)
    []:
&lt;#&lt;Mail::Message:0x1031e8a30
 @body=
  #&lt;Mail::Body:0x1031ae920
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&gt;,
 @delivery_handler=nil,
 @delivery_method=
  #&lt;Mail::SMTP:0x1031e8968
   @settings=
    {:domain=&gt;&quot;localhost.localdomain&quot;,
     :port=&gt;25,
     :password=&gt;nil,
     :address=&gt;&quot;localhost&quot;,
     :user_name=&gt;nil,
     :enable_starttls_auto=&gt;true,
     :authentication=&gt;nil}&gt;,
 @delivery_notification_observers=[],
 @header=
  #&lt;Mail::Header:0x1031e8468
   @fields=
    [#&lt;Mail::Field:0x1031ae5b0
      @field=
       #&lt;Mail::DateField:0x1031ad548
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0600&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031c53c8
      @field=
       #&lt;Mail::FromField:0x1031c4e78
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031c4cc0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&lt;Mail::Address:2173135940 Address: |from@example.com| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&gt;,
        @value=&quot;from@example.com&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031d1d80
      @field=
       #&lt;Mail::ToField:0x1031cf990
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031cf580
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&lt;Mail::Address:2173132540 Address: |to@example.org| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&gt;,
        @value=&quot;to@example.org&quot;&gt;&gt;,
     #&lt;Mail::Field:0x10311d510
      @field=
       #&lt;Mail::UnstructuredField:0x1030c5d60
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&lt;&gt;&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031d4260
      @field=
       #&lt;Mail::SubjectField:0x1031d3ba8
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031da408
      @field=
       #&lt;Mail::MimeVersionField:0x1031d9a08
        @element=
         #&lt;Mail::MimeVersionElement:0x1031d9850 @major=&quot;1&quot;, @minor=&quot;0&quot;&gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031e7658
      @field=
       #&lt;Mail::ContentTypeField:0x1031e73d8
        @element=
         #&lt;Mail::ContentTypeElement:0x1031e7180
          @main_type=&quot;text&quot;,
          @parameters=[{&quot;charset&quot;=&gt;&quot;utf-8&quot;}],
          @sub_type=&quot;plain&quot;&gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain; charset=utf-8&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1030f3cd8
      @field=
       #&lt;Mail::ContentTransferEncodingField:0x1030f2c98
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&gt;&gt;],
   @raw_source=&quot;&quot;&gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&gt;&gt; expected but was
&lt;#&lt;Mail::Message:0x103196f28
 @body=
  #&lt;Mail::Body:0x1031357a0
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&gt;,
 @delivery_handler=Notifications,
 @delivery_method=#&lt;Mail::TestMailer:0x103125968 @settings={}&gt;,
 @delivery_notification_observers=[],
 @header=
  #&lt;Mail::Header:0x103196960
   @fields=
    [#&lt;Mail::Field:0x1030e8338
      @field=
       #&lt;Mail::DateField:0x1030e7668
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0500&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103179888
      @field=
       #&lt;Mail::FromField:0x103179270
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031790e0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&lt;Mail::Address:2173073680 Address: |from@example.com| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&gt;,
        @value=&quot;from@example.com&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103186628
      @field=
       #&lt;Mail::ToField:0x103185c50
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&lt;Mail::AddressList:0x103185a70
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&lt;Mail::Address:2173072080 Address: |to@example.org| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&gt;,
        @value=&quot;to@example.org&quot;&gt;&gt;,
     #&lt;Mail::Field:0x10310e290
      @field=
       #&lt;Mail::UnstructuredField:0x1030be060
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&lt;&gt;&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031868d0
      @field=
       #&lt;Mail::SubjectField:0x1031863d0
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103125008
      @field=
       #&lt;Mail::MimeVersionField:0x103124838
        @element=
         #&lt;Mail::MimeVersionElement:0x1031244a0 @major=&quot;1&quot;, @minor=&quot;0&quot;&gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103134fa8
      @field=
       #&lt;Mail::ContentTypeField:0x10312d8e8
        @element=
         #&lt;Mail::ContentTypeElement:0x10312d0f0
          @main_type=&quot;text&quot;,
          @parameters=[],
          @sub_type=&quot;plain&quot;&gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1030dbbb0
      @field=
       #&lt;Mail::ContentTransferEncodingField:0x1030da7b0
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&gt;&gt;],
   @raw_source=&quot;&quot;&gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&gt;&gt;.

1 tests, 1 assertions, 1 failures, 0 errors
Errors running test:functionals!
@@@
@@@</original-body>
  <latest-body>As of a7b78e86b3b78cf4f461cd372d914ff3a6295c1b (Sun Feb 21 14:40:48 2010 +0100), if you cd up one directory from the rails repo and run the following:

@@@
ruby rails/railties/bin/rails example_app --dev
cd example_app
rake db:migrate
rake db:test:prepare
script/rails g mailer Notifications signup
rake test
@@@

... you'll see an error message like this:

@@@
Started
F
Finished in 0.289269 seconds.

  1) Failure:
test_signup(NotificationsTest)
    []:
&lt;#&lt;Mail::Message:0x1031e8a30
 @body=
  #&lt;Mail::Body:0x1031ae920
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&gt;,
 @delivery_handler=nil,
 @delivery_method=
  #&lt;Mail::SMTP:0x1031e8968
   @settings=
    {:domain=&gt;&quot;localhost.localdomain&quot;,
     :port=&gt;25,
     :password=&gt;nil,
     :address=&gt;&quot;localhost&quot;,
     :user_name=&gt;nil,
     :enable_starttls_auto=&gt;true,
     :authentication=&gt;nil}&gt;,
 @delivery_notification_observers=[],
 @header=
  #&lt;Mail::Header:0x1031e8468
   @fields=
    [#&lt;Mail::Field:0x1031ae5b0
      @field=
       #&lt;Mail::DateField:0x1031ad548
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0600&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031c53c8
      @field=
       #&lt;Mail::FromField:0x1031c4e78
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031c4cc0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&lt;Mail::Address:2173135940 Address: |from@example.com| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&gt;,
        @value=&quot;from@example.com&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031d1d80
      @field=
       #&lt;Mail::ToField:0x1031cf990
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031cf580
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&lt;Mail::Address:2173132540 Address: |to@example.org| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&gt;,
        @value=&quot;to@example.org&quot;&gt;&gt;,
     #&lt;Mail::Field:0x10311d510
      @field=
       #&lt;Mail::UnstructuredField:0x1030c5d60
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&lt;&gt;&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031d4260
      @field=
       #&lt;Mail::SubjectField:0x1031d3ba8
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031da408
      @field=
       #&lt;Mail::MimeVersionField:0x1031d9a08
        @element=
         #&lt;Mail::MimeVersionElement:0x1031d9850 @major=&quot;1&quot;, @minor=&quot;0&quot;&gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031e7658
      @field=
       #&lt;Mail::ContentTypeField:0x1031e73d8
        @element=
         #&lt;Mail::ContentTypeElement:0x1031e7180
          @main_type=&quot;text&quot;,
          @parameters=[{&quot;charset&quot;=&gt;&quot;utf-8&quot;}],
          @sub_type=&quot;plain&quot;&gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain; charset=utf-8&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1030f3cd8
      @field=
       #&lt;Mail::ContentTransferEncodingField:0x1030f2c98
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&gt;&gt;],
   @raw_source=&quot;&quot;&gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&gt;&gt; expected but was
&lt;#&lt;Mail::Message:0x103196f28
 @body=
  #&lt;Mail::Body:0x1031357a0
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&gt;,
 @delivery_handler=Notifications,
 @delivery_method=#&lt;Mail::TestMailer:0x103125968 @settings={}&gt;,
 @delivery_notification_observers=[],
 @header=
  #&lt;Mail::Header:0x103196960
   @fields=
    [#&lt;Mail::Field:0x1030e8338
      @field=
       #&lt;Mail::DateField:0x1030e7668
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0500&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103179888
      @field=
       #&lt;Mail::FromField:0x103179270
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031790e0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&lt;Mail::Address:2173073680 Address: |from@example.com| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&gt;,
        @value=&quot;from@example.com&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103186628
      @field=
       #&lt;Mail::ToField:0x103185c50
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&lt;Mail::AddressList:0x103185a70
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&lt;Mail::Address:2173072080 Address: |to@example.org| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&gt;,
        @value=&quot;to@example.org&quot;&gt;&gt;,
     #&lt;Mail::Field:0x10310e290
      @field=
       #&lt;Mail::UnstructuredField:0x1030be060
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&lt;&gt;&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031868d0
      @field=
       #&lt;Mail::SubjectField:0x1031863d0
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103125008
      @field=
       #&lt;Mail::MimeVersionField:0x103124838
        @element=
         #&lt;Mail::MimeVersionElement:0x1031244a0 @major=&quot;1&quot;, @minor=&quot;0&quot;&gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103134fa8
      @field=
       #&lt;Mail::ContentTypeField:0x10312d8e8
        @element=
         #&lt;Mail::ContentTypeElement:0x10312d0f0
          @main_type=&quot;text&quot;,
          @parameters=[],
          @sub_type=&quot;plain&quot;&gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1030dbbb0
      @field=
       #&lt;Mail::ContentTransferEncodingField:0x1030da7b0
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&gt;&gt;],
   @raw_source=&quot;&quot;&gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&gt;&gt;.

1 tests, 1 assertions, 1 failures, 0 errors
Errors running test:functionals!
@@@
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;As of a7b78e86b3b78cf4f461cd372d914ff3a6295c1b (Sun Feb 21
14:40:48 2010 +0100), if you cd up one directory from the rails
repo and run the following:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ruby rails/railties/bin/rails example_app --dev
cd example_app
rake db:migrate
rake db:test:prepare
script/rails g mailer Notifications signup
rake test&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;... you'll see an error message like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Started
F
Finished in 0.289269 seconds.

  1) Failure:
test_signup(NotificationsTest)
    []:
&amp;lt;#&amp;lt;Mail::Message:0x1031e8a30
 @body=
  #&amp;lt;Mail::Body:0x1031ae920
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&amp;gt;,
 @delivery_handler=nil,
 @delivery_method=
  #&amp;lt;Mail::SMTP:0x1031e8968
   @settings=
    {:domain=&amp;gt;&quot;localhost.localdomain&quot;,
     :port=&amp;gt;25,
     :password=&amp;gt;nil,
     :address=&amp;gt;&quot;localhost&quot;,
     :user_name=&amp;gt;nil,
     :enable_starttls_auto=&amp;gt;true,
     :authentication=&amp;gt;nil}&amp;gt;,
 @delivery_notification_observers=[],
 @header=
  #&amp;lt;Mail::Header:0x1031e8468
   @fields=
    [#&amp;lt;Mail::Field:0x1031ae5b0
      @field=
       #&amp;lt;Mail::DateField:0x1031ad548
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0600&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031c53c8
      @field=
       #&amp;lt;Mail::FromField:0x1031c4e78
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x1031c4cc0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&amp;lt;Mail::Address:2173135940 Address: |from@example.com| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&amp;gt;,
        @value=&quot;from@example.com&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031d1d80
      @field=
       #&amp;lt;Mail::ToField:0x1031cf990
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x1031cf580
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&amp;lt;Mail::Address:2173132540 Address: |to@example.org| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&amp;gt;,
        @value=&quot;to@example.org&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x10311d510
      @field=
       #&amp;lt;Mail::UnstructuredField:0x1030c5d60
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&amp;lt;&amp;gt;&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031d4260
      @field=
       #&amp;lt;Mail::SubjectField:0x1031d3ba8
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031da408
      @field=
       #&amp;lt;Mail::MimeVersionField:0x1031d9a08
        @element=
         #&amp;lt;Mail::MimeVersionElement:0x1031d9850 @major=&quot;1&quot;, @minor=&quot;0&quot;&amp;gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031e7658
      @field=
       #&amp;lt;Mail::ContentTypeField:0x1031e73d8
        @element=
         #&amp;lt;Mail::ContentTypeElement:0x1031e7180
          @main_type=&quot;text&quot;,
          @parameters=[{&quot;charset&quot;=&amp;gt;&quot;utf-8&quot;}],
          @sub_type=&quot;plain&quot;&amp;gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&amp;gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain; charset=utf-8&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1030f3cd8
      @field=
       #&amp;lt;Mail::ContentTransferEncodingField:0x1030f2c98
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&amp;gt;&amp;gt;],
   @raw_source=&quot;&quot;&amp;gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&amp;gt;&amp;gt; expected but was
&amp;lt;#&amp;lt;Mail::Message:0x103196f28
 @body=
  #&amp;lt;Mail::Body:0x1031357a0
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&amp;gt;,
 @delivery_handler=Notifications,
 @delivery_method=#&amp;lt;Mail::TestMailer:0x103125968 @settings={}&amp;gt;,
 @delivery_notification_observers=[],
 @header=
  #&amp;lt;Mail::Header:0x103196960
   @fields=
    [#&amp;lt;Mail::Field:0x1030e8338
      @field=
       #&amp;lt;Mail::DateField:0x1030e7668
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0500&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103179888
      @field=
       #&amp;lt;Mail::FromField:0x103179270
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x1031790e0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&amp;lt;Mail::Address:2173073680 Address: |from@example.com| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&amp;gt;,
        @value=&quot;from@example.com&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103186628
      @field=
       #&amp;lt;Mail::ToField:0x103185c50
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x103185a70
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&amp;lt;Mail::Address:2173072080 Address: |to@example.org| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&amp;gt;,
        @value=&quot;to@example.org&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x10310e290
      @field=
       #&amp;lt;Mail::UnstructuredField:0x1030be060
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&amp;lt;&amp;gt;&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031868d0
      @field=
       #&amp;lt;Mail::SubjectField:0x1031863d0
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103125008
      @field=
       #&amp;lt;Mail::MimeVersionField:0x103124838
        @element=
         #&amp;lt;Mail::MimeVersionElement:0x1031244a0 @major=&quot;1&quot;, @minor=&quot;0&quot;&amp;gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103134fa8
      @field=
       #&amp;lt;Mail::ContentTypeField:0x10312d8e8
        @element=
         #&amp;lt;Mail::ContentTypeElement:0x10312d0f0
          @main_type=&quot;text&quot;,
          @parameters=[],
          @sub_type=&quot;plain&quot;&amp;gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&amp;gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1030dbbb0
      @field=
       #&amp;lt;Mail::ContentTransferEncodingField:0x1030da7b0
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&amp;gt;&amp;gt;],
   @raw_source=&quot;&quot;&amp;gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&amp;gt;&amp;gt;.

1 tests, 1 assertions, 1 failures, 0 errors
Errors running test:functionals!&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;

&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>As of a7b78e86b3b78cf4f461cd372d914ff3a6295c1b (Sun Feb 21 14:40:48 2010 +0100), if you cd up one directory from the rails repo and run the following:

@@@
ruby rails/railties/bin/rails example_app --dev
cd example_app
rake db:migrate
rake db:test:prepare
script/rails g mailer Notifications signup
rake test
@@@

... you'll see an error message like this:

@@@
Started
F
Finished in 0.289269 seconds.

  1) Failure:
test_signup(NotificationsTest)
    []:
&lt;#&lt;Mail::Message:0x1031e8a30
 @body=
  #&lt;Mail::Body:0x1031ae920
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&gt;,
 @delivery_handler=nil,
 @delivery_method=
  #&lt;Mail::SMTP:0x1031e8968
   @settings=
    {:domain=&gt;&quot;localhost.localdomain&quot;,
     :port=&gt;25,
     :password=&gt;nil,
     :address=&gt;&quot;localhost&quot;,
     :user_name=&gt;nil,
     :enable_starttls_auto=&gt;true,
     :authentication=&gt;nil}&gt;,
 @delivery_notification_observers=[],
 @header=
  #&lt;Mail::Header:0x1031e8468
   @fields=
    [#&lt;Mail::Field:0x1031ae5b0
      @field=
       #&lt;Mail::DateField:0x1031ad548
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0600&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031c53c8
      @field=
       #&lt;Mail::FromField:0x1031c4e78
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031c4cc0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&lt;Mail::Address:2173135940 Address: |from@example.com| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&gt;,
        @value=&quot;from@example.com&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031d1d80
      @field=
       #&lt;Mail::ToField:0x1031cf990
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031cf580
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&lt;Mail::Address:2173132540 Address: |to@example.org| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&gt;,
        @value=&quot;to@example.org&quot;&gt;&gt;,
     #&lt;Mail::Field:0x10311d510
      @field=
       #&lt;Mail::UnstructuredField:0x1030c5d60
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&lt;&gt;&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031d4260
      @field=
       #&lt;Mail::SubjectField:0x1031d3ba8
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031da408
      @field=
       #&lt;Mail::MimeVersionField:0x1031d9a08
        @element=
         #&lt;Mail::MimeVersionElement:0x1031d9850 @major=&quot;1&quot;, @minor=&quot;0&quot;&gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031e7658
      @field=
       #&lt;Mail::ContentTypeField:0x1031e73d8
        @element=
         #&lt;Mail::ContentTypeElement:0x1031e7180
          @main_type=&quot;text&quot;,
          @parameters=[{&quot;charset&quot;=&gt;&quot;utf-8&quot;}],
          @sub_type=&quot;plain&quot;&gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain; charset=utf-8&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1030f3cd8
      @field=
       #&lt;Mail::ContentTransferEncodingField:0x1030f2c98
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&gt;&gt;],
   @raw_source=&quot;&quot;&gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&gt;&gt; expected but was
&lt;#&lt;Mail::Message:0x103196f28
 @body=
  #&lt;Mail::Body:0x1031357a0
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&gt;,
 @delivery_handler=Notifications,
 @delivery_method=#&lt;Mail::TestMailer:0x103125968 @settings={}&gt;,
 @delivery_notification_observers=[],
 @header=
  #&lt;Mail::Header:0x103196960
   @fields=
    [#&lt;Mail::Field:0x1030e8338
      @field=
       #&lt;Mail::DateField:0x1030e7668
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0500&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103179888
      @field=
       #&lt;Mail::FromField:0x103179270
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&lt;Mail::AddressList:0x1031790e0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&lt;Mail::Address:2173073680 Address: |from@example.com| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&gt;,
        @value=&quot;from@example.com&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103186628
      @field=
       #&lt;Mail::ToField:0x103185c50
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&lt;Mail::AddressList:0x103185a70
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&lt;Mail::Address:2173072080 Address: |to@example.org| &gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&gt;,
        @value=&quot;to@example.org&quot;&gt;&gt;,
     #&lt;Mail::Field:0x10310e290
      @field=
       #&lt;Mail::UnstructuredField:0x1030be060
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&lt;&gt;&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1031868d0
      @field=
       #&lt;Mail::SubjectField:0x1031863d0
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103125008
      @field=
       #&lt;Mail::MimeVersionField:0x103124838
        @element=
         #&lt;Mail::MimeVersionElement:0x1031244a0 @major=&quot;1&quot;, @minor=&quot;0&quot;&gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&gt;&gt;,
     #&lt;Mail::Field:0x103134fa8
      @field=
       #&lt;Mail::ContentTypeField:0x10312d8e8
        @element=
         #&lt;Mail::ContentTypeElement:0x10312d0f0
          @main_type=&quot;text&quot;,
          @parameters=[],
          @sub_type=&quot;plain&quot;&gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain&quot;&gt;&gt;,
     #&lt;Mail::Field:0x1030dbbb0
      @field=
       #&lt;Mail::ContentTransferEncodingField:0x1030da7b0
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&gt;&gt;],
   @raw_source=&quot;&quot;&gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&gt;&gt;.

1 tests, 1 assertions, 1 failures, 0 errors
Errors running test:functionals!
@@@
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;As of a7b78e86b3b78cf4f461cd372d914ff3a6295c1b (Sun Feb 21
14:40:48 2010 +0100), if you cd up one directory from the rails
repo and run the following:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ruby rails/railties/bin/rails example_app --dev
cd example_app
rake db:migrate
rake db:test:prepare
script/rails g mailer Notifications signup
rake test&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;... you'll see an error message like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Started
F
Finished in 0.289269 seconds.

  1) Failure:
test_signup(NotificationsTest)
    []:
&amp;lt;#&amp;lt;Mail::Message:0x1031e8a30
 @body=
  #&amp;lt;Mail::Body:0x1031ae920
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&amp;gt;,
 @delivery_handler=nil,
 @delivery_method=
  #&amp;lt;Mail::SMTP:0x1031e8968
   @settings=
    {:domain=&amp;gt;&quot;localhost.localdomain&quot;,
     :port=&amp;gt;25,
     :password=&amp;gt;nil,
     :address=&amp;gt;&quot;localhost&quot;,
     :user_name=&amp;gt;nil,
     :enable_starttls_auto=&amp;gt;true,
     :authentication=&amp;gt;nil}&amp;gt;,
 @delivery_notification_observers=[],
 @header=
  #&amp;lt;Mail::Header:0x1031e8468
   @fields=
    [#&amp;lt;Mail::Field:0x1031ae5b0
      @field=
       #&amp;lt;Mail::DateField:0x1031ad548
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0600&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031c53c8
      @field=
       #&amp;lt;Mail::FromField:0x1031c4e78
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x1031c4cc0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&amp;lt;Mail::Address:2173135940 Address: |from@example.com| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&amp;gt;,
        @value=&quot;from@example.com&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031d1d80
      @field=
       #&amp;lt;Mail::ToField:0x1031cf990
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x1031cf580
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&amp;lt;Mail::Address:2173132540 Address: |to@example.org| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&amp;gt;,
        @value=&quot;to@example.org&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x10311d510
      @field=
       #&amp;lt;Mail::UnstructuredField:0x1030c5d60
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&amp;lt;&amp;gt;&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031d4260
      @field=
       #&amp;lt;Mail::SubjectField:0x1031d3ba8
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031da408
      @field=
       #&amp;lt;Mail::MimeVersionField:0x1031d9a08
        @element=
         #&amp;lt;Mail::MimeVersionElement:0x1031d9850 @major=&quot;1&quot;, @minor=&quot;0&quot;&amp;gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031e7658
      @field=
       #&amp;lt;Mail::ContentTypeField:0x1031e73d8
        @element=
         #&amp;lt;Mail::ContentTypeElement:0x1031e7180
          @main_type=&quot;text&quot;,
          @parameters=[{&quot;charset&quot;=&amp;gt;&quot;utf-8&quot;}],
          @sub_type=&quot;plain&quot;&amp;gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&amp;gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain; charset=utf-8&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1030f3cd8
      @field=
       #&amp;lt;Mail::ContentTransferEncodingField:0x1030f2c98
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&amp;gt;&amp;gt;],
   @raw_source=&quot;&quot;&amp;gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&amp;gt;&amp;gt; expected but was
&amp;lt;#&amp;lt;Mail::Message:0x103196f28
 @body=
  #&amp;lt;Mail::Body:0x1031357a0
   @boundary=nil,
   @charset=&quot;US-ASCII&quot;,
   @encoding=nil,
   @epilogue=nil,
   @part_sort_order=[&quot;text/plain&quot;, &quot;text/enriched&quot;, &quot;text/html&quot;],
   @parts=[],
   @preamble=nil,
   @raw_source=
    &quot;Notifications#signup\n\nHi, find me in app/views/notifications/signup\n&quot;&amp;gt;,
 @delivery_handler=Notifications,
 @delivery_method=#&amp;lt;Mail::TestMailer:0x103125968 @settings={}&amp;gt;,
 @delivery_notification_observers=[],
 @header=
  #&amp;lt;Mail::Header:0x103196960
   @fields=
    [#&amp;lt;Mail::Field:0x1030e8338
      @field=
       #&amp;lt;Mail::DateField:0x1030e7668
        @element=nil,
        @length=nil,
        @name=&quot;Date&quot;,
        @tree=nil,
        @value=&quot;Sun, 21 Feb 2010 10:54:15 -0500&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103179888
      @field=
       #&amp;lt;Mail::FromField:0x103179270
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;From&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x1031790e0
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;],
          @addresses=
           [#&amp;lt;Mail::Address:2173073680 Address: |from@example.com| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;from@example.com&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;from&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;from&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;from&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;from&quot;:
          SyntaxNode offset=0, &quot;f&quot;
          SyntaxNode offset=1, &quot;r&quot;
          SyntaxNode offset=2, &quot;o&quot;
          SyntaxNode offset=3, &quot;m&quot;
    SyntaxNode+CFWS1 offset=4, &quot;&quot;:
      SyntaxNode offset=4, &quot;&quot;
      SyntaxNode offset=4, &quot;&quot;
  SyntaxNode offset=4, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=5, &quot;example.com&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=5, &quot;&quot;:
      SyntaxNode offset=5, &quot;&quot;
      SyntaxNode offset=5, &quot;&quot;
    SyntaxNode offset=5, &quot;example.com&quot;:
      SyntaxNode+DotAtomText0 offset=5, &quot;example.&quot; (domain_text):
        SyntaxNode offset=5, &quot;example&quot;:
          SyntaxNode offset=5, &quot;e&quot;
          SyntaxNode offset=6, &quot;x&quot;
          SyntaxNode offset=7, &quot;a&quot;
          SyntaxNode offset=8, &quot;m&quot;
          SyntaxNode offset=9, &quot;p&quot;
          SyntaxNode offset=10, &quot;l&quot;
          SyntaxNode offset=11, &quot;e&quot;
        SyntaxNode offset=12, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=13, &quot;com&quot; (domain_text):
        SyntaxNode offset=13, &quot;com&quot;:
          SyntaxNode offset=13, &quot;c&quot;
          SyntaxNode offset=14, &quot;o&quot;
          SyntaxNode offset=15, &quot;m&quot;
        SyntaxNode offset=16, &quot;&quot;
    SyntaxNode+CFWS1 offset=16, &quot;&quot;:
      SyntaxNode offset=16, &quot;&quot;
      SyntaxNode offset=16, &quot;&quot;]&amp;gt;,
        @value=&quot;from@example.com&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103186628
      @field=
       #&amp;lt;Mail::ToField:0x103185c50
        @element=nil,
        @groups={},
        @length=nil,
        @name=&quot;To&quot;,
        @tree=
         #&amp;lt;Mail::AddressList:0x103185a70
          @address_nodes=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;],
          @addresses=[#&amp;lt;Mail::Address:2173072080 Address: |to@example.org| &amp;gt;],
          @group_recipients=[],
          @individual_recipients=
           [SyntaxNode+Address1+AddrSpec0 offset=0, &quot;to@example.org&quot; (domain,local_part,dig_comments,comments):
  SyntaxNode+LocalDotAtom0 offset=0, &quot;to&quot; (local_dot_atom_text):
    SyntaxNode+CFWS1 offset=0, &quot;&quot;:
      SyntaxNode offset=0, &quot;&quot;
      SyntaxNode offset=0, &quot;&quot;
    SyntaxNode offset=0, &quot;to&quot;:
      SyntaxNode+LocalDotAtomText0 offset=0, &quot;to&quot; (domain_text):
        SyntaxNode offset=0, &quot;&quot;
        SyntaxNode offset=0, &quot;to&quot;:
          SyntaxNode offset=0, &quot;t&quot;
          SyntaxNode offset=1, &quot;o&quot;
    SyntaxNode+CFWS1 offset=2, &quot;&quot;:
      SyntaxNode offset=2, &quot;&quot;
      SyntaxNode offset=2, &quot;&quot;
  SyntaxNode offset=2, &quot;@&quot;
  SyntaxNode+DotAtom0 offset=3, &quot;example.org&quot; (dot_atom_text):
    SyntaxNode+CFWS1 offset=3, &quot;&quot;:
      SyntaxNode offset=3, &quot;&quot;
      SyntaxNode offset=3, &quot;&quot;
    SyntaxNode offset=3, &quot;example.org&quot;:
      SyntaxNode+DotAtomText0 offset=3, &quot;example.&quot; (domain_text):
        SyntaxNode offset=3, &quot;example&quot;:
          SyntaxNode offset=3, &quot;e&quot;
          SyntaxNode offset=4, &quot;x&quot;
          SyntaxNode offset=5, &quot;a&quot;
          SyntaxNode offset=6, &quot;m&quot;
          SyntaxNode offset=7, &quot;p&quot;
          SyntaxNode offset=8, &quot;l&quot;
          SyntaxNode offset=9, &quot;e&quot;
        SyntaxNode offset=10, &quot;.&quot;
      SyntaxNode+DotAtomText0 offset=11, &quot;org&quot; (domain_text):
        SyntaxNode offset=11, &quot;org&quot;:
          SyntaxNode offset=11, &quot;o&quot;
          SyntaxNode offset=12, &quot;r&quot;
          SyntaxNode offset=13, &quot;g&quot;
        SyntaxNode offset=14, &quot;&quot;
    SyntaxNode+CFWS1 offset=14, &quot;&quot;:
      SyntaxNode offset=14, &quot;&quot;
      SyntaxNode offset=14, &quot;&quot;]&amp;gt;,
        @value=&quot;to@example.org&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x10310e290
      @field=
       #&amp;lt;Mail::UnstructuredField:0x1030be060
        @element=nil,
        @length=nil,
        @name=&quot;message-id&quot;,
        @tree=nil,
        @value=&quot;&amp;lt;&amp;gt;&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1031868d0
      @field=
       #&amp;lt;Mail::SubjectField:0x1031863d0
        @element=nil,
        @length=15,
        @name=&quot;Subject&quot;,
        @tree=nil,
        @value=&quot;Signup&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103125008
      @field=
       #&amp;lt;Mail::MimeVersionField:0x103124838
        @element=
         #&amp;lt;Mail::MimeVersionElement:0x1031244a0 @major=&quot;1&quot;, @minor=&quot;0&quot;&amp;gt;,
        @length=nil,
        @name=&quot;Mime-Version&quot;,
        @tree=nil,
        @value=&quot;1.0&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x103134fa8
      @field=
       #&amp;lt;Mail::ContentTypeField:0x10312d8e8
        @element=
         #&amp;lt;Mail::ContentTypeElement:0x10312d0f0
          @main_type=&quot;text&quot;,
          @parameters=[],
          @sub_type=&quot;plain&quot;&amp;gt;,
        @length=nil,
        @main_type=&quot;text&quot;,
        @name=&quot;Content-Type&quot;,
        @parameters={&quot;charset&quot;=&amp;gt;&quot;utf-8&quot;},
        @sub_type=&quot;plain&quot;,
        @tree=nil,
        @value=&quot;text/plain&quot;&amp;gt;&amp;gt;,
     #&amp;lt;Mail::Field:0x1030dbbb0
      @field=
       #&amp;lt;Mail::ContentTransferEncodingField:0x1030da7b0
        @element=nil,
        @length=nil,
        @name=&quot;Content-Transfer-Encoding&quot;,
        @tree=nil,
        @value=&quot;7bit&quot;&amp;gt;&amp;gt;],
   @raw_source=&quot;&quot;&amp;gt;,
 @html_part=nil,
 @perform_deliveries=true,
 @raise_delivery_errors=true,
 @raw_source=&quot;&quot;,
 @text_part=nil&amp;gt;&amp;gt;.

1 tests, 1 assertions, 1 failures, 0 errors
Errors running test:functionals!&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;

&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-21T16:56:34+00:00</created-at>
      <creator-id type="integer">7315</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4022</number>
      <permalink>generated-mailer-test-failure</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;rails3 generators&quot;</tag>
      <title>generated mailer test failure</title>
      <updated-at type="datetime">2010-02-21T16:56:37+00:00</updated-at>
      <user-id type="integer">7315</user-id>
      <version type="integer">1</version>
      <user-name>David Chelimsky</user-name>
      <creator-name>David Chelimsky</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The failure is due to the fact that the date is not set on the actual mailer, but it does get set on the @expected mailer in the test. Attached patch resolves that issue, however this still leaves open the fact that the failure message is pretty challenging to grok. Should probably address that in a separate ticket.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The failure is due to the fact that the date is not set on the
actual mailer, but it does get set on the @expected mailer in the
test. Attached patch resolves that issue, however this still leaves
open the fact that the failure message is pretty challenging to
grok. Should probably address that in a separate ticket.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-21T17:27:32+00:00</created-at>
      <creator-id type="integer">7315</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4022</number>
      <permalink>generated-mailer-test-failure</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;rails3 generators&quot;</tag>
      <title>generated mailer test failure</title>
      <updated-at type="datetime">2010-02-21T17:27:38+00:00</updated-at>
      <user-id type="integer">7315</user-id>
      <version type="integer">2</version>
      <user-name>David Chelimsky</user-name>
      <creator-name>David Chelimsky</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15159</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thanks David! I'm assigning to Mikel, since he is ActionMailer/Mail guy! :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks David! I'm assigning to Mikel, since he is
ActionMailer/Mail guy! :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-21T19:30:02+00:00</created-at>
      <creator-id type="integer">7315</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4022</number>
      <permalink>generated-mailer-test-failure</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;rails3 generators&quot;</tag>
      <title>generated mailer test failure</title>
      <updated-at type="datetime">2010-02-21T19:30:03+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">3</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>David Chelimsky</creator-name>
      <assigned-user-name>Mikel Lindsaar</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@David, I just updated the Message#inspect method to be a bit more friendly, this will be released in the next version of Mail, which will roll into Rails shortly.

I don't get the error you get though when I ran the tests the same way you did.  However, specifying a date is a hold over from TMail, and we don't need to check that the mail was created today.  So I'm fine on this.

Jos&#233;, I signed off and applied this commit, it is in my fork.

Mikel</body>
      <body-html>&lt;div&gt;&lt;p&gt;@David, I just updated the Message#inspect method to be a bit
more friendly, this will be released in the next version of Mail,
which will roll into Rails shortly.&lt;/p&gt;
&lt;p&gt;I don't get the error you get though when I ran the tests the
same way you did. However, specifying a date is a hold over from
TMail, and we don't need to check that the mail was created today.
So I'm fine on this.&lt;/p&gt;
&lt;p&gt;Jos&amp;eacute;, I signed off and applied this commit, it is in my
fork.&lt;/p&gt;
&lt;p&gt;Mikel&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-21T23:33:14+00:00</created-at>
      <creator-id type="integer">7315</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:assigned_user: 15159
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4022</number>
      <permalink>generated-mailer-test-failure</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>&quot;rails3 generators&quot;</tag>
      <title>generated mailer test failure</title>
      <updated-at type="datetime">2010-02-21T23:33:19+00:00</updated-at>
      <user-id type="integer">15159</user-id>
      <version type="integer">4</version>
      <user-name>Mikel Lindsaar</user-name>
      <creator-name>David Chelimsky</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-02-23T07:27:45+00:00</created-at>
      <creator-id type="integer">7315</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4022</number>
      <permalink>generated-mailer-test-failure</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;rails3 generators&quot;</tag>
      <title>generated mailer test failure</title>
      <updated-at type="datetime">2010-02-23T07:27:48+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">5</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>David Chelimsky</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>http://www.watchesbit.com
http://www.watchesbit.com/rolex.html
http://www.watchesbook.com
http://www.watchesbook.com/fake-rolex.html</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=
&quot;http://www.watchesbit.com&quot;&gt;http://www.watchesbit.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.watchesbit.com/rolex.html&quot;&gt;http://www.watchesbit.com/rolex.html&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.watchesbook.com&quot;&gt;http://www.watchesbook.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.watchesbook.com/fake-rolex.html&quot;&gt;http://www.watchesbook.com/fake-rolex.html&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-08-03T04:40:47+01:00</created-at>
      <creator-id type="integer">7315</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4022</number>
      <permalink>generated-mailer-test-failure</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;rails3 generators&quot;</tag>
      <title>generated mailer test failure</title>
      <updated-at type="datetime">2010-08-03T04:43:33+01:00</updated-at>
      <user-id type="integer">109991</user-id>
      <version type="integer">6</version>
      <user-name>choopz</user-name>
      <creator-name>David Chelimsky</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:45+01:00</created-at>
      <creator-id type="integer">7315</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4022</number>
      <permalink>generated-mailer-test-failure</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;rails3 generators&quot;</tag>
      <title>generated mailer test failure</title>
      <updated-at type="datetime">2010-10-15T23:01:45+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">7</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>David Chelimsky</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4022</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>102eefa786c20130315d657cc9782bd4be21540a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-02-21T17:27:32+00:00</created-at>
      <filename>0001-don-t-set-expecteddate-in-generated-mailer-test.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">418916</id>
      <size type="integer">1002</size>
      <uploader-id type="integer">7315</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/418916/0001-don-t-set-expecteddate-in-generated-mailer-test.patch</url>
    </attachment>
  </attachments>
</ticket>
