<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">83</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-02-20T13:23:44+00:00</created-at>
  <creator-id type="integer">11378</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4008</number>
  <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>railties</tag>
  <title>let rails use load to interpret script/rails</title>
  <updated-at type="datetime">2010-10-15T23:01:45+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">8</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Xavier Noria</creator-name>
  <assigned-user-name>DHH</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>High</priority-name>
  <original-body>The current rails command uses exec to run script/rails. This works as long as we are on Unix and script/rails is executable. This patch switches to load, which is portable.

If script/rails is executable and has a shebang pointing to a different vm than the one the rails command runs under, that shebang will have no effect with this approach.

I think that this patch allows us to send the uniform message that the rails command is the way to go nonetheless, and in that edge case people could still run script/rails manually.</original-body>
  <latest-body>The current rails command uses exec to run script/rails. This works as long as we are on Unix and script/rails is executable. This patch switches to load, which is portable.

If script/rails is executable and has a shebang pointing to a different vm than the one the rails command runs under, that shebang will have no effect with this approach.

I think that this patch allows us to send the uniform message that the rails command is the way to go nonetheless, and in that edge case people could still run script/rails manually.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The current rails command uses exec to run script/rails. This
works as long as we are on Unix and script/rails is executable.
This patch switches to load, which is portable.&lt;/p&gt;
&lt;p&gt;If script/rails is executable and has a shebang pointing to a
different vm than the one the rails command runs under, that
shebang will have no effect with this approach.&lt;/p&gt;
&lt;p&gt;I think that this patch allows us to send the uniform message
that the rails command is the way to go nonetheless, and in that
edge case people could still run script/rails manually.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The current rails command uses exec to run script/rails. This works as long as we are on Unix and script/rails is executable. This patch switches to load, which is portable.

If script/rails is executable and has a shebang pointing to a different vm than the one the rails command runs under, that shebang will have no effect with this approach.

I think that this patch allows us to send the uniform message that the rails command is the way to go nonetheless, and in that edge case people could still run script/rails manually.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The current rails command uses exec to run script/rails. This
works as long as we are on Unix and script/rails is executable.
This patch switches to load, which is portable.&lt;/p&gt;
&lt;p&gt;If script/rails is executable and has a shebang pointing to a
different vm than the one the rails command runs under, that
shebang will have no effect with this approach.&lt;/p&gt;
&lt;p&gt;I think that this patch allows us to send the uniform message
that the rails command is the way to go nonetheless, and in that
edge case people could still run script/rails manually.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-20T13:23:44+00:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-02-20T13:23:50+00:00</updated-at>
      <user-id type="integer">11378</user-id>
      <version type="integer">1</version>
      <user-name>Xavier Noria</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">83</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Added a new patch that in addition recurses upwards searching for script/rails.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Added a new patch that in addition recurses upwards searching
for script/rails.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-23T00:24:56+00:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-02-23T00:24:57+00:00</updated-at>
      <user-id type="integer">11378</user-id>
      <version type="integer">2</version>
      <user-name>Xavier Noria</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name>DHH</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">83</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Using load has also issues, because if you have an app running the rails 3.0 gem, and your rails command belongs to the rails 3.1 gem, the rails gem has already been activated to 3.1.

We pondered options with wycats and the winner was to switch back to exec, but passing the current interpreter. If you need a different vm, or have a custom shebang that needs to be honored you can still run script/rails directly.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Using load has also issues, because if you have an app running
the rails 3.0 gem, and your rails command belongs to the rails 3.1
gem, the rails gem has already been activated to 3.1.&lt;/p&gt;
&lt;p&gt;We pondered options with wycats and the winner was to switch
back to exec, but passing the current interpreter. If you need a
different vm, or have a custom shebang that needs to be honored you
can still run script/rails directly.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-23T22:49:01+00:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-02-23T22:49:04+00:00</updated-at>
      <user-id type="integer">11378</user-id>
      <version type="integer">3</version>
      <user-name>Xavier Noria</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name>DHH</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">83</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-23T22:56:13+00:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-02-23T22:56:18+00:00</updated-at>
      <user-id type="integer">11378</user-id>
      <version type="integer">4</version>
      <user-name>Xavier Noria</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name>DHH</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">83</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-23T22:59:18+00:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-02-23T22:59:19+00:00</updated-at>
      <user-id type="integer">11378</user-id>
      <version type="integer">5</version>
      <user-name>Xavier Noria</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name>DHH</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">83</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>My two cents &quot;rails command known not to work on Windows&quot; should be considered a blocker for the next beta.</body>
      <body-html>&lt;div&gt;&lt;p&gt;My two cents &quot;rails command known not to work on Windows&quot; should
be considered a blocker for the next beta.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-25T16:27:23+00:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-02-25T16:27:25+00:00</updated-at>
      <user-id type="integer">23341</user-id>
      <version type="integer">6</version>
      <user-name>Sam Ruby</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name>DHH</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">83</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [bf0f14579aa793f2ab29ec092c517d04e702dbe3]) let the rails command recurse upwards looking for script/rails, and exec ruby on it for better portability [Xavier Noria] (Closes #4008)
http://github.com/rails/rails/commit/bf0f14579aa793f2ab29ec092c517d04e702dbe3</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/bf0f14579aa793f2ab29ec092c517d04e702dbe3&quot;
title=
&quot;Changeset [bf0f14579aa793f2ab29ec092c517d04e702dbe3]&quot;&gt;[bf0f14579aa793f2ab29ec092c517d04e702dbe3]&lt;/a&gt;)
let the rails command recurse upwards looking for script/rails, and
exec ruby on it for better portability [Xavier Noria] (Closes
&lt;a href=&quot;/projects/8994/tickets/4008&quot; title=
&quot;Ticket #4008&quot;&gt;#4008&lt;/a&gt;) &lt;a href=
&quot;http://github.com/rails/rails/commit/bf0f14579aa793f2ab29ec092c517d04e702dbe3&quot;&gt;
http://github.com/rails/rails/commit/bf0f14579aa793f2ab29ec092c517d...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-02-25T16:32:51+00:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-02-25T16:32:52+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">7</version>
      <user-name>Repository</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name>DHH</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">83</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:45+01:00</created-at>
      <creator-id type="integer">11378</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4008</number>
      <permalink>let-rails-use-load-to-interpret-scriptrails</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>railties</tag>
      <title>let rails use load to interpret script/rails</title>
      <updated-at type="datetime">2010-10-15T23:01:45+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Xavier Noria</creator-name>
      <assigned-user-name>DHH</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4008</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>8d2ddbc8faed1ced8f3b196f592f74a27b797c1a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-02-23T22:59:18+00:00</created-at>
      <filename>rails_recurses_and_exec_revisited.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">422575</id>
      <size type="integer">1946</size>
      <uploader-id type="integer">11378</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/422575/rails_recurses_and_exec_revisited.diff</url>
    </attachment>
  </attachments>
</ticket>
