<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-05-10T09:54:04+01:00</created-at>
  <creator-id type="integer">55442</creator-id>
  <milestone-due-on type="datetime">2010-01-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">50064</milestone-id>
  <number type="integer">4565</number>
  <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>bugmash cache_classes patch thread</tag>
  <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
  <updated-at type="datetime">2010-05-16T15:07:02+01:00</updated-at>
  <user-id type="integer">65556</user-id>
  <version type="integer">10</version>
  <user-name>Rizwan Reza</user-name>
  <creator-name>Jarl Friis</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
  <milestone-title>2.3.6</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>Even the most basic application is broken in 2.3.4 and 2.3.5 in development environment (where `config.cache_classes = false`)

Here are steps to reproduce. notice it is on the second request (not the first one) it fails:

    $ rails newproject
          create                  
          create  app/controllers 
          create  app/helpers     
          create  app/models      
          create  app/views/layouts
          create  config/environments
          create  config/initializers
          create  config/locales     
          create  db                 
          create  doc                
          create  lib                
          create  lib/tasks          
          create  log                
          create  public/images      
          create  public/javascripts 
          create  public/stylesheets 
          create  script/performance 
          create  test/fixtures      
          create  test/functional    
          create  test/integration   
          create  test/performance   
          create  test/unit          
          create  vendor             
          create  vendor/plugins     
          create  tmp/sessions       
          create  tmp/sockets        
          create  tmp/cache          
          create  tmp/pids           
          create  Rakefile           
          create  README             
          create  app/controllers/application_controller.rb
          create  app/helpers/application_helper.rb        
          create  config/database.yml                      
          create  config/routes.rb                         
          create  config/locales/en.yml                    
          create  db/seeds.rb                              
          create  config/initializers/backtrace_silencers.rb
          create  config/initializers/inflections.rb        
          create  config/initializers/mime_types.rb         
          create  config/initializers/new_rails_defaults.rb 
          create  config/initializers/session_store.rb      
          create  config/environment.rb                     
          create  config/boot.rb                            
          create  config/environments/production.rb         
          create  config/environments/development.rb        
          create  config/environments/test.rb               
          create  script/about                              
          create  script/console                            
          create  script/dbconsole                          
          create  script/destroy                            
          create  script/generate                           
          create  script/runner                             
          create  script/server
          create  script/plugin
          create  script/performance/benchmarker
          create  script/performance/profiler
          create  test/test_helper.rb
          create  test/performance/browsing_test.rb
          create  public/404.html
          create  public/422.html
          create  public/500.html
          create  public/index.html
          create  public/favicon.ico
          create  public/robots.txt
          create  public/images/rails.png
          create  public/javascripts/prototype.js
          create  public/javascripts/effects.js
          create  public/javascripts/dragdrop.js
          create  public/javascripts/controls.js
          create  public/javascripts/application.js
          create  doc/README_FOR_APP
          create  log/server.log
          create  log/production.log
          create  log/development.log
          create  log/test.log
    $ cd newproject/
    /home/jarl/tmp/newproject
    $ ./script/about
    About your application's environment
    Ruby version              1.8.7 (x86_64-linux)
    RubyGems version          1.3.5
    Rack version              1.0
    Rails version             2.3.5
    Active Record version     2.3.5
    Active Resource version   2.3.5
    Action Mailer version     2.3.5
    Active Support version    2.3.5
    Application root          /home/jarl/tmp/newproject
    Environment               development
    Database adapter          sqlite3
    Database schema version   0
    $ ./script/generate scaffold test
          exists  app/models/
          exists  app/controllers/
          exists  app/helpers/
          create  app/views/tests
          exists  app/views/layouts/
          exists  test/functional/
          exists  test/unit/
          create  test/unit/helpers/
          exists  public/stylesheets/
          create  app/views/tests/index.html.erb
          create  app/views/tests/show.html.erb
          create  app/views/tests/new.html.erb
          create  app/views/tests/edit.html.erb
          create  app/views/layouts/tests.html.erb
          create  public/stylesheets/scaffold.css
          create  app/controllers/tests_controller.rb
          create  test/functional/tests_controller_test.rb
          create  app/helpers/tests_helper.rb
          create  test/unit/helpers/tests_helper_test.rb
           route  map.resources :tests
      dependency  model
          exists    app/models/
          exists    test/unit/
          exists    test/fixtures/
          create    app/models/test.rb
          create    test/unit/test_test.rb
          create    test/fixtures/tests.yml
          create    db/migrate
          create    db/migrate/20100510080045_create_tests.rb
    $ grep 'cache' config/environments/development.rb
    config.cache_classes = false
    $ ./script/console
    Loading development environment (Rails 2.3.5)
    &gt;&gt; app.get '/tests/'
    =&gt; 500
    &gt;&gt; app.get '/tests/'
    ThreadError: thread 0x7f9dc864b370 tried to join itself
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `lock'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `run'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
            from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:47:in `_call'
            from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:35:in `call'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:316:in `process'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:197:in `get'
            from (irb):2


I have verified that this also fails in 2.3.4, but everything is fine in 2.3.3

Jarl</original-body>
  <latest-body>Even the most basic application is broken in 2.3.4 and 2.3.5 in development environment (where `config.cache_classes = false`)

Here are steps to reproduce. notice it is on the second request (not the first one) it fails:

    $ rails newproject
          create                  
          create  app/controllers 
          create  app/helpers     
          create  app/models      
          create  app/views/layouts
          create  config/environments
          create  config/initializers
          create  config/locales     
          create  db                 
          create  doc                
          create  lib                
          create  lib/tasks          
          create  log                
          create  public/images      
          create  public/javascripts 
          create  public/stylesheets 
          create  script/performance 
          create  test/fixtures      
          create  test/functional    
          create  test/integration   
          create  test/performance   
          create  test/unit          
          create  vendor             
          create  vendor/plugins     
          create  tmp/sessions       
          create  tmp/sockets        
          create  tmp/cache          
          create  tmp/pids           
          create  Rakefile           
          create  README             
          create  app/controllers/application_controller.rb
          create  app/helpers/application_helper.rb        
          create  config/database.yml                      
          create  config/routes.rb                         
          create  config/locales/en.yml                    
          create  db/seeds.rb                              
          create  config/initializers/backtrace_silencers.rb
          create  config/initializers/inflections.rb        
          create  config/initializers/mime_types.rb         
          create  config/initializers/new_rails_defaults.rb 
          create  config/initializers/session_store.rb      
          create  config/environment.rb                     
          create  config/boot.rb                            
          create  config/environments/production.rb         
          create  config/environments/development.rb        
          create  config/environments/test.rb               
          create  script/about                              
          create  script/console                            
          create  script/dbconsole                          
          create  script/destroy                            
          create  script/generate                           
          create  script/runner                             
          create  script/server
          create  script/plugin
          create  script/performance/benchmarker
          create  script/performance/profiler
          create  test/test_helper.rb
          create  test/performance/browsing_test.rb
          create  public/404.html
          create  public/422.html
          create  public/500.html
          create  public/index.html
          create  public/favicon.ico
          create  public/robots.txt
          create  public/images/rails.png
          create  public/javascripts/prototype.js
          create  public/javascripts/effects.js
          create  public/javascripts/dragdrop.js
          create  public/javascripts/controls.js
          create  public/javascripts/application.js
          create  doc/README_FOR_APP
          create  log/server.log
          create  log/production.log
          create  log/development.log
          create  log/test.log
    $ cd newproject/
    /home/jarl/tmp/newproject
    $ ./script/about
    About your application's environment
    Ruby version              1.8.7 (x86_64-linux)
    RubyGems version          1.3.5
    Rack version              1.0
    Rails version             2.3.5
    Active Record version     2.3.5
    Active Resource version   2.3.5
    Action Mailer version     2.3.5
    Active Support version    2.3.5
    Application root          /home/jarl/tmp/newproject
    Environment               development
    Database adapter          sqlite3
    Database schema version   0
    $ ./script/generate scaffold test
          exists  app/models/
          exists  app/controllers/
          exists  app/helpers/
          create  app/views/tests
          exists  app/views/layouts/
          exists  test/functional/
          exists  test/unit/
          create  test/unit/helpers/
          exists  public/stylesheets/
          create  app/views/tests/index.html.erb
          create  app/views/tests/show.html.erb
          create  app/views/tests/new.html.erb
          create  app/views/tests/edit.html.erb
          create  app/views/layouts/tests.html.erb
          create  public/stylesheets/scaffold.css
          create  app/controllers/tests_controller.rb
          create  test/functional/tests_controller_test.rb
          create  app/helpers/tests_helper.rb
          create  test/unit/helpers/tests_helper_test.rb
           route  map.resources :tests
      dependency  model
          exists    app/models/
          exists    test/unit/
          exists    test/fixtures/
          create    app/models/test.rb
          create    test/unit/test_test.rb
          create    test/fixtures/tests.yml
          create    db/migrate
          create    db/migrate/20100510080045_create_tests.rb
    $ grep 'cache' config/environments/development.rb
    config.cache_classes = false
    $ ./script/console
    Loading development environment (Rails 2.3.5)
    &gt;&gt; app.get '/tests/'
    =&gt; 500
    &gt;&gt; app.get '/tests/'
    ThreadError: thread 0x7f9dc864b370 tried to join itself
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `lock'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `run'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
            from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:47:in `_call'
            from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:35:in `call'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:316:in `process'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:197:in `get'
            from (irb):2


I have verified that this also fails in 2.3.4, but everything is fine in 2.3.3

Jarl</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Even the most basic application is broken in 2.3.4 and 2.3.5 in
development environment (where &lt;code&gt;config.cache_classes =
false&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;Here are steps to reproduce. notice it is on the second request
(not the first one) it fails:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ rails newproject
      create                  
      create  app/controllers 
      create  app/helpers     
      create  app/models      
      create  app/views/layouts
      create  config/environments
      create  config/initializers
      create  config/locales     
      create  db                 
      create  doc                
      create  lib                
      create  lib/tasks          
      create  log                
      create  public/images      
      create  public/javascripts 
      create  public/stylesheets 
      create  script/performance 
      create  test/fixtures      
      create  test/functional    
      create  test/integration   
      create  test/performance   
      create  test/unit          
      create  vendor             
      create  vendor/plugins     
      create  tmp/sessions       
      create  tmp/sockets        
      create  tmp/cache          
      create  tmp/pids           
      create  Rakefile           
      create  README             
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb        
      create  config/database.yml                      
      create  config/routes.rb                         
      create  config/locales/en.yml                    
      create  db/seeds.rb                              
      create  config/initializers/backtrace_silencers.rb
      create  config/initializers/inflections.rb        
      create  config/initializers/mime_types.rb         
      create  config/initializers/new_rails_defaults.rb 
      create  config/initializers/session_store.rb      
      create  config/environment.rb                     
      create  config/boot.rb                            
      create  config/environments/production.rb         
      create  config/environments/development.rb        
      create  config/environments/test.rb               
      create  script/about                              
      create  script/console                            
      create  script/dbconsole                          
      create  script/destroy                            
      create  script/generate                           
      create  script/runner                             
      create  script/server
      create  script/plugin
      create  script/performance/benchmarker
      create  script/performance/profiler
      create  test/test_helper.rb
      create  test/performance/browsing_test.rb
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/index.html
      create  public/favicon.ico
      create  public/robots.txt
      create  public/images/rails.png
      create  public/javascripts/prototype.js
      create  public/javascripts/effects.js
      create  public/javascripts/dragdrop.js
      create  public/javascripts/controls.js
      create  public/javascripts/application.js
      create  doc/README_FOR_APP
      create  log/server.log
      create  log/production.log
      create  log/development.log
      create  log/test.log
$ cd newproject/
/home/jarl/tmp/newproject
$ ./script/about
About your application's environment
Ruby version              1.8.7 (x86_64-linux)
RubyGems version          1.3.5
Rack version              1.0
Rails version             2.3.5
Active Record version     2.3.5
Active Resource version   2.3.5
Action Mailer version     2.3.5
Active Support version    2.3.5
Application root          /home/jarl/tmp/newproject
Environment               development
Database adapter          sqlite3
Database schema version   0
$ ./script/generate scaffold test
      exists  app/models/
      exists  app/controllers/
      exists  app/helpers/
      create  app/views/tests
      exists  app/views/layouts/
      exists  test/functional/
      exists  test/unit/
      create  test/unit/helpers/
      exists  public/stylesheets/
      create  app/views/tests/index.html.erb
      create  app/views/tests/show.html.erb
      create  app/views/tests/new.html.erb
      create  app/views/tests/edit.html.erb
      create  app/views/layouts/tests.html.erb
      create  public/stylesheets/scaffold.css
      create  app/controllers/tests_controller.rb
      create  test/functional/tests_controller_test.rb
      create  app/helpers/tests_helper.rb
      create  test/unit/helpers/tests_helper_test.rb
       route  map.resources :tests
  dependency  model
      exists    app/models/
      exists    test/unit/
      exists    test/fixtures/
      create    app/models/test.rb
      create    test/unit/test_test.rb
      create    test/fixtures/tests.yml
      create    db/migrate
      create    db/migrate/20100510080045_create_tests.rb
$ grep 'cache' config/environments/development.rb
config.cache_classes = false
$ ./script/console
Loading development environment (Rails 2.3.5)
&amp;gt;&amp;gt; app.get '/tests/'
=&amp;gt; 500
&amp;gt;&amp;gt; app.get '/tests/'
ThreadError: thread 0x7f9dc864b370 tried to join itself
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `lock'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `run'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
        from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:47:in `_call'
        from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:35:in `call'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:316:in `process'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:197:in `get'
        from (irb):2&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I have verified that this also fails in 2.3.4, but everything is
fine in 2.3.3&lt;/p&gt;
&lt;p&gt;Jarl&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Even the most basic application is broken in 2.3.4 and 2.3.5 in development environment (where `config.cache_classes = false`)

Here are steps to reproduce. notice it is on the second request (not the first one) it fails:

    $ rails newproject
          create                  
          create  app/controllers 
          create  app/helpers     
          create  app/models      
          create  app/views/layouts
          create  config/environments
          create  config/initializers
          create  config/locales     
          create  db                 
          create  doc                
          create  lib                
          create  lib/tasks          
          create  log                
          create  public/images      
          create  public/javascripts 
          create  public/stylesheets 
          create  script/performance 
          create  test/fixtures      
          create  test/functional    
          create  test/integration   
          create  test/performance   
          create  test/unit          
          create  vendor             
          create  vendor/plugins     
          create  tmp/sessions       
          create  tmp/sockets        
          create  tmp/cache          
          create  tmp/pids           
          create  Rakefile           
          create  README             
          create  app/controllers/application_controller.rb
          create  app/helpers/application_helper.rb        
          create  config/database.yml                      
          create  config/routes.rb                         
          create  config/locales/en.yml                    
          create  db/seeds.rb                              
          create  config/initializers/backtrace_silencers.rb
          create  config/initializers/inflections.rb        
          create  config/initializers/mime_types.rb         
          create  config/initializers/new_rails_defaults.rb 
          create  config/initializers/session_store.rb      
          create  config/environment.rb                     
          create  config/boot.rb                            
          create  config/environments/production.rb         
          create  config/environments/development.rb        
          create  config/environments/test.rb               
          create  script/about                              
          create  script/console                            
          create  script/dbconsole                          
          create  script/destroy                            
          create  script/generate                           
          create  script/runner                             
          create  script/server
          create  script/plugin
          create  script/performance/benchmarker
          create  script/performance/profiler
          create  test/test_helper.rb
          create  test/performance/browsing_test.rb
          create  public/404.html
          create  public/422.html
          create  public/500.html
          create  public/index.html
          create  public/favicon.ico
          create  public/robots.txt
          create  public/images/rails.png
          create  public/javascripts/prototype.js
          create  public/javascripts/effects.js
          create  public/javascripts/dragdrop.js
          create  public/javascripts/controls.js
          create  public/javascripts/application.js
          create  doc/README_FOR_APP
          create  log/server.log
          create  log/production.log
          create  log/development.log
          create  log/test.log
    $ cd newproject/
    /home/jarl/tmp/newproject
    $ ./script/about
    About your application's environment
    Ruby version              1.8.7 (x86_64-linux)
    RubyGems version          1.3.5
    Rack version              1.0
    Rails version             2.3.5
    Active Record version     2.3.5
    Active Resource version   2.3.5
    Action Mailer version     2.3.5
    Active Support version    2.3.5
    Application root          /home/jarl/tmp/newproject
    Environment               development
    Database adapter          sqlite3
    Database schema version   0
    $ ./script/generate scaffold test
          exists  app/models/
          exists  app/controllers/
          exists  app/helpers/
          create  app/views/tests
          exists  app/views/layouts/
          exists  test/functional/
          exists  test/unit/
          create  test/unit/helpers/
          exists  public/stylesheets/
          create  app/views/tests/index.html.erb
          create  app/views/tests/show.html.erb
          create  app/views/tests/new.html.erb
          create  app/views/tests/edit.html.erb
          create  app/views/layouts/tests.html.erb
          create  public/stylesheets/scaffold.css
          create  app/controllers/tests_controller.rb
          create  test/functional/tests_controller_test.rb
          create  app/helpers/tests_helper.rb
          create  test/unit/helpers/tests_helper_test.rb
           route  map.resources :tests
      dependency  model
          exists    app/models/
          exists    test/unit/
          exists    test/fixtures/
          create    app/models/test.rb
          create    test/unit/test_test.rb
          create    test/fixtures/tests.yml
          create    db/migrate
          create    db/migrate/20100510080045_create_tests.rb
    $ grep 'cache' config/environments/development.rb
    config.cache_classes = false
    $ ./script/console
    Loading development environment (Rails 2.3.5)
    &gt;&gt; app.get '/tests/'
    =&gt; 500
    &gt;&gt; app.get '/tests/'
    ThreadError: thread 0x7f9dc864b370 tried to join itself
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `lock'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `run'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
            from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:47:in `_call'
            from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:35:in `call'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:316:in `process'
            from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:197:in `get'
            from (irb):2


I have verified that this also fails in 2.3.4, but everything is fine in 2.3.3

Jarl</body>
      <body-html>&lt;div&gt;&lt;p&gt;Even the most basic application is broken in 2.3.4 and 2.3.5 in
development environment (where &lt;code&gt;config.cache_classes =
false&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;Here are steps to reproduce. notice it is on the second request
(not the first one) it fails:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ rails newproject
      create                  
      create  app/controllers 
      create  app/helpers     
      create  app/models      
      create  app/views/layouts
      create  config/environments
      create  config/initializers
      create  config/locales     
      create  db                 
      create  doc                
      create  lib                
      create  lib/tasks          
      create  log                
      create  public/images      
      create  public/javascripts 
      create  public/stylesheets 
      create  script/performance 
      create  test/fixtures      
      create  test/functional    
      create  test/integration   
      create  test/performance   
      create  test/unit          
      create  vendor             
      create  vendor/plugins     
      create  tmp/sessions       
      create  tmp/sockets        
      create  tmp/cache          
      create  tmp/pids           
      create  Rakefile           
      create  README             
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb        
      create  config/database.yml                      
      create  config/routes.rb                         
      create  config/locales/en.yml                    
      create  db/seeds.rb                              
      create  config/initializers/backtrace_silencers.rb
      create  config/initializers/inflections.rb        
      create  config/initializers/mime_types.rb         
      create  config/initializers/new_rails_defaults.rb 
      create  config/initializers/session_store.rb      
      create  config/environment.rb                     
      create  config/boot.rb                            
      create  config/environments/production.rb         
      create  config/environments/development.rb        
      create  config/environments/test.rb               
      create  script/about                              
      create  script/console                            
      create  script/dbconsole                          
      create  script/destroy                            
      create  script/generate                           
      create  script/runner                             
      create  script/server
      create  script/plugin
      create  script/performance/benchmarker
      create  script/performance/profiler
      create  test/test_helper.rb
      create  test/performance/browsing_test.rb
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/index.html
      create  public/favicon.ico
      create  public/robots.txt
      create  public/images/rails.png
      create  public/javascripts/prototype.js
      create  public/javascripts/effects.js
      create  public/javascripts/dragdrop.js
      create  public/javascripts/controls.js
      create  public/javascripts/application.js
      create  doc/README_FOR_APP
      create  log/server.log
      create  log/production.log
      create  log/development.log
      create  log/test.log
$ cd newproject/
/home/jarl/tmp/newproject
$ ./script/about
About your application's environment
Ruby version              1.8.7 (x86_64-linux)
RubyGems version          1.3.5
Rack version              1.0
Rails version             2.3.5
Active Record version     2.3.5
Active Resource version   2.3.5
Action Mailer version     2.3.5
Active Support version    2.3.5
Application root          /home/jarl/tmp/newproject
Environment               development
Database adapter          sqlite3
Database schema version   0
$ ./script/generate scaffold test
      exists  app/models/
      exists  app/controllers/
      exists  app/helpers/
      create  app/views/tests
      exists  app/views/layouts/
      exists  test/functional/
      exists  test/unit/
      create  test/unit/helpers/
      exists  public/stylesheets/
      create  app/views/tests/index.html.erb
      create  app/views/tests/show.html.erb
      create  app/views/tests/new.html.erb
      create  app/views/tests/edit.html.erb
      create  app/views/layouts/tests.html.erb
      create  public/stylesheets/scaffold.css
      create  app/controllers/tests_controller.rb
      create  test/functional/tests_controller_test.rb
      create  app/helpers/tests_helper.rb
      create  test/unit/helpers/tests_helper_test.rb
       route  map.resources :tests
  dependency  model
      exists    app/models/
      exists    test/unit/
      exists    test/fixtures/
      create    app/models/test.rb
      create    test/unit/test_test.rb
      create    test/fixtures/tests.yml
      create    db/migrate
      create    db/migrate/20100510080045_create_tests.rb
$ grep 'cache' config/environments/development.rb
config.cache_classes = false
$ ./script/console
Loading development environment (Rails 2.3.5)
&amp;gt;&amp;gt; app.get '/tests/'
=&amp;gt; 500
&amp;gt;&amp;gt; app.get '/tests/'
ThreadError: thread 0x7f9dc864b370 tried to join itself
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `lock'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:31:in `run'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
        from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:47:in `_call'
        from /var/lib/gems/1.8/gems/rack-1.0.1/lib/rack/lint.rb:35:in `call'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:316:in `process'
        from /var/lib/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/integration.rb:197:in `get'
        from (irb):2&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I have verified that this also fails in 2.3.4, but everything is
fine in 2.3.3&lt;/p&gt;
&lt;p&gt;Jarl&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-10T09:54:04+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>cache_classes thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-10T09:54:08+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">1</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The issue here is that the integration test runner doesn't call close on the body, thereby leaving the reloader mutex locked.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The issue here is that the integration test runner doesn't call
close on the body, thereby leaving the reloader mutex locked.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-10T10:27:10+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: cache_classes thread
:state: new
:milestone: 
:title: config.cache_classes = false is broken in 2.3.4 and 2.3.5
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash cache_classes thread</tag>
      <title>Integration Test runner doesn't call #close on the response body</title>
      <updated-at type="datetime">2010-05-10T10:27:14+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">2</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ticket #3153 may be related to this ticket.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ticket &lt;a href=&quot;/projects/8994/tickets/3153&quot; title=
&quot;Ticket #3153&quot;&gt;#3153&lt;/a&gt; may be related to this ticket.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-10T10:29:17+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash cache_classes thread
:title: &quot;Integration Test runner doesn't call #close on the response body&quot;
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>cache_classes thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-10T10:29:19+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">3</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Oops I didn't intend to change neither title nor tags, it must have been because I updated a not-updated ticket. I don't know how to change the title back again.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Oops I didn't intend to change neither title nor tags, it must
have been because I updated a not-updated ticket. I don't know how
to change the title back again.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-10T10:34:14+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: cache_classes thread
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash cache_classes thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-10T10:34:15+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">4</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Attached is code patch.

Providing a test for the patch is really difficult because all the existing integration_test mock the actual call.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached is code patch.&lt;/p&gt;
&lt;p&gt;Providing a test for the patch is really difficult because all
the existing integration_test mock the actual call.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-10T11:54:42+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash cache_classes thread
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash cache_classes patch thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-10T11:54:52+01:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">5</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T02:33:01+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash cache_classes patch thread
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash-review cache_classes patch thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-16T02:33:04+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">6</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 verified

The patch seems to be a simple and applies cleanly. All tests pass.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 verified&lt;/p&gt;
&lt;p&gt;The patch seems to be a simple and applies cleanly. All tests
pass.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T02:36:13+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash-review cache_classes patch thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-16T02:36:15+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">7</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20088)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20088&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T02:41:12+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash-review cache_classes patch thread
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash bugmash-review cache_classes patch thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-16T02:41:12+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">8</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [3570f3e7f692e1d43e6be4d65bc6de986748cab8]) Fix broken integration test in 2.x [#4565 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/3570f3e7f692e1d43e6be4d65bc6de986748cab8</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/3570f3e7f692e1d43e6be4d65bc6de986748cab8&quot;
title=
&quot;Changeset [3570f3e7f692e1d43e6be4d65bc6de986748cab8]&quot;&gt;[3570f3e7f692e1d43e6be4d65bc6de986748cab8]&lt;/a&gt;)
Fix broken integration test in 2.x [&lt;a href=
&quot;/projects/8994/tickets/4565&quot; title=&quot;Ticket #4565&quot;&gt;#4565&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/3570f3e7f692e1d43e6be4d65bc6de986748cab8&quot;&gt;
http://github.com/rails/rails/commit/3570f3e7f692e1d43e6be4d65bc6de...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-16T09:45:06+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>bugmash bugmash-review cache_classes patch thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-16T09:45:07+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">9</version>
      <user-name>Repository</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-16T15:07:00+01:00</created-at>
      <creator-id type="integer">55442</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash bugmash-review cache_classes patch thread
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4565</number>
      <permalink>configcache_classes-false-is-broken-in-234-and-235</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>bugmash cache_classes patch thread</tag>
      <title>config.cache_classes = false is broken in 2.3.4 and 2.3.5</title>
      <updated-at type="datetime">2010-05-16T15:07:02+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">10</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jarl Friis</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4565</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>c81aa2e3a94a046da1934cd88a0d630a88b272e5</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-10T11:54:42+01:00</created-at>
      <filename>integration_test_fix_against_2-3-stable.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">515244</id>
      <size type="integer">917</size>
      <uploader-id type="integer">40263</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/515244/integration_test_fix_against_2-3-stable.diff</url>
    </attachment>
  </attachments>
</ticket>
