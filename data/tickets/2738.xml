<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-05-29T16:45:09+01:00</created-at>
  <creator-id type="integer">794</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">2738</number>
  <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>duplicate</state>
  <tag>3.0 action_view assets asset_tag_helper caching master zero</tag>
  <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
  <updated-at type="datetime">2010-10-15T23:01:33+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">25</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Christos Zisopoulos</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>There appears to be a bug with the caching version of @stylesheet_link_tag@ that results in a @all.css@ cache file of zero bytes (when run in production) if a missing css filename is passed as a parameter

@@@ ruby
  stylesheet_link_tag('application', 'missing_css_file', :cache =&gt; true)
@@@

What happens is that the first time around after a deploy to production, a @Errno::ENOENT@ is raised by the code trying to join the missing file with the rest of the CSS files. However, @all.css@ has already been opened for writing and, after the exception is raised and not handled, a zero length @all.css@ file is left behind. 

Subsequent requests serve that zero length file instead, and so we get an unexpected &quot;CSS naked day&quot;:http://naked.dustindiaz.com/

Attached is a test case and a patch. 

I've opted for ignoring the missing asset files and creating the cached assets file anyway, but it might be better to just remove the cache file altogether and raise an exception like this

@@@ ruby
  begin
    File.open(joined_asset_path, &quot;w+&quot;) { |cache| cache.write(join_asset_file_contents(asset_paths)) }
  rescue Exception =&gt; e
    File.unlink(joined_asset_path)
    raise e
  end
@@@

What do people think? I can upload that patch instead, if it is better.

Patch against master.</original-body>
  <latest-body>There appears to be a bug with the caching version of @stylesheet_link_tag@ that results in a @all.css@ cache file of zero bytes (when run in production) if a missing css filename is passed as a parameter

@@@ ruby
  stylesheet_link_tag('application', 'missing_css_file', :cache =&gt; true)
@@@

What happens is that the first time around after a deploy to production, a @Errno::ENOENT@ is raised by the code trying to join the missing file with the rest of the CSS files. However, @all.css@ has already been opened for writing and, after the exception is raised and not handled, a zero length @all.css@ file is left behind. 

Subsequent requests serve that zero length file instead, and so we get an unexpected &quot;CSS naked day&quot;:http://naked.dustindiaz.com/

Attached is a test case and a patch. 

I've opted for ignoring the missing asset files and creating the cached assets file anyway, but it might be better to just remove the cache file altogether and raise an exception like this

@@@ ruby
  begin
    File.open(joined_asset_path, &quot;w+&quot;) { |cache| cache.write(join_asset_file_contents(asset_paths)) }
  rescue Exception =&gt; e
    File.unlink(joined_asset_path)
    raise e
  end
@@@

What do people think? I can upload that patch instead, if it is better.

Patch against master.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;There appears to be a bug with the caching version of
&lt;code&gt;stylesheet_link_tag&lt;/code&gt; that results in a
&lt;code&gt;all.css&lt;/code&gt; cache file of zero bytes (when run in
production) if a missing css filename is passed as a parameter&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  stylesheet_link_tag('application', 'missing_css_file', :cache =&amp;gt; true)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What happens is that the first time around after a deploy to
production, a &lt;code&gt;Errno::ENOENT&lt;/code&gt; is raised by the code
trying to join the missing file with the rest of the CSS files.
However, &lt;code&gt;all.css&lt;/code&gt; has already been opened for writing
and, after the exception is raised and not handled, a zero length
&lt;code&gt;all.css&lt;/code&gt; file is left behind.&lt;/p&gt;
&lt;p&gt;Subsequent requests serve that zero length file instead, and so
we get an unexpected &lt;a href=&quot;http://naked.dustindiaz.com/&quot;&gt;CSS
naked day&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Attached is a test case and a patch.&lt;/p&gt;
&lt;p&gt;I've opted for ignoring the missing asset files and creating the
cached assets file anyway, but it might be better to just remove
the cache file altogether and raise an exception like this&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  begin
    File.open(joined_asset_path, &amp;quot;w+&amp;quot;) { |cache| cache.write(join_asset_file_contents(asset_paths)) }
  rescue Exception =&amp;gt; e
    File.unlink(joined_asset_path)
    raise e
  end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What do people think? I can upload that patch instead, if it is
better.&lt;/p&gt;
&lt;p&gt;Patch against master.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>There appears to be a bug with the caching version of @stylesheet_link_tag@ that results in a @all.css@ cache file of zero bytes (when run in production) if a missing css filename is passed as a parameter

@@@ ruby
  stylesheet_link_tag('application', 'missing_css_file', :cache =&gt; true)
@@@

What happens is that the first time around after a deploy to production, a @Errno::ENOENT@ is raised by the code trying to join the missing file with the rest of the CSS files. However, @all.css@ has already been opened for writing and, after the exception is raised and not handled, a zero length @all.css@ file is left behind. 

Subsequent requests serve that zero length file instead, and so we get an unexpected &quot;CSS naked day&quot;:http://naked.dustindiaz.com/

Attached is a test case and a patch. 

I've opted for ignoring the missing asset files and creating the cached assets file anyway, but it might be better to just remove the cache file altogether and raise an exception like this

@@@ ruby
  begin
    File.open(joined_asset_path, &quot;w+&quot;) { |cache| cache.write(join_asset_file_contents(asset_paths)) }
  rescue Exception =&gt; e
    File.unlink(joined_asset_path)
    raise e
  end
@@@

What do people think? I can upload that patch instead, if it is better.

Patch against master.</body>
      <body-html>&lt;div&gt;&lt;p&gt;There appears to be a bug with the caching version of
&lt;code&gt;stylesheet_link_tag&lt;/code&gt; that results in a
&lt;code&gt;all.css&lt;/code&gt; cache file of zero bytes (when run in
production) if a missing css filename is passed as a parameter&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  stylesheet_link_tag('application', 'missing_css_file', :cache =&amp;gt; true)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;What happens is that the first time around after a deploy to
production, a &lt;code&gt;Errno::ENOENT&lt;/code&gt; is raised by the code
trying to join the missing file with the rest of the CSS files.
However, &lt;code&gt;all.css&lt;/code&gt; has already been opened for writing
and, after the exception is raised and not handled, a zero length
&lt;code&gt;all.css&lt;/code&gt; file is left behind.&lt;/p&gt;
&lt;p&gt;Subsequent requests serve that zero length file instead, and so
we get an unexpected &lt;a href=&quot;http://naked.dustindiaz.com/&quot;&gt;CSS
naked day&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Attached is a test case and a patch.&lt;/p&gt;
&lt;p&gt;I've opted for ignoring the missing asset files and creating the
cached assets file anyway, but it might be better to just remove
the cache file altogether and raise an exception like this&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;  begin
    File.open(joined_asset_path, &quot;w+&quot;) { |cache| cache.write(join_asset_file_contents(asset_paths)) }
  rescue Exception =&amp;gt; e
    File.unlink(joined_asset_path)
    raise e
  end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;What do people think? I can upload that patch instead, if it is
better.&lt;/p&gt;
&lt;p&gt;Patch against master.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-29T16:45:09+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-05-29T16:45:14+01:00</updated-at>
      <user-id type="integer">794</user-id>
      <version type="integer">1</version>
      <user-name>Christos Zisopoulos</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T00:47:37+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-10T00:47:37+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">2</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>We actually have File.atomic_write for this.

        #   File.atomic_write(&quot;/data/something.important&quot;, &quot;/data/tmp&quot;) do |f|
        #     file.write(&quot;hello&quot;)
        #   end

the js and css caching should both probably be using that</body>
      <body-html>&lt;div&gt;&lt;p&gt;We actually have File.atomic_write for this.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    #   File.atomic_write(&quot;/data/something.important&quot;, &quot;/data/tmp&quot;) do |f|
    #     file.write(&quot;hello&quot;)
    #   end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;the js and css caching should both probably be using that&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T00:50:26+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-10T00:50:26+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">3</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK. Cool.

I'll have a look at @atomic_write@ and update the patch as required</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK. Cool.&lt;/p&gt;
&lt;p&gt;I'll have a look at &lt;code&gt;atomic_write&lt;/code&gt; and update the
patch as required&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T00:57:35+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-10T00:57:35+01:00</updated-at>
      <user-id type="integer">794</user-id>
      <version type="integer">4</version>
      <user-name>Christos Zisopoulos</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>You shouldn't use `File#readable?` because it doesn't make sense on Windows, in fact that method is used to check if the file is readable by the effective user id of the current process.

I suggest `File#exist?` instead.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You shouldn't use &lt;code&gt;File#readable?&lt;/code&gt; because it doesn't
make sense on Windows, in fact that method is used to check if the
file is readable by the effective user id of the current
process.&lt;/p&gt;
&lt;p&gt;I suggest &lt;code&gt;File#exist?&lt;/code&gt; instead.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-10T10:22:15+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-10T10:22:15+01:00</updated-at>
      <user-id type="integer">17296</user-id>
      <version type="integer">5</version>
      <user-name>Luca Guidi</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've had a go using @atomic_write@ and it only ensures that the asset cache file is not created. It will not take care of any exceptions raised when trying to read non-existent source asset files.

I think it boils down to these two options:

1) A missing source asset file *always* raises an exception and never creates a partial asset cache file.

2) Missing source asset files are ignored and the asset cache file is created only from the available source asset files.

If we went with option #1 there is the additional complication of &quot;should the exception be raised always, whether we are caching asset files or not?&quot; 

That way you can spot the missing file(s) during development and not end up with a production-only exception.

My vote is for solution #1, but I wouldn't mind some additional input. I have the patch for solution #1 written already, just adding some tests.

@Luca Thanks for pointing that out. The definitive patch will use @.exists?@ for Windows compatibility.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've had a go using &lt;code&gt;atomic_write&lt;/code&gt; and it only
ensures that the asset cache file is not created. It will not take
care of any exceptions raised when trying to read non-existent
source asset files.&lt;/p&gt;
&lt;p&gt;I think it boils down to these two options:&lt;/p&gt;
&lt;p&gt;1) A missing source asset file &lt;em&gt;always&lt;/em&gt; raises an
exception and never creates a partial asset cache file.&lt;/p&gt;
&lt;p&gt;2) Missing source asset files are ignored and the asset cache
file is created only from the available source asset files.&lt;/p&gt;
&lt;p&gt;If we went with option &lt;a href=&quot;/projects/8994/tickets/1&quot; title=
&quot;Ticket #1&quot;&gt;#1&lt;/a&gt; there is the additional complication of &quot;should
the exception be raised always, whether we are caching asset files
or not?&quot;&lt;/p&gt;
&lt;p&gt;That way you can spot the missing file(s) during development and
not end up with a production-only exception.&lt;/p&gt;
&lt;p&gt;My vote is for solution &lt;a href=&quot;/projects/8994/tickets/1&quot;
title=&quot;Ticket #1&quot;&gt;#1&lt;/a&gt;, but I wouldn't mind some additional
input. I have the patch for solution &lt;a href=
&quot;/projects/8994/tickets/1&quot; title=&quot;Ticket #1&quot;&gt;#1&lt;/a&gt; written
already, just adding some tests.&lt;/p&gt;
&lt;p&gt;@Luca Thanks for pointing that out. The definitive patch will
use &lt;code&gt;.exists?&lt;/code&gt; for Windows compatibility.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-12T14:26:59+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-12T14:26:59+01:00</updated-at>
      <user-id type="integer">794</user-id>
      <version type="integer">6</version>
      <user-name>Christos Zisopoulos</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>While trying to write tests for **solution 1** I've discovered that a lot of the @asset_tag_helper@ test make references to non-existent stylesheets/js files that break the tests because they only check for the return tags, not the actual files.

Writing the tests for **solution 1** would require a large amount of changes to the actual test suite for @asset_tag_helper@

Is it worth the effort?</body>
      <body-html>&lt;div&gt;&lt;p&gt;While trying to write tests for &lt;strong&gt;solution 1&lt;/strong&gt; I've
discovered that a lot of the &lt;code&gt;asset_tag_helper&lt;/code&gt; test
make references to non-existent stylesheets/js files that break the
tests because they only check for the return tags, not the actual
files.&lt;/p&gt;
&lt;p&gt;Writing the tests for &lt;strong&gt;solution 1&lt;/strong&gt; would require
a large amount of changes to the actual test suite for
&lt;code&gt;asset_tag_helper&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Is it worth the effort?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-12T18:04:43+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-12T18:04:43+01:00</updated-at>
      <user-id type="integer">794</user-id>
      <version type="integer">7</version>
      <user-name>Christos Zisopoulos</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I definitely prefer option 1, have a go at what the test changes will look like.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I definitely prefer option 1, have a go at what the test changes
will look like.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-14T02:59:01+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-14T02:59:01+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">8</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Done. New patch attached.

An exception will be raised if a local javascript/stylesheet file included by the stylesheet_link_tag or javascript_include_tag can not be found.

When caching is enabled, we use atomic_write to ensure that the cache file is not created with zero length.

As I had to rework a large chunk of the asset_tag_helper test suit, I merged into it my related patch #2739 which improves the test suite. Feel free to close that ticket.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Done. New patch attached.&lt;/p&gt;
&lt;p&gt;An exception will be raised if a local javascript/stylesheet
file included by the stylesheet_link_tag or javascript_include_tag
can not be found.&lt;/p&gt;
&lt;p&gt;When caching is enabled, we use atomic_write to ensure that the
cache file is not created with zero length.&lt;/p&gt;
&lt;p&gt;As I had to rework a large chunk of the asset_tag_helper test
suit, I merged into it my related patch &lt;a href=
&quot;/projects/8994/tickets/2739&quot; title=&quot;Ticket #2739&quot;&gt;#2739&lt;/a&gt; which
improves the test suite. Feel free to close that ticket.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-15T23:48:01+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-15T23:48:01+01:00</updated-at>
      <user-id type="integer">794</user-id>
      <version type="integer">9</version>
      <user-name>Christos Zisopoulos</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Christos, in your patch, #ensure_stylesheet_sources! is declared twice, please can you clean the code?
Applied, all tests pass.
+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;Christos, in your patch, #ensure_stylesheet_sources! is declared
twice, please can you clean the code?&lt;br&gt;
Applied, all tests pass.&lt;br&gt;
+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-16T10:04:12+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-16T10:04:18+01:00</updated-at>
      <user-id type="integer">17296</user-id>
      <version type="integer">10</version>
      <user-name>Luca Guidi</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Oh sorry, I'm wrong. It isn't declared twice, but hey have very similar code..</body>
      <body-html>&lt;div&gt;&lt;p&gt;Oh sorry, I'm wrong. It isn't declared twice, but hey have very
similar code..&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-16T10:09:15+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-16T10:09:19+01:00</updated-at>
      <user-id type="integer">17296</user-id>
      <version type="integer">11</version>
      <user-name>Luca Guidi</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [18a97a66017452dbe6cf6881c69d7a7dedc7a7bd]) Handle missing javascript/stylesheets assets by raising an exception

An exception will be raised if a local javascript/stylesheet file included
by the stylesheet_link_tag or javascript_include_tag can not be found.

When caching is enabled, we use atomic_write to ensure that the cache file
is not created with zero length.

Signed-off-by: Michael Koziarski &lt;michael@koziarski.com&gt;

[#2738 state:committed]
http://github.com/rails/rails/commit/18a97a66017452dbe6cf6881c69d7a7dedc7a7bd</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/18a97a66017452dbe6cf6881c69d7a7dedc7a7bd&quot;
title=
&quot;Changeset [18a97a66017452dbe6cf6881c69d7a7dedc7a7bd]&quot;&gt;[18a97a66017452dbe6cf6881c69d7a7dedc7a7bd]&lt;/a&gt;)
Handle missing javascript/stylesheets assets by raising an
exception&lt;/p&gt;
&lt;p&gt;An exception will be raised if a local javascript/stylesheet
file included&lt;br&gt;
by the stylesheet_link_tag or javascript_include_tag can not be
found.&lt;/p&gt;
&lt;p&gt;When caching is enabled, we use atomic_write to ensure that the
cache file&lt;br&gt;
is not created with zero length.&lt;/p&gt;
&lt;p&gt;Signed-off-by: Michael Koziarski &lt;a href=
&quot;mailto:michael@koziarski.com&quot;&gt;michael@koziarski.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/2738&quot; title=
&quot;Ticket #2738&quot;&gt;#2738&lt;/a&gt; state:committed] &lt;a href=
&quot;http://github.com/rails/rails/commit/18a97a66017452dbe6cf6881c69d7a7dedc7a7bd&quot;&gt;
http://github.com/rails/rails/commit/18a97a66017452dbe6cf6881c69d7a...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-06-26T06:03:25+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-06-26T06:03:26+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">12</version>
      <user-name>Repository</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I don't think it makes sense to have stylesheet_link_tag and javascript_include_tag assert the presence of the files when they are not being cached or concatenated.

My reason for this, is that doing so makes it impossible to have the css or javascript be generated dynamically through an action or middleware.

Am I alone in thinking that the call to ensure_stylesheet_sources! should be removed?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I don't think it makes sense to have stylesheet_link_tag and
javascript_include_tag assert the presence of the files when they
are not being cached or concatenated.&lt;/p&gt;
&lt;p&gt;My reason for this, is that doing so makes it impossible to have
the css or javascript be generated dynamically through an action or
middleware.&lt;/p&gt;
&lt;p&gt;Am I alone in thinking that the call to
ensure_stylesheet_sources! should be removed?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-20T07:52:42+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-07-20T07:52:44+01:00</updated-at>
      <user-id type="integer">21958</user-id>
      <version type="integer">13</version>
      <user-name>Sam Pohlenz</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Another situation where this breaks is in situations where a document root other than RAILS_ROOT/public is used (e.g. for multi-site apps).

A less desirable alternative would be to expose the &quot;dumb&quot; versions of these helpers (javascript_src_tag, stylesheet_tag) as public.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Another situation where this breaks is in situations where a
document root other than RAILS_ROOT/public is used (e.g. for
multi-site apps).&lt;/p&gt;
&lt;p&gt;A less desirable alternative would be to expose the &quot;dumb&quot;
versions of these helpers (javascript_src_tag, stylesheet_tag) as
public.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-20T08:11:39+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-07-20T08:11:40+01:00</updated-at>
      <user-id type="integer">21958</user-id>
      <version type="integer">14</version>
      <user-name>Sam Pohlenz</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Sam,

I'd take a patch which moved that check to be solely there when :cache
or :concatenate is true</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Sam,&lt;/p&gt;
&lt;p&gt;I'd take a patch which moved that check to be solely there when
:cache&lt;br&gt;
or :concatenate is true&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-20T10:52:58+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-07-20T10:52:59+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">15</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The idea of my original patch was to catch the missing asset files in development mode, so that you don't deploy to production and discover a missing asset file (either by way of the exception, or by way of the messed up CSS).

Wouldn't it make more sense to explicitly declare dynamic stylesheets as such?

@@@ ruby
stylesheet_link_tag('css_controller_name/dynamic.css', :dynamic =&gt; true)
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;The idea of my original patch was to catch the missing asset
files in development mode, so that you don't deploy to production
and discover a missing asset file (either by way of the exception,
or by way of the messed up CSS).&lt;/p&gt;
&lt;p&gt;Wouldn't it make more sense to explicitly declare dynamic
stylesheets as such?&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;stylesheet_link_tag('css_controller_name/dynamic.css', :dynamic =&amp;gt; true)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-20T11:10:33+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-07-20T11:10:35+01:00</updated-at>
      <user-id type="integer">794</user-id>
      <version type="integer">16</version>
      <user-name>Christos Zisopoulos</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>We can cover both of these cases by raising when :cache is true,
irrespective of the value of perform_caching</body>
      <body-html>&lt;div&gt;&lt;p&gt;We can cover both of these cases by raising when :cache is
true,&lt;br&gt;
irrespective of the value of perform_caching&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-20T11:15:52+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-07-20T11:15:53+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">17</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Here's the patch.

Missing source files will be still be caught if the cache or concat options are given.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here's the patch.&lt;/p&gt;
&lt;p&gt;Missing source files will be still be caught if the cache or
concat options are given.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-20T12:56:34+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-07-20T12:56:40+01:00</updated-at>
      <user-id type="integer">21958</user-id>
      <version type="integer">18</version>
      <user-name>Sam Pohlenz</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Opening and targetting 3.0</body>
      <body-html>&lt;div&gt;&lt;p&gt;Opening and targetting 3.0&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-20T23:15:37+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
:milestone: 41987
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-07-20T23:43:00+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">19</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>This bit us too. We had a nonexistent javascript file that was generated outside of javascript_include_tag.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This bit us too. We had a nonexistent javascript file that was
generated outside of javascript_include_tag.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-03T19:58:30+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2009-09-03T19:58:31+01:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">20</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Patch doesn't apply anymore.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Patch doesn't apply anymore.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T02:21:55+00:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: action_view assets asset_tag_helper caching master zero
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2010-01-17T02:21:58+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">21</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>If it bit josh, he can shepherd this one in.</body>
      <body-html>&lt;div&gt;&lt;p&gt;If it bit josh, he can shepherd this one in.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T02:30:03+00:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 141
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2010-01-17T02:30:05+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">22</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>This has been applied already, in a modified way. Can close this ticket.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This has been applied already, in a modified way. Can close this
ticket.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T02:48:56+00:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2010-01-17T02:48:57+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">23</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-17T02:50:35+00:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>duplicate</state>
      <tag>3.0 action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2010-01-17T02:50:36+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">24</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:33+01:00</created-at>
      <creator-id type="integer">794</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">2738</number>
      <permalink>patch-fix-zero-length-stylesheet-cache-files-bug-in-case-of-missing-css-files</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>duplicate</state>
      <tag>3.0 action_view assets asset_tag_helper caching master zero</tag>
      <title>[PATCH] Fix zero length stylesheet cache files bug in case of missing CSS files</title>
      <updated-at type="datetime">2010-10-15T23:01:33+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">25</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Christos Zisopoulos</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2738</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>9796f7c47689d47d5b88c4e26ffce5479c6623f7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-29T16:45:09+01:00</created-at>
      <filename>fix_zero_length_stylesheet_cache_files_when_missing_css_file.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">127701</id>
      <size type="integer">3399</size>
      <uploader-id type="integer">794</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/127701/fix_zero_length_stylesheet_cache_files_when_missing_css_file.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>aef244a3aa59354a6e5f2bdcfcbe2f8c84af5292</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-06-15T23:47:59+01:00</created-at>
      <filename>fix_zero_length_stylesheet_cache_files_when_missing_css_file_v2.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">133624</id>
      <size type="integer">26867</size>
      <uploader-id type="integer">794</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/133624/fix_zero_length_stylesheet_cache_files_when_missing_css_file_v2.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>a8d2bee0aeab1de279664c2eeeb7cc21c84b1669</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-07-20T12:56:34+01:00</created-at>
      <filename>fix_exceptions_for_missing_js_css_sources.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">224751</id>
      <size type="integer">5950</size>
      <uploader-id type="integer">21958</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/224751/fix_exceptions_for_missing_js_css_sources.diff</url>
    </attachment>
  </attachments>
</ticket>
