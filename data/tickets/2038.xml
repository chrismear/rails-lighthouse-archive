<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">7400</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-02-22T00:56:47+00:00</created-at>
  <creator-id type="integer">17407</creator-id>
  <milestone-due-on type="datetime">2009-01-31T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">2038</number>
  <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>2.3 edge encoding i18n patch ruby1.9</tag>
  <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
  <updated-at type="datetime">2009-02-28T04:43:21+00:00</updated-at>
  <user-id type="integer">17407</user-id>
  <version type="integer">8</version>
  <user-name>Akira Matsuda</user-name>
  <creator-name>Akira Matsuda</creator-name>
  <assigned-user-name>Sven Fuchs</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
  <priority-name>High</priority-name>
  <original-body>Current Rails I18n.interpolate fails with the following error when multibyte values given on Ruby 1.9.
@@@
incompatible character encodings: UTF-8 and ASCII-8BIT
@@@
This patch removes unnecessary force_encoding (which basically is not recommended to use), and enables interpolations between multibyte string and values.
On the other hand, this patch stops caring about interpolations between two different multibyte encodings. (but who needs it?)
Please look at the attached test cases for details.</original-body>
  <latest-body>Current Rails I18n.interpolate fails with the following error when multibyte values given on Ruby 1.9.
@@@
incompatible character encodings: UTF-8 and ASCII-8BIT
@@@
This patch removes unnecessary force_encoding (which basically is not recommended to use), and enables interpolations between multibyte string and values.
On the other hand, this patch stops caring about interpolations between two different multibyte encodings. (but who needs it?)
Please look at the attached test cases for details.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Current Rails I18n.interpolate fails with the following error
when multibyte values given on Ruby 1.9.&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
incompatible character encodings: UTF-8 and ASCII-8BIT
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This patch removes unnecessary force_encoding (which basically
is not recommended to use), and enables interpolations between
multibyte string and values. On the other hand, this patch stops
caring about interpolations between two different multibyte
encodings. (but who needs it?) Please look at the attached test
cases for details.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Current Rails I18n.interpolate fails with the following error when multibyte values given on Ruby 1.9.
@@@
incompatible character encodings: UTF-8 and ASCII-8BIT
@@@
This patch removes unnecessary force_encoding (which basically is not recommended to use), and enables interpolations between multibyte string and values.
On the other hand, this patch stops caring about interpolations between two different multibyte encodings. (but who needs it?)
Please look at the attached test cases for details.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Current Rails I18n.interpolate fails with the following error
when multibyte values given on Ruby 1.9.&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
incompatible character encodings: UTF-8 and ASCII-8BIT
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This patch removes unnecessary force_encoding (which basically
is not recommended to use), and enables interpolations between
multibyte string and values. On the other hand, this patch stops
caring about interpolations between two different multibyte
encodings. (but who needs it?) Please look at the attached test
cases for details.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T00:56:47+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-22T00:56:58+00:00</updated-at>
      <user-id type="integer">17407</user-id>
      <version type="integer">1</version>
      <user-name>Akira Matsuda</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T15:15:23+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-22T15:15:27+00:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">2</version>
      <user-name>DHH</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>The tests didn't run on Ruby 1.8 because Encoding isn't defined. Attached is a patch with running tests on both 1.8 and 1.9.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The tests didn't run on Ruby 1.8 because Encoding isn't defined.
Attached is a patch with running tests on both 1.8 and 1.9.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-27T15:02:45+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-27T15:02:47+00:00</updated-at>
      <user-id type="integer">8407</user-id>
      <version type="integer">3</version>
      <user-name>Manfred Stienstra</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Awesome. Thanks Manfred!

I've applied that patch to the I18n gem and bumped its version to 0.1.3

Attached is a patch that vendorizes that gem version to Rails.

PS: Unfortunately I'm not aware how to do it so that the Rails history gives proper credits to Akira :( The I18n history now does. Is there any way how I could keep Akira's original authorship?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Awesome. Thanks Manfred!&lt;/p&gt;
&lt;p&gt;I've applied that patch to the I18n gem and bumped its version
to 0.1.3&lt;/p&gt;
&lt;p&gt;Attached is a patch that vendorizes that gem version to
Rails.&lt;/p&gt;
&lt;p&gt;PS: Unfortunately I'm not aware how to do it so that the Rails
history gives proper credits to Akira :( The I18n history now does.
Is there any way how I could keep Akira's original authorship?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-27T15:49:25+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-27T15:49:27+00:00</updated-at>
      <user-id type="integer">7400</user-id>
      <version type="integer">4</version>
      <user-name>Sven Fuchs</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Nope, you can either credit your entire patch to Akira or not at all. Unfortunately Git doesn't allow you to set multiple authors for a commit. I assume they think commits should be small enough to be made by one author.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Nope, you can either credit your entire patch to Akira or not at
all. Unfortunately Git doesn't allow you to set multiple authors
for a commit. I assume they think commits should be small enough to
be made by one author.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-27T16:11:25+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-27T16:11:28+00:00</updated-at>
      <user-id type="integer">8407</user-id>
      <version type="integer">5</version>
      <user-name>Manfred Stienstra</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [943d64b1c857944666bff2572857abe866615274]) Vendorize i18n 0.1.3 gem (fixes issues with incompatible character encodings in Ruby 1.9) (Akira Matsuda) [#2038 state:committed]

Signed-off-by: David Heinemeier Hansson &lt;david@loudthinking.com&gt;
http://github.com/rails/rails/commit/943d64b1c857944666bff2572857abe866615274</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [943d64b1c857944666bff2572857abe866615274]) Vendorize i18n
0.1.3 gem (fixes issues with incompatible character encodings in
Ruby 1.9) (Akira Matsuda) [&lt;a href=&quot;/projects/8994/tickets/2038&quot; title=&quot;Ticket #2038&quot;&gt;#2038&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: David Heinemeier Hansson &lt;a href=&quot;mailto:david@loudthinking.com&quot;&gt;david@loudthinking.com&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/943d64b1c857944666bff2572857abe866615274&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-27T16:15:48+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-27T16:15:50+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">6</version>
      <user-name>Repository</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-27T16:42:12+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-27T16:42:16+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">7</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7400</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Ah, sorry for the tests on Ruby 1.8.  
Thank you for fixing that, Manfred.  
And, thanks for the credit, Sven.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ah, sorry for the tests on Ruby 1.8.&lt;br&gt;
Thank you for fixing that, Manfred.&lt;br&gt;
And, thanks for the credit, Sven.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-28T04:43:18+00:00</created-at>
      <creator-id type="integer">17407</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2038</number>
      <permalink>i18n-interpolation-fails-with-multibyte-strings-on-ruby-19</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.3 edge encoding i18n patch ruby1.9</tag>
      <title>I18n interpolation fails with multibyte strings on Ruby 1.9</title>
      <updated-at type="datetime">2009-02-28T04:43:21+00:00</updated-at>
      <user-id type="integer">17407</user-id>
      <version type="integer">8</version>
      <user-name>Akira Matsuda</user-name>
      <creator-name>Akira Matsuda</creator-name>
      <assigned-user-name>Sven Fuchs</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2038</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>c3894c7cf5e811f3dbedf8f9c887255857f720b7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-22T00:56:47+00:00</created-at>
      <filename>i18n_enconding.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">91489</id>
      <size type="integer">3825</size>
      <uploader-id type="integer">17407</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/91489/i18n_enconding.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>c57317726fa15a22d0dc8a4018366e4429e5a84c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-27T15:02:45+00:00</created-at>
      <filename>i18n_encoding_fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">93918</id>
      <size type="integer">4360</size>
      <uploader-id type="integer">8407</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/93918/i18n_encoding_fix.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>ba1d168522c171f84124d6e9189d0c08d55c5d84</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-27T16:09:30+00:00</created-at>
      <filename>0001-vendorize-i18n-0.1.3-gem-fixes-issues-with-incompat.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">93953</id>
      <size type="integer">109150</size>
      <uploader-id type="integer">7400</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/93953/0001-vendorize-i18n-0.1.3-gem-fixes-issues-with-incompat.patch</url>
    </attachment>
  </attachments>
</ticket>
