<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-08-08T11:56:12+01:00</created-at>
  <creator-id type="integer">19965</creator-id>
  <milestone-due-on type="datetime">2009-08-31T00:00:00+01:00</milestone-due-on>
  <milestone-id type="integer">41987</milestone-id>
  <number type="integer">3006</number>
  <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
  <priority type="integer">19</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2.x 3.0 actioncontroller</tag>
  <title> Patch to fix broken HTTP Digest Authentication</title>
  <updated-at type="datetime">2009-08-09T16:13:01+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">10</version>
  <user-name>Repository</user-name>
  <creator-name>Jos&#233; Valim</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
  <milestone-title>2.3.4</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Current HTTP Digest Authentication does not work with some browser/servers combinations.

For example, Webrick uses the full REQUEST_URI, while a browser like Safari or Firefox only send the relative_uri. In this case, HTTP Digest won't work.

On the other hand, IE sends the full REQUEST_URI, so it may not work with servers like mongrel or thin.

This patch attempts to let it flexible enough to work with a different combination of servers/browsers, without changing any security rule.

I tested in &quot;real life&quot; with Firefox on Linux on both webrick and thin. Would be nice if some tests would be executed with Safari and IE with both servers.

For some guidance, you could follow Ryan Daigle tutorial to setup: http://ryandaigle.com/articles/2009/1/30/what-s-new-in-edge-rails-http-digest-authentication</original-body>
  <latest-body>Current HTTP Digest Authentication does not work with some browser/servers combinations.

For example, Webrick uses the full REQUEST_URI, while a browser like Safari or Firefox only send the relative_uri. In this case, HTTP Digest won't work.

On the other hand, IE sends the full REQUEST_URI, so it may not work with servers like mongrel or thin.

This patch attempts to let it flexible enough to work with a different combination of servers/browsers, without changing any security rule.

I tested in &quot;real life&quot; with Firefox on Linux on both webrick and thin. Would be nice if some tests would be executed with Safari and IE with both servers.

For some guidance, you could follow Ryan Daigle tutorial to setup: http://ryandaigle.com/articles/2009/1/30/what-s-new-in-edge-rails-http-digest-authentication</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Current HTTP Digest Authentication does not work with some
browser/servers combinations.&lt;/p&gt;
&lt;p&gt;For example, Webrick uses the full REQUEST_URI, while a browser
like Safari or Firefox only send the relative_uri. In this case,
HTTP Digest won't work.&lt;/p&gt;
&lt;p&gt;On the other hand, IE sends the full REQUEST_URI, so it may not
work with servers like mongrel or thin.&lt;/p&gt;
&lt;p&gt;This patch attempts to let it flexible enough to work with a
different combination of servers/browsers, without changing any
security rule.&lt;/p&gt;
&lt;p&gt;I tested in &quot;real life&quot; with Firefox on Linux on both webrick
and thin. Would be nice if some tests would be executed with Safari
and IE with both servers.&lt;/p&gt;
&lt;p&gt;For some guidance, you could follow Ryan Daigle tutorial to
setup: &lt;a href=&quot;http://ryandaigle.com/articles/2009/1/30/what-s-new-in-edge-rails-http-digest-authentication&quot;&gt;
http://ryandaigle.com/articles/2...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Current HTTP Digest Authentication does not work with some browser/servers combinations.

For example, Webrick uses the full REQUEST_URI, while a browser like Safari or Firefox only send the relative_uri. In this case, HTTP Digest won't work.

On the other hand, IE sends the full REQUEST_URI, so it may not work with servers like mongrel or thin.

This patch attempts to let it flexible enough to work with a different combination of servers/browsers, without changing any security rule.

I tested in &quot;real life&quot; with Firefox on Linux on both webrick and thin. Would be nice if some tests would be executed with Safari and IE with both servers.

For some guidance, you could follow Ryan Daigle tutorial to setup: http://ryandaigle.com/articles/2009/1/30/what-s-new-in-edge-rails-http-digest-authentication</body>
      <body-html>&lt;div&gt;&lt;p&gt;Current HTTP Digest Authentication does not work with some
browser/servers combinations.&lt;/p&gt;
&lt;p&gt;For example, Webrick uses the full REQUEST_URI, while a browser
like Safari or Firefox only send the relative_uri. In this case,
HTTP Digest won't work.&lt;/p&gt;
&lt;p&gt;On the other hand, IE sends the full REQUEST_URI, so it may not
work with servers like mongrel or thin.&lt;/p&gt;
&lt;p&gt;This patch attempts to let it flexible enough to work with a
different combination of servers/browsers, without changing any
security rule.&lt;/p&gt;
&lt;p&gt;I tested in &quot;real life&quot; with Firefox on Linux on both webrick
and thin. Would be nice if some tests would be executed with Safari
and IE with both servers.&lt;/p&gt;
&lt;p&gt;For some guidance, you could follow Ryan Daigle tutorial to
setup: &lt;a href=
&quot;http://ryandaigle.com/articles/2009/1/30/what-s-new-in-edge-rails-http-digest-authentication&quot;&gt;
http://ryandaigle.com/articles/2009/1/30/what-s-new-in-edge-rails-h...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T11:56:12+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-08T11:56:15+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">1</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Verified

+1 This patch works in master and 2-3-stable. All tests pass.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified&lt;/p&gt;
&lt;p&gt;+1 This patch works in master and 2-3-stable. All tests
pass.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T18:08:33+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-08T18:08:38+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">2</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Verified

+1 applied to 2-3 stable without issue</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified&lt;/p&gt;
&lt;p&gt;+1 applied to 2-3 stable without issue&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T19:44:46+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-08T19:44:47+01:00</updated-at>
      <user-id type="integer">22242</user-id>
      <version type="integer">3</version>
      <user-name>Dan Pickett</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Verified

-1 This patch does not apply cleanly to master, also as poster suggests needs real world testing to ensure tests are sufficient</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified&lt;/p&gt;
&lt;p&gt;-1 This patch does not apply cleanly to master, also as poster
suggests needs real world testing to ensure tests are
sufficient&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T21:20:47+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-08T21:20:49+01:00</updated-at>
      <user-id type="integer">65576</user-id>
      <version type="integer">4</version>
      <user-name>Steve St. Martin</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Clarification: This only works in 2-3-stable.

I will see how Safari and mongrel works with this now.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Clarification: This only works in 2-3-stable.&lt;/p&gt;
&lt;p&gt;I will see how Safari and mongrel works with this now.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T23:05:50+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-08T23:05:54+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">5</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>-1 This is not working correctly with Safari. It is not redirecting to Non-authorized page on wrong password input.</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 This is not working correctly with Safari. It is not
redirecting to Non-authorized page on wrong password input.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T23:18:16+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-08T23:18:18+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">6</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Rizwan, what do you get with wrong password input? It should not redirect to somewhere, just confirm that you are getting the proper http status.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rizwan, what do you get with wrong password input? It should not
redirect to somewhere, just confirm that you are getting the proper
http status.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T23:21:41+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-08T23:21:44+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">7</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 Applies cleanly on 2-3-stable (tests pass), -1 fails on master.

successfully tested manually on Safari / FF  on mongrel, got unauthorized status back.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 Applies cleanly on 2-3-stable (tests pass), -1 fails on
master.&lt;/p&gt;
&lt;p&gt;successfully tested manually on Safari / FF on mongrel, got
unauthorized status back.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T04:18:02+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.x 3.0 actioncontroller bugmash</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-09T04:18:04+01:00</updated-at>
      <user-id type="integer">10379</user-id>
      <version type="integer">8</version>
      <user-name>Elad Meidar</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T16:00:11+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.x 3.0 actioncontroller bugmash
:state: new
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.x 3.0 actioncontroller</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-09T16:00:14+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">9</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [2d2216fadb0bb6eb6feebe697d3e7041f7d0d965]) Make http digest work with different server/browser combinations. [#3006 status:resolved]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/2d2216fadb0bb6eb6feebe697d3e7041f7d0d965</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/2d2216fadb0bb6eb6feebe697d3e7041f7d0d965&quot;
title=
&quot;Changeset [2d2216fadb0bb6eb6feebe697d3e7041f7d0d965]&quot;&gt;[2d2216fadb0bb6eb6feebe697d3e7041f7d0d965]&lt;/a&gt;)
Make http digest work with different server/browser combinations.
[&lt;a href=&quot;/projects/8994/tickets/3006&quot; title=
&quot;Ticket #3006&quot;&gt;#3006&lt;/a&gt; status:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Pratik Naik &lt;a&gt;pratiknaik@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/2d2216fadb0bb6eb6feebe697d3e7041f7d0d965&quot;&gt;
http://github.com/rails/rails/commit/2d2216fadb0bb6eb6feebe697d3e70...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T16:13:00+01:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">3006</number>
      <permalink>patch-to-fix-broken-http-digest-authentication</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.x 3.0 actioncontroller</tag>
      <title> Patch to fix broken HTTP Digest Authentication</title>
      <updated-at type="datetime">2009-08-09T16:13:01+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">10</version>
      <user-name>Repository</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3006</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>3f4a6af717ab954d9e70a1a6785e3013e7a79658</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-08T11:56:12+01:00</created-at>
      <filename>0001_http_digest_browser_server_combinations.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239055</id>
      <size type="integer">4736</size>
      <uploader-id type="integer">19965</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239055/0001_http_digest_browser_server_combinations.diff</url>
    </attachment>
  </attachments>
</ticket>
