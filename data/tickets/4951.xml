<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">85</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-06-24T02:08:24+01:00</created-at>
  <creator-id type="integer">104430</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4951</number>
  <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>active_record arel console_app.rb</tag>
  <title>Rails Console Executes Where Queries without lazy loading</title>
  <updated-at type="datetime">2010-06-29T14:53:53+01:00</updated-at>
  <user-id type="integer">16138</user-id>
  <version type="integer">11</version>
  <user-name>Emilio Tagua</user-name>
  <creator-name>hooptie45</creator-name>
  <assigned-user-name>Jeremy Kemper</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
  <priority-name>Low</priority-name>
  <original-body>Example:

@@@
ruby-1.9.2-head &gt; @cats = Cat.where(:id=&gt;[1,2,3])
 =&gt; [#&lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&gt;] 

ruby-1.9.2-head &gt; @cats
 =&gt; [#&lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&gt;] 

ruby-1.9.2-head &gt; @cats.class
 =&gt; ActiveRecord::Relation
@@@

&lt;em&gt;Edited by Rohit Arondekar for formating.&lt;/em&gt;</original-body>
  <latest-body>Example:

@@@
ruby-1.9.2-head &gt; @cats = Cat.where(:id=&gt;[1,2,3])
 =&gt; [#&lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&gt;] 

ruby-1.9.2-head &gt; @cats
 =&gt; [#&lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&gt;] 

ruby-1.9.2-head &gt; @cats.class
 =&gt; ActiveRecord::Relation
@@@

&lt;em&gt;Edited by Rohit Arondekar for formating.&lt;/em&gt;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ruby-1.9.2-head &amp;gt; @cats = Cat.where(:id=&amp;gt;[1,2,3])
 =&amp;gt; [#&amp;lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&amp;gt;] 

ruby-1.9.2-head &amp;gt; @cats
 =&amp;gt; [#&amp;lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&amp;gt;] 

ruby-1.9.2-head &amp;gt; @cats.class
 =&amp;gt; ActiveRecord::Relation&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;Edited by Rohit Arondekar for formating.&lt;/em&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Example:

@@@
ruby-1.9.2-head &gt; @cats = Cat.where(:id=&gt;[1,2,3])
 =&gt; [#&lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&gt;] 

ruby-1.9.2-head &gt; @cats
 =&gt; [#&lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&gt;] 

ruby-1.9.2-head &gt; @cats.class
 =&gt; ActiveRecord::Relation
@@@

&lt;em&gt;Edited by Rohit Arondekar for formating.&lt;/em&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ruby-1.9.2-head &amp;gt; @cats = Cat.where(:id=&amp;gt;[1,2,3])
 =&amp;gt; [#&amp;lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&amp;gt;] 

ruby-1.9.2-head &amp;gt; @cats
 =&amp;gt; [#&amp;lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&amp;gt;] 

ruby-1.9.2-head &amp;gt; @cats.class
 =&amp;gt; ActiveRecord::Relation&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;Edited by Rohit Arondekar for formating.&lt;/em&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T02:08:24+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T06:21:13+01:00</updated-at>
      <user-id type="integer">104430</user-id>
      <version type="integer">1</version>
      <user-name>hooptie45</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am not able to follow you. Could you please explain what's the concern here?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am not able to follow you. Could you please explain what's the
concern here?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T02:43:12+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T02:43:20+01:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">2</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>hooptie45, I've fixed the formating, please remember to wrap code like things in @@@ :) See http://help.lighthouseapp.com/faqs/getting-started/how-do-i-format-text for more info.</body>
      <body-html>&lt;div&gt;&lt;p&gt;hooptie45, I've fixed the formating, please remember to wrap
code like things in @@@ :) See &lt;a href=
&quot;http://help.lighthouseapp.com/faqs/getting-started/how-do-i-format-text&quot;&gt;
http://help.lighthouseapp.com/faqs/getting-started/how-do-i-format-...&lt;/a&gt;
for more info.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T06:29:43+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T06:29:49+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">3</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I don't follow either. Please provide more details.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I don't follow either. Please provide more details.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T07:32:28+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T07:32:34+01:00</updated-at>
      <user-id type="integer">39092</user-id>
      <version type="integer">4</version>
      <user-name>Damien MATHIEU</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I think what he is expecting is something like this:

@@@
ruby-1.9.2-head &gt; @cats = Cat.where(:id=&gt;[1,2,3])
 =&gt; &lt;#ActiveRecord::Relation whatever fields are used to store a arel relation&gt;

ruby-1.9.2-head &gt; @cats.all
 =&gt; [#&lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&gt;] 
@@@

I'm guessing that in the console, to help the developer, the queries are indeed executed. But I would like to hear more on this from somebody who knows what is going on! :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think what he is expecting is something like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ruby-1.9.2-head &amp;gt; @cats = Cat.where(:id=&amp;gt;[1,2,3])
 =&amp;gt; &amp;lt;#ActiveRecord::Relation whatever fields are used to store a arel relation&amp;gt;

ruby-1.9.2-head &amp;gt; @cats.all
 =&amp;gt; [#&amp;lt;Cat id: 1, name: &quot;Ralph&quot;, created_at: &quot;2010-06-24 00:29:35&quot;, updated_at: &quot;2010-06-24 00:29:35&quot;&amp;gt;]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I'm guessing that in the console, to help the developer, the
queries are indeed executed. But I would like to hear more on this
from somebody who knows what is going on! :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T10:20:58+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T10:21:05+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">5</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When executing something in IRB, it calls inspect on the resulting object and prints it. ActiveRecord::Relation defines inspect as follows:

@@@ ruby
def inspect
  to_a.inspect
end
@@@

Which means the query gets executed, and then inspect is run on the resulting array. I don't think this is designed with IRB/console in mind, it's just how it's meant to work. It could make sense for Relation to have its own inspect, I don't know.. Someone probably thought about this before and came to the conclusion that it shouldn't.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When executing something in IRB, it calls inspect on the
resulting object and prints it. ActiveRecord::Relation defines
inspect as follows:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;def inspect
  to_a.inspect
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Which means the query gets executed, and then inspect is run on
the resulting array. I don't think this is designed with
IRB/console in mind, it's just how it's meant to work. It could
make sense for Relation to have its own inspect, I don't know..
Someone probably thought about this before and came to the
conclusion that it shouldn't.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T10:50:22+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T10:50:28+01:00</updated-at>
      <user-id type="integer">1371</user-id>
      <version type="integer">6</version>
      <user-name>Tore Darell</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T11:11:54+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T11:12:01+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">7</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>You can normally start irb with --noinspect, or set IRB.conf[:INSPECT_MODE] from your .irbrc. However, you can not change it interactively and have it take effect immediately.

In my rewrite of irb for Ruby 1.9/MacRuby, called DietRB, you can change this and have it take effect immediately. For instance:

@@@
irb(main):001:0&gt; def i!; IRB.formatter.inspect = !IRB.formatter.inspect; end
=&gt; nil
irb(main):002:0&gt; class A; def inspect; 'oelala'; end; end
=&gt; nil
irb(main):003:0&gt; A.new
=&gt; oelala
irb(main):004:0&gt; i!
=&gt; #&lt;FalseClass:0x0&gt;
irb(main):005:0&gt; A.new
=&gt; #&lt;A:0x102807f20&gt;
irb(main):006:0&gt; i!
=&gt; true
irb(main):007:0&gt; A.new
=&gt; oelala
@@@

Note that in this case I defined a simple method to toggle it &#8216;i!&#8217;. You could add that to your .irbrc.

HTH,
Eloy

http://rubygems.org/gems/dietrb
http://github.com/alloy/dietrb</body>
      <body-html>&lt;div&gt;&lt;p&gt;You can normally start irb with --noinspect, or set
IRB.conf[:INSPECT_MODE] from your .irbrc. However, you can not
change it interactively and have it take effect immediately.&lt;/p&gt;
&lt;p&gt;In my rewrite of irb for Ruby 1.9/MacRuby, called DietRB, you
can change this and have it take effect immediately. For
instance:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;irb(main):001:0&amp;gt; def i!; IRB.formatter.inspect = !IRB.formatter.inspect; end
=&amp;gt; nil
irb(main):002:0&amp;gt; class A; def inspect; 'oelala'; end; end
=&amp;gt; nil
irb(main):003:0&amp;gt; A.new
=&amp;gt; oelala
irb(main):004:0&amp;gt; i!
=&amp;gt; #&amp;lt;FalseClass:0x0&amp;gt;
irb(main):005:0&amp;gt; A.new
=&amp;gt; #&amp;lt;A:0x102807f20&amp;gt;
irb(main):006:0&amp;gt; i!
=&amp;gt; true
irb(main):007:0&amp;gt; A.new
=&amp;gt; oelala&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Note that in this case I defined a simple method to toggle it
&amp;#8216;i!&amp;#8217;. You could add that to your .irbrc.&lt;/p&gt;
&lt;p&gt;HTH,&lt;br&gt;
Eloy&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://rubygems.org/gems/dietrb&quot;&gt;http://rubygems.org/gems/dietrb&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/alloy/dietrb&quot;&gt;http://github.com/alloy/dietrb&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T11:56:45+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 85
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T11:59:29+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">8</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Argh, reassigning to Jeremy&#8230;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Argh, reassigning to Jeremy&amp;#8230;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T11:57:42+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T11:57:49+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">9</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>-1
I would submit there are two conflicting desires here: on the one hand, the behaviour of inspect is what you would expect in this situation - if in any other situation I inspected a response, I'd expect to see it's contents. On the other, there is the desire to us console and have it do lazy loading, I presume so you can do some testing around the lazy loading process in your application. My thoughts woudl be, since you CAN start the console with inspect off, as per Mr. Duran, and then simply inspect manually the objects you wish to test, that the first desire outweighs the second, in my mind. Most of the time, I'm expecting, in console, when I run a query, it is because I want to see the results, not test lazy loading (which I can understand it needing to be tested in specific situations, but which GENERALLY OUGHT to be transparent). I'd say leave the behaviour as is.</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 I would submit there are two conflicting desires here: on the
one hand, the behaviour of inspect is what you would expect in this
situation - if in any other situation I inspected a response, I'd
expect to see it's contents. On the other, there is the desire to
us console and have it do lazy loading, I presume so you can do
some testing around the lazy loading process in your application.
My thoughts woudl be, since you CAN start the console with inspect
off, as per Mr. Duran, and then simply inspect manually the objects
you wish to test, that the first desire outweighs the second, in my
mind. Most of the time, I'm expecting, in console, when I run a
query, it is because I want to see the results, not test lazy
loading (which I can understand it needing to be tested in specific
situations, but which GENERALLY OUGHT to be transparent). I'd say
leave the behaviour as is.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T16:48:03+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-24T16:48:11+01:00</updated-at>
      <user-id type="integer">50736</user-id>
      <version type="integer">10</version>
      <user-name>Jason Gignac</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Queries are lazy loaded, the thing is that in irb every line is inspected so the query is executed.

Try running the same in a controller: 

@@@ ruby 
 @cats = Cat.where(:id=&gt;[1,2,3])
@@@

And you will find that no query is executed, although doing the same in IRB will, because the line is inspected and therefore to_a is called, query executed, records loaded, etc...

I'm marking the ticket as invalid, if you still think this is a real problem, please feel free to reopen it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Queries are lazy loaded, the thing is that in irb every line is
inspected so the query is executed.&lt;/p&gt;
&lt;p&gt;Try running the same in a controller:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt; @cats = Cat.where(:id=&amp;gt;[1,2,3])&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;And you will find that no query is executed, although doing the
same in IRB will, because the line is inspected and therefore to_a
is called, query executed, records loaded, etc...&lt;/p&gt;
&lt;p&gt;I'm marking the ticket as invalid, if you still think this is a
real problem, please feel free to reopen it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-29T14:53:44+01:00</created-at>
      <creator-id type="integer">104430</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4951</number>
      <permalink>rails-console-executes-where-queries-without-lazy-loading</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>active_record arel console_app.rb</tag>
      <title>Rails Console Executes Where Queries without lazy loading</title>
      <updated-at type="datetime">2010-06-29T14:53:53+01:00</updated-at>
      <user-id type="integer">16138</user-id>
      <version type="integer">11</version>
      <user-name>Emilio Tagua</user-name>
      <creator-name>hooptie45</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4951</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
