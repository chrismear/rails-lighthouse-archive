<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">1</assigned-user-id>
  <attachments-count type="integer">6</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-04-22T06:48:04+01:00</created-at>
  <creator-id type="integer">10222</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1100</number>
  <permalink>json-decoding-of-u-escape-sequences</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2.1 activesupport bug patch tested tiny</tag>
  <title>JSON decoding of \u escape sequences</title>
  <updated-at type="datetime">2011-04-22T06:48:04+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">17</version>
  <user-name>Repository</user-name>
  <creator-name>Tim Pope</creator-name>
  <assigned-user-name>Rick</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
  <priority-name nil="true"></priority-name>
  <original-body>Currently ActiveSupport::JSON.decode doesn't handle &quot;\u0000&quot; style escape sequences.  The attached patch rectifies this.</original-body>
  <latest-body>Currently ActiveSupport::JSON.decode doesn't handle &quot;\u0000&quot; style escape sequences.  The attached patch rectifies this.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Currently ActiveSupport::JSON.decode doesn't handle &quot;\u0000&quot;
style escape sequences. The attached patch rectifies this.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Currently ActiveSupport::JSON.decode doesn't handle &quot;\u0000&quot; style escape sequences.  The attached patch rectifies this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Currently ActiveSupport::JSON.decode doesn't handle &quot;\u0000&quot;
style escape sequences. The attached patch rectifies this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-24T01:04:05+01:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2008-09-24T01:04:08+01:00</updated-at>
      <user-id type="integer">10222</user-id>
      <version type="integer">1</version>
      <user-name>Tim Pope</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'll admit I am not an expert about JSON.  I applied your patch and the tests passed.  However, I'm testing out Google's AJAX search API that returns JSON and it isn't passing.  Not sure if Google is doing something wrong, the strings are being double escaped or if it's the patch.  With your patch applied I get this (note the \\u003's at the very end)

@@@
&gt;&gt; ActiveSupport::JSON.decode(open('http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;q=Ruby+on+Rails').read)['responseData']['results'].first['content']
=&gt; &quot;RoR home; full stack, Web application framework optimized for sustainable   programming productivity, allows writing sound code by favoring convention over   \\u003cb\\u003e...\\u003c/b\\u003e&quot;
@@@

With an update to your patch (attached) I get this:

@@@
&gt;&gt; ActiveSupport::JSON.decode(open('http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;q=Ruby+on+Rails').read)['responseData']['results'].first['content']
=&gt; &quot;RoR home; full stack, Web application framework optimized for sustainable   programming productivity, allows writing sound code by favoring convention over   &lt;b&gt;...&lt;/b&gt;&quot;
@@@

This updated patch still passes the tests supplied by the first patch.

It also seems to work if you run this conversion at the very beginning on the original json string in it's entirety, but I'm not sure that's a good idea.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'll admit I am not an expert about JSON. I applied your patch
and the tests passed. However, I'm testing out Google's AJAX search
API that returns JSON and it isn't passing. Not sure if Google is
doing something wrong, the strings are being double escaped or if
it's the patch. With your patch applied I get this (note the
\u003's at the very end)&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;gt;&amp;gt; ActiveSupport::JSON.decode(open('http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;amp;q=Ruby+on+Rails').read)['responseData']['results'].first['content']
=&amp;gt; &amp;quot;RoR home; full stack, Web application framework optimized for sustainable   programming productivity, allows writing sound code by favoring convention over   \\u003cb\\u003e...\\u003c/b\\u003e&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With an update to your patch (attached) I get this:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;gt;&amp;gt; ActiveSupport::JSON.decode(open('http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;amp;q=Ruby+on+Rails').read)['responseData']['results'].first['content']
=&amp;gt; &amp;quot;RoR home; full stack, Web application framework optimized for sustainable   programming productivity, allows writing sound code by favoring convention over   &amp;lt;b&amp;gt;...&amp;lt;/b&amp;gt;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This updated patch still passes the tests supplied by the first
patch.&lt;/p&gt;
&lt;p&gt;It also seems to work if you run this conversion at the very
beginning on the original json string in it's entirety, but I'm not
sure that's a good idea.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-23T18:32:01+01:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2008-10-23T18:32:06+01:00</updated-at>
      <user-id type="integer">19704</user-id>
      <version type="integer">2</version>
      <user-name>Philip Hallstrom</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>+1 on the improvement.  I'm not a big fan of repeating the same gsub logic in two places but reusing the code is probably more trouble than it's worth.

#973 points out another JSON decoding issue.  These two should probably be combined into one patch.  I'll try to take a look at it this weekend if nobody beats me to it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 on the improvement. I'm not a big fan of repeating the same
gsub logic in two places but reusing the code is probably more
trouble than it's worth.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/projects/8994/tickets/973&quot; title=&quot;Ticket #973&quot;&gt;#973&lt;/a&gt; points out another JSON decoding issue.
These two should probably be combined into one patch. I'll try to
take a look at it this weekend if nobody beats me to it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-23T20:27:24+01:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2008-10-23T20:27:26+01:00</updated-at>
      <user-id type="integer">10222</user-id>
      <version type="integer">3</version>
      <user-name>Tim Pope</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Another patch.  I was encountering situations where $1 would be valid (ie. &quot;u003c&quot;) before the $1.start_with(&quot;u&quot;) and nil immediately after.

This patch fixes that by explicitly setting $1 to a local variable.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Another patch. I was encountering situations where $1 would be
valid (ie. &quot;u003c&quot;) before the $1.start_with(&quot;u&quot;) and nil
immediately after.&lt;/p&gt;
&lt;p&gt;This patch fixes that by explicitly setting $1 to a local
variable.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-24T00:23:21+01:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2008-10-24T00:23:25+01:00</updated-at>
      <user-id type="integer">19704</user-id>
      <version type="integer">4</version>
      <user-name>Philip Hallstrom</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Thank you so much. Patched my rails using include library until this is fixed in edge.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thank you so much. Patched my rails using include library until
this is fixed in edge.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-11-16T09:14:05+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2008-11-16T09:14:06+00:00</updated-at>
      <user-id type="integer">37786</user-id>
      <version type="integer">5</version>
      <user-name>Nick Adams</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-11-16T14:49:16+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2008-11-16T14:49:19+00:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">6</version>
      <user-name>DHH</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>what's the status of that patch? i just confirmed it applies and passes on master@2009-02-07.

+1 for patch 3 if anyone cares</body>
      <body-html>&lt;div&gt;&lt;p&gt;what's the status of that patch? i just confirmed it applies and
passes on master@2009-02-07.&lt;/p&gt;
&lt;p&gt;+1 for patch 3 if anyone cares&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-07T16:09:49+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-02-07T16:09:54+00:00</updated-at>
      <user-id type="integer">29212</user-id>
      <version type="integer">7</version>
      <user-name>Michael Siebert</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>PATCH 3: useful and test pass

+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;PATCH 3: useful and test pass&lt;/p&gt;
&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-26T14:46:02+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-02-26T14:46:07+00:00</updated-at>
      <user-id type="integer">36790</user-id>
      <version type="integer">8</version>
      <user-name>Ernesto Jim&#233;nez</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>This doesn't apply cleanly against master right now. Could someone take a look at fixing?</body>
      <body-html>&lt;div&gt;&lt;p&gt;This doesn't apply cleanly against master right now. Could
someone take a look at fixing?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-27T12:41:47+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-02-27T12:41:50+00:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">9</version>
      <user-name>DHH</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>This is something I'm really interested in seeing on Rails, so I've applied it to master. This also solves http://dev.rubyonrails.org/ticket/8599, by the way.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is something I'm really interested in seeing on Rails, so
I've applied it to master. This also solves &lt;a href=&quot;http://dev.rubyonrails.org/ticket/8599&quot;&gt;http://dev.rubyonrails.org/ticke...&lt;/a&gt;,
by the way.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-10T12:39:37+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-10T12:39:43+00:00</updated-at>
      <user-id type="integer">23131</user-id>
      <version type="integer">10</version>
      <user-name>Bira</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>(from [9b9b2937ce3bef3bca9d22821e76c40cc74fa689]) Properly decode \u escape sequences in JSON [#1100 state:resolved] [Tim Pope, Philip Hallstrom]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/9b9b2937ce3bef3bca9d22821e76c40cc74fa689</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [9b9b2937ce3bef3bca9d22821e76c40cc74fa689]) Properly
decode \u escape sequences in JSON [&lt;a href=&quot;/projects/8994/tickets/1100&quot; title=&quot;Ticket #1100&quot;&gt;#1100&lt;/a&gt;
state:resolved] [Tim Pope, Philip Hallstrom]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Pratik Naik &lt;a href=&quot;mailto:pratiknaik@gmail.com&quot;&gt;pratiknaik@gmail.com&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/9b9b2937ce3bef3bca9d22821e76c40cc74fa689&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-10T17:08:21+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-10T17:09:29+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">11</version>
      <user-name>Repository</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Test fail with this patch applied on Ruby 1.9.1:

@@@
Name: test_json_decoding_{&quot;matzue&quot;: Type: Failure Message: &lt;{&quot;matzue&quot;=&gt;&quot;&#26494;&#27743;&quot;, &quot;asakusa&quot;=&gt;&quot;&#27973;&#33609;&quot;}&gt; expected but was &lt;{&quot;matzue&quot;=&gt;&quot;&#26494;&#27743;&quot;, &quot;as akusa&quot;=&gt;&quot;&#27973;&#33609; &quot;}&gt;. 
@@@

Previous to this, all ActiveSupport tests passed on 1.9.1.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Test fail with this patch applied on Ruby 1.9.1:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
Name: test_json_decoding_{&amp;quot;matzue&amp;quot;: Type: Failure Message: &amp;lt;{&amp;quot;matzue&amp;quot;=&amp;gt;&amp;quot;&#26494;&#27743;&amp;quot;, &amp;quot;asakusa&amp;quot;=&amp;gt;&amp;quot;&#27973;&#33609;&amp;quot;}&amp;gt; expected but was &amp;lt;{&amp;quot;matzue&amp;quot;=&amp;gt;&amp;quot;&#26494;&#27743;&amp;quot;, &amp;quot;as akusa&amp;quot;=&amp;gt;&amp;quot;&#27973;&#33609; &amp;quot;}&amp;gt;. 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Previous to this, all ActiveSupport tests passed on 1.9.1.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-10T17:18:22+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-10T17:18:53+00:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">12</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>I see a part of the previous patch was untested, and so was removed from master. I've added a few tests to it, and I hope they make sense. 

Unfortunately I can't do anything about the 1.9.1 issue from where I am right now. I'll try to install it and test later today.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I see a part of the previous patch was untested, and so was
removed from master. I've added a few tests to it, and I hope they
make sense.&lt;/p&gt;
&lt;p&gt;Unfortunately I can't do anything about the 1.9.1 issue from
where I am right now. I'll try to install it and test later
today.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-11T09:23:04+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-11T09:47:40+00:00</updated-at>
      <user-id type="integer">23131</user-id>
      <version type="integer">13</version>
      <user-name>Bira</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Please take a look at #1969 for the Ruby 1.9 matter.

I guess, 
@@@
json[left.succ..right_pos[i]]
@@@
won't work properly with multibyte chars on Ruby 1.9.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Please take a look at &lt;a href=&quot;/projects/8994/tickets/1969&quot; title=&quot;Ticket #1969&quot;&gt;#1969&lt;/a&gt; for the Ruby 1.9 matter.&lt;/p&gt;
&lt;p&gt;I guess,&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
json[left.succ..right_pos[i]]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;won't work properly with multibyte chars on Ruby 1.9.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-11T10:03:52+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-11T10:17:02+00:00</updated-at>
      <user-id type="integer">17407</user-id>
      <version type="integer">14</version>
      <user-name>Akira Matsuda</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Thank you very much, Akira. I've installed Ruby 1.9 and incorporated your changes from #1969 (which the patch from this ticket had overwritten). Tests now pass both for Ruby 1.8 and Ruby 1.9. The patch I'm attaching here has all the changes of the previous one, plus 1.9 support.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thank you very much, Akira. I've installed Ruby 1.9 and
incorporated your changes from &lt;a href=&quot;/projects/8994/tickets/1969&quot; title=&quot;Ticket #1969&quot;&gt;#1969&lt;/a&gt; (which
the patch from this ticket had overwritten). Tests now pass both
for Ruby 1.8 and Ruby 1.9. The patch I'm attaching here has all the
changes of the previous one, plus 1.9 support.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-11T11:53:03+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-11T11:53:55+00:00</updated-at>
      <user-id type="integer">23131</user-id>
      <version type="integer">15</version>
      <user-name>Bira</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-11T21:35:51+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-11T22:01:27+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">16</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>(from [7b382cb9e5c5706f8d15216159a2873375915c9c]) Reverted affe50105f7027a44eb6e9cfb56f5b3fc070b19b and added more JSON decoding tests.

Works on Ruby 1.8 and 1.9

[#1100 state:resolved]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/7b382cb9e5c5706f8d15216159a2873375915c9c</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [7b382cb9e5c5706f8d15216159a2873375915c9c]) Reverted
affe50105f7027a44eb6e9cfb56f5b3fc070b19b and added more JSON
decoding tests.&lt;/p&gt;
&lt;p&gt;Works on Ruby 1.8 and 1.9&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/1100&quot; title=&quot;Ticket #1100&quot;&gt;#1100&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/7b382cb9e5c5706f8d15216159a2873375915c9c&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-11T22:02:32+00:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2009-03-11T22:08:30+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">17</version>
      <user-name>Repository</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>PDF to JPG Converter is a more efficient pdf to jpg conversion software
&lt;a href=&quot;http://www.oxpdf.com/pdf-creator.html&quot;&gt;PDF Creator&lt;/a&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-jpg-converter.html&quot;&gt;pdf to jpg converter&lt;/a&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-image-converter.html&quot;&gt;pdf to image converter&lt;/a&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-tiff-converter.html&quot;&gt;pdf to tiff converter&lt;/a&gt;
which is able to convert pdf to jpg format with original output quality and fast conversion speed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;PDF to JPG Converter is a more efficient pdf to jpg conversion
software&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-creator.html&quot;&gt;PDF Creator&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-jpg-converter.html&quot;&gt;pdf to jpg
converter&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-image-converter.html&quot;&gt;pdf to
image converter&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.oxpdf.com/pdf-to-tiff-converter.html&quot;&gt;pdf to
tiff converter&lt;/a&gt;&lt;br&gt;
which is able to convert pdf to jpg format with original output
quality and fast conversion speed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-04-22T04:49:47+01:00</created-at>
      <creator-id type="integer">10222</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1100</number>
      <permalink>json-decoding-of-u-escape-sequences</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.1 activesupport bug patch tested tiny</tag>
      <title>JSON decoding of \u escape sequences</title>
      <updated-at type="datetime">2011-04-22T06:48:04+01:00</updated-at>
      <user-id type="integer">146598</user-id>
      <version type="integer">18</version>
      <user-name>machen</user-name>
      <creator-name>Tim Pope</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1100</url>
      <priority-name>High</priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>834ad7a551194aaadff46dcd37813fd45801f435</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-09-24T01:04:05+01:00</created-at>
      <filename>json_unicode.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">48193</id>
      <size type="integer">1819</size>
      <uploader-id type="integer">10222</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/48193/json_unicode.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>bf37ef3add75a0a2df968262ec80d33202ebcda7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-10-23T18:32:01+01:00</created-at>
      <filename>json_unicode_2.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">56568</id>
      <size type="integer">2396</size>
      <uploader-id type="integer">19704</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/56568/json_unicode_2.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>3eb1862d3f367422c68d17e7bb7b5045073a3368</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-10-24T00:23:22+01:00</created-at>
      <filename>json_unicode_3.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">56690</id>
      <size type="integer">4195</size>
      <uploader-id type="integer">19704</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/56690/json_unicode_3.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>ccdcf97d2555fec399243f83e3e59e3bc2521b05</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-10T12:39:37+00:00</created-at>
      <filename>json_unicode_4.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">97935</id>
      <size type="integer">2616</size>
      <uploader-id type="integer">23131</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/97935/json_unicode_4.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>928a1e2f09d0038cb13d931d3fbbc258f3ade420</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-11T09:23:04+00:00</created-at>
      <filename>json_unicode_tests.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">98413</id>
      <size type="integer">2246</size>
      <uploader-id type="integer">23131</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/98413/json_unicode_tests.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>52fb1c7db822ca106fe68a378ffb81f38ecc85b1</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-11T11:53:04+00:00</created-at>
      <filename>json_unicode_tests_2.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">98468</id>
      <size type="integer">2220</size>
      <uploader-id type="integer">23131</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/98468/json_unicode_tests_2.diff</url>
    </attachment>
  </attachments>
</ticket>
