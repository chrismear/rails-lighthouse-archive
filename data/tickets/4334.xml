<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-14T07:28:43+00:00</created-at>
  <creator-id type="integer">12758</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4334</number>
  <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>&quot;url_for resource_path to_param&quot;</tag>
  <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
  <updated-at type="datetime">2011-02-14T07:28:43+00:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">15</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>garrett</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I've got a problem where I have a model with a to_param method. The to_param returns a string which contains forward slashes such as 'foo/bar'

when the model instance is passed into the url_for() or &lt;resource&gt;_path() methods the foo/bar gets escaped to foo%2Fbar which in some instances is undesirable.

Passing url_for(@model, :escape =&gt; false) does not work either

Cheers!
Garrett</original-body>
  <latest-body>I've got a problem where I have a model with a to_param method. The to_param returns a string which contains forward slashes such as 'foo/bar'

when the model instance is passed into the url_for() or &lt;resource&gt;_path() methods the foo/bar gets escaped to foo%2Fbar which in some instances is undesirable.

Passing url_for(@model, :escape =&gt; false) does not work either

Cheers!
Garrett</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I've got a problem where I have a model with a to_param method.
The to_param returns a string which contains forward slashes such
as 'foo/bar'&lt;/p&gt;
&lt;p&gt;when the model instance is passed into the url_for() or _path()
methods the foo/bar gets escaped to foo%2Fbar which in some
instances is undesirable.&lt;/p&gt;
&lt;p&gt;Passing url_for(@model, :escape =&amp;gt; false) does not work
either&lt;/p&gt;
&lt;p&gt;Cheers!&lt;br&gt;
Garrett&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've got a problem where I have a model with a to_param method. The to_param returns a string which contains forward slashes such as 'foo/bar'

when the model instance is passed into the url_for() or &lt;resource&gt;_path() methods the foo/bar gets escaped to foo%2Fbar which in some instances is undesirable.

Passing url_for(@model, :escape =&gt; false) does not work either

Cheers!
Garrett</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've got a problem where I have a model with a to_param method.
The to_param returns a string which contains forward slashes such
as 'foo/bar'&lt;/p&gt;
&lt;p&gt;when the model instance is passed into the url_for() or _path()
methods the foo/bar gets escaped to foo%2Fbar which in some
instances is undesirable.&lt;/p&gt;
&lt;p&gt;Passing url_for(@model, :escape =&amp;gt; false) does not work
either&lt;/p&gt;
&lt;p&gt;Cheers!&lt;br&gt;
Garrett&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-06T16:45:13+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-06T16:45:20+01:00</updated-at>
      <user-id type="integer">12758</user-id>
      <version type="integer">1</version>
      <user-name>garrett</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I should have mentioned this is in Rails 3.0 beta 2</body>
      <body-html>&lt;div&gt;&lt;p&gt;I should have mentioned this is in Rails 3.0 beta 2&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-06T16:45:56+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-06T16:45:57+01:00</updated-at>
      <user-id type="integer">12758</user-id>
      <version type="integer">2</version>
      <user-name>garrett</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It's correct for the default behavior to be escaping.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It's correct for the default behavior to be escaping.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-10T12:45:43+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-10T12:45:45+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">3</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-10T13:09:59+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-10T13:10:02+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">4</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi Jose

That makes sense alright. But there's no way to disable the escape. The escape on url_for() doesn't seem to work either.

Thanks
Garrett</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Jose&lt;/p&gt;
&lt;p&gt;That makes sense alright. But there's no way to disable the
escape. The escape on url_for() doesn't seem to work either.&lt;/p&gt;
&lt;p&gt;Thanks&lt;br&gt;
Garrett&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-10T14:39:35+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-10T14:39:38+01:00</updated-at>
      <user-id type="integer">12758</user-id>
      <version type="integer">5</version>
      <user-name>garrett</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>A-ha, that makes sense. I'm reopening it. Can you try a patch or a failing test case?</body>
      <body-html>&lt;div&gt;&lt;p&gt;A-ha, that makes sense. I'm reopening it. Can you try a patch or
a failing test case?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-10T14:50:48+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- 
:state: invalid
:milestone: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-10T14:50:52+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">6</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm curious what the valid use case is for this functionality.  Maybe I'm misunderstanding the issue.. but when would it be useful to indicate to Rails that an object's resource identifier has a forward slash?  That would adversely affect route generation for a resource and seems to me that this would break the traditional ideas/implementation of REST.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm curious what the valid use case is for this functionality.
Maybe I'm misunderstanding the issue.. but when would it be useful
to indicate to Rails that an object's resource identifier has a
forward slash? That would adversely affect route generation for a
resource and seems to me that this would break the traditional
ideas/implementation of REST.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-11T03:47:45+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-11T03:47:49+01:00</updated-at>
      <user-id type="integer">18798</user-id>
      <version type="integer">7</version>
      <user-name>Nathaniel Bibler</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It's a good question Nathaniel and I'm glad to give you my own personal case.

Basically take any hierarchical model (in my case a set of Areas or Regions) where you're wanting to use some property other than it's database id in the url (to_param).

Use Dublin as the example. It has inner regions such as Phibsboro, Cabra, Ranelagh, Castleknock, Whitehall, etc. Which could logically be further subdivided.

basically you want the url for the resource to behave like this:

/areas/dublin - displays all data for dublin and its inner areas
/areas/dublin/whitehall - refines the data for this inner area only

the fact is, there's more than one city with a region called Whitehall. London would be one.

/areas/london/whitehall.

/areas/whitehall actually makes no sense on its own and having a url such as /areas/london_whitehall just isn't the experience you're after.

You could perhaps argue that these should be split out into separate models but that would mean you need a new model for every level of subdivision?

As we know, REST has no rules about what an identification must conform to other than that it can uniquely identify the resource. In this case the hierarchical path to the resource is this unique identifier.

anyways, thats my take on it. Opinions welcomed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It's a good question Nathaniel and I'm glad to give you my own
personal case.&lt;/p&gt;
&lt;p&gt;Basically take any hierarchical model (in my case a set of Areas
or Regions) where you're wanting to use some property other than
it's database id in the url (to_param).&lt;/p&gt;
&lt;p&gt;Use Dublin as the example. It has inner regions such as
Phibsboro, Cabra, Ranelagh, Castleknock, Whitehall, etc. Which
could logically be further subdivided.&lt;/p&gt;
&lt;p&gt;basically you want the url for the resource to behave like
this:&lt;/p&gt;
&lt;p&gt;/areas/dublin - displays all data for dublin and its inner areas
/areas/dublin/whitehall - refines the data for this inner area
only&lt;/p&gt;
&lt;p&gt;the fact is, there's more than one city with a region called
Whitehall. London would be one.&lt;/p&gt;
&lt;p&gt;/areas/london/whitehall.&lt;/p&gt;
&lt;p&gt;/areas/whitehall actually makes no sense on its own and having a
url such as /areas/london_whitehall just isn't the experience
you're after.&lt;/p&gt;
&lt;p&gt;You could perhaps argue that these should be split out into
separate models but that would mean you need a new model for every
level of subdivision?&lt;/p&gt;
&lt;p&gt;As we know, REST has no rules about what an identification must
conform to other than that it can uniquely identify the resource.
In this case the hierarchical path to the resource is this unique
identifier.&lt;/p&gt;
&lt;p&gt;anyways, thats my take on it. Opinions welcomed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-12T12:36:02+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-12T12:36:05+01:00</updated-at>
      <user-id type="integer">12758</user-id>
      <version type="integer">8</version>
      <user-name>garrett</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>garret,

Could you use `match &quot;/areas/*locales&quot; =&gt; &quot;areas#show&quot;` in your routes? That value should then be accessible through `params[:locales]`. At least, according to the &quot;edge docs note on route globbing&quot;:http://guides.rails.info/routing.html#route-globbing.</body>
      <body-html>&lt;div&gt;&lt;p&gt;garret,&lt;/p&gt;
&lt;p&gt;Could you use &lt;code&gt;match &quot;/areas/*locales&quot; =&amp;gt;
&quot;areas#show&quot;&lt;/code&gt; in your routes? That value should then be
accessible through &lt;code&gt;params[:locales]&lt;/code&gt;. At least,
according to the &lt;a href=
&quot;http://guides.rails.info/routing.html#route-globbing&quot;&gt;edge docs
note on route globbing&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-12T13:01:29+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-12T13:01:31+01:00</updated-at>
      <user-id type="integer">23746</user-id>
      <version type="integer">9</version>
      <user-name>Aupajo</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I think you're digging yourself a big hole trying to do it with resources. What happens to the edit and new actions? e.g:

@@@
  # need the :id regex to get the route to be recognized
  resources :areas, :id =&gt; /.+/

  # GET /areas/uk/england/new 
  # -&gt; {&quot;action&quot;=&gt;&quot;show&quot;, &quot;id&quot;=&gt;&quot;uk/england/new&quot;, &quot;controller&quot;=&gt;&quot;areas&quot;}
@@@

If you are just using it for showing areas then just use standard routes:

@@@
  get 'areas/*id' =&gt; 'areas#show'
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think you're digging yourself a big hole trying to do it with
resources. What happens to the edit and new actions? e.g:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  # need the :id regex to get the route to be recognized
  resources :areas, :id =&amp;gt; /.+/

  # GET /areas/uk/england/new 
  # -&amp;gt; {&quot;action&quot;=&amp;gt;&quot;show&quot;, &quot;id&quot;=&amp;gt;&quot;uk/england/new&quot;, &quot;controller&quot;=&amp;gt;&quot;areas&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;If you are just using it for showing areas then just use
standard routes:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  get 'areas/*id' =&amp;gt; 'areas#show'&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-12T13:03:40+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-12T13:03:46+01:00</updated-at>
      <user-id type="integer">7697</user-id>
      <version type="integer">10</version>
      <user-name>Andrew White</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi Andrew

I agree completely that in the current mechanism its a bit difficult. It's probably workable with a more sophisticated regex match.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Andrew&lt;/p&gt;
&lt;p&gt;I agree completely that in the current mechanism its a bit
difficult. It's probably workable with a more sophisticated regex
match.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-12T13:16:54+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-12T13:16:57+01:00</updated-at>
      <user-id type="integer">12758</user-id>
      <version type="integer">11</version>
      <user-name>garrett</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>So can I mark this as invalid?</body>
      <body-html>&lt;div&gt;&lt;p&gt;So can I mark this as invalid?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-25T09:26:32+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-25T09:26:35+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">12</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Actually more wontfix rather than invalid as doing the following escapes the path:

@@@ ruby
# config/routes.rb
match &quot;/*path&quot; =&gt; &quot;pages#show&quot;, :as =&gt; :page

# rails console
&gt;&gt; include Rails::Application.routes.url_helpers

&gt;&gt; page_path(&quot;path/to/page&quot;)
=&gt; &quot;/path%2Fto%2Fpage&quot;

&gt;&gt; page_path(%w(path to page))
=&gt; &quot;/path/to/page&quot;
@@@

However it can't be fixed as the code that does the escaping can't know about type of segment. The best workaround is to override the url helper, e.g:

@@@ ruby
# app/helpers/application_helper.rb
def page_path(path, options = {})
  super(path.split('/'), options)
end

# rails console
&gt;&gt; include Rails::Application.routes.url_helpers
&gt;&gt; include ApplicationHelper

&gt;&gt; page_path(&quot;path/to/page&quot;)
=&gt; &quot;/path/to/page&quot;
@@@

One thing that is surprising to me is that while Rack::Mount does the actual url generation it doesn't appear to do any parameter escaping.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Actually more wontfix rather than invalid as doing the following
escapes the path:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;# config/routes.rb
match &quot;/*path&quot; =&amp;gt; &quot;pages#show&quot;, :as =&amp;gt; :page

# rails console
&amp;gt;&amp;gt; include Rails::Application.routes.url_helpers

&amp;gt;&amp;gt; page_path(&quot;path/to/page&quot;)
=&amp;gt; &quot;/path%2Fto%2Fpage&quot;

&amp;gt;&amp;gt; page_path(%w(path to page))
=&amp;gt; &quot;/path/to/page&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;However it can't be fixed as the code that does the escaping
can't know about type of segment. The best workaround is to
override the url helper, e.g:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;# app/helpers/application_helper.rb
def page_path(path, options = {})
  super(path.split('/'), options)
end

# rails console
&amp;gt;&amp;gt; include Rails::Application.routes.url_helpers
&amp;gt;&amp;gt; include ApplicationHelper

&amp;gt;&amp;gt; page_path(&quot;path/to/page&quot;)
=&amp;gt; &quot;/path/to/page&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;One thing that is surprising to me is that while Rack::Mount
does the actual url generation it doesn't appear to do any
parameter escaping.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-25T16:01:30+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-25T16:01:32+01:00</updated-at>
      <user-id type="integer">7697</user-id>
      <version type="integer">13</version>
      <user-name>Andrew White</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-25T16:02:55+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-04-25T16:02:57+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">14</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:50+01:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2010-10-15T23:01:50+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">15</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>thank you very much......&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/&quot;&gt;&#1605;&#1606;&#1578;&#1583;&#1610;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&#1605;&#1603;&#1610;&#1575;&#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1575;&#1586;&#1610;&#1575;&#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1601;&#1587;&#1575;&#1578;&#1610;&#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&#1585;&#1587;&#1575;&#1574;&#1604; 
- &#1605;&#1587;&#1580;&#1575;&#1578; - &#1608;&#1587;&#1575;&#1574;&#1591;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&#1578;&#1608;&#1576;&#1610;&#1603;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&#1608;&#1592;&#1575;&#1574;&#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&#1576;&#1585;&#1608;&#1603;&#1587;&#1610;&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt; &lt;a href=&quot;http://forum.line-sport.tv/&quot;&gt;&#1604;&#1575;&#1610;&#1606; &#1587;&#1576;&#1608;&#1585;&#1578;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;thank you very much......&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/&quot;&gt;&amp;#1605;&amp;#1606;&amp;#1578;&amp;#1583;&amp;#1610;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&amp;#1605;&amp;#1603;&amp;#1610;&amp;#1575;&amp;#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1575;&amp;#1586;&amp;#1610;&amp;#1575;&amp;#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1601;&amp;#1587;&amp;#1575;&amp;#1578;&amp;#1610;&amp;#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&amp;#1585;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1604;&lt;br&gt;
- &amp;#1605;&amp;#1587;&amp;#1580;&amp;#1575;&amp;#1578; -
&amp;#1608;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1591;&lt;/a&gt;&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&amp;#1578;&amp;#1608;&amp;#1576;&amp;#1610;&amp;#1603;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&amp;#1608;&amp;#1592;&amp;#1575;&amp;#1574;&amp;#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt;
&lt;a href=
&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&amp;#1576;&amp;#1585;&amp;#1608;&amp;#1603;&amp;#1587;&amp;#1610;&lt;/a&gt;
&lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt; &lt;a href=
&quot;http://forum.line-sport.tv/&quot;&gt;&amp;#1604;&amp;#1575;&amp;#1610;&amp;#1606;
&amp;#1587;&amp;#1576;&amp;#1608;&amp;#1585;&amp;#1578;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-08T11:27:47+00:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2011-02-08T12:16:11+00:00</updated-at>
      <user-id type="integer">136126</user-id>
      <version type="integer">16</version>
      <user-name>alasiri1</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;You may also study the actual seems inside the Pandora charms as a result &lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;of add-on including cherished jewels, crimson along with amethyst,&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/pandora-bracelets-c-3.html&quot;&gt;&lt;em&gt;Pandoras Bracelets&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; whichever satisfies ones money your identity. In order a lot more solutions, it is best to look at silver charms provided simply by Pandora.&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/pandora-charms-c-9.html&quot;&gt;&lt;em&gt;Pandora&#160;Charms&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; Couldn't everyone appearance great understand a majority of these &lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;earrings which can be created together with your manufacturer,&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;pandora ireland&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; initials or simply brief?</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;You
may also study the actual seems inside the Pandora charms as a
result &lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora
NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;of add-on including cherished jewels, crimson
along with amethyst,&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/pandora-bracelets-c-3.html&quot;&gt;&lt;em&gt;Pandoras
Bracelets&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; whichever satisfies ones money your
identity. In order a lot more solutions, it is best to look at
silver charms provided simply by Pandora.&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/pandora-charms-c-9.html&quot;&gt;&lt;em&gt;Pandora&amp;nbsp;Charms&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;
Couldn't everyone appearance great understand a majority of these
&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora
NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;earrings which can be created together with
your manufacturer,&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;pandora
ireland&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; initials or simply brief?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-14T06:09:46+00:00</created-at>
      <creator-id type="integer">12758</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4334</number>
      <permalink>to_param-and-resource_path-escapes-forward-slashes</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>&quot;url_for resource_path to_param&quot;</tag>
      <title>to_param and &lt;resource&gt;_path() escapes forward slashes</title>
      <updated-at type="datetime">2011-02-14T07:28:43+00:00</updated-at>
      <user-id type="integer">136876</user-id>
      <version type="integer">17</version>
      <user-name>pandora jewellry</user-name>
      <creator-name>garrett</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4334</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
