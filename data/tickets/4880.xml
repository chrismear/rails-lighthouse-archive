<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-06-17T02:48:51+01:00</created-at>
  <creator-id type="integer">103585</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4880</number>
  <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>&quot;presence falseclass&quot;</tag>
  <title>FalseClass should return false on a .presence check not nil</title>
  <updated-at type="datetime">2010-06-17T02:49:07+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">8</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Philip Arndt</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
  <priority-name nil="true"></priority-name>
  <original-body>When you create a variable and set it to ``false`` and then use ``.presence`` on it, ``.presence`` returns ``nil`` where it should return ``false``.

I've attached a patch which solves this by adding the presence method to FalseClass and always returning self from it.
I've also updated the relevant tests to handle this change.</original-body>
  <latest-body>When you create a variable and set it to ``false`` and then use ``.presence`` on it, ``.presence`` returns ``nil`` where it should return ``false``.

I've attached a patch which solves this by adding the presence method to FalseClass and always returning self from it.
I've also updated the relevant tests to handle this change.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When you create a variable and set it to &lt;code&gt;false&lt;/code&gt; and
then use &lt;code&gt;.presence&lt;/code&gt; on it, &lt;code&gt;.presence&lt;/code&gt;
returns &lt;code&gt;nil&lt;/code&gt; where it should return
&lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I've attached a patch which solves this by adding the presence
method to FalseClass and always returning self from it.&lt;br&gt;
I've also updated the relevant tests to handle this change.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When you create a variable and set it to ``false`` and then use ``.presence`` on it, ``.presence`` returns ``nil`` where it should return ``false``.

I've attached a patch which solves this by adding the presence method to FalseClass and always returning self from it.
I've also updated the relevant tests to handle this change.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When you create a variable and set it to &lt;code&gt;false&lt;/code&gt; and
then use &lt;code&gt;.presence&lt;/code&gt; on it, &lt;code&gt;.presence&lt;/code&gt;
returns &lt;code&gt;nil&lt;/code&gt; where it should return
&lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I've attached a patch which solves this by adding the presence
method to FalseClass and always returning self from it.&lt;br&gt;
I've also updated the relevant tests to handle this change.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-16T23:37:08+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-16T23:37:18+01:00</updated-at>
      <user-id type="integer">103585</user-id>
      <version type="integer">1</version>
      <user-name>Philip Arndt</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">14998</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-16T23:43:29+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-16T23:43:37+01:00</updated-at>
      <user-id type="integer">103587</user-id>
      <version type="integer">2</version>
      <user-name>Steven Heidel</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Ryan Bigg</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-17T00:02:15+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 14998
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-17T00:02:21+01:00</updated-at>
      <user-id type="integer">103585</user-id>
      <version type="integer">3</version>
      <user-name>Philip Arndt</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-17T00:05:28+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-17T00:06:26+01:00</updated-at>
      <user-id type="integer">19750</user-id>
      <version type="integer">4</version>
      <user-name>David Jones</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-17T00:18:13+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-17T00:19:48+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">5</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;blockquote&gt;returns nil where it should return false&lt;/blockquote&gt;

Why should it? The lack of presence is `nil`, and `false` is not present, like `&quot;  &quot;` and `[]`.</body>
      <body-html>&lt;div&gt;&lt;blockquote&gt;returns nil where it should return false&lt;/blockquote&gt;
&lt;p&gt;Why should it? The lack of presence is &lt;code&gt;nil&lt;/code&gt;, and
&lt;code&gt;false&lt;/code&gt; is not present, like &lt;code&gt;&quot; &quot;&lt;/code&gt; and
&lt;code&gt;[]&lt;/code&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-17T00:54:07+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-17T00:54:13+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">6</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>false is a valid instance of the FalseClass and so a false value is in essence present, just like how currently true is returned as a valid instance of the TrueClass for true.presence - these are different than empty string or empty array.

Currently we get:

``true.presence #=&gt; true``

``false.presence #=&gt; nil``

Merging this patch means that you (more consistently I think) get:

``true.presence #=&gt; true``

``false.presence #=&gt; false``


``if`` statements will still work in the same fashion as before the only difference is that Rails no longer is hiding the actual value of false.</body>
      <body-html>&lt;div&gt;&lt;p&gt;false is a valid instance of the FalseClass and so a false value
is in essence present, just like how currently true is returned as
a valid instance of the TrueClass for true.presence - these are
different than empty string or empty array.&lt;/p&gt;
&lt;p&gt;Currently we get:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;true.presence #=&amp;gt; true&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;false.presence #=&amp;gt; nil&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Merging this patch means that you (more consistently I think)
get:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;true.presence #=&amp;gt; true&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;false.presence #=&amp;gt; false&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;if&lt;/code&gt; statements will still work in the same fashion
as before the only difference is that Rails no longer is hiding the
actual value of false.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-17T01:39:49+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-17T01:39:54+01:00</updated-at>
      <user-id type="integer">103585</user-id>
      <version type="integer">7</version>
      <user-name>Philip Arndt</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>`false.blank? # =&gt; true`

`false.present? # =&gt; false`

Presence is universal for all objects. If an object is not `blank?`, `self` is returned. True and false are not special cases.</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;code&gt;false.blank? # =&amp;gt; true&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;false.present? # =&amp;gt; false&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Presence is universal for all objects. If an object is not
&lt;code&gt;blank?&lt;/code&gt;, &lt;code&gt;self&lt;/code&gt; is returned. True and false
are not special cases.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-17T02:48:51+01:00</created-at>
      <creator-id type="integer">103585</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4880</number>
      <permalink>falseclass-should-return-false-on-a-presence-check-not-nil</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>&quot;presence falseclass&quot;</tag>
      <title>FalseClass should return false on a .presence check not nil</title>
      <updated-at type="datetime">2010-06-17T02:49:04+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Philip Arndt</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4880</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>b33df2830c88aeb31f352136858e75c7ca9a7416</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-16T23:37:08+01:00</created-at>
      <filename>make-falseclass-presence-return-false.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">562627</id>
      <size type="integer">1638</size>
      <uploader-id type="integer">103585</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/562627/make-falseclass-presence-return-false.diff</url>
    </attachment>
  </attachments>
</ticket>
