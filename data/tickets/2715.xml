<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-05-25T16:41:09+01:00</created-at>
  <creator-id type="integer">10679</creator-id>
  <milestone-due-on type="datetime">2009-01-31T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">2715</number>
  <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
  <priority type="integer">6</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2-3-stable</tag>
  <title>Failsafe middleware doesn't render 500.html as ERB</title>
  <updated-at type="datetime">2009-05-27T21:02:03+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">10</version>
  <user-name>Repository</user-name>
  <creator-name>Hongli Lai</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
  <priority-name nil="true"></priority-name>
  <original-body>500.html is actually an ERB template: it instructs the reader to read the appropriate log file to find out what went wrong, in case he's the administrator. This is good for usability because apparently a lot of people don't know that they're supposed to read the log file.

The Rescue middleware correctly renders 500.html as ERB, but the Failsafe middleware does not. This patch solves the problem, and also adds unit tests for Failsafe. It also makes the default static Failsafe response (which is returned in case ERB rendering fails as well) more friendly.

This patch is for Rails 2.3.</original-body>
  <latest-body>500.html is actually an ERB template: it instructs the reader to read the appropriate log file to find out what went wrong, in case he's the administrator. This is good for usability because apparently a lot of people don't know that they're supposed to read the log file.

The Rescue middleware correctly renders 500.html as ERB, but the Failsafe middleware does not. This patch solves the problem, and also adds unit tests for Failsafe. It also makes the default static Failsafe response (which is returned in case ERB rendering fails as well) more friendly.

This patch is for Rails 2.3.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;500.html is actually an ERB template: it instructs the reader to
read the appropriate log file to find out what went wrong, in case
he's the administrator. This is good for usability because
apparently a lot of people don't know that they're supposed to read
the log file.&lt;/p&gt;
&lt;p&gt;The Rescue middleware correctly renders 500.html as ERB, but the
Failsafe middleware does not. This patch solves the problem, and
also adds unit tests for Failsafe. It also makes the default static
Failsafe response (which is returned in case ERB rendering fails as
well) more friendly.&lt;/p&gt;
&lt;p&gt;This patch is for Rails 2.3.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>500.html is actually an ERB template: it instructs the reader to read the appropriate log file to find out what went wrong, in case he's the administrator. This is good for usability because apparently a lot of people don't know that they're supposed to read the log file.

The Rescue middleware correctly renders 500.html as ERB, but the Failsafe middleware does not. This patch solves the problem, and also adds unit tests for Failsafe. It also makes the default static Failsafe response (which is returned in case ERB rendering fails as well) more friendly.

This patch is for Rails 2.3.</body>
      <body-html>&lt;div&gt;&lt;p&gt;500.html is actually an ERB template: it instructs the reader to
read the appropriate log file to find out what went wrong, in case
he's the administrator. This is good for usability because
apparently a lot of people don't know that they're supposed to read
the log file.&lt;/p&gt;
&lt;p&gt;The Rescue middleware correctly renders 500.html as ERB, but the
Failsafe middleware does not. This patch solves the problem, and
also adds unit tests for Failsafe. It also makes the default static
Failsafe response (which is returned in case ERB rendering fails as
well) more friendly.&lt;/p&gt;
&lt;p&gt;This patch is for Rails 2.3.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-25T16:41:09+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-25T16:41:14+01:00</updated-at>
      <user-id type="integer">10679</user-id>
      <version type="integer">1</version>
      <user-name>Hongli Lai</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-25T16:42:25+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-25T16:42:29+01:00</updated-at>
      <user-id type="integer">10679</user-id>
      <version type="integer">2</version>
      <user-name>Hongli Lai</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Issue #2716 has a similar patch, but for Rails 3.0.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Issue &lt;a href=&quot;/projects/8994/tickets/2716&quot; title=
&quot;Ticket #2716&quot;&gt;#2716&lt;/a&gt; has a similar patch, but for Rails
3.0.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-25T16:46:06+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-25T16:46:12+01:00</updated-at>
      <user-id type="integer">10679</user-id>
      <version type="integer">3</version>
      <user-name>Hongli Lai</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>ERB was removed from 500.html in 81c7a5d48d972c9e3973b4c018fafae1dfd9c0de and the code to render it was removed in 10b6073968eb43a3e20efd352d97d08720beeb12</body>
      <body-html>&lt;div&gt;&lt;p&gt;ERB was removed from 500.html in
81c7a5d48d972c9e3973b4c018fafae1dfd9c0de and the code to render it
was removed in 10b6073968eb43a3e20efd352d97d08720beeb12&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-25T17:04:12+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-25T17:04:14+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">4</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-25T17:26:44+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-25T17:26:46+01:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">5</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hm, I see. But it's still a huge usability issue. &quot;Help my app says that something went wrong but I don't know what to do!&quot; is one of the most often asked questions, and especially people who have little prior experience with administering Unix systems do not know that they're supposed to look in log files.

Here's a new patch. It removes the ERB rendering but it retains the improved error messages.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hm, I see. But it's still a huge usability issue. &quot;Help my app
says that something went wrong but I don't know what to do!&quot; is one
of the most often asked questions, and especially people who have
little prior experience with administering Unix systems do not know
that they're supposed to look in log files.&lt;/p&gt;
&lt;p&gt;Here's a new patch. It removes the ERB rendering but it retains
the improved error messages.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-25T18:50:10+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-25T18:50:16+01:00</updated-at>
      <user-id type="integer">10679</user-id>
      <version type="integer">6</version>
      <user-name>Hongli Lai</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>We shouldn't put &quot;(If you're the administrator of this website, then please read this application's log file and/or the web server's log file to find out what went wrong.)&lt;/small&gt;&quot; message. Especially after &quot;we've been notified&quot;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;We shouldn't put &quot;(If you're the administrator of this website,
then please read this application's log file and/or the web
server's log file to find out what went wrong.)&quot; message.
Especially after &quot;we've been notified&quot;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-26T13:54:10+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-26T13:54:15+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">7</version>
      <user-name>Pratik</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>What do you think would be the best message?</body>
      <body-html>&lt;div&gt;&lt;p&gt;What do you think would be the best message?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-26T15:00:46+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-26T15:00:49+01:00</updated-at>
      <user-id type="integer">10679</user-id>
      <version type="integer">8</version>
      <user-name>Hongli Lai</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I think it's a good change that gently pushes new Rails devs the right direction. Most production apps have replaced their 500.html with something better anyway.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think it's a good change that gently pushes new Rails devs the
right direction. Most production apps have replaced their 500.html
with something better anyway.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-27T00:12:03+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-27T00:12:06+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">9</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [34a1ed0df8311aba350043ec7ef373da3058855f]) Make the Failsafe middleware attempt to render 500.html during failsafe response rendering. Also make the default static failsafe response more friendly, in case 500.html rendering fails. [#2715 state:resolved]

Signed-off-by: Joshua Peek &lt;josh@joshpeek.com&gt;
http://github.com/rails/rails/commit/34a1ed0df8311aba350043ec7ef373da3058855f</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/34a1ed0df8311aba350043ec7ef373da3058855f&quot;
title=
&quot;Changeset [34a1ed0df8311aba350043ec7ef373da3058855f]&quot;&gt;[34a1ed0df8311aba350043ec7ef373da3058855f]&lt;/a&gt;)
Make the Failsafe middleware attempt to render 500.html during
failsafe response rendering. Also make the default static failsafe
response more friendly, in case 500.html rendering fails. [&lt;a href=
&quot;/projects/8994/tickets/2715&quot; title=&quot;Ticket #2715&quot;&gt;#2715&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Joshua Peek &lt;a&gt;josh@joshpeek.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/34a1ed0df8311aba350043ec7ef373da3058855f&quot;&gt;
http://github.com/rails/rails/commit/34a1ed0df8311aba350043ec7ef373...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-05-27T21:02:02+01:00</created-at>
      <creator-id type="integer">10679</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2715</number>
      <permalink>failsafe-middleware-doesnt-render-500html-as-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2-3-stable</tag>
      <title>Failsafe middleware doesn't render 500.html as ERB</title>
      <updated-at type="datetime">2009-05-27T21:02:03+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">10</version>
      <user-name>Repository</user-name>
      <creator-name>Hongli Lai</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2715</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>bef8dbcea2ceac62efd46ab5b8cb40b56875525d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-25T16:41:10+01:00</created-at>
      <filename>0001-Make-the-Failsafe-middleware-attempt-to-render-500.h.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">125979</id>
      <size type="integer">6833</size>
      <uploader-id type="integer">10679</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/125979/0001-Make-the-Failsafe-middleware-attempt-to-render-500.h.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>6fd470442937410585a1c6decbf57494dfe0b97e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-25T18:50:10+01:00</created-at>
      <filename>0001-In-the-default-failsafe-message-and-the-default-500.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">126000</id>
      <size type="integer">7157</size>
      <uploader-id type="integer">10679</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/126000/0001-In-the-default-failsafe-message-and-the-default-500.patch</url>
    </attachment>
  </attachments>
</ticket>
