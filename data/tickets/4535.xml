<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-05-05T07:08:54+01:00</created-at>
  <creator-id type="integer">97766</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4535</number>
  <permalink>bug-when-running-rails</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag nil="true"></tag>
  <title>bug when running rails</title>
  <updated-at type="datetime">2010-05-08T23:16:59+01:00</updated-at>
  <user-id type="integer">14998</user-id>
  <version type="integer">4</version>
  <user-name>Ryan Bigg</user-name>
  <creator-name>mica eked</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4535</url>
  <priority-name>Low</priority-name>
  <original-body>this segfault happens on both edge rails and rails3beta3
this happens after starting a server and requesting a page. sometimes it works, sometimes it does not (it works about 30% of the time)
also happens when i try to use other servers instead of webrick, such as thin

here is the console output:

@@@ console
mica-ekeds-mac:ink micaeked$ uname -a
Darwin mica-ekeds-mac 10.3.0 Darwin Kernel Version 10.3.0: Fri Feb 26 11:57:13 PST 2010; root:xnu-1504.3.12~1/RELEASE_X86_64 x86_64
mica-ekeds-mac:ink micaeked$ rails s
=&gt; Booting WEBrick
=&gt; Rails 3.0.0.beta3 application starting in development on http://0.0.0.0:3000
=&gt; Call with -d to detach
=&gt; Ctrl-C to shutdown server
[2010-05-04 22:56:35] INFO  WEBrick 1.3.1
[2010-05-04 22:56:35] INFO  ruby 1.9.1 (2009-12-07) [i386-darwin10.2.0]
[2010-05-04 22:56:35] INFO  WEBrick::HTTPServer#start: pid=46644 port=3000
[BUG] Segmentation fault
ruby 1.9.1p376 (2009-12-07 revision 26041) [i386-darwin10.2.0]

-- control frame ----------
c:0024 p:87122 s:0143 b:0142 l:000141 d:000141 METHOD (null):412
c:0023 p:0024 s:0132 b:0132 l:000131 d:000131 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0022 p:0013 s:0126 b:0126 l:0017e0 d:0017e0 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0021 p:0014 s:0122 b:0122 l:000121 d:000121 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105
c:0020 p:0046 s:0112 b:0112 l:000111 d:000111 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0019 p:0014 s:0108 b:0108 l:000107 d:000107 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0018 p:0026 s:0100 b:0100 l:000099 d:000099 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0017 p:0031 s:0096 b:0096 l:000095 d:000095 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17
c:0016 p:0051 s:0087 b:0087 l:000086 d:000086 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0015 p:0013 s:0083 b:0083 l:000077 d:000082 BLOCK  /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0014 p:0019 s:0081 b:0081 l:000080 d:000080 METHOD &lt;internal:prelude&gt;:8
c:0013 p:0052 s:0078 b:0078 l:000077 d:000077 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0012 p:0189 s:0073 b:0073 l:000072 d:000072 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0011 p:0032 s:0066 b:0066 l:000065 d:000065 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0010 p:0021 s:0062 b:0062 l:000061 d:000061 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0009 p:---- s:0057 b:0057 l:000056 d:000056 FINISH
c:0008 p:0014 s:0055 b:0055 l:000054 d:000054 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0007 p:0014 s:0050 b:0050 l:000049 d:000049 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13
c:0006 p:0320 s:0042 b:0042 l:000041 d:000041 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48
c:0005 p:0256 s:0030 b:0030 l:000029 d:000029 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111
c:0004 p:0382 s:0020 b:0020 l:000019 d:000019 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70
c:0003 p:0123 s:0009 b:0009 l:001a98 d:000008 BLOCK  /usr/local/lib/ruby/1.9.1/webrick/server.rb:183
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   
---------------------------
-- Ruby level backtrace information-----------------------------------------
(null):412:in `'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/logger.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `block in call'
&lt;internal:prelude&gt;:8:in `synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:132:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:81:in `method_missing'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/log_tailer.rb:15:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

-- C level backtrace information -------------------------------------------
0x100109fbd 0   ruby                                0x0000000100109fbd rb_vm_bugreport + 77
0x100028794 1   ruby                                0x0000000100028794 report_bug + 260
0x100028928 2   ruby                                0x0000000100028928 rb_bug + 200
0x1000b45d4 3   ruby                                0x00000001000b45d4 sigsegv + 132
0x7fff85dae80a 4   libSystem.B.dylib                   0x00007fff85dae80a _sigtramp + 26
0xffffffffffffffff 5   ???                                 0xffffffffffffffff 0x0 + 18446744073709551615
0x100101dc3 6   ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103d30 7   ruby                                0x0000000100103d30 vm_call0 + 624
0x1000fb4d8 8   ruby                                0x00000001000fb4d8 rb_funcall2 + 296
0x1000fb828 9   ruby                                0x00000001000fb828 vm_method_missing + 184
0x1000fbb58 10  ruby                                0x00000001000fbb58 vm_call_method + 760
0x1000fcb2c 11  ruby                                0x00000001000fcb2c vm_exec_core + 3180
0x100101dc3 12  ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103873 13  ruby                                0x0000000100103873 rb_vm_invoke_proc + 691
0x10010ea33 14  ruby                                0x000000010010ea33 thread_start_func_2 + 835
0x10010eb51 15  ruby                                0x000000010010eb51 thread_start_func_1 + 17
0x7fff85d878b6 16  libSystem.B.dylib                   0x00007fff85d878b6 _pthread_start + 331
0x7fff85d87769 17  libSystem.B.dylib                   0x00007fff85d87769 thread_start + 13

[NOTE]
You may encounter a bug of Ruby interpreter. Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap
mica-ekeds-mac:ink micaeked$ rails -v
Rails 3.0.0.beta3
mica-ekeds-mac:ink micaeked$ bundle show rails
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master
@@@

the only relevant line i could find is

@@@ console
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
@@@

but i have no idea what part of callbacks.rb:88 is causing it to break

@@@ ruby
    def run_callbacks(kind, *args, &amp;block)
      send(&quot;_run_#{kind}_callbacks&quot;, *args, &amp;block)
    end
@@@</original-body>
  <latest-body>this segfault happens on both edge rails and rails3beta3
this happens after starting a server and requesting a page. sometimes it works, sometimes it does not (it works about 30% of the time)
also happens when i try to use other servers instead of webrick, such as thin

here is the console output:

@@@ console
mica-ekeds-mac:ink micaeked$ uname -a
Darwin mica-ekeds-mac 10.3.0 Darwin Kernel Version 10.3.0: Fri Feb 26 11:57:13 PST 2010; root:xnu-1504.3.12~1/RELEASE_X86_64 x86_64
mica-ekeds-mac:ink micaeked$ rails s
=&gt; Booting WEBrick
=&gt; Rails 3.0.0.beta3 application starting in development on http://0.0.0.0:3000
=&gt; Call with -d to detach
=&gt; Ctrl-C to shutdown server
[2010-05-04 22:56:35] INFO  WEBrick 1.3.1
[2010-05-04 22:56:35] INFO  ruby 1.9.1 (2009-12-07) [i386-darwin10.2.0]
[2010-05-04 22:56:35] INFO  WEBrick::HTTPServer#start: pid=46644 port=3000
[BUG] Segmentation fault
ruby 1.9.1p376 (2009-12-07 revision 26041) [i386-darwin10.2.0]

-- control frame ----------
c:0024 p:87122 s:0143 b:0142 l:000141 d:000141 METHOD (null):412
c:0023 p:0024 s:0132 b:0132 l:000131 d:000131 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0022 p:0013 s:0126 b:0126 l:0017e0 d:0017e0 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0021 p:0014 s:0122 b:0122 l:000121 d:000121 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105
c:0020 p:0046 s:0112 b:0112 l:000111 d:000111 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0019 p:0014 s:0108 b:0108 l:000107 d:000107 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0018 p:0026 s:0100 b:0100 l:000099 d:000099 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0017 p:0031 s:0096 b:0096 l:000095 d:000095 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17
c:0016 p:0051 s:0087 b:0087 l:000086 d:000086 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0015 p:0013 s:0083 b:0083 l:000077 d:000082 BLOCK  /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0014 p:0019 s:0081 b:0081 l:000080 d:000080 METHOD &lt;internal:prelude&gt;:8
c:0013 p:0052 s:0078 b:0078 l:000077 d:000077 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0012 p:0189 s:0073 b:0073 l:000072 d:000072 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0011 p:0032 s:0066 b:0066 l:000065 d:000065 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0010 p:0021 s:0062 b:0062 l:000061 d:000061 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0009 p:---- s:0057 b:0057 l:000056 d:000056 FINISH
c:0008 p:0014 s:0055 b:0055 l:000054 d:000054 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0007 p:0014 s:0050 b:0050 l:000049 d:000049 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13
c:0006 p:0320 s:0042 b:0042 l:000041 d:000041 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48
c:0005 p:0256 s:0030 b:0030 l:000029 d:000029 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111
c:0004 p:0382 s:0020 b:0020 l:000019 d:000019 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70
c:0003 p:0123 s:0009 b:0009 l:001a98 d:000008 BLOCK  /usr/local/lib/ruby/1.9.1/webrick/server.rb:183
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   
---------------------------
-- Ruby level backtrace information-----------------------------------------
(null):412:in `'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/logger.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `block in call'
&lt;internal:prelude&gt;:8:in `synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:132:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:81:in `method_missing'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/log_tailer.rb:15:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

-- C level backtrace information -------------------------------------------
0x100109fbd 0   ruby                                0x0000000100109fbd rb_vm_bugreport + 77
0x100028794 1   ruby                                0x0000000100028794 report_bug + 260
0x100028928 2   ruby                                0x0000000100028928 rb_bug + 200
0x1000b45d4 3   ruby                                0x00000001000b45d4 sigsegv + 132
0x7fff85dae80a 4   libSystem.B.dylib                   0x00007fff85dae80a _sigtramp + 26
0xffffffffffffffff 5   ???                                 0xffffffffffffffff 0x0 + 18446744073709551615
0x100101dc3 6   ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103d30 7   ruby                                0x0000000100103d30 vm_call0 + 624
0x1000fb4d8 8   ruby                                0x00000001000fb4d8 rb_funcall2 + 296
0x1000fb828 9   ruby                                0x00000001000fb828 vm_method_missing + 184
0x1000fbb58 10  ruby                                0x00000001000fbb58 vm_call_method + 760
0x1000fcb2c 11  ruby                                0x00000001000fcb2c vm_exec_core + 3180
0x100101dc3 12  ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103873 13  ruby                                0x0000000100103873 rb_vm_invoke_proc + 691
0x10010ea33 14  ruby                                0x000000010010ea33 thread_start_func_2 + 835
0x10010eb51 15  ruby                                0x000000010010eb51 thread_start_func_1 + 17
0x7fff85d878b6 16  libSystem.B.dylib                   0x00007fff85d878b6 _pthread_start + 331
0x7fff85d87769 17  libSystem.B.dylib                   0x00007fff85d87769 thread_start + 13

[NOTE]
You may encounter a bug of Ruby interpreter. Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap
mica-ekeds-mac:ink micaeked$ rails -v
Rails 3.0.0.beta3
mica-ekeds-mac:ink micaeked$ bundle show rails
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master
@@@

the only relevant line i could find is

@@@ console
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
@@@

but i have no idea what part of callbacks.rb:88 is causing it to break

@@@ ruby
    def run_callbacks(kind, *args, &amp;block)
      send(&quot;_run_#{kind}_callbacks&quot;, *args, &amp;block)
    end
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;this segfault happens on both edge rails and rails3beta3&lt;br&gt;
this happens after starting a server and requesting a page.
sometimes it works, sometimes it does not (it works about 30% of
the time)&lt;br&gt;
also happens when i try to use other servers instead of webrick,
such as thin&lt;/p&gt;
&lt;p&gt;here is the console output:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;console&quot;&gt;mica-ekeds-mac:ink micaeked$ uname -a
Darwin mica-ekeds-mac 10.3.0 Darwin Kernel Version 10.3.0: Fri Feb 26 11:57:13 PST 2010; root:xnu-1504.3.12~1/RELEASE_X86_64 x86_64
mica-ekeds-mac:ink micaeked$ rails s
=&amp;gt; Booting WEBrick
=&amp;gt; Rails 3.0.0.beta3 application starting in development on http://0.0.0.0:3000
=&amp;gt; Call with -d to detach
=&amp;gt; Ctrl-C to shutdown server
[2010-05-04 22:56:35] INFO  WEBrick 1.3.1
[2010-05-04 22:56:35] INFO  ruby 1.9.1 (2009-12-07) [i386-darwin10.2.0]
[2010-05-04 22:56:35] INFO  WEBrick::HTTPServer#start: pid=46644 port=3000
[BUG] Segmentation fault
ruby 1.9.1p376 (2009-12-07 revision 26041) [i386-darwin10.2.0]

-- control frame ----------
c:0024 p:87122 s:0143 b:0142 l:000141 d:000141 METHOD (null):412
c:0023 p:0024 s:0132 b:0132 l:000131 d:000131 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0022 p:0013 s:0126 b:0126 l:0017e0 d:0017e0 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0021 p:0014 s:0122 b:0122 l:000121 d:000121 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105
c:0020 p:0046 s:0112 b:0112 l:000111 d:000111 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0019 p:0014 s:0108 b:0108 l:000107 d:000107 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0018 p:0026 s:0100 b:0100 l:000099 d:000099 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0017 p:0031 s:0096 b:0096 l:000095 d:000095 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17
c:0016 p:0051 s:0087 b:0087 l:000086 d:000086 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0015 p:0013 s:0083 b:0083 l:000077 d:000082 BLOCK  /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0014 p:0019 s:0081 b:0081 l:000080 d:000080 METHOD &amp;lt;internal:prelude&amp;gt;:8
c:0013 p:0052 s:0078 b:0078 l:000077 d:000077 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0012 p:0189 s:0073 b:0073 l:000072 d:000072 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0011 p:0032 s:0066 b:0066 l:000065 d:000065 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0010 p:0021 s:0062 b:0062 l:000061 d:000061 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0009 p:---- s:0057 b:0057 l:000056 d:000056 FINISH
c:0008 p:0014 s:0055 b:0055 l:000054 d:000054 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0007 p:0014 s:0050 b:0050 l:000049 d:000049 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13
c:0006 p:0320 s:0042 b:0042 l:000041 d:000041 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48
c:0005 p:0256 s:0030 b:0030 l:000029 d:000029 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111
c:0004 p:0382 s:0020 b:0020 l:000019 d:000019 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70
c:0003 p:0123 s:0009 b:0009 l:001a98 d:000008 BLOCK  /usr/local/lib/ruby/1.9.1/webrick/server.rb:183
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   
---------------------------
-- Ruby level backtrace information-----------------------------------------
(null):412:in `'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/logger.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `block in call'
&amp;lt;internal:prelude&amp;gt;:8:in `synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:132:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:81:in `method_missing'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/log_tailer.rb:15:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

-- C level backtrace information -------------------------------------------
0x100109fbd 0   ruby                                0x0000000100109fbd rb_vm_bugreport + 77
0x100028794 1   ruby                                0x0000000100028794 report_bug + 260
0x100028928 2   ruby                                0x0000000100028928 rb_bug + 200
0x1000b45d4 3   ruby                                0x00000001000b45d4 sigsegv + 132
0x7fff85dae80a 4   libSystem.B.dylib                   0x00007fff85dae80a _sigtramp + 26
0xffffffffffffffff 5   ???                                 0xffffffffffffffff 0x0 + 18446744073709551615
0x100101dc3 6   ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103d30 7   ruby                                0x0000000100103d30 vm_call0 + 624
0x1000fb4d8 8   ruby                                0x00000001000fb4d8 rb_funcall2 + 296
0x1000fb828 9   ruby                                0x00000001000fb828 vm_method_missing + 184
0x1000fbb58 10  ruby                                0x00000001000fbb58 vm_call_method + 760
0x1000fcb2c 11  ruby                                0x00000001000fcb2c vm_exec_core + 3180
0x100101dc3 12  ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103873 13  ruby                                0x0000000100103873 rb_vm_invoke_proc + 691
0x10010ea33 14  ruby                                0x000000010010ea33 thread_start_func_2 + 835
0x10010eb51 15  ruby                                0x000000010010eb51 thread_start_func_1 + 17
0x7fff85d878b6 16  libSystem.B.dylib                   0x00007fff85d878b6 _pthread_start + 331
0x7fff85d87769 17  libSystem.B.dylib                   0x00007fff85d87769 thread_start + 13

[NOTE]
You may encounter a bug of Ruby interpreter. Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap
mica-ekeds-mac:ink micaeked$ rails -v
Rails 3.0.0.beta3
mica-ekeds-mac:ink micaeked$ bundle show rails
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;the only relevant line i could find is&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;console&quot;&gt;/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;but i have no idea what part of callbacks.rb:88 is causing it to
break&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;    def run_callbacks(kind, *args, &amp;amp;block)
      send(&quot;_run_#{kind}_callbacks&quot;, *args, &amp;amp;block)
    end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>this segfault happens on both edge rails and rails3beta3
this happens after starting a server and requesting a page. sometimes it works, sometimes it does not (it works about 30% of the time)
also happens when i try to use other servers instead of webrick, such as thin

here is the console output:

@@@ console
mica-ekeds-mac:ink micaeked$ uname -a
Darwin mica-ekeds-mac 10.3.0 Darwin Kernel Version 10.3.0: Fri Feb 26 11:57:13 PST 2010; root:xnu-1504.3.12~1/RELEASE_X86_64 x86_64
mica-ekeds-mac:ink micaeked$ rails s
=&gt; Booting WEBrick
=&gt; Rails 3.0.0.beta3 application starting in development on http://0.0.0.0:3000
=&gt; Call with -d to detach
=&gt; Ctrl-C to shutdown server
[2010-05-04 22:56:35] INFO  WEBrick 1.3.1
[2010-05-04 22:56:35] INFO  ruby 1.9.1 (2009-12-07) [i386-darwin10.2.0]
[2010-05-04 22:56:35] INFO  WEBrick::HTTPServer#start: pid=46644 port=3000
[BUG] Segmentation fault
ruby 1.9.1p376 (2009-12-07 revision 26041) [i386-darwin10.2.0]

-- control frame ----------
c:0024 p:87122 s:0143 b:0142 l:000141 d:000141 METHOD (null):412
c:0023 p:0024 s:0132 b:0132 l:000131 d:000131 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0022 p:0013 s:0126 b:0126 l:0017e0 d:0017e0 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0021 p:0014 s:0122 b:0122 l:000121 d:000121 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105
c:0020 p:0046 s:0112 b:0112 l:000111 d:000111 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0019 p:0014 s:0108 b:0108 l:000107 d:000107 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0018 p:0026 s:0100 b:0100 l:000099 d:000099 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0017 p:0031 s:0096 b:0096 l:000095 d:000095 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17
c:0016 p:0051 s:0087 b:0087 l:000086 d:000086 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0015 p:0013 s:0083 b:0083 l:000077 d:000082 BLOCK  /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0014 p:0019 s:0081 b:0081 l:000080 d:000080 METHOD &lt;internal:prelude&gt;:8
c:0013 p:0052 s:0078 b:0078 l:000077 d:000077 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0012 p:0189 s:0073 b:0073 l:000072 d:000072 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0011 p:0032 s:0066 b:0066 l:000065 d:000065 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0010 p:0021 s:0062 b:0062 l:000061 d:000061 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0009 p:---- s:0057 b:0057 l:000056 d:000056 FINISH
c:0008 p:0014 s:0055 b:0055 l:000054 d:000054 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0007 p:0014 s:0050 b:0050 l:000049 d:000049 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13
c:0006 p:0320 s:0042 b:0042 l:000041 d:000041 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48
c:0005 p:0256 s:0030 b:0030 l:000029 d:000029 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111
c:0004 p:0382 s:0020 b:0020 l:000019 d:000019 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70
c:0003 p:0123 s:0009 b:0009 l:001a98 d:000008 BLOCK  /usr/local/lib/ruby/1.9.1/webrick/server.rb:183
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   
---------------------------
-- Ruby level backtrace information-----------------------------------------
(null):412:in `'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/logger.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `block in call'
&lt;internal:prelude&gt;:8:in `synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:132:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:81:in `method_missing'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/log_tailer.rb:15:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

-- C level backtrace information -------------------------------------------
0x100109fbd 0   ruby                                0x0000000100109fbd rb_vm_bugreport + 77
0x100028794 1   ruby                                0x0000000100028794 report_bug + 260
0x100028928 2   ruby                                0x0000000100028928 rb_bug + 200
0x1000b45d4 3   ruby                                0x00000001000b45d4 sigsegv + 132
0x7fff85dae80a 4   libSystem.B.dylib                   0x00007fff85dae80a _sigtramp + 26
0xffffffffffffffff 5   ???                                 0xffffffffffffffff 0x0 + 18446744073709551615
0x100101dc3 6   ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103d30 7   ruby                                0x0000000100103d30 vm_call0 + 624
0x1000fb4d8 8   ruby                                0x00000001000fb4d8 rb_funcall2 + 296
0x1000fb828 9   ruby                                0x00000001000fb828 vm_method_missing + 184
0x1000fbb58 10  ruby                                0x00000001000fbb58 vm_call_method + 760
0x1000fcb2c 11  ruby                                0x00000001000fcb2c vm_exec_core + 3180
0x100101dc3 12  ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103873 13  ruby                                0x0000000100103873 rb_vm_invoke_proc + 691
0x10010ea33 14  ruby                                0x000000010010ea33 thread_start_func_2 + 835
0x10010eb51 15  ruby                                0x000000010010eb51 thread_start_func_1 + 17
0x7fff85d878b6 16  libSystem.B.dylib                   0x00007fff85d878b6 _pthread_start + 331
0x7fff85d87769 17  libSystem.B.dylib                   0x00007fff85d87769 thread_start + 13

[NOTE]
You may encounter a bug of Ruby interpreter. Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap
mica-ekeds-mac:ink micaeked$ rails -v
Rails 3.0.0.beta3
mica-ekeds-mac:ink micaeked$ bundle show rails
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master
@@@

the only relevant line i could find is

@@@ console
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
@@@

but i have no idea what part of callbacks.rb:88 is causing it to break

@@@ ruby
    def run_callbacks(kind, *args, &amp;block)
      send(&quot;_run_#{kind}_callbacks&quot;, *args, &amp;block)
    end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;this segfault happens on both edge rails and rails3beta3&lt;br&gt;
this happens after starting a server and requesting a page.
sometimes it works, sometimes it does not (it works about 30% of
the time)&lt;br&gt;
also happens when i try to use other servers instead of webrick,
such as thin&lt;/p&gt;
&lt;p&gt;here is the console output:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;console&quot;&gt;mica-ekeds-mac:ink micaeked$ uname -a
Darwin mica-ekeds-mac 10.3.0 Darwin Kernel Version 10.3.0: Fri Feb 26 11:57:13 PST 2010; root:xnu-1504.3.12~1/RELEASE_X86_64 x86_64
mica-ekeds-mac:ink micaeked$ rails s
=&amp;gt; Booting WEBrick
=&amp;gt; Rails 3.0.0.beta3 application starting in development on http://0.0.0.0:3000
=&amp;gt; Call with -d to detach
=&amp;gt; Ctrl-C to shutdown server
[2010-05-04 22:56:35] INFO  WEBrick 1.3.1
[2010-05-04 22:56:35] INFO  ruby 1.9.1 (2009-12-07) [i386-darwin10.2.0]
[2010-05-04 22:56:35] INFO  WEBrick::HTTPServer#start: pid=46644 port=3000
[BUG] Segmentation fault
ruby 1.9.1p376 (2009-12-07 revision 26041) [i386-darwin10.2.0]

-- control frame ----------
c:0024 p:87122 s:0143 b:0142 l:000141 d:000141 METHOD (null):412
c:0023 p:0024 s:0132 b:0132 l:000131 d:000131 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0022 p:0013 s:0126 b:0126 l:0017e0 d:0017e0 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0021 p:0014 s:0122 b:0122 l:000121 d:000121 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105
c:0020 p:0046 s:0112 b:0112 l:000111 d:000111 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0019 p:0014 s:0108 b:0108 l:000107 d:000107 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0018 p:0026 s:0100 b:0100 l:000099 d:000099 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0017 p:0031 s:0096 b:0096 l:000095 d:000095 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17
c:0016 p:0051 s:0087 b:0087 l:000086 d:000086 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_
c:0015 p:0013 s:0083 b:0083 l:000077 d:000082 BLOCK  /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0014 p:0019 s:0081 b:0081 l:000080 d:000080 METHOD &amp;lt;internal:prelude&amp;gt;:8
c:0013 p:0052 s:0078 b:0078 l:000077 d:000077 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11
c:0012 p:0189 s:0073 b:0073 l:000072 d:000072 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dis
c:0011 p:0032 s:0066 b:0066 l:000065 d:000065 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0010 p:0021 s:0062 b:0062 l:000061 d:000061 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/applic
c:0009 p:---- s:0057 b:0057 l:000056 d:000056 FINISH
c:0008 p:0014 s:0055 b:0055 l:000054 d:000054 METHOD /Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/l
c:0007 p:0014 s:0050 b:0050 l:000049 d:000049 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13
c:0006 p:0320 s:0042 b:0042 l:000041 d:000041 METHOD /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48
c:0005 p:0256 s:0030 b:0030 l:000029 d:000029 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111
c:0004 p:0382 s:0020 b:0020 l:000019 d:000019 METHOD /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70
c:0003 p:0123 s:0009 b:0009 l:001a98 d:000008 BLOCK  /usr/local/lib/ruby/1.9.1/webrick/server.rb:183
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   
---------------------------
-- Ruby level backtrace information-----------------------------------------
(null):412:in `'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/sendfile.rb:105:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/logger.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/runtime.rb:17:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `block in call'
&amp;lt;internal:prelude&amp;gt;:8:in `synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:132:in `call'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/application.rb:81:in `method_missing'
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/railties/lib/rails/rack/log_tailer.rb:15:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

-- C level backtrace information -------------------------------------------
0x100109fbd 0   ruby                                0x0000000100109fbd rb_vm_bugreport + 77
0x100028794 1   ruby                                0x0000000100028794 report_bug + 260
0x100028928 2   ruby                                0x0000000100028928 rb_bug + 200
0x1000b45d4 3   ruby                                0x00000001000b45d4 sigsegv + 132
0x7fff85dae80a 4   libSystem.B.dylib                   0x00007fff85dae80a _sigtramp + 26
0xffffffffffffffff 5   ???                                 0xffffffffffffffff 0x0 + 18446744073709551615
0x100101dc3 6   ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103d30 7   ruby                                0x0000000100103d30 vm_call0 + 624
0x1000fb4d8 8   ruby                                0x00000001000fb4d8 rb_funcall2 + 296
0x1000fb828 9   ruby                                0x00000001000fb828 vm_method_missing + 184
0x1000fbb58 10  ruby                                0x00000001000fbb58 vm_call_method + 760
0x1000fcb2c 11  ruby                                0x00000001000fcb2c vm_exec_core + 3180
0x100101dc3 12  ruby                                0x0000000100101dc3 vm_exec + 1203
0x100103873 13  ruby                                0x0000000100103873 rb_vm_invoke_proc + 691
0x10010ea33 14  ruby                                0x000000010010ea33 thread_start_func_2 + 835
0x10010eb51 15  ruby                                0x000000010010eb51 thread_start_func_1 + 17
0x7fff85d878b6 16  libSystem.B.dylib                   0x00007fff85d878b6 _pthread_start + 331
0x7fff85d87769 17  libSystem.B.dylib                   0x00007fff85d87769 thread_start + 13

[NOTE]
You may encounter a bug of Ruby interpreter. Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap
mica-ekeds-mac:ink micaeked$ rails -v
Rails 3.0.0.beta3
mica-ekeds-mac:ink micaeked$ bundle show rails
/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;the only relevant line i could find is&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;console&quot;&gt;/Users/micaeked/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-master/activesupport/lib/active_support/callbacks.rb:88:in `run_callbacks'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;but i have no idea what part of callbacks.rb:88 is causing it to
break&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;    def run_callbacks(kind, *args, &amp;amp;block)
      send(&quot;_run_#{kind}_callbacks&quot;, *args, &amp;amp;block)
    end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-05T07:08:54+01:00</created-at>
      <creator-id type="integer">97766</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4535</number>
      <permalink>bug-when-running-rails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>bug when running rails</title>
      <updated-at type="datetime">2010-05-05T07:08:55+01:00</updated-at>
      <user-id type="integer">97766</user-id>
      <version type="integer">1</version>
      <user-name>mica eked</user-name>
      <creator-name>mica eked</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4535</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>just found out that rails is incompatible with ruby 1.9.1

please mark as invalid

(also, please consider adding this information to the rails guide)</body>
      <body-html>&lt;div&gt;&lt;p&gt;just found out that rails is incompatible with ruby 1.9.1&lt;/p&gt;
&lt;p&gt;please mark as invalid&lt;/p&gt;
&lt;p&gt;(also, please consider adding this information to the rails
guide)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-05T08:25:51+01:00</created-at>
      <creator-id type="integer">97766</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4535</number>
      <permalink>bug-when-running-rails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>bug when running rails</title>
      <updated-at type="datetime">2010-05-05T08:25:53+01:00</updated-at>
      <user-id type="integer">97766</user-id>
      <version type="integer">2</version>
      <user-name>mica eked</user-name>
      <creator-name>mica eked</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4535</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>mica, I have updated guide informing rails 3 is incompatible with Ruby 1.9.1 http://github.com/lifo/docrails/commit/6071b4720ce2a8ae0193da44536ab1b9f1b76eb0</body>
      <body-html>&lt;div&gt;&lt;p&gt;mica, I have updated guide informing rails 3 is incompatible
with Ruby 1.9.1 &lt;a href=
&quot;http://github.com/lifo/docrails/commit/6071b4720ce2a8ae0193da44536ab1b9f1b76eb0&quot;&gt;
http://github.com/lifo/docrails/commit/6071b4720ce2a8ae0193da44536a...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-05T21:09:33+01:00</created-at>
      <creator-id type="integer">97766</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4535</number>
      <permalink>bug-when-running-rails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>bug when running rails</title>
      <updated-at type="datetime">2010-05-05T21:09:37+01:00</updated-at>
      <user-id type="integer">1300</user-id>
      <version type="integer">3</version>
      <user-name>Anil Wadghule</user-name>
      <creator-name>mica eked</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4535</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-08T23:16:56+01:00</created-at>
      <creator-id type="integer">97766</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4535</number>
      <permalink>bug-when-running-rails</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag nil="true"></tag>
      <title>bug when running rails</title>
      <updated-at type="datetime">2010-05-08T23:16:59+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">4</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>mica eked</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4535</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
