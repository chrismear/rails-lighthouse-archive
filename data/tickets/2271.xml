<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-03-17T14:47:59+00:00</created-at>
  <creator-id type="integer">750</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2271</number>
  <permalink>reset-request_params-in-testrequestrecycle</permalink>
  <priority type="integer">1449</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2.3.2 actioncontroller actionpack patch test</tag>
  <title>Reset request_params in TestRequest#recycle!</title>
  <updated-at type="datetime">2009-03-24T15:54:55+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">4</version>
  <user-name>Repository</user-name>
  <creator-name>Peter Marklund</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2271</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>We used to do self.request_params = {} in TestRequest#recycle! but this has been taken out, I guess as part of the Rack rewrite. The consequence is that if you do multiple post requests within the same test block then the params hash is not cleared from one request to the next. This patch fixes the issue by clearing out the post params.</original-body>
  <latest-body>We used to do self.request_params = {} in TestRequest#recycle! but this has been taken out, I guess as part of the Rack rewrite. The consequence is that if you do multiple post requests within the same test block then the params hash is not cleared from one request to the next. This patch fixes the issue by clearing out the post params.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;We used to do self.request_params = {} in TestRequest#recycle!
but this has been taken out, I guess as part of the Rack rewrite.
The consequence is that if you do multiple post requests within the
same test block then the params hash is not cleared from one
request to the next. This patch fixes the issue by clearing out the
post params.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>We used to do self.request_params = {} in TestRequest#recycle! but this has been taken out, I guess as part of the Rack rewrite. The consequence is that if you do multiple post requests within the same test block then the params hash is not cleared from one request to the next. This patch fixes the issue by clearing out the post params.</body>
      <body-html>&lt;div&gt;&lt;p&gt;We used to do self.request_params = {} in TestRequest#recycle!
but this has been taken out, I guess as part of the Rack rewrite.
The consequence is that if you do multiple post requests within the
same test block then the params hash is not cleared from one
request to the next. This patch fixes the issue by clearing out the
post params.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-17T14:47:59+00:00</created-at>
      <creator-id type="integer">750</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2271</number>
      <permalink>reset-request_params-in-testrequestrecycle</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Reset request_params in TestRequest#recycle!</title>
      <updated-at type="datetime">2009-03-17T14:48:02+00:00</updated-at>
      <user-id type="integer">750</user-id>
      <version type="integer">1</version>
      <user-name>Peter Marklund</user-name>
      <creator-name>Peter Marklund</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2271</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-17T15:09:01+00:00</created-at>
      <creator-id type="integer">750</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2271</number>
      <permalink>reset-request_params-in-testrequestrecycle</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 actioncontroller actionpack patch test</tag>
      <title>Reset request_params in TestRequest#recycle!</title>
      <updated-at type="datetime">2009-03-17T15:09:08+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">2</version>
      <user-name>Pratik</user-name>
      <creator-name>Peter Marklund</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2271</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [daffa5cbddace5a68ce09808a827805ef81ddb84]) Reset request_parameters in TestRequest#recycle! to avoid multiple posts clobbering each other [#2271 state:resolved]

Signed-off-by: Joshua Peek &lt;josh@joshpeek.com&gt;
http://github.com/rails/rails/commit/daffa5cbddace5a68ce09808a827805ef81ddb84</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [daffa5cbddace5a68ce09808a827805ef81ddb84]) Reset
request_parameters in TestRequest#recycle! to avoid multiple posts
clobbering each other [&lt;a href=&quot;/projects/8994/tickets/2271&quot; title=&quot;Ticket #2271&quot;&gt;#2271&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Joshua Peek &lt;a href=&quot;mailto:josh@joshpeek.com&quot;&gt;josh@joshpeek.com&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/daffa5cbddace5a68ce09808a827805ef81ddb84&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-24T15:54:17+00:00</created-at>
      <creator-id type="integer">750</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2271</number>
      <permalink>reset-request_params-in-testrequestrecycle</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 actioncontroller actionpack patch test</tag>
      <title>Reset request_params in TestRequest#recycle!</title>
      <updated-at type="datetime">2009-03-24T15:54:19+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">3</version>
      <user-name>Repository</user-name>
      <creator-name>Peter Marklund</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2271</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [8fa4275a72c334fe945dada6113fa0153ca28c87]) Reset request_parameters in TestRequest#recycle! to avoid multiple posts clobbering each other [#2271 state:resolved]

Signed-off-by: Joshua Peek &lt;josh@joshpeek.com&gt;
http://github.com/rails/rails/commit/8fa4275a72c334fe945dada6113fa0153ca28c87</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [8fa4275a72c334fe945dada6113fa0153ca28c87]) Reset
request_parameters in TestRequest#recycle! to avoid multiple posts
clobbering each other [&lt;a href=&quot;/projects/8994/tickets/2271&quot; title=&quot;Ticket #2271&quot;&gt;#2271&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Joshua Peek &lt;a href=&quot;mailto:josh@joshpeek.com&quot;&gt;josh@joshpeek.com&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/8fa4275a72c334fe945dada6113fa0153ca28c87&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-24T15:54:53+00:00</created-at>
      <creator-id type="integer">750</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2271</number>
      <permalink>reset-request_params-in-testrequestrecycle</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.2 actioncontroller actionpack patch test</tag>
      <title>Reset request_params in TestRequest#recycle!</title>
      <updated-at type="datetime">2009-03-24T15:54:55+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">4</version>
      <user-name>Repository</user-name>
      <creator-name>Peter Marklund</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2271</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>74b04857f1e786e88f5c4aba5bfd60e1fa051e9d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-17T14:47:59+00:00</created-at>
      <filename>recycle-post-fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">100719</id>
      <size type="integer">1735</size>
      <uploader-id type="integer">750</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/100719/recycle-post-fix.diff</url>
    </attachment>
  </attachments>
</ticket>
