<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-04-02T09:07:29+01:00</created-at>
  <creator-id type="integer">8551</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">2397</number>
  <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
  <priority type="integer">1413</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activerecord dirty serialized</tag>
  <title>serialized attributes clobbered on partial updates</title>
  <updated-at type="datetime">2009-12-22T14:13:29+00:00</updated-at>
  <user-id type="integer">80517</user-id>
  <version type="integer">11</version>
  <user-name>Neil Spring</user-name>
  <creator-name>Fjan</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
  <priority-name nil="true"></priority-name>
  <original-body>This issue caused a serious database corruption for me. If you partially retrieve an object from the database with :select and then save it, any serialized attributes that were NOT in the original select will be set to nil!

This is bound to trip people up because serialized attributes are expensive and are prime targets to leave in the database if you don't need them. And my tests missed it because you don't find out the data is gone until you try to read it back in.  As far as I can tell this is malfunctioning of the &quot;dirty&quot; tracking.</original-body>
  <latest-body>This issue caused a serious database corruption for me. If you partially retrieve an object from the database with :select and then save it, any serialized attributes that were NOT in the original select will be set to nil!

This is bound to trip people up because serialized attributes are expensive and are prime targets to leave in the database if you don't need them. And my tests missed it because you don't find out the data is gone until you try to read it back in.  As far as I can tell this is malfunctioning of the &quot;dirty&quot; tracking.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;This issue caused a serious database corruption for me. If you
partially retrieve an object from the database with :select and
then save it, any serialized attributes that were NOT in the
original select will be set to nil!&lt;/p&gt;
&lt;p&gt;This is bound to trip people up because serialized attributes
are expensive and are prime targets to leave in the database if you
don't need them. And my tests missed it because you don't find out
the data is gone until you try to read it back in. As far as I can
tell this is malfunctioning of the &quot;dirty&quot; tracking.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue caused a serious database corruption for me. If you partially retrieve an object from the database with :select and then save it, any serialized attributes that were NOT in the original select will be set to nil!

This is bound to trip people up because serialized attributes are expensive and are prime targets to leave in the database if you don't need them. And my tests missed it because you don't find out the data is gone until you try to read it back in.  As far as I can tell this is malfunctioning of the &quot;dirty&quot; tracking.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue caused a serious database corruption for me. If you
partially retrieve an object from the database with :select and
then save it, any serialized attributes that were NOT in the
original select will be set to nil!&lt;/p&gt;
&lt;p&gt;This is bound to trip people up because serialized attributes
are expensive and are prime targets to leave in the database if you
don't need them. And my tests missed it because you don't find out
the data is gone until you try to read it back in. As far as I can
tell this is malfunctioning of the &quot;dirty&quot; tracking.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-02T09:07:29+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-04-02T09:07:33+01:00</updated-at>
      <user-id type="integer">8551</user-id>
      <version type="integer">1</version>
      <user-name>Fjan</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-06T12:55:18+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-06T12:55:21+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">2</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Verified.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T23:47:09+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-08T23:47:12+01:00</updated-at>
      <user-id type="integer">31940</user-id>
      <version type="integer">3</version>
      <user-name>Mike Breen</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>See #788 for history &amp; discussion</body>
      <body-html>&lt;div&gt;&lt;p&gt;See &lt;a href=&quot;/projects/8994/tickets/788&quot; title=
&quot;Ticket #788&quot;&gt;#788&lt;/a&gt; for history &amp;amp; discussion&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T14:53:02+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-09T14:53:07+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">4</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've attached a patch that will only save the serialized attribute if it is present in the attributes.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've attached a patch that will only save the serialized
attribute if it is present in the attributes.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T16:19:43+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bugmash dirty serialized</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-09T16:19:47+01:00</updated-at>
      <user-id type="integer">31940</user-id>
      <version type="integer">5</version>
      <user-name>Mike Breen</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
      <assigned-user-name>Pratik</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>So the gist of the #788 discussion is that partial updates are now always saved because their modification typically cannot detected. The earlier solution that required attribute_changed! to be called on serialised attributes was deemed to be non-intuitive.
This is a dilemma:
- Always saving them causes this serious bug, but is also wasteful because it saves non-changed attributes that are typically large and expensive to serialize
- Not saving them trips people up because they don't realize in place modification doesn't update the dirty tracking</body>
      <body-html>&lt;div&gt;&lt;p&gt;So the gist of the &lt;a href=&quot;/projects/8994/tickets/788&quot; title=
&quot;Ticket #788&quot;&gt;#788&lt;/a&gt; discussion is that partial updates are now
always saved because their modification typically cannot detected.
The earlier solution that required attribute_changed! to be called
on serialised attributes was deemed to be non-intuitive.&lt;br&gt;
This is a dilemma:&lt;br&gt;
- Always saving them causes this serious bug, but is also wasteful
because it saves non-changed attributes that are typically large
and expensive to serialize - Not saving them trips people up
because they don't realize in place modification doesn't update the
dirty tracking&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T16:25:04+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord bugmash dirty serialized
:assigned_user: 1366
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-09T16:25:10+01:00</updated-at>
      <user-id type="integer">8551</user-id>
      <version type="integer">6</version>
      <user-name>Fjan</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Oops sorry about that last one: we saved at the same time. Thanks for the elegant solution.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Oops sorry about that last one: we saved at the same time.
Thanks for the elegant solution.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T16:28:35+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bugmash dirty serialized</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-09T16:28:37+01:00</updated-at>
      <user-id type="integer">8551</user-id>
      <version type="integer">7</version>
      <user-name>Fjan</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
      <assigned-user-name>Pratik</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [8056c57a94a2cbbbeb662ebe5b0cc6aa0ca1ef00]) Serialized attributes should only be saved with partial_updates when the serialized attribute is present [#2397 state:resolved]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/8056c57a94a2cbbbeb662ebe5b0cc6aa0ca1ef00</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/8056c57a94a2cbbbeb662ebe5b0cc6aa0ca1ef00&quot;
title=
&quot;Changeset [8056c57a94a2cbbbeb662ebe5b0cc6aa0ca1ef00]&quot;&gt;[8056c57a94a2cbbbeb662ebe5b0cc6aa0ca1ef00]&lt;/a&gt;)
Serialized attributes should only be saved with partial_updates
when the serialized attribute is present [&lt;a href=
&quot;/projects/8994/tickets/2397&quot; title=&quot;Ticket #2397&quot;&gt;#2397&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Pratik Naik &lt;a&gt;pratiknaik@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/8056c57a94a2cbbbeb662ebe5b0cc6aa0ca1ef00&quot;&gt;
http://github.com/rails/rails/commit/8056c57a94a2cbbbeb662ebe5b0cc6...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T16:43:37+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord bugmash dirty serialized</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-09T16:43:41+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">8</version>
      <user-name>Repository</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
      <assigned-user-name>Pratik</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [7d254b5d74144a1e217125e7be21882ce380a3f8]) Serialized attributes should only be saved with partial_updates when the serialized attribute is present [#2397 state:resolved]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/7d254b5d74144a1e217125e7be21882ce380a3f8</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/7d254b5d74144a1e217125e7be21882ce380a3f8&quot;
title=
&quot;Changeset [7d254b5d74144a1e217125e7be21882ce380a3f8]&quot;&gt;[7d254b5d74144a1e217125e7be21882ce380a3f8]&lt;/a&gt;)
Serialized attributes should only be saved with partial_updates
when the serialized attribute is present [&lt;a href=
&quot;/projects/8994/tickets/2397&quot; title=&quot;Ticket #2397&quot;&gt;#2397&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Pratik Naik &lt;a&gt;pratiknaik@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/7d254b5d74144a1e217125e7be21882ce380a3f8&quot;&gt;
http://github.com/rails/rails/commit/7d254b5d74144a1e217125e7be2188...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T16:43:38+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord bugmash dirty serialized</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-09T16:43:39+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">9</version>
      <user-name>Repository</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
      <assigned-user-name>Pratik</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body nil="true"></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T17:13:26+01:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
:tag: activerecord bugmash dirty serialized
:assigned_user: 1366
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord dirty serialized</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-08-09T17:13:27+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">10</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Could this patch be changed from:

update_without_dirty(changed | (attributes.keys &amp; self.class.serialized_attributes.keys))                                                                                                           

to:

update_without_dirty(changed | (attribute_names &amp; self.class.serialized_attributes.keys))                                                                                                           

I believe the two have the same effect.  For me, attributes.keys requires reading all attributes to fill in the values.  I'm continuing to port old software written when ModelSecurity worked well, and reading all elements of a record is not permitted.  For others, going directly to the attribute names should be more efficient.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could this patch be changed from:&lt;/p&gt;
&lt;p&gt;update_without_dirty(changed | (attributes.keys &amp;amp;
self.class.serialized_attributes.keys))&lt;br&gt;&lt;/p&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;p&gt;update_without_dirty(changed | (attribute_names &amp;amp;
self.class.serialized_attributes.keys))&lt;br&gt;&lt;/p&gt;
&lt;p&gt;I believe the two have the same effect. For me, attributes.keys
requires reading all attributes to fill in the values. I'm
continuing to port old software written when ModelSecurity worked
well, and reading all elements of a record is not permitted. For
others, going directly to the attribute names should be more
efficient.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-12-22T14:13:27+00:00</created-at>
      <creator-id type="integer">8551</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2397</number>
      <permalink>serialized-attributes-clobbered-on-partial-updates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord dirty serialized</tag>
      <title>serialized attributes clobbered on partial updates</title>
      <updated-at type="datetime">2009-12-22T14:13:29+00:00</updated-at>
      <user-id type="integer">80517</user-id>
      <version type="integer">11</version>
      <user-name>Neil Spring</user-name>
      <creator-name>Fjan</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2397</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>9cadd7b8bdaaaca1b74dd12b44dce80ef5d40f8b</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-09T16:19:43+01:00</created-at>
      <filename>save_serialized_attributes_only_if_present.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239364</id>
      <size type="integer">1863</size>
      <uploader-id type="integer">31940</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239364/save_serialized_attributes_only_if_present.diff</url>
    </attachment>
  </attachments>
</ticket>
