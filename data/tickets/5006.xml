<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">12714</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">false</closed>
  <created-at type="datetime">2010-11-17T01:58:29+00:00</created-at>
  <creator-id type="integer">58368</creator-id>
  <milestone-due-on type="datetime">2011-03-27T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">103410</milestone-id>
  <number type="integer">5006</number>
  <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>open</state>
  <tag nil="true"></tag>
  <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
  <updated-at type="datetime">2011-02-27T03:15:38+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">23</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Hery</creator-name>
  <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
  <milestone-title>3.0.6</milestone-title>
  <priority-name>High</priority-name>
  <original-body>Hi guys,
I am running ruby-1.9@HEAD and rails@master

To reproduce it :
@@@ ruby
  log = ActiveSupport::BufferedLogger.new('/tmp/toto.log')
  str = &quot;h&#233;h&#233;&quot;
  str.force_encoding 'us-ascii'
  log.add 0, str
@@@

@@@ ruby
  Encoding::InvalidByteSequenceError: &quot;\xC3&quot; on US-ASCII
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `write'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `block in flush'
	from &lt;internal:prelude&gt;:10:in `synchronize'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:101:in `flush'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:121:in `auto_flush'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:66:in `add'
	from (irb):7
	from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:47:in `start'
	from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:8:in `start'
	from /home/ruby/Software/rails/railties/lib/rails/commands.rb:23:in `&lt;top (required)&gt;'
	from script/rails:6:in `require'
	from script/rails:6:in `&lt;main&gt;'
@@@

I ran into this issue when I wanted to migrate my old project under rails 3.x :

  * I created a new project (rails new mediatec)
  * My database encoding is latin1 (database.yml =&gt; encoding:latin1)
  * Ran my tests and see errors
  * typed in console `u = User.new :name =&gt; &quot;St&#233;phane XXXX&quot;; u.valid?` and see the us-ascii / utf-8 conflict
  * There is a validation rule in my User class : validates :name, :presence =&gt; true, :uniqueness =&gt; true</original-body>
  <latest-body>Hi guys,
I am running ruby-1.9@HEAD and rails@master

To reproduce it :
@@@ ruby
  log = ActiveSupport::BufferedLogger.new('/tmp/toto.log')
  str = &quot;h&#233;h&#233;&quot;
  str.force_encoding 'us-ascii'
  log.add 0, str
@@@

@@@ ruby
  Encoding::InvalidByteSequenceError: &quot;\xC3&quot; on US-ASCII
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `write'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `block in flush'
	from &lt;internal:prelude&gt;:10:in `synchronize'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:101:in `flush'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:121:in `auto_flush'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:66:in `add'
	from (irb):7
	from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:47:in `start'
	from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:8:in `start'
	from /home/ruby/Software/rails/railties/lib/rails/commands.rb:23:in `&lt;top (required)&gt;'
	from script/rails:6:in `require'
	from script/rails:6:in `&lt;main&gt;'
@@@

I ran into this issue when I wanted to migrate my old project under rails 3.x :

  * I created a new project (rails new mediatec)
  * My database encoding is latin1 (database.yml =&gt; encoding:latin1)
  * Ran my tests and see errors
  * typed in console `u = User.new :name =&gt; &quot;St&#233;phane XXXX&quot;; u.valid?` and see the us-ascii / utf-8 conflict
  * There is a validation rule in my User class : validates :name, :presence =&gt; true, :uniqueness =&gt; true</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Hi guys,&lt;br&gt;
I am running ruby-1.9@HEAD and rails@master&lt;/p&gt;
&lt;p&gt;To reproduce it :&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  log = ActiveSupport::BufferedLogger.new('/tmp/toto.log')
  str = &quot;h&amp;eacute;h&amp;eacute;&quot;
  str.force_encoding 'us-ascii'
  log.add 0, str&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  Encoding::InvalidByteSequenceError: &quot;\xC3&quot; on US-ASCII
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `write'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `block in flush'
    from &amp;lt;internal:prelude&amp;gt;:10:in `synchronize'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:101:in `flush'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:121:in `auto_flush'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:66:in `add'
    from (irb):7
    from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:47:in `start'
    from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:8:in `start'
    from /home/ruby/Software/rails/railties/lib/rails/commands.rb:23:in `&amp;lt;top (required)&amp;gt;'
    from script/rails:6:in `require'
    from script/rails:6:in `&amp;lt;main&amp;gt;'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I ran into this issue when I wanted to migrate my old project
under rails 3.x :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I created a new project (rails new mediatec)&lt;/li&gt;
&lt;li&gt;My database encoding is latin1 (database.yml =&amp;gt;
encoding:latin1)&lt;/li&gt;
&lt;li&gt;Ran my tests and see errors&lt;/li&gt;
&lt;li&gt;typed in console &lt;code&gt;u = User.new :name =&amp;gt;
&quot;St&amp;eacute;phane XXXX&quot;; u.valid?&lt;/code&gt; and see the us-ascii /
utf-8 conflict&lt;/li&gt;
&lt;li&gt;There is a validation rule in my User class : validates :name,
:presence =&amp;gt; true, :uniqueness =&amp;gt; true&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi guys,
I am running ruby-1.9@HEAD and rails@master

To reproduce it :
@@@ ruby
  log = ActiveSupport::BufferedLogger.new('/tmp/toto.log')
  str = &quot;h&#233;h&#233;&quot;
  str.force_encoding 'us-ascii'
  log.add 0, str
@@@

@@@ ruby
  Encoding::InvalidByteSequenceError: &quot;\xC3&quot; on US-ASCII
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `write'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `block in flush'
	from &lt;internal:prelude&gt;:10:in `synchronize'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:101:in `flush'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:121:in `auto_flush'
	from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:66:in `add'
	from (irb):7
	from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:47:in `start'
	from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:8:in `start'
	from /home/ruby/Software/rails/railties/lib/rails/commands.rb:23:in `&lt;top (required)&gt;'
	from script/rails:6:in `require'
	from script/rails:6:in `&lt;main&gt;'
@@@

I ran into this issue when I wanted to migrate my old project under rails 3.x :

  * I created a new project (rails new mediatec)
  * My database encoding is latin1 (database.yml =&gt; encoding:latin1)
  * Ran my tests and see errors
  * typed in console `u = User.new :name =&gt; &quot;St&#233;phane XXXX&quot;; u.valid?` and see the us-ascii / utf-8 conflict
  * There is a validation rule in my User class : validates :name, :presence =&gt; true, :uniqueness =&gt; true</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi guys,&lt;br&gt;
I am running ruby-1.9@HEAD and rails@master&lt;/p&gt;
&lt;p&gt;To reproduce it :&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  log = ActiveSupport::BufferedLogger.new('/tmp/toto.log')
  str = &quot;h&amp;eacute;h&amp;eacute;&quot;
  str.force_encoding 'us-ascii'
  log.add 0, str&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  Encoding::InvalidByteSequenceError: &quot;\xC3&quot; on US-ASCII
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `write'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `block in flush'
    from &amp;lt;internal:prelude&amp;gt;:10:in `synchronize'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:101:in `flush'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:121:in `auto_flush'
    from /home/ruby/Software/rails/activesupport/lib/active_support/buffered_logger.rb:66:in `add'
    from (irb):7
    from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:47:in `start'
    from /home/ruby/Software/rails/railties/lib/rails/commands/console.rb:8:in `start'
    from /home/ruby/Software/rails/railties/lib/rails/commands.rb:23:in `&amp;lt;top (required)&amp;gt;'
    from script/rails:6:in `require'
    from script/rails:6:in `&amp;lt;main&amp;gt;'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I ran into this issue when I wanted to migrate my old project
under rails 3.x :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I created a new project (rails new mediatec)&lt;/li&gt;
&lt;li&gt;My database encoding is latin1 (database.yml =&amp;gt;
encoding:latin1)&lt;/li&gt;
&lt;li&gt;Ran my tests and see errors&lt;/li&gt;
&lt;li&gt;typed in console &lt;code&gt;u = User.new :name =&amp;gt;
&quot;St&amp;eacute;phane XXXX&quot;; u.valid?&lt;/code&gt; and see the us-ascii /
utf-8 conflict&lt;/li&gt;
&lt;li&gt;There is a validation rule in my User class : validates :name,
:presence =&amp;gt; true, :uniqueness =&amp;gt; true&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T16:53:27+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-06-29T16:53:29+01:00</updated-at>
      <user-id type="integer">58368</user-id>
      <version type="integer">1</version>
      <user-name>Hery</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Yehuda katz has worked on encoding problem today. See http://github.com/rails/rails/commit/25215d7285db10e2c04d903f251b791342e4dd6a for example. Can you check if you have the problem before and/or after this commit?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yehuda katz has worked on encoding problem today. See &lt;a href=
&quot;http://github.com/rails/rails/commit/25215d7285db10e2c04d903f251b791342e4dd6a&quot;&gt;
http://github.com/rails/rails/commit/25215d7285db10e2c04d903f251b79...&lt;/a&gt;
for example. Can you check if you have the problem before and/or
after this commit?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T21:44:20+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-06-29T21:44:34+01:00</updated-at>
      <user-id type="integer">14798</user-id>
      <version type="integer">2</version>
      <user-name>Bruno Michel</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have the last HEAD of master and it does not work either.

I ran into this issue since I have a database in latin1

@@@ yaml
#config/database.yml

development:
  encoding: latin1
  # blabla ...

@@@

@@@ bash
ruby $PATH_TO_RAILS3 c
@@@

@@@ ruby
u = User.new :name =&gt; 'St&#233;phane XXXX'

u.valid?
@@@

And then it raises this error

@@@ ruby

Encoding::UndefinedConversionError: &quot;\xC3&quot; from ASCII-8BIT to UTF-8
	from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `write'
	from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `block in flush'
	from &lt;internal:prelude&gt;:10:in `synchronize'
	from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:101:in `flush'
	from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:121:in `auto_flush'
	from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:66:in `add'
	from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:77:in `debug'
	from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:210:in `rescue in log'
	from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:201:in `log'
	from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:286:in `execute'
	from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:616:in `select'
	from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
	from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:56:in `select_all'
	from /home/hery/Software/rails/activerecord/lib/active_record/base.rb:427:in `find_by_sql'
	from /home/hery/Software/rails/activerecord/lib/active_record/relation.rb:63:in `to_a'
	from /home/hery/Software/rails/activerecord/lib/active_record/relation/finder_methods.rb:324:in `find_first'
... 4 levels...
	from /home/hery/Software/rails/activemodel/lib/active_model/validator.rb:151:in `each'
	from /home/hery/Software/rails/activemodel/lib/active_model/validator.rb:151:in `validate'
	from /home/hery/Software/rails/activesupport/lib/active_support/callbacks.rb:309:in `_callback_before_15'
	from /home/hery/Software/rails/activesupport/lib/active_support/callbacks.rb:419:in `_run_validate_callbacks'
	from /home/hery/Software/rails/activemodel/lib/active_model/validations.rb:201:in `run_validations!'
	from /home/hery/Software/rails/activemodel/lib/active_model/validations/callbacks.rb:53:in `block in run_validations!'
	from /home/hery/Software/rails/activesupport/lib/active_support/callbacks.rb:408:in `_run_validation_callbacks'
	from /home/hery/Software/rails/activemodel/lib/active_model/validations/callbacks.rb:53:in `run_validations!'
	from /home/hery/Software/rails/activemodel/lib/active_model/validations.rb:168:in `valid?'
	from /home/hery/Software/rails/activerecord/lib/active_record/validations.rb:55:in `valid?'
	from (irb):3
	from /home/hery/Software/rails/railties/lib/rails/commands/console.rb:47:in `start'
	from /home/hery/Software/rails/railties/lib/rails/commands/console.rb:8:in `start'
	from /home/hery/Software/rails/railties/lib/rails/commands.rb:23:in `&lt;top (required)&gt;'
	from script/rails:6:in `require'
	from script/rails:6:in `&lt;main&gt;'

@@@

I have attach a patch but does not know if it is (add some tests....)</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have the last HEAD of master and it does not work either.&lt;/p&gt;
&lt;p&gt;I ran into this issue since I have a database in latin1&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;yaml&quot;&gt;#config/database.yml

development:
  encoding: latin1
  # blabla ...&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;bash&quot;&gt;ruby $PATH_TO_RAILS3 c&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;u = User.new :name =&amp;gt; 'St&amp;eacute;phane XXXX'

u.valid?&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;And then it raises this error&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;
Encoding::UndefinedConversionError: &quot;\xC3&quot; from ASCII-8BIT to UTF-8
    from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `write'
    from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:104:in `block in flush'
    from &amp;lt;internal:prelude&amp;gt;:10:in `synchronize'
    from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:101:in `flush'
    from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:121:in `auto_flush'
    from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:66:in `add'
    from /home/hery/Software/rails/activesupport/lib/active_support/buffered_logger.rb:77:in `debug'
    from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:210:in `rescue in log'
    from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:201:in `log'
    from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:286:in `execute'
    from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb:616:in `select'
    from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
    from /home/hery/Software/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:56:in `select_all'
    from /home/hery/Software/rails/activerecord/lib/active_record/base.rb:427:in `find_by_sql'
    from /home/hery/Software/rails/activerecord/lib/active_record/relation.rb:63:in `to_a'
    from /home/hery/Software/rails/activerecord/lib/active_record/relation/finder_methods.rb:324:in `find_first'
... 4 levels...
    from /home/hery/Software/rails/activemodel/lib/active_model/validator.rb:151:in `each'
    from /home/hery/Software/rails/activemodel/lib/active_model/validator.rb:151:in `validate'
    from /home/hery/Software/rails/activesupport/lib/active_support/callbacks.rb:309:in `_callback_before_15'
    from /home/hery/Software/rails/activesupport/lib/active_support/callbacks.rb:419:in `_run_validate_callbacks'
    from /home/hery/Software/rails/activemodel/lib/active_model/validations.rb:201:in `run_validations!'
    from /home/hery/Software/rails/activemodel/lib/active_model/validations/callbacks.rb:53:in `block in run_validations!'
    from /home/hery/Software/rails/activesupport/lib/active_support/callbacks.rb:408:in `_run_validation_callbacks'
    from /home/hery/Software/rails/activemodel/lib/active_model/validations/callbacks.rb:53:in `run_validations!'
    from /home/hery/Software/rails/activemodel/lib/active_model/validations.rb:168:in `valid?'
    from /home/hery/Software/rails/activerecord/lib/active_record/validations.rb:55:in `valid?'
    from (irb):3
    from /home/hery/Software/rails/railties/lib/rails/commands/console.rb:47:in `start'
    from /home/hery/Software/rails/railties/lib/rails/commands/console.rb:8:in `start'
    from /home/hery/Software/rails/railties/lib/rails/commands.rb:23:in `&amp;lt;top (required)&amp;gt;'
    from script/rails:6:in `require'
    from script/rails:6:in `&amp;lt;main&amp;gt;'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I have attach a patch but does not know if it is (add some
tests....)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T22:28:55+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-06-29T22:29:02+01:00</updated-at>
      <user-id type="integer">58368</user-id>
      <version type="integer">3</version>
      <user-name>Hery</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T23:38:50+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:priority: 0
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-06-29T23:38:57+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">4</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T23:38:59+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 3
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-06-29T23:39:02+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">5</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@Hery: can you please give your output in console for this:

@@@

irb(main):001:0&gt; __ENCODING__
=&gt; #&lt;Encoding:UTF-8&gt;
irb(main):002:0&gt; 'whatever'.encoding
=&gt; #&lt;Encoding:UTF-8&gt;
irb(main):003:0&gt; ENV['LC_CTYPE']
=&gt; &quot;UTF-8&quot;

@@@

irb encoding seems to be determined by shell locale settings (`$LC_CTYPE`, etc)


And for `&quot;h&#233;h&#233;&quot;.force_encoding 'us-ascii'`: Exception may be the correct behavior here. The string tagged with ascii contains non-ascii characters, doesn't it?</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Hery: can you please give your output in console for this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
irb(main):001:0&amp;gt; __ENCODING__
=&amp;gt; #&amp;lt;Encoding:UTF-8&amp;gt;
irb(main):002:0&amp;gt; 'whatever'.encoding
=&amp;gt; #&amp;lt;Encoding:UTF-8&amp;gt;
irb(main):003:0&amp;gt; ENV['LC_CTYPE']
=&amp;gt; &quot;UTF-8&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;irb encoding seems to be determined by shell locale settings
(&lt;code&gt;$LC_CTYPE&lt;/code&gt;, etc)&lt;/p&gt;
&lt;p&gt;And for &lt;code&gt;&quot;h&amp;eacute;h&amp;eacute;&quot;.force_encoding
'us-ascii'&lt;/code&gt;: Exception may be the correct behavior here. The
string tagged with ascii contains non-ascii characters, doesn't
it?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-04T19:00:06+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-04T19:00:07+01:00</updated-at>
      <user-id type="integer">71387</user-id>
      <version type="integer">6</version>
      <user-name>Serge Balyuk</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@serge

My encoding environment variables are right  : I only use UTF-8
It's a problem with a database encoded in latin1 and logger (in ascii) 

I use UTF-8 in my application project and have a database in latin1


The code above is just to show you how to reproduce this bug.... 

Application in UTF-8 and database in latin1 ...

@@@ ruby
&gt;&gt; __ENCODING__
=&gt; #&lt;Encoding:UTF-8&gt;
&gt;&gt; 'whaterver'.encoding
=&gt; #&lt;Encoding:UTF-8&gt;
&gt;&gt; ENV['LC_TYPE']
=&gt; nil
8&gt;

@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;@serge&lt;/p&gt;
&lt;p&gt;My encoding environment variables are right : I only use
UTF-8&lt;br&gt;
It's a problem with a database encoded in latin1 and logger (in
ascii)&lt;/p&gt;
&lt;p&gt;I use UTF-8 in my application project and have a database in
latin1&lt;/p&gt;
&lt;p&gt;The code above is just to show you how to reproduce this
bug....&lt;/p&gt;
&lt;p&gt;Application in UTF-8 and database in latin1 ...&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; __ENCODING__
=&amp;gt; #&amp;lt;Encoding:UTF-8&amp;gt;
&amp;gt;&amp;gt; 'whaterver'.encoding
=&amp;gt; #&amp;lt;Encoding:UTF-8&amp;gt;
&amp;gt;&amp;gt; ENV['LC_TYPE']
=&amp;gt; nil
8&amp;gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-04T19:23:27+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-04T19:23:29+01:00</updated-at>
      <user-id type="integer">58368</user-id>
      <version type="integer">7</version>
      <user-name>Hery</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thanks for the update, Hery! I tried to reproduce the bug with postgres DB with no luck. (I did create a database in latin1 and set up database.yml accordingly)


But your mysql backtrace is interesting, it looks like exception is raised in recuse block for another one. I wonder how interpolated message on line 209 of abstract_adapter.rb gets incorrect encoding tag. Will try to get mysql setup to find that out. What mysql connector gem and version are you using?


I think your logger should already be in UTF-8, one way to check is:

@@@

irb(main):011:0* ActiveRecord::Base.logger.instance_variable_get('@log').external_encoding
=&gt; #&lt;Encoding:UTF-8&gt;
irb(main):012:0&gt; ActiveRecord::Base.logger.instance_variable_get('@log').internal_encoding
=&gt; nil

@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks for the update, Hery! I tried to reproduce the bug with
postgres DB with no luck. (I did create a database in latin1 and
set up database.yml accordingly)&lt;/p&gt;
&lt;p&gt;But your mysql backtrace is interesting, it looks like exception
is raised in recuse block for another one. I wonder how
interpolated message on line 209 of abstract_adapter.rb gets
incorrect encoding tag. Will try to get mysql setup to find that
out. What mysql connector gem and version are you using?&lt;/p&gt;
&lt;p&gt;I think your logger should already be in UTF-8, one way to check
is:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
irb(main):011:0* ActiveRecord::Base.logger.instance_variable_get('@log').external_encoding
=&amp;gt; #&amp;lt;Encoding:UTF-8&amp;gt;
irb(main):012:0&amp;gt; ActiveRecord::Base.logger.instance_variable_get('@log').internal_encoding
=&amp;gt; nil&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-04T22:13:56+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-04T22:13:57+01:00</updated-at>
      <user-id type="integer">71387</user-id>
      <version type="integer">8</version>
      <user-name>Serge Balyuk</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I have the same results

Do you have a validation field ?

I use database/tables in latin1 with mysql 5.1

You must create a model with a validates_uniqueness_of  and test the validation with accentuated characters</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have the same results&lt;/p&gt;
&lt;p&gt;Do you have a validation field ?&lt;/p&gt;
&lt;p&gt;I use database/tables in latin1 with mysql 5.1&lt;/p&gt;
&lt;p&gt;You must create a model with a validates_uniqueness_of and test
the validation with accentuated characters&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-04T23:08:29+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-04T23:08:32+01:00</updated-at>
      <user-id type="integer">58368</user-id>
      <version type="integer">9</version>
      <user-name>Hery</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I just tried this with a latin1 mysql db with a uniqueness validation; no issue.

From my logs:
@@@
  Category Load (0.4ms)  SELECT `categories`.`id` FROM `categories`
WHERE (`categories`.`name` = BINARY 'St&#233;phane XXXX') AND
(`categories`.`project_id` = 1) AND (`categories`.`type` IS NULL)
LIMIT 1
@@@

I'm not sure how to reproduce.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I just tried this with a latin1 mysql db with a uniqueness
validation; no issue.&lt;/p&gt;
&lt;p&gt;From my logs:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  Category Load (0.4ms)  SELECT &lt;/code&gt;categories.&lt;code&gt;id&lt;/code&gt; FROM &lt;code&gt;categories&lt;/code&gt;
WHERE (&lt;code&gt;categories&lt;/code&gt;.&lt;code&gt;name&lt;/code&gt; = BINARY 'St&amp;eacute;phane XXXX') AND
(&lt;code&gt;categories&lt;/code&gt;.&lt;code&gt;project_id&lt;/code&gt; = 1) AND (&lt;code&gt;categories&lt;/code&gt;.&lt;code&gt;type&lt;/code&gt; IS NULL)
LIMIT 1
&lt;/pre&gt;
&lt;p&gt;I'm not sure how to reproduce.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-04T23:23:54+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-04T23:23:55+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">10</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Doh! I was on Ruby 1.8. Reproduced on 1.9.2 :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Doh! I was on Ruby 1.8. Reproduced on 1.9.2 :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-04T23:37:11+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-04T23:37:15+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">11</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>yep ruby 1.9.x :) I Just wrote that on my first thread  ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;yep ruby 1.9.x :) I Just wrote that on my first thread ;)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-04T23:41:11+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-04T23:41:12+01:00</updated-at>
      <user-id type="integer">58368</user-id>
      <version type="integer">12</version>
      <user-name>Hery</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Successfully reproduced this with mysql. To make the long story short, here's the distilled difference in behaviors of mysql and pg connection adapters:


mysql:

@@@

&gt; User.connection.quote('St&#233;phane').encoding
=&gt; #&lt;Encoding:ASCII-8BIT&gt;

@@@

pg:

@@@

&gt; User.connection.quote('St&#233;phane').encoding
=&gt; #&lt;Encoding:ISO-8859-1&gt;

@@@

I believe the root cause is in adapters' `quote_string` methods. Postgres adapter calls pg gem `escape` method which takes care of encodings:

@@@

pg.c around line 1375:

 * Encoding of escaped string will be equal to client encoding of connection.

@@@

and mysql obviously doesn't do that (or at least mysql 2.8.1 gem doesn't do that for me).


The workaround may be to make `MysqlAdapter#quote_string` look more like this:

@@@

      def quote_string(string)
        encoding = Encoding.find(@config[:encoding]) rescue nil
        encoded_string = encoding ? string.encode(encoding) : string
        quoted_string = @connection.quote(encoded_string)
        encoding ? quoted_string.force_encoding(encoding) : quoted_string
      end

@@@

With some extra care for making `latin1` encoding alias or changing it to `iso-8859-1` in `database.yml`.


But I wonder if the issue should really be addressed in mysql gem code.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Successfully reproduced this with mysql. To make the long story
short, here's the distilled difference in behaviors of mysql and pg
connection adapters:&lt;/p&gt;
&lt;p&gt;mysql:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
&amp;gt; User.connection.quote('St&amp;eacute;phane').encoding
=&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;pg:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
&amp;gt; User.connection.quote('St&amp;eacute;phane').encoding
=&amp;gt; #&amp;lt;Encoding:ISO-8859-1&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I believe the root cause is in adapters'
&lt;code&gt;quote_string&lt;/code&gt; methods. Postgres adapter calls pg gem
&lt;code&gt;escape&lt;/code&gt; method which takes care of encodings:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
pg.c around line 1375:

 * Encoding of escaped string will be equal to client encoding of connection.&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;and mysql obviously doesn't do that (or at least mysql 2.8.1 gem
doesn't do that for me).&lt;/p&gt;
&lt;p&gt;The workaround may be to make
&lt;code&gt;MysqlAdapter#quote_string&lt;/code&gt; look more like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
      def quote_string(string)
        encoding = Encoding.find(@config[:encoding]) rescue nil
        encoded_string = encoding ? string.encode(encoding) : string
        quoted_string = @connection.quote(encoded_string)
        encoding ? quoted_string.force_encoding(encoding) : quoted_string
      end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;With some extra care for making &lt;code&gt;latin1&lt;/code&gt; encoding
alias or changing it to &lt;code&gt;iso-8859-1&lt;/code&gt; in
&lt;code&gt;database.yml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;But I wonder if the issue should really be addressed in mysql
gem code.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-05T15:51:12+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-05T15:51:16+01:00</updated-at>
      <user-id type="integer">71387</user-id>
      <version type="integer">13</version>
      <user-name>Serge Balyuk</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Please find proposed patch based on the above. The `database.yml` should include another setting `ruby_encoding: iso-8859-1` for the `encoding: latin1` case. That's because I couldn't find any way to convince mysql to understand `iso-8859-1` name, and at the same time I didn't find a way to dynamically add encoding aliases in ruby (1.9.1).


I understand that it's not the prettiest workaround, so I'm very open to suggestions. However the main question remains the same: is this encoding handling a responsibility of `MysqlAdapter` or mysql gem?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Please find proposed patch based on the above. The
&lt;code&gt;database.yml&lt;/code&gt; should include another setting
&lt;code&gt;ruby_encoding: iso-8859-1&lt;/code&gt; for the &lt;code&gt;encoding:
latin1&lt;/code&gt; case. That's because I couldn't find any way to
convince mysql to understand &lt;code&gt;iso-8859-1&lt;/code&gt; name, and at
the same time I didn't find a way to dynamically add encoding
aliases in ruby (1.9.1).&lt;/p&gt;
&lt;p&gt;I understand that it's not the prettiest workaround, so I'm very
open to suggestions. However the main question remains the same: is
this encoding handling a responsibility of
&lt;code&gt;MysqlAdapter&lt;/code&gt; or mysql gem?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-06T17:03:14+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-06T17:03:18+01:00</updated-at>
      <user-id type="integer">71387</user-id>
      <version type="integer">14</version>
      <user-name>Serge Balyuk</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I really don't think this kind of mangling belongs in MysqlAdapter.
The [mysql2 gem](http://github.com/brianmario/mysql2) fixes the issue:

&lt;code&gt;ruby-1.9.2-preview3 &gt; User.connection.quote('Sebasti&#225;n').encoding
 =&gt; #&lt;Encoding:ISO-8859-1&gt;&lt;/code&gt;

I haven't tested with mysqlplus, though.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I really don't think this kind of mangling belongs in
MysqlAdapter.&lt;br&gt;
The &lt;a href=&quot;http://github.com/brianmario/mysql2&quot;&gt;mysql2 gem&lt;/a&gt;
fixes the issue:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ruby-1.9.2-preview3 &amp;gt;
User.connection.quote('Sebasti&amp;aacute;n').encoding&lt;br&gt;
=&amp;gt; #&amp;lt;Encoding:ISO-8859-1&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I haven't tested with mysqlplus, though.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-27T23:18:32+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-07-27T23:18:36+01:00</updated-at>
      <user-id type="integer">25341</user-id>
      <version type="integer">15</version>
      <user-name>Sebastian A. Espindola</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/27625)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/27625&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-30T04:10:33+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-08-30T04:10:33+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">16</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-15T23:01:57+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 82861
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-10-15T23:01:57+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">17</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-19T08:35:05+01:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-10-19T08:35:07+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">19</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/34353)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/34353&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-15T21:15:12+00:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 88038
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-11-15T21:15:12+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">20</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>00zoe
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT shoes&lt;/strong&gt;&lt;/a&gt;, Galin ang Na. 
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Timberland Boots Sale&lt;/strong&gt;&lt;/a&gt;, insulated boot and set. 
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face jacket&lt;/strong&gt;&lt;/a&gt;, have been the. 
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland boots&lt;/strong&gt;&lt;/a&gt;, &#32463;&#20856;1956. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;ugg boots sale&lt;/strong&gt;&lt;/a&gt;, qkl000. 
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland&lt;/strong&gt;&lt;/a&gt;, &#35199;&#38376;&#21561;&#38634;. 
&lt;a href=&quot;http://www.mbtclearance.org/&quot;&gt;&lt;strong&gt;MBT shoes clearance&lt;/strong&gt;&lt;/a&gt;, styles, sizes. 
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT shoes&lt;/strong&gt;&lt;/a&gt;, Galin ang Na. 
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT trainers&lt;/strong&gt;&lt;/a&gt;, boots sale online. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;cheap ugg boots uk&lt;/strong&gt;&lt;/a&gt;, making cutprice. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk/cheap-ugg-handbags-uk-c-23.html&quot;&gt;&lt;strong&gt;ugg handbags uk&lt;/strong&gt;&lt;/a&gt;, have not looked back.. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk/cheap-ugg-handbags-uk-c-23.html&quot;&gt;&lt;strong&gt;cheap ugg handbags&lt;/strong&gt;&lt;/a&gt;, The result was the. 
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT lami shoes&lt;/strong&gt;&lt;/a&gt;, We have a long term. 
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT tunisha&lt;/strong&gt;&lt;/a&gt;, cooperative manufacturer. 
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland boots sale&lt;/strong&gt;&lt;/a&gt;, The source of. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk/ugg-boots-sale-gissella-c-18.html&quot;&gt;&lt;strong&gt;ugg gissella&lt;/strong&gt;&lt;/a&gt;, &#24680;&#22312;&#20170;&#22825;&#25165;&#30456;&#36935;. 
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face outlet&lt;/strong&gt;&lt;/a&gt;, now timberland boots. 
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland roll top&lt;/strong&gt;&lt;/a&gt;, footwear. They. 
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland chukka&lt;/strong&gt;&lt;/a&gt;, &#31505;&#19977;&#23569;. 
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Cheap Timberland Boots&lt;/strong&gt;&lt;/a&gt;, &#21326;&#20180; a subsidiary. 
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Waterproof Boots&lt;/strong&gt;&lt;/a&gt;, Timberland. By 1978 more. 
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland Boots&lt;/strong&gt;&lt;/a&gt;, &#21338;&#23458;. 
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT UK&lt;/strong&gt;&lt;/a&gt;, Nothing to worry. 
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland UK&lt;/strong&gt;&lt;/a&gt;, ak11-. 
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland outlet&lt;/strong&gt;&lt;/a&gt;, myaifeili. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;ugg boots sale uk&lt;/strong&gt;&lt;/a&gt;, asisi. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;cheap ugg boots&lt;/strong&gt;&lt;/a&gt;, mercury. 
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Timberland Boots UK&lt;/strong&gt;&lt;/a&gt;, to produce it, under. 
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Timberland Boots&lt;/strong&gt;&lt;/a&gt;, &#22914;&#26085; the brand name. 
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Cheap Timberland Boots&lt;/strong&gt;&lt;/a&gt;, ak22-. 
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk/cheap-ugg-handbags-uk-c-23.html&quot;&gt;&lt;strong&gt;ugg handbags sale&lt;/strong&gt;&lt;/a&gt;, dry in Timberlands. And. 
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face boots sale&lt;/strong&gt;&lt;/a&gt;, on the Internet.. 
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face jacket sale&lt;/strong&gt;&lt;/a&gt;, in a river, and your. 
&lt;a href=&quot;http://www.bootsue.com/mbt-shoes-clearance-sale-c-5.html&quot;&gt;&lt;strong&gt;MBT shoes clearance&lt;/strong&gt;&lt;/a&gt;, can steadily. 
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT shoes UK&lt;/strong&gt;&lt;/a&gt;, &#28023;&#23376; 1990. 
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT sale&lt;/strong&gt;&lt;/a&gt;, about, you could. 
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;cheap timberland boots&lt;/strong&gt;&lt;/a&gt;, timberland is. 
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberlands&lt;/strong&gt;&lt;/a&gt;, an offshoot.</body>
      <body-html>&lt;div&gt;&lt;p&gt;00zoe&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT
shoes&lt;/strong&gt;&lt;/a&gt;, Galin ang Na.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Timberland
Boots Sale&lt;/strong&gt;&lt;/a&gt;, insulated boot and set.&lt;br&gt;
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face
jacket&lt;/strong&gt;&lt;/a&gt;, have been the.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland
boots&lt;/strong&gt;&lt;/a&gt;, &amp;#32463;&amp;#20856;1956.&lt;br&gt;
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;ugg boots
sale&lt;/strong&gt;&lt;/a&gt;, qkl000.&lt;br&gt;
&lt;a href=
&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland&lt;/strong&gt;&lt;/a&gt;,
&amp;#35199;&amp;#38376;&amp;#21561;&amp;#38634;.&lt;br&gt;
&lt;a href=&quot;http://www.mbtclearance.org/&quot;&gt;&lt;strong&gt;MBT shoes
clearance&lt;/strong&gt;&lt;/a&gt;, styles, sizes.&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT
shoes&lt;/strong&gt;&lt;/a&gt;, Galin ang Na.&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT
trainers&lt;/strong&gt;&lt;/a&gt;, boots sale online.&lt;br&gt;
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;cheap ugg
boots uk&lt;/strong&gt;&lt;/a&gt;, making cutprice.&lt;br&gt;
&lt;a href=
&quot;http://www.cheapuggbootssale.co.uk/cheap-ugg-handbags-uk-c-23.html&quot;&gt;
&lt;strong&gt;ugg handbags uk&lt;/strong&gt;&lt;/a&gt;, have not looked back..&lt;br&gt;
&lt;a href=
&quot;http://www.cheapuggbootssale.co.uk/cheap-ugg-handbags-uk-c-23.html&quot;&gt;
&lt;strong&gt;cheap ugg handbags&lt;/strong&gt;&lt;/a&gt;, The result was the.&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT lami
shoes&lt;/strong&gt;&lt;/a&gt;, We have a long term.&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT
tunisha&lt;/strong&gt;&lt;/a&gt;, cooperative manufacturer.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland
boots sale&lt;/strong&gt;&lt;/a&gt;, The source of.&lt;br&gt;
&lt;a href=
&quot;http://www.cheapuggbootssale.co.uk/ugg-boots-sale-gissella-c-18.html&quot;&gt;
&lt;strong&gt;ugg gissella&lt;/strong&gt;&lt;/a&gt;,
&amp;#24680;&amp;#22312;&amp;#20170;&amp;#22825;&amp;#25165;&amp;#30456;&amp;#36935;.&lt;br&gt;
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face
outlet&lt;/strong&gt;&lt;/a&gt;, now timberland boots.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland
roll top&lt;/strong&gt;&lt;/a&gt;, footwear. They.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberland
chukka&lt;/strong&gt;&lt;/a&gt;, &amp;#31505;&amp;#19977;&amp;#23569;.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Cheap
Timberland Boots&lt;/strong&gt;&lt;/a&gt;, &amp;#21326;&amp;#20180; a subsidiary.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Waterproof
Boots&lt;/strong&gt;&lt;/a&gt;, Timberland. By 1978 more.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland
Boots&lt;/strong&gt;&lt;/a&gt;, &amp;#21338;&amp;#23458;.&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT
UK&lt;/strong&gt;&lt;/a&gt;, Nothing to worry.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland
UK&lt;/strong&gt;&lt;/a&gt;, ak11-.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Timberland
outlet&lt;/strong&gt;&lt;/a&gt;, myaifeili.&lt;br&gt;
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;ugg boots sale
uk&lt;/strong&gt;&lt;/a&gt;, asisi.&lt;br&gt;
&lt;a href=&quot;http://www.cheapuggbootssale.co.uk&quot;&gt;&lt;strong&gt;cheap ugg
boots&lt;/strong&gt;&lt;/a&gt;, mercury.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Timberland
Boots UK&lt;/strong&gt;&lt;/a&gt;, to produce it, under.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots4sale.co.uk&quot;&gt;&lt;strong&gt;Timberland
Boots&lt;/strong&gt;&lt;/a&gt;, &amp;#22914;&amp;#26085; the brand name.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandboots2sale.co.uk&quot;&gt;&lt;strong&gt;Cheap
Timberland Boots&lt;/strong&gt;&lt;/a&gt;, ak22-.&lt;br&gt;
&lt;a href=
&quot;http://www.cheapuggbootssale.co.uk/cheap-ugg-handbags-uk-c-23.html&quot;&gt;
&lt;strong&gt;ugg handbags sale&lt;/strong&gt;&lt;/a&gt;, dry in Timberlands.
And.&lt;br&gt;
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face
boots sale&lt;/strong&gt;&lt;/a&gt;, on the Internet..&lt;br&gt;
&lt;a href=&quot;http://www.thenorthfaceoutlet.co.uk&quot;&gt;&lt;strong&gt;north face
jacket sale&lt;/strong&gt;&lt;/a&gt;, in a river, and your.&lt;br&gt;
&lt;a href=
&quot;http://www.bootsue.com/mbt-shoes-clearance-sale-c-5.html&quot;&gt;&lt;strong&gt;MBT
shoes clearance&lt;/strong&gt;&lt;/a&gt;, can steadily.&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT shoes
UK&lt;/strong&gt;&lt;/a&gt;, &amp;#28023;&amp;#23376; 1990.&lt;br&gt;
&lt;a href=&quot;http://www.mbtshoes4sale.co.uk&quot;&gt;&lt;strong&gt;MBT
sale&lt;/strong&gt;&lt;/a&gt;, about, you could.&lt;br&gt;
&lt;a href=&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;cheap
timberland boots&lt;/strong&gt;&lt;/a&gt;, timberland is.&lt;br&gt;
&lt;a href=
&quot;http://www.timberlandbootsale.co.uk&quot;&gt;&lt;strong&gt;Timberlands&lt;/strong&gt;&lt;/a&gt;,
an offshoot.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-17T01:55:17+00:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2010-11-17T01:58:29+00:00</updated-at>
      <user-id type="integer">125438</user-id>
      <version type="integer">21</version>
      <user-name>zoery</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/42275)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/42275&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-12T21:58:21+00:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 92071
</diffable-attributes>
      <milestone-id type="integer">101623</milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2011-02-12T21:58:21+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">22</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title>3.0.5</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/43692)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/43692&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-27T03:15:38+00:00</created-at>
      <creator-id type="integer">58368</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 101623
</diffable-attributes>
      <milestone-id type="integer">103410</milestone-id>
      <number type="integer">5006</number>
      <permalink>activesupportbufferedlogger-and-us-ascii-message-on-ruby-19x</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>ActiveSupport::BufferedLogger and us-ascii message on ruby 1.9.x</title>
      <updated-at type="datetime">2011-02-27T03:15:38+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">23</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Hery</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5006</url>
      <milestone-title>3.0.6</milestone-title>
      <priority-name>High</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>d29376b15d7a3e236ec7654e5d01e01193fc8abe</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-29T22:28:55+01:00</created-at>
      <filename>0001-force-activesupport-bufferedloger-to-write-utf-8-str.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">581026</id>
      <size type="integer">945</size>
      <uploader-id type="integer">58368</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/581026/0001-force-activesupport-bufferedloger-to-write-utf-8-str.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>48531c0f7ac48172c6923cd2dd7fb7dfe994324a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-07-06T17:03:14+01:00</created-at>
      <filename>mysql-encodings-fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">586805</id>
      <size type="integer">2386</size>
      <uploader-id type="integer">71387</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/586805/mysql-encodings-fix.diff</url>
    </attachment>
  </attachments>
</ticket>
