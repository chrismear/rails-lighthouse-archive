<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">40272</assigned-user-id>
  <attachments-count type="integer">4</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-04-22T17:19:36+01:00</created-at>
  <creator-id type="integer">26479</creator-id>
  <milestone-due-on type="datetime">2010-01-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">50064</milestone-id>
  <number type="integer">4457</number>
  <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>activerecord find_or_create patch</tag>
  <title>find_or_create_by_foo when foo is protected attribute</title>
  <updated-at type="datetime">2010-05-08T21:11:44+01:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">17</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Marc-Andr&#233; Lafortune</creator-name>
  <assigned-user-name>Santiago Pastorino</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
  <milestone-title>2.3.6</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I understand that for security reasons it is a good idea that methods like find_or_create_by_foo(params) do not write on protected attributes.

I question the rationale for not writing on foo, though, even if it is protected.

1) find_or_create_by_foo is used to get a record that matches the given value for foo. If it won't write foo because it is protected, it doesn't fulfill its purpose.

2) foo is specified explicitely by the developper. I would take that as an 'ok' to write on that field.

3) With current behavior, one must specify foo twice to get the desired result:
  find_or_create_by_foo(:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;baz&quot;) {|r| r.foo = &quot;bar&quot; }
Not very DRY

Typical case is where foo is actually a foo_id... Typically you want to protect that (usually doesn't change after creation, especially not from a params web request).

Thanks</original-body>
  <latest-body>I understand that for security reasons it is a good idea that methods like find_or_create_by_foo(params) do not write on protected attributes.

I question the rationale for not writing on foo, though, even if it is protected.

1) find_or_create_by_foo is used to get a record that matches the given value for foo. If it won't write foo because it is protected, it doesn't fulfill its purpose.

2) foo is specified explicitely by the developper. I would take that as an 'ok' to write on that field.

3) With current behavior, one must specify foo twice to get the desired result:
  find_or_create_by_foo(:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;baz&quot;) {|r| r.foo = &quot;bar&quot; }
Not very DRY

Typical case is where foo is actually a foo_id... Typically you want to protect that (usually doesn't change after creation, especially not from a params web request).

Thanks</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I understand that for security reasons it is a good idea that
methods like find_or_create_by_foo(params) do not write on
protected attributes.&lt;/p&gt;
&lt;p&gt;I question the rationale for not writing on foo, though, even if
it is protected.&lt;/p&gt;
&lt;p&gt;1) find_or_create_by_foo is used to get a record that matches
the given value for foo. If it won't write foo because it is
protected, it doesn't fulfill its purpose.&lt;/p&gt;
&lt;p&gt;2) foo is specified explicitely by the developper. I would take
that as an 'ok' to write on that field.&lt;/p&gt;
&lt;p&gt;3) With current behavior, one must specify foo twice to get the
desired result:&lt;br&gt;
find_or_create_by_foo(:foo =&amp;gt; &quot;bar&quot;, :baz =&amp;gt; &quot;baz&quot;) {|r|
r.foo = &quot;bar&quot; } Not very DRY&lt;/p&gt;
&lt;p&gt;Typical case is where foo is actually a foo_id... Typically you
want to protect that (usually doesn't change after creation,
especially not from a params web request).&lt;/p&gt;
&lt;p&gt;Thanks&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I understand that for security reasons it is a good idea that methods like find_or_create_by_foo(params) do not write on protected attributes.

I question the rationale for not writing on foo, though, even if it is protected.

1) find_or_create_by_foo is used to get a record that matches the given value for foo. If it won't write foo because it is protected, it doesn't fulfill its purpose.

2) foo is specified explicitely by the developper. I would take that as an 'ok' to write on that field.

3) With current behavior, one must specify foo twice to get the desired result:
  find_or_create_by_foo(:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;baz&quot;) {|r| r.foo = &quot;bar&quot; }
Not very DRY

Typical case is where foo is actually a foo_id... Typically you want to protect that (usually doesn't change after creation, especially not from a params web request).

Thanks</body>
      <body-html>&lt;div&gt;&lt;p&gt;I understand that for security reasons it is a good idea that
methods like find_or_create_by_foo(params) do not write on
protected attributes.&lt;/p&gt;
&lt;p&gt;I question the rationale for not writing on foo, though, even if
it is protected.&lt;/p&gt;
&lt;p&gt;1) find_or_create_by_foo is used to get a record that matches
the given value for foo. If it won't write foo because it is
protected, it doesn't fulfill its purpose.&lt;/p&gt;
&lt;p&gt;2) foo is specified explicitely by the developper. I would take
that as an 'ok' to write on that field.&lt;/p&gt;
&lt;p&gt;3) With current behavior, one must specify foo twice to get the
desired result:&lt;br&gt;
find_or_create_by_foo(:foo =&amp;gt; &quot;bar&quot;, :baz =&amp;gt; &quot;baz&quot;) {|r|
r.foo = &quot;bar&quot; } Not very DRY&lt;/p&gt;
&lt;p&gt;Typical case is where foo is actually a foo_id... Typically you
want to protect that (usually doesn't change after creation,
especially not from a params web request).&lt;/p&gt;
&lt;p&gt;Thanks&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-22T17:19:36+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-04-22T17:19:40+01:00</updated-at>
      <user-id type="integer">26479</user-id>
      <version type="integer">1</version>
      <user-name>Marc-Andr&#233; Lafortune</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Rather than using &quot;foo&quot;, &quot;bar&quot; and &quot;baz&quot;, could you use real terms so we can think how you're thinking? if foo is indeed a foreign_key then you should be using the association builders to assign it, not find_or_create.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rather than using &quot;foo&quot;, &quot;bar&quot; and &quot;baz&quot;, could you use real
terms so we can think how you're thinking? if foo is indeed a
foreign_key then you should be using the association builders to
assign it, not find_or_create.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-25T00:23:47+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-04-25T00:23:48+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">2</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-26T09:16:50+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-04-26T09:16:53+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">3</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am not sure what you mean by &quot;should be using the association builders&quot;, so maybe I am missing something.

To be a bit more convincing that this is a bug, let me add:

0) 
# If Tag#name is protected:
Tag.find_or_create_by_name(&quot;Summer&quot;) # assigns name
Tag.find_or_create_by_name(:name =&gt;&quot;Summer&quot;) # doesn't assign name

I believe both forms should be equivalent, especially that there is no way to:
Tag.find_or_create_by_name(&quot;Summer&quot;, :extra_info =&gt; &quot;blah&quot;)

That later form would be nice, BTW, but I guess I'll concentrate on arguing about this current bug.


An examples with an association I can think of:

Summary.belongs_to :original_content

summary = Summary.find_or_create_by_original_content_id(:original_content_id =&gt; 42, &amp;:summarize)


Moreover, I can't think of an example where it would not be desirable or prudent to assign 'foo'.

Thanks</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am not sure what you mean by &quot;should be using the association
builders&quot;, so maybe I am missing something.&lt;/p&gt;
&lt;p&gt;To be a bit more convincing that this is a bug, let me add:&lt;/p&gt;
&lt;p&gt;0)&lt;br&gt;&lt;/p&gt;
&lt;h1&gt;If Tag#name is protected:&lt;/h1&gt;
&lt;p&gt;Tag.find_or_create_by_name(&quot;Summer&quot;) # assigns name&lt;br&gt;
Tag.find_or_create_by_name(:name =&amp;gt;&quot;Summer&quot;) # doesn't assign
name&lt;/p&gt;
&lt;p&gt;I believe both forms should be equivalent, especially that there
is no way to:&lt;br&gt;
Tag.find_or_create_by_name(&quot;Summer&quot;, :extra_info =&amp;gt; &quot;blah&quot;)&lt;/p&gt;
&lt;p&gt;That later form would be nice, BTW, but I guess I'll concentrate
on arguing about this current bug.&lt;/p&gt;
&lt;p&gt;An examples with an association I can think of:&lt;/p&gt;
&lt;p&gt;Summary.belongs_to :original_content&lt;/p&gt;
&lt;p&gt;summary =
Summary.find_or_create_by_original_content_id(:original_content_id
=&amp;gt; 42, &amp;amp;:summarize)&lt;/p&gt;
&lt;p&gt;Moreover, I can't think of an example where it would not be
desirable or prudent to assign 'foo'.&lt;/p&gt;
&lt;p&gt;Thanks&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-26T18:14:44+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-04-26T18:14:46+01:00</updated-at>
      <user-id type="integer">26479</user-id>
      <version type="integer">4</version>
      <user-name>Marc-Andr&#233; Lafortune</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Actually, is it only me, or the example from the doc will not work (protected fields or not)?

User.find_or_create_by_name('Bob', :age =&gt; 40) # this won't set the age in Rails 2.3.5</body>
      <body-html>&lt;div&gt;&lt;p&gt;Actually, is it only me, or the example from the doc will not
work (protected fields or not)?&lt;/p&gt;
&lt;p&gt;User.find_or_create_by_name('Bob', :age =&amp;gt; 40) # this won't
set the age in Rails 2.3.5&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-26T18:22:09+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-04-26T18:22:14+01:00</updated-at>
      <user-id type="integer">26479</user-id>
      <version type="integer">5</version>
      <user-name>Marc-Andr&#233; Lafortune</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Tested this on 2-3-stable.
@@@
author = Author.find_or_create_by_name(:name =&gt; &quot;bm&quot;, :author_address_id =&gt; 1)
author.inspect # =&gt; #&lt;Author id: 10, :name =&gt; &quot;bm&quot;, :author_address_id =&gt; 1, :author_address_extra_id =&gt; nil&gt;
@@@

Also tested on 2.3.5 on one of my applications and indeed it does not seem to work.
@@@
page = Page.find_or_create_by_name(&quot;my page&quot;, :content =&gt; &quot;ponies here&quot;, :state =&gt; Page::STATE_HIDDEN)
page.inspect # =&gt; #&lt;Page id: 1, :state =&gt; &quot;PUBLIC&quot;, :name =&gt; &quot;my page&quot;, :content =&gt; nil&gt;
@@@

I see test cases covering additional values, as well as hash values for find_or_create_by in 2-3-stable, so i would assume its all working there.

As for your second set of examples - in my opinion this behavior is expected. The attr_protected protects attributes against mass(hash) assignment.
In your first example, its an explicit assignment, in your second one its basically a mass-assignment. So it's consistent with the rest of the API.

Piece of the documentation from ActiveRecord::Base
@@@
class Customer &lt; ActiveRecord::Base
  attr_protected :credit_rating
end
customer = Customer.new(&quot;name&quot; =&gt; David, &quot;credit_rating&quot; =&gt; &quot;Excellent&quot;)
customer.credit_rating # =&gt; nil
customer.attributes = { &quot;description&quot; =&gt; &quot;Jolly fellow&quot;, &quot;credit_rating&quot; =&gt; &quot;Superb&quot; }
customer.credit_rating # =&gt; nil
customer.credit_rating = &quot;Average&quot;
customer.credit_rating # =&gt; &quot;Average&quot;
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Tested this on 2-3-stable.&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;author = Author.find_or_create_by_name(:name =&amp;gt; &quot;bm&quot;, :author_address_id =&amp;gt; 1)
author.inspect # =&amp;gt; #&amp;lt;Author id: 10, :name =&amp;gt; &quot;bm&quot;, :author_address_id =&amp;gt; 1, :author_address_extra_id =&amp;gt; nil&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Also tested on 2.3.5 on one of my applications and indeed it
does not seem to work.&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;page = Page.find_or_create_by_name(&quot;my page&quot;, :content =&amp;gt; &quot;ponies here&quot;, :state =&amp;gt; Page::STATE_HIDDEN)
page.inspect # =&amp;gt; #&amp;lt;Page id: 1, :state =&amp;gt; &quot;PUBLIC&quot;, :name =&amp;gt; &quot;my page&quot;, :content =&amp;gt; nil&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I see test cases covering additional values, as well as hash
values for find_or_create_by in 2-3-stable, so i would assume its
all working there.&lt;/p&gt;
&lt;p&gt;As for your second set of examples - in my opinion this behavior
is expected. The attr_protected protects attributes against
mass(hash) assignment.&lt;br&gt;
In your first example, its an explicit assignment, in your second
one its basically a mass-assignment. So it's consistent with the
rest of the API.&lt;/p&gt;
&lt;p&gt;Piece of the documentation from ActiveRecord::Base&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class Customer &amp;lt; ActiveRecord::Base
  attr_protected :credit_rating
end
customer = Customer.new(&quot;name&quot; =&amp;gt; David, &quot;credit_rating&quot; =&amp;gt; &quot;Excellent&quot;)
customer.credit_rating # =&amp;gt; nil
customer.attributes = { &quot;description&quot; =&amp;gt; &quot;Jolly fellow&quot;, &quot;credit_rating&quot; =&amp;gt; &quot;Superb&quot; }
customer.credit_rating # =&amp;gt; nil
customer.credit_rating = &quot;Average&quot;
customer.credit_rating # =&amp;gt; &quot;Average&quot;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-30T22:04:01+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-04-30T22:04:04+01:00</updated-at>
      <user-id type="integer">71408</user-id>
      <version type="integer">6</version>
      <user-name>Tanel Suurhans</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm fine with the arugment protection, as long as the other form find_or_create_by_name(&quot;Marc-Andr&#233;&quot;, :whatever =&gt; &quot;value&quot;) is fixed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm fine with the arugment protection, as long as the other form
find_or_create_by_name(&quot;Marc-Andr&amp;eacute;&quot;, :whatever =&amp;gt;
&quot;value&quot;) is fixed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T19:03:39+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-04T19:06:14+01:00</updated-at>
      <user-id type="integer">26479</user-id>
      <version type="integer">7</version>
      <user-name>Marc-Andr&#233; Lafortune</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-07T01:22:01+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:assigned_user: 1366
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T01:22:04+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Patch for master tomorrow i will backport it for 2-3-stable</body>
      <body-html>&lt;div&gt;&lt;p&gt;Patch for master tomorrow i will backport it for 2-3-stable&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-07T04:40:45+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T04:40:48+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">9</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [9aaef5935660ba13531512fb7def4b8bdf14511d]) Make find_or_create and find_or_initialize work mixing explicit parameters and a hash [#4457 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/9aaef5935660ba13531512fb7def4b8bdf14511d</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/9aaef5935660ba13531512fb7def4b8bdf14511d&quot;
title=
&quot;Changeset [9aaef5935660ba13531512fb7def4b8bdf14511d]&quot;&gt;[9aaef5935660ba13531512fb7def4b8bdf14511d]&lt;/a&gt;)
Make find_or_create and find_or_initialize work mixing explicit
parameters and a hash [&lt;a href=&quot;/projects/8994/tickets/4457&quot; title=
&quot;Ticket #4457&quot;&gt;#4457&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/9aaef5935660ba13531512fb7def4b8bdf14511d&quot;&gt;
http://github.com/rails/rails/commit/9aaef5935660ba13531512fb7def4b...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-07T17:52:31+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T17:52:32+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">10</version>
      <user-name>Repository</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm going to bakport to 2-3-stable</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm going to bakport to 2-3-stable&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-07T18:22:51+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
:milestone: 
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T18:22:52+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">11</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>2-3-stable backport</body>
      <body-html>&lt;div&gt;&lt;p&gt;2-3-stable backport&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-07T21:01:46+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T21:01:49+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">12</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Sorry i think Marc-Andr&#233; Lafortune deserves a mention on the patch, i forgot it twice.
Here is the 2-3-stable patch with the mention</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry i think Marc-Andr&amp;eacute; Lafortune deserves a mention on
the patch, i forgot it twice.&lt;br&gt;
Here is the 2-3-stable patch with the mention&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-07T21:05:10+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T21:05:12+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">13</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>WTF i send the same thing again, sorry.
This is the right one.
Thanks Marc-Andr&#233;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;WTF i send the same thing again, sorry.&lt;br&gt;
This is the right one.&lt;br&gt;
Thanks Marc-Andr&amp;eacute;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-07T21:07:00+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T21:07:03+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">14</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>(from [f967b352d2abdb88b704266cdb06b53f7d8ab401]) Make find_or_create and find_or_initialize work mixing explicit parameters and a hash. ht: Marc-Andr&#233; Lafortune

[#4457 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/f967b352d2abdb88b704266cdb06b53f7d8ab401</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/f967b352d2abdb88b704266cdb06b53f7d8ab401&quot;
title=
&quot;Changeset [f967b352d2abdb88b704266cdb06b53f7d8ab401]&quot;&gt;[f967b352d2abdb88b704266cdb06b53f7d8ab401]&lt;/a&gt;)
Make find_or_create and find_or_initialize work mixing explicit
parameters and a hash. ht: Marc-Andr&amp;eacute; Lafortune&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4457&quot; title=
&quot;Ticket #4457&quot;&gt;#4457&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=
&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/f967b352d2abdb88b704266cdb06b53f7d8ab401&quot;&gt;
http://github.com/rails/rails/commit/f967b352d2abdb88b704266cdb06b5...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-07T21:32:10+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-07T21:32:11+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">15</version>
      <user-name>Repository</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Great! Thanks Santiago.

I actually felt bad not taking the time to write a patch for this...</body>
      <body-html>&lt;div&gt;&lt;p&gt;Great! Thanks Santiago.&lt;/p&gt;
&lt;p&gt;I actually felt bad not taking the time to write a patch for
this...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-08T05:20:12+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-08T05:20:14+01:00</updated-at>
      <user-id type="integer">26479</user-id>
      <version type="integer">16</version>
      <user-name>Marc-Andr&#233; Lafortune</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Thanks to you Marc-Andr&#233;, and give you some time to try the next issue ;).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks to you Marc-Andr&amp;eacute;, and give you some time to try
the next issue ;).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-08T21:11:40+01:00</created-at>
      <creator-id type="integer">26479</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4457</number>
      <permalink>find_or_create_by_foo-when-foo-is-protected-attribute</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord find_or_create patch</tag>
      <title>find_or_create_by_foo when foo is protected attribute</title>
      <updated-at type="datetime">2010-05-08T21:11:44+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">17</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Marc-Andr&#233; Lafortune</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4457</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>4237de9c8b0ff7a2805599b7f50890235635b5b2</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-07T04:40:45+01:00</created-at>
      <filename>find_or_instantiator_by_attributes-master.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">513116</id>
      <size type="integer">3940</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/513116/find_or_instantiator_by_attributes-master.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>e1b310d981aece32124eeade5585623220d3946d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-07T21:01:46+01:00</created-at>
      <filename>find_or_initialize-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">514057</id>
      <size type="integer">4385</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/514057/find_or_initialize-2-3-stable.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>280b96568a30033ee51a87484736347a28e634db</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-07T21:05:11+01:00</created-at>
      <filename>find_or_initialize-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">514060</id>
      <size type="integer">4385</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/514060/find_or_initialize-2-3-stable.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>b3ba2751d4727149ba0199e466f748d8a8c5a739</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-07T21:07:00+01:00</created-at>
      <filename>find_or_initialize-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">514063</id>
      <size type="integer">4561</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/514063/find_or_initialize-2-3-stable.patch</url>
    </attachment>
  </attachments>
</ticket>
