<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">85</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-05-25T17:01:15+01:00</created-at>
  <creator-id type="integer">20854</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">250</number>
  <permalink>mysql-deadlock-debugging</permalink>
  <priority type="integer">15735</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>activerecord patch</tag>
  <title>Mysql Deadlock debugging</title>
  <updated-at type="datetime">2009-07-24T18:11:50+01:00</updated-at>
  <user-id type="integer">23266</user-id>
  <version type="integer">9</version>
  <user-name>Richie Vos</user-name>
  <creator-name>Mike Perham</creator-name>
  <assigned-user-name>Jeremy Kemper</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
  <priority-name nil="true"></priority-name>
  <original-body>Deadlocks and lock timeouts can be difficult to debug.  This patch updates MysqlAdapter.execute to catch lock errors and print the results of SHOW INNODB STATUS which can help determine the problem.

You can pull the patch from:
http://github.com/mperham/rails/tree/master
Commit c5582f0b82f842af712ae8b9a5efc713bbd736c3

A unit test is included.</original-body>
  <latest-body>Deadlocks and lock timeouts can be difficult to debug.  This patch updates MysqlAdapter.execute to catch lock errors and print the results of SHOW INNODB STATUS which can help determine the problem.

You can pull the patch from:
http://github.com/mperham/rails/tree/master
Commit c5582f0b82f842af712ae8b9a5efc713bbd736c3

A unit test is included.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
Deadlocks and lock timeouts can be difficult to debug.  This patch updates MysqlAdapter.execute to catch lock errors and print the results of SHOW INNODB STATUS which can help determine the problem.
&lt;/p&gt;&lt;p&gt;
You can pull the patch from:
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://github.com/mperham/rails/tree/master&quot;&gt;http://github.com/mperham/rails/...&lt;/a&gt;
&lt;/p&gt;&lt;p&gt;
Commit c5582f0b82f842af712ae8b9a5efc713bbd736c3
&lt;/p&gt;&lt;p&gt;
A unit test is included.
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Deadlocks and lock timeouts can be difficult to debug.  This patch updates MysqlAdapter.execute to catch lock errors and print the results of SHOW INNODB STATUS which can help determine the problem.

You can pull the patch from:
http://github.com/mperham/rails/tree/master
Commit c5582f0b82f842af712ae8b9a5efc713bbd736c3

A unit test is included.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Deadlocks and lock timeouts can be difficult to debug.  This patch updates MysqlAdapter.execute to catch lock errors and print the results of SHOW INNODB STATUS which can help determine the problem.
&lt;/p&gt;&lt;p&gt;
You can pull the patch from:
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://github.com/mperham/rails/tree/master&quot;&gt;http://github.com/mperham/rails/...&lt;/a&gt;
&lt;/p&gt;&lt;p&gt;
Commit c5582f0b82f842af712ae8b9a5efc713bbd736c3
&lt;/p&gt;&lt;p&gt;
A unit test is included.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-25T17:01:15+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-05-25T17:01:15+01:00</updated-at>
      <user-id type="integer">20854</user-id>
      <version type="integer">1</version>
      <user-name>Mike Perham</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This command is only available to mysql superusers so log_innodb_status should check for errors.

Also, could you attach a patch created with git-format-patch? It's much simpler than adding a remote, fetching, cherrypicking a single commit, etc.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
This command is only available to mysql superusers so log_innodb_status should check for errors.
&lt;/p&gt;&lt;p&gt;
Also, could you attach a patch created with git-format-patch? It's much simpler than adding a remote, fetching, cherrypicking a single commit, etc.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-25T21:38:56+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-05-25T21:38:56+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">2</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Jeremy, sorry I'm not terribly git-fluent.  I've pushed a new commit with the error handling you requested to my fork but I don't know the exact patch command to do what you want.  tim pope's &quot;how to contribute to rails with git&quot; page doesn't help either.  Can you send me the command to emit a patch for a given commit?  This prints out nothing:

git format-patch cb6aa8e8516cef55b81f6a061a3e87c6208cd553</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Jeremy, sorry I'm not terribly git-fluent.  I've pushed a new commit with the error handling you requested to my fork but I don't know the exact patch command to do what you want.  tim pope's &quot;how to contribute to rails with git&quot; page doesn't help either.  Can you send me the command to emit a patch for a given commit?  This prints out nothing:
&lt;/p&gt;&lt;p&gt;
git format-patch cb6aa8e8516cef55b81f6a061a3e87c6208cd553
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-25T23:19:34+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-05-25T23:19:34+01:00</updated-at>
      <user-id type="integer">20854</user-id>
      <version type="integer">3</version>
      <user-name>Mike Perham</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Thanks Mike! Check out http://rails.lighthouseapp.com/projects/8994/sending-patches for the skinny.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Thanks Mike! Check out &lt;a href=&quot;http://rails.lighthouseapp.com/projects/8994/sending-patches&quot;&gt;http://rails.lighthouseapp.com/p...&lt;/a&gt; for the skinny.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-25T23:25:19+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-05-25T23:25:19+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">4</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Thanks for the pointer, Jeremy.  Patch attached.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Thanks for the pointer, Jeremy.  Patch attached.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-26T02:11:42+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-05-26T02:11:42+01:00</updated-at>
      <user-id type="integer">20854</user-id>
      <version type="integer">5</version>
      <user-name>Mike Perham</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>One thing I forgot, the log_innodb_status method should be moved down to the private section.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
One thing I forgot, the log_innodb_status method should be moved down to the private section.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-26T02:22:23+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-05-26T02:22:23+01:00</updated-at>
      <user-id type="integer">20854</user-id>
      <version type="integer">6</version>
      <user-name>Mike Perham</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-17T01:56:59+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord patch</tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-07-17T01:56:59+01:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">7</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Staling out, please reopen if this is still a problem.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Staling out, please reopen if this is still a problem.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-28T16:26:05+00:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>activerecord patch</tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2008-10-28T16:26:10+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">8</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I personally still would like this to be included. We're using this patch in production servers as a plugin, but it seems like it's useful enough to be part of Rails core.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I personally still would like this to be included. We're using
this patch in production servers as a plugin, but it seems like
it's useful enough to be part of Rails core.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-24T18:11:47+01:00</created-at>
      <creator-id type="integer">20854</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">250</number>
      <permalink>mysql-deadlock-debugging</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>activerecord patch</tag>
      <title>Mysql Deadlock debugging</title>
      <updated-at type="datetime">2009-07-24T18:11:50+01:00</updated-at>
      <user-id type="integer">23266</user-id>
      <version type="integer">9</version>
      <user-name>Richie Vos</user-name>
      <creator-name>Mike Perham</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/250</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>91b2e8afca1d1a43f42b7899e586c4733afdbfbc</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-05-26T02:11:42+01:00</created-at>
      <filename>250-mysql-lock-debug.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">24438</id>
      <size type="integer">8310</size>
      <uploader-id type="integer">20854</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/24438/250-mysql-lock-debug.diff</url>
    </attachment>
  </attachments>
</ticket>
