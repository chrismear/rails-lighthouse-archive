<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-08-10T03:01:35+01:00</created-at>
  <creator-id type="integer">26790</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">3029</number>
  <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
  <priority type="integer">130772</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>delete destroy javascript rails scafold</tag>
  <title>[PATCH] Non JavaScript dependent record deletion solution</title>
  <updated-at type="datetime">2009-08-10T07:52:30+01:00</updated-at>
  <user-id type="integer">23560</user-id>
  <version type="integer">10</version>
  <user-name>Erik Ostrom</user-name>
  <creator-name>Kieran P</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
  <priority-name nil="true"></priority-name>
  <original-body>At the moment, to delete a record you need Javascript enabled. I've created a patch which adds a new delete action to controllers. Any link_to with :method =&gt; :delete now point to the delete path. The javascript still works though if they have it enabled.

Attached is a patch with the changes to make this happen, along with documentation, and tests. I'm new to the Rails source code, so if I've change more or less than I was supposed to, please forgive me.</original-body>
  <latest-body>At the moment, to delete a record you need Javascript enabled. I've created a patch which adds a new delete action to controllers. Any link_to with :method =&gt; :delete now point to the delete path. The javascript still works though if they have it enabled.

Attached is a patch with the changes to make this happen, along with documentation, and tests. I'm new to the Rails source code, so if I've change more or less than I was supposed to, please forgive me.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;At the moment, to delete a record you need Javascript enabled.
I've created a patch which adds a new delete action to controllers.
Any link_to with :method =&amp;gt; :delete now point to the delete
path. The javascript still works though if they have it
enabled.&lt;/p&gt;
&lt;p&gt;Attached is a patch with the changes to make this happen, along
with documentation, and tests. I'm new to the Rails source code, so
if I've change more or less than I was supposed to, please forgive
me.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>At the moment, to delete a record you need Javascript enabled. I've created a patch which adds a new delete action to controllers. Any link_to with :method =&gt; :delete now point to the delete path. The javascript still works though if they have it enabled.

Attached is a patch with the changes to make this happen, along with documentation, and tests. I'm new to the Rails source code, so if I've change more or less than I was supposed to, please forgive me.</body>
      <body-html>&lt;div&gt;&lt;p&gt;At the moment, to delete a record you need Javascript enabled.
I've created a patch which adds a new delete action to controllers.
Any link_to with :method =&amp;gt; :delete now point to the delete
path. The javascript still works though if they have it
enabled.&lt;/p&gt;
&lt;p&gt;Attached is a patch with the changes to make this happen, along
with documentation, and tests. I'm new to the Rails source code, so
if I've change more or less than I was supposed to, please forgive
me.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-10T03:01:35+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T03:01:41+01:00</updated-at>
      <user-id type="integer">26790</user-id>
      <version type="integer">1</version>
      <user-name>Kieran P</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I remember Yehuda had said something about this in his presentation at Railsconf. Rails is going to handle this through HTML5, I guess.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I remember Yehuda had said something about this in his
presentation at Railsconf. Rails is going to handle this through
HTML5, I guess.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-10T04:28:38+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T04:28:44+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">2</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Even with HTML5, I don't see a way of providing Javascript independent record deletion without either adding a delete method (as the patch does) or hacking the destroy method (which seems ugly to me).

At least with the delete method, you can add logic to check if it can be deleted before hitting the destroy action (as is needed in a project I'm working on).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Even with HTML5, I don't see a way of providing Javascript
independent record deletion without either adding a delete method
(as the patch does) or hacking the destroy method (which seems ugly
to me).&lt;/p&gt;
&lt;p&gt;At least with the delete method, you can add logic to check if
it can be deleted before hitting the destroy action (as is needed
in a project I'm working on).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-10T05:20:56+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T05:20:58+01:00</updated-at>
      <user-id type="integer">26790</user-id>
      <version type="integer">3</version>
      <user-name>Kieran P</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Nice patch. I'm not a fan of adding a million delete confirmation pages, esp. in core. This would make a great plugin, however!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Nice patch. I'm not a fan of adding a million delete
confirmation pages, esp. in core. This would make a great plugin,
however!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T05:24:18+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>bugmash delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T05:24:21+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">4</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T05:24:22+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash delete destroy javascript rails scafold
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T05:24:27+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">5</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>-1 i think it's better to leave it out, assuming that you add a delete method is somewhat not so RESTful imo. if there is a planned solution for a later version of rails based on HTML5 (whenever that's gonna be widely supported) i think it's better to keep it as it is atm.</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 i think it's better to leave it out, assuming that you add a
delete method is somewhat not so RESTful imo. if there is a planned
solution for a later version of rails based on HTML5 (whenever
that's gonna be widely supported) i think it's better to keep it as
it is atm.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T05:25:54+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: delete destroy javascript rails scafold
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>bugmash delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T05:25:56+01:00</updated-at>
      <user-id type="integer">10379</user-id>
      <version type="integer">6</version>
      <user-name>Elad Meidar</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T07:10:29+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash delete destroy javascript rails scafold
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T07:10:31+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">7</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Jeremy, its not a million confirmation pages. If Javascript is enabled, it continue to do the prompt/destroy functionality. It'll only render the delete action if they have JavaScript off when they click the Delete link.

Elad, whats not restful about it?

new    -&gt; create
edit   -&gt; update
delete -&gt; destroy

I'd be interested to hear how HTML5 will fix the issue... I suspect it'll just make the HTML easier to plugin into with Javascript and not actually fix the problem.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jeremy, its not a million confirmation pages. If Javascript is
enabled, it continue to do the prompt/destroy functionality. It'll
only render the delete action if they have JavaScript off when they
click the Delete link.&lt;/p&gt;
&lt;p&gt;Elad, whats not restful about it?&lt;/p&gt;
&lt;p&gt;new -&amp;gt; create&lt;br&gt;
edit -&amp;gt; update&lt;br&gt;
delete -&amp;gt; destroy&lt;/p&gt;
&lt;p&gt;I'd be interested to hear how HTML5 will fix the issue... I
suspect it'll just make the HTML easier to plugin into with
Javascript and not actually fix the problem.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T07:13:54+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: delete destroy javascript rails scafold
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>bugmash delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T07:13:58+01:00</updated-at>
      <user-id type="integer">26790</user-id>
      <version type="integer">8</version>
      <user-name>Kieran P</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>It's a delete route, action, and view on every controller and it begs for confusion with destroy.

(HTML5 has no bearing here.)</body>
      <body-html>&lt;div&gt;&lt;p&gt;It's a delete route, action, and view on every controller and it
begs for confusion with destroy.&lt;/p&gt;
&lt;p&gt;(HTML5 has no bearing here.)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T07:25:11+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash delete destroy javascript rails scafold
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T07:25:14+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">9</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>FYI, Rails Magazine #2 (http://railsmagazine.com/issues/2) explains the HTML 5 thing. It doesn't eliminate the JavaScript dependency.

I'm +1 on eliminating the JavaScript dependency for delete, but I'm -1 pessimistic about the non-JavaScript scaffolding being maintained effectively.

http://www.napcsweb.com/blog/2009/07/01/accessible-rails-apps-rails-links-rest-and-javascript-hidden-forms/ suggests another option: use button_to to generate a form consisting of hidden fields and a destroy button, and then use unobtrusive JavaScript to turn the form into a link for JS-enabled users.

I can imagine hacking link_to(..., :method =&gt; :delete) to do this automatically, but I'm not offering to do it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;FYI, Rails Magazine &lt;a href=&quot;/projects/8994/tickets/2&quot; title=
&quot;Ticket #2&quot;&gt;#2&lt;/a&gt; (&lt;a href=
&quot;http://railsmagazine.com/issues/2&quot;&gt;http://railsmagazine.com/issues/2&lt;/a&gt;)
explains the HTML 5 thing. It doesn't eliminate the JavaScript
dependency.&lt;/p&gt;
&lt;p&gt;I'm +1 on eliminating the JavaScript dependency for delete, but
I'm -1 pessimistic about the non-JavaScript scaffolding being
maintained effectively.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://www.napcsweb.com/blog/2009/07/01/accessible-rails-apps-rails-links-rest-and-javascript-hidden-forms/&quot;&gt;
http://www.napcsweb.com/blog/2009/07/01/accessible-rails-apps-rails...&lt;/a&gt;
suggests another option: use button_to to generate a form
consisting of hidden fields and a destroy button, and then use
unobtrusive JavaScript to turn the form into a link for JS-enabled
users.&lt;/p&gt;
&lt;p&gt;I can imagine hacking link_to(..., :method =&amp;gt; :delete) to do
this automatically, but I'm not offering to do it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T07:52:25+01:00</created-at>
      <creator-id type="integer">26790</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3029</number>
      <permalink>patch-non-javascript-dependent-record-deletion-solution</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>delete destroy javascript rails scafold</tag>
      <title>[PATCH] Non JavaScript dependent record deletion solution</title>
      <updated-at type="datetime">2009-08-10T07:52:30+01:00</updated-at>
      <user-id type="integer">23560</user-id>
      <version type="integer">10</version>
      <user-name>Erik Ostrom</user-name>
      <creator-name>Kieran P</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3029</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>fb0ef8a5d2f44a9ac021079e6043b1f597e84f5a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-08-10T03:01:37+01:00</created-at>
      <filename>non_javascript_dependent_record_deletion.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">239500</id>
      <size type="integer">49437</size>
      <uploader-id type="integer">26790</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/239500/non_javascript_dependent_record_deletion.patch</url>
    </attachment>
  </attachments>
</ticket>
