<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-01-19T04:47:48+00:00</created-at>
  <creator-id type="integer">17848</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">3745</number>
  <permalink>railsinitrb-is-not-being-called-anymore</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>plugins rails3</tag>
  <title>Having rails/init.rb in plugin should generate deprecation warning since it's is not being called anymore</title>
  <updated-at type="datetime">2010-10-15T23:01:40+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">8</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Gabe da Silveira</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>High</priority-name>
  <original-body>I was not able to find any information about this in any of the blog posts or even during the latest bugmash.  However, in my attempt to get my app updated to Rails 3 I noticed that one plugin [super_exception_notifier](http://github.com/pboling/exception_notification) I use that follows the [official recommended plugin procedure](http://guides.rubyonrails.org/plugins.html#plugingems) no longer seems to be calling @rails/init.rb@.

Digging through git I identified [this commit](http://github.com/rails/rails/commit/82b9b151ffde44305d67744c0bfd9bb5505f6fbe) which seems to completely remove gem-style init loading.  The gem-style plugin fixture that used to be used seems to just be orphaned without test coverage now.  It seems like everything was collapsed down to a simpler case which maybe was intended to work with gems, but there is no longer a test case explicitly covering it.  Either that or the particular gem I'm looking at or my Bundler vendor setup is somehow broken.

In any case, I am happy to work on a patch for this, but I need to know is rails/init.rb deprecated?  Should we be just putting conditionals in the standard required file [like factory_girl does](http://github.com/thoughtbot/factory_girl/blob/b4e6d6320f9cd0fae06a1773ba9639f3ff1856b0/lib/factory_girl.rb)?  Is there another way to somehow flag a gem as a plugin that I'm missing?</original-body>
  <latest-body>I was not able to find any information about this in any of the blog posts or even during the latest bugmash.  However, in my attempt to get my app updated to Rails 3 I noticed that one plugin [super_exception_notifier](http://github.com/pboling/exception_notification) I use that follows the [official recommended plugin procedure](http://guides.rubyonrails.org/plugins.html#plugingems) no longer seems to be calling @rails/init.rb@.

Digging through git I identified [this commit](http://github.com/rails/rails/commit/82b9b151ffde44305d67744c0bfd9bb5505f6fbe) which seems to completely remove gem-style init loading.  The gem-style plugin fixture that used to be used seems to just be orphaned without test coverage now.  It seems like everything was collapsed down to a simpler case which maybe was intended to work with gems, but there is no longer a test case explicitly covering it.  Either that or the particular gem I'm looking at or my Bundler vendor setup is somehow broken.

In any case, I am happy to work on a patch for this, but I need to know is rails/init.rb deprecated?  Should we be just putting conditionals in the standard required file [like factory_girl does](http://github.com/thoughtbot/factory_girl/blob/b4e6d6320f9cd0fae06a1773ba9639f3ff1856b0/lib/factory_girl.rb)?  Is there another way to somehow flag a gem as a plugin that I'm missing?</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I was not able to find any information about this in any of the
blog posts or even during the latest bugmash. However, in my
attempt to get my app updated to Rails 3 I noticed that one plugin
&lt;a href=
&quot;http://github.com/pboling/exception_notification&quot;&gt;super_exception_notifier&lt;/a&gt;
I use that follows the &lt;a href=
&quot;http://guides.rubyonrails.org/plugins.html#plugingems&quot;&gt;official
recommended plugin procedure&lt;/a&gt; no longer seems to be calling
&lt;code&gt;rails/init.rb&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Digging through git I identified &lt;a href=
&quot;http://github.com/rails/rails/commit/82b9b151ffde44305d67744c0bfd9bb5505f6fbe&quot;&gt;
this commit&lt;/a&gt; which seems to completely remove gem-style init
loading. The gem-style plugin fixture that used to be used seems to
just be orphaned without test coverage now. It seems like
everything was collapsed down to a simpler case which maybe was
intended to work with gems, but there is no longer a test case
explicitly covering it. Either that or the particular gem I'm
looking at or my Bundler vendor setup is somehow broken.&lt;/p&gt;
&lt;p&gt;In any case, I am happy to work on a patch for this, but I need
to know is rails/init.rb deprecated? Should we be just putting
conditionals in the standard required file &lt;a href=
&quot;http://github.com/thoughtbot/factory_girl/blob/b4e6d6320f9cd0fae06a1773ba9639f3ff1856b0/lib/factory_girl.rb&quot;&gt;
like factory_girl does&lt;/a&gt;? Is there another way to somehow flag a
gem as a plugin that I'm missing?&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I was not able to find any information about this in any of the blog posts or even during the latest bugmash.  However, in my attempt to get my app updated to Rails 3 I noticed that one plugin [super_exception_notifier](http://github.com/pboling/exception_notification) I use that follows the [official recommended plugin procedure](http://guides.rubyonrails.org/plugins.html#plugingems) no longer seems to be calling @rails/init.rb@.

Digging through git I identified [this commit](http://github.com/rails/rails/commit/82b9b151ffde44305d67744c0bfd9bb5505f6fbe) which seems to completely remove gem-style init loading.  The gem-style plugin fixture that used to be used seems to just be orphaned without test coverage now.  It seems like everything was collapsed down to a simpler case which maybe was intended to work with gems, but there is no longer a test case explicitly covering it.  Either that or the particular gem I'm looking at or my Bundler vendor setup is somehow broken.

In any case, I am happy to work on a patch for this, but I need to know is rails/init.rb deprecated?  Should we be just putting conditionals in the standard required file [like factory_girl does](http://github.com/thoughtbot/factory_girl/blob/b4e6d6320f9cd0fae06a1773ba9639f3ff1856b0/lib/factory_girl.rb)?  Is there another way to somehow flag a gem as a plugin that I'm missing?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I was not able to find any information about this in any of the
blog posts or even during the latest bugmash. However, in my
attempt to get my app updated to Rails 3 I noticed that one plugin
&lt;a href=
&quot;http://github.com/pboling/exception_notification&quot;&gt;super_exception_notifier&lt;/a&gt;
I use that follows the &lt;a href=
&quot;http://guides.rubyonrails.org/plugins.html#plugingems&quot;&gt;official
recommended plugin procedure&lt;/a&gt; no longer seems to be calling
&lt;code&gt;rails/init.rb&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Digging through git I identified &lt;a href=
&quot;http://github.com/rails/rails/commit/82b9b151ffde44305d67744c0bfd9bb5505f6fbe&quot;&gt;
this commit&lt;/a&gt; which seems to completely remove gem-style init
loading. The gem-style plugin fixture that used to be used seems to
just be orphaned without test coverage now. It seems like
everything was collapsed down to a simpler case which maybe was
intended to work with gems, but there is no longer a test case
explicitly covering it. Either that or the particular gem I'm
looking at or my Bundler vendor setup is somehow broken.&lt;/p&gt;
&lt;p&gt;In any case, I am happy to work on a patch for this, but I need
to know is rails/init.rb deprecated? Should we be just putting
conditionals in the standard required file &lt;a href=
&quot;http://github.com/thoughtbot/factory_girl/blob/b4e6d6320f9cd0fae06a1773ba9639f3ff1856b0/lib/factory_girl.rb&quot;&gt;
like factory_girl does&lt;/a&gt;? Is there another way to somehow flag a
gem as a plugin that I'm missing?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-19T04:47:48+00:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash plugins rails3</tag>
      <title>rails/init.rb is not being called anymore</title>
      <updated-at type="datetime">2010-01-19T04:47:53+00:00</updated-at>
      <user-id type="integer">17848</user-id>
      <version type="integer">1</version>
      <user-name>Gabe da Silveira</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">6601</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-19T18:27:30+00:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash plugins rails3</tag>
      <title>rails/init.rb is not being called anymore</title>
      <updated-at type="datetime">2010-01-19T18:27:33+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">2</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name>Carl Lerche</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">6601</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Jeremy, thanks for dropping by.  I caught Yehuda on irc and he tells me that the API is changed intentionally.  I do believe this needs documentation though, definitely before Rails 3 drops.  Deprecation would have been nice, but considering the scope of changes in Rails 3 it doesn't really seem worth it--there will be many breaking changes already.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jeremy, thanks for dropping by. I caught Yehuda on irc and he
tells me that the API is changed intentionally. I do believe this
needs documentation though, definitely before Rails 3 drops.
Deprecation would have been nice, but considering the scope of
changes in Rails 3 it doesn't really seem worth it--there will be
many breaking changes already.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-19T19:19:11+00:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash plugins rails3</tag>
      <title>rails/init.rb is not being called anymore</title>
      <updated-at type="datetime">2010-01-19T19:19:12+00:00</updated-at>
      <user-id type="integer">17848</user-id>
      <version type="integer">3</version>
      <user-name>Gabe da Silveira</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name>Carl Lerche</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">6601</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I also noticed this with my by_star plugin. To make it dually compatible between 2.3 and 3.0 I've copied the file to the root folder and it seems to work ok. Should I just have a lib/by_star.rb file and let Rails automatically include that? Is that how it works now?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I also noticed this with my by_star plugin. To make it dually
compatible between 2.3 and 3.0 I've copied the file to the root
folder and it seems to work ok. Should I just have a lib/by_star.rb
file and let Rails automatically include that? Is that how it works
now?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-20T00:33:45+00:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash plugins rails3</tag>
      <title>rails/init.rb is not being called anymore</title>
      <updated-at type="datetime">2010-01-20T00:33:47+00:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">4</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name>Carl Lerche</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">6601</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>@Gabe da Silveira

+1 on the deprecation warning. I believe that Rails 3 is under rapid development, so they forgot to put one in.

@Ryan

After I have followed the irc, I think `lib/by_star.rb` should be a way to go for 3.0 compatibility.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Gabe da Silveira&lt;/p&gt;
&lt;p&gt;+1 on the deprecation warning. I believe that Rails 3 is under
rapid development, so they forgot to put one in.&lt;/p&gt;
&lt;p&gt;@Ryan&lt;/p&gt;
&lt;p&gt;After I have followed the irc, I think
&lt;code&gt;lib/by_star.rb&lt;/code&gt; should be a way to go for 3.0
compatibility.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-20T06:10:04+00:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- 
:title: rails/init.rb is not being called anymore
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash plugins rails3</tag>
      <title>Having rails/init.rb in plugin should generate deprecation warning since it's is not being called anymore</title>
      <updated-at type="datetime">2010-01-20T06:10:06+00:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">5</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name>Carl Lerche</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">6601</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/13645)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/13645&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-12T12:46:20+00:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash plugins rails3
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>plugins rails3</tag>
      <title>Having rails/init.rb in plugin should generate deprecation warning since it's is not being called anymore</title>
      <updated-at type="datetime">2010-02-12T12:46:20+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">6</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name>Carl Lerche</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Fixed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Fixed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-02-16T23:12:54+00:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
:assigned_user: 6601
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>plugins rails3</tag>
      <title>Having rails/init.rb in plugin should generate deprecation warning since it's is not being called anymore</title>
      <updated-at type="datetime">2010-02-16T23:12:58+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">7</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:40+01:00</created-at>
      <creator-id type="integer">17848</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3745</number>
      <permalink>railsinitrb-is-not-being-called-anymore</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>plugins rails3</tag>
      <title>Having rails/init.rb in plugin should generate deprecation warning since it's is not being called anymore</title>
      <updated-at type="datetime">2010-10-15T23:01:40+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Gabe da Silveira</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3745</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
  </versions>
</ticket>
