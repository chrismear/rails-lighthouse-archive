<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-02-05T22:37:50+00:00</created-at>
  <creator-id type="integer">26521</creator-id>
  <milestone-due-on type="datetime">2009-01-31T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1890</number>
  <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
  <priority type="integer">54</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>2.3 tests</tag>
  <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
  <updated-at type="datetime">2009-02-11T17:12:22+00:00</updated-at>
  <user-id type="integer">26521</user-id>
  <version type="integer">13</version>
  <user-name>Niels Meersschaert</user-name>
  <creator-name>Niels Meersschaert</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
  <priority-name nil="true"></priority-name>
  <original-body>If I have an assert_select in my test like assert_select &quot;input#system_article_name[type='text']&quot;, I get the following stacktrace as an error when running the tests.  This occurs both with autotest &amp; with rake test

NameError: uninitialized constant HTML::Document
    activesupport (2.3.0) lib/active_support/dependencies.rb:440:in `load_missing_constant'
    activesupport (2.3.0) lib/active_support/dependencies.rb:80:in `const_missing'
    actionpack (2.3.0) lib/action_controller/test_process.rb:484:in `html_document'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:614:in `response_from_page_or_rjs'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:213:in `assert_select'
    /test/functional/system_articles_controller_test.rb:20:in `test_get_new'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `__send__'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `run'</original-body>
  <latest-body>If I have an assert_select in my test like assert_select &quot;input#system_article_name[type='text']&quot;, I get the following stacktrace as an error when running the tests.  This occurs both with autotest &amp; with rake test

NameError: uninitialized constant HTML::Document
    activesupport (2.3.0) lib/active_support/dependencies.rb:440:in `load_missing_constant'
    activesupport (2.3.0) lib/active_support/dependencies.rb:80:in `const_missing'
    actionpack (2.3.0) lib/action_controller/test_process.rb:484:in `html_document'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:614:in `response_from_page_or_rjs'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:213:in `assert_select'
    /test/functional/system_articles_controller_test.rb:20:in `test_get_new'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `__send__'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `run'</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;If I have an assert_select in my test like assert_select
&quot;input#system_article_name[type='text']&quot;, I get the following
stacktrace as an error when running the tests. This occurs both
with autotest &amp;amp; with rake test&lt;/p&gt;
&lt;p&gt;NameError: uninitialized constant HTML::Document&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;activesupport (2.3.0) lib/active_support/dependencies.rb:440:in `load_missing_constant'
activesupport (2.3.0) lib/active_support/dependencies.rb:80:in `const_missing'
actionpack (2.3.0) lib/action_controller/test_process.rb:484:in `html_document'
actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:614:in `response_from_page_or_rjs'
actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:213:in `assert_select'
/test/functional/system_articles_controller_test.rb:20:in `test_get_new'
activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `__send__'
activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `run'
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If I have an assert_select in my test like assert_select &quot;input#system_article_name[type='text']&quot;, I get the following stacktrace as an error when running the tests.  This occurs both with autotest &amp; with rake test

NameError: uninitialized constant HTML::Document
    activesupport (2.3.0) lib/active_support/dependencies.rb:440:in `load_missing_constant'
    activesupport (2.3.0) lib/active_support/dependencies.rb:80:in `const_missing'
    actionpack (2.3.0) lib/action_controller/test_process.rb:484:in `html_document'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:614:in `response_from_page_or_rjs'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:213:in `assert_select'
    /test/functional/system_articles_controller_test.rb:20:in `test_get_new'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `__send__'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `run'</body>
      <body-html>&lt;div&gt;&lt;p&gt;If I have an assert_select in my test like assert_select
&quot;input#system_article_name[type='text']&quot;, I get the following
stacktrace as an error when running the tests. This occurs both
with autotest &amp;amp; with rake test&lt;/p&gt;
&lt;p&gt;NameError: uninitialized constant HTML::Document&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;activesupport (2.3.0) lib/active_support/dependencies.rb:440:in `load_missing_constant'
activesupport (2.3.0) lib/active_support/dependencies.rb:80:in `const_missing'
actionpack (2.3.0) lib/action_controller/test_process.rb:484:in `html_document'
actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:614:in `response_from_page_or_rjs'
actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:213:in `assert_select'
/test/functional/system_articles_controller_test.rb:20:in `test_get_new'
activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `__send__'
activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `run'
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-05T22:37:50+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1</title>
      <updated-at type="datetime">2009-02-05T22:37:54+00:00</updated-at>
      <user-id type="integer">26521</user-id>
      <version type="integer">1</version>
      <user-name>Niels Meersschaert</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-06T13:41:26+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1</title>
      <updated-at type="datetime">2009-02-06T13:41:30+00:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">2</version>
      <user-name>DHH</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Make sure you are using ActionController::TestCase or ActionController::IntegrationTest.

I thought this would be an autoload issue, but I tried with a fresh scaffold and assert_select works fine.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Make sure you are using ActionController::TestCase or
ActionController::IntegrationTest.&lt;/p&gt;
&lt;p&gt;I thought this would be an autoload issue, but I tried with a
fresh scaffold and assert_select works fine.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-07T05:30:29+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1</title>
      <updated-at type="datetime">2009-02-07T05:30:30+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">3</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The test in question, like all the rest in my project inherit from ActionController::TestCase.  class SystemArticlesControllerTest &lt; ActionController::TestCase.  The stacktrace provided was just one.  Every controller test in my app which uses assert_select fails with that error.  This app did start out as a 1.x Rails app, so it has been upgraded over time.  Is there something outside of the ActionController::TestCase which could explain the load order issue this exposes?</body>
      <body-html>&lt;div&gt;&lt;p&gt;The test in question, like all the rest in my project inherit
from ActionController::TestCase. class SystemArticlesControllerTest
&amp;lt; ActionController::TestCase. The stacktrace provided was just
one. Every controller test in my app which uses assert_select fails
with that error. This app did start out as a 1.x Rails app, so it
has been upgraded over time. Is there something outside of the
ActionController::TestCase which could explain the load order issue
this exposes?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-09T15:10:59+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Tests which use assert_select fail in 2.3.0 RC1
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T15:11:00+00:00</updated-at>
      <user-id type="integer">26521</user-id>
      <version type="integer">4</version>
      <user-name>Niels Meersschaert</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I doubled checked and it looks like HTML &quot;should&quot; be autoloading correctly. I'm really surprised that this happens with &quot;rake&quot;, it would more commonly happen if you ran you test standalone.

Can you try adding &quot;require 'html/document'&quot; to the top of your tests (this is not the correct solution). I'm just hoping that fixes it and we can confirm its an autoloading issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I doubled checked and it looks like HTML &quot;should&quot; be autoloading
correctly. I'm really surprised that this happens with &quot;rake&quot;, it
would more commonly happen if you ran you test standalone.&lt;/p&gt;
&lt;p&gt;Can you try adding &quot;require 'html/document'&quot; to the top of your
tests (this is not the correct solution). I'm just hoping that
fixes it and we can confirm its an autoloading issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-09T15:15:34+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T15:15:39+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">5</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I think this is getting us closer.... now I get:

/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- html/document (MissingSourceFile)
	from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
	from /Library/Ruby/Gems/1.8/gems/activesupport-2.3.0/lib/active_support/dependencies.rb:158:in `require'
	from ./test/functional/system_articles_controller_test.rb:2
	from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5:in `load'
	from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5
	from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5:in `each'
	from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5

This happens when I place the require just below the test_helper require as well as if I place it inside the class block.  

So perhaps the autoload can't locate the class properly based on the html/document reference?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think this is getting us closer.... now I get:&lt;/p&gt;
&lt;p&gt;/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in
&lt;code&gt;gem_original_require': no such file to load -- html/document
(MissingSourceFile)&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
from /Library/Ruby/Gems/1.8/gems/activesupport-2.3.0/lib/active_support/dependencies.rb:158:in `require'
from ./test/functional/system_articles_controller_test.rb:2
from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5:in `load'
from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5
from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5:in `each'
from /Library/Ruby/Gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb:5
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This happens when I place the require just below the test_helper
require as well as if I place it inside the class block.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;So perhaps the autoload can't locate the class properly based on
the html/document reference?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-09T15:32:01+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T15:32:04+00:00</updated-at>
      <user-id type="integer">26521</user-id>
      <version type="integer">6</version>
      <user-name>Niels Meersschaert</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I found another symptom which might be causing this.  The first controller failure resulted in this stacktrace:

test_changelog_do_not_exist(Admin::AboutControllerTest):
NoMethodError: undefined method `id2name' for {:instance_writer=&gt;false}:Hash
    money (1.7.1) lib/support/cattr_accessor.rb:7:in `cattr_reader'
    money (1.7.1) lib/support/cattr_accessor.rb:5:in `each'
    money (1.7.1) lib/support/cattr_accessor.rb:5:in `cattr_reader'
    money (1.7.1) lib/support/cattr_accessor.rb:54:in `cattr_accessor'
    actionpack (2.3.0) lib/action_controller/vendor/html-scanner/html/sanitizer.rb:44
    activesupport (2.3.0) lib/active_support/dependencies.rb:158:in `require'
    actionpack (2.3.0) lib/action_controller/vendor/html-scanner/html/document.rb:4
    actionpack (2.3.0) lib/action_controller/test_process.rb:484:in `html_document'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:614:in `response_from_page_or_rjs'
    actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:213:in `assert_select'
    /test/functional/admin/about_controller_test.rb:49:in `test_changelog_do_not_exist'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `__send__'
    activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `run'

Every controller after that failed with NameError: uninitialized constant HTML::Document</body>
      <body-html>&lt;div&gt;&lt;p&gt;I found another symptom which might be causing this. The first
controller failure resulted in this stacktrace:&lt;/p&gt;
&lt;p&gt;test_changelog_do_not_exist(Admin::AboutControllerTest):
NoMethodError: undefined method &lt;code&gt;id2name' for
{:instance_writer=&amp;gt;false}:Hash&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;money (1.7.1) lib/support/cattr_accessor.rb:7:in `cattr_reader'
money (1.7.1) lib/support/cattr_accessor.rb:5:in `each'
money (1.7.1) lib/support/cattr_accessor.rb:5:in `cattr_reader'
money (1.7.1) lib/support/cattr_accessor.rb:54:in `cattr_accessor'
actionpack (2.3.0) lib/action_controller/vendor/html-scanner/html/sanitizer.rb:44
activesupport (2.3.0) lib/active_support/dependencies.rb:158:in `require'
actionpack (2.3.0) lib/action_controller/vendor/html-scanner/html/document.rb:4
actionpack (2.3.0) lib/action_controller/test_process.rb:484:in `html_document'
actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:614:in `response_from_page_or_rjs'
actionpack (2.3.0) lib/action_controller/assertions/selector_assertions.rb:213:in `assert_select'
/test/functional/admin/about_controller_test.rb:49:in `test_changelog_do_not_exist'
activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `__send__'
activesupport (2.3.0) lib/active_support/testing/setup_and_teardown.rb:57:in `run'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Every controller after that failed with NameError: uninitialized
constant HTML::Document&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-09T17:39:12+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T17:39:13+00:00</updated-at>
      <user-id type="integer">26521</user-id>
      <version type="integer">7</version>
      <user-name>Niels Meersschaert</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Weirdness.

Could you try creating a minimal rails app with this failure. It could be some quirkiness with your Rails app.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Weirdness.&lt;/p&gt;
&lt;p&gt;Could you try creating a minimal rails app with this failure. It
could be some quirkiness with your Rails app.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-09T18:11:33+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- 
:state: wontfix
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T18:11:34+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">8</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It appears that the Money gem may be overstepping some rails calls thus causing this issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It appears that the Money gem may be overstepping some rails
calls thus causing this issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-09T18:17:38+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T18:17:39+00:00</updated-at>
      <user-id type="integer">26521</user-id>
      <version type="integer">9</version>
      <user-name>Niels Meersschaert</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I believe it was caused because my app uses ActiveMerchant as a plugin.  As a result, I had a config.gem &quot;money&quot; requirement.  When I removed that requirement, the cattr_accessor errors went away, as well as the HTML::Document issues.  I believe it was a collision between the 2, as I couldn't replicate it in a fresh app.  

My apologies that this isn't purely a Rails issue.  This does point to a potential conflict that only appears to have been introduced in 2.3.0, but as to whether that is a Money gem/Active Merchant issue or a Rails issue, I'll leave as an open question.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I believe it was caused because my app uses ActiveMerchant as a
plugin. As a result, I had a config.gem &quot;money&quot; requirement. When I
removed that requirement, the cattr_accessor errors went away, as
well as the HTML::Document issues. I believe it was a collision
between the 2, as I couldn't replicate it in a fresh app.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;My apologies that this isn't purely a Rails issue. This does
point to a potential conflict that only appears to have been
introduced in 2.3.0, but as to whether that is a Money gem/Active
Merchant issue or a Rails issue, I'll leave as an open
question.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-09T18:53:41+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T18:53:43+00:00</updated-at>
      <user-id type="integer">26521</user-id>
      <version type="integer">10</version>
      <user-name>Niels Meersschaert</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>You may want to try with the edge release of ActiveMerchant to see if the problem exists there.

If it turns out to be something funky with our code, I'd be happy to apply a patch. I'd hate to see ActiveMerchant have to hack around a Rails issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You may want to try with the edge release of ActiveMerchant to
see if the problem exists there.&lt;/p&gt;
&lt;p&gt;If it turns out to be something funky with our code, I'd be
happy to apply a patch. I'd hate to see ActiveMerchant have to hack
around a Rails issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-09T20:13:57+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T20:13:59+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">11</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Had the same issue, updating the Money gem to 2.0.0 fixed it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Had the same issue, updating the Money gem to 2.0.0 fixed
it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-09T23:01:13+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-09T23:01:14+00:00</updated-at>
      <user-id type="integer">42864</user-id>
      <version type="integer">12</version>
      <user-name>rob</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Also using ActiveMerchant as a gem v1.4.1 eliminates the issue.  It looks like the conflict is only between older versions of ActiveMerchant/Money &amp; Rails 2.3.0.  Updating both eliminates the conflict.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Also using ActiveMerchant as a gem v1.4.1 eliminates the issue.
It looks like the conflict is only between older versions of
ActiveMerchant/Money &amp;amp; Rails 2.3.0. Updating both eliminates
the conflict.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-11T17:12:21+00:00</created-at>
      <creator-id type="integer">26521</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1890</number>
      <permalink>tests-which-use-assert_select-fail-in-230-rc1</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3 tests</tag>
      <title>Tests which use assert_select fail in 2.3.0 RC1 when upgrading an app</title>
      <updated-at type="datetime">2009-02-11T17:12:22+00:00</updated-at>
      <user-id type="integer">26521</user-id>
      <version type="integer">13</version>
      <user-name>Niels Meersschaert</user-name>
      <creator-name>Niels Meersschaert</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1890</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
</ticket>
