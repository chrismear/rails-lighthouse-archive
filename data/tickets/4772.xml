<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-06-05T13:47:25+01:00</created-at>
  <creator-id type="integer">89656</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4772</number>
  <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activesupport ruby-1.9.2</tag>
  <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
  <updated-at type="datetime">2010-10-15T23:01:55+01:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">12</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Rohit Arondekar</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>Running the actionpack tests in Rails master on 1.9.2-head gives 44 errors. The tests pass on 1.8.7.

Two types of errors are common which I have listed below. For all the errors I've created a pastie =&gt; http://pastie.org/992946

&lt;ruby&gt;
3) Error:
test_date_localization_with_long_format(I18nTest):
TypeError: can't convert Hash into Integer
&lt;/ruby&gt;

&lt;ruby&gt;
13) Error:
test_limit_should_not_break_on_blank_strings(MultibyteCharsExtrasTest):
SystemStackError: stack level too deep
&lt;/ruby&gt;</original-body>
  <latest-body>Running the actionpack tests in Rails master on 1.9.2-head gives 44 errors. The tests pass on 1.8.7.

Two types of errors are common which I have listed below. For all the errors I've created a pastie =&gt; http://pastie.org/992946

&lt;ruby&gt;
3) Error:
test_date_localization_with_long_format(I18nTest):
TypeError: can't convert Hash into Integer
&lt;/ruby&gt;

&lt;ruby&gt;
13) Error:
test_limit_should_not_break_on_blank_strings(MultibyteCharsExtrasTest):
SystemStackError: stack level too deep
&lt;/ruby&gt;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Running the actionpack tests in Rails master on 1.9.2-head gives
44 errors. The tests pass on 1.8.7.&lt;/p&gt;
&lt;p&gt;Two types of errors are common which I have listed below. For
all the errors I've created a pastie =&amp;gt; &lt;a href=
&quot;http://pastie.org/992946&quot;&gt;http://pastie.org/992946&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
3) Error:&lt;br&gt;
test_date_localization_with_long_format(I18nTest):&lt;br&gt;
TypeError: can't convert Hash into Integer&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
13) Error:&lt;br&gt;
test_limit_should_not_break_on_blank_strings(MultibyteCharsExtrasTest):&lt;br&gt;
SystemStackError: stack level too deep&lt;br&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Running the actionpack tests in Rails master on 1.9.2-head gives 44 errors. The tests pass on 1.8.7.

Two types of errors are common which I have listed below. For all the errors I've created a pastie =&gt; http://pastie.org/992946

&lt;ruby&gt;
3) Error:
test_date_localization_with_long_format(I18nTest):
TypeError: can't convert Hash into Integer
&lt;/ruby&gt;

&lt;ruby&gt;
13) Error:
test_limit_should_not_break_on_blank_strings(MultibyteCharsExtrasTest):
SystemStackError: stack level too deep
&lt;/ruby&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Running the actionpack tests in Rails master on 1.9.2-head gives
44 errors. The tests pass on 1.8.7.&lt;/p&gt;
&lt;p&gt;Two types of errors are common which I have listed below. For
all the errors I've created a pastie =&amp;gt; &lt;a href=
&quot;http://pastie.org/992946&quot;&gt;http://pastie.org/992946&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
3) Error:&lt;br&gt;
test_date_localization_with_long_format(I18nTest):&lt;br&gt;
TypeError: can't convert Hash into Integer&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
13) Error:&lt;br&gt;
test_limit_should_not_break_on_blank_strings(MultibyteCharsExtrasTest):&lt;br&gt;
SystemStackError: stack level too deep&lt;br&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-05T13:47:25+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-05T13:47:31+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">1</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Upgrading to i18n 0.4.1 fixed 9 errors.

However the stack too deep errors still remain. I suspect these are related to test/unit. The error is thrown by the assert methods. Version of Ruby =&gt; ruby 1.9.2dev (2010-06-06 revision 28184) [x86_64-linux]</body>
      <body-html>&lt;div&gt;&lt;p&gt;Upgrading to i18n 0.4.1 fixed 9 errors.&lt;/p&gt;
&lt;p&gt;However the stack too deep errors still remain. I suspect these
are related to test/unit. The error is thrown by the assert
methods. Version of Ruby =&amp;gt; ruby 1.9.2dev (2010-06-06 revision
28184) [x86_64-linux]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-06T03:06:52+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-06T03:06:55+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">2</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This commit fixes it: http://github.com/rails/rails/commit/35ae42be4f9e23ae954e4705276b460998cb401b

Let us know if otherwise.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This commit fixes it: &lt;a href=
&quot;http://github.com/rails/rails/commit/35ae42be4f9e23ae954e4705276b460998cb401b&quot;&gt;
http://github.com/rails/rails/commit/35ae42be4f9e23ae954e4705276b46...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Let us know if otherwise.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-06T09:28:35+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
:state: new
:milestone: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionpack</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-06T09:28:39+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">3</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>That commit fixes 9 errors. 35 errors still remain and I think these are caused by test/unit. The error is thrown by the assert methods.

Version of Ruby: ruby 1.9.2dev (2010-06-06 revision 28184)

Pastie of errors =&gt; http://pastie.org/994401</body>
      <body-html>&lt;div&gt;&lt;p&gt;That commit fixes 9 errors. 35 errors still remain and I think
these are caused by test/unit. The error is thrown by the assert
methods.&lt;/p&gt;
&lt;p&gt;Version of Ruby: ruby 1.9.2dev (2010-06-06 revision 28184)&lt;/p&gt;
&lt;p&gt;Pastie of errors =&amp;gt; &lt;a href=
&quot;http://pastie.org/994401&quot;&gt;http://pastie.org/994401&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-07T01:57:11+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionpack</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-07T01:57:17+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">4</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-07T02:21:20+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionpack</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-07T02:21:28+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">5</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-07T02:39:52+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionpack</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-07T02:39:58+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">6</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-07T02:40:15+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: actionpack
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport ruby-1.9.2</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-07T02:40:22+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">7</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Seemingly fixed by http://github.com/rails/rails/commit/0042f4166f783085eb909d69d542b5323d8af5d6, but that is a bit of a hack.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Seemingly fixed by &lt;a href=
&quot;http://github.com/rails/rails/commit/0042f4166f783085eb909d69d542b5323d8af5d6&quot;&gt;
http://github.com/rails/rails/commit/0042f4166f783085eb909d69d542b5...&lt;/a&gt;,
but that is a bit of a hack.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-08T04:05:49+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activesupport ruby-1.9.2</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-08T04:05:53+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">8</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-08T04:06:58+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport ruby-1.9.2</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-08T04:07:04+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">9</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The problem is, imho, caused because of the way compar.c calls the spaceship:

    static VALUE
    cmp_eq(VALUE *a)
    {
        VALUE c = rb_funcall(a[0], cmp, 1, a[1]);
        ...

    ruby-1.9.2-head &gt;
      BrokenComparable = Module.new { def ==(other) self &lt;=&gt; other end }
      BrokenClass = Class.new { include BrokenComparable }
      BrokenClass.new == nil
    SystemStackError: stack level too deep

The current implementation of the spaceship operator ...

    static VALUE
    rb_mod_cmp(VALUE mod, VALUE arg)
    {
        *snip*
        cmp = rb_class_inherited_p(mod, arg);
        ...

... tries to lookup the method in the parent classes but fails because it's
actually implemented in the Kernel module:

    ruby-1.9.2-head &gt; Object.instance_methods(false)
     =&gt; [] 
    ruby-1.9.2-head &gt; Object.superclass.instance_methods(false)
     =&gt; [:==, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__] 
    ruby-1.9.2-head &gt; Object.superclass.superclass.methods(false)
     =&gt; [] 
    ruby-1.9.2-head &gt; Object.superclass.superclass.class.instance_methods(false)
     =&gt; [:to_i, :to_f, :to_s, :to_a, :inspect, :&amp;, :|, :^, :nil?, :to_r, :rationalize, :to_c] 
    ruby-1.9.2-head &gt; Object.superclass.superclass.class.superclass.instance_methods(false)
     =&gt; [] 
    ruby-1.9.2-head &gt; Object.superclass.superclass.class.superclass.superclass.instance_methods(false)
     =&gt; [:==, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__] 
    ...

    ruby-1.9.2-head &gt; Kernel.instance_methods(false)
     =&gt; [:nil?, :===, :=~, :!~, :eql?, :hash, :&lt;=&gt;, :class, :singleton_class, :clone, :dup, :initialize_dup, :initialize_clone, :taint, :tainted?, :untaint, :untrust, :untrusted?, :trust, :freeze, :frozen?, :to_s, :inspect, :methods, :singleton_methods, :protected_methods, :private_methods, :public_methods, :instance_variables, :instance_variable_get, :instance_variable_set, :instance_variable_defined?, :instance_of?, :kind_of?, :is_a?, :tap, :send, :public_send, :respond_to?, :respond_to_missing?, :extend, :display, :method, :public_method, :define_singleton_method, :__id__, :object_id, :to_enum, :enum_for] 

But I'm neither familiar with C nor the ruby source so this is just a guess.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The problem is, imho, caused because of the way compar.c calls
the spaceship:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;static VALUE
cmp_eq(VALUE *a)
{
    VALUE c = rb_funcall(a[0], cmp, 1, a[1]);
    ...

ruby-1.9.2-head &amp;gt;
  BrokenComparable = Module.new { def ==(other) self &amp;lt;=&amp;gt; other end }
  BrokenClass = Class.new { include BrokenComparable }
  BrokenClass.new == nil
SystemStackError: stack level too deep&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The current implementation of the spaceship operator ...&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;static VALUE
rb_mod_cmp(VALUE mod, VALUE arg)
{
    *snip*
    cmp = rb_class_inherited_p(mod, arg);
    ...&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;... tries to lookup the method in the parent classes but fails
because it's actually implemented in the Kernel module:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ruby-1.9.2-head &amp;gt; Object.instance_methods(false)
 =&amp;gt; [] 
ruby-1.9.2-head &amp;gt; Object.superclass.instance_methods(false)
 =&amp;gt; [:==, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__] 
ruby-1.9.2-head &amp;gt; Object.superclass.superclass.methods(false)
 =&amp;gt; [] 
ruby-1.9.2-head &amp;gt; Object.superclass.superclass.class.instance_methods(false)
 =&amp;gt; [:to_i, :to_f, :to_s, :to_a, :inspect, :&amp;amp;, :|, :^, :nil?, :to_r, :rationalize, :to_c] 
ruby-1.9.2-head &amp;gt; Object.superclass.superclass.class.superclass.instance_methods(false)
 =&amp;gt; [] 
ruby-1.9.2-head &amp;gt; Object.superclass.superclass.class.superclass.superclass.instance_methods(false)
 =&amp;gt; [:==, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__] 
...

ruby-1.9.2-head &amp;gt; Kernel.instance_methods(false)
 =&amp;gt; [:nil?, :===, :=~, :!~, :eql?, :hash, :&amp;lt;=&amp;gt;, :class, :singleton_class, :clone, :dup, :initialize_dup, :initialize_clone, :taint, :tainted?, :untaint, :untrust, :untrusted?, :trust, :freeze, :frozen?, :to_s, :inspect, :methods, :singleton_methods, :protected_methods, :private_methods, :public_methods, :instance_variables, :instance_variable_get, :instance_variable_set, :instance_variable_defined?, :instance_of?, :kind_of?, :is_a?, :tap, :send, :public_send, :respond_to?, :respond_to_missing?, :extend, :display, :method, :public_method, :define_singleton_method, :__id__, :object_id, :to_enum, :enum_for]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;But I'm neither familiar with C nor the ruby source so this is
just a guess.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-09T08:27:56+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport ruby-1.9.2</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-09T08:28:02+01:00</updated-at>
      <user-id type="integer">17655</user-id>
      <version type="integer">10</version>
      <user-name>Florian A&#223;mann</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Fix/Hack: http://github.com/rails/rails/commit/0042f4166f783085eb909d69d542b5323d8af5d6 actually seems to be breaking functionality. I get the following error when I try to run beta4 with the changes in the diff above: http://gist.github.com/431583

Should the undef actually be added if we aren't really sure what it does or how it works? Especially if it break something here. 

Also, whats odd is if I call an action that doesn't rely on the comparator, and then revisit the offending action, it works fine.

Side note, I am using ruby 1.9.1. Have not tested with 1.9.2</body>
      <body-html>&lt;div&gt;&lt;p&gt;Fix/Hack: &lt;a href=
&quot;http://github.com/rails/rails/commit/0042f4166f783085eb909d69d542b5323d8af5d6&quot;&gt;
http://github.com/rails/rails/commit/0042f4166f783085eb909d69d542b5...&lt;/a&gt;
actually seems to be breaking functionality. I get the following
error when I try to run beta4 with the changes in the diff above:
&lt;a href=
&quot;http://gist.github.com/431583&quot;&gt;http://gist.github.com/431583&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Should the undef actually be added if we aren't really sure what
it does or how it works? Especially if it break something here.&lt;/p&gt;
&lt;p&gt;Also, whats odd is if I call an action that doesn't rely on the
comparator, and then revisit the offending action, it works
fine.&lt;/p&gt;
&lt;p&gt;Side note, I am using ruby 1.9.1. Have not tested with 1.9.2&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-09T15:58:14+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 65556
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport ruby-1.9.2</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-06-09T15:58:25+01:00</updated-at>
      <user-id type="integer">23491</user-id>
      <version type="integer">11</version>
      <user-name>Luke van der Hoeven</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:55+01:00</created-at>
      <creator-id type="integer">89656</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 74033
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4772</number>
      <permalink>errors-in-activesupport-testsuite-on-192-head</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport ruby-1.9.2</tag>
      <title>Errors in ActiveSupport testsuite on 1.9.2-head</title>
      <updated-at type="datetime">2010-10-15T23:01:55+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">12</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Rohit Arondekar</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4772</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
  </versions>
</ticket>
