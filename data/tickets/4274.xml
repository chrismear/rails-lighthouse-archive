<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">12714</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-08T12:16:08+00:00</created-at>
  <creator-id type="integer">47545</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4274</number>
  <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>rails3</tag>
  <title>undefined method `bytesize' for ActionDispatch::Response</title>
  <updated-at type="datetime">2011-05-05T02:59:23+01:00</updated-at>
  <user-id type="integer">148049</user-id>
  <version type="integer">11</version>
  <user-name>af001</user-name>
  <creator-name>Mike (at coverallcrew)</creator-name>
  <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I recently added Rack::JSONP middleware to my Rails 3 app.

It works like a charm when adding the ?callback=my_method to the json request, but explodes with the following when I omit it.

 ERROR NoMethodError: undefined method `bytesize' for #&lt;ActionDispatch::Response:0x1039b3c88&gt;</original-body>
  <latest-body>I recently added Rack::JSONP middleware to my Rails 3 app.

It works like a charm when adding the ?callback=my_method to the json request, but explodes with the following when I omit it.

 ERROR NoMethodError: undefined method `bytesize' for #&lt;ActionDispatch::Response:0x1039b3c88&gt;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I recently added Rack::JSONP middleware to my Rails 3 app.&lt;/p&gt;
&lt;p&gt;It works like a charm when adding the ?callback=my_method to the
json request, but explodes with the following when I omit it.&lt;/p&gt;
&lt;p&gt;ERROR NoMethodError: undefined method &lt;code&gt;bytesize' for
#&amp;lt;ActionDispatch::Response:0x1039b3c88&amp;gt;&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I recently added Rack::JSONP middleware to my Rails 3 app.

It works like a charm when adding the ?callback=my_method to the json request, but explodes with the following when I omit it.

 ERROR NoMethodError: undefined method `bytesize' for #&lt;ActionDispatch::Response:0x1039b3c88&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;I recently added Rack::JSONP middleware to my Rails 3 app.&lt;/p&gt;
&lt;p&gt;It works like a charm when adding the ?callback=my_method to the
json request, but explodes with the following when I omit it.&lt;/p&gt;
&lt;p&gt;ERROR NoMethodError: undefined method &lt;code&gt;bytesize' for
#&amp;lt;ActionDispatch::Response:0x1039b3c88&amp;gt;&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-26T15:58:45+00:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-03-26T15:58:50+00:00</updated-at>
      <user-id type="integer">47545</user-id>
      <version type="integer">1</version>
      <user-name>Mike (at coverallcrew)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Can you show the entire stack trace and also link me to the Rack::JSONP you're using?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can you show the entire stack trace and also link me to the
Rack::JSONP you're using?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-27T03:12:15+00:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
:state: new
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-03-27T03:12:18+00:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">2</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi Yehuda,

It fails when using version 0.9.2 of rack-contrib... and upon further investigation it seems the culprit is simply when I add this to my Gemfile:

	gem 'rack-contrib', :require =&gt; 'rack/contrib'

The stack trace is as follows:

	[2010-03-26 20:19:04] ERROR NoMethodError: undefined method `bytesize' for #&lt;ActionDispatch::Response:0x104040a60&gt;
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/utils.rb:228:in `bytesize'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `call'
	/Library/Ruby/Gems/1.8/gems/mongo_mapper-0.7.2/lib/mongo_mapper/document.rb:285:in `inject'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `each'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `inject'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `call'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
	/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/handler/webrick.rb:14:in `run'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/server.rb:155:in `start'
	/Library/Ruby/Gems/1.8/gems/railties-3.0.0.beta/lib/rails/commands/server.rb:49:in `start'
	/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/server.rb:83:in `start'
	/Library/Ruby/Gems/1.8/gems/railties-3.0.0.beta/lib/rails/commands.rb:39
	/Users/mike/Projects/attendease/script/rails:10:in `require'
	/Users/mike/Projects/attendease/script/rails:10

Let me know if you need any more info.

Cheers.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Yehuda,&lt;/p&gt;
&lt;p&gt;It fails when using version 0.9.2 of rack-contrib... and upon
further investigation it seems the culprit is simply when I add
this to my Gemfile:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;gem 'rack-contrib', :require =&amp;gt; 'rack/contrib'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The stack trace is as follows:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[2010-03-26 20:19:04] ERROR NoMethodError: undefined method `bytesize' for #&amp;lt;ActionDispatch::Response:0x104040a60&amp;gt;
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/utils.rb:228:in `bytesize'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `call'
/Library/Ruby/Gems/1.8/gems/mongo_mapper-0.7.2/lib/mongo_mapper/document.rb:285:in `inject'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `each'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `inject'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:22:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/handler/webrick.rb:14:in `run'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/server.rb:155:in `start'
/Library/Ruby/Gems/1.8/gems/railties-3.0.0.beta/lib/rails/commands/server.rb:49:in `start'
/Library/Ruby/Gems/1.8/gems/rack-1.1.0/lib/rack/server.rb:83:in `start'
/Library/Ruby/Gems/1.8/gems/railties-3.0.0.beta/lib/rails/commands.rb:39
/Users/mike/Projects/attendease/script/rails:10:in `require'
/Users/mike/Projects/attendease/script/rails:10&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Let me know if you need any more info.&lt;/p&gt;
&lt;p&gt;Cheers.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-27T03:40:37+00:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-03-27T03:40:41+00:00</updated-at>
      <user-id type="integer">47545</user-id>
      <version type="integer">3</version>
      <user-name>Mike (at coverallcrew)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This is because in the 0.9.2 rack-contrib gem, Rack::JSONP returns response in an array. It should only return response as an array if the callback param was included.

For an appropriate guard that Rack::JSONP should be using, see
http://github.com/lawrencepit/rack-contrib/commit/356dcdd0804fb6824d4078b4a48085af62f42149

However, the returned string from the pad method should be put into an array so it can be enumerated.

If you want a quick fix, you can open the gem and alter `/rack-contrib-0.9.2/lib/rack/contrib/jsonp.rb` to this:

@@@ ruby
module Rack

  # A Rack middleware for providing JSON-P support.
  #
  # Full credit to Flinn Mueller (http://actsasflinn.com/) for this contribution.
  #
  class JSONP

    def initialize(app)
      @app = app
    end

    # Proxies the request to the application, stripping out the JSON-P callback
    # method and padding the response with the appropriate callback format.
    #
    # Changes nothing if no &lt;tt&gt;callback&lt;/tt&gt; param is specified.
    #
    def call(env)
      status, headers, response = @app.call(env)
      request = Rack::Request.new(env)
      if request.params.include?('callback')
        response = [pad(request.params.delete('callback'), response)]
        headers['Content-Length'] = response.length.to_s
      end
      [status, headers, response]
    end

    # Pads the response with the appropriate callback format according to the
    # JSON-P spec/requirements.
    #
    # The Rack response spec indicates that it should be enumerable. The method
    # of combining all of the data into a single string makes sense since JSON
    # is returned as a full string.
    #
    def pad(callback, response, body = &quot;&quot;)
      response.each{ |s| body &lt;&lt; s.to_s }
      &quot;#{callback}(#{body})&quot;
    end

  end
end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is because in the 0.9.2 rack-contrib gem, Rack::JSONP
returns response in an array. It should only return response as an
array if the callback param was included.&lt;/p&gt;
&lt;p&gt;For an appropriate guard that Rack::JSONP should be using,
see&lt;br&gt;
&lt;a href=
&quot;http://github.com/lawrencepit/rack-contrib/commit/356dcdd0804fb6824d4078b4a48085af62f42149&quot;&gt;
http://github.com/lawrencepit/rack-contrib/commit/356dcdd0804fb6824...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;However, the returned string from the pad method should be put
into an array so it can be enumerated.&lt;/p&gt;
&lt;p&gt;If you want a quick fix, you can open the gem and alter
&lt;code&gt;/rack-contrib-0.9.2/lib/rack/contrib/jsonp.rb&lt;/code&gt; to
this:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;module Rack

  # A Rack middleware for providing JSON-P support.
  #
  # Full credit to Flinn Mueller (http://actsasflinn.com/) for this contribution.
  #
  class JSONP

    def initialize(app)
      @app = app
    end

    # Proxies the request to the application, stripping out the JSON-P callback
    # method and padding the response with the appropriate callback format.
    #
    # Changes nothing if no &amp;lt;tt&amp;gt;callback&amp;lt;/tt&amp;gt; param is specified.
    #
    def call(env)
      status, headers, response = @app.call(env)
      request = Rack::Request.new(env)
      if request.params.include?('callback')
        response = [pad(request.params.delete('callback'), response)]
        headers['Content-Length'] = response.length.to_s
      end
      [status, headers, response]
    end

    # Pads the response with the appropriate callback format according to the
    # JSON-P spec/requirements.
    #
    # The Rack response spec indicates that it should be enumerable. The method
    # of combining all of the data into a single string makes sense since JSON
    # is returned as a full string.
    #
    def pad(callback, response, body = &quot;&quot;)
      response.each{ |s| body &amp;lt;&amp;lt; s.to_s }
      &quot;#{callback}(#{body})&quot;
    end

  end
end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-05T18:11:02+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-06-05T18:11:08+01:00</updated-at>
      <user-id type="integer">81618</user-id>
      <version type="integer">4</version>
      <user-name>Josh Graham</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Apologies, the code should be:

@@@ ruby
module Rack

  # A Rack middleware for providing JSON-P support.
  #
  # Full credit to Flinn Mueller (http://actsasflinn.com/) for this contribution.
  #
  class JSONP

    def initialize(app)
      @app = app
    end

    # Proxies the request to the application, stripping out the JSON-P callback
    # method and padding the response with the appropriate callback format.
    #
    # Changes nothing if no &lt;tt&gt;callback&lt;/tt&gt; param is specified.
    #
    def call(env)
      status, headers, response = @app.call(env)
      request = Rack::Request.new(env)
      if request.params.include?('callback')
        response = pad(request.params.delete('callback'), response)
        headers['Content-Length'] = response.length.to_s
        response = [response]
      end
      [status, headers, response]
    end

    # Pads the response with the appropriate callback format according to the
    # JSON-P spec/requirements.
    #
    # The Rack response spec indicates that it should be enumerable. The method
    # of combining all of the data into a single string makes sense since JSON
    # is returned as a full string.
    #
    def pad(callback, response, body = &quot;&quot;)
      response.each{ |s| body &lt;&lt; s.to_s }
      &quot;#{callback}(#{body})&quot;
    end

  end
end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Apologies, the code should be:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;module Rack

  # A Rack middleware for providing JSON-P support.
  #
  # Full credit to Flinn Mueller (http://actsasflinn.com/) for this contribution.
  #
  class JSONP

    def initialize(app)
      @app = app
    end

    # Proxies the request to the application, stripping out the JSON-P callback
    # method and padding the response with the appropriate callback format.
    #
    # Changes nothing if no &amp;lt;tt&amp;gt;callback&amp;lt;/tt&amp;gt; param is specified.
    #
    def call(env)
      status, headers, response = @app.call(env)
      request = Rack::Request.new(env)
      if request.params.include?('callback')
        response = pad(request.params.delete('callback'), response)
        headers['Content-Length'] = response.length.to_s
        response = [response]
      end
      [status, headers, response]
    end

    # Pads the response with the appropriate callback format according to the
    # JSON-P spec/requirements.
    #
    # The Rack response spec indicates that it should be enumerable. The method
    # of combining all of the data into a single string makes sense since JSON
    # is returned as a full string.
    #
    def pad(callback, response, body = &quot;&quot;)
      response.each{ |s| body &amp;lt;&amp;lt; s.to_s }
      &quot;#{callback}(#{body})&quot;
    end

  end
end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-05T19:38:02+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-06-05T19:38:09+01:00</updated-at>
      <user-id type="integer">81618</user-id>
      <version type="integer">5</version>
      <user-name>Josh Graham</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue should be fixed on current rack-contrib head

http://github.com/rack/rack-contrib/commit/3e26836ea0b20f506c0aa37e1b59514b697f9c72#diff-5</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue should be fixed on current rack-contrib head&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/rack/rack-contrib/commit/3e26836ea0b20f506c0aa37e1b59514b697f9c72#diff-5&quot;&gt;
http://github.com/rack/rack-contrib/commit/3e26836ea0b20f506c0aa37e...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-09T22:31:50+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-06-09T22:31:59+01:00</updated-at>
      <user-id type="integer">26446</user-id>
      <version type="integer">6</version>
      <user-name>Rune Botten</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>rack-contrib 1.0.1 released, which fixes this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;rack-contrib 1.0.1 released, which fixes this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-10T12:46:01+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-06-10T12:46:10+01:00</updated-at>
      <user-id type="integer">26446</user-id>
      <version type="integer">7</version>
      <user-name>Rune Botten</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-12T02:52:05+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-06-12T02:52:18+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">8</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:50+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2010-10-15T23:01:50+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">9</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>thank you very much......&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/&quot;&gt;&#1605;&#1606;&#1578;&#1583;&#1610;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&#1605;&#1603;&#1610;&#1575;&#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1575;&#1586;&#1610;&#1575;&#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1601;&#1587;&#1575;&#1578;&#1610;&#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&#1585;&#1587;&#1575;&#1574;&#1604; 
- &#1605;&#1587;&#1580;&#1575;&#1578; - &#1608;&#1587;&#1575;&#1574;&#1591;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&#1578;&#1608;&#1576;&#1610;&#1603;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&#1608;&#1592;&#1575;&#1574;&#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&#1576;&#1585;&#1608;&#1603;&#1587;&#1610;&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt; &lt;a href=&quot;http://forum.line-sport.tv/&quot;&gt;&#1604;&#1575;&#1610;&#1606; &#1587;&#1576;&#1608;&#1585;&#1578;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;thank you very much......&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/&quot;&gt;&amp;#1605;&amp;#1606;&amp;#1578;&amp;#1583;&amp;#1610;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&amp;#1605;&amp;#1603;&amp;#1610;&amp;#1575;&amp;#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1575;&amp;#1586;&amp;#1610;&amp;#1575;&amp;#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1601;&amp;#1587;&amp;#1575;&amp;#1578;&amp;#1610;&amp;#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&amp;#1585;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1604;&lt;br&gt;
- &amp;#1605;&amp;#1587;&amp;#1580;&amp;#1575;&amp;#1578; -
&amp;#1608;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1591;&lt;/a&gt;&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&amp;#1578;&amp;#1608;&amp;#1576;&amp;#1610;&amp;#1603;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&amp;#1608;&amp;#1592;&amp;#1575;&amp;#1574;&amp;#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt;
&lt;a href=
&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&amp;#1576;&amp;#1585;&amp;#1608;&amp;#1603;&amp;#1587;&amp;#1610;&lt;/a&gt;
&lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt; &lt;a href=
&quot;http://forum.line-sport.tv/&quot;&gt;&amp;#1604;&amp;#1575;&amp;#1610;&amp;#1606;
&amp;#1587;&amp;#1576;&amp;#1608;&amp;#1585;&amp;#1578;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-08T11:23:50+00:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2011-02-08T12:16:08+00:00</updated-at>
      <user-id type="integer">136126</user-id>
      <version type="integer">10</version>
      <user-name>alasiri1</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>&#31169;&#12398;&#20013;&#12391;&#12289;&#32207;&#21512;&#35413;&#20385;&#12398;&#12392;&#12387;&#12390;&#12418;&#20302;&#12356;&#12450;&#12496;&lt;a href=&quot;http://www.abakuro.co.jp/&quot; rel=&quot;dofollow&quot;&gt;&lt;b&gt;&#12450;&#12496;&#12463;&#12525;&#12507;&#12522;&#12473;&#12479;&#12540;&lt;/b&gt;&lt;/a&gt;&#12463;&#12525;&#37504;&#24231;&#24215;&#12290;&#12450;&#12496;&#12463;&#12525;&#12399;&#22823;&#22909;&#12365;&#12394;&#12435;&#12391;&#12377;&#12369;&#12393;&#12397;&#12290;&#19968;&#26152;&#26085;&#12398;&#26481;&#20140;&#39365;&#20184;&#36817;&#12391;&#12398;&#25171;&#12385;&#21512;&#12431;&#12379;&#12398;&#24460;&#12289;&#25955;&#27497;&#12364;&#12390;&#12425;&#20037;&#12293;&#12395;&#34892;&#12387;&#12390;&#12365;&#12414;&#12375;&#12383;&#12290;&#12381;&#12375;&#12383;&#12425;&#12499;&#12483;&#12463;&#12522;&#65281;&#30456;&#22793;&#12431;&#12425;&lt;a href=&quot;http://www.abakuro.co.jp/&quot; rel=&quot;dofollow&quot;&gt;&lt;b&gt;&#12450;&#12496;&#12463;&#12525;&lt;/b&gt;&lt;/a&gt;&#12378;&#12289;&#36362;&#12387;&#12390;&#12356;&#12427;&#12384;&#12369;&#12398;&#24215;&#21729;&#12373;&#12435;&#12392;&#12363;&#12418;&#12356;&#12414;&#12375;&#12383;&#12364;&#12289;</body>
      <body-html>&lt;div&gt;&lt;p&gt;
&amp;#31169;&amp;#12398;&amp;#20013;&amp;#12391;&amp;#12289;&amp;#32207;&amp;#21512;&amp;#35413;&amp;#20385;&amp;#12398;&amp;#12392;&amp;#12387;&amp;#12390;&amp;#12418;&amp;#20302;&amp;#12356;&amp;#12450;&amp;#12496;&lt;a href=&quot;http://www.abakuro.co.jp/&quot;&gt;&lt;b&gt;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&amp;#12507;&amp;#12522;&amp;#12473;&amp;#12479;&amp;#12540;&lt;/b&gt;&lt;/a&gt;&amp;#12463;&amp;#12525;&amp;#37504;&amp;#24231;&amp;#24215;&amp;#12290;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&amp;#12399;&amp;#22823;&amp;#22909;&amp;#12365;&amp;#12394;&amp;#12435;&amp;#12391;&amp;#12377;&amp;#12369;&amp;#12393;&amp;#12397;&amp;#12290;&amp;#19968;&amp;#26152;&amp;#26085;&amp;#12398;&amp;#26481;&amp;#20140;&amp;#39365;&amp;#20184;&amp;#36817;&amp;#12391;&amp;#12398;&amp;#25171;&amp;#12385;&amp;#21512;&amp;#12431;&amp;#12379;&amp;#12398;&amp;#24460;&amp;#12289;&amp;#25955;&amp;#27497;&amp;#12364;&amp;#12390;&amp;#12425;&amp;#20037;&amp;#12293;&amp;#12395;&amp;#34892;&amp;#12387;&amp;#12390;&amp;#12365;&amp;#12414;&amp;#12375;&amp;#12383;&amp;#12290;&amp;#12381;&amp;#12375;&amp;#12383;&amp;#12425;&amp;#12499;&amp;#12483;&amp;#12463;&amp;#12522;&amp;#65281;&amp;#30456;&amp;#22793;&amp;#12431;&amp;#12425;&lt;a href=&quot;http://www.abakuro.co.jp/&quot;&gt;&lt;b&gt;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&lt;/b&gt;&lt;/a&gt;&amp;#12378;&amp;#12289;&amp;#36362;&amp;#12387;&amp;#12390;&amp;#12356;&amp;#12427;&amp;#12384;&amp;#12369;&amp;#12398;&amp;#24215;&amp;#21729;&amp;#12373;&amp;#12435;&amp;#12392;&amp;#12363;&amp;#12418;&amp;#12356;&amp;#12414;&amp;#12375;&amp;#12383;&amp;#12364;&amp;#12289;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-05-05T02:56:16+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4274</number>
      <permalink>undefined-method-bytesize-for-actiondispatchresponse</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>rails3</tag>
      <title>undefined method `bytesize' for ActionDispatch::Response</title>
      <updated-at type="datetime">2011-05-05T02:59:23+01:00</updated-at>
      <user-id type="integer">148049</user-id>
      <version type="integer">11</version>
      <user-name>af001</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4274</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
