<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">141</assigned-user-id>
  <attachments-count type="integer">7</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-17T06:48:17+00:00</created-at>
  <creator-id type="integer">4065</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1930</number>
  <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>associations autosave patch</tag>
  <title>autosave should validate associations even if master is invalid</title>
  <updated-at type="datetime">2011-02-17T06:48:17+00:00</updated-at>
  <user-id type="integer">15613</user-id>
  <version type="integer">55</version>
  <user-name>Jacob Burkhart</user-name>
  <creator-name>Gaspard Bucher</creator-name>
  <assigned-user-name>Michael Koziarski</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
  <priority-name nil="true"></priority-name>
  <original-body>If both the master record and the autosaved association contain errors, only the errors for the master record will be shown.

Autosave validations should work like normal association validations which are always called whatever state the master is in.</original-body>
  <latest-body>If both the master record and the autosaved association contain errors, only the errors for the master record will be shown.

Autosave validations should work like normal association validations which are always called whatever state the master is in.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;If both the master record and the autosaved association contain
errors, only the errors for the master record will be shown.&lt;/p&gt;
&lt;p&gt;Autosave validations should work like normal association
validations which are always called whatever state the master is
in.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If both the master record and the autosaved association contain errors, only the errors for the master record will be shown.

Autosave validations should work like normal association validations which are always called whatever state the master is in.</body>
      <body-html>&lt;div&gt;&lt;p&gt;If both the master record and the autosaved association contain
errors, only the errors for the master record will be shown.&lt;/p&gt;
&lt;p&gt;Autosave validations should work like normal association
validations which are always called whatever state the master is
in.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-10T17:25:47+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-10T17:25:49+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">1</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Came across the same thing today. The patch works as expected, the errors are now copied across if the parent is invalid. The tests pass for me.

+1

On a related note, since we've copied errors for the attributes from the nested object, do we still need the general 'NestedModel is invalid' error?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Came across the same thing today. The patch works as expected,
the errors are now copied across if the parent is invalid. The
tests pass for me.&lt;/p&gt;
&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;On a related note, since we've copied errors for the attributes
from the nested object, do we still need the general 'NestedModel
is invalid' error?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-10T22:45:54+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-10T22:45:55+00:00</updated-at>
      <user-id type="integer">17672</user-id>
      <version type="integer">2</version>
      <user-name>Paul Horsfall</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>To properly fix all this, we need to replace normal validations with our own for each 'autosave' or 'accepted_nested_attribute'. If we keep both validations running side by side, we get many strange things.

Replacing the &quot;validate_associated_records_for_#{association_name}&quot; method seems to be the cleanest way to go.

I tested this and it works fine. It also solves the bad highlighting of multiple errors in nested forms (only first was highlighted, now they are all shown).</body>
      <body-html>&lt;div&gt;&lt;p&gt;To properly fix all this, we need to replace normal validations
with our own for each 'autosave' or 'accepted_nested_attribute'. If
we keep both validations running side by side, we get many strange
things.&lt;/p&gt;
&lt;p&gt;Replacing the
&quot;validate_associated_records_for_#{association_name}&quot; method seems
to be the cleanest way to go.&lt;/p&gt;
&lt;p&gt;I tested this and it works fine. It also solves the bad
highlighting of multiple errors in nested forms (only first was
highlighted, now they are all shown).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-11T12:07:31+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-11T12:07:36+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">3</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The patch also solves #1941.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The patch also solves &lt;a href=&quot;/projects/8994/tickets/1941&quot; title=&quot;Ticket #1941&quot;&gt;#1941&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-11T16:31:06+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: associations patch
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-11T16:31:12+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">4</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I have checked and verified your first patch. (I also added a few more tests for collection associations). +1

I haven't yet had the time to do the same with the second patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have checked and verified your first patch. (I also added a
few more tests for collection associations). +1&lt;/p&gt;
&lt;p&gt;I haven't yet had the time to do the same with the second
patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-12T14:45:26+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-12T14:45:30+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">5</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I've tried the second patch and everything looks good when creating nested models through a has many association. When creating a model through a has one association however, I'm now seeing duplicate errors from the nested model. I've not had a chance to demonstrate this in a test but I'll try to do so if I get the time.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've tried the second patch and everything looks good when
creating nested models through a has many association. When
creating a model through a has one association however, I'm now
seeing duplicate errors from the nested model. I've not had a
chance to demonstrate this in a test but I'll try to do so if I get
the time.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-12T17:59:41+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-12T17:59:45+00:00</updated-at>
      <user-id type="integer">17672</user-id>
      <version type="integer">6</version>
      <user-name>Paul Horsfall</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>In fact the second patch contains tests for collections and is a *much* better fix: it also solves problems related to newly created records or collections of invalid items.</body>
      <body-html>&lt;div&gt;&lt;p&gt;In fact the second patch contains tests for collections and is a
&lt;em&gt;much&lt;/em&gt; better fix: it also solves problems related to newly
created records or collections of invalid items.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-12T17:59:51+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-12T17:59:52+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">7</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Paul, I'll try to fix this for has_one associations.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Paul, I'll try to fix this for has_one associations.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-12T18:00:40+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-12T18:00:41+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">8</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Paul, I cannot reproduce your double validation bug. This test passes:

Pirate has_one ship

@@@ ruby
    @pirate.ship.name = ''
    assert !@pirate.valid?
    assert_equal &quot;can't be blank&quot;, @pirate.errors.on(:ship_name)
@@@

Could you give more details ?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Paul, I cannot reproduce your double validation bug. This test
passes:&lt;/p&gt;
&lt;p&gt;Pirate has_one ship&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
    @pirate.ship.name = ''
    assert !@pirate.valid?
    assert_equal &amp;quot;can't be blank&amp;quot;, @pirate.errors.on(:ship_name)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Could you give more details ?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-12T21:56:04+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-12T21:56:08+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">9</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>My apologies Gaspard. I just got round to looking at this and it turned out I had a validation for an attribute of the same name set on the nested model and the parent and I shouldn't have. This wasn't obvious before your patch because the errors weren't copied over to the parent. After your patch they are copied over and at first glance looked like duplicates.

In short, my bad. Sorry.</body>
      <body-html>&lt;div&gt;&lt;p&gt;My apologies Gaspard. I just got round to looking at this and it
turned out I had a validation for an attribute of the same name set
on the nested model and the parent and I shouldn't have. This
wasn't obvious before your patch because the errors weren't copied
over to the parent. After your patch they are copied over and at
first glance looked like duplicates.&lt;/p&gt;
&lt;p&gt;In short, my bad. Sorry.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-12T22:46:52+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-12T22:46:55+00:00</updated-at>
      <user-id type="integer">17672</user-id>
      <version type="integer">10</version>
      <user-name>Paul Horsfall</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>@Gaspard: I understand what the second patch does, however I need some time to think it over and come up with the right test coverage.

Because actually at some point in the past I used the same kind of code as you are using: http://github.com/alloy/complex-form-examples/blob/alloy-nested_params/vendor/plugins/has_autosave_and_nested_params/lib/autosave_association.rb#L56:L93
But I think this had to do with an issue in the after save callbacks that was recently fixed.

But no sweat, we'll get this fixed :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Gaspard: I understand what the second patch does, however I
need some time to think it over and come up with the right test
coverage.&lt;/p&gt;
&lt;p&gt;Because actually at some point in the past I used the same kind
of code as you are using: &lt;a href=&quot;http://github.com/alloy/complex-form-examples/blob/alloy-nested_params/vendor/plugins/has_autosave_and_nested_params/lib/autosave_association.rb#L56&quot;&gt;
http://github.com/alloy/complex-...&lt;/a&gt;:L93 But I think this had to
do with an issue in the after save callbacks that was recently
fixed.&lt;/p&gt;
&lt;p&gt;But no sweat, we'll get this fixed :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-13T08:10:44+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-13T08:10:48+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">11</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Tested [second patch](http://rails.lighthouseapp.com:80/attachments/87559/autosave_better_validations.diff) on top of latest commit for #1892.

Works fine.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Tested &lt;a href=&quot;http://rails.lighthouseapp.com:80/attachments/87559/autosave_better_validations.diff&quot;&gt;
second patch&lt;/a&gt; on top of latest commit for &lt;a href=&quot;/projects/8994/tickets/1892&quot; title=&quot;Ticket #1892&quot;&gt;#1892&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Works fine.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-13T10:23:36+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-13T10:23:41+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">12</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Can you rebase this down into a single patch with a detailed commit
message please.  Makes it much easier for people tracking down the
history of the code :)

Eloy, any other specific comments about this change?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can you rebase this down into a single patch with a detailed
commit message please. Makes it much easier for people tracking
down the history of the code :)&lt;/p&gt;
&lt;p&gt;Eloy, any other specific comments about this change?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-14T02:03:48+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-14T02:03:49+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">13</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Rebased patch into a single commit. Tried to give a concise message on the problems solved.

Tested on the latest commit (2009-02-14).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rebased patch into a single commit. Tried to give a concise
message on the problems solved.&lt;/p&gt;
&lt;p&gt;Tested on the latest commit (2009-02-14).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-14T06:46:22+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-14T06:46:26+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">14</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>The main problem atm is that the patch duplicates the add_single_associated_validation_callbacks and add_multiple_associated_validation_callbacks methods.
Which is a bit too much code to duplicate imho.

I'm thinking about an alternative, but feel free to rework it in the meantime :-)</body>
      <body-html>&lt;div&gt;&lt;p&gt;The main problem atm is that the patch duplicates the
add_single_associated_validation_callbacks and
add_multiple_associated_validation_callbacks methods. Which is a
bit too much code to duplicate imho.&lt;/p&gt;
&lt;p&gt;I'm thinking about an alternative, but feel free to rework it in
the meantime :-)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-15T17:58:42+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-15T17:58:46+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">15</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Just wanted to add that I do in fact have an idea that I'm currently investigating.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just wanted to add that I do in fact have an idea that I'm
currently investigating.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-15T18:04:31+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-15T18:04:37+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">16</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>@Eloy: I know that this patch duplicates add_single... and add_multiple.. methods but the only way around would be to ping pong a lot with method chaining which I found even worse...

I still think that defining the validation method is the right path to go (less callbacks during validations, no chance for duplicates).

If you can come up with a better idea that keeps the single validation but avoids the 10 lines duplication that would be really great ! I just doubt it's possible because the patch does not just duplicate these methods.

It's very easy to come up with something like:

@@@ ruby
def add_multiple_associated_validation_callbacks_with_autosave(reflection)
  if reflection.options[:autosave]
    reflection)
    association_name = reflection.name
    method_name = &quot;validate_associated_records_for_#{association_name}&quot;.to_sym
    define_method(method_name) do
      association = association_instance_get(association_name)
      if association
        if new_record? || association.loaded?
          association
        else
          association.target || []
        end.each do |record|
          returning(record.valid?) do |valid|
            record.errors.each do |attribute, message|
              error_name = &quot;#{reflection.name}_#{attribute}&quot;
              errors.add error_name, message unless errors.on(error_name)
            end unless valid
          end
        end
      end
    end
    
    validate method_name
  else
    add_multiple_associated_validation_callbacks_without_autosave(
  end
end
def self.included(base)
  base.class_eval do
    alias_method_chain :add_multiple_associated_validation_callbacks :autosave
  end
end
@@@

3 more lines, same logic duplication, one more method chaining. No good.

I was aware of this problem and the patch is the best solution I could come up with.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Eloy: I know that this patch duplicates add_single... and
add_multiple.. methods but the only way around would be to ping
pong a lot with method chaining which I found even worse...&lt;/p&gt;
&lt;p&gt;I still think that defining the validation method is the right
path to go (less callbacks during validations, no chance for
duplicates).&lt;/p&gt;
&lt;p&gt;If you can come up with a better idea that keeps the single
validation but avoids the 10 lines duplication that would be really
great ! I just doubt it's possible because the patch does not just
duplicate these methods.&lt;/p&gt;
&lt;p&gt;It's very easy to come up with something like:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
def add_multiple_associated_validation_callbacks_with_autosave(reflection)
  if reflection.options[:autosave]
    reflection)
    association_name = reflection.name
    method_name = &amp;quot;validate_associated_records_for_#{association_name}&amp;quot;.to_sym
    define_method(method_name) do
      association = association_instance_get(association_name)
      if association
        if new_record? || association.loaded?
          association
        else
          association.target || []
        end.each do |record|
          returning(record.valid?) do |valid|
            record.errors.each do |attribute, message|
              error_name = &amp;quot;#{reflection.name}_#{attribute}&amp;quot;
              errors.add error_name, message unless errors.on(error_name)
            end unless valid
          end
        end
      end
    end
    
    validate method_name
  else
    add_multiple_associated_validation_callbacks_without_autosave(
  end
end
def self.included(base)
  base.class_eval do
    alias_method_chain :add_multiple_associated_validation_callbacks :autosave
  end
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3 more lines, same logic duplication, one more method chaining.
No good.&lt;/p&gt;
&lt;p&gt;I was aware of this problem and the patch is the best solution I
could come up with.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-15T19:34:19+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-15T19:34:20+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">17</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Instead of alias-ing super could probably be used and I agree that going the validate way is a good one.

But I wonder if we should maybe move the automatically validating and saving of new associations completely from Associations into AutosaveAssociation. Micheal what do you think?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Instead of alias-ing super could probably be used and I agree
that going the validate way is a good one.&lt;/p&gt;
&lt;p&gt;But I wonder if we should maybe move the automatically
validating and saving of new associations completely from
Associations into AutosaveAssociation. Micheal what do you
think?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-15T20:57:14+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-15T20:57:19+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">18</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Moving all auto-validations in AutosaveAssociation would really make sense.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Moving all auto-validations in AutosaveAssociation would really
make sense.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-15T21:46:39+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-15T21:46:43+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">19</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Sounds good to me,  give it a try and see what the patch ends up
looking like.  Logically it sounds 'tidier', but only the patch will
really show how much tidier.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sounds good to me, give it a try and see what the patch ends up
looking like. Logically it sounds 'tidier', but only the patch will
really show how much tidier.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-15T22:16:16+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-15T22:16:17+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">20</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Mais oui. I'll probably have something to show tonight.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Mais oui. I'll probably have something to show tonight.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-16T08:31:51+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-16T08:31:55+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">21</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Mais oui. I'll probably have something to show tonight.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Mais oui. I'll probably have something to show tonight.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-16T08:32:28+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-16T08:32:31+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">22</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-17T08:32:07+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 141
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-17T08:32:09+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">23</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Just an update; Not finished yet, but coming along nicely. The validation part has been merged, I'm working on merging the save part now. Need to merge the inline autosave code from Associations has_one and belongs_to.

http://github.com/alloy/rails/commits/move_default_autosaving_to_autosave_association</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just an update; Not finished yet, but coming along nicely. The
validation part has been merged, I'm working on merging the save
part now. Need to merge the inline autosave code from Associations
has_one and belongs_to.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/alloy/rails/commits/move_default_autosaving_to_autosave_association&quot;&gt;
http://github.com/alloy/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-17T09:53:04+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>[patch] autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-17T09:53:08+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">24</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-17T10:23:27+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:title: &quot;[patch] autosave should validate associations even if master is invalid&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-17T10:23:29+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">25</version>
      <user-name>Pratik</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Ok, it's almost done, at least in a state which is testable. Because lots has changed I really need feedback from running the patch on real applications.

I'll fix a few other tickets as well this weekend and cleanup and update docs. __So this is not the final patch.__

@Micheal: There are 2 TODO's in autosave_association.rb, could you comment on those?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, it's almost done, at least in a state which is testable.
Because lots has changed I really need feedback from running the
patch on real applications.&lt;/p&gt;
&lt;p&gt;I'll fix a few other tickets as well this weekend and cleanup
and update docs. &lt;strong&gt;So this is not the final
patch.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;@Micheal: There are 2 TODO's in autosave_association.rb, could
you comment on those?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T09:34:34+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-20T09:34:36+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">26</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>+1

I applied the patch on top of latest edge + support for :inverse in associations.

Works fine. I will keep this patch running as I continue working on zena and I'll let you know if I find something unexpected.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;I applied the patch on top of latest edge + support for :inverse
in associations.&lt;/p&gt;
&lt;p&gt;Works fine. I will keep this patch running as I continue working
on zena and I'll let you know if I find something unexpected.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T14:11:25+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-20T14:11:31+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">27</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>+1

I have the poster child application for testing nested attributes.  It uses 27 deeply nested calls to accepts_nested_attributes_for and exercises them all simultaneously in one monster POST.  Prior to this patch, there were two strange edge cases that I couldn't narrow down which I worked around manually by assigning :autosave =&gt; true to the affected associations.  After applying this patch to edge, the issues went away.  Have not run it long enough to see if any others have popped up.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;I have the poster child application for testing nested
attributes. It uses 27 deeply nested calls to
accepts_nested_attributes_for and exercises them all simultaneously
in one monster POST. Prior to this patch, there were two strange
edge cases that I couldn't narrow down which I worked around
manually by assigning :autosave =&amp;gt; true to the affected
associations. After applying this patch to edge, the issues went
away. Have not run it long enough to see if any others have popped
up.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T17:47:51+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-20T17:47:53+00:00</updated-at>
      <user-id type="integer">46638</user-id>
      <version type="integer">28</version>
      <user-name>pete_lacey</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@Pete: Wow, is that a test application you're saying? If so, is it available online somewhere?

Also, if you would be able to create a test or example of the problem you had, that would make sure we don't introduce a regression at some point.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Pete: Wow, is that a test application you're saying? If so, is
it available online somewhere?&lt;/p&gt;
&lt;p&gt;Also, if you would be able to create a test or example of the
problem you had, that would make sure we don't introduce a
regression at some point.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T19:51:13+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-20T19:51:15+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">29</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@eloy:  Nope not a test, it's the real thing.  Until now, we've been using Ryan's famous approach to multi-model form support, which worked but had a lot of moving parts.  I've just ripped all of that out and replaced it with the 2.3 RC1 nested_attributes support.  The product's open source (although big and industry specific) and the branch where I'm doing this work can be found here:

https://trisano.csinitiative.net/source/browse/trisano/top-level/branches/tgrii/webapp/

(Please excuse some of the amateurish nature of the code, but when we started we knew next to nothing about Rails.)

I will try to create a test example of the two areas that gave me problems, but the funny thing is they were little/no different than the 25 areas that didn't.  If it helps you can look in the product's [event.rb model](https://trisano.csinitiative.net/source/browse/trisano/top-level/branches/tgrii/webapp/app/models/event.rb). The two associations with nested attributes that did not work were:

has_one :jurisdiction and has_many :place_child_events ...

place_child_events is interesting in a number of ways:

 * It's a self-referential association
 * The class it references is an STI-enabled parent of the class it's declared on
 * The class that exercises nested attributes is another STI parent of this class
  * In short: A MorbidityEvent can have many PlaceChildEvents which are both descendants of Event.
 * It has a proxy method declared
 * The PlaceEvent it refers to has two nested attributes of its own

And the problems was that the participations_place association of the PlaceEvent model was not being exercised by accepts_nested_attributes_for when the participations_place was being updated (it worked fine for new).  Also of interest is there's another virtually identical association, contact_child_events, which did not suffer from this problem.

I worked around these issues simply by manually tacking an :autosave =&gt; true on both of the troublesome associations.  And your recent patch seems to resolve them.  I did try to sleuth around the code for a while to isolate the issue, but I don't really know Rails internals and all that meta stuff was making me a bit dizzy.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@eloy: Nope not a test, it's the real thing. Until now, we've
been using Ryan's famous approach to multi-model form support,
which worked but had a lot of moving parts. I've just ripped all of
that out and replaced it with the 2.3 RC1 nested_attributes
support. The product's open source (although big and industry
specific) and the branch where I'm doing this work can be found
here:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://trisano.csinitiative.net/source/browse/trisano/top-level/branches/tgrii/webapp/&quot;&gt;
https://trisano.csinitiative.net...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;(Please excuse some of the amateurish nature of the code, but
when we started we knew next to nothing about Rails.)&lt;/p&gt;
&lt;p&gt;I will try to create a test example of the two areas that gave
me problems, but the funny thing is they were little/no different
than the 25 areas that didn't. If it helps you can look in the
product's &lt;a href=&quot;https://trisano.csinitiative.net/source/browse/trisano/top-level/branches/tgrii/webapp/app/models/event.rb&quot;&gt;
event.rb model&lt;/a&gt;. The two associations with nested attributes
that did not work were:&lt;/p&gt;
&lt;p&gt;has_one :jurisdiction and has_many :place_child_events ...&lt;/p&gt;
&lt;p&gt;place_child_events is interesting in a number of ways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It's a self-referential association&lt;/li&gt;
&lt;li&gt;The class it references is an STI-enabled parent of the class
it's declared on&lt;/li&gt;
&lt;li&gt;The class that exercises nested attributes is another STI
parent of this class&lt;/li&gt;
&lt;li&gt;In short: A MorbidityEvent can have many PlaceChildEvents which
are both descendants of Event.&lt;/li&gt;
&lt;li&gt;It has a proxy method declared&lt;/li&gt;
&lt;li&gt;The PlaceEvent it refers to has two nested attributes of its
own&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And the problems was that the participations_place association
of the PlaceEvent model was not being exercised by
accepts_nested_attributes_for when the participations_place was
being updated (it worked fine for new). Also of interest is there's
another virtually identical association, contact_child_events,
which did not suffer from this problem.&lt;/p&gt;
&lt;p&gt;I worked around these issues simply by manually tacking an
:autosave =&amp;gt; true on both of the troublesome associations. And
your recent patch seems to resolve them. I did try to sleuth around
the code for a while to isolate the issue, but I don't really know
Rails internals and all that meta stuff was making me a bit
dizzy.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T20:46:19+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-20T20:46:24+00:00</updated-at>
      <user-id type="integer">46638</user-id>
      <version type="integer">30</version>
      <user-name>pete_lacey</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Sounds like pete's application is a great little test case for pushing the envelope with this stuff, nice to have you aboard pete. (Also, nice blogging on REST and stuff)

Eloy, I'm not sure that I follow the issue that the TODOs are about.  Is it that declaring a callback twice will result in it getting called twice?  If so that's at least consistent, but perhaps we could take a look.

Yehuda's got a largely reworked implementation of callbacks, so perhaps we can do it there for 3.0</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sounds like pete's application is a great little test case for
pushing the envelope with this stuff, nice to have you aboard pete.
(Also, nice blogging on REST and stuff)&lt;/p&gt;
&lt;p&gt;Eloy, I'm not sure that I follow the issue that the TODOs are
about. Is it that declaring a callback twice will result in it
getting called twice? If so that's at least consistent, but perhaps
we could take a look.&lt;/p&gt;
&lt;p&gt;Yehuda's got a largely reworked implementation of callbacks, so
perhaps we can do it there for 3.0&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T02:27:06+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T02:27:09+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">31</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T02:27:12+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T02:27:15+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">32</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@Pete: Yes your application is definitely a good test case, thanks!
About the problem you had, it seems indeed that for some reason :autosave was not set to true by accepts_nested_attributes_for&#8230; Don't spend too much time on investigating the cause, it would just have been a nice addition as a regression test :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Pete: Yes your application is definitely a good test case,
thanks! About the problem you had, it seems indeed that for some
reason :autosave was not set to true by
accepts_nested_attributes_for&amp;#8230; Don't spend too much time on
investigating the cause, it would just have been a nice addition as
a regression test :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T16:05:34+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T16:05:37+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">33</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@Michael: I'll look a bit further into the callbacks being added to the callback chain multiple times myself. The more important issue for me to cleanup this patch is one that I wrote an email about to the list as well.

http://groups.google.com/group/rubyonrails-core/browse_thread/thread/13db312cbc1d3475

The line in my patch is the one commented with: &quot;# TODO: Removing this code doesn't seem to matter&#8230;&quot;
I'm unsure on whether or not I should take it out because it doesn't seem to do anything (so the tests suggest as nothing fails). Or that I should add a test for it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Michael: I'll look a bit further into the callbacks being added
to the callback chain multiple times myself. The more important
issue for me to cleanup this patch is one that I wrote an email
about to the list as well.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://groups.google.com/group/rubyonrails-core/browse_thread/thread/13db312cbc1d3475&quot;&gt;
http://groups.google.com/group/r...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The line in my patch is the one commented with: &quot;# TODO:
Removing this code doesn't seem to matter&amp;#8230;&quot; I'm unsure on
whether or not I should take it out because it doesn't seem to do
anything (so the tests suggest as nothing fails). Or that I should
add a test for it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T16:10:19+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T16:10:24+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">34</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@Gaspard: Cool beans, thanks for the update. Had missed your message earlier :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Gaspard: Cool beans, thanks for the update. Had missed your
message earlier :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T16:10:58+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T16:11:00+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">35</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Finished and cleaned up the patch. I'll look into the multiple callback definitions on another occasion.

@Pete &amp; Gaspard: could you please test again, as a fix for #2013 made some additional changes.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Finished and cleaned up the patch. I'll look into the multiple
callback definitions on another occasion.&lt;/p&gt;
&lt;p&gt;@Pete &amp;amp; Gaspard: could you please test again, as a fix for
&lt;a href=&quot;/projects/8994/tickets/2013&quot; title=&quot;Ticket #2013&quot;&gt;#2013&lt;/a&gt; made some additional changes.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T18:04:17+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T18:04:23+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">36</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>1+

Great work Eloy !

I applied your latest patch on top of edge (2009-02-22) with the patch for #1619 (support for :inverse in associations). Works like a charm.

I tested it against a simple test app that I created to easily track the problem and against the version of zena that is being migrated to rails 2.x.</body>
      <body-html>&lt;div&gt;&lt;p&gt;1+&lt;/p&gt;
&lt;p&gt;Great work Eloy !&lt;/p&gt;
&lt;p&gt;I applied your latest patch on top of edge (2009-02-22) with the
patch for &lt;a href=&quot;/projects/8994/tickets/1619&quot; title=&quot;Ticket #1619&quot;&gt;#1619&lt;/a&gt; (support for :inverse in associations).
Works like a charm.&lt;/p&gt;
&lt;p&gt;I tested it against a simple test app that I created to easily
track the problem and against the version of zena that is being
migrated to rails 2.x.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T19:45:06+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T19:45:08+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">37</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>Nice, thanks for the quick update Gaspard! :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Nice, thanks for the quick update Gaspard! :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T21:33:38+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-22T21:33:41+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">38</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>I understand that we do not want to put all found records in @target when running something like:

@@@ ruby
firm.clients.find(...)
@@@

But I think we should still have a way to update a partial set of records in a single transaction. This means we cannot use &quot;&lt;&lt;&quot;. A simple solution would be to explicitly inform about the clients that should be saved later.

@@@ ruby
super_client = firm.clients.find(:first)
firm.clients.will_save(super_client)
# ...
client.name = 'new name'
# ...
firm.save
firm.clients.find(:first).name == 'new name'
# ===&gt; true
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;I understand that we do not want to put all found records in
@target when running something like:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
firm.clients.find(...)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But I think we should still have a way to update a partial set
of records in a single transaction. This means we cannot use
&quot;&amp;lt;&amp;lt;&quot;. A simple solution would be to explicitly inform about
the clients that should be saved later.&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
super_client = firm.clients.find(:first)
firm.clients.will_save(super_client)
# ...
client.name = 'new name'
# ...
firm.save
firm.clients.find(:first).name == 'new name'
# ===&amp;gt; true
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-23T13:55:10+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-23T13:55:16+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">39</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>PS: the patch above is not meant to be used, it's just an illustration of what would be needed.

It could also be something like

@@@ ruby
firm.clents.push(super_client, false)  # false = do not save now
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;PS: the patch above is not meant to be used, it's just an
illustration of what would be needed.&lt;/p&gt;
&lt;p&gt;It could also be something like&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
firm.clents.push(super_client, false)  # false = do not save now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-23T14:07:09+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-23T14:07:11+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">40</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>@Gaspard: Could you please file that as a new ticket?</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Gaspard: Could you please file that as a new ticket?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-23T14:08:37+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-23T14:08:41+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">41</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>Ready to be applied.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ready to be applied.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-23T14:08:57+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 8406
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-23T14:08:58+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">42</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>@eloy.  Tested new patch on my app.  All looks well.  +1</body>
      <body-html>&lt;div&gt;&lt;p&gt;@eloy. Tested new patch on my app. All looks well. +1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-23T16:51:00+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-23T16:51:03+00:00</updated-at>
      <user-id type="integer">46638</user-id>
      <version type="integer">43</version>
      <user-name>pete_lacey</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>@Pete: Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Pete: Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-24T08:49:22+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-24T08:49:25+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">44</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>@Gaspard: Ticket #2036 goes into what you're trying to solve. Please join the discussion over there.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Gaspard: Ticket &lt;a href=&quot;/projects/8994/tickets/2036&quot; title=&quot;Ticket #2036&quot;&gt;#2036&lt;/a&gt; goes into what you're trying to solve.
Please join the discussion over there.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-24T08:51:00+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-24T08:51:04+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">45</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>Tested Eloy's latest patch on top of edge (24/2/2009). Validation of associations now works as I'd expect for the case I originally had problems with - good job!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Tested Eloy's latest patch on top of edge (24/2/2009).
Validation of associations now works as I'd expect for the case I
originally had problems with - good job!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-24T22:51:15+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-24T22:51:17+00:00</updated-at>
      <user-id type="integer">17672</user-id>
      <version type="integer">46</version>
      <user-name>Paul Horsfall</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>I was having a problem when there were more than two of any kind of new children.  The index numbers were being duplicated, so the child records with the duplicate index numbers weren't saved.  It seems to be working now.  I love this feature.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I was having a problem when there were more than two of any kind
of new children. The index numbers were being duplicated, so the
child records with the duplicate index numbers weren't saved. It
seems to be working now. I love this feature.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-25T23:36:26+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 141
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-25T23:36:29+00:00</updated-at>
      <user-id type="integer">48747</user-id>
      <version type="integer">47</version>
      <user-name>denise</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-26T00:15:00+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 8406
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-26T00:15:03+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">48</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>Is it a normal behaviour?

@@@ ruby
@post.author = nil

form_for(@post) do |f|
  f.fields_for(:author) do |af| # raises an exception: The error occurred while evaluating nil.new_record?
  end
end
@@@

Can be done through:

@@@ ruby
  f.fields_for(:author, Author.new unless @post.author)
@@@

But may be it's better to auto initialize a new model object in fields_for?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Is it a normal behaviour?&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
@post.author = nil

form_for(@post) do |f|
  f.fields_for(:author) do |af| # raises an exception: The error occurred while evaluating nil.new_record?
  end
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Can be done through:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  f.fields_for(:author, Author.new unless @post.author)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But may be it's better to auto initialize a new model object in
fields_for?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-26T23:58:43+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-26T23:58:45+00:00</updated-at>
      <user-id type="integer">16383</user-id>
      <version type="integer">49</version>
      <user-name>Dmitry Polushkin</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>@Dmitry Yes, it's supposed to work like that. I'm a bit on the fence about instantiating a new record in fields_for, what if you don't want that? etc. Let's see how it goes and discuss after 2.3 again.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Dmitry Yes, it's supposed to work like that. I'm a bit on the
fence about instantiating a new record in fields_for, what if you
don't want that? etc. Let's see how it goes and discuss after 2.3
again.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-27T07:45:32+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-27T07:45:34+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">50</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>(from [5cda000bf0f6d85d1a1efedf9fa4d0b6eaf988a1]) Fixed that autosave should validate associations even if master is invalid [#1930 status:committed]
http://github.com/rails/rails/commit/5cda000bf0f6d85d1a1efedf9fa4d0b6eaf988a1</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [5cda000bf0f6d85d1a1efedf9fa4d0b6eaf988a1]) Fixed that
autosave should validate associations even if master is invalid
[&lt;a href=&quot;/projects/8994/tickets/1930&quot; title=&quot;Ticket #1930&quot;&gt;#1930&lt;/a&gt; status:committed] &lt;a href=&quot;http://github.com/rails/rails/commit/5cda000bf0f6d85d1a1efedf9fa4d0b6eaf988a1&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-27T12:50:46+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-27T12:50:47+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">51</version>
      <user-name>Repository</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-27T12:55:06+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-27T12:55:11+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">52</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>Hooray ! Thanks for the great work Eloy !</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hooray ! Thanks for the great work Eloy !&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-27T13:13:07+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-02-27T13:13:08+00:00</updated-at>
      <user-id type="integer">4065</user-id>
      <version type="integer">53</version>
      <user-name>Gaspard Bucher</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>I'm finding that with Rails 2.3 RC2 Active Record is auto-saving way more associations than it used to.  And yet ignoring validations on the things it auto-saves.  Anybody else seeing this?  Test cases and new ticket on the way...</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm finding that with Rails 2.3 RC2 Active Record is auto-saving
way more associations than it used to. And yet ignoring validations
on the things it auto-saves. Anybody else seeing this? Test cases
and new ticket on the way...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-05T22:13:12+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-03-05T22:13:15+00:00</updated-at>
      <user-id type="integer">15613</user-id>
      <version type="integer">54</version>
      <user-name>Jacob Burkhart</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>see example of my problems in #2144</body>
      <body-html>&lt;div&gt;&lt;p&gt;see example of my problems in &lt;a href=&quot;/projects/8994/tickets/2144&quot; title=&quot;Ticket #2144&quot;&gt;#2144&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-03-05T22:42:06+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2009-03-05T22:42:11+00:00</updated-at>
      <user-id type="integer">15613</user-id>
      <version type="integer">55</version>
      <user-name>Jacob Burkhart</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>&lt;p&gt;When Coach began as Manhattan Leather Bags in 1941, they were inspired by   baseball glove design and they created discount handbags with similar qualities.&lt;strong&gt;&lt;a href=&quot;http://www.uk-supra.com&quot;&gt;supra shoes&lt;/a&gt;&lt;/strong&gt; didn't come along until years later. The original handbag collection   had twelve designs, and they were made from supple, tan, top-quality leathers,   and showed the same excellent craftsmanship and stitching that we still expect   today.&lt;/p&gt;
&lt;p&gt;Coach hired a woman named Bonnie Cashin in 1962, and she brought new looks to   Coach bags. She used many new fabrics and organic materials like jersey and   wool. She created the brass hardware that is symbolic of &lt;strong&gt;&lt;a href=&quot;http://www.menstimberlandshoes.com&quot;&gt;timberland boots&lt;/a&gt;&lt;/strong&gt;. When   Lew Frankfort came aboard in 1979, he brought Coach to the next level, and they   became a name known the world over. Affordable luxury was not a concept that   many people knew, but now they would. Soon after Frankfort joined Coach, they   came out with a catalog, and opened their flagship store in New York City.&lt;/p&gt;
&lt;p&gt;In the 1980's, Coach expanded and made innovations that brought its brand   relevance and strength. They designed watches starting in 1988, and also   expanded their company to Tokyo. Japan still counts among the leading purchasers   of &lt;strong&gt;&lt;a href=&quot;http://www.allofcoach.com&quot;&gt;coach purses&lt;/a&gt;&lt;/strong&gt; and Coach heels. The manufacture of Coach shoes began in the mid   90's, and Reed Krakoff, the lead designer, loaned his talents to help put Coach   heels and &lt;a href=&quot;http://www.louisvuittonbagoutlet.com&quot;&gt;&lt;strong&gt;louis vuitton bags outlet&lt;/strong&gt;&lt;/a&gt; on the map. Their shoes aren't as popular as their   handbags, but they are well worth the money invested in their purchase.&lt;/p&gt;
&lt;p&gt;Women love heels, but at times you may want to wear shoes that don't have   this height. &lt;strong&gt;&lt;a href=&quot;http://www.truereligionjeans-outlet.com&quot;&gt;true religion jeans outlet&lt;/a&gt;&lt;/strong&gt; are as dedicated to comfort as they are to style and   pizzazz. Coach platforms come in many styles, from gold loafers to slingbacks   with open toes. You may be able to find Coach shoes at discount prices online,   but be sure that you are buying genuine Coach products.&lt;/p&gt;
&lt;p&gt;If you're looking for &lt;a href=&quot;http://www.womenmonclerjackets.com&quot;&gt;&lt;strong&gt;moncler jackets&lt;/strong&gt;&lt;/a&gt; that will make you feel and look glamorous, Coach   shoes and &lt;a href=&quot;http://www.chanelpursesbags.com&quot;&gt;&lt;strong&gt;chanel purses&lt;/strong&gt;&lt;/a&gt; can do that well. Coach sneakers and heels will make you   feel sporty, too. When selecting pumps or sandals to wear, you'll be happy to   count on the long-standing quality and service of the Coach company. They have   many styles to choose from, including chic and glamorous Coach boots and Coach   heels. Whether you are looking for sports shoes like Coach sneakers or sexy   shoes like Coach boots, the Coach name will never let you down.&lt;/p&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;When Coach began as Manhattan Leather Bags in 1941, they were
inspired by baseball glove design and they created discount
handbags with similar qualities.&lt;strong&gt;&lt;a href=
&quot;http://www.uk-supra.com&quot;&gt;supra shoes&lt;/a&gt;&lt;/strong&gt; didn't come
along until years later. The original handbag collection had twelve
designs, and they were made from supple, tan, top-quality leathers,
and showed the same excellent craftsmanship and stitching that we
still expect today.&lt;/p&gt;
&lt;p&gt;Coach hired a woman named Bonnie Cashin in 1962, and she brought
new looks to Coach bags. She used many new fabrics and organic
materials like jersey and wool. She created the brass hardware that
is symbolic of &lt;strong&gt;&lt;a href=
&quot;http://www.menstimberlandshoes.com&quot;&gt;timberland boots&lt;/a&gt;&lt;/strong&gt;.
When Lew Frankfort came aboard in 1979, he brought Coach to the
next level, and they became a name known the world over. Affordable
luxury was not a concept that many people knew, but now they would.
Soon after Frankfort joined Coach, they came out with a catalog,
and opened their flagship store in New York City.&lt;/p&gt;
&lt;p&gt;In the 1980's, Coach expanded and made innovations that brought
its brand relevance and strength. They designed watches starting in
1988, and also expanded their company to Tokyo. Japan still counts
among the leading purchasers of &lt;strong&gt;&lt;a href=
&quot;http://www.allofcoach.com&quot;&gt;coach purses&lt;/a&gt;&lt;/strong&gt; and Coach
heels. The manufacture of Coach shoes began in the mid 90's, and
Reed Krakoff, the lead designer, loaned his talents to help put
Coach heels and &lt;a href=
&quot;http://www.louisvuittonbagoutlet.com&quot;&gt;&lt;strong&gt;louis vuitton bags
outlet&lt;/strong&gt;&lt;/a&gt; on the map. Their shoes aren't as popular as
their handbags, but they are well worth the money invested in their
purchase.&lt;/p&gt;
&lt;p&gt;Women love heels, but at times you may want to wear shoes that
don't have this height. &lt;strong&gt;&lt;a href=
&quot;http://www.truereligionjeans-outlet.com&quot;&gt;true religion jeans
outlet&lt;/a&gt;&lt;/strong&gt; are as dedicated to comfort as they are to
style and pizzazz. Coach platforms come in many styles, from gold
loafers to slingbacks with open toes. You may be able to find Coach
shoes at discount prices online, but be sure that you are buying
genuine Coach products.&lt;/p&gt;
&lt;p&gt;If you're looking for &lt;a href=
&quot;http://www.womenmonclerjackets.com&quot;&gt;&lt;strong&gt;moncler
jackets&lt;/strong&gt;&lt;/a&gt; that will make you feel and look glamorous,
Coach shoes and &lt;a href=
&quot;http://www.chanelpursesbags.com&quot;&gt;&lt;strong&gt;chanel
purses&lt;/strong&gt;&lt;/a&gt; can do that well. Coach sneakers and heels will
make you feel sporty, too. When selecting pumps or sandals to wear,
you'll be happy to count on the long-standing quality and service
of the Coach company. They have many styles to choose from,
including chic and glamorous Coach boots and Coach heels. Whether
you are looking for sports shoes like Coach sneakers or sexy shoes
like Coach boots, the Coach name will never let you down.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-08T01:24:02+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">5</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2010-11-08T23:12:11+00:00</updated-at>
      <user-id type="integer">123546</user-id>
      <version type="integer">56</version>
      <user-name>jim123456</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap uggs&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap uggs the only boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;uggs for cheap&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;ugg boots cheap&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap kids uggs&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap classic tall ugg boots 5815 mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;uggs cheap&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;uk cheap ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;super cheap ugg classic mini boots&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots with zips&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg sunburst boots&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;really cheap ugg classic mini&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots for $64&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;ugg boots for cheap&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;ugg slippers cheap&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap authentic uggs&lt;/a&gt;,
&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots for sale in uk&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots mulberry&lt;/a&gt; So You Can Buy It Now!

&lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;cheap ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots on sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg brand boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots uk&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg australia boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;discount ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;what stores sell ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots on sale authorized&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;us ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;mens ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;australian ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg cove boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;fur inside ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;kids ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg bailey boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;adirondack tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;shopping for ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg mini boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;womens ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;lowest price ugg boots&lt;/a&gt;,&lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt; baby ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg style boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;knock off ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots discount&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg cove boots sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;discounted ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg roseberry boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;purple ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots sydney&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots store&lt;/a&gt; SO Cheap With Free Shipping!

&lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;UGG Store&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;UGG Store Outlet&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;UK UGG Store&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg factory store&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg outlet stores&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;what stores sell ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg outlet store locations in pa hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg store&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg boots store&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;shoe stores ugg australia sandals kids&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;boot shoes store ugg hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg store locater&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;shoe stores ugg australia kids&lt;/a&gt; Thats ugg store uk online shop!

&lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;tall boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;cardy ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;uggs sale&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;classic cardy ugg&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg cardy&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg cardy boots on sale&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg cardy chocolate&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg cardy sale&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg boots cardy&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;classic cardy ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;classic cardy ugg boots cream&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg cardy boot&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg cardy boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;adirondack tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg mosaic tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg tall boot sale&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;cheap classic tall ugg boots 5815 mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;classic tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall boot&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;sundance tall ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg boots classic tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg adirondack tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall wool&lt;/a&gt;. Have You Best Choice, Buy It Now!


&lt;a href=&quot;http://www.uggshop.net&quot;&gt;UGG Classic Short&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;UGG Short Boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;Short uggs&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;UGG Shop online&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;authentic ugg australia women's classic short #5825 - black sheepskin&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg classic short boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg fern suede classic short&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;classic short ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;classic short ugg in grey&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg short boots fushia&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg boots 8 short&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg ultra short black&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;eggplant short ugg&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;short classic ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;short ugg boots chestnut womens&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg boots black short&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg classic short black paisley&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg classic short boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg ultra short sku&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg women's classic short&lt;/a&gt;, Buy It Now! 

&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button Boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button Triplet&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button Bomber&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Boots 5803, UGG Boots 1873&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Boots USA&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;bailey button ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button boots bomber&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button boots at macys&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg boots - bailey button novelty- kids grey&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg australia bailey button&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button crinkle leather&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button boots on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button triplet boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button blackberry wine&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;discount ugg bailey button&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg australia bailey button boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button 5803 grey size 10&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button boot grey&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button cheap&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button triple&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg boots - bailey button novelty&lt;/a&gt;, Buy It Now!</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;cheap uggs the only boot sale&lt;/a&gt;,
&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;uggs for cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;ugg boots cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;cheap kids uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;cheap classic tall ugg boots 5815
mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;uggs cheap&lt;/a&gt;,
&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;uk cheap ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;super cheap ugg classic mini
boots&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots
with zips&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg
sunburst boots&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;really
cheap ugg classic mini&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots for $64&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;ugg boots for cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;ugg slippers cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.cheapuggshop.com&quot;&gt;cheap authentic uggs&lt;/a&gt;,&lt;br&gt;
&lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots for sale in
uk&lt;/a&gt;, &lt;a href=&quot;http://www.cheapuggshop.com&quot;&gt;cheap ugg boots
mulberry&lt;/a&gt; So You Can Buy It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;cheap ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots on sale&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg brand boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots uk&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots sale&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg australia boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;discount ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.ugg-boots-uk.com&quot;&gt;what stores sell ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots on sale
authorized&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;us ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;mens ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;australian ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg cove
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;fur inside ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;kids ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg bailey
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;adirondack tall
ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;shopping for
ugg boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg mini
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;womens ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;lowest price ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;baby ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg style
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;knock off ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots
discount&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg cove boots
sale&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;discounted ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg roseberry
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;purple ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots
sydney&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots
cheap&lt;/a&gt;, &lt;a href=&quot;http://www.ugg-boots-uk.com&quot;&gt;ugg boots
store&lt;/a&gt; SO Cheap With Free Shipping!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;UGG Store&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootseshop.com&quot;&gt;UGG Store Outlet&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootseshop.com&quot;&gt;UK UGG Store&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootseshop.com&quot;&gt;ugg factory store&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootseshop.com&quot;&gt;ugg outlet stores&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootseshop.com&quot;&gt;what stores sell ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg outlet store locations
in pa hit bg&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg
store&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg boots
store&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;shoe stores ugg
australia sandals kids&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootseshop.com&quot;&gt;boot shoes store ugg hit bg&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;ugg store locater&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootseshop.com&quot;&gt;shoe stores ugg australia
kids&lt;/a&gt; Thats ugg store uk online shop!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;tall boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;cardy ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;uggs sale&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;classic cardy ugg&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg cardy&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg cardy boots on sale&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg cardy chocolate&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg cardy sale&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy tall&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg boots cardy&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;classic cardy ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;classic cardy ugg boots cream&lt;/a&gt;,
&lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg cardy boot&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg cardy boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;adirondack tall ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall boots&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg mosaic tall&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;ugg tall boot sale&lt;/a&gt;, &lt;a href=
&quot;http://www.auuggboots.com&quot;&gt;cheap classic tall ugg boots 5815
mulberry&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;classic tall ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall
boot&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic cardy
tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;sundance tall ugg
boots&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg boots classic
tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg adirondack
tall&lt;/a&gt;, &lt;a href=&quot;http://www.auuggboots.com&quot;&gt;ugg classic tall
wool&lt;/a&gt;. Have You Best Choice, Buy It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.uggshop.net&quot;&gt;UGG Classic Short&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;UGG Short Boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;Short uggs&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;UGG Shop online&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;authentic ugg australia women's classic
short&lt;/a&gt; &lt;a href=&quot;/projects/8994/tickets/5825&quot; title=
&quot;Ticket #5825&quot;&gt;#5825&lt;/a&gt; - black sheepskin,&lt;br&gt;
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg classic short boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg fern suede classic short&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;classic short ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;classic short ugg in grey&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg short boots fushia&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg boots 8 short&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;ugg ultra short black&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;eggplant short ugg&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;short classic ugg boots&lt;/a&gt;, &lt;a href=
&quot;http://www.uggshop.net&quot;&gt;short ugg boots chestnut womens&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg boots black short&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg classic short black
paisley&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg classic short
boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg ultra short sku&lt;/a&gt;,
&lt;a href=&quot;http://www.uggshop.net&quot;&gt;ugg women's classic short&lt;/a&gt;, Buy
It Now!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button Boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button Triplet&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Bailey Button Bomber&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Boots 5803, UGG Boots
1873&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;UGG Boots USA&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;bailey button ugg boots&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button boots
bomber&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button
boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button
boots at macys&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg boots
- bailey button novelty- kids grey&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootsusa.com&quot;&gt;ugg australia bailey button&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button crinkle
leather&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button
boots on sale&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey
button triplet boot&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg
bailey button blackberry wine&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootsusa.com&quot;&gt;discount ugg bailey button&lt;/a&gt;,
&lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg australia bailey button
boots&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button
5803 grey size 10&lt;/a&gt;, &lt;a href=&quot;http://www.uggbootsusa.com&quot;&gt;ugg
bailey button boot grey&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button cheap&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootsusa.com&quot;&gt;ugg bailey button triple&lt;/a&gt;, &lt;a href=
&quot;http://www.uggbootsusa.com&quot;&gt;ugg boots - bailey button novelty&lt;/a&gt;,
Buy It Now!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-25T12:09:36+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2010-11-25T12:13:39+00:00</updated-at>
      <user-id type="integer">126682</user-id>
      <version type="integer">57</version>
      <user-name>sunnyabc</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>Good &lt;a href=http://www.sale-puma.com&gt;Puma shoes sale&lt;/a&gt; information for &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; fans: Yesterday, German sportswear maker Cheap Running Shoes purchased effectively lot of money Brands. The transaction entails the Cobra brand, too as linked inventory, intellectual house and endorsement contracts. It also helps make &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Shoes . They provide you with the utmost game and support all through the feet.You can happen around several types of basketball sneakers such as high-top,low-top and mid-top.The &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt; and boots give you best ankle support will support want you to obtain steadiness.
As we konw,Trail &lt;a href=http://www.sale-puma.com&gt;Puma Drift Cat&lt;/a&gt; Shoes black, Trail &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; ShoesWhite Black? 50 many years backshore are actually released within a great accomplishment. Trail Running Shoes speed cat shoes?go in add-on to King Pele into planet tournament finals, bottom tennis discs matchrs within pasture inhabit an vital area in hold out in Wimbledon Dun; Its working firms have premier manufacturers and major marketplace positions in distilled spirits, residence and security, and golf products. The reply go all through the &lt;a href=http://www.sale-puma.com&gt;Cheap puma shoes&lt;/a&gt; on sale-here you are able to happen around several distcoun.&lt;a href=http://www.sale-puma.com&gt;puma shoes on sale &lt;/a&gt;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good &lt;a href=&quot;http:&quot;&gt;Puma shoes sale information for &lt;a href=
&quot;http:&quot;&gt;Puma shoes fans: Yesterday, German sportswear maker Cheap
Running Shoes purchased effectively lot of money Brands. The
transaction entails the Cobra brand, too as linked inventory,
intellectual house and endorsement contracts. It also helps make
&lt;a href=&quot;http:&quot;&gt;puma speed cat Shoes . They provide you with the
utmost game and support all through the feet.You can happen around
several types of basketball sneakers such as high-top,low-top and
mid-top.The &lt;a href=&quot;http:&quot;&gt;Puma shoes online and boots give you
best ankle support will support want you to obtain steadiness.&lt;br&gt;
As we konw,Trail &lt;a href=&quot;http:&quot;&gt;Puma Drift Cat Shoes black, Trail
&lt;a href=&quot;http:&quot;&gt;Puma future cat ShoesWhite Black? 50 many years
backshore are actually released within a great accomplishment.
Trail Running Shoes speed cat shoes?go in add-on to King Pele into
planet tournament finals, bottom tennis discs matchrs within
pasture inhabit an vital area in hold out in Wimbledon Dun; Its
working firms have premier manufacturers and major marketplace
positions in distilled spirits, residence and security, and golf
products. The reply go all through the &lt;a href=&quot;http:&quot;&gt;Cheap puma
shoes on sale-here you are able to happen around several
distcoun.&lt;a href=&quot;http:&quot;&gt;puma shoes on sale .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-17T06:29:37+00:00</created-at>
      <creator-id type="integer">4065</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1930</number>
      <permalink>patch-autosave-should-validate-associations-even-if-master-is-invalid</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>associations autosave patch</tag>
      <title>autosave should validate associations even if master is invalid</title>
      <updated-at type="datetime">2011-02-17T06:48:17+00:00</updated-at>
      <user-id type="integer">137442</user-id>
      <version type="integer">58</version>
      <user-name>gfh</user-name>
      <creator-name>Gaspard Bucher</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1930</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>74677ad595b2af0d697e94233fa3adb90040336b</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-10T17:25:47+00:00</created-at>
      <filename>autosave_should_check_associations.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">87213</id>
      <size type="integer">3424</size>
      <uploader-id type="integer">4065</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/87213/autosave_should_check_associations.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>0cbafa55270de8dcec4cfa72890295a448e19dc8</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-11T12:07:31+00:00</created-at>
      <filename>autosave_better_validations.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">87559</id>
      <size type="integer">15908</size>
      <uploader-id type="integer">4065</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/87559/autosave_better_validations.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>c38fa022b8fda8146807a26958a634a1e8fa93f1</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-12T14:45:26+00:00</created-at>
      <filename>merge_validation_errors_onto_parent_even_if_parent_is_invalid.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">88118</id>
      <size type="integer">8439</size>
      <uploader-id type="integer">8406</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/88118/merge_validation_errors_onto_parent_even_if_parent_is_invalid.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>351f59158c4ef3ca68ba73b53af742e2c521243e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-14T06:46:22+00:00</created-at>
      <filename>autosave_should_check_validity_on_all_rebased.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">88847</id>
      <size type="integer">11895</size>
      <uploader-id type="integer">4065</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/88847/autosave_should_check_validity_on_all_rebased.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>36d6de7b451263744046f90dbcde979d53fe311f</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-20T09:34:34+00:00</created-at>
      <filename>move_default_autosaving_to_autosave_association.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">91037</id>
      <size type="integer">50253</size>
      <uploader-id type="integer">8406</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/91037/move_default_autosaving_to_autosave_association.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>d1a9ae6554334d736227fbefbce7bfdb2ee2072e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-22T18:04:17+00:00</created-at>
      <filename>move_default_autosaving_to_autosave_association.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">91571</id>
      <size type="integer">54428</size>
      <uploader-id type="integer">8406</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/91571/move_default_autosaving_to_autosave_association.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>e7f9d0bf1d9ad9b86b8b5b9fb292bfd586fb048b</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-23T13:55:10+00:00</created-at>
      <filename>will_save.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">91791</id>
      <size type="integer">2334</size>
      <uploader-id type="integer">4065</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/91791/will_save.diff</url>
    </attachment>
  </attachments>
</ticket>
