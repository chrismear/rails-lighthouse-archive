<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">8407</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-08-10T06:31:05+01:00</created-at>
  <creator-id type="integer">14798</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">82855</milestone-id>
  <number type="integer">2371</number>
  <permalink>default-scope-with-conditions-a-string</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>active_record &quot;arel rails3&quot; bug bugmash default_scope patch rails3rc</tag>
  <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
  <updated-at type="datetime">2011-02-02T16:55:52+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">21</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>Bruno Michel</creator-name>
  <assigned-user-name>Manfred Stienstra</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
  <milestone-title>2.3.10</milestone-title>
  <priority-name>High</priority-name>
  <original-body>When we use default_scope with :conditions =&gt; &quot;a string&quot; (or an array) in a model, we can't create new objects of this model. This small patch fixes this.</original-body>
  <latest-body>When we use default_scope with :conditions =&gt; &quot;a string&quot; (or an array) in a model, we can't create new objects of this model. This small patch fixes this.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When we use default_scope with :conditions =&amp;gt; &quot;a string&quot; (or
an array) in a model, we can't create new objects of this model.
This small patch fixes this.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When we use default_scope with :conditions =&gt; &quot;a string&quot; (or an array) in a model, we can't create new objects of this model. This small patch fixes this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When we use default_scope with :conditions =&amp;gt; &quot;a string&quot; (or
an array) in a model, we can't create new objects of this model.
This small patch fixes this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-29T21:52:48+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-03-29T21:52:53+01:00</updated-at>
      <user-id type="integer">14798</user-id>
      <version type="integer">1</version>
      <user-name>Bruno Michel</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This patch also fixes the #2199 bug (with a test case to prove it).</body>
      <body-html>&lt;div&gt;&lt;p&gt;This patch also fixes the &lt;a href=&quot;/projects/8994/tickets/2199&quot; title=&quot;Ticket #2199&quot;&gt;#2199&lt;/a&gt; bug (with a test case to prove
it).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-30T22:56:25+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-03-30T22:56:29+01:00</updated-at>
      <user-id type="integer">14798</user-id>
      <version type="integer">2</version>
      <user-name>Bruno Michel</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>+1

Works for me, thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;Works for me, thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T10:10:20+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-04-03T10:10:24+01:00</updated-at>
      <user-id type="integer">52904</user-id>
      <version type="integer">3</version>
      <user-name>Arnaud Berthomier</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>This same patch also fixes an &quot;undefined method `merge'&quot; error when trying to access a has_many relationship where the primary_key is specified and the associated model uses default_scope. If that doesn't make sense, I've attached another test case showing the problem that this fixes.

Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;This same patch also fixes an &quot;undefined method &lt;code&gt;merge'&quot;
error when trying to access a has_many relationship where the
primary_key is specified and the associated model uses
default_scope. If that doesn't make sense, I've attached another
test case showing the problem that this fixes.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-07T23:12:53+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-04-07T23:12:58+01:00</updated-at>
      <user-id type="integer">53345</user-id>
      <version type="integer">4</version>
      <user-name>Nick M</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-09T09:00:10+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-04-09T09:00:15+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">5</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I had:

@@@ ruby
  default_scope :conditions =&gt; ['available != ?', 1]
@@@

and this fixed the problem; however, I don't think default_scope should be assuming it can use the conditions, even if it is a hash, for default create options.  What if my conditions said {:available =&gt; '!= 1'} or {:available =&gt; '&gt; 1'} ? I believe those are valid, but still cannot be used as default create options.  

Perhaps default_scope should be changed to take a :create parameter and use that or nothing.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I had:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  default_scope :conditions =&amp;gt; ['available != ?', 1]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and this fixed the problem; however, I don't think default_scope
should be assuming it can use the conditions, even if it is a hash,
for default create options. What if my conditions said {:available
=&amp;gt; '!= 1'} or {:available =&amp;gt; '&amp;gt; 1'} ? I believe those are
valid, but still cannot be used as default create options.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Perhaps default_scope should be changed to take a :create
parameter and use that or nothing.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-09T18:14:29+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-04-09T18:14:31+01:00</updated-at>
      <user-id type="integer">17345</user-id>
      <version type="integer">6</version>
      <user-name>Steven Soroka</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I don&quot;t think that {:available =&gt; '!= 1'} or {:available =&gt; '&gt; 1'} are valid, but it can be a good idea to have a :create parameter when we want different conditions for creating objects and finding them. For example, the default status of an article can be 'draft' (not visible by default), but the default_scope uses {:status =&gt; 'public'} for listing only public articles.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I don&quot;t think that {:available =&amp;gt; '!= 1'} or {:available
=&amp;gt; '&amp;gt; 1'} are valid, but it can be a good idea to have a
:create parameter when we want different conditions for creating
objects and finding them. For example, the default status of an
article can be 'draft' (not visible by default), but the
default_scope uses {:status =&amp;gt; 'public'} for listing only public
articles.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-09T19:49:25+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-04-09T19:49:28+01:00</updated-at>
      <user-id type="integer">14798</user-id>
      <version type="integer">7</version>
      <user-name>Bruno Michel</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I'll include this in with &quot;the big scopes rewrite&quot;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'll include this in with &quot;the big scopes rewrite&quot;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-09T20:22:50+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-04-09T20:23:14+01:00</updated-at>
      <user-id type="integer">8407</user-id>
      <version type="integer">8</version>
      <user-name>Manfred Stienstra</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>It also fixes the bug with aggregate functions like count:

@@@ ruby
class Card &lt; ActiveRecord::Base
  default_scope :conditions =&gt; &quot;some string or array condition&quot;
end

Card.count
NoMethodError: undefined method `merge' for &quot;some string or array condition&quot;:String
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;It also fixes the bug with aggregate functions like count:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;class Card &amp;lt; ActiveRecord::Base
  default_scope :conditions =&amp;gt; &quot;some string or array condition&quot;
end

Card.count
NoMethodError: undefined method `merge' for &quot;some string or array condition&quot;:String&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-07T13:02:28+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2010-07-13T11:09:18+01:00</updated-at>
      <user-id type="integer">22814</user-id>
      <version type="integer">9</version>
      <user-name>qoobaa</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>It also fixes the bug with aggregate functions like count: 

@@@ ruby 
class Card &lt; ActiveRecord::Base 
  default_scope :conditions =&gt; &quot;some string or array condition&quot;
end

Card.count
# NoMethodError: undefined method merge' for [some string or array condition](String)
@@@

Sorry, Lighthouse understands only &quot;ruby&quot; in lowercase, can't edit previous post (that sucks).</body>
      <body-html>&lt;div&gt;&lt;p&gt;It also fixes the bug with aggregate functions like count:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;class Card &amp;lt; ActiveRecord::Base 
  default_scope :conditions =&amp;gt; &quot;some string or array condition&quot;
end

Card.count
# NoMethodError: undefined method merge' for [some string or array condition](String)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Sorry, Lighthouse understands only &quot;ruby&quot; in lowercase, can't
edit previous post (that sucks).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-07T13:05:33+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-06-07T13:05:36+01:00</updated-at>
      <user-id type="integer">22814</user-id>
      <version type="integer">10</version>
      <user-name>qoobaa</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Manfred,  

Seems like we should be able to get a fix for this into 2.3.4 in addition to master/3.0?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Manfred,&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Seems like we should be able to get a fix for this into 2.3.4 in
addition to master/3.0?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-09T09:17:43+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-06-09T09:17:47+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">11</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>The scopes rewrite is based on 2.3, so in theory you could apply it to both. I wouldn't expect it to be fully finished really soon though.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The scopes rewrite is based on 2.3, so in theory you could apply
it to both. I wouldn't expect it to be fully finished really soon
though.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-09T09:30:25+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-06-09T09:30:30+01:00</updated-at>
      <user-id type="integer">8407</user-id>
      <version type="integer">12</version>
      <user-name>Manfred Stienstra</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[milestone:id#50064 bulk edit command]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[milestone:id#50064 bulk edit command]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-11T23:04:35+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 41987
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2009-09-11T23:04:35+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">13</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20088)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20088&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-16T02:41:09+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: active_record bug default_scope patch
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug bugmash default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2010-05-16T02:41:09+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">14</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20606)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20606&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-23T17:54:43+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 50064
</diffable-attributes>
      <milestone-id type="integer">73241</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug bugmash default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2010-05-23T17:54:43+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">15</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.7</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20631)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20631&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-24T09:40:51+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 73241
</diffable-attributes>
      <milestone-id type="integer">73273</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug bugmash default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2010-05-24T09:40:51+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">16</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.8</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/20816)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/20816&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-25T23:45:38+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 73273
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record bug bugmash default_scope patch</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2010-05-25T23:45:38+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">17</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I'm seeing this issue in Rails 3.0.0.rc when I set a default_scope to an &quot;order&quot; clause.  It seems like a pretty big deal.  Can this patch be forward-ported to Rails3?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm seeing this issue in Rails 3.0.0.rc when I set a
default_scope to an &quot;order&quot; clause. It seems like a pretty big
deal. Can this patch be forward-ported to Rails3?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-09T13:08:47+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:tag: active_record bug bugmash default_scope patch
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record &quot;arel rails3&quot; bug bugmash default_scope patch rails3rc</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2010-08-09T13:08:50+01:00</updated-at>
      <user-id type="integer">20869</user-id>
      <version type="integer">18</version>
      <user-name>Paul Gideon Dann</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/27613)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/27613&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-30T02:28:49+01:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 73534
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record &quot;arel rails3&quot; bug bugmash default_scope patch rails3rc</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2010-08-30T02:28:49+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">19</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:32:40+00:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_record &quot;arel rails3&quot; bug bugmash default_scope patch rails3rc</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2011-02-02T16:55:15+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">20</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8407</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:32:42+00:00</created-at>
      <creator-id type="integer">14798</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">2371</number>
      <permalink>default-scope-with-conditions-a-string</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>active_record &quot;arel rails3&quot; bug bugmash default_scope patch rails3rc</tag>
      <title>Default scope with :conditions =&gt; &quot;a string&quot;</title>
      <updated-at type="datetime">2011-02-02T16:55:52+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">21</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Bruno Michel</creator-name>
      <assigned-user-name>Manfred Stienstra</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2371</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>High</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>94b254c5300b0baed4cbc3e2bb1aae8959a543c7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-29T21:52:48+01:00</created-at>
      <filename>default_scope.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">105434</id>
      <size type="integer">3048</size>
      <uploader-id type="integer">14798</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/105434/default_scope.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>cd3ae4fcffe797b57a38f563ecc6292485fc44c5</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-30T22:56:25+01:00</created-at>
      <filename>new_test_case_for_default_scope.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">105754</id>
      <size type="integer">4588</size>
      <uploader-id type="integer">14798</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/105754/new_test_case_for_default_scope.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>ac622f1b79eda45e9084bc56f44dc049735b545a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-07T23:12:53+01:00</created-at>
      <filename>default_scope_associations.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">109178</id>
      <size type="integer">7369</size>
      <uploader-id type="integer">53345</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/109178/default_scope_associations.diff</url>
    </attachment>
  </attachments>
</ticket>
