<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-14T07:28:43+00:00</created-at>
  <creator-id type="integer">38795</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4304</number>
  <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activerecord patch postgresql</tag>
  <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
  <updated-at type="datetime">2011-02-14T07:28:43+00:00</updated-at>
  <user-id type="integer">94892</user-id>
  <version type="integer">13</version>
  <user-name>Venkat</user-name>
  <creator-name>Doug Richardson</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
  <priority-name nil="true"></priority-name>
  <original-body>In Rails 2.3.5, the postgres adapter ignores the encoding field. If you try to set the encoding to sql_ascii, for example, the adapter ignores that setting instead uses the default of utf-8.

Another problem is that rails generates a postgresql database.yaml file with encoding set to unicode, which is not a valid postgresql encoding (although rails could treat this as an alias to utf-8).

Valid postgresql encodings are defined here: http://www.postgresql.org/docs/8.4/static/multibyte.html</original-body>
  <latest-body>In Rails 2.3.5, the postgres adapter ignores the encoding field. If you try to set the encoding to sql_ascii, for example, the adapter ignores that setting instead uses the default of utf-8.

Another problem is that rails generates a postgresql database.yaml file with encoding set to unicode, which is not a valid postgresql encoding (although rails could treat this as an alias to utf-8).

Valid postgresql encodings are defined here: http://www.postgresql.org/docs/8.4/static/multibyte.html</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;In Rails 2.3.5, the postgres adapter ignores the encoding field.
If you try to set the encoding to sql_ascii, for example, the
adapter ignores that setting instead uses the default of utf-8.&lt;/p&gt;
&lt;p&gt;Another problem is that rails generates a postgresql
database.yaml file with encoding set to unicode, which is not a
valid postgresql encoding (although rails could treat this as an
alias to utf-8).&lt;/p&gt;
&lt;p&gt;Valid postgresql encodings are defined here: &lt;a href=
&quot;http://www.postgresql.org/docs/8.4/static/multibyte.html&quot;&gt;http://www.postgresql.org/docs/8.4/static/multibyte.html&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>In Rails 2.3.5, the postgres adapter ignores the encoding field. If you try to set the encoding to sql_ascii, for example, the adapter ignores that setting instead uses the default of utf-8.

Another problem is that rails generates a postgresql database.yaml file with encoding set to unicode, which is not a valid postgresql encoding (although rails could treat this as an alias to utf-8).

Valid postgresql encodings are defined here: http://www.postgresql.org/docs/8.4/static/multibyte.html</body>
      <body-html>&lt;div&gt;&lt;p&gt;In Rails 2.3.5, the postgres adapter ignores the encoding field.
If you try to set the encoding to sql_ascii, for example, the
adapter ignores that setting instead uses the default of utf-8.&lt;/p&gt;
&lt;p&gt;Another problem is that rails generates a postgresql
database.yaml file with encoding set to unicode, which is not a
valid postgresql encoding (although rails could treat this as an
alias to utf-8).&lt;/p&gt;
&lt;p&gt;Valid postgresql encodings are defined here: &lt;a href=
&quot;http://www.postgresql.org/docs/8.4/static/multibyte.html&quot;&gt;http://www.postgresql.org/docs/8.4/static/multibyte.html&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-31T16:30:18+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-03-31T16:30:23+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">1</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have a patch for this and will submit it after I read the contributors guide and gem my environment configured to run the &quot;rake test_postgresql&quot; on rails 3.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have a patch for this and will submit it after I read the
contributors guide and gem my environment configured to run the
&quot;rake test_postgresql&quot; on rails 3.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-31T17:32:44+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-03-31T17:32:50+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">2</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>@doug is this bug also in 3.0?</body>
      <body-html>&lt;div&gt;&lt;p&gt;@doug is this bug also in 3.0?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-31T19:49:04+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-03-31T19:49:05+01:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">3</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Please let us know if you run into problems making a patch etc. You can find me on the #rails-contrib channel on freenode IRC. Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Please let us know if you run into problems making a patch etc.
You can find me on the #rails-contrib channel on freenode IRC.
Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-31T20:18:55+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-03-31T20:19:01+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">4</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm not sure how to add tests for databases.rake so I will do this later. Here's the patch in case anyone needs it now (this was a patch to 2.3.5):

Index: server/vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb
===================================================================
--- server/vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb	(revision 94349)
+++ server/vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb	(revision 94350)
@@ -609,11 +609,16 @@
     #
     # Example:
     #   create_database config[:database], config
-      #   create_database 'foo_development', :encoding =&gt; 'unicode'
+      #   create_database 'foo_development', :encoding =&gt; 'utf8'
     def create_database(name, options = {})
-        options = options.reverse_merge(:encoding =&gt; &quot;utf8&quot;)
+        options = options.symbolize_keys.reverse_merge(:encoding =&gt; &quot;utf8&quot;)
+        
+        # Rails database.yml config files used to be generated with the invalid &quot;unicode&quot; encoding.
+        if options[:encoding] == &quot;unicode&quot;
+          options[:encoding] = &quot;utf8&quot;
+        end

-        option_string = options.symbolize_keys.sum do |key, value|
+        option_string = options.sum do |key, value|
         case key
         when :owner
           &quot; OWNER = &quot;#{value}&quot;&quot;
Index: server/vendor/rails/railties/lib/tasks/databases.rake
===================================================================
--- server/vendor/rails/railties/lib/tasks/databases.rake	(revision 94349)
+++ server/vendor/rails/railties/lib/tasks/databases.rake	(revision 94350)
@@ -64,7 +64,7 @@
         $stderr.puts &quot;Couldn't create database for #{config.inspect}, charset: #{config['charset'] || @charset}, collation: #{config['collation'] || @collation} (if you set the charset manually, make sure you have a matching collation)&quot;
       end
     when 'postgresql'
-        @encoding = config[:encoding] || ENV['CHARSET'] || 'utf8'
+        @encoding = config['encoding'] || ENV['CHARSET'] || 'utf8'
       begin
         ActiveRecord::Base.establish_connection(config.merge('database' =&gt; 'postgres', 'schema_search_path' =&gt; 'public'))
         ActiveRecord::Base.connection.create_database(config['database'], config.merge('encoding' =&gt; @encoding))</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm not sure how to add tests for databases.rake so I will do
this later. Here's the patch in case anyone needs it now (this was
a patch to 2.3.5):&lt;/p&gt;
&lt;h1&gt;Index:
server/vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb&lt;/h1&gt;
&lt;p&gt;---
server/vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb
(revision 94349) +++
server/vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb
(revision 94350) @@ -609,11 +609,16 @@&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; #
 # Example:
 #   create_database config[:database], config&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;# create_database 'foo_development', :encoding =&amp;gt;
'unicode'&lt;/li&gt;
&lt;li&gt;# create_database 'foo_development', :encoding =&amp;gt; 'utf8' def
create_database(name, options = {})&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; options = options.reverse_merge(:encoding =&amp;gt; &quot;utf8&quot;)&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; options = options.symbolize_keys.reverse_merge(:encoding =&amp;gt; &quot;utf8&quot;)&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; # Rails database.yml config files used to be generated with the invalid &quot;unicode&quot; encoding.&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; if options[:encoding] == &quot;unicode&quot;&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt;   options[:encoding] = &quot;utf8&quot;&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; end&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; option_string = options.symbolize_keys.sum do |key, value|&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; option_string = options.sum do |key, value|
 case key
 when :owner
   &quot; OWNER = &quot;#{value}&quot;&quot;&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Index:
server/vendor/rails/railties/lib/tasks/databases.rake&lt;/h1&gt;
&lt;p&gt;--- server/vendor/rails/railties/lib/tasks/databases.rake
(revision 94349) +++
server/vendor/rails/railties/lib/tasks/databases.rake (revision
94350) @@ -64,7 +64,7 @@&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;     $stderr.puts &quot;Couldn't create database for #{config.inspect}, charset: #{config['charset'] || @charset}, collation: #{config['collation'] || @collation} (if you set the charset manually, make sure you have a matching collation)&quot;
   end
 when 'postgresql'&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; @encoding = config[:encoding] || ENV['CHARSET'] || 'utf8'&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;
&lt;code&gt; @encoding = config['encoding'] || ENV['CHARSET'] || 'utf8'&lt;/code&gt;
&lt;/pre&gt;
begin
&lt;pre&gt;
&lt;code&gt; ActiveRecord::Base.establish_connection(config.merge('database' =&amp;gt; 'postgres', 'schema_search_path' =&amp;gt; 'public'))
 ActiveRecord::Base.connection.create_database(config['database'], config.merge('encoding' =&amp;gt; @encoding))&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-31T21:28:42+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 65556
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-03-31T21:28:43+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">5</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>OMG, I'm such a formatting n00b. Sorry about that.

@Yehuda, yes it looks like the bug is also in 3.0 and I was actually going to make the fix there.

@Rizwan I'll probably need your help figuring out how to setup a unit test for databases.rake. I wasn't able to find them. I'll contact you on the IRC channel.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OMG, I'm such a formatting n00b. Sorry about that.&lt;/p&gt;
&lt;p&gt;@Yehuda, yes it looks like the bug is also in 3.0 and I was
actually going to make the fix there.&lt;/p&gt;
&lt;p&gt;@Rizwan I'll probably need your help figuring out how to setup a
unit test for databases.rake. I wasn't able to find them. I'll
contact you on the IRC channel.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-31T21:31:42+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-03-31T21:31:44+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">6</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Another n00bism, I accidentally cleared the assignment so resetting back to Rizwan.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Another n00bism, I accidentally cleared the assignment so
resetting back to Rizwan.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-31T21:32:50+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-03-31T21:32:53+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">7</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I can reproduce this problem in rails 3.0 as well. Since I left out the reproduction steps in the problem description, here they are:

1. Create a postgres database cluster with default encoding set to something besides UTF8 (e.g. sql_ascii):
@@@
initdb --encoding=sql_ascii .
@@@
2. Modify database.yml to set the encoding to sql_ascii
3. rake db:create

The result is the following error.
@@@
DougMacBookPro:doug doug$ rake db:create
(in /Users/doug/test/doug)
PGError: ERROR:  new encoding (UTF8) is incompatible with the encoding of the template database (SQL_ASCII)
HINT:  Use the same encoding as in the template database, or use template0 as template.
: CREATE DATABASE &quot;doug_development&quot; ENCODING = 'utf8'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/connection_adapters/abstract_adapter.rb:207:in `log'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/connection_adapters/postgresql_adapter.rb:559:in `execute'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/connection_adapters/postgresql_adapter.rb:642:in `create_database'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/railties/databases.rake:100:in `create_database'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/railties/databases.rake:35
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/bin/rake:31
/usr/bin/rake:19:in `load'
/usr/bin/rake:19
Couldn't create database for {&quot;encoding&quot;=&gt;&quot;sql_ascii&quot;, &quot;username&quot;=&gt;&quot;doug&quot;, &quot;adapter&quot;=&gt;&quot;postgresql&quot;, &quot;database&quot;=&gt;&quot;doug_development&quot;, &quot;pool&quot;=&gt;5, &quot;password&quot;=&gt;nil}
@@@

The database.rake file is ignoring the configuration setting because of the following line:
@@@
@encoding = config[:encoding] || ENV['CHARSET'] || 'utf8'
@@@
At that point, config is keyed by the string 'encoding' NOT the symbol :encoding. The correct line is:
@@@
@encoding = config['encoding'] || ENV['CHARSET'] || 'utf8'
@@@

Originally (see horrible code formatting above) I thought there was an issue in the postgres adapter as well, but after running the unit tests that code looks fine.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I can reproduce this problem in rails 3.0 as well. Since I left
out the reproduction steps in the problem description, here they
are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Create a postgres database cluster with default encoding set to
something besides UTF8 (e.g. sql_ascii):&lt;br&gt;
&lt;pre&gt;
&lt;code&gt;initdb --encoding=sql_ascii .&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Modify database.yml to set the encoding to sql_ascii&lt;br&gt;&lt;/li&gt;
&lt;li&gt;rake db:create&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The result is the following error.&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;DougMacBookPro:doug doug$ rake db:create
(in /Users/doug/test/doug)
PGError: ERROR:  new encoding (UTF8) is incompatible with the encoding of the template database (SQL_ASCII)
HINT:  Use the same encoding as in the template database, or use template0 as template.
: CREATE DATABASE &quot;doug_development&quot; ENCODING = 'utf8'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/connection_adapters/abstract_adapter.rb:207:in &lt;/code&gt;log'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/connection_adapters/postgresql_adapter.rb:559:inexecute'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/connection_adapters/postgresql_adapter.rb:642:in &lt;code&gt;create_database'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/railties/databases.rake:100:in&lt;/code&gt;create_database'
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.0.beta1/lib/active_record/railties/databases.rake:35
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:636:in &lt;code&gt;call'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:636:in&lt;/code&gt;execute'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:631:in &lt;code&gt;each'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:631:in&lt;/code&gt;execute'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:597:in &lt;code&gt;invoke_with_call_chain'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/monitor.rb:242:in&lt;/code&gt;synchronize'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:590:in &lt;code&gt;invoke_with_call_chain'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:583:in&lt;/code&gt;invoke'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2051:in &lt;code&gt;invoke_task'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in&lt;/code&gt;top_level'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in &lt;code&gt;each'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in&lt;/code&gt;top_level'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in &lt;code&gt;standard_exception_handling'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2023:in&lt;/code&gt;top_level'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2001:in &lt;code&gt;run'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in&lt;/code&gt;standard_exception_handling'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/lib/rake.rb:1998:in &lt;code&gt;run'
/Users/doug/.gem/ruby/1.8/gems/rake-0.8.7/bin/rake:31
/usr/bin/rake:19:in&lt;/code&gt;load'
/usr/bin/rake:19
Couldn't create database for {&quot;encoding&quot;=&amp;gt;&quot;sql_ascii&quot;, &quot;username&quot;=&amp;gt;&quot;doug&quot;, &quot;adapter&quot;=&amp;gt;&quot;postgresql&quot;, &quot;database&quot;=&amp;gt;&quot;doug_development&quot;, &quot;pool&quot;=&amp;gt;5, &quot;password&quot;=&amp;gt;nil}
&lt;/pre&gt;
&lt;p&gt;The database.rake file is ignoring the configuration setting
because of the following line:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;@encoding = config[:encoding] || ENV['CHARSET'] || 'utf8'&lt;/code&gt;
&lt;/pre&gt;
At that point, config is keyed by the string 'encoding' NOT the
symbol :encoding. The correct line is:&lt;br&gt;
&lt;pre&gt;
&lt;code&gt;@encoding = config['encoding'] || ENV['CHARSET'] || 'utf8'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Originally (see horrible code formatting above) I thought there
was an issue in the postgres adapter as well, but after running the
unit tests that code looks fine.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-01T06:09:20+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-04-01T06:09:24+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">8</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I looked into this more and it appears UNICODE was a valid character encoding as recent as postgres 8.0 (http://www.postgresql.org/docs/8.0/interactive/multibyte.html).

Given that, it's not clear what postgres encoding the rails command should use when creating a new application. To generate the correct encoding, rails would have to prompt for the postgres version.

Note: I have not tested on a postgres 8.0 installation. It's possible it understands the utf8 encoding even though it's not documented. In that case, defaulting to utf8 would be the best option.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I looked into this more and it appears UNICODE was a valid
character encoding as recent as postgres 8.0 (&lt;a href=
&quot;http://www.postgresql.org/docs/8.0/interactive/multibyte.html)&quot;&gt;http://www.postgresql.org/docs/8.0/interactive/multibyte.html)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Given that, it's not clear what postgres encoding the rails
command should use when creating a new application. To generate the
correct encoding, rails would have to prompt for the postgres
version.&lt;/p&gt;
&lt;p&gt;Note: I have not tested on a postgres 8.0 installation. It's
possible it understands the utf8 encoding even though it's not
documented. In that case, defaulting to utf8 would be the best
option.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-01T07:36:28+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-04-01T07:36:31+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">9</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Postgres 8.4 still honors unicode encoding even though it's not listed in the documentation. That means the simple change from :encoding to 'encoding' should be enough to close this bug. I'm submitting the patch now.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Postgres 8.4 still honors unicode encoding even though it's not
listed in the documentation. That means the simple change from
:encoding to 'encoding' should be enough to close this bug. I'm
submitting the patch now.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-01T07:57:38+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-04-01T07:57:38+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">10</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-01T08:04:31+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord postgresql
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord patch postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-04-01T08:04:44+01:00</updated-at>
      <user-id type="integer">38795</user-id>
      <version type="integer">11</version>
      <user-name>Doug Richardson</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">65556</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [e8292abbcd581f2fdad368fc5760416071b4b67f]) Read postgresql encoding using string key instead of symbol [#4304 state:resolved]

Signed-off-by: wycats &lt;wycats@gmail.com&gt;
http://github.com/rails/rails/commit/e8292abbcd581f2fdad368fc5760416071b4b67f</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/e8292abbcd581f2fdad368fc5760416071b4b67f&quot;
title=
&quot;Changeset [e8292abbcd581f2fdad368fc5760416071b4b67f]&quot;&gt;[e8292abbcd581f2fdad368fc5760416071b4b67f]&lt;/a&gt;)
Read postgresql encoding using string key instead of symbol
[&lt;a href=&quot;/projects/8994/tickets/4304&quot; title=
&quot;Ticket #4304&quot;&gt;#4304&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: wycats &lt;a href=
&quot;mailto:wycats@gmail.com&quot;&gt;wycats@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/e8292abbcd581f2fdad368fc5760416071b4b67f&quot;&gt;
http://github.com/rails/rails/commit/e8292abbcd581f2fdad368fc576041...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-01T16:37:40+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord patch postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-04-01T16:37:41+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">12</version>
      <user-name>Repository</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Rizwan Reza</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Dear Sir,

   I have csv file which has encode values like !@#$%^&amp;&amp;_+ some special characters.When i try to import csv file into postgresql, i am getting below error

 &quot;ERROR:  invalid byte sequence for encoding &quot;UTF8&quot;: 0xb0
HINT:  This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by &quot;client_encoding&quot;.
CONTEXT:  COPY testtableinfo, line 208 &quot;

I do not understand where i am doing wrong.Please anyone can guide me.I am waiting for your great response.

Thanks and regards,

Ven</body>
      <body-html>&lt;div&gt;&lt;p&gt;Dear Sir,&lt;/p&gt;
&lt;p&gt;I have csv file which has encode values like !@#$%^&amp;amp;&amp;amp;_+
some special characters.When i try to import csv file into
postgresql, i am getting below error&lt;/p&gt;
&lt;p&gt;&quot;ERROR: invalid byte sequence for encoding &quot;UTF8&quot;: 0xb0 HINT:
This error can also happen if the byte sequence does not match the
encoding expected by the server, which is controlled by
&quot;client_encoding&quot;.&lt;br&gt;
CONTEXT: COPY testtableinfo, line 208 &quot;&lt;/p&gt;
&lt;p&gt;I do not understand where i am doing wrong.Please anyone can
guide me.I am waiting for your great response.&lt;/p&gt;
&lt;p&gt;Thanks and regards,&lt;/p&gt;
&lt;p&gt;Ven&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-14T14:01:40+01:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 65556
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord patch postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2010-04-14T14:01:42+01:00</updated-at>
      <user-id type="integer">94892</user-id>
      <version type="integer">13</version>
      <user-name>Venkat</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>thank you very much......&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/&quot;&gt;&#1605;&#1606;&#1578;&#1583;&#1610;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&#1605;&#1603;&#1610;&#1575;&#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1575;&#1586;&#1610;&#1575;&#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&#1601;&#1587;&#1575;&#1578;&#1610;&#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&#1585;&#1587;&#1575;&#1574;&#1604; 
- &#1605;&#1587;&#1580;&#1575;&#1578; - &#1608;&#1587;&#1575;&#1574;&#1591;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&#1578;&#1608;&#1576;&#1610;&#1603;&#1575;&#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&#1608;&#1592;&#1575;&#1574;&#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&#1576;&#1585;&#1608;&#1603;&#1587;&#1610;&lt;/a&gt; &lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt;&lt;a href=&quot;http://forum.line-sport.tv/&quot;&gt;&#1604;&#1575;&#1610;&#1606; &#1587;&#1576;&#1608;&#1585;&#1578;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;thank you very much......&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/&quot;&gt;&amp;#1605;&amp;#1606;&amp;#1578;&amp;#1583;&amp;#1610;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f86.html&quot;&gt;&amp;#1605;&amp;#1603;&amp;#1610;&amp;#1575;&amp;#1580;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1575;&amp;#1586;&amp;#1610;&amp;#1575;&amp;#1569;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f84.html&quot;&gt;&amp;#1601;&amp;#1587;&amp;#1575;&amp;#1578;&amp;#1610;&amp;#1606;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f17.html&quot;&gt;&amp;#1585;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1604;&lt;br&gt;
- &amp;#1605;&amp;#1587;&amp;#1580;&amp;#1575;&amp;#1578; -
&amp;#1608;&amp;#1587;&amp;#1575;&amp;#1574;&amp;#1591;&lt;/a&gt;&lt;span class=
&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=
&quot;http://www.tran33m.com/vb/f18.html&quot;&gt;&amp;#1578;&amp;#1608;&amp;#1576;&amp;#1610;&amp;#1603;&amp;#1575;&amp;#1578;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;&amp;#1608;&amp;#1592;&amp;#1575;&amp;#1574;&amp;#1601;&lt;/a&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.tran33m.com/vb/f76.html&quot;&gt;jobs&lt;/a&gt;
&lt;a href=
&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;&amp;#1576;&amp;#1585;&amp;#1608;&amp;#1603;&amp;#1587;&amp;#1610;&lt;/a&gt;
&lt;a href=&quot;http://www.tran33m.com/vb/t31874.html&quot;&gt;proxy&lt;/a&gt;&lt;a href=
&quot;http://forum.line-sport.tv/&quot;&gt;&amp;#1604;&amp;#1575;&amp;#1610;&amp;#1606;
&amp;#1587;&amp;#1576;&amp;#1608;&amp;#1585;&amp;#1578;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-08T11:19:45+00:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord patch postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2011-02-08T12:16:06+00:00</updated-at>
      <user-id type="integer">136126</user-id>
      <version type="integer">14</version>
      <user-name>alasiri1</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name>Low</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;You may also study the actual seems inside the Pandora charms as a result &lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;of add-on including cherished jewels, crimson along with amethyst,&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/pandora-bracelets-c-3.html&quot;&gt;&lt;em&gt;Pandoras Bracelets&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; whichever satisfies ones money your identity. In order a lot more solutions, it is best to look at silver charms provided simply by Pandora.&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/pandora-charms-c-9.html&quot;&gt;&lt;em&gt;Pandora&#160;Charms&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; Couldn't everyone appearance great understand a majority of these &lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;earrings which can be created together with your manufacturer,&lt;strong&gt;&lt;a href=&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;pandora ireland&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; initials or simply brief?</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;You
may also study the actual seems inside the Pandora charms as a
result &lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora
NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;of add-on including cherished jewels, crimson
along with amethyst,&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/pandora-bracelets-c-3.html&quot;&gt;&lt;em&gt;Pandoras
Bracelets&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; whichever satisfies ones money your
identity. In order a lot more solutions, it is best to look at
silver charms provided simply by Pandora.&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/pandora-charms-c-9.html&quot;&gt;&lt;em&gt;Pandora&amp;nbsp;Charms&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;
Couldn't everyone appearance great understand a majority of these
&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;Pandora
NZ&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt;earrings which can be created together with
your manufacturer,&lt;strong&gt;&lt;a href=
&quot;http://www.onlinepandorajewellery.com/&quot;&gt;&lt;em&gt;pandora
ireland&lt;/em&gt;&lt;/a&gt;&lt;/strong&gt; initials or simply brief?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-14T06:09:54+00:00</created-at>
      <creator-id type="integer">38795</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4304</number>
      <permalink>cannot-set-postgres-adapter-encoding-to-anything-besides-utf-8</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord patch postgresql</tag>
      <title>Cannot set postgres adapter encoding to anything besides utf-8</title>
      <updated-at type="datetime">2011-02-14T07:28:43+00:00</updated-at>
      <user-id type="integer">136876</user-id>
      <version type="integer">15</version>
      <user-name>pandora jewellry</user-name>
      <creator-name>Doug Richardson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4304</url>
      <priority-name nil="true"></priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>657ed521e1d015e90b6a39ab23bb5f3b272426e3</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-04-01T08:04:31+01:00</created-at>
      <filename>honor-postgres-encoding.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">467965</id>
      <size type="integer">1057</size>
      <uploader-id type="integer">38795</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/467965/honor-postgres-encoding.diff</url>
    </attachment>
  </attachments>
</ticket>
