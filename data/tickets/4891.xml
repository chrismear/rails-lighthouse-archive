<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">15316</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-10-02T10:57:54+01:00</created-at>
  <creator-id type="integer">10433</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">82855</milestone-id>
  <number type="integer">4891</number>
  <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>2-3-stable 3.0 migrations patch</tag>
  <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
  <updated-at type="datetime">2010-10-16T23:52:21+01:00</updated-at>
  <user-id type="integer">81551</user-id>
  <version type="integer">14</version>
  <user-name>Andrea Campi</user-name>
  <creator-name>James B. Byrne</creator-name>
  <assigned-user-name>Aaron Patterson</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
  <milestone-title>2.3.10</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I had occasion to re-run the migration for a Rails project and I get the error given below.  I get this only with 2.3.8.  Rails-2.3.5, to which I have reverted, does not have this problem.

&lt;pre&gt;
$ rake -t db:migrate
(in /home/byrnejb/Software/Development/Projects/proforma.git)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
==  CreateSessions: migrating =================================================
-- create_table(:sessions)
   -&gt; 0.0015s
-- add_index(:sessions, :session_id, {:unique=&gt;true, :name=&gt;:idxr_sessions_session_id})
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `length' for :idxr_sessions_session_id:Symbol
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/schema_statements.rb:281:in `add_index'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `method_missing'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:348:in `method_missing'
./db/migrate//00110_create_sessions.rb:13:in `up_without_benchmarks'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `__send__'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:491
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/transactions.rb:182:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:490:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:401:in `up'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:383:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rails-2.3.8/lib/tasks/databases.rake:112
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/bin/rake:31
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24:in `load'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24
&lt;/pre&gt;</original-body>
  <latest-body>I had occasion to re-run the migration for a Rails project and I get the error given below.  I get this only with 2.3.8.  Rails-2.3.5, to which I have reverted, does not have this problem.

&lt;pre&gt;
$ rake -t db:migrate
(in /home/byrnejb/Software/Development/Projects/proforma.git)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
==  CreateSessions: migrating =================================================
-- create_table(:sessions)
   -&gt; 0.0015s
-- add_index(:sessions, :session_id, {:unique=&gt;true, :name=&gt;:idxr_sessions_session_id})
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `length' for :idxr_sessions_session_id:Symbol
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/schema_statements.rb:281:in `add_index'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `method_missing'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:348:in `method_missing'
./db/migrate//00110_create_sessions.rb:13:in `up_without_benchmarks'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `__send__'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:491
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/transactions.rb:182:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:490:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:401:in `up'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:383:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rails-2.3.8/lib/tasks/databases.rake:112
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/bin/rake:31
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24:in `load'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24
&lt;/pre&gt;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I had occasion to re-run the migration for a Rails project and I
get the error given below. I get this only with 2.3.8. Rails-2.3.5,
to which I have reverted, does not have this problem.&lt;/p&gt;
&lt;pre&gt;
$ rake -t db:migrate
(in /home/byrnejb/Software/Development/Projects/proforma.git)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
==  CreateSessions: migrating =================================================
-- create_table(:sessions)
   -&amp;gt; 0.0015s
-- add_index(:sessions, :session_id, {:unique=&amp;gt;true, :name=&amp;gt;:idxr_sessions_session_id})
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `length' for :idxr_sessions_session_id:Symbol
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/schema_statements.rb:281:in `add_index'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `method_missing'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:348:in `method_missing'
./db/migrate//00110_create_sessions.rb:13:in `up_without_benchmarks'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `__send__'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:491
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/transactions.rb:182:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:490:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:401:in `up'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:383:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rails-2.3.8/lib/tasks/databases.rake:112
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/bin/rake:31
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24:in `load'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I had occasion to re-run the migration for a Rails project and I get the error given below.  I get this only with 2.3.8.  Rails-2.3.5, to which I have reverted, does not have this problem.

&lt;pre&gt;
$ rake -t db:migrate
(in /home/byrnejb/Software/Development/Projects/proforma.git)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
==  CreateSessions: migrating =================================================
-- create_table(:sessions)
   -&gt; 0.0015s
-- add_index(:sessions, :session_id, {:unique=&gt;true, :name=&gt;:idxr_sessions_session_id})
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `length' for :idxr_sessions_session_id:Symbol
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/schema_statements.rb:281:in `add_index'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `method_missing'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:348:in `method_missing'
./db/migrate//00110_create_sessions.rb:13:in `up_without_benchmarks'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `__send__'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:491
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/transactions.rb:182:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:490:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:401:in `up'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:383:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rails-2.3.8/lib/tasks/databases.rake:112
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/bin/rake:31
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24:in `load'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;I had occasion to re-run the migration for a Rails project and I
get the error given below. I get this only with 2.3.8. Rails-2.3.5,
to which I have reverted, does not have this problem.&lt;/p&gt;
&lt;pre&gt;
$ rake -t db:migrate
(in /home/byrnejb/Software/Development/Projects/proforma.git)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
==  CreateSessions: migrating =================================================
-- create_table(:sessions)
   -&amp;gt; 0.0015s
-- add_index(:sessions, :session_id, {:unique=&amp;gt;true, :name=&amp;gt;:idxr_sessions_session_id})
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `length' for :idxr_sessions_session_id:Symbol
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/schema_statements.rb:281:in `add_index'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:352:in `method_missing'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:328:in `say_with_time'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:348:in `method_missing'
./db/migrate//00110_create_sessions.rb:13:in `up_without_benchmarks'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `send'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:282:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `__send__'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:365:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:491
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/transactions.rb:182:in `transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:565:in `ddl_transaction'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:490:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:477:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:401:in `up'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/activerecord-2.3.8/lib/active_record/migration.rb:383:in `migrate'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rails-2.3.8/lib/tasks/databases.rake:112
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/home/byrnejb/.rvm/rubies/ruby-1.8.7-p249/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/gems/rake-0.8.7/bin/rake:31
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24:in `load'
/home/byrnejb/.rvm/gems/ruby-1.8.7-p249/bin/rake:24
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-17T19:02:22+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-06-17T19:02:24+01:00</updated-at>
      <user-id type="integer">10433</user-id>
      <version type="integer">1</version>
      <user-name>James B. Byrne</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Thanks for your report. I fixed it in the attached patch. Applies on 2-3-stable but can be cherry-picked to master too.

Meanwhile, you can just change your symbol into strings and the migrations should work.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks for your report. I fixed it in the attached patch.
Applies on 2-3-stable but can be cherry-picked to master too.&lt;/p&gt;
&lt;p&gt;Meanwhile, you can just change your symbol into strings and the
migrations should work.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-18T15:41:05+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: &quot;\&quot;rake db:migrate rails-2.3.8 bug\&quot;&quot;
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-06-18T15:41:19+01:00</updated-at>
      <user-id type="integer">99481</user-id>
      <version type="integer">2</version>
      <user-name>&#201;tienne Barri&#233;</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thank you.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thank you.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-18T15:43:56+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-06-18T15:44:03+01:00</updated-at>
      <user-id type="integer">10433</user-id>
      <version type="integer">3</version>
      <user-name>James B. Byrne</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Applied this patch and it resolves our problem with AR-2.3.8.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Applied this patch and it resolves our problem with
AR-2.3.8.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-18T15:52:32+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-06-18T15:53:05+01:00</updated-at>
      <user-id type="integer">10433</user-id>
      <version type="integer">4</version>
      <user-name>James B. Byrne</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This same issue is present in 3.0.0.beta4.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This same issue is present in 3.0.0.beta4.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T18:12:15+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-06-24T18:12:21+01:00</updated-at>
      <user-id type="integer">26148</user-id>
      <version type="integer">5</version>
      <user-name>Brian Durand</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-24T18:12:59+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: patch &quot;rake db:migrate rails-2.3.8 bug&quot;
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-06-24T18:13:06+01:00</updated-at>
      <user-id type="integer">26148</user-id>
      <version type="integer">6</version>
      <user-name>Brian Durand</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Yes it's also present in master. This patch still applies on both 2-3-stable and master and solves that problem.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yes it's also present in master. This patch still applies on
both 2-3-stable and master and solves that problem.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-25T14:44:35+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-06-25T14:44:42+01:00</updated-at>
      <user-id type="integer">99481</user-id>
      <version type="integer">7</version>
      <user-name>&#201;tienne Barri&#233;</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Since this is still present in 2.3.9 and this ticket is still classed as 'new' am I to conclude that it is not yet fixed in 3.0.0?  If so, what is preventing this issue from being fixed in a standard release.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Since this is still present in 2.3.9 and this ticket is still
classed as 'new' am I to conclude that it is not yet fixed in
3.0.0? If so, what is preventing this issue from being fixed in a
standard release.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-23T20:06:24+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-09-23T20:06:26+01:00</updated-at>
      <user-id type="integer">10433</user-id>
      <version type="integer">8</version>
      <user-name>James B. Byrne</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15316</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-23T22:01:05+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:priority: 0
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-09-23T22:01:10+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">9</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Aaron Patterson</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15316</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>James, yes and no. It&#8217;s fixed in 3.0.0 and master (7a1bba4799f3fae2c3699816bc071128fd591461 and c0fa4de65b32fc5e8251dafab1330f044d682a1e), but only for add_index, and not for remove_index.

The original patch still applies (with offsets) on 2-3-stable, but you&#8217;ll need a slightly different patch (attached) for master and 3-0-stable.</body>
      <body-html>&lt;div&gt;&lt;p&gt;James, yes and no. It&amp;#8217;s fixed in 3.0.0 and master
(7a1bba4799f3fae2c3699816bc071128fd591461 and
c0fa4de65b32fc5e8251dafab1330f044d682a1e), but only for add_index,
and not for remove_index.&lt;/p&gt;
&lt;p&gt;The original patch still applies (with offsets) on 2-3-stable,
but you&amp;#8217;ll need a slightly different patch (attached) for
master and 3-0-stable.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-24T01:44:01+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-09-24T01:44:04+01:00</updated-at>
      <user-id type="integer">99481</user-id>
      <version type="integer">10</version>
      <user-name>&#201;tienne Barri&#233;</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Aaron Patterson</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15316</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Hi &#201;tienne, I've applied your patch for 2-3-stable.  Can you rebase your patch for master / 3-0-stable, and I'll apply it?  Currently, it doesn't apply.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi &amp;Eacute;tienne, I've applied your patch for 2-3-stable. Can
you rebase your patch for master / 3-0-stable, and I'll apply it?
Currently, it doesn't apply.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-27T18:44:38+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-09-27T18:44:42+01:00</updated-at>
      <user-id type="integer">15316</user-id>
      <version type="integer">11</version>
      <user-name>Aaron Patterson</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Aaron Patterson</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15316</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The problem this patch was solving (which I am responsible for :( ) was fixed in a few different commits for master / 3-0-stable. First add_index was fixed as I explained in my previous comment. And yesterday, remove_index was fixed too. (http://github.com/rails/rails/commit/d6f7b7d35337b87cc1c419e47fae52bbfc3f371e).

So basically now the patch for master is useless. But if you use the new attached patch anyway, you&#8217;ll get a test specific to symbolic index names, add_index will be again compatible to a long forgotten time where its third argument was &quot;UNIQUE&quot;, and a tiny and totally useless performance improvement which is just here because that's the way I had coded the patch before the other patch rendered it useless :D

I think it's worth it for the test alone, for consistency with 2-3-stable.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The problem this patch was solving (which I am responsible for
:( ) was fixed in a few different commits for master / 3-0-stable.
First add_index was fixed as I explained in my previous comment.
And yesterday, remove_index was fixed too. (&lt;a href=
&quot;http://github.com/rails/rails/commit/d6f7b7d35337b87cc1c419e47fae52bbfc3f371e)&quot;&gt;http://github.com/rails/rails/commit/d6f7b7d35337b87cc1c419e47fae52...&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So basically now the patch for master is useless. But if you use
the new attached patch anyway, you&amp;#8217;ll get a test specific to
symbolic index names, add_index will be again compatible to a long
forgotten time where its third argument was &quot;UNIQUE&quot;, and a tiny
and totally useless performance improvement which is just here
because that's the way I had coded the patch before the other patch
rendered it useless :D&lt;/p&gt;
&lt;p&gt;I think it's worth it for the test alone, for consistency with
2-3-stable.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-27T20:06:32+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-09-27T20:06:35+01:00</updated-at>
      <user-id type="integer">99481</user-id>
      <version type="integer">12</version>
      <user-name>&#201;tienne Barri&#233;</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Aaron Patterson</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15316</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>&#201;tienne,

I agree.  I &lt;3 tests.  I also &lt;3 consistency.  :-D

I've committed this patch.  Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;&amp;Eacute;tienne,&lt;/p&gt;
&lt;p&gt;I agree. I&lt;/p&gt;
&lt;p&gt;I've committed this patch. Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-28T18:08:55+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-09-28T18:08:59+01:00</updated-at>
      <user-id type="integer">15316</user-id>
      <version type="integer">13</version>
      <user-name>Aaron Patterson</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Aaron Patterson</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">15316</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-16T23:52:19+01:00</created-at>
      <creator-id type="integer">10433</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 3.0 patch &quot;rake db:migrate rails-2.3.8 bug&quot;
</diffable-attributes>
      <milestone-id type="integer">82855</milestone-id>
      <number type="integer">4891</number>
      <permalink>rails-238-dbmigrate-gives-undefined-method-length-for-any_indexsymbol</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable 3.0 migrations patch</tag>
      <title>Rails-2.3.8 db:migrate gives undefined method `length' for :any_index:Symbol</title>
      <updated-at type="datetime">2010-10-16T23:52:21+01:00</updated-at>
      <user-id type="integer">81551</user-id>
      <version type="integer">14</version>
      <user-name>Andrea Campi</user-name>
      <creator-name>James B. Byrne</creator-name>
      <assigned-user-name>Aaron Patterson</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4891</url>
      <milestone-title>2.3.10</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>315c05e14b57cba5e86ee3b1e9c500a122586643</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-18T15:41:05+01:00</created-at>
      <filename>0001-fix-add_index-with-a-symbol-4891.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">565327</id>
      <size type="integer">2417</size>
      <uploader-id type="integer">99481</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/565327/0001-fix-add_index-with-a-symbol-4891.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>c31f96cc7c06b902c7f0eb8a1ae4d69a31a33776</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-09-24T01:44:01+01:00</created-at>
      <filename>0001-fix-remove_index-with-a-symbol-4891.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">689019</id>
      <size type="integer">2780</size>
      <uploader-id type="integer">99481</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/689019/0001-fix-remove_index-with-a-symbol-4891.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>c0d320339ecdd8d7def42ca0a13eea4cd1de778e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-09-27T20:06:32+01:00</created-at>
      <filename>0001-test-add_index-and-remove_index-with-a-symbol-name-4.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">692838</id>
      <size type="integer">2960</size>
      <uploader-id type="integer">99481</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/692838/0001-test-add_index-and-remove_index-with-a-symbol-name-4.patch</url>
    </attachment>
  </attachments>
</ticket>
