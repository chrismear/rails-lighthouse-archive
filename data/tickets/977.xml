<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">1366</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-09-05T16:28:22+01:00</created-at>
  <creator-id type="integer">20389</creator-id>
  <milestone-due-on type="datetime">2009-01-31T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">977</number>
  <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
  <priority type="integer">28</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>actionpack enhancement helper patch tested</tag>
  <title>Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
  <updated-at type="datetime">2009-01-29T18:01:33+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">19</version>
  <user-name>Repository</user-name>
  <creator-name>Jon</creator-name>
  <assigned-user-name>Pratik</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
  <priority-name nil="true"></priority-name>
  <original-body>Returns a string of &lt;option&gt; tags, using options_for_select, but wraps them with &lt;optgroup&gt; tags.

Sample usage:
  labels = ['North America','Europe']
  groups = [['United States','Canada'], ['Denmark','Germany','France']]
  optgroups_with_options_for_select(labels,groups)
Possible output:
  &lt;optgroup label=&quot;North America&quot;&gt;
    &lt;option value=&quot;United States&quot;&gt;United States&lt;/option&gt;
    &lt;option value=&quot;Canada&quot;&gt;Canada&lt;/option&gt;
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;Europe&quot;&gt;
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;
    &lt;option value=&quot;Germany&quot;&gt;Germany&lt;/option&gt;
    &lt;option value=&quot;France&quot;&gt;France&lt;/option&gt;
  &lt;/optgroup&gt;</original-body>
  <latest-body>Returns a string of &lt;option&gt; tags, using options_for_select, but wraps them with &lt;optgroup&gt; tags.

Sample usage:
  labels = ['North America','Europe']
  groups = [['United States','Canada'], ['Denmark','Germany','France']]
  optgroups_with_options_for_select(labels,groups)
Possible output:
  &lt;optgroup label=&quot;North America&quot;&gt;
    &lt;option value=&quot;United States&quot;&gt;United States&lt;/option&gt;
    &lt;option value=&quot;Canada&quot;&gt;Canada&lt;/option&gt;
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;Europe&quot;&gt;
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;
    &lt;option value=&quot;Germany&quot;&gt;Germany&lt;/option&gt;
    &lt;option value=&quot;France&quot;&gt;France&lt;/option&gt;
  &lt;/optgroup&gt;</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Returns a string of tags, using options_for_select, but wraps
them with tags.&lt;/p&gt;
&lt;p&gt;Sample usage: labels = ['North America','Europe'] groups =
[['United States','Canada'], ['Denmark','Germany','France']]
optgroups_with_options_for_select(labels,groups) Possible
output:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;United States
Canada


Denmark
Germany
France
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Returns a string of `&lt;option&gt;` tags, using options_for_select, but wraps them with `&lt;optgroup&gt;` tags.

@@@ ruby
#Sample usage:
labels = ['North America','Europe']
groups = [['United States','Canada'], ['Denmark','Germany','France']]
optgroups_with_options_for_select(labels,groups)

#Possible output:
&lt;optgroup label=&quot;North America&quot;&gt;
  &lt;option value=&quot;United States&quot;&gt;United States&lt;/option&gt;
  &lt;option value=&quot;Canada&quot;&gt;Canada&lt;/option&gt;
&lt;/optgroup&gt;
&lt;optgroup label=&quot;Europe&quot;&gt;
  &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;
  &lt;option value=&quot;Germany&quot;&gt;Germany&lt;/option&gt;
  &lt;option value=&quot;France&quot;&gt;France&lt;/option&gt;
&lt;/optgroup&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Returns a string of &lt;code&gt;&amp;lt;option&amp;gt;&lt;/code&gt; tags, using
options_for_select, but wraps them with
&lt;code&gt;&amp;lt;optgroup&amp;gt;&lt;/code&gt; tags.&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
#Sample usage:
labels = ['North America','Europe']
groups = [['United States','Canada'], ['Denmark','Germany','France']]
optgroups_with_options_for_select(labels,groups)

#Possible output:
&amp;lt;optgroup label=&amp;quot;North America&amp;quot;&amp;gt;
  &amp;lt;option value=&amp;quot;United States&amp;quot;&amp;gt;United States&amp;lt;/option&amp;gt;
  &amp;lt;option value=&amp;quot;Canada&amp;quot;&amp;gt;Canada&amp;lt;/option&amp;gt;
&amp;lt;/optgroup&amp;gt;
&amp;lt;optgroup label=&amp;quot;Europe&amp;quot;&amp;gt;
  &amp;lt;option value=&amp;quot;Denmark&amp;quot;&amp;gt;Denmark&amp;lt;/option&amp;gt;
  &amp;lt;option value=&amp;quot;Germany&amp;quot;&amp;gt;Germany&amp;lt;/option&amp;gt;
  &amp;lt;option value=&amp;quot;France&amp;quot;&amp;gt;France&amp;lt;/option&amp;gt;
&amp;lt;/optgroup&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-05T16:28:22+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-05T21:03:25+01:00</updated-at>
      <user-id type="integer">20389</user-id>
      <version type="integer">1</version>
      <user-name>Jon</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1

I would like to see better naming:

@@@ ruby
groups = ['North America','Europe']
options = [, ]
grouped_options_for_select(groups, options)

# &quot;option_groups_for_select&quot; is also a good method name
@@@

And how about this:

@@@ ruby
grouped_options_for_select(
  'North America' =&gt; ['United States','Canada'],
  'Europe' =&gt; ['Denmark','Germany','France']
)
# =&gt; iterates over keys in alphabetical order (&quot;Europe&quot; would come first)
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;I would like to see better naming:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
groups = ['North America','Europe']
options = [, ]
grouped_options_for_select(groups, options)

# &amp;quot;option_groups_for_select&amp;quot; is also a good method name
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And how about this:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
grouped_options_for_select(
  'North America' =&amp;gt; ['United States','Canada'],
  'Europe' =&amp;gt; ['Denmark','Germany','France']
)
# =&amp;gt; iterates over keys in alphabetical order (&amp;quot;Europe&amp;quot; would come first)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-05T21:33:26+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-05T21:33:29+01:00</updated-at>
      <user-id type="integer">192</user-id>
      <version type="integer">2</version>
      <user-name>Mislav</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I ruined the 2nd line of my example by using cut instead of copy :/</body>
      <body-html>&lt;div&gt;&lt;p&gt;I ruined the 2nd line of my example by using cut instead of copy
:/&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-05T21:34:43+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-05T21:34:46+01:00</updated-at>
      <user-id type="integer">192</user-id>
      <version type="integer">3</version>
      <user-name>Mislav</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-05T22:09:53+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-05T22:09:58+01:00</updated-at>
      <user-id type="integer">2482</user-id>
      <version type="integer">4</version>
      <user-name>Scott Raymond</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I replied to some of Mislav's thoughts in the IRC channel but I'll repeat here.

I avoided the `options` argument name because it is often used in many other helpers to mean an option set of arguments that may be passed.  And I used the `labels` argument name because of the attribute in `&lt;optgroup label=&quot;Europe''&gt;`. I could easily budge on the `labels` one, but I personally think the `options` should be avoided. Note: `options_for_select` uses `container`.

And to your point about using a hash and iterating in alphabetical order: In my very first implementation of this helper, I needed the groups in a specific order (&quot;Mens, Womens, Children, Other&quot;). Using alphabetical sorting means you lose a good deal of control (although it's much cleaner on first blush).</body>
      <body-html>&lt;div&gt;&lt;p&gt;I replied to some of Mislav's thoughts in the IRC channel but
I'll repeat here.&lt;/p&gt;
&lt;p&gt;I avoided the &lt;code&gt;options&lt;/code&gt; argument name because it is
often used in many other helpers to mean an option set of arguments
that may be passed. And I used the &lt;code&gt;labels&lt;/code&gt; argument
name because of the attribute in &lt;code&gt;&amp;lt;optgroup
label=&quot;Europe''&amp;gt;&lt;/code&gt;. I could easily budge on the
&lt;code&gt;labels&lt;/code&gt; one, but I personally think the
&lt;code&gt;options&lt;/code&gt; should be avoided. Note:
&lt;code&gt;options_for_select&lt;/code&gt; uses &lt;code&gt;container&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And to your point about using a hash and iterating in
alphabetical order: In my very first implementation of this helper,
I needed the groups in a specific order (&quot;Mens, Womens, Children,
Other&quot;). Using alphabetical sorting means you lose a good deal of
control (although it's much cleaner on first blush).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-05T22:22:20+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-05T22:22:25+01:00</updated-at>
      <user-id type="integer">20389</user-id>
      <version type="integer">5</version>
      <user-name>Jon</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-06T16:10:55+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-06T16:10:59+01:00</updated-at>
      <user-id type="integer">11102</user-id>
      <version type="integer">6</version>
      <user-name>Yaroslav Markin</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-06T16:17:59+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-06T16:18:04+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">7</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Jon,

Re: hash argument and alphabetical order---I've only suggested that this could be an alternative to passing 2 arrays. Array arguments should be used when the user is in need of custom ordering.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jon,&lt;/p&gt;
&lt;p&gt;Re: hash argument and alphabetical order---I've only suggested
that this could be an alternative to passing 2 arrays. Array
arguments should be used when the user is in need of custom
ordering.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-08T01:08:30+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-08T01:08:43+01:00</updated-at>
      <user-id type="integer">192</user-id>
      <version type="integer">8</version>
      <user-name>Mislav</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>The two arrays required to be equal length is a bit of a no no for me, how about accepting:
@@@ ruby
labels = ['North America',]
groups = [
  ['North America',
    ['United States','Canada']],
  ['Europe',
    ['Denmark','Germany','France']]
]

grouped_options_for_select(labels,groups)
@@@

This accepts things in order and will keep them in order, ala Jon's requirements.

Code designed for this should be able to handle a hash too (`[[:a, :b]].each{|c| break c} == {:a =&gt; :b}.each{|c| break c}`), as per Mislav's ideas.

This also avoids the slightly icky `Error: Sizes don't match`, as this is now an impossible state to reach.

There is no basic issue with the idea, it's good, but needs some more work on the method signature, just does not feel railsy enough.

Any chance of an updated patch Jon?</body>
      <body-html>&lt;div&gt;&lt;p&gt;The two arrays required to be equal length is a bit of a no no
for me, how about accepting:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
labels = ['North America',]
groups = [
  ['North America',
    ['United States','Canada']],
  ['Europe',
    ['Denmark','Germany','France']]
]

grouped_options_for_select(labels,groups)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This accepts things in order and will keep them in order, ala
Jon's requirements.&lt;/p&gt;
&lt;p&gt;Code designed for this should be able to handle a hash too
(&lt;code&gt;[[:a, :b]].each{|c| break c} == {:a =&amp;gt; :b}.each{|c| break
c}&lt;/code&gt;), as per Mislav's ideas.&lt;/p&gt;
&lt;p&gt;This also avoids the slightly icky &lt;code&gt;Error: Sizes don't
match&lt;/code&gt;, as this is now an impossible state to reach.&lt;/p&gt;
&lt;p&gt;There is no basic issue with the idea, it's good, but needs some
more work on the method signature, just does not feel railsy
enough.&lt;/p&gt;
&lt;p&gt;Any chance of an updated patch Jon?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-08T09:49:15+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-08T09:55:04+01:00</updated-at>
      <user-id type="integer">28420</user-id>
      <version type="integer">9</version>
      <user-name>Tom Lea</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>1's example is wrong... should be

@@@ ruby
grouped_options = [
  ['North America',
    ['United States','Canada']],
  ['Europe',
    ['Denmark','Germany','France']]
]

grouped_options_for_select(grouped_options)
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;1's example is wrong... should be&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
grouped_options = [
  ['North America',
    ['United States','Canada']],
  ['Europe',
    ['Denmark','Germany','France']]
]

grouped_options_for_select(grouped_options)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-08T09:53:32+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-08T09:57:27+01:00</updated-at>
      <user-id type="integer">28420</user-id>
      <version type="integer">10</version>
      <user-name>Tom Lea</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Tom-

I made the changes you suggested.  I never liked that error at the beginning, but I didn't want to raise an exception either. Maybe I'm too nice?   :-D  

It now accepts either a nested Array or a Hash. 

I also changed the helper name to `grouped_options_for_select`.

Let me know if you guys have any other suggestions.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Tom-&lt;/p&gt;
&lt;p&gt;I made the changes you suggested. I never liked that error at
the beginning, but I didn't want to raise an exception either.
Maybe I'm too nice? :-D&lt;/p&gt;
&lt;p&gt;It now accepts either a nested Array or a Hash.&lt;/p&gt;
&lt;p&gt;I also changed the helper name to
&lt;code&gt;grouped_options_for_select&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let me know if you guys have any other suggestions.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-08T17:13:07+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-08T17:13:13+01:00</updated-at>
      <user-id type="integer">20389</user-id>
      <version type="integer">11</version>
      <user-name>Jon</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Further updated patch including better testing and improved documentation.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Further updated patch including better testing and improved
documentation.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-09T01:52:12+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- 
:title: &quot;[PATCH] Added optgroups_with_options_for_select helper to form_options_helper for wrapping option tags in optgroups.&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-09T01:52:19+01:00</updated-at>
      <user-id type="integer">20389</user-id>
      <version type="integer">12</version>
      <user-name>Jon</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>What i am using atm:

continents = [['Africa',['Norway','NO']]]
select_tag('country',option_groups_for_select(continents,'NO'))



  #continentes = [['Africa',['NA','Namibia'],['XX']...],...]
  def option_groups_for_select(collection,selected = nil)
    collection.inject('') do |options_for_select,group|
      group_label_string = group[0]
      options_for_select = &quot;&lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&gt;&quot;
      options_for_select += options_for_select(group[1..-1],selected)
      options_for_select += '&lt;/optgroup&gt;'
    end
  end</body>
      <body-html>&lt;div&gt;&lt;p&gt;What i am using atm:&lt;/p&gt;
&lt;p&gt;continents = [['Africa',['Norway','NO']]]
select_tag('country',option_groups_for_select(continents,'NO'))&lt;/p&gt;
&lt;p&gt;#continentes = [['Africa',['NA','Namibia'],['XX']...],...] def
option_groups_for_select(collection,selected = nil)&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;collection.inject('') do |options_for_select,group|
  group_label_string = group[0]
  options_for_select = &quot;&amp;lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&amp;gt;&quot;
  options_for_select += options_for_select(group[1..-1],selected)
  options_for_select += '&amp;lt;/optgroup&amp;gt;'
end
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-17T12:10:59+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: actionpack enhancement helper patch tested
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-17T12:11:04+01:00</updated-at>
      <user-id type="integer">32220</user-id>
      <version type="integer">13</version>
      <user-name>grosser</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>once again(weird formattting)...  
  

    #continentes = [['Africa',['NA','Namibia'],['XX']...],...]
    def option_groups_for_select(collection,selected = nil)
      collection.inject('') do |options_for_select,group|
        group_label_string = group[0]
        options_for_select = &quot;&lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&gt;&quot;
        options_for_select += options_for_select(group[1..-1],selected)
        options_for_select += '&lt;/optgroup&gt;'
      end
    end</body>
      <body-html>&lt;div&gt;&lt;p&gt;once again(weird formattting)...&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;#continentes = [['Africa',['NA','Namibia'],['XX']...],...]
def option_groups_for_select(collection,selected = nil)
  collection.inject('') do |options_for_select,group|
    group_label_string = group[0]
    options_for_select = &quot;&amp;lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&amp;gt;&quot;
    options_for_select += options_for_select(group[1..-1],selected)
    options_for_select += '&amp;lt;/optgroup&amp;gt;'
  end
end
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-17T12:12:28+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-09-17T12:12:32+01:00</updated-at>
      <user-id type="integer">32220</user-id>
      <version type="integer">14</version>
      <user-name>grosser</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>+1</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-03T21:09:57+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-10-03T21:10:01+01:00</updated-at>
      <user-id type="integer">6226</user-id>
      <version type="integer">15</version>
      <user-name>Sean Cribbs</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>There was a small errror in my above post:
    
    options_for_select = &quot;&lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&gt;&quot;
    
should be 
    
    options_for_select += &quot;&lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&gt;&quot;</body>
      <body-html>&lt;div&gt;&lt;p&gt;There was a small errror in my above post:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;options_for_select = &quot;&amp;lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&amp;gt;&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;should be&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;options_for_select += &quot;&amp;lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&amp;gt;&quot;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-04T08:02:08+01:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>[PATCH] Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2008-10-04T08:02:12+01:00</updated-at>
      <user-id type="integer">22740</user-id>
      <version type="integer">16</version>
      <user-name>grosser.michael+lighthouse (at gmail)</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-05T15:51:43+00:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- 
:title: &quot;[PATCH] Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.&quot;
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2009-01-05T15:51:46+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">17</version>
      <user-name>Pratik</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-05T17:02:57+00:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2009-01-05T17:02:59+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">18</version>
      <user-name>Pratik</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [8761663a68bd7ddd918f78fb3def4697784024f2]) Added grouped_options_for_select helper method for wrapping option tags in optgroups. [#977 state:resolved]

Signed-off-by: Pratik Naik &lt;pratiknaik@gmail.com&gt;
http://github.com/rails/rails/commit/8761663a68bd7ddd918f78fb3def4697784024f2</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [8761663a68bd7ddd918f78fb3def4697784024f2]) Added
grouped_options_for_select helper method for wrapping option tags
in optgroups. [&lt;a href=&quot;/projects/8994/tickets/977&quot; title=&quot;Ticket #977&quot;&gt;#977&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Pratik Naik &lt;a href=&quot;mailto:pratiknaik@gmail.com&quot;&gt;pratiknaik@gmail.com&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/8761663a68bd7ddd918f78fb3def4697784024f2&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-01-29T18:01:32+00:00</created-at>
      <creator-id type="integer">20389</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">977</number>
      <permalink>patch-added-optgroups_with_options_for_select-helper-to-form_options_helper-for-wrapping-option-tags-in-optgroups</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionpack enhancement helper patch tested</tag>
      <title>Added grouped_options_for_select helper to form_options_helper for wrapping option tags in optgroups.</title>
      <updated-at type="datetime">2009-01-29T18:01:33+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">19</version>
      <user-name>Repository</user-name>
      <creator-name>Jon</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/977</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>a620a90dd343ab6f0b086cfeed05600f8a3828b2</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-09-05T16:28:22+01:00</created-at>
      <filename>optgroups_with_options_for_select.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">44079</id>
      <size type="integer">8400</size>
      <uploader-id type="integer">20389</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/44079/optgroups_with_options_for_select.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>8a47e659e6f729e1c9a19bd801cfbc4e6d9f4b1f</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-09-08T17:13:07+01:00</created-at>
      <filename>optgroups_with_options_for_select.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">44454</id>
      <size type="integer">16194</size>
      <uploader-id type="integer">20389</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/44454/optgroups_with_options_for_select.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>acf1823371d4e07262b7e67f80ade1af66997b3a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-09-09T01:52:12+01:00</created-at>
      <filename>optgroups_with_options_for_select.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">44636</id>
      <size type="integer">20301</size>
      <uploader-id type="integer">20389</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/44636/optgroups_with_options_for_select.diff</url>
    </attachment>
  </attachments>
</ticket>
