<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">8406</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-01-14T02:21:37+00:00</created-at>
  <creator-id type="integer">43474</creator-id>
  <milestone-due-on type="datetime">2010-01-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">50064</milestone-id>
  <number type="integer">1756</number>
  <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2-3-stable activerecord foreign_key has_many patch primary_key</tag>
  <title>has_one with :foreign_key &amp; :primary_key bug</title>
  <updated-at type="datetime">2010-10-16T23:35:07+01:00</updated-at>
  <user-id type="integer">81551</user-id>
  <version type="integer">22</version>
  <user-name>Andrea Campi</user-name>
  <creator-name>gbp</creator-name>
  <assigned-user-name>Eloy Duran</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
  <milestone-title>2.3.6</milestone-title>
  <priority-name>High</priority-name>
  <original-body>Similar to #1663

has_one associations with :foreign_key and :primary_key options don't work as expected.

After saving the associations are being lost. The :foreign_key is being assigns to the id of the owner instead of using the provided :primary_key option.

Fix and unit test attached.</original-body>
  <latest-body>Similar to #1663

has_one associations with :foreign_key and :primary_key options don't work as expected.

After saving the associations are being lost. The :foreign_key is being assigns to the id of the owner instead of using the provided :primary_key option.

Fix and unit test attached.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Similar to &lt;a href=&quot;/projects/8994/tickets/1663&quot; title=&quot;Ticket #1663&quot;&gt;#1663&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;has_one associations with :foreign_key and :primary_key options
don't work as expected.&lt;/p&gt;
&lt;p&gt;After saving the associations are being lost. The :foreign_key
is being assigns to the id of the owner instead of using the
provided :primary_key option.&lt;/p&gt;
&lt;p&gt;Fix and unit test attached.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Similar to #1633

has_one associations with :foreign_key and :primary_key options don't work as expected.

After saving the associations are being lost. The :foreign_key is being assigns to the id of the owner instead of using the provided :primary_key option.

Fix and unit test attached.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Similar to &lt;a href=&quot;/projects/8994/tickets/1633&quot; title=&quot;Ticket #1633&quot;&gt;#1633&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;has_one associations with :foreign_key and :primary_key options
don't work as expected.&lt;/p&gt;
&lt;p&gt;After saving the associations are being lost. The :foreign_key
is being assigns to the id of the owner instead of using the
provided :primary_key option.&lt;/p&gt;
&lt;p&gt;Fix and unit test attached.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-14T02:21:37+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-01-14T09:27:24+00:00</updated-at>
      <user-id type="integer">43474</user-id>
      <version type="integer">1</version>
      <user-name>gbp</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I just ran into this same bug and this patch is incomplete. I will generate work on a test case and patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I just ran into this same bug and this patch is incomplete. I
will generate work on a test case and patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T06:19:09+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-02T06:19:14+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">2</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>ok, should be 

associations.rb

@@@ def has_one(association_id, options = {})
        if options[:through]
          reflection = create_has_one_through_reflection(association_id, options)
          association_accessor_methods(reflection, ActiveRecord::Associations::HasOneThroughAssociation)
        else
          reflection = create_has_one_reflection(association_id, options)

          ivar = &quot;@#{reflection.name}&quot;

          method_name = &quot;has_one_after_save_for_#{reflection.name}&quot;.to_sym
          define_method(method_name) do
            association = instance_variable_get(ivar) if instance_variable_defined?(ivar)
            
            primary_key = reflection.options[:primary_key] || :id
            if !association.nil? &amp;&amp; (new_record? || association.new_record? || association[reflection.primary_key_name] != send(primary_key))
              association[reflection.primary_key_name] = send(primary_key)
              association.save(true)
            end
          end
          after_save method_name

          add_single_associated_validation_callbacks(reflection.name) if options[:validate] == true
          association_accessor_methods(reflection, ActiveRecord::Associations::HasOneAssociation)
          association_constructor_method(:build,  reflection, ActiveRecord::Associations::HasOneAssociation)
          association_constructor_method(:create, reflection, ActiveRecord::Associations::HasOneAssociation)

          configure_dependency_for_has_one(reflection)
        end
      end
@@@

has_one_association.rb

@@@ def new_record(replace_existing)
        # Make sure we load the target first, if we plan on replacing the existing
        # instance. Otherwise, if the target has not previously been loaded
        # elsewhere, the instance we create will get orphaned.
        load_target if replace_existing
        record = @reflection.klass.send(:with_scope, :create =&gt; construct_scope[:create]) do
          yield @reflection
        end

        if replace_existing
          replace(record, true) 
        else
          puts &quot;test&quot;
          record[@reflection.primary_key_name] = @reflection.options.has_key?(:primary_key) ? @owner.send(@reflection.options[:primary_key]) : @owner.id unless @owner.new_record?
          self.target = record
        end

        record
      end
@@@

association_proxy.rb

@@@ def set_belongs_to_association_for(record)
        if @reflection.options[:as]
          record[&quot;#{@reflection.options[:as]}_id&quot;]   = @owner.id unless @owner.new_record?
          record[&quot;#{@reflection.options[:as]}_type&quot;] = @owner.class.base_class.name.to_s
        else
          record[@reflection.primary_key_name] = @reflection.options.has_key?(:primary_key) ? @owner.send(@reflection.options[:primary_key]) : @owner.id unless @owner.new_record?
        end
      end
@@@

Sorry I don't have a real patch, it's late and I'm tired.</body>
      <body-html>&lt;div&gt;&lt;p&gt;ok, should be&lt;/p&gt;
&lt;p&gt;associations.rb&lt;/p&gt;
&lt;p&gt;@@@ def has_one(association_id, options = {})&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    if options[:through]
      reflection = create_has_one_through_reflection(association_id, options)
      association_accessor_methods(reflection, ActiveRecord::Associations::HasOneThroughAssociation)
    else
      reflection = create_has_one_reflection(association_id, options)

      ivar = &quot;@#{reflection.name}&quot;

      method_name = &quot;has_one_after_save_for_#{reflection.name}&quot;.to_sym
      define_method(method_name) do
        association = instance_variable_get(ivar) if instance_variable_defined?(ivar)

        primary_key = reflection.options[:primary_key] || :id
        if !association.nil? &amp;amp;&amp;amp; (new_record? || association.new_record? || association[reflection.primary_key_name] != send(primary_key))
          association[reflection.primary_key_name] = send(primary_key)
          association.save(true)
        end
      end
      after_save method_name

      add_single_associated_validation_callbacks(reflection.name) if options[:validate] == true
      association_accessor_methods(reflection, ActiveRecord::Associations::HasOneAssociation)
      association_constructor_method(:build,  reflection, ActiveRecord::Associations::HasOneAssociation)
      association_constructor_method(:create, reflection, ActiveRecord::Associations::HasOneAssociation)

      configure_dependency_for_has_one(reflection)
    end
  end
&lt;/code&gt;
&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;

has_one_association.rb

@@@ def new_record(replace_existing)
        # Make sure we load the target first, if we plan on replacing the existing
        # instance. Otherwise, if the target has not previously been loaded
        # elsewhere, the instance we create will get orphaned.
        load_target if replace_existing
        record = @reflection.klass.send(:with_scope, :create =&amp;gt; construct_scope[:create]) do
          yield @reflection
        end

        if replace_existing
          replace(record, true) 
        else
          puts &amp;quot;test&amp;quot;
          record[@reflection.primary_key_name] = @reflection.options.has_key?(:primary_key) ? @owner.send(@reflection.options[:primary_key]) : @owner.id unless @owner.new_record?
          self.target = record
        end

        record
      end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;association_proxy.rb&lt;/p&gt;
&lt;p&gt;@@@ def set_belongs_to_association_for(record)&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    if @reflection.options[:as]
      record[&quot;#{@reflection.options[:as]}_id&quot;]   = @owner.id unless @owner.new_record?
      record[&quot;#{@reflection.options[:as]}_type&quot;] = @owner.class.base_class.name.to_s
    else
      record[@reflection.primary_key_name] = @reflection.options.has_key?(:primary_key) ? @owner.send(@reflection.options[:primary_key]) : @owner.id unless @owner.new_record?
    end
  end
&lt;/code&gt;
&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;

Sorry I don't have a real patch, it's late and I'm tired.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T07:39:53+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-02T07:39:56+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">3</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Ok, here is the fix including tests from graeme

http://github.com/johnsbrn/rails/commits/master</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, here is the fix including tests from graeme&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/johnsbrn/rails/commits/master&quot;&gt;http://github.com/johnsbrn/rails...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T20:39:47+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-02T20:39:51+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">4</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm a complete noob here so forgive me if I missed something.  I believe there is still a bug with respect to this fix.  Although the association works when referenced directly from an object, when the associations are loaded through an :include, they still reference the original primary key.

I changed association_preload.rb as described in the attached diff.

Is this something that can be added to the proposed fix or should I do something further?

Thanks,
Thomas</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm a complete noob here so forgive me if I missed something. I
believe there is still a bug with respect to this fix. Although the
association works when referenced directly from an object, when the
associations are loaded through an :include, they still reference
the original primary key.&lt;/p&gt;
&lt;p&gt;I changed association_preload.rb as described in the attached
diff.&lt;/p&gt;
&lt;p&gt;Is this something that can be added to the proposed fix or
should I do something further?&lt;/p&gt;
&lt;p&gt;Thanks, Thomas&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-17T23:38:25+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-17T23:38:27+00:00</updated-at>
      <user-id type="integer">47784</user-id>
      <version type="integer">5</version>
      <user-name>Thomas Shelton</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>If you can make a test case for it I will add it to my git repo. Not sure what the best way to get this back into the main repo though, maybe I should do a pull request?</body>
      <body-html>&lt;div&gt;&lt;p&gt;If you can make a test case for it I will add it to my git repo.
Not sure what the best way to get this back into the main repo
though, maybe I should do a pull request?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-17T23:45:50+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-17T23:45:52+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">6</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>just FYI - looks like this is already changed in edge, but the association isn't preloading for me. I'm working on a test case for it.

id_to_record_map, ids = construct_id_map(records, reflection.options[:primary_key])</body>
      <body-html>&lt;div&gt;&lt;p&gt;just FYI - looks like this is already changed in edge, but the
association isn't preloading for me. I'm working on a test case for
it.&lt;/p&gt;
&lt;p&gt;id_to_record_map, ids = construct_id_map(records,
reflection.options[:primary_key])&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-18T16:24:47+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-18T16:24:52+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">7</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>apparently my issue was related to http://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/1723-eager-load-of-has_one-through-with-conditions-on-the-through-table-fails</body>
      <body-html>&lt;div&gt;&lt;p&gt;apparently my issue was related to &lt;a href=&quot;http://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/1723-eager-load-of-has_one-through-with-conditions-on-the-through-table-fails&quot;&gt;
http://rails.lighthouseapp.com/p...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-18T16:32:04+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-18T16:32:08+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">8</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Ok, everything is good on edge rails with include, but I added a test case to the git repo anyway.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, everything is good on edge rails with include, but I added a
test case to the git repo anyway.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-18T18:39:24+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-18T18:39:26+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">9</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>For the record: original problem still exists. The tests in my patch still fail on edge rails.</body>
      <body-html>&lt;div&gt;&lt;p&gt;For the record: original problem still exists. The tests in my
patch still fail on edge rails.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-18T18:53:43+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-18T18:53:48+00:00</updated-at>
      <user-id type="integer">43474</user-id>
      <version type="integer">10</version>
      <user-name>gbp</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>That's really strange because
id_to_record_map, ids = construct_id_map(records, reflection.options[:primary_key])
is functionally equivalent to your patch. You didn't include the failing test, can you provide it?</body>
      <body-html>&lt;div&gt;&lt;p&gt;That's really strange because id_to_record_map, ids =
construct_id_map(records, reflection.options[:primary_key]) is
functionally equivalent to your patch. You didn't include the
failing test, can you provide it?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-19T18:07:56+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-19T18:08:01+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">11</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>My problem resides in associations.rb (currently Line 906) - not association_preload.rb. On edge rails the test provided in my original patch do fail without the patch to associations.rb being applied.</body>
      <body-html>&lt;div&gt;&lt;p&gt;My problem resides in associations.rb (currently Line 906) - not
association_preload.rb. On edge rails the test provided in my
original patch do fail without the patch to associations.rb being
applied.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-25T00:24:44+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-25T00:24:48+00:00</updated-at>
      <user-id type="integer">43474</user-id>
      <version type="integer">12</version>
      <user-name>gbp</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Graeme, your tests pass on my fork. Thomas, I'd like to include your issue as well, but I need a failing test first.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Graeme, your tests pass on my fork. Thomas, I'd like to include
your issue as well, but I need a failing test first.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-25T04:35:17+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-02-25T04:35:20+00:00</updated-at>
      <user-id type="integer">29162</user-id>
      <version type="integer">13</version>
      <user-name>Brian Johnson</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Updated patch for rails 2.3.2</body>
      <body-html>&lt;div&gt;&lt;p&gt;Updated patch for rails 2.3.2&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-17T11:38:59+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-03-17T11:39:05+00:00</updated-at>
      <user-id type="integer">43474</user-id>
      <version type="integer">14</version>
      <user-name>gbp</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-17T18:06:07+00:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-03-17T18:06:11+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">15</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Can you take a look at this eloy?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can you take a look at this eloy?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-09T09:35:43+01:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-06-09T09:35:49+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">16</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>I have verified and applied this patch on my branch of 2-3-stable, which Micheal will look at and merge in before 2.3.4.

http://github.com/alloy/rails/commit/e5de99082a7d151a70e8d48b96471f9fe39d8a81

Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have verified and applied this patch on my branch of
2-3-stable, which Micheal will look at and merge in before
2.3.4.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/alloy/rails/commit/e5de99082a7d151a70e8d48b96471f9fe39d8a81&quot;&gt;
http://github.com/alloy/rails/commit/e5de99082a7d151a70e8d48b96471f...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-12T12:38:32+01:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-07-12T12:38:38+01:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">17</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>[milestone:id#50064 bulk edit command]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[milestone:id#50064 bulk edit command]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-11T23:04:34+01:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 41987
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-09-11T23:04:34+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">18</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [a070873771ebede9097735f07fc40720dce89c46]) Fix has_one with foreign_key and primary_key association bug which caused the associated object being lost when saving the owner. [#1756 state:resolved]

Mixed in a bit from patch by ransom-briggs. [#2813 state:resolved]

Signed-off-by: Eloy Duran &lt;eloy.de.enige@gmail.com&gt;
http://github.com/rails/rails/commit/a070873771ebede9097735f07fc40720dce89c46</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/a070873771ebede9097735f07fc40720dce89c46&quot;
title=
&quot;Changeset [a070873771ebede9097735f07fc40720dce89c46]&quot;&gt;[a070873771ebede9097735f07fc40720dce89c46]&lt;/a&gt;)
Fix has_one with foreign_key and primary_key association bug which
caused the associated object being lost when saving the owner.
[&lt;a href=&quot;/projects/8994/tickets/1756&quot; title=
&quot;Ticket #1756&quot;&gt;#1756&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Mixed in a bit from patch by ransom-briggs. [&lt;a href=
&quot;/projects/8994/tickets/2813&quot; title=&quot;Ticket #2813&quot;&gt;#2813&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Eloy Duran &lt;a href=
&quot;mailto:eloy.de.enige@gmail.com&quot;&gt;eloy.de.enige@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/a070873771ebede9097735f07fc40720dce89c46&quot;&gt;
http://github.com/rails/rails/commit/a070873771ebede9097735f07fc407...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-09-13T02:33:31+01:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-09-13T02:33:35+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">19</version>
      <user-name>Repository</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [c01be9de322ba846923340e41e69821d01541610]) Fix has_one with foreign_key and primary_key association bug which caused the associated object being lost when saving the owner. [#1756 state:resolved]

Mixed in a bit from patch by ransom-briggs. [#2813 state:resolved]

Signed-off-by: Eloy Duran &lt;eloy.de.enige@gmail.com&gt;
http://github.com/rails/rails/commit/c01be9de322ba846923340e41e69821d01541610</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/c01be9de322ba846923340e41e69821d01541610&quot;
title=
&quot;Changeset [c01be9de322ba846923340e41e69821d01541610]&quot;&gt;[c01be9de322ba846923340e41e69821d01541610]&lt;/a&gt;)
Fix has_one with foreign_key and primary_key association bug which
caused the associated object being lost when saving the owner.
[&lt;a href=&quot;/projects/8994/tickets/1756&quot; title=
&quot;Ticket #1756&quot;&gt;#1756&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Mixed in a bit from patch by ransom-briggs. [&lt;a href=
&quot;/projects/8994/tickets/2813&quot; title=&quot;Ticket #2813&quot;&gt;#2813&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Eloy Duran &lt;a&gt;eloy.de.enige@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/c01be9de322ba846923340e41e69821d01541610&quot;&gt;
http://github.com/rails/rails/commit/c01be9de322ba846923340e41e6982...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-09-13T02:33:46+01:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord foreign_key patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2009-09-13T02:33:51+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">20</version>
      <user-name>Repository</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Similar to #1633 which is still a bug in 2.3.8
has_many association.create doesn't set the new record fk correctly when the association pk is designated with :primary_key</body>
      <body-html>&lt;div&gt;&lt;p&gt;Similar to &lt;a href=&quot;/projects/8994/tickets/1633&quot; title=
&quot;Ticket #1633&quot;&gt;#1633&lt;/a&gt; which is still a bug in 2.3.8&lt;br&gt;
has_many association.create doesn't set the new record fk correctly
when the association pk is designated with :primary_key&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-17T09:12:12+01:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord foreign_key patch primary_key
:priority: 0
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3.10 2.3.8 activerecord foreign_key has_many patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2010-09-17T09:12:13+01:00</updated-at>
      <user-id type="integer">92422</user-id>
      <version type="integer">21</version>
      <user-name>tribalvibes</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-16T23:35:03+01:00</created-at>
      <creator-id type="integer">43474</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.10 2.3.8 activerecord foreign_key has_many patch primary_key
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">1756</number>
      <permalink>has_one-with-foreign_key-primary_key-bug</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2-3-stable activerecord foreign_key has_many patch primary_key</tag>
      <title>has_one with :foreign_key &amp; :primary_key bug</title>
      <updated-at type="datetime">2010-10-16T23:35:07+01:00</updated-at>
      <user-id type="integer">81551</user-id>
      <version type="integer">22</version>
      <user-name>Andrea Campi</user-name>
      <creator-name>gbp</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1756</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name>High</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>6f842d1fc01b2a174bdc95dc8a68491ac23b844b</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-01-14T02:21:37+00:00</created-at>
      <filename>has_one_foreign_and_primary_keys_bug.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">78156</id>
      <size type="integer">4724</size>
      <uploader-id type="integer">43474</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/78156/has_one_foreign_and_primary_keys_bug.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>1c607e6e6c40769840716ca6846b62747a518282</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-17T23:38:25+00:00</created-at>
      <filename>association_preload.rb.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">89909</id>
      <size type="integer">272</size>
      <uploader-id type="integer">47784</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/89909/association_preload.rb.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>0b8ca69a27e8fb10b683f663483e60f09c208f4c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-17T11:38:59+00:00</created-at>
      <filename>has_one_foreign_and_primary_keys_bug.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">100658</id>
      <size type="integer">5224</size>
      <uploader-id type="integer">43474</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/100658/has_one_foreign_and_primary_keys_bug.diff</url>
    </attachment>
  </attachments>
</ticket>
