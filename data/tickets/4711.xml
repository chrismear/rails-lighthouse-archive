<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-01-04T16:24:47+00:00</created-at>
  <creator-id type="integer">83562</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4711</number>
  <permalink>patch-rails-3-fields_for-helper-doesnt-work-with-association-proxy-objects</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>associations fields_for rails3</tag>
  <title>[PATCH] Rails 3: fields_for helper doesn't work with association proxy objects</title>
  <updated-at type="datetime">2011-03-26T02:46:34+00:00</updated-at>
  <user-id type="integer">142823</user-id>
  <version type="integer">5</version>
  <user-name>bingbing</user-name>
  <creator-name>Paul Rosania</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4711</url>
  <priority-name nil="true"></priority-name>
  <original-body>[Tested against latest Rails 3 edge.]

Mongoid uses association proxy objects.  It overrides #nil? =&gt; false when the association is missing.  However since it uses proxy objects, !!assocation is always true.

This patch changes the association nil test to call assocation.nil? rather than use implicit coercion of the variable.</original-body>
  <latest-body>[Tested against latest Rails 3 edge.]

Mongoid uses association proxy objects.  It overrides #nil? =&gt; false when the association is missing.  However since it uses proxy objects, !!assocation is always true.

This patch changes the association nil test to call assocation.nil? rather than use implicit coercion of the variable.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;[Tested against latest Rails 3 edge.]&lt;/p&gt;
&lt;p&gt;Mongoid uses association proxy objects. It overrides #nil? =&amp;gt;
false when the association is missing. However since it uses proxy
objects, !!assocation is always true.&lt;/p&gt;
&lt;p&gt;This patch changes the association nil test to call
assocation.nil? rather than use implicit coercion of the
variable.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[Tested against latest Rails 3 edge.]

Mongoid uses association proxy objects.  It overrides #nil? =&gt; false when the association is missing.  However since it uses proxy objects, !!assocation is always true.

This patch changes the association nil test to call assocation.nil? rather than use implicit coercion of the variable.</body>
      <body-html>&lt;div&gt;&lt;p&gt;[Tested against latest Rails 3 edge.]&lt;/p&gt;
&lt;p&gt;Mongoid uses association proxy objects. It overrides #nil? =&amp;gt;
false when the association is missing. However since it uses proxy
objects, !!assocation is always true.&lt;/p&gt;
&lt;p&gt;This patch changes the association nil test to call
assocation.nil? rather than use implicit coercion of the
variable.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-27T01:14:10+01:00</created-at>
      <creator-id type="integer">83562</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4711</number>
      <permalink>patch-rails-3-fields_for-helper-doesnt-work-with-association-proxy-objects</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>associations fields_for rails3</tag>
      <title>[PATCH] Rails 3: fields_for helper doesn't work with association proxy objects</title>
      <updated-at type="datetime">2010-05-27T01:14:16+01:00</updated-at>
      <user-id type="integer">83562</user-id>
      <version type="integer">1</version>
      <user-name>Paul Rosania</user-name>
      <creator-name>Paul Rosania</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4711</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>These proxy objects don't follow correct ruby semantics and I'm not entirely sure that we should take the performance hit to work around that bug.  There are bound to be other places where we use this form and we're not going to fix all of them.</body>
      <body-html>&lt;div&gt;&lt;p&gt;These proxy objects don't follow correct ruby semantics and I'm
not entirely sure that we should take the performance hit to work
around that bug. There are bound to be other places where we use
this form and we're not going to fix all of them.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-29T02:38:33+01:00</created-at>
      <creator-id type="integer">83562</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4711</number>
      <permalink>patch-rails-3-fields_for-helper-doesnt-work-with-association-proxy-objects</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>associations fields_for rails3</tag>
      <title>[PATCH] Rails 3: fields_for helper doesn't work with association proxy objects</title>
      <updated-at type="datetime">2010-05-29T02:38:38+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">2</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Paul Rosania</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4711</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>case, the &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com&quot;&gt;rolex watches&lt;/a&gt;&lt;/b&gt; watch will be confiscated &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com/watches/chopard-imperiale-steel-black-mens-watch-37-8209-7154.html&quot;&gt;Chopard Chopard Imperiale Steel Black Mens 37/8209 For Sale&lt;/a&gt;&lt;/b&gt; by the Service Center. &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com/collection/movado-vizio.html&quot;&gt;Movado replica watches Vizio&lt;/a&gt;&lt;/b&gt; In addition, if after &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com/watches/longines-evidenza-mens-watch-l2-642-8-51-2-5735.html&quot;&gt;Longines Evidenza Mens L2.642.8.51.2&lt;/a&gt;&lt;/b&gt; market accessories  &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com/watches/iwc-ingenieur-midsize-steel-unisex-watch-4515-03-293.html&quot;&gt;IWC Ingenieur IWC Ingenieur Midsize Steel Unisex 4515-03&lt;/a&gt;&lt;/b&gt;  &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com/collection/replica-blancpain.html&quot;&gt;replica Blancpain&lt;/a&gt;&lt;/b&gt;  &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com&quot;&gt;replica rolex watches&lt;/a&gt;&lt;/b&gt;  &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com&quot;&gt;cheap replica rolex&lt;/a&gt;&lt;/b&gt;  &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com&quot;&gt;high rolex watches&lt;/a&gt;&lt;/b&gt;  &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com/watches/seiko-coutura-diamond-mother-of-pearl-ladies-watch-suk011-3470.html&quot;&gt;Seiko Coutura Seiko Coutura Diamond Mother-of-Pearl Ladies SUK011&lt;/a&gt;&lt;/b&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;case, the &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com&quot;&gt;rolex
watches&lt;/a&gt;&lt;/b&gt; watch will be confiscated &lt;b&gt;&lt;a href=
&quot;http://www.watchesreplication.com/watches/chopard-imperiale-steel-black-mens-watch-37-8209-7154.html&quot;&gt;
Chopard Chopard Imperiale Steel Black Mens 37/8209 For Sale&lt;/a&gt;&lt;/b&gt;
by the Service Center. &lt;b&gt;&lt;a href=
&quot;http://www.watchesreplication.com/collection/movado-vizio.html&quot;&gt;Movado
replica watches Vizio&lt;/a&gt;&lt;/b&gt; In addition, if after &lt;b&gt;&lt;a href=
&quot;http://www.watchesreplication.com/watches/longines-evidenza-mens-watch-l2-642-8-51-2-5735.html&quot;&gt;
Longines Evidenza Mens L2.642.8.51.2&lt;/a&gt;&lt;/b&gt; market accessories
&lt;b&gt;&lt;a href=
&quot;http://www.watchesreplication.com/watches/iwc-ingenieur-midsize-steel-unisex-watch-4515-03-293.html&quot;&gt;
IWC Ingenieur IWC Ingenieur Midsize Steel Unisex 4515-03&lt;/a&gt;&lt;/b&gt;
&lt;b&gt;&lt;a href=
&quot;http://www.watchesreplication.com/collection/replica-blancpain.html&quot;&gt;
replica Blancpain&lt;/a&gt;&lt;/b&gt; &lt;b&gt;&lt;a href=
&quot;http://www.watchesreplication.com&quot;&gt;replica rolex watches&lt;/a&gt;&lt;/b&gt;
&lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com&quot;&gt;cheap replica
rolex&lt;/a&gt;&lt;/b&gt; &lt;b&gt;&lt;a href=&quot;http://www.watchesreplication.com&quot;&gt;high
rolex watches&lt;/a&gt;&lt;/b&gt; &lt;b&gt;&lt;a href=
&quot;http://www.watchesreplication.com/watches/seiko-coutura-diamond-mother-of-pearl-ladies-watch-suk011-3470.html&quot;&gt;
Seiko Coutura Seiko Coutura Diamond Mother-of-Pearl Ladies
SUK011&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-19T05:54:17+01:00</created-at>
      <creator-id type="integer">83562</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4711</number>
      <permalink>patch-rails-3-fields_for-helper-doesnt-work-with-association-proxy-objects</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>associations fields_for rails3</tag>
      <title>[PATCH] Rails 3: fields_for helper doesn't work with association proxy objects</title>
      <updated-at type="datetime">2010-07-19T07:05:05+01:00</updated-at>
      <user-id type="integer">107771</user-id>
      <version type="integer">3</version>
      <user-name>zhuzhu</user-name>
      <creator-name>Paul Rosania</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4711</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl
jerseys&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-04T09:24:31+00:00</created-at>
      <creator-id type="integer">83562</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4711</number>
      <permalink>patch-rails-3-fields_for-helper-doesnt-work-with-association-proxy-objects</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>associations fields_for rails3</tag>
      <title>[PATCH] Rails 3: fields_for helper doesn't work with association proxy objects</title>
      <updated-at type="datetime">2011-01-04T16:24:47+00:00</updated-at>
      <user-id type="integer">131088</user-id>
      <version type="integer">4</version>
      <user-name>icooky</user-name>
      <creator-name>Paul Rosania</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4711</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton watches&lt;/a&gt;&lt;/b&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://www.watcheseshop.com/&quot;&gt;louis vuitton
watches&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-26T02:15:13+00:00</created-at>
      <creator-id type="integer">83562</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4711</number>
      <permalink>patch-rails-3-fields_for-helper-doesnt-work-with-association-proxy-objects</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>associations fields_for rails3</tag>
      <title>[PATCH] Rails 3: fields_for helper doesn't work with association proxy objects</title>
      <updated-at type="datetime">2011-03-26T02:46:34+00:00</updated-at>
      <user-id type="integer">142823</user-id>
      <version type="integer">5</version>
      <user-name>bingbing</user-name>
      <creator-name>Paul Rosania</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4711</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>959ee91bc30b30e1163f138b88211b9ce62cc8de</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-27T01:14:11+01:00</created-at>
      <filename>fields_for_patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">536284</id>
      <size type="integer">998</size>
      <uploader-id type="integer">83562</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/536284/fields_for_patch.diff</url>
    </attachment>
  </attachments>
</ticket>
