<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">40272</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-09-07T11:36:04+01:00</created-at>
  <creator-id type="integer">19078</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5570</number>
  <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>3.0 caching logging</tag>
  <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
  <updated-at type="datetime">2011-05-05T02:58:58+01:00</updated-at>
  <user-id type="integer">148049</user-id>
  <version type="integer">15</version>
  <user-name>af001</user-name>
  <creator-name>Steve Purcell</creator-name>
  <assigned-user-name>Santiago Pastorino</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
  <priority-name>Low</priority-name>
  <original-body>Given a (reasonable) fragment path such as:

    views/localhost:3000/action?date=2010-08-23+15%3A30%3A00

Rails reports the following error:

    Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: malformed format string - %A

Judging by the code in fragment.rb, it looks like the key is passed to the instrumenter as part of the payload -- should the key perhaps be escaped somehow before handing it to the instrumenter, or is it incorrect that the instrumenter is using the payload in a printf way?</original-body>
  <latest-body>Given a (reasonable) fragment path such as:

    views/localhost:3000/action?date=2010-08-23+15%3A30%3A00

Rails reports the following error:

    Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: malformed format string - %A

Judging by the code in fragment.rb, it looks like the key is passed to the instrumenter as part of the payload -- should the key perhaps be escaped somehow before handing it to the instrumenter, or is it incorrect that the instrumenter is using the payload in a printf way?</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Given a (reasonable) fragment path such as:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;views/localhost:3000/action?date=2010-08-23+15%3A30%3A00&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Rails reports the following error:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: malformed format string - %A&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Judging by the code in fragment.rb, it looks like the key is
passed to the instrumenter as part of the payload -- should the key
perhaps be escaped somehow before handing it to the instrumenter,
or is it incorrect that the instrumenter is using the payload in a
printf way?&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Given a (reasonable) fragment path such as:

    views/localhost:3000/action?date=2010-08-23+15%3A30%3A00

Rails reports the following error:

    Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: malformed format string - %A

Judging by the code in fragment.rb, it looks like the key is passed to the instrumenter as part of the payload -- should the key perhaps be escaped somehow before handing it to the instrumenter, or is it incorrect that the instrumenter is using the payload in a printf way?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Given a (reasonable) fragment path such as:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;views/localhost:3000/action?date=2010-08-23+15%3A30%3A00&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Rails reports the following error:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: malformed format string - %A&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Judging by the code in fragment.rb, it looks like the key is
passed to the instrumenter as part of the payload -- should the key
perhaps be escaped somehow before handing it to the instrumenter,
or is it incorrect that the instrumenter is using the payload in a
printf way?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-07T11:36:04+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-07T11:36:05+01:00</updated-at>
      <user-id type="integer">19078</user-id>
      <version type="integer">1</version>
      <user-name>Steve Purcell</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Could you please provide the code that causes this issue?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you please provide the code that causes this issue?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-07T12:37:28+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-07T12:37:32+01:00</updated-at>
      <user-id type="integer">65050</user-id>
      <version type="integer">2</version>
      <user-name>David Trasbo</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Sure.

Example view code would look like this:

    cache(:foo =&gt; &quot;key with spaces&quot;) do
      ... render something ...
    end

where #cache is presumably ActionView::Helpers::CacheHelper#cache

-Steve</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sure.&lt;/p&gt;
&lt;p&gt;Example view code would look like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;cache(:foo =&amp;gt; &quot;key with spaces&quot;) do
  ... render something ...
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;where #cache is presumably
ActionView::Helpers::CacheHelper#cache&lt;/p&gt;
&lt;p&gt;-Steve&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-07T13:27:54+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-07T13:27:57+01:00</updated-at>
      <user-id type="integer">19078</user-id>
      <version type="integer">3</version>
      <user-name>Steve Purcell</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue is gone in Rails master:

Warmup:

@@@
Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-20 20:21:45 +0200
  Processing by PeopleController#index as HTML
Exist fragment? views/localhost:3000/people?foo=key+with+spaces (0.1ms)
Write fragment views/localhost:3000/people?foo=key+with+spaces (3.4ms)
Rendered people/index.html.erb within layouts/application (6.6ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/prototype.js?1285006555] miss
cache: [GET /javascripts/dragdrop.js?1285006555] miss
cache: [GET /javascripts/effects.js?1285006555] miss
cache: [GET /javascripts/controls.js?1285006555] miss
cache: [GET /javascripts/rails.js?1285006555] miss
cache: [GET /javascripts/application.js?1285006555] miss
cache: [GET /favicon.ico] miss
cache: [GET /people] miss
@@@

After warmup:

@@@
Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-20 20:22:21 +0200
  Processing by PeopleController#index as HTML
Exist fragment? views/localhost:3000/people?foo=key+with+spaces (0.2ms)
Read fragment views/localhost:3000/people?foo=key+with+spaces (0.0ms)
Rendered people/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/prototype.js?1285006555] miss
cache: [GET /javascripts/effects.js?1285006555] miss
cache: [GET /javascripts/dragdrop.js?1285006555] miss
cache: [GET /javascripts/controls.js?1285006555] miss
cache: [GET /javascripts/rails.js?1285006555] miss
cache: [GET /javascripts/application.js?1285006555] miss
cache: [GET /favicon.ico] miss
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue is gone in Rails master:&lt;/p&gt;
&lt;p&gt;Warmup:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-20 20:21:45 +0200
  Processing by PeopleController#index as HTML
Exist fragment? views/localhost:3000/people?foo=key+with+spaces (0.1ms)
Write fragment views/localhost:3000/people?foo=key+with+spaces (3.4ms)
Rendered people/index.html.erb within layouts/application (6.6ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/prototype.js?1285006555] miss
cache: [GET /javascripts/dragdrop.js?1285006555] miss
cache: [GET /javascripts/effects.js?1285006555] miss
cache: [GET /javascripts/controls.js?1285006555] miss
cache: [GET /javascripts/rails.js?1285006555] miss
cache: [GET /javascripts/application.js?1285006555] miss
cache: [GET /favicon.ico] miss
cache: [GET /people] miss&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;After warmup:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-20 20:22:21 +0200
  Processing by PeopleController#index as HTML
Exist fragment? views/localhost:3000/people?foo=key+with+spaces (0.2ms)
Read fragment views/localhost:3000/people?foo=key+with+spaces (0.0ms)
Rendered people/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/prototype.js?1285006555] miss
cache: [GET /javascripts/effects.js?1285006555] miss
cache: [GET /javascripts/dragdrop.js?1285006555] miss
cache: [GET /javascripts/controls.js?1285006555] miss
cache: [GET /javascripts/rails.js?1285006555] miss
cache: [GET /javascripts/application.js?1285006555] miss
cache: [GET /favicon.ico] miss&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-20T19:25:17+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-20T19:25:18+01:00</updated-at>
      <user-id type="integer">65050</user-id>
      <version type="integer">4</version>
      <user-name>David Trasbo</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hmm, I think that the example given should have used &quot;key:with:colons&quot; rather than &quot;key with spaces&quot;, since it looks like the problematic &quot;%3A&quot; was the result of url-escaping colons, not spaces -- sorry.

David: in the light of that mistake on my part, you might want to double-check that it's indeed working fine in Rails Master.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hmm, I think that the example given should have used
&quot;key:with:colons&quot; rather than &quot;key with spaces&quot;, since it looks
like the problematic &quot;%3A&quot; was the result of url-escaping colons,
not spaces -- sorry.&lt;/p&gt;
&lt;p&gt;David: in the light of that mistake on my part, you might want
to double-check that it's indeed working fine in Rails Master.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-20T20:41:43+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-20T20:41:45+01:00</updated-at>
      <user-id type="integer">19078</user-id>
      <version type="integer">5</version>
      <user-name>Steve Purcell</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Steve,

Ah, ok. No problem. Reopening this and putting it on my follow-up list. Will most likely have a look at this again tomorrow.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Steve,&lt;/p&gt;
&lt;p&gt;Ah, ok. No problem. Reopening this and putting it on my
follow-up list. Will most likely have a look at this again
tomorrow.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-20T20:44:37+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-20T20:44:39+01:00</updated-at>
      <user-id type="integer">65050</user-id>
      <version type="integer">6</version>
      <user-name>David Trasbo</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>You're right, Steve! Was able to duplicate this issue on master:

Warmup:

@@@
Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-21 07:07:24 +0200
  Processing by PeopleController#index as HTML
Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: too few arguments
Could not log &quot;write_fragment.action_controller&quot; event. ArgumentError: too few arguments
Rendered people/index.html.erb within layouts/application (6.8ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/prototype.js?1285045419] miss
cache: [GET /javascripts/effects.js?1285045419] miss
cache: [GET /javascripts/dragdrop.js?1285045419] miss
cache: [GET /javascripts/controls.js?1285045419] miss
cache: [GET /javascripts/rails.js?1285045419] miss
cache: [GET /javascripts/application.js?1285045419] miss
cache: [GET /favicon.ico] miss
cache: [GET /people] miss
@@@

After warmup:

@@@
Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-21 07:07:41 +0200
  Processing by PeopleController#index as HTML
Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: too few arguments
Could not log &quot;read_fragment.action_controller&quot; event. ArgumentError: too few arguments
Rendered people/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/dragdrop.js?1285045419] miss
cache: [GET /javascripts/effects.js?1285045419] miss
cache: [GET /javascripts/prototype.js?1285045419] miss
cache: [GET /javascripts/controls.js?1285045419] miss
cache: [GET /javascripts/rails.js?1285045419] miss
cache: [GET /javascripts/application.js?1285045419] miss
@@@

I might investigate how to solve this later today.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You're right, Steve! Was able to duplicate this issue on
master:&lt;/p&gt;
&lt;p&gt;Warmup:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-21 07:07:24 +0200
  Processing by PeopleController#index as HTML
Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: too few arguments
Could not log &quot;write_fragment.action_controller&quot; event. ArgumentError: too few arguments
Rendered people/index.html.erb within layouts/application (6.8ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/prototype.js?1285045419] miss
cache: [GET /javascripts/effects.js?1285045419] miss
cache: [GET /javascripts/dragdrop.js?1285045419] miss
cache: [GET /javascripts/controls.js?1285045419] miss
cache: [GET /javascripts/rails.js?1285045419] miss
cache: [GET /javascripts/application.js?1285045419] miss
cache: [GET /favicon.ico] miss
cache: [GET /people] miss&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;After warmup:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Started GET &quot;/people&quot; for 127.0.0.1 at 2010-09-21 07:07:41 +0200
  Processing by PeopleController#index as HTML
Could not log &quot;exist_fragment?.action_controller&quot; event. ArgumentError: too few arguments
Could not log &quot;read_fragment.action_controller&quot; event. ArgumentError: too few arguments
Rendered people/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
cache: [GET /javascripts/dragdrop.js?1285045419] miss
cache: [GET /javascripts/effects.js?1285045419] miss
cache: [GET /javascripts/prototype.js?1285045419] miss
cache: [GET /javascripts/controls.js?1285045419] miss
cache: [GET /javascripts/rails.js?1285045419] miss
cache: [GET /javascripts/application.js?1285045419] miss&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I might investigate how to solve this later today.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-21T06:10:21+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-21T06:10:26+01:00</updated-at>
      <user-id type="integer">65050</user-id>
      <version type="integer">7</version>
      <user-name>David Trasbo</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-21T09:23:17+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-21T09:23:19+01:00</updated-at>
      <user-id type="integer">86902</user-id>
      <version type="integer">8</version>
      <user-name>Marjan Krekoten'</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Marjon,

+1 for the fix, but -1 for the tests. I think you should make a separate test for percentage signs, to make sure people know they're there for a reason.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Marjon,&lt;/p&gt;
&lt;p&gt;+1 for the fix, but -1 for the tests. I think you should make a
separate test for percentage signs, to make sure people know
they're there for a reason.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-22T15:04:17+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-22T15:04:20+01:00</updated-at>
      <user-id type="integer">65050</user-id>
      <version type="integer">9</version>
      <user-name>David Trasbo</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Ok, I'll fix tests soon. Thx for response.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, I'll fix tests soon. Thx for response.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-22T15:20:24+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-22T15:20:29+01:00</updated-at>
      <user-id type="integer">86902</user-id>
      <version type="integer">10</version>
      <user-name>Marjan Krekoten'</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-22T21:20:49+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-22T21:20:53+01:00</updated-at>
      <user-id type="integer">86902</user-id>
      <version type="integer">11</version>
      <user-name>Marjan Krekoten'</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [8639c10a40604cee2f3d412470c2960712fdc809]) Fix logging when cache key contains % sign [#5570 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/8639c10a40604cee2f3d412470c2960712fdc809</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/8639c10a40604cee2f3d412470c2960712fdc809&quot;
title=
&quot;Changeset [8639c10a40604cee2f3d412470c2960712fdc809]&quot;&gt;[8639c10a40604cee2f3d412470c2960712fdc809]&lt;/a&gt;)
Fix logging when cache key contains % sign [&lt;a href=
&quot;/projects/8994/tickets/5570&quot; title=&quot;Ticket #5570&quot;&gt;#5570&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/8639c10a40604cee2f3d412470c2960712fdc809&quot;&gt;
http://github.com/rails/rails/commit/8639c10a40604cee2f3d412470c296...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-25T10:07:34+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2010-09-25T10:07:35+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">12</version>
      <user-name>Repository</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Not sure if i should open a new ticket but with rails 3.0.7 i am getting the following error:
    Could not log &quot;read_fragment.action_controller&quot; event. ArgumentError: malformed format string - %F

with the following code:
    cache({:element =&gt; graph.cache_key, :lang =&gt; I18n.locale.to_s})

Graph is a normal model.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Not sure if i should open a new ticket but with rails 3.0.7 i am
getting the following error:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Could not log &quot;read_fragment.action_controller&quot; event. ArgumentError: malformed format string - %F&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;with the following code:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;cache({:element =&amp;gt; graph.cache_key, :lang =&amp;gt; I18n.locale.to_s})&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Graph is a normal model.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-04-24T15:26:16+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2011-04-24T15:26:24+01:00</updated-at>
      <user-id type="integer">146774</user-id>
      <version type="integer">13</version>
      <user-name>Skully</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Indeed. I still get the same error messages too. They didn't ever go away for me with any particular Rails release, so I'm not convinced that the fix was complete.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Indeed. I still get the same error messages too. They didn't
ever go away for me with any particular Rails release, so I'm not
convinced that the fix was complete.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-04-24T16:49:12+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2011-04-24T16:49:18+01:00</updated-at>
      <user-id type="integer">19078</user-id>
      <version type="integer">14</version>
      <user-name>Steve Purcell</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>&#31169;&#12398;&#20013;&#12391;&#12289;&#32207;&#21512;&#35413;&#20385;&#12398;&#12392;&#12387;&#12390;&#12418;&#20302;&#12356;&#12450;&#12496;&lt;a href=&quot;http://www.abakuro.co.jp/&quot; rel=&quot;dofollow&quot;&gt;&lt;b&gt;&#12450;&#12496;&#12463;&#12525;&#12507;&#12522;&#12473;&#12479;&#12540;&lt;/b&gt;&lt;/a&gt;&#12463;&#12525;&#37504;&#24231;&#24215;&#12290;&#12450;&#12496;&#12463;&#12525;&#12399;&#22823;&#22909;&#12365;&#12394;&#12435;&#12391;&#12377;&#12369;&#12393;&#12397;&#12290;&#19968;&#26152;&#26085;&#12398;&#26481;&#20140;&#39365;&#20184;&#36817;&#12391;&#12398;&#25171;&#12385;&#21512;&#12431;&#12379;&#12398;&#24460;&#12289;&#25955;&#27497;&#12364;&#12390;&#12425;&#20037;&#12293;&#12395;&#34892;&#12387;&#12390;&#12365;&#12414;&#12375;&#12383;&#12290;&#12381;&#12375;&#12383;&#12425;&#12499;&#12483;&#12463;&#12522;&#65281;&#30456;&#22793;&#12431;&#12425;&lt;a href=&quot;http://www.abakuro.co.jp/&quot; rel=&quot;dofollow&quot;&gt;&lt;b&gt;&#12450;&#12496;&#12463;&#12525;&lt;/b&gt;&lt;/a&gt;&#12378;&#12289;&#36362;&#12387;&#12390;&#12356;&#12427;&#12384;&#12369;&#12398;&#24215;&#21729;&#12373;&#12435;&#12392;&#12363;&#12418;&#12356;&#12414;&#12375;&#12383;&#12364;&#12289;</body>
      <body-html>&lt;div&gt;&lt;p&gt;
&amp;#31169;&amp;#12398;&amp;#20013;&amp;#12391;&amp;#12289;&amp;#32207;&amp;#21512;&amp;#35413;&amp;#20385;&amp;#12398;&amp;#12392;&amp;#12387;&amp;#12390;&amp;#12418;&amp;#20302;&amp;#12356;&amp;#12450;&amp;#12496;&lt;a href=&quot;http://www.abakuro.co.jp/&quot;&gt;&lt;b&gt;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&amp;#12507;&amp;#12522;&amp;#12473;&amp;#12479;&amp;#12540;&lt;/b&gt;&lt;/a&gt;&amp;#12463;&amp;#12525;&amp;#37504;&amp;#24231;&amp;#24215;&amp;#12290;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&amp;#12399;&amp;#22823;&amp;#22909;&amp;#12365;&amp;#12394;&amp;#12435;&amp;#12391;&amp;#12377;&amp;#12369;&amp;#12393;&amp;#12397;&amp;#12290;&amp;#19968;&amp;#26152;&amp;#26085;&amp;#12398;&amp;#26481;&amp;#20140;&amp;#39365;&amp;#20184;&amp;#36817;&amp;#12391;&amp;#12398;&amp;#25171;&amp;#12385;&amp;#21512;&amp;#12431;&amp;#12379;&amp;#12398;&amp;#24460;&amp;#12289;&amp;#25955;&amp;#27497;&amp;#12364;&amp;#12390;&amp;#12425;&amp;#20037;&amp;#12293;&amp;#12395;&amp;#34892;&amp;#12387;&amp;#12390;&amp;#12365;&amp;#12414;&amp;#12375;&amp;#12383;&amp;#12290;&amp;#12381;&amp;#12375;&amp;#12383;&amp;#12425;&amp;#12499;&amp;#12483;&amp;#12463;&amp;#12522;&amp;#65281;&amp;#30456;&amp;#22793;&amp;#12431;&amp;#12425;&lt;a href=&quot;http://www.abakuro.co.jp/&quot;&gt;&lt;b&gt;&amp;#12450;&amp;#12496;&amp;#12463;&amp;#12525;&lt;/b&gt;&lt;/a&gt;&amp;#12378;&amp;#12289;&amp;#36362;&amp;#12387;&amp;#12390;&amp;#12356;&amp;#12427;&amp;#12384;&amp;#12369;&amp;#12398;&amp;#24215;&amp;#21729;&amp;#12373;&amp;#12435;&amp;#12392;&amp;#12363;&amp;#12418;&amp;#12356;&amp;#12414;&amp;#12375;&amp;#12383;&amp;#12364;&amp;#12289;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-05-05T02:56:18+01:00</created-at>
      <creator-id type="integer">19078</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5570</number>
      <permalink>fragment-cache-logging-fails-in-30-when-fragment-path-contains-printf-chars-eg-a</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>3.0 caching logging</tag>
      <title>Fragment cache logging fails in 3.0 when fragment path contains printf chars, e.g. &quot;%A&quot;</title>
      <updated-at type="datetime">2011-05-05T02:58:58+01:00</updated-at>
      <user-id type="integer">148049</user-id>
      <version type="integer">15</version>
      <user-name>af001</user-name>
      <creator-name>Steve Purcell</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5570</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>1dacf19a88857bb570f4a0e4c749d3b615b5fd54</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-09-21T09:23:17+01:00</created-at>
      <filename>ac_log_subscriber_fix.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">682991</id>
      <size type="integer">1719</size>
      <uploader-id type="integer">86902</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/682991/ac_log_subscriber_fix.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>f32ba2f6825fba89171afee6e42a0e84f86709c5</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-09-22T21:20:49+01:00</created-at>
      <filename>ac_log_subscriber_fix.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">686389</id>
      <size type="integer">2293</size>
      <uploader-id type="integer">86902</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/686389/ac_log_subscriber_fix.patch</url>
    </attachment>
  </attachments>
</ticket>
