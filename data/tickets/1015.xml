<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">1366</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-09-10T22:35:04+01:00</created-at>
  <creator-id type="integer">17461</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">1015</number>
  <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
  <priority type="integer">1072</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>actionmailer actionpack enhancement</tag>
  <title>image_path helper won't generate absolute paths without asset_host</title>
  <updated-at type="datetime">2011-03-31T05:10:08+01:00</updated-at>
  <user-id type="integer">42916</user-id>
  <version type="integer">22</version>
  <user-name>Greg Hazel</user-name>
  <creator-name>Chris Hapgood</creator-name>
  <assigned-user-name>Pratik</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
  <milestone-title>3.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>The image_tag and image_path helpers won't generate absolute paths unless ActionController::Base.asset_host is set.

The more fundamental cause is the ActionView::Helpers::AssetTagHelper#compute_public_path method and arguably the ActionView::Helpers::AssetTagHelper#compute_asset_host which returns an empty string when no asset_host is set.

This inability to return absolute paths without an asset host is particularly painful when using ActionMailer because HTML emails practically require the use of absolute paths.

I propose modifying compute_asset_host to return an appropriate asset host even if the AC::Base.asset_host is not set (where possible).

When asset_host is not set, we will rely on the ability of the root_url method to return a reasonable value.  In many cases, this relies on the presence of default_url_options -including the ActionMailer case.</original-body>
  <latest-body>The image_tag and image_path helpers won't generate absolute paths unless ActionController::Base.asset_host is set.

The more fundamental cause is the ActionView::Helpers::AssetTagHelper#compute_public_path method and arguably the ActionView::Helpers::AssetTagHelper#compute_asset_host which returns an empty string when no asset_host is set.

This inability to return absolute paths without an asset host is particularly painful when using ActionMailer because HTML emails practically require the use of absolute paths.

I propose modifying compute_asset_host to return an appropriate asset host even if the AC::Base.asset_host is not set (where possible).

When asset_host is not set, we will rely on the ability of the root_url method to return a reasonable value.  In many cases, this relies on the presence of default_url_options -including the ActionMailer case.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The image_tag and image_path helpers won't generate absolute
paths unless ActionController::Base.asset_host is set.&lt;/p&gt;
&lt;p&gt;The more fundamental cause is the
ActionView::Helpers::AssetTagHelper#compute_public_path method and
arguably the ActionView::Helpers::AssetTagHelper#compute_asset_host
which returns an empty string when no asset_host is set.&lt;/p&gt;
&lt;p&gt;This inability to return absolute paths without an asset host is
particularly painful when using ActionMailer because HTML emails
practically require the use of absolute paths.&lt;/p&gt;
&lt;p&gt;I propose modifying compute_asset_host to return an appropriate
asset host even if the AC::Base.asset_host is not set (where
possible).&lt;/p&gt;
&lt;p&gt;When asset_host is not set, we will rely on the ability of the
root_url method to return a reasonable value. In many cases, this
relies on the presence of default_url_options -including the
ActionMailer case.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The image_tag and image_path helpers won't generate absolute paths unless ActionController::Base.asset_host is set.

The more fundamental cause is the ActionView::Helpers::AssetTagHelper#compute_public_path method and arguably the ActionView::Helpers::AssetTagHelper#compute_asset_host which returns an empty string when no asset_host is set.

This inability to return absolute paths without an asset host is particularly painful when using ActionMailer because HTML emails practically require the use of absolute paths.

I propose modifying compute_asset_host to return an appropriate asset host even if the AC::Base.asset_host is not set (where possible).

When asset_host is not set, we will rely on the ability of the root_url method to return a reasonable value.  In many cases, this relies on the presence of default_url_options -including the ActionMailer case.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The image_tag and image_path helpers won't generate absolute
paths unless ActionController::Base.asset_host is set.&lt;/p&gt;
&lt;p&gt;The more fundamental cause is the
ActionView::Helpers::AssetTagHelper#compute_public_path method and
arguably the ActionView::Helpers::AssetTagHelper#compute_asset_host
which returns an empty string when no asset_host is set.&lt;/p&gt;
&lt;p&gt;This inability to return absolute paths without an asset host is
particularly painful when using ActionMailer because HTML emails
practically require the use of absolute paths.&lt;/p&gt;
&lt;p&gt;I propose modifying compute_asset_host to return an appropriate
asset host even if the AC::Base.asset_host is not set (where
possible).&lt;/p&gt;
&lt;p&gt;When asset_host is not set, we will rely on the ability of the
root_url method to return a reasonable value. In many cases, this
relies on the presence of default_url_options -including the
ActionMailer case.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-10T22:35:05+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2008-09-10T22:35:10+01:00</updated-at>
      <user-id type="integer">17461</user-id>
      <version type="integer">1</version>
      <user-name>Chris Hapgood</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Attached patch to solve problem.  Tests coming next...</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached patch to solve problem. Tests coming next...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-10T22:42:32+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2008-09-10T22:42:34+01:00</updated-at>
      <user-id type="integer">17461</user-id>
      <version type="integer">2</version>
      <user-name>Chris Hapgood</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-09-11T15:55:30+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2008-09-11T15:55:34+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">3</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hey Chris,

Patch doesn't apply anymore.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Chris,&lt;/p&gt;
&lt;p&gt;Patch doesn't apply anymore.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-04T15:09:29+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2008-10-04T15:09:34+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">4</version>
      <user-name>Pratik</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>When I wrote this changeset up on the mailing list, nobody replied.  No positive replies, no negative replies.  So I'm led to believe that with ActionMailer people are either using an asset host or they have alternative workarounds to get linked images.

In either case, the lack of interest has made me put my work into other issues for the time being.  I'll try to get back to this ticket if you think it's worthwhile.  Otherwise, let's close it.
-Chris</body>
      <body-html>&lt;div&gt;&lt;p&gt;When I wrote this changeset up on the mailing list, nobody
replied. No positive replies, no negative replies. So I'm led to
believe that with ActionMailer people are either using an asset
host or they have alternative workarounds to get linked images.&lt;/p&gt;
&lt;p&gt;In either case, the lack of interest has made me put my work
into other issues for the time being. I'll try to get back to this
ticket if you think it's worthwhile. Otherwise, let's close it.
-Chris&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-05T14:21:38+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2008-10-05T14:21:41+01:00</updated-at>
      <user-id type="integer">17461</user-id>
      <version type="integer">5</version>
      <user-name>Chris Hapgood</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Let's keep it on 'hold' for now and tackle it post 2.2 ( or till someone else faces the problem).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Let's keep it on 'hold' for now and tackle it post 2.2 ( or till
someone else faces the problem).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-10-05T14:28:38+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2008-10-05T14:28:39+01:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">6</version>
      <user-name>Pratik</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I for one would like to see this fixed.  The attached patch is a little cleaner than the original and includes a test.

Any thoughts on the use of root_url for computing this?  Seems a little weird to be relying on something that may or may not be defined in routes, but I'm not sure there's a better way...</body>
      <body-html>&lt;div&gt;&lt;p&gt;I for one would like to see this fixed. The attached patch is a
little cleaner than the original and includes a test.&lt;/p&gt;
&lt;p&gt;Any thoughts on the use of root_url for computing this? Seems a
little weird to be relying on something that may or may not be
defined in routes, but I'm not sure there's a better way...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-01-15T15:20:58+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-01-15T15:21:01+00:00</updated-at>
      <user-id type="integer">19441</user-id>
      <version type="integer">7</version>
      <user-name>Jonathan del Strother</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-15T15:30:56+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:state: hold
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-01-15T15:31:01+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">8</version>
      <user-name>Pratik</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-15T15:31:03+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 12671
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-01-15T15:31:07+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">9</version>
      <user-name>Pratik</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Umm, why can't we use default_url_options[:host] ?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Umm, why can't we use default_url_options[:host] ?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-18T04:05:55+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-01-18T04:05:56+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">10</version>
      <user-name>Pratik</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-28T19:56:02+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 24544
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-01-28T19:56:06+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">11</version>
      <user-name>Pratik</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I'm building newsletter now and this would be very useful feature.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm building newsletter now and this would be very useful
feature.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-29T19:34:02+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-01-29T19:34:07+00:00</updated-at>
      <user-id type="integer">42860</user-id>
      <version type="integer">12</version>
      <user-name>Marko</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>+1
I would like to have absolute URLs possible in image_tag also</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 I would like to have absolute URLs possible in image_tag
also&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-11T19:11:50+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-02-11T19:11:56+00:00</updated-at>
      <user-id type="integer">26889</user-id>
      <version type="integer">13</version>
      <user-name>Gregory Tomei</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Specifying default_url_options[:host] in ActionMailer does not result in absolute image tags (or I'm doing something wrong).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Specifying default_url_options[:host] in ActionMailer does not
result in absolute image tags (or I'm doing something wrong).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-10-21T18:36:51+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2009-10-21T18:36:55+01:00</updated-at>
      <user-id type="integer">52574</user-id>
      <version type="integer">14</version>
      <user-name>Ryan Sandridge</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Hi

+1 too. Still stuck with html emails.
would be intresting to have such a feature.

what about it ?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi&lt;/p&gt;
&lt;p&gt;+1 too. Still stuck with html emails. would be intresting to
have such a feature.&lt;/p&gt;
&lt;p&gt;what about it ?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-13T23:49:58+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2010-04-13T23:50:03+01:00</updated-at>
      <user-id type="integer">94838</user-id>
      <version type="integer">15</version>
      <user-name>gonzoyumo</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:34+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2010-05-04T18:48:34+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">16</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Regarding Jonathan del Strothers patch.

* The patch does not apply to master, but it does apply to 2-3-stable.
* Tests do pass on 2-3-stable

I personally think that the current behavior is perfectly fine. There is no asset host defined, so there is no absolute asset path. The behaviour only becomes obvious when you use the helper in mailer templates. The same problem applies to url_for too by the way.

I don't like the idea of using the root_url as a fallback. It just doesn't feel right to me. And I don't think that it's a good idea to rely the implementation on route helpers.


There are a few things I would reconsider:

* Is there really the need for a change? Just setting the asset host would do the trick.
* Find a generic solution that also fixes the url_for helper, not just the asset tag.
* Think about an other solution than using root_url.
* Return host instead of nil since that would match the behavior on line 577 (host would be nil in that case anyway)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Regarding Jonathan del Strothers patch.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The patch does not apply to master, but it does apply to
2-3-stable.&lt;/li&gt;
&lt;li&gt;Tests do pass on 2-3-stable&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I personally think that the current behavior is perfectly fine.
There is no asset host defined, so there is no absolute asset path.
The behaviour only becomes obvious when you use the helper in
mailer templates. The same problem applies to url_for too by the
way.&lt;/p&gt;
&lt;p&gt;I don't like the idea of using the root_url as a fallback. It
just doesn't feel right to me. And I don't think that it's a good
idea to rely the implementation on route helpers.&lt;/p&gt;
&lt;p&gt;There are a few things I would reconsider:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Is there really the need for a change? Just setting the asset
host would do the trick.&lt;/li&gt;
&lt;li&gt;Find a generic solution that also fixes the url_for helper, not
just the asset tag.&lt;/li&gt;
&lt;li&gt;Think about an other solution than using root_url.&lt;/li&gt;
&lt;li&gt;Return host instead of nil since that would match the behavior
on line 577 (host would be nil in that case anyway)&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-16T16:45:57+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">1072</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2010-07-16T16:46:00+01:00</updated-at>
      <user-id type="integer">67647</user-id>
      <version type="integer">17</version>
      <user-name>masone</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I would like to see something like `ActionView::Helpers::AssetTagHelper#image_url` that returns the absolute url in stead of just the path as `ActionView::Helpers::AssetTagHelper#image_path` does.

Jarl</body>
      <body-html>&lt;div&gt;&lt;p&gt;I would like to see something like
&lt;code&gt;ActionView::Helpers::AssetTagHelper#image_url&lt;/code&gt; that
returns the absolute url in stead of just the path as
&lt;code&gt;ActionView::Helpers::AssetTagHelper#image_path&lt;/code&gt;
does.&lt;/p&gt;
&lt;p&gt;Jarl&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-27T15:48:06+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">1072</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2010-08-27T15:48:10+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">18</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I see am not the only one that have a wish for `#image_url`:
http://groups.google.com/group/rubyonrails-talk/browse_thread/thread/ab495ed6596afe21</body>
      <body-html>&lt;div&gt;&lt;p&gt;I see am not the only one that have a wish for
&lt;code&gt;#image_url&lt;/code&gt;:&lt;br&gt;
&lt;a href=
&quot;http://groups.google.com/group/rubyonrails-talk/browse_thread/thread/ab495ed6596afe21&quot;&gt;
http://groups.google.com/group/rubyonrails-talk/browse_thread/threa...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-30T15:22:58+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">1072</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2010-08-30T15:23:01+01:00</updated-at>
      <user-id type="integer">55442</user-id>
      <version type="integer">19</version>
      <user-name>Jarl Friis</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:49:27+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">1072</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2011-02-02T18:11:37+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">20</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:49:28+00:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">1072</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2011-02-02T18:12:20+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">21</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The wish for this to be fixed still exists. Using default_url_options[:host] seems like a reasonable answer.

[state:open]</body>
      <body-html>&lt;div&gt;&lt;p&gt;The wish for this to be fixed still exists. Using
default_url_options[:host] seems like a reasonable answer.&lt;/p&gt;
&lt;p&gt;[state:open]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-31T05:09:48+01:00</created-at>
      <creator-id type="integer">17461</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1015</number>
      <permalink>image_path-helper-wont-generate-absolute-paths-without-asset_host</permalink>
      <priority type="integer">1072</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>actionmailer actionpack enhancement</tag>
      <title>image_path helper won't generate absolute paths without asset_host</title>
      <updated-at type="datetime">2011-03-31T05:10:08+01:00</updated-at>
      <user-id type="integer">42916</user-id>
      <version type="integer">22</version>
      <user-name>Greg Hazel</user-name>
      <creator-name>Chris Hapgood</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1015</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>a04dfa1fffb4bb858da3d1a8fa7c53c54bdad99b</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-09-10T22:42:32+01:00</created-at>
      <filename>fix_compute_asset_host.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">45183</id>
      <size type="integer">2589</size>
      <uploader-id type="integer">17461</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/45183/fix_compute_asset_host.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>eb83ef10a156a124937b443a2c985753d31d272e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-01-15T15:20:58+00:00</created-at>
      <filename>absolute_paths.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">78778</id>
      <size type="integer">2224</size>
      <uploader-id type="integer">19441</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/78778/absolute_paths.diff</url>
    </attachment>
  </attachments>
</ticket>
