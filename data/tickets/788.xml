<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-08-09T03:33:42+01:00</created-at>
  <creator-id type="integer">608</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">788</number>
  <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
  <priority type="integer">249</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>2.1 activerecord bug patch</tag>
  <title>partial_updates clobbers serialized attributes</title>
  <updated-at type="datetime">2009-08-09T16:13:15+01:00</updated-at>
  <user-id type="integer">8551</user-id>
  <version type="integer">29</version>
  <user-name>Fjan</user-name>
  <creator-name>John Wulff</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>@@@ ruby
class Node &lt; ActiveRecord::Base
  serialize :data
end
&gt;&gt; n = Node.create! :data =&gt; { :a =&gt; 1 }
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
&gt;&gt; n.id
=&gt; 417950
&gt;&gt; m = Node.find 417950
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
&gt;&gt; m.data[:b] = 2
=&gt; 2
&gt;&gt; m
=&gt; #&lt;Node id: 417950, data: {:b=&gt;2, :a=&gt;1}&gt;
&gt;&gt; m.changed?
=&gt; false
&gt;&gt; m.save!
=&gt; true
&gt;&gt; m = Node.find 417950
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
@@@

Changes to the hash are never saved and that makes me really, really sad.</original-body>
  <latest-body>@@@ ruby
class Node &lt; ActiveRecord::Base
  serialize :data
end
&gt;&gt; n = Node.create! :data =&gt; { :a =&gt; 1 }
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
&gt;&gt; n.id
=&gt; 417950
&gt;&gt; m = Node.find 417950
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
&gt;&gt; m.data[:b] = 2
=&gt; 2
&gt;&gt; m
=&gt; #&lt;Node id: 417950, data: {:b=&gt;2, :a=&gt;1}&gt;
&gt;&gt; m.changed?
=&gt; false
&gt;&gt; m.save!
=&gt; true
&gt;&gt; m = Node.find 417950
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
@@@

Changes to the hash are never saved and that makes me really, really sad.</latest-body>
  <original-body-html>&lt;div&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
class Node &amp;lt; ActiveRecord::Base
  serialize :data
end
&amp;gt;&amp;gt; n = Node.create! :data =&amp;gt; { :a =&amp;gt; 1 }
=&amp;gt; #&amp;lt;Node id: 417950, data: {:a=&amp;gt;1}&amp;gt;
&amp;gt;&amp;gt; n.id
=&amp;gt; 417950
&amp;gt;&amp;gt; m = Node.find 417950
=&amp;gt; #&amp;lt;Node id: 417950, data: {:a=&amp;gt;1}&amp;gt;
&amp;gt;&amp;gt; m.data[:b] = 2
=&amp;gt; 2
&amp;gt;&amp;gt; m
=&amp;gt; #&amp;lt;Node id: 417950, data: {:b=&amp;gt;2, :a=&amp;gt;1}&amp;gt;
&amp;gt;&amp;gt; m.changed?
=&amp;gt; false
&amp;gt;&amp;gt; m.save!
=&amp;gt; true
&amp;gt;&amp;gt; m = Node.find 417950
=&amp;gt; #&amp;lt;Node id: 417950, data: {:a=&amp;gt;1}&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Changes to the hash are never saved and that makes me really, really sad.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>@@@ ruby
class Node &lt; ActiveRecord::Base
  serialize :data
end
&gt;&gt; n = Node.create! :data =&gt; { :a =&gt; 1 }
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
&gt;&gt; n.id
=&gt; 417950
&gt;&gt; m = Node.find 417950
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
&gt;&gt; m.data[:b] = 2
=&gt; 2
&gt;&gt; m
=&gt; #&lt;Node id: 417950, data: {:b=&gt;2, :a=&gt;1}&gt;
&gt;&gt; m.changed?
=&gt; false
&gt;&gt; m.save!
=&gt; true
&gt;&gt; m = Node.find 417950
=&gt; #&lt;Node id: 417950, data: {:a=&gt;1}&gt;
@@@

Changes to the hash are never saved and that makes me really, really sad.</body>
      <body-html>&lt;div&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
class Node &amp;lt; ActiveRecord::Base
  serialize :data
end
&amp;gt;&amp;gt; n = Node.create! :data =&amp;gt; { :a =&amp;gt; 1 }
=&amp;gt; #&amp;lt;Node id: 417950, data: {:a=&amp;gt;1}&amp;gt;
&amp;gt;&amp;gt; n.id
=&amp;gt; 417950
&amp;gt;&amp;gt; m = Node.find 417950
=&amp;gt; #&amp;lt;Node id: 417950, data: {:a=&amp;gt;1}&amp;gt;
&amp;gt;&amp;gt; m.data[:b] = 2
=&amp;gt; 2
&amp;gt;&amp;gt; m
=&amp;gt; #&amp;lt;Node id: 417950, data: {:b=&amp;gt;2, :a=&amp;gt;1}&amp;gt;
&amp;gt;&amp;gt; m.changed?
=&amp;gt; false
&amp;gt;&amp;gt; m.save!
=&amp;gt; true
&amp;gt;&amp;gt; m = Node.find 417950
=&amp;gt; #&amp;lt;Node id: 417950, data: {:a=&amp;gt;1}&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Changes to the hash are never saved and that makes me really, really sad.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-09T03:33:43+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bug</tag>
      <title>Saving Only &quot;changed&quot; Attributes Hurts Serialization</title>
      <updated-at type="datetime">2008-08-09T03:33:43+01:00</updated-at>
      <user-id type="integer">608</user-id>
      <version type="integer">1</version>
      <user-name>John Wulff</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This is a known behavior of dirty tracking. It can't detect changes made directly on an attribute. You have to either go through the accessor method or warn dirty tracking you're changing the attribute.

@@@ ruby
m.data = {:b=&gt;2, :a=&gt;1}

# or

m.data_will_change!
m.data[:b] = 2
@@@

See ticket #608 for more info.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is a known behavior of dirty tracking. It can't detect changes made directly on an attribute. You have to either go through the accessor method or warn dirty tracking you're changing the attribute.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
m.data = {:b=&amp;gt;2, :a=&amp;gt;1}

# or

m.data_will_change!
m.data[:b] = 2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;See ticket &lt;a href=&quot;/projects/8994/tickets/608&quot; title=&quot;Ticket #608&quot;&gt;#608&lt;/a&gt; for more info.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-09T04:36:01+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bug</tag>
      <title>Saving Only &quot;changed&quot; Attributes Hurts Serialization</title>
      <updated-at type="datetime">2008-08-09T04:36:01+01:00</updated-at>
      <user-id type="integer">5701</user-id>
      <version type="integer">2</version>
      <user-name>Ryan Bates</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Prior to dirty tracking changes made to serialized objects were saved.  Now they are not.  This is the way things are going to stay?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Prior to dirty tracking changes made to serialized objects were saved.  Now they are not.  This is the way things are going to stay?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-09T05:11:07+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bug</tag>
      <title>Saving Only &quot;changed&quot; Attributes Hurts Serialization</title>
      <updated-at type="datetime">2008-08-09T05:11:07+01:00</updated-at>
      <user-id type="integer">608</user-id>
      <version type="integer">3</version>
      <user-name>John Wulff</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This looks like a bug to me... with partial_updates update will only save attributes that are dirty, so serialized attributes are skipped.

Trivial quick patch attached to resolve this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This looks like a bug to me... with partial_updates update will only save attributes that are dirty, so serialized attributes are skipped.&lt;/p&gt;

&lt;p&gt;Trivial quick patch attached to resolve this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-11T18:20:19+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord bug
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>Saving Only &quot;changed&quot; Attributes Hurts Serialization</title>
      <updated-at type="datetime">2008-08-11T18:20:19+01:00</updated-at>
      <user-id type="integer">28420</user-id>
      <version type="integer">4</version>
      <user-name>Tom Lea</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I apologize for criticizing without offering up my own patch, but it seems like this patch lacking a few things.  Why not rewrite changed? for serialized attributes that checks the serialization against the old value and stores the results.  Then run changed? against all serialized attributes at the beginning of update_with_dirty.  It'll be slower, but it will then behave as expected rather than always assuming serialized attributes are changed.  

As an aside if this was a known behavior of rails 2.1, it seems like it should have been better publicized.  I couldn't find any mention of it even though it *breaks* nearly every rails app that uses serialized attributes.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I apologize for criticizing without offering up my own patch, but it seems like this patch lacking a few things.  Why not rewrite changed? for serialized attributes that checks the serialization against the old value and stores the results.  Then run changed? against all serialized attributes at the beginning of update_with_dirty.  It'll be slower, but it will then behave as expected rather than always assuming serialized attributes are changed.&lt;/p&gt;

&lt;p&gt;As an aside if this was a known behavior of rails 2.1, it seems like it should have been better publicized.  I couldn't find any mention of it even though it &lt;em&gt;breaks&lt;/em&gt; nearly every rails app that uses serialized attributes.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-11T21:23:52+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>Saving Only &quot;changed&quot; Attributes Hurts Serialization</title>
      <updated-at type="datetime">2008-08-11T21:23:52+01:00</updated-at>
      <user-id type="integer">28728</user-id>
      <version type="integer">5</version>
      <user-name>Doug Cole</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>It would be nice, but this would make the behaviour inconsistent with the (odd but expected) behaviour of other attributes (see #608).

The patch will not fix any issues with AR#changed? &amp; family. Just a bug with partial_updates.

If we wished to have a comparison with previous values, we would have to stash the values of all attributes at record load. This would be a very different approach to what is currently there.

But I digress...

The patch makes things save as expected in 2.0, preventing 'mystery' data loss, it does not change the AR#changed? 2.1 features.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It would be nice, but this would make the behaviour inconsistent with the (odd but expected) behaviour of other attributes (see &lt;a href=&quot;/projects/8994/tickets/608&quot; title=&quot;Ticket #608&quot;&gt;#608&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The patch will not fix any issues with AR#changed? &amp;amp; family. Just a bug with partial_updates.&lt;/p&gt;

&lt;p&gt;If we wished to have a comparison with previous values, we would have to stash the values of all attributes at record load. This would be a very different approach to what is currently there.&lt;/p&gt;

&lt;p&gt;But I digress...&lt;/p&gt;

&lt;p&gt;The patch makes things save as expected in 2.0, preventing 'mystery' data loss, it does not change the AR#changed? 2.1 features.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-11T22:27:23+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>Saving Only &quot;changed&quot; Attributes Hurts Serialization</title>
      <updated-at type="datetime">2008-08-11T22:27:23+01:00</updated-at>
      <user-id type="integer">28420</user-id>
      <version type="integer">6</version>
      <user-name>Tom Lea</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>yuck.  Well thanks for the heads up on #608 and the patch Tom.</body>
      <body-html>&lt;div&gt;&lt;p&gt;yuck.  Well thanks for the heads up on &lt;a href=&quot;/projects/8994/tickets/608&quot; title=&quot;Ticket #608&quot;&gt;#608&lt;/a&gt; and the patch Tom.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-11T22:42:41+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>Saving Only &quot;changed&quot; Attributes Hurts Serialization</title>
      <updated-at type="datetime">2008-08-11T22:42:41+01:00</updated-at>
      <user-id type="integer">28728</user-id>
      <version type="integer">7</version>
      <user-name>Doug Cole</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-12T13:57:38+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Saving Only &quot;changed&quot; Attributes Hurts Serialization
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-12T13:57:38+01:00</updated-at>
      <user-id type="integer">28420</user-id>
      <version type="integer">8</version>
      <user-name>Tom Lea</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [992fda16ed662f028700d63a8dcbd1837f1d58ab]) Serialized attributes will now always be saved even with partial_updates turned on.

Signed-off-by: Michael Koziarski &lt;michael@koziarski.com&gt;
[#788 state:committed]
http://github.com/rails/rails/commit/992fda16ed662f028700d63a8dcbd1837f1d58ab</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [992fda16ed662f028700d63a8dcbd1837f1d58ab]) Serialized attributes will now always be saved even with partial_updates turned on.&lt;/p&gt;

&lt;p&gt;Signed-off-by: Michael Koziarski &lt;a href=&quot;&amp;amp;#x6d;&amp;amp;#97;&amp;amp;#x69;&amp;amp;#108;&amp;amp;#x74;&amp;amp;#111;&amp;amp;#x3a;&amp;amp;#109;&amp;amp;#x69;&amp;amp;#x63;&amp;amp;#104;&amp;amp;#97;&amp;amp;#101;&amp;amp;#x6c;&amp;amp;#x40;&amp;amp;#107;&amp;amp;#111;&amp;amp;#122;&amp;amp;#105;&amp;amp;#x61;&amp;amp;#x72;&amp;amp;#x73;&amp;amp;#x6b;&amp;amp;#x69;&amp;amp;#x2e;&amp;amp;#x63;&amp;amp;#111;&amp;amp;#109;&quot;&gt;&amp;#109;&amp;#x69;&amp;#99;&amp;#x68;&amp;#97;&amp;#101;&amp;#x6c;&amp;#x40;&amp;#107;&amp;#111;&amp;#122;&amp;#x69;&amp;#x61;&amp;#114;&amp;#115;&amp;#x6b;&amp;#105;&amp;#x2e;&amp;#99;&amp;#111;&amp;#x6d;&lt;/a&gt;
[&lt;a href=&quot;/projects/8994/tickets/788&quot; title=&quot;Ticket #788&quot;&gt;#788&lt;/a&gt; state:committed]
&lt;a href=&quot;http://github.com/rails/rails/commit/992fda16ed662f028700d63a8dcbd1837f1d58ab&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-12T17:17:00+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-12T17:17:00+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">9</version>
      <user-name>Repository</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [decc9730959de85b4c4873986bcd33e12fa1985d]) Serialized attributes will now always be saved even with partial_updates turned on.

Signed-off-by: Michael Koziarski &lt;michael@koziarski.com&gt;
[#788 state:committed]
http://github.com/rails/rails/commit/decc9730959de85b4c4873986bcd33e12fa1985d</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [decc9730959de85b4c4873986bcd33e12fa1985d]) Serialized attributes will now always be saved even with partial_updates turned on.&lt;/p&gt;

&lt;p&gt;Signed-off-by: Michael Koziarski &lt;a href=&quot;&amp;amp;#109;&amp;amp;#97;&amp;amp;#x69;&amp;amp;#108;&amp;amp;#x74;&amp;amp;#111;&amp;amp;#x3a;&amp;amp;#109;&amp;amp;#105;&amp;amp;#x63;&amp;amp;#104;&amp;amp;#97;&amp;amp;#x65;&amp;amp;#x6c;&amp;amp;#x40;&amp;amp;#107;&amp;amp;#111;&amp;amp;#122;&amp;amp;#105;&amp;amp;#97;&amp;amp;#114;&amp;amp;#x73;&amp;amp;#107;&amp;amp;#x69;&amp;amp;#x2e;&amp;amp;#99;&amp;amp;#111;&amp;amp;#x6d;&quot;&gt;&amp;#109;&amp;#105;&amp;#99;&amp;#104;&amp;#x61;&amp;#101;&amp;#108;&amp;#64;&amp;#107;&amp;#x6f;&amp;#122;&amp;#105;&amp;#97;&amp;#x72;&amp;#115;&amp;#107;&amp;#105;&amp;#x2e;&amp;#99;&amp;#111;&amp;#x6d;&lt;/a&gt;
[&lt;a href=&quot;/projects/8994/tickets/788&quot; title=&quot;Ticket #788&quot;&gt;#788&lt;/a&gt; state:committed]
&lt;a href=&quot;http://github.com/rails/rails/commit/decc9730959de85b4c4873986bcd33e12fa1985d&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-12T17:19:09+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-12T17:19:09+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">10</version>
      <user-name>Repository</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Normally I wouldn't like a special case like this, but as 99.9% of the time you're modifying serialized attributes in place.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Normally I wouldn't like a special case like this, but as 99.9% of the time you're modifying serialized attributes in place.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-12T17:20:58+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-12T17:20:58+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">11</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thanks for the commit Koz!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks for the commit Koz!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-12T17:39:59+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-12T17:39:59+01:00</updated-at>
      <user-id type="integer">28420</user-id>
      <version type="integer">12</version>
      <user-name>Tom Lea</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thanks Koz.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks Koz.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-13T01:02:22+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-13T01:02:22+01:00</updated-at>
      <user-id type="integer">608</user-id>
      <version type="integer">13</version>
      <user-name>John Wulff</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Wow, this is really a critical bug as this buggy behavior *breaks* applications when the Dirty module was introduced to rails. This patch deserves a minor release and Tom some national honors.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Wow, this is really a critical bug as this buggy behavior &lt;em&gt;breaks&lt;/em&gt; applications when the Dirty module was introduced to rails. This patch deserves a minor release and Tom some national honors.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-23T23:00:30+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-23T23:00:30+01:00</updated-at>
      <user-id type="integer">14415</user-id>
      <version type="integer">14</version>
      <user-name>J&#233;r&#244;me</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>We're considering a minor release shortly and this will be included in it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;We're considering a minor release shortly and this will be included in it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-24T13:35:54+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-24T13:35:54+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">15</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>May I hug you ?</body>
      <body-html>&lt;div&gt;&lt;p&gt;May I hug you ?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-24T13:46:18+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-24T13:46:18+01:00</updated-at>
      <user-id type="integer">14415</user-id>
      <version type="integer">16</version>
      <user-name>J&#233;r&#244;me</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thank god/Tom/Koz for that.  I've just spent a whole day tracking down a bug that was due to this misbehaviour.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thank god/Tom/Koz for that.  I've just spent a whole day tracking down a bug that was due to this misbehaviour.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-27T17:02:46+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-08-27T17:02:46+01:00</updated-at>
      <user-id type="integer">19078</user-id>
      <version type="integer">17</version>
      <user-name>Steve Purcell</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Sad this isn't in 2.0.4.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sad this isn't in 2.0.4.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-03T19:23:19+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization-2</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-03T19:23:19+01:00</updated-at>
      <user-id type="integer">608</user-id>
      <version type="integer">18</version>
      <user-name>John Wulff</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>John, partial updates were first introduced in 2.1 so backporting this patch wouldn't make sense for 2.0.x.</body>
      <body-html>&lt;div&gt;&lt;p&gt;John, partial updates were first introduced in 2.1 so
backporting this patch wouldn't make sense for 2.0.x.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-03T22:13:50+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization-3</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-03T22:13:50+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">19</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thanks Jeremy.  That was awfully stupid of me.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks Jeremy. That was awfully stupid of me.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-03T22:38:46+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization-4</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-03T22:38:46+01:00</updated-at>
      <user-id type="integer">608</user-id>
      <version type="integer">20</version>
      <user-name>John Wulff</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>John, hey no worries :)

I'm not sure why this is marked as committed only, rather than resolved, though. Koz?</body>
      <body-html>&lt;div&gt;&lt;p&gt;John, hey no worries :)&lt;/p&gt;
&lt;p&gt;I'm not sure why this is marked as committed only, rather than
resolved, though. Koz?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-03T22:41:26+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization-5</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-03T22:41:26+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">21</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've been using committed for *all* my patches I apply.  committed isn't finished?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've been using committed for &lt;em&gt;all&lt;/em&gt; my patches I apply.
committed isn't finished?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-04T08:32:24+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization-6</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-04T08:32:24+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">22</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Then sad this isn't in rails 2.1.1 :(</body>
      <body-html>&lt;div&gt;&lt;p&gt;Then sad this isn't in rails 2.1.1 :(&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-23T10:28:13+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.1 activerecord bug patch
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-23T10:28:14+01:00</updated-at>
      <user-id type="integer">14415</user-id>
      <version type="integer">23</version>
      <user-name>J&#233;r&#244;me</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Oops sorry it is. Not it the changelog I guess.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Oops sorry it is. Not it the changelog I guess.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-23T10:31:41+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-23T10:31:45+01:00</updated-at>
      <user-id type="integer">14415</user-id>
      <version type="integer">24</version>
      <user-name>J&#233;r&#244;me</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>It *is* in 2.1.1 isn't it?</body>
      <body-html>&lt;div&gt;&lt;p&gt;It &lt;em&gt;is&lt;/em&gt; in 2.1.1 isn't it?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-09-23T10:33:14+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-09-23T10:33:18+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">25</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Yes, it is in 2.1.1.
I understand the reasoning for marking serialized objects as dirty each save, to be consistent with earlier behaviour.
But is there any way to get the old behaviour back? I have a couple of large serialized objects that now get serialized and saved every time...</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yes, it is in 2.1.1. I understand the reasoning for marking
serialized objects as dirty each save, to be consistent with
earlier behaviour. But is there any way to get the old behaviour
back? I have a couple of large serialized objects that now get
serialized and saved every time...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-10-04T16:48:50+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;2.1&quot; activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-10-04T16:48:55+01:00</updated-at>
      <user-id type="integer">8551</user-id>
      <version type="integer">26</version>
      <user-name>Fjan</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Not presently but if you'd like to submit a patch for it we could apply it</body>
      <body-html>&lt;div&gt;&lt;p&gt;Not presently but if you'd like to submit a patch for it we
could apply it&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-10-04T16:53:32+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;2.1&quot; activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-10-04T16:53:34+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">27</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Ok, I looked at the code and it seems relatively straightforward to add support for something like:

ActiveRecord::Base.partial_updates = false | true | :serialized_also

Should be about 3 lines of code which seems a pretty worthwhile effort to avoid expensive serializing. But I'm afraid I'm not very experienced (I've yet to submit a patch for anything) so I'm going to defer that until I have a rainy afternoon to figure out that whole git and diff thing. Unless someone else wants to take up the glove a monkey patch will do for now.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, I looked at the code and it seems relatively straightforward
to add support for something like:&lt;/p&gt;
&lt;p&gt;ActiveRecord::Base.partial_updates = false | true |
:serialized_also&lt;/p&gt;
&lt;p&gt;Should be about 3 lines of code which seems a pretty worthwhile
effort to avoid expensive serializing. But I'm afraid I'm not very
experienced (I've yet to submit a patch for anything) so I'm going
to defer that until I have a rainy afternoon to figure out that
whole git and diff thing. Unless someone else wants to take up the
glove a monkey patch will do for now.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-10-04T19:17:50+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>&quot;2.1&quot; activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2008-10-04T19:17:55+01:00</updated-at>
      <user-id type="integer">8551</user-id>
      <version type="integer">28</version>
      <user-name>Fjan</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Unfortunately, this patch has caused bug [2397] (https://rails.lighthouseapp.com/projects/8994/tickets/2397-serialized-attributes-clobbered-on-partial-updates): it will now even save serialized attributes if they are not in memory, setting them to null. (Let's continue the discussion there)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Unfortunately, this patch has caused bug &lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/2397-serialized-attributes-clobbered-on-partial-updates&quot;&gt;
2397&lt;/a&gt;: it will now even save serialized attributes if they are
not in memory, setting them to null. (Let's continue the discussion
there)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-09T16:13:12+01:00</created-at>
      <creator-id type="integer">608</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: &quot;\&quot;2.1\&quot; activerecord bug patch&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">788</number>
      <permalink>saving-only-changed-attributes-hurts-serialization</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2.1 activerecord bug patch</tag>
      <title>partial_updates clobbers serialized attributes</title>
      <updated-at type="datetime">2009-08-09T16:13:15+01:00</updated-at>
      <user-id type="integer">8551</user-id>
      <version type="integer">29</version>
      <user-name>Fjan</user-name>
      <creator-name>John Wulff</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/788</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>3b39c6f3e251509ea02ddccb056b71d4f9bf0b5c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-08-11T18:20:19+01:00</created-at>
      <filename>should_save_serialized_attributes_even_with_partial_updates.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">38434</id>
      <size type="integer">1726</size>
      <uploader-id type="integer">28420</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/38434/should_save_serialized_attributes_even_with_partial_updates.diff</url>
    </attachment>
  </attachments>
</ticket>
