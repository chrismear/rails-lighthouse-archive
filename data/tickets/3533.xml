<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">141</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-19T14:18:09+01:00</created-at>
  <creator-id type="integer">136</creator-id>
  <milestone-due-on type="datetime">2010-01-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">50064</milestone-id>
  <number type="integer">3533</number>
  <permalink>backport-inverse_of-from-30-to-23x</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>backport inverse_of</tag>
  <title>Backport :inverse_of from 3.0 to 2.3.x</title>
  <updated-at type="datetime">2010-07-19T14:18:09+01:00</updated-at>
  <user-id type="integer">8406</user-id>
  <version type="integer">10</version>
  <user-name>Eloy Duran</user-name>
  <creator-name>Murray Steele</creator-name>
  <assigned-user-name>Michael Koziarski</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
  <milestone-title>2.3.6</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Speaking to Eloy Dur&#225;n on IRC it turned out that some other issues raised against 2.3.x would be solved more easily if the :inverse_of functionality was available.

The attached diff is simply the 3 commits to edge that implemented :inverse_of correctly merged onto 2-3-stable. They didn't apply cleanly and there were some conflicts that need resolving.

It should run a green test suite.</original-body>
  <latest-body>Speaking to Eloy Dur&#225;n on IRC it turned out that some other issues raised against 2.3.x would be solved more easily if the :inverse_of functionality was available.

The attached diff is simply the 3 commits to edge that implemented :inverse_of correctly merged onto 2-3-stable. They didn't apply cleanly and there were some conflicts that need resolving.

It should run a green test suite.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Speaking to Eloy Dur&amp;aacute;n on IRC it turned out that some
other issues raised against 2.3.x would be solved more easily if
the :inverse_of functionality was available.&lt;/p&gt;
&lt;p&gt;The attached diff is simply the 3 commits to edge that
implemented :inverse_of correctly merged onto 2-3-stable. They
didn't apply cleanly and there were some conflicts that need
resolving.&lt;/p&gt;
&lt;p&gt;It should run a green test suite.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Speaking to Eloy Dur&#225;n on IRC it turned out that some other issues raised against 2.3.x would be solved more easily if the :inverse_of functionality was available.

The attached diff is simply the 3 commits to edge that implemented :inverse_of correctly merged onto 2-3-stable. They didn't apply cleanly and there were some conflicts that need resolving.

It should run a green test suite.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Speaking to Eloy Dur&amp;aacute;n on IRC it turned out that some
other issues raised against 2.3.x would be solved more easily if
the :inverse_of functionality was available.&lt;/p&gt;
&lt;p&gt;The attached diff is simply the 3 commits to edge that
implemented :inverse_of correctly merged onto 2-3-stable. They
didn't apply cleanly and there were some conflicts that need
resolving.&lt;/p&gt;
&lt;p&gt;It should run a green test suite.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-01T21:14:53+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-01T21:14:58+00:00</updated-at>
      <user-id type="integer">136</user-id>
      <version type="integer">1</version>
      <user-name>Murray Steele</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Also, note that George Ogata has a couple of other tickets ([1], [2]) about improving the inverse_of functionality.  We should probably apply them to edge and 2-3-stable as well.


[1] https://rails.lighthouseapp.com/projects/8994/tickets/3520-add-inverse-polymorphic-association-support
[2] https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/3533-backport-inverse_of-from-30-to-23x</body>
      <body-html>&lt;div&gt;&lt;p&gt;Also, note that George Ogata has a couple of other tickets ([1],
&lt;a href=&quot;/projects/8994/changesets/2&quot; title=
&quot;Changeset [2]&quot;&gt;[2]&lt;/a&gt;) about improving the inverse_of
functionality. We should probably apply them to edge and 2-3-stable
as well.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/projects/8994/changesets/1&quot; title=
&quot;Changeset [1]&quot;&gt;[1]&lt;/a&gt; &lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/3520-add-inverse-polymorphic-association-support&quot;&gt;
https://rails.lighthouseapp.com/projects/8994/tickets/3520-add-inve...&lt;/a&gt;
&lt;a href=&quot;/projects/8994/changesets/2&quot; title=&quot;Changeset [2]&quot;&gt;[2]&lt;/a&gt;
&lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/3533-backport-inverse_of-from-30-to-23x&quot;&gt;
https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-01T21:21:34+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-01T21:21:35+00:00</updated-at>
      <user-id type="integer">136</user-id>
      <version type="integer">2</version>
      <user-name>Murray Steele</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Um... that 2nd link should be to https://rails.lighthouseapp.com/projects/8994/tickets/3513-inverse_of-not-honored-when-replacing-a-has_one-association not back to this one.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Um... that 2nd link should be to &lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/3513-inverse_of-not-honored-when-replacing-a-has_one-association&quot;&gt;
https://rails.lighthouseapp.com/projects/8994/tickets/3513-inverse_...&lt;/a&gt;
not back to this one.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-01T21:24:03+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-01T21:24:04+00:00</updated-at>
      <user-id type="integer">136</user-id>
      <version type="integer">3</version>
      <user-name>Murray Steele</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Tested both my patches on top of Murray's patch on 2-3-stable.  The whole stack applies cleanly and the tests pass.  It's also quite a simple modification to ActiveRecord all up.

Not sure what the above mentioned issues are that would be aided by inverse associations, but I'm keen to see this functionality in sometime soon.  Until then, I have a [plugin](http://github.com/oggy/inverse_of) which backports it for 2.x apps to use right now, for anyone that's interested.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Tested both my patches on top of Murray's patch on 2-3-stable.
The whole stack applies cleanly and the tests pass. It's also quite
a simple modification to ActiveRecord all up.&lt;/p&gt;
&lt;p&gt;Not sure what the above mentioned issues are that would be aided
by inverse associations, but I'm keen to see this functionality in
sometime soon. Until then, I have a &lt;a href=
&quot;http://github.com/oggy/inverse_of&quot;&gt;plugin&lt;/a&gt; which backports it
for 2.x apps to use right now, for anyone that's interested.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-02T06:26:31+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-02T06:26:32+00:00</updated-at>
      <user-id type="integer">20076</user-id>
      <version type="integer">4</version>
      <user-name>George Ogata</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Thanks for the work Murphy! The most heard &#8216;issue&#8217; is that people that use NestedAttributes can&#8217;t validate the presence of the parent. Also in multiple cases I really wanted to have access to the parent during building an associated record.

I&#8217;ve applied the patch, plus a patch from master that adds tests for the aforementioned validation problem.

http://github.com/Fingertips/rails/commits/2-3-stable

I&#8217;ve also checked George's patches, they indeed apply and the tests run. But I'd like to know if anyone else has been using these patches on a real app before I push them? Besides George that is ;)

All in all, since 2.3.5 has recently been released, I think it would be best that if this will be applied to 2.3.x we do it asap. So people have time to actually test it a while before 2.3.6 is released.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks for the work Murphy! The most heard &amp;#8216;issue&amp;#8217;
is that people that use NestedAttributes can&amp;#8217;t validate the
presence of the parent. Also in multiple cases I really wanted to
have access to the parent during building an associated record.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;ve applied the patch, plus a patch from master that adds
tests for the aforementioned validation problem.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/Fingertips/rails/commits/2-3-stable&quot;&gt;http://github.com/Fingertips/rails/commits/2-3-stable&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I&amp;#8217;ve also checked George's patches, they indeed apply and
the tests run. But I'd like to know if anyone else has been using
these patches on a real app before I push them? Besides George that
is ;)&lt;/p&gt;
&lt;p&gt;All in all, since 2.3.5 has recently been released, I think it
would be best that if this will be applied to 2.3.x we do it asap.
So people have time to actually test it a while before 2.3.6 is
released.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-02T19:37:46+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
:assigned_user: 8406
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-02T19:37:50+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">5</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I think it's safe to say my patches haven't been used much by others yet.  I only wrote them recently.

That said, one is just a one-line bug fix.  The polymorphic support is a little more involved - your call.  I agree sooner would be better, though, for the reason you cited.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think it's safe to say my patches haven't been used much by
others yet. I only wrote them recently.&lt;/p&gt;
&lt;p&gt;That said, one is just a one-line bug fix. The polymorphic
support is a little more involved - your call. I agree sooner would
be better, though, for the reason you cited.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-04T06:57:57+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-04T06:57:59+00:00</updated-at>
      <user-id type="integer">20076</user-id>
      <version type="integer">6</version>
      <user-name>George Ogata</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Updated the patch to also include the patch committed to master that resolves [2815].</body>
      <body-html>&lt;div&gt;&lt;p&gt;Updated the patch to also include the patch committed to master
that resolves &lt;a href=&quot;/projects/8994/changesets/2815&quot; title=
&quot;Changeset [2815]&quot;&gt;[2815]&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-17T10:04:24+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-17T10:04:31+00:00</updated-at>
      <user-id type="integer">136</user-id>
      <version type="integer">7</version>
      <user-name>Murray Steele</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I clearly meant #2815.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I clearly meant &lt;a href=&quot;/projects/8994/tickets/2815&quot; title=
&quot;Ticket #2815&quot;&gt;#2815&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-17T10:06:22+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-17T10:06:24+00:00</updated-at>
      <user-id type="integer">136</user-id>
      <version type="integer">8</version>
      <user-name>Murray Steele</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Just reminding myself that when #3513 and/or #3520 are applied to master, we should revisit this patch to backport them to 2-3-stable if this patch hasn't already been committed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just reminding myself that when &lt;a href=
&quot;/projects/8994/tickets/3513&quot; title=&quot;Ticket #3513&quot;&gt;#3513&lt;/a&gt; and/or
&lt;a href=&quot;/projects/8994/tickets/3520&quot; title=
&quot;Ticket #3520&quot;&gt;#3520&lt;/a&gt; are applied to master, we should revisit
this patch to backport them to 2-3-stable if this patch hasn't
already been committed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-17T12:34:05+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-17T12:34:06+00:00</updated-at>
      <user-id type="integer">136</user-id>
      <version type="integer">9</version>
      <user-name>Murray Steele</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-12-28T20:49:39+00:00</created-at>
      <creator-id type="integer">136</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">3533</number>
      <permalink>backport-inverse_of-from-30-to-23x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>backport inverse_of</tag>
      <title>Backport :inverse_of from 3.0 to 2.3.x</title>
      <updated-at type="datetime">2009-12-28T20:49:40+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">10</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Murray Steele</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3533</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>e601ae1d0afb3e0837cc356911c3d7bfa08458ff</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-12-17T10:04:24+00:00</created-at>
      <filename>inverse_of_backported_to_2-3-stable.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">356311</id>
      <size type="integer">43729</size>
      <uploader-id type="integer">136</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/356311/inverse_of_backported_to_2-3-stable.diff</url>
    </attachment>
  </attachments>
</ticket>
