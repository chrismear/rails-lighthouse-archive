<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-17T06:48:18+00:00</created-at>
  <creator-id type="integer">20005</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1844</number>
  <permalink>render-behaviour-problem</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2.3 actionpack actionview patch view</tag>
  <title>Render behaviour problem</title>
  <updated-at type="datetime">2011-02-17T06:48:18+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">15</version>
  <user-name>Repository</user-name>
  <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
  <priority-name nil="true"></priority-name>
  <original-body>If I have this on controller:

@@@ ruby
  respond_to do |format|
    format.html { ... }
    format.js
  end
@@@

And I have some JS view, the view is being rendered with the layout, on 2.2.2 it defaults to :layout =&gt; false</original-body>
  <latest-body>If I have this on controller:

@@@ ruby
  respond_to do |format|
    format.html { ... }
    format.js
  end
@@@

And I have some JS view, the view is being rendered with the layout, on 2.2.2 it defaults to :layout =&gt; false</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;If I have this on controller:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  respond_to do |format|
    format.html { ... }
    format.js
  end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And I have some JS view, the view is being rendered with the
layout, on 2.2.2 it defaults to :layout =&amp;gt; false&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If I have this on controller:

@@@ ruby
  respond_to do |format|
    format.html { ... }
    format.js
  end
@@@

And I have some JS view, the view is being rendered with the layout, on 2.2.2 it defaults to :layout =&gt; false</body>
      <body-html>&lt;div&gt;&lt;p&gt;If I have this on controller:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  respond_to do |format|
    format.html { ... }
    format.js
  end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And I have some JS view, the view is being rendered with the
layout, on 2.2.2 it defaults to :layout =&amp;gt; false&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T13:21:02+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-02T13:21:07+00:00</updated-at>
      <user-id type="integer">20005</user-id>
      <version type="integer">1</version>
      <user-name>Carlos J&#250;nior (xjunior)</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hum! The only template I have is application.html.erb</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hum! The only template I have is application.html.erb&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T16:10:10+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-02T16:10:14+00:00</updated-at>
      <user-id type="integer">20005</user-id>
      <version type="integer">2</version>
      <user-name>Carlos J&#250;nior (xjunior)</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T17:00:29+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-02T17:00:31+00:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">3</version>
      <user-name>DHH</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I can confirm that a blank Rails app on edge wraps JS templates in application.html.erb layout -- definitely not what one would expect.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I can confirm that a blank Rails app on edge wraps JS templates
in application.html.erb layout -- definitely not what one would
expect.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T17:31:11+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 424
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-02T17:31:14+00:00</updated-at>
      <user-id type="integer">192</user-id>
      <version type="integer">4</version>
      <user-name>Mislav</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Sorry for clearing the assignee, I had this comment form open from before DHH posted his update.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry for clearing the assignee, I had this comment form open
from before DHH posted his update.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T17:33:21+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-02T17:33:25+00:00</updated-at>
      <user-id type="integer">192</user-id>
      <version type="integer">5</version>
      <user-name>Mislav</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>@mislav, in my case it happened on a existing project updated to 2.3 (not that it makes that difference - I think)</body>
      <body-html>&lt;div&gt;&lt;p&gt;@mislav, in my case it happened on a existing project updated to
2.3 (not that it makes that difference - I think)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T19:13:39+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-02T19:13:42+00:00</updated-at>
      <user-id type="integer">20005</user-id>
      <version type="integer">6</version>
      <user-name>Carlos J&#250;nior (xjunior)</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>* an existing</body>
      <body-html>&lt;div&gt;&lt;ul&gt;
&lt;li&gt;an existing&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-02T19:14:02+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-02T19:14:04+00:00</updated-at>
      <user-id type="integer">20005</user-id>
      <version type="integer">7</version>
      <user-name>Carlos J&#250;nior (xjunior)</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>A failing unit test would be really helpful. The actual fix even more :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;A failing unit test would be really helpful. The actual fix even
more :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-03T23:22:23+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 actionpack actionview view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-03T23:22:27+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">8</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Here is a failing test and fix.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here is a failing test and fix.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-04T15:46:56+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3 actionpack actionview view
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-04T15:47:01+00:00</updated-at>
      <user-id type="integer">43500</user-id>
      <version type="integer">9</version>
      <user-name>Adam McCrea</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [06182ea02e92afad579998aa80144588e8865ac3]) implicitly rendering a js response should not use the default layout [#1844 state:resolved]

Signed-off-by: Joshua Peek &lt;josh@joshpeek.com&gt;
http://github.com/rails/rails/commit/06182ea02e92afad579998aa80144588e8865ac3</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [06182ea02e92afad579998aa80144588e8865ac3]) implicitly
rendering a js response should not use the default layout [&lt;a href=&quot;/projects/8994/tickets/1844&quot; title=&quot;Ticket #1844&quot;&gt;#1844&lt;/a&gt;
state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Joshua Peek &lt;a href=&quot;mailto:josh@joshpeek.com&quot;&gt;josh@joshpeek.com&lt;/a&gt; &lt;a href=&quot;http://github.com/rails/rails/commit/06182ea02e92afad579998aa80144588e8865ac3&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-05T21:46:58+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-05T21:46:59+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">10</version>
      <user-name>Repository</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Just moved an app to 2.3, and spent quite some time figuring out why my Facebox popups (it's a JQuery plugin) had lost their title elements.
Apparently *this* is why...

I was using this in my application_controller.rb:
@@@ ruby
  layout proc { |c| c.request.xhr? ? 'popup' : 'application' }
@@@
..but it never gets called now.

IMHO, this patch is not solving the problem - between it and the xhr? check on line 157, there's now NO way to default-render an HTML response with a layout from an AJAX request. 2.2.2's support, I recall, was a little more targeted...

Specifically, the bug xjunior ran into was caused by [this commit](http://github.com/rails/rails/commit/9fc23745f1511d8d97433828d9ca87970994d138) which removed the format-specific template searching code from default_layout (in layout.rb). The new code uses find_template, which automatically tries HTML templates if JS isn't available.

Ideally, it would make sense to add an argument to find_template to turn off the html failover for templates. That would put the 2.2 behavior back, *and* not break my app... :)
 
I'd be glad to submit a patch (we already have a test - yay), but I wanted to check if there was a reason that find_layout was declared with *formats, while find_template just takes a single format.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just moved an app to 2.3, and spent quite some time figuring out
why my Facebox popups (it's a JQuery plugin) had lost their title
elements. Apparently &lt;em&gt;this&lt;/em&gt; is why...&lt;/p&gt;
&lt;p&gt;I was using this in my application_controller.rb:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  layout proc { |c| c.request.xhr? ? 'popup' : 'application' }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;..but it never gets called now.&lt;/p&gt;
&lt;p&gt;IMHO, this patch is not solving the problem - between it and the
xhr? check on line 157, there's now NO way to default-render an
HTML response with a layout from an AJAX request. 2.2.2's support,
I recall, was a little more targeted...&lt;/p&gt;
&lt;p&gt;Specifically, the bug xjunior ran into was caused by &lt;a href=&quot;http://github.com/rails/rails/commit/9fc23745f1511d8d97433828d9ca87970994d138&quot;&gt;
this commit&lt;/a&gt; which removed the format-specific template
searching code from default_layout (in layout.rb). The new code
uses find_template, which automatically tries HTML templates if JS
isn't available.&lt;/p&gt;
&lt;p&gt;Ideally, it would make sense to add an argument to find_template
to turn off the html failover for templates. That would put the 2.2
behavior back, &lt;em&gt;and&lt;/em&gt; not break my app... :)&lt;/p&gt;
&lt;p&gt;I'd be glad to submit a patch (we already have a test - yay),
but I wanted to check if there was a reason that find_layout was
declared with *formats, while find_template just takes a single
format.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T08:57:51+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-20T08:57:53+00:00</updated-at>
      <user-id type="integer">22589</user-id>
      <version type="integer">11</version>
      <user-name>Matt Jones</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Matt Jones, patch would be great :)

find_layout has really funky behaviors and since it wants to look though all available templates to decide if a layout should be used. I think its kind of inconsistent, but I didn't want to make any changes to its behavior.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Matt Jones, patch would be great :)&lt;/p&gt;
&lt;p&gt;find_layout has really funky behaviors and since it wants to
look though all available templates to decide if a layout should be
used. I think its kind of inconsistent, but I didn't want to make
any changes to its behavior.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T16:55:03+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-20T16:55:05+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">12</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Matt, #1974 may be related.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Matt, &lt;a href=&quot;/projects/8994/tickets/1974&quot; title=&quot;Ticket #1974&quot;&gt;#1974&lt;/a&gt; may be related.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-20T20:25:26+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-20T20:25:28+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">13</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Considered resolved for now. Please open a new ticket for any related issues or side effects.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Considered resolved for now. Please open a new ticket for any
related issues or side effects.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-22T16:41:06+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-02-22T16:41:09+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">14</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [906aebceedb95d8caa6db6314bc90f605bdfaf2b]) Bring abstract_controller up to date with rails/master

Resolved all the conflicts since 2.3.0 -&gt; HEAD. Following is a list
of commits that could not be applied cleanly or are obviated with the
abstract_controller refactor. They all need to be revisited to ensure
that fixes made in 2.3 do not reappear in 3.0:

2259ecf368e6a6715966f69216e3ee86bf1a82a7
AR not available
  * This will be reimplemented with ActionORM or equivalent

06182ea02e92afad579998aa80144588e8865ac3
implicitly rendering a js response should not use the default layout
[#1844 state:resolved]
  * This will be handled generically

893e9eb99504705419ad6edac14d00e71cef5f12
Improve view rendering performance in development mode and reinstate
template recompiling in production [#1909 state:resolved]
  * We will need to reimplement rails-dev-boost on top of the refactor;
    the changes here are very implementation specific and cannot be
    cleanly applied. The following commits are implicated:

      199e750d46c04970b5e7684998d09405648ecbd4
      3942cb406e1d5db0ac00e03153809cc8dc4cc4db
      f8ea9f85d4f1e3e6f3b5d895bef6b013aa4b0690
      e3b166aab37ddc2fbab030b146eb61713b91bf55
      ae9f258e03c9fd5088da12c1c6cd216cc89a01f7
      44423126c6f6133a1d9cf1d0832b527e8711d40f

0cb020b4d6d838025859bd60fb8151c8e21b8e84
workaround for picking layouts based on wrong view_paths
[#1974 state:resolved]
  * The specifics of this commit no longer apply. Since it is a two-line
    commit, we will reimplement this change.

8c5cc66a831aadb159f3daaffa4208064c30af0e
make action_controller/layouts pick templates from the current instance's
view_paths instead of the class view_paths [#1974 state:resolved]
  * This does not apply at all. It should be trivial to apply the feature
    to the reimplemented ActionController::Base.

87e8b162463f13bd50d27398f020769460a770e3
fix HTML fallback for explicit templates [#2052 state:resolved]
  * There were a number of patches related to this that simply compounded
    each other. Basically none of them apply cleanly, and the underlying
    issue needs to be revisited. After discussing the underlying problem
    with Koz, we will defer these fixes for further discussion.
http://github.com/rails/rails/commit/906aebceedb95d8caa6db6314bc90f605bdfaf2b</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [906aebceedb95d8caa6db6314bc90f605bdfaf2b]) Bring
abstract_controller up to date with rails/master&lt;/p&gt;
&lt;p&gt;Resolved all the conflicts since 2.3.0 -&amp;gt; HEAD. Following is
a list of commits that could not be applied cleanly or are obviated
with the abstract_controller refactor. They all need to be
revisited to ensure that fixes made in 2.3 do not reappear in
3.0:&lt;/p&gt;
&lt;p&gt;2259ecf368e6a6715966f69216e3ee86bf1a82a7 AR not available * This
will be reimplemented with ActionORM or equivalent&lt;/p&gt;
&lt;p&gt;06182ea02e92afad579998aa80144588e8865ac3 implicitly rendering a
js response should not use the default layout [&lt;a href=&quot;/projects/8994/tickets/1844&quot; title=&quot;Ticket #1844&quot;&gt;#1844&lt;/a&gt;
state:resolved] * This will be handled generically&lt;/p&gt;
&lt;p&gt;893e9eb99504705419ad6edac14d00e71cef5f12 Improve view rendering
performance in development mode and reinstate template recompiling
in production [&lt;a href=&quot;/projects/8994/tickets/1909&quot; title=&quot;Ticket #1909&quot;&gt;#1909&lt;/a&gt; state:resolved] * We will need to
reimplement rails-dev-boost on top of the refactor;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;the changes here are very implementation specific and cannot be
cleanly applied. The following commits are implicated:

  199e750d46c04970b5e7684998d09405648ecbd4
  3942cb406e1d5db0ac00e03153809cc8dc4cc4db
  f8ea9f85d4f1e3e6f3b5d895bef6b013aa4b0690
  e3b166aab37ddc2fbab030b146eb61713b91bf55
  ae9f258e03c9fd5088da12c1c6cd216cc89a01f7
  44423126c6f6133a1d9cf1d0832b527e8711d40f
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;0cb020b4d6d838025859bd60fb8151c8e21b8e84 workaround for picking
layouts based on wrong view_paths [&lt;a href=&quot;/projects/8994/tickets/1974&quot; title=&quot;Ticket #1974&quot;&gt;#1974&lt;/a&gt;
state:resolved] * The specifics of this commit no longer apply.
Since it is a two-line&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;commit, we will reimplement this change.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;8c5cc66a831aadb159f3daaffa4208064c30af0e make
action_controller/layouts pick templates from the current
instance's view_paths instead of the class view_paths [&lt;a href=&quot;/projects/8994/tickets/1974&quot; title=&quot;Ticket #1974&quot;&gt;#1974&lt;/a&gt;
state:resolved] * This does not apply at all. It should be trivial
to apply the feature&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;to the reimplemented ActionController::Base.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;87e8b162463f13bd50d27398f020769460a770e3 fix HTML fallback for
explicit templates [&lt;a href=&quot;/projects/8994/tickets/2052&quot; title=&quot;Ticket #2052&quot;&gt;#2052&lt;/a&gt; state:resolved] * There were a number of
patches related to this that simply compounded&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;each other. Basically none of them apply cleanly, and the underlying
issue needs to be revisited. After discussing the underlying problem
with Koz, we will defer these fixes for further discussion.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/rails/rails/commit/906aebceedb95d8caa6db6314bc90f605bdfaf2b&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-04-13T23:58:49+01:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2009-04-13T23:58:51+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">15</version>
      <user-name>Repository</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;nfl throwback jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;authentic nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale authentic nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl jerseys&lt;/a&gt;
&lt;a href=&quot; http://www.wholesale-nflshop.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;nfl throwback
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;authentic nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale authentic nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a&gt;wholesale nfl jerseys&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-04T06:08:20+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">63</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2011-01-04T16:24:39+00:00</updated-at>
      <user-id type="integer">131088</user-id>
      <version type="integer">16</version>
      <user-name>icooky</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Good &lt;a href=http://www.sale-puma.com&gt;Puma shoes sale&lt;/a&gt; information for &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; fans: Yesterday, German sportswear maker Cheap Running Shoes purchased effectively lot of money Brands. The transaction entails the Cobra brand, too as linked inventory, intellectual house and endorsement contracts. It also helps make &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Shoes . They provide you with the utmost game and support all through the feet.You can happen around several types of basketball sneakers such as high-top,low-top and mid-top.The &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt; and boots give you best ankle support will support want you to obtain steadiness.
As we konw,Trail &lt;a href=http://www.sale-puma.com&gt;Puma Drift Cat&lt;/a&gt; Shoes black, Trail &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; ShoesWhite Black? 50 many years backshore are actually released within a great accomplishment. Trail Running Shoes speed cat shoes?go in add-on to King Pele into planet tournament finals, bottom tennis discs matchrs within pasture inhabit an vital area in hold out in Wimbledon Dun; Its working firms have premier manufacturers and major marketplace positions in distilled spirits, residence and security, and golf products. The reply go all through the &lt;a href=http://www.sale-puma.com&gt;Cheap puma shoes&lt;/a&gt; on sale-here you are able to happen around several distcoun.&lt;a href=http://www.sale-puma.com&gt;puma shoes on sale &lt;/a&gt;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good &lt;a href=&quot;http:&quot;&gt;Puma shoes sale information for &lt;a href=
&quot;http:&quot;&gt;Puma shoes fans: Yesterday, German sportswear maker Cheap
Running Shoes purchased effectively lot of money Brands. The
transaction entails the Cobra brand, too as linked inventory,
intellectual house and endorsement contracts. It also helps make
&lt;a href=&quot;http:&quot;&gt;puma speed cat Shoes . They provide you with the
utmost game and support all through the feet.You can happen around
several types of basketball sneakers such as high-top,low-top and
mid-top.The &lt;a href=&quot;http:&quot;&gt;Puma shoes online and boots give you
best ankle support will support want you to obtain steadiness.&lt;br&gt;
As we konw,Trail &lt;a href=&quot;http:&quot;&gt;Puma Drift Cat Shoes black, Trail
&lt;a href=&quot;http:&quot;&gt;Puma future cat ShoesWhite Black? 50 many years
backshore are actually released within a great accomplishment.
Trail Running Shoes speed cat shoes?go in add-on to King Pele into
planet tournament finals, bottom tennis discs matchrs within
pasture inhabit an vital area in hold out in Wimbledon Dun; Its
working firms have premier manufacturers and major marketplace
positions in distilled spirits, residence and security, and golf
products. The reply go all through the &lt;a href=&quot;http:&quot;&gt;Cheap puma
shoes on sale-here you are able to happen around several
distcoun.&lt;a href=&quot;http:&quot;&gt;puma shoes on sale .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-17T06:34:27+00:00</created-at>
      <creator-id type="integer">20005</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1844</number>
      <permalink>render-behaviour-problem</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2.3 actionpack actionview patch view</tag>
      <title>Render behaviour problem</title>
      <updated-at type="datetime">2011-02-17T06:48:18+00:00</updated-at>
      <user-id type="integer">137442</user-id>
      <version type="integer">17</version>
      <user-name>gfh</user-name>
      <creator-name>Carlos J&#250;nior (xjunior)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1844</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>f43bfa07651b6d2e3516531547b27116c5cde925</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-04T15:46:56+00:00</created-at>
      <filename>render_js_without_layout.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">84998</id>
      <size type="integer">2979</size>
      <uploader-id type="integer">43500</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/84998/render_js_without_layout.diff</url>
    </attachment>
  </attachments>
</ticket>
