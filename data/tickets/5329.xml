<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-22T08:32:35+00:00</created-at>
  <creator-id type="integer">16762</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5329</number>
  <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>actionmailer i18n infinity locale</tag>
  <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
  <updated-at type="datetime">2011-02-22T08:32:35+00:00</updated-at>
  <user-id type="integer">133327</user-id>
  <version type="integer">26</version>
  <user-name>eddyk</user-name>
  <creator-name>Ji&#345;&#237; Zajpt</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
  <priority-name>Low</priority-name>
  <original-body>When using I18n.with_locale function inside a function called from ActionMailer::Base, SystemStackError (stack level too deep) is raised. Also, simply changing locale with I18n.locale= results in the same exception. When using outside of ActionMailer, everything works as expected.

Stack trace:

@@@
SystemStackError (stack level too deep):
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:174:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
&#8230;.
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  i18n (0.4.1) lib/i18n.rb:39:in `locale='
  app/models/invoice_pdf.rb:26:in `to_pdf'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/dependencies.rb:442:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `each'
  app/models/invoice_pdf.rb:20:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `to_pdf'
  app/mailers/invoice_mailer.rb:6:in `email'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/old_api.rb:75:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:446:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:441:in `initialize'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `new'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `method_missing'
  app/controllers/invoice_emails_controller.rb:20:in `create'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rendering.rb:11:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:18:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:445:in `_run__1023616770__process_action__1623385099__callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `_run_process_action_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `run_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rescue.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:133:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:173:in `action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:27:in `call'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:148:in `call'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:89:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:87:in `optimized_each'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:88:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:139:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:492:in `call'
  haml (3.0.15) lib/sass/plugin/rack.rb:41:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/best_standards_support.rb:8:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/head.rb:14:in `call'
  rack (1.2.1) lib/rack/methodoverride.rb:24:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/flash.rb:177:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/cookies.rb:268:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:46:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:410:in `_run_call_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.1) lib/rack/sendfile.rb:107:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/logger.rb:13:in `call'
  rack (1.2.1) lib/rack/runtime.rb:17:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `synchronize'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:168:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `method_missing'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.2.1) lib/rack/content_length.rb:13:in `call'
  rack (1.2.1) lib/rack/handler/webrick.rb:52:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.2.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.2.1) lib/rack/server.rb:213:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands/server.rb:65:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:30
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27:in `tap'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27
  script/rails:6:in `require'
  script/rails:6

Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_trace.erb (89.7ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (76.0ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (175.8ms)
@@@</original-body>
  <latest-body>When using I18n.with_locale function inside a function called from ActionMailer::Base, SystemStackError (stack level too deep) is raised. Also, simply changing locale with I18n.locale= results in the same exception. When using outside of ActionMailer, everything works as expected.

Stack trace:

@@@
SystemStackError (stack level too deep):
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:174:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
&#8230;.
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  i18n (0.4.1) lib/i18n.rb:39:in `locale='
  app/models/invoice_pdf.rb:26:in `to_pdf'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/dependencies.rb:442:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `each'
  app/models/invoice_pdf.rb:20:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `to_pdf'
  app/mailers/invoice_mailer.rb:6:in `email'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/old_api.rb:75:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:446:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:441:in `initialize'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `new'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `method_missing'
  app/controllers/invoice_emails_controller.rb:20:in `create'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rendering.rb:11:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:18:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:445:in `_run__1023616770__process_action__1623385099__callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `_run_process_action_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `run_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rescue.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:133:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:173:in `action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:27:in `call'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:148:in `call'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:89:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:87:in `optimized_each'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:88:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:139:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:492:in `call'
  haml (3.0.15) lib/sass/plugin/rack.rb:41:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/best_standards_support.rb:8:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/head.rb:14:in `call'
  rack (1.2.1) lib/rack/methodoverride.rb:24:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/flash.rb:177:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/cookies.rb:268:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:46:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:410:in `_run_call_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.1) lib/rack/sendfile.rb:107:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/logger.rb:13:in `call'
  rack (1.2.1) lib/rack/runtime.rb:17:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `synchronize'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:168:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `method_missing'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.2.1) lib/rack/content_length.rb:13:in `call'
  rack (1.2.1) lib/rack/handler/webrick.rb:52:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.2.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.2.1) lib/rack/server.rb:213:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands/server.rb:65:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:30
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27:in `tap'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27
  script/rails:6:in `require'
  script/rails:6

Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_trace.erb (89.7ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (76.0ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (175.8ms)
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When using I18n.with_locale function inside a function called
from ActionMailer::Base, SystemStackError (stack level too deep) is
raised. Also, simply changing locale with I18n.locale= results in
the same exception. When using outside of ActionMailer, everything
works as expected.&lt;/p&gt;
&lt;p&gt;Stack trace:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;SystemStackError (stack level too deep):
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:174:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
&amp;#8230;.
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  i18n (0.4.1) lib/i18n.rb:39:in `locale='
  app/models/invoice_pdf.rb:26:in `to_pdf'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/dependencies.rb:442:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `each'
  app/models/invoice_pdf.rb:20:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `to_pdf'
  app/mailers/invoice_mailer.rb:6:in `email'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/old_api.rb:75:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:446:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:441:in `initialize'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `new'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `method_missing'
  app/controllers/invoice_emails_controller.rb:20:in `create'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rendering.rb:11:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:18:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:445:in `_run__1023616770__process_action__1623385099__callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `_run_process_action_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `run_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rescue.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:133:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:173:in `action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:27:in `call'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:148:in `call'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:89:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:87:in `optimized_each'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:88:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:139:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:492:in `call'
  haml (3.0.15) lib/sass/plugin/rack.rb:41:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/best_standards_support.rb:8:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/head.rb:14:in `call'
  rack (1.2.1) lib/rack/methodoverride.rb:24:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/flash.rb:177:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/cookies.rb:268:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:46:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:410:in `_run_call_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.1) lib/rack/sendfile.rb:107:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/logger.rb:13:in `call'
  rack (1.2.1) lib/rack/runtime.rb:17:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `synchronize'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:168:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `method_missing'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.2.1) lib/rack/content_length.rb:13:in `call'
  rack (1.2.1) lib/rack/handler/webrick.rb:52:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.2.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.2.1) lib/rack/server.rb:213:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands/server.rb:65:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:30
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27:in `tap'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27
  script/rails:6:in `require'
  script/rails:6

Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_trace.erb (89.7ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (76.0ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (175.8ms)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When using I18n.with_locale function inside a function called from ActionMailer::Base, SystemStackError (stack level too deep) is raised. Also, simply changing locale with I18n.locale= results in the same exception. When using outside of ActionMailer, everything works as expected.

Stack trace:

@@@
SystemStackError (stack level too deep):
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:174:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
&#8230;.
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  i18n (0.4.1) lib/i18n.rb:39:in `locale='
  app/models/invoice_pdf.rb:26:in `to_pdf'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/dependencies.rb:442:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `each'
  app/models/invoice_pdf.rb:20:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `to_pdf'
  app/mailers/invoice_mailer.rb:6:in `email'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/old_api.rb:75:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:446:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:441:in `initialize'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `new'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `method_missing'
  app/controllers/invoice_emails_controller.rb:20:in `create'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rendering.rb:11:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:18:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:445:in `_run__1023616770__process_action__1623385099__callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `_run_process_action_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `run_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rescue.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:133:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:173:in `action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:27:in `call'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:148:in `call'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:89:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:87:in `optimized_each'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:88:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:139:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:492:in `call'
  haml (3.0.15) lib/sass/plugin/rack.rb:41:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/best_standards_support.rb:8:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/head.rb:14:in `call'
  rack (1.2.1) lib/rack/methodoverride.rb:24:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/flash.rb:177:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/cookies.rb:268:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:46:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:410:in `_run_call_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.1) lib/rack/sendfile.rb:107:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/logger.rb:13:in `call'
  rack (1.2.1) lib/rack/runtime.rb:17:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `synchronize'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:168:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `method_missing'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.2.1) lib/rack/content_length.rb:13:in `call'
  rack (1.2.1) lib/rack/handler/webrick.rb:52:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.2.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.2.1) lib/rack/server.rb:213:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands/server.rb:65:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:30
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27:in `tap'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27
  script/rails:6:in `require'
  script/rails:6

Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_trace.erb (89.7ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (76.0ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (175.8ms)
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;When using I18n.with_locale function inside a function called
from ActionMailer::Base, SystemStackError (stack level too deep) is
raised. Also, simply changing locale with I18n.locale= results in
the same exception. When using outside of ActionMailer, everything
works as expected.&lt;/p&gt;
&lt;p&gt;Stack trace:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;SystemStackError (stack level too deep):
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:174:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
&amp;#8230;.
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_view/lookup_context.rb:175:in `locale='
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:28:in `locale='
  i18n (0.4.1) lib/i18n.rb:39:in `locale='
  app/models/invoice_pdf.rb:26:in `to_pdf'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/dependencies.rb:442:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `each'
  app/models/invoice_pdf.rb:20:in `each_with_index'
  app/models/invoice_pdf.rb:20:in `to_pdf'
  app/mailers/invoice_mailer.rb:6:in `email'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/old_api.rb:75:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:446:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:441:in `initialize'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `new'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionmailer/lib/action_mailer/base.rb:425:in `method_missing'
  app/controllers/invoice_emails_controller.rb:20:in `create'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:148:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rendering.rb:11:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:18:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:445:in `_run__1023616770__process_action__1623385099__callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:404:in `_run_process_action_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:93:in `run_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/callbacks.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/notifications.rb:52:in `instrument'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rescue.rb:17:in `process_action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/base.rb:117:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/abstract_controller/rendering.rb:40:in `process'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:133:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_controller/metal.rb:173:in `action'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:62:in `dispatch'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:27:in `call'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:148:in `call'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:89:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:87:in `optimized_each'
  rack-mount (0.6.9) lib/rack/mount/code_generation.rb:88:in `recognize'
  rack-mount (0.6.9) lib/rack/mount/route_set.rb:139:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/routing/route_set.rb:492:in `call'
  haml (3.0.15) lib/sass/plugin/rack.rb:41:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/best_standards_support.rb:8:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/head.rb:14:in `call'
  rack (1.2.1) lib/rack/methodoverride.rb:24:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/flash.rb:177:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/cookies.rb:268:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:46:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/callbacks.rb:410:in `_run_call_callbacks'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.1) lib/rack/sendfile.rb:107:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:48:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/logger.rb:13:in `call'
  rack (1.2.1) lib/rack/runtime.rb:17:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  rack (1.2.1) lib/rack/lock.rb:11:in `synchronize'
  rack (1.2.1) lib/rack/lock.rb:11:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/static.rb:30:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:168:in `call'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `send'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/application.rb:77:in `method_missing'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.2.1) lib/rack/content_length.rb:13:in `call'
  rack (1.2.1) lib/rack/handler/webrick.rb:52:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /Users/jzajpt/.rvm/rubies/ruby-1.8.7-p299/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.2.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.2.1) lib/rack/server.rb:213:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands/server.rb:65:in `start'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:30
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27:in `tap'
  /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/railties/lib/rails/commands.rb:27
  script/rails:6:in `require'
  script/rails:6

Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_trace.erb (89.7ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (76.0ms)
Rendered /Users/jzajpt/.rvm/gems/ruby-1.8.7-p299@rails3/bundler/gems/rails-0953c04/actionpack/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (175.8ms)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-07T16:04:08+01:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2010-08-07T16:04:10+01:00</updated-at>
      <user-id type="integer">16762</user-id>
      <version type="integer">1</version>
      <user-name>Ji&#345;&#237; Zajpt</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've got the same problem, with a similar stack trace.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've got the same problem, with a similar stack trace.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-24T00:44:33+01:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2010-09-24T00:44:36+01:00</updated-at>
      <user-id type="integer">53265</user-id>
      <version type="integer">2</version>
      <user-name>Don Werve</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ok, I should have google earlier&#8230; I have the exact same error. I moved my I18n.with_locale code out of the mail vier, as I have always got deprecation warnings for the block helper (although it does not make any sense). So my mailer looks like this:

I18n.in_locale(locale) do
  mail :to =&gt; @user.to_email_recipient,
       :subject =&gt; I18n.t(&quot;new_message.subject&quot;, :title =&gt; @topic.subject)
end

And it seems to work for some methods in the mailer and breaks on others. And I have no clue whats happening!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, I should have google earlier&amp;#8230; I have the exact same
error. I moved my I18n.with_locale code out of the mail vier, as I
have always got deprecation warnings for the block helper (although
it does not make any sense). So my mailer looks like this:&lt;/p&gt;
&lt;p&gt;I18n.in_locale(locale) do&lt;br&gt;
mail :to =&amp;gt; @user.to_email_recipient,&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;   :subject =&amp;gt; I18n.t(&quot;new_message.subject&quot;, :title =&amp;gt; @topic.subject)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;end&lt;/p&gt;
&lt;p&gt;And it seems to work for some methods in the mailer and breaks
on others. And I have no clue whats happening!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-15T00:36:49+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2010-12-15T00:36:57+00:00</updated-at>
      <user-id type="integer">42458</user-id>
      <version type="integer">3</version>
      <user-name>Maximilian Schulz</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ok, this is actually not a problem with the I18n.with_locale feature, but has to do with exceptions raised in the associated mail view. The with_locale call just hides the real error, which is really annoying!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, this is actually not a problem with the I18n.with_locale
feature, but has to do with exceptions raised in the associated
mail view. The with_locale call just hides the real error, which is
really annoying!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-15T01:20:06+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2010-12-15T01:20:14+00:00</updated-at>
      <user-id type="integer">42458</user-id>
      <version type="integer">4</version>
      <user-name>Maximilian Schulz</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've got the same problem with &quot;with_locale&quot; method. 
When sending using rails console everything works fine, but when calling from a controller I get the same error.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've got the same problem with &quot;with_locale&quot; method.&lt;br&gt;
When sending using rails console everything works fine, but when
calling from a controller I get the same error.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-20T15:56:28+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2010-12-20T15:56:39+00:00</updated-at>
      <user-id type="integer">129658</user-id>
      <version type="integer">5</version>
      <user-name>Thiago Morello</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>i also get this problem in rails 3.0.3 ... the locale= in abstract_controller/rendering.rb and this call action_view/lookup_context.rb and this call the first again. Endless loop.

     # ree-1.8.7-2010.01@rails3/gems/actionpack-3.0.3/lib/abstract_controller/rendering.rb:28:in `locale='
     # ree-1.8.7-2010.01@rails3/gems/actionpack-3.0.3/lib/action_view/lookup_context.rb:175:in `locale='

Jos&#233; added a TODO to deprecate I18n.locale from controllers, but it does not say how the new api should is. I hope this will fix it.

I could fix it by removing the I18nProxy
     # ree-1.8.7-2010.01@rails3/gems/actionpack-3.0.3/lib/abstract_controller/rendering.rb:39

     +      old_config, I18n.config = I18n.config, I18n.config
     -      old_config, I18n.config = I18n.config, I18nProxy.new(I18n.config, lookup_context)

or better patch it via config/initializer/rails3_abstract_controller_rendering_fix.rb

     module AbstractController::Rendering
       def process(*)
         super
       end
     end</body>
      <body-html>&lt;div&gt;&lt;p&gt;i also get this problem in rails 3.0.3 ... the locale= in
abstract_controller/rendering.rb and this call
action_view/lookup_context.rb and this call the first again.
Endless loop.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; # ree-1.8.7-2010.01@rails3/gems/actionpack-3.0.3/lib/abstract_controller/rendering.rb:28:in `locale='
 # ree-1.8.7-2010.01@rails3/gems/actionpack-3.0.3/lib/action_view/lookup_context.rb:175:in `locale='&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Jos&amp;eacute; added a TODO to deprecate I18n.locale from
controllers, but it does not say how the new api should is. I hope
this will fix it.&lt;/p&gt;
&lt;p&gt;I could fix it by removing the I18nProxy&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; # ree-1.8.7-2010.01@rails3/gems/actionpack-3.0.3/lib/abstract_controller/rendering.rb:39

 +      old_config, I18n.config = I18n.config, I18n.config
 -      old_config, I18n.config = I18n.config, I18nProxy.new(I18n.config, lookup_context)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;or better patch it via
config/initializer/rails3_abstract_controller_rendering_fix.rb&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; module AbstractController::Rendering
   def process(*)
     super
   end
 end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-28T18:22:59+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2010-12-28T18:23:14+00:00</updated-at>
      <user-id type="integer">35717</user-id>
      <version type="integer">6</version>
      <user-name>aka47</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I cannot reproduce. Could someone provide a test case to Action Mailer test suite?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I cannot reproduce. Could someone provide a test case to Action
Mailer test suite?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-12-28T21:46:59+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2010-12-28T21:47:15+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">7</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It is true that &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;monlcer online store&lt;/a&gt; we have been leading  a difficult &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler&lt;/a&gt; life, for we need  not only to be &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;discount moncler jackets&lt;/a&gt; under various external pressures, but also to be in the &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler sale&lt;/a&gt; face of internal perplexities. Even a mere &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler jackets&lt;/a&gt; glance would make &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;http://www.monclergo.com/&lt;/a&gt; you moved and  inpired.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It is true that &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;monlcer
online store&lt;/a&gt; we have been leading a difficult &lt;a href=
&quot;http://www.monclergo.com/&quot;&gt;moncler&lt;/a&gt; life, for we need not only
to be &lt;a href=&quot;http://www.monclergo.com/&quot;&gt;discount moncler
jackets&lt;/a&gt; under various external pressures, but also to be in the
&lt;a href=&quot;http://www.monclergo.com/&quot;&gt;moncler sale&lt;/a&gt; face of
internal perplexities. Even a mere &lt;a href=
&quot;http://www.monclergo.com/&quot;&gt;moncler jackets&lt;/a&gt; glance would make
&lt;a href=&quot;http://www.monclergo.com/&quot;&gt;http://www.monclergo.com/&lt;/a&gt;
you moved and inpired.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:19:12+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:15+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">8</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>A true love &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler clothing&lt;/a&gt; is what doesn&#8216;t strive for busyness, for extravagance, for luxury, and &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler outewear&lt;/a&gt; moreover for hokum.There is someone that &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler coats&lt;/a&gt; is coming or passing away in your &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler&lt;/a&gt; life around the clock, so you may lose sight of those &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler jackets&lt;/a&gt; seen, and forget those &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;http://www.monclerus.com/&lt;/a&gt; remembered.</body>
      <body-html>&lt;div&gt;&lt;p&gt;A true love &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler
clothing&lt;/a&gt; is what doesn&amp;#8216;t strive for busyness, for
extravagance, for luxury, and &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;moncler outewear&lt;/a&gt; moreover for
hokum.There is someone that &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;moncler coats&lt;/a&gt; is coming or passing
away in your &lt;a href=&quot;http://www.monclerus.com/&quot;&gt;moncler&lt;/a&gt; life
around the clock, so you may lose sight of those &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;moncler jackets&lt;/a&gt; seen, and forget
those &lt;a href=
&quot;http://www.monclerus.com/&quot;&gt;http://www.monclerus.com/&lt;/a&gt;
remembered.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:20:40+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:15+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">9</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Some may be wicked, and some may be &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;ugg boots sale&lt;/a&gt; despicable. Only when I put myself &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;ugg boots&lt;/a&gt; in their position did I know they are more &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots&lt;/a&gt; miserable than I. So forgive all that you have met &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;discount ugg boots&lt;/a&gt; , no matter what kind of &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots sale&lt;/a&gt; persons they are. From that you would get angry with your &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;http://www.goodfurboots.com/&lt;/a&gt; friends, we can conclude you sitll care about the friendship between you.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Some may be wicked, and some may be &lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;ugg boots sale&lt;/a&gt; despicable. Only
when I put myself &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;ugg
boots&lt;/a&gt; in their position did I know they are more &lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots&lt;/a&gt; miserable than
I. So forgive all that you have met &lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;discount ugg boots&lt;/a&gt; , no matter
what kind of &lt;a href=&quot;http://www.goodfurboots.com/&quot;&gt;cheap ugg boots
sale&lt;/a&gt; persons they are. From that you would get angry with your
&lt;a href=
&quot;http://www.goodfurboots.com/&quot;&gt;http://www.goodfurboots.com/&lt;/a&gt;
friends, we can conclude you sitll care about the friendship
between you.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:21:46+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:16+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">10</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Happiness is accompanied by &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg boots sale&lt;/a&gt; sorrow, and it would turn &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;discount ugg boots&lt;/a&gt; sunny after rain as well. If rain remains after rain and sorrow &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg boots&lt;/a&gt; remains after sorrow, please take those &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg australia boots&lt;/a&gt; farewells easy, and turn to smilingly look for yourself who is never to appear &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;http://www.topuggworld.com/&lt;/a&gt; .</body>
      <body-html>&lt;div&gt;&lt;p&gt;Happiness is accompanied by &lt;a href=
&quot;http://www.topuggworld.com/&quot;&gt;ugg boots sale&lt;/a&gt; sorrow, and it
would turn &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;discount ugg
boots&lt;/a&gt; sunny after rain as well. If rain remains after rain and
sorrow &lt;a href=&quot;http://www.topuggworld.com/&quot;&gt;ugg boots&lt;/a&gt; remains
after sorrow, please take those &lt;a href=
&quot;http://www.topuggworld.com/&quot;&gt;ugg australia boots&lt;/a&gt; farewells
easy, and turn to smilingly look for yourself who is never to
appear &lt;a href=
&quot;http://www.topuggworld.com/&quot;&gt;http://www.topuggworld.com/&lt;/a&gt; .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:22:29+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:16+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">11</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Happiness &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian louboutin sale&lt;/a&gt; is like a pebble dropped into  a &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian louboutin&lt;/a&gt; pool to set in motion an  ever-widening circle of &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian  louboutin shoes&lt;/a&gt; ripples.  As Stevenson has said &lt;a href=&quot;http://www.christianlouboutinshoestore.com/productlist-two-43.html&quot;&gt;christian  louboutin boots&lt;/a&gt;, being happy is a &lt;a href=&quot;http://www.christianlouboutinshoestore.com/productlist-one-21.html&quot;&gt;tory  borch shoes&lt;/a&gt; duty. There is no exact definition of the &lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;http://www.christianlouboutinshoestore.com/ &lt;/a&gt; word happiness.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Happiness &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian louboutin
sale&lt;/a&gt; is like a pebble dropped into a &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian
louboutin&lt;/a&gt; pool to set in motion an ever-widening circle of
&lt;a href=&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;christian
louboutin shoes&lt;/a&gt; ripples. As Stevenson has said &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/productlist-two-43.html&quot;&gt;
christian louboutin boots&lt;/a&gt;, being happy is a &lt;a href=
&quot;http://www.christianlouboutinshoestore.com/productlist-one-21.html&quot;&gt;
tory borch shoes&lt;/a&gt; duty. There is no exact definition of the
&lt;a href=
&quot;http://www.christianlouboutinshoestore.com/&quot;&gt;http://www.christianlouboutinshoestore.com/&lt;/a&gt;
word happiness.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:23:16+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:17+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">12</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Maybe God wants us to meet &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;cheap ed hardy clothing sale&lt;/a&gt; a few wrong people before meeting the right &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;womens ed hardy clothing&lt;/a&gt; one, so that when we finally meet the &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy online shop&lt;/a&gt; person, we will know how to be grateful &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy clothing&lt;/a&gt; .Do not cry because it is &lt;a href=&quot;http://www.edhardy-buy.com/mens-moncler-jackets-c-173.html&quot;&gt;mens  moncler jackets&lt;/a&gt; over, smile because it happened &lt;a href=&quot;http://www.edhardy-buy.com/&quot;&gt;http://www.edhardy-buy.com/&lt;/a&gt;  .</body>
      <body-html>&lt;div&gt;&lt;p&gt;Maybe God wants us to meet &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;cheap ed hardy clothing sale&lt;/a&gt; a
few wrong people before meeting the right &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;womens ed hardy clothing&lt;/a&gt; one, so
that when we finally meet the &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy online shop&lt;/a&gt; person, we
will know how to be grateful &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;ed hardy clothing&lt;/a&gt; .Do not cry
because it is &lt;a href=
&quot;http://www.edhardy-buy.com/mens-moncler-jackets-c-173.html&quot;&gt;mens
moncler jackets&lt;/a&gt; over, smile because it happened &lt;a href=
&quot;http://www.edhardy-buy.com/&quot;&gt;http://www.edhardy-buy.com/&lt;/a&gt; .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:24:05+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:17+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">13</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I would not care success &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;christian louboutin shoes&lt;/a&gt; or failure, for I will only struggle &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;louboutin sale&lt;/a&gt;  ahead as long as I   have been destined to the &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;discount christian louboutin  shoes&lt;/a&gt;&lt;strong&gt; &lt;/strong&gt;distance. I would not care the &lt;a href=&quot;http://www.louboutinszone.com/Christian-Louboutin-Booties-s37/&quot;&gt;christian  louboutin booties&lt;/a&gt; difficulties around, for   what I can leave on the &lt;a href=&quot;http://www.louboutinszone.com/Christian-Louboutin-Boots-s38/&quot;&gt;christian  louboutin boots&lt;/a&gt; earth is only their view of my back since I have been   marching toward the &lt;a href=&quot;http://www.louboutinszone.com/&quot;&gt;http://www.louboutinszone.com/&lt;/a&gt;  horizontal.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I would not care success &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;christian louboutin shoes&lt;/a&gt; or
failure, for I will only struggle &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;louboutin sale&lt;/a&gt; ahead as long
as I have been destined to the &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;discount christian louboutin
shoes&lt;/a&gt; distance. I would not care the &lt;a href=
&quot;http://www.louboutinszone.com/Christian-Louboutin-Booties-s37/&quot;&gt;christian
louboutin booties&lt;/a&gt; difficulties around, for what I can leave on
the &lt;a href=
&quot;http://www.louboutinszone.com/Christian-Louboutin-Boots-s38/&quot;&gt;christian
louboutin boots&lt;/a&gt; earth is only their view of my back since I
have been marching toward the &lt;a href=
&quot;http://www.louboutinszone.com/&quot;&gt;http://www.louboutinszone.com/&lt;/a&gt;
horizontal.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:25:11+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:18+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">14</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The tragedy of &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;louboutin shoes&lt;/a&gt; life is not so much what men suffer, but what &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin sale&lt;/a&gt; they miss. I find life an exciting &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin shoes&lt;/a&gt; business and most exciting when it is lived for &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;discount christian louboutin&lt;/a&gt; others. Young men make great mistakes in &lt;a href=&quot;http://www.louboutinsonline.com/Discount-Christian-Louboutin-Pumps/&quot;&gt;christian louboutin pumps&lt;/a&gt; life for one thing, they idealize love &lt;a href=&quot;http://www.louboutinsonline.com/&quot;&gt;http://www.louboutinsonline.com/&lt;/a&gt; too much.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The tragedy of &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;louboutin shoes&lt;/a&gt; life is not
so much what men suffer, but what &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin sale&lt;/a&gt;
they miss. I find life an exciting &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;christian louboutin shoes&lt;/a&gt;
business and most exciting when it is lived for &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;discount christian louboutin&lt;/a&gt;
others. Young men make great mistakes in &lt;a href=
&quot;http://www.louboutinsonline.com/Discount-Christian-Louboutin-Pumps/&quot;&gt;
christian louboutin pumps&lt;/a&gt; life for one thing, they idealize
love &lt;a href=
&quot;http://www.louboutinsonline.com/&quot;&gt;http://www.louboutinsonline.com/&lt;/a&gt;
too much.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-03T06:26:04+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-03T06:50:19+00:00</updated-at>
      <user-id type="integer">130939</user-id>
      <version type="integer">15</version>
      <user-name>afra99</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have the same problem using an I18n.locale call within the actionmailer method. The error triggers if the actionmailer-method is called from from inside a controller. Find a diff containing the testcase added.
Thank you Jose for pointing me in the right direction how to trigger the error in the testcase!</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have the same problem using an I18n.locale call within the
actionmailer method. The error triggers if the actionmailer-method
is called from from inside a controller. Find a diff containing the
testcase added.&lt;br&gt;
Thank you Jose for pointing me in the right direction how to
trigger the error in the testcase!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-14T08:39:39+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-14T08:39:57+00:00</updated-at>
      <user-id type="integer">132559</user-id>
      <version type="integer">16</version>
      <user-name>Frank Fischer</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Simply calling I18n.locale= in an ActionMailer method is sufficient to trigger this bug.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Simply calling I18n.locale= in an ActionMailer method is
sufficient to trigger this bug.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-16T08:56:59+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: actionmailer locale
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Using I18n.with_locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-16T08:57:17+00:00</updated-at>
      <user-id type="integer">3902</user-id>
      <version type="integer">17</version>
      <user-name>f.svehla</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-16T08:57:58+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- 
:title: Using I18n.with_locale in ActionMailer raises SystemStackError
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-16T08:58:15+00:00</updated-at>
      <user-id type="integer">3902</user-id>
      <version type="integer">18</version>
      <user-name>f.svehla</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@f.svhela: Can you provide a test case to prove your point? It's because I have one proving you are wrong ;). Btw. - This was the reason why Jose couldn't reproduce the error in first place.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@f.svhela: Can you provide a test case to prove your point? It's
because I have one proving you are wrong ;). Btw. - This was the
reason why Jose couldn't reproduce the error in first place.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-18T00:02:01+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-18T00:02:21+00:00</updated-at>
      <user-id type="integer">132559</user-id>
      <version type="integer">19</version>
      <user-name>Frank Fischer</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Choose your &lt;b&gt;&lt;a href=&quot;http://www.bridalgownsinlove.com/cheap-designer-wedding-dresses-2011-35&quot;&gt;Designer Wedding Dresses 2011&lt;/a&gt;&lt;/b&gt; should be an enjoyable experience and that is what the bride wants big and beautiful! Every bride should receive personal attention when shopping for &lt;b&gt;&lt;a href=&quot;http://www.bridalgownsinlove.com/cheap-empire-waist-wedding-dresses-8&quot;&gt;Wholesale Empire Waist Wedding Dresses&lt;/a&gt;&lt;/b&gt; .
Ask around and visit several stores before making a decision. Note, however, there is now a large and beautiful selection of &lt;b&gt;&lt;a href=&quot;http://www.bridalgownsinlove.com/cheap-flower-girl-dresses-2&quot;&gt;Wholesale Flower girl dresses&lt;/a&gt;&lt;/b&gt; that can be purchased online.
Online shopping for bridal gown size could be your best bet. Styles include long or short sleeves, tight sleeves or strapless dresses nice to see a full figure and bare shoulders.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Choose your &lt;b&gt;&lt;a href=
&quot;http://www.bridalgownsinlove.com/cheap-designer-wedding-dresses-2011-35&quot;&gt;
Designer Wedding Dresses 2011&lt;/a&gt;&lt;/b&gt; should be an enjoyable
experience and that is what the bride wants big and beautiful!
Every bride should receive personal attention when shopping for
&lt;b&gt;&lt;a href=
&quot;http://www.bridalgownsinlove.com/cheap-empire-waist-wedding-dresses-8&quot;&gt;
Wholesale Empire Waist Wedding Dresses&lt;/a&gt;&lt;/b&gt; .&lt;br&gt;
Ask around and visit several stores before making a decision. Note,
however, there is now a large and beautiful selection of
&lt;b&gt;&lt;a href=&quot;http://www.bridalgownsinlove.com/cheap-flower-girl-dresses-2&quot;&gt;
Wholesale Flower girl dresses&lt;/a&gt;&lt;/b&gt; that can be purchased
online.&lt;br&gt;
Online shopping for bridal gown size could be your best bet. Styles
include long or short sleeves, tight sleeves or strapless dresses
nice to see a full figure and bare shoulders.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-18T08:31:41+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-18T08:52:32+00:00</updated-at>
      <user-id type="integer">133048</user-id>
      <version type="integer">20</version>
      <user-name>mary01</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I can confirm seeing the stack problem when the mailer is created in a controller.  In my unit tests, generating the email worked fine.

The monkey patch from aka47 appears to work.

&lt;code&gt;
module AbstractController::Rendering
   def process(*)
     super
   end
 end
&lt;/code&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;I can confirm seeing the stack problem when the mailer is
created in a controller. In my unit tests, generating the email
worked fine.&lt;/p&gt;
&lt;p&gt;The monkey patch from aka47 appears to work.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;br&gt;
module AbstractController::Rendering&lt;br&gt;
def process(*)&lt;/code&gt;&lt;/p&gt;
{mkd-extraction-08d005cc18c52729bf1100e0f5943312}
&lt;p&gt;end end&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-19T22:04:32+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>needs-more-info</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-19T22:04:52+00:00</updated-at>
      <user-id type="integer">133327</user-id>
      <version type="integer">21</version>
      <user-name>eddyk</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [262b2ea8cda20999ddf8c4bf13b7a70453e996d2]) Solve SystemStackError when changing locale inside ActionMailer [#5329 state:resolved]
https://github.com/rails/rails/commit/262b2ea8cda20999ddf8c4bf13b7a70453e996d2</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/262b2ea8cda20999ddf8c4bf13b7a70453e996d2&quot;
title=
&quot;Changeset [262b2ea8cda20999ddf8c4bf13b7a70453e996d2]&quot;&gt;[262b2ea8cda20999ddf8c4bf13b7a70453e996d2]&lt;/a&gt;)
Solve SystemStackError when changing locale inside ActionMailer
[&lt;a href=&quot;/projects/8994/tickets/5329&quot; title=
&quot;Ticket #5329&quot;&gt;#5329&lt;/a&gt; state:resolved] &lt;a href=
&quot;https://github.com/rails/rails/commit/262b2ea8cda20999ddf8c4bf13b7a70453e996d2&quot;&gt;
https://github.com/rails/rails/commit/262b2ea8cda20999ddf8c4bf13b7a...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-19T22:43:18+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- 
:state: needs-more-info
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-19T22:43:35+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">22</version>
      <user-name>Repository</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [b247f3944282fb22c68fd4f9248a16fcda63b186]) Added a testcase for bug [#5329]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
https://github.com/rails/rails/commit/b247f3944282fb22c68fd4f9248a16fcda63b186</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/b247f3944282fb22c68fd4f9248a16fcda63b186&quot;
title=
&quot;Changeset [b247f3944282fb22c68fd4f9248a16fcda63b186]&quot;&gt;[b247f3944282fb22c68fd4f9248a16fcda63b186]&lt;/a&gt;)
Added a testcase for bug [&lt;a href=&quot;/projects/8994/tickets/5329&quot;
title=&quot;Ticket #5329&quot;&gt;#5329&lt;/a&gt;]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;https://github.com/rails/rails/commit/b247f3944282fb22c68fd4f9248a16fcda63b186&quot;&gt;
https://github.com/rails/rails/commit/b247f3944282fb22c68fd4f9248a1...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-19T22:43:38+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-19T22:43:56+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">23</version>
      <user-name>Repository</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [b4bc49c67388330a85a58cc790bbdb7edfa3ee80]) Added a testcase for bug [#5329]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
https://github.com/rails/rails/commit/b4bc49c67388330a85a58cc790bbdb7edfa3ee80</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/b4bc49c67388330a85a58cc790bbdb7edfa3ee80&quot;
title=
&quot;Changeset [b4bc49c67388330a85a58cc790bbdb7edfa3ee80]&quot;&gt;[b4bc49c67388330a85a58cc790bbdb7edfa3ee80]&lt;/a&gt;)
Added a testcase for bug [&lt;a href=&quot;/projects/8994/tickets/5329&quot;
title=&quot;Ticket #5329&quot;&gt;#5329&lt;/a&gt;]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;https://github.com/rails/rails/commit/b4bc49c67388330a85a58cc790bbdb7edfa3ee80&quot;&gt;
https://github.com/rails/rails/commit/b4bc49c67388330a85a58cc790bbd...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-19T22:44:20+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-19T22:44:38+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">24</version>
      <user-name>Repository</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [46b23f8a7a6aec5066f740de16e6419828db8be4]) Solve SystemStackError when changing locale inside ActionMailer [#5329 state:resolved]
https://github.com/rails/rails/commit/46b23f8a7a6aec5066f740de16e6419828db8be4</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/46b23f8a7a6aec5066f740de16e6419828db8be4&quot;
title=
&quot;Changeset [46b23f8a7a6aec5066f740de16e6419828db8be4]&quot;&gt;[46b23f8a7a6aec5066f740de16e6419828db8be4]&lt;/a&gt;)
Solve SystemStackError when changing locale inside ActionMailer
[&lt;a href=&quot;/projects/8994/tickets/5329&quot; title=
&quot;Ticket #5329&quot;&gt;#5329&lt;/a&gt; state:resolved] &lt;a href=
&quot;https://github.com/rails/rails/commit/46b23f8a7a6aec5066f740de16e6419828db8be4&quot;&gt;
https://github.com/rails/rails/commit/46b23f8a7a6aec5066f740de16e64...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-19T22:44:23+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-19T22:44:55+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">25</version>
      <user-name>Repository</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@@@
  module AbstractController
    class I18nProxy
      def initialize(i18n_config, lookup_context)
        @i18n_config, @lookup_context = i18n_config, lookup_context
        @i18n_config = @i18n_config.i18n_config if @i18n_config.respond_to?(:i18n_config)
      end
    end
  end
@@@

Here's a bit a code my coworker came up with to prevent the infinite recursion that occurs when setting the I18n config in an actionmailer context, which is called from an actioncontroller.</body>
      <body-html>&lt;div&gt;&lt;pre&gt;
&lt;code&gt;  module AbstractController
    class I18nProxy
      def initialize(i18n_config, lookup_context)
        @i18n_config, @lookup_context = i18n_config, lookup_context
        @i18n_config = @i18n_config.i18n_config if @i18n_config.respond_to?(:i18n_config)
      end
    end
  end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Here's a bit a code my coworker came up with to prevent the
infinite recursion that occurs when setting the I18n config in an
actionmailer context, which is called from an actioncontroller.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-20T00:42:22+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-01-20T00:42:45+00:00</updated-at>
      <user-id type="integer">133327</user-id>
      <version type="integer">26</version>
      <user-name>eddyk</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Good &lt;a href=http://www.sale-puma.com&gt;Puma shoes sale&lt;/a&gt; information for &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; fans: Yesterday, German sportswear maker Cheap Running Shoes purchased effectively lot of money Brands. The transaction entails the Cobra brand, too as linked inventory, intellectual house and endorsement contracts. It also helps make &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Shoes . They provide you with the utmost game and support all through the feet.You can happen around several types of basketball sneakers such as high-top,low-top and mid-top.The &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt; and boots give you best ankle support will support want you to obtain steadiness.
As we konw,Trail &lt;a href=http://www.sale-puma.com&gt;Puma Drift Cat&lt;/a&gt; Shoes black, Trail &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; ShoesWhite Black? 50 many years backshore are actually released within a great accomplishment. Trail Running Shoes speed cat shoes?go in add-on to King Pele into planet tournament finals, bottom tennis discs matchrs within pasture inhabit an vital area in hold out in Wimbledon Dun; Its working firms have premier manufacturers and major marketplace positions in distilled spirits, residence and security, and golf products. The reply go all through the &lt;a href=http://www.sale-puma.com&gt;Cheap puma shoes&lt;/a&gt; on sale-here you are able to happen around several distcoun.&lt;a href=http://www.sale-puma.com&gt;puma shoes on sale &lt;/a&gt;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good &lt;a href=&quot;http:&quot;&gt;Puma shoes sale information for &lt;a href=
&quot;http:&quot;&gt;Puma shoes fans: Yesterday, German sportswear maker Cheap
Running Shoes purchased effectively lot of money Brands. The
transaction entails the Cobra brand, too as linked inventory,
intellectual house and endorsement contracts. It also helps make
&lt;a href=&quot;http:&quot;&gt;puma speed cat Shoes . They provide you with the
utmost game and support all through the feet.You can happen around
several types of basketball sneakers such as high-top,low-top and
mid-top.The &lt;a href=&quot;http:&quot;&gt;Puma shoes online and boots give you
best ankle support will support want you to obtain steadiness.&lt;br&gt;
As we konw,Trail &lt;a href=&quot;http:&quot;&gt;Puma Drift Cat Shoes black, Trail
&lt;a href=&quot;http:&quot;&gt;Puma future cat ShoesWhite Black? 50 many years
backshore are actually released within a great accomplishment.
Trail Running Shoes speed cat shoes?go in add-on to King Pele into
planet tournament finals, bottom tennis discs matchrs within
pasture inhabit an vital area in hold out in Wimbledon Dun; Its
working firms have premier manufacturers and major marketplace
positions in distilled spirits, residence and security, and golf
products. The reply go all through the &lt;a href=&quot;http:&quot;&gt;Cheap puma
shoes on sale-here you are able to happen around several
distcoun.&lt;a href=&quot;http:&quot;&gt;puma shoes on sale .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-14T02:18:12+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-02-14T05:41:53+00:00</updated-at>
      <user-id type="integer">136860</user-id>
      <version type="integer">27</version>
      <user-name>xixi</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Today, kids as babyish as Ashcan School or nine name-conscious and trend-alert, puma ducati buying at for solid garments rather than just throwing on what&#8217;s pure. Here are just some of the brands and trends your children hungered over 2011. The 80&#8242;s Are Back. You may have noticed a trend this year for evisu jeans, supra shoes, leggings petticoats, oversized tees, and big &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; shoes. This is a look that appeals to babies girls-it&#8217;s quirky and yet smart at the same time.
&lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; with success sets the charm for manner, lifestyle and gambols. This has been believed to serve for an ideal cross flight simulator. This has been fine-looking by most jocks and the Speed Cat is an old name for the industriousness which made &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; gain millions with this business. With many people converting more wellness conscious in time, a lot wants also to commit on a good pair of cross trainers. These are very indestructible and forward-looking just like the real carrying out of a real &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt;. It consumes been systematically on the forefront of design and carrying out when it pertains comfort and style commingled.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Today, kids as babyish as Ashcan School or nine name-conscious
and trend-alert, puma ducati buying at for solid garments rather
than just throwing on what&amp;#8217;s pure. Here are just some of the
brands and trends your children hungered over 2011. The 80&amp;#8242;s
Are Back. You may have noticed a trend this year for evisu jeans,
supra shoes, leggings petticoats, oversized tees, and big &lt;a href=
&quot;http:&quot;&gt;puma speed cat shoes. This is a look that appeals to babies
girls-it&amp;#8217;s quirky and yet smart at the same time.&lt;br&gt;
&lt;a href=&quot;http:&quot;&gt;Puma future cat with success sets the charm for
manner, lifestyle and gambols. This has been believed to serve for
an ideal cross flight simulator. This has been fine-looking by most
jocks and the Speed Cat is an old name for the industriousness
which made &lt;a href=&quot;http:&quot;&gt;Puma shoes gain millions with this
business. With many people converting more wellness conscious in
time, a lot wants also to commit on a good pair of cross trainers.
These are very indestructible and forward-looking just like the
real carrying out of a real &lt;a href=&quot;http:&quot;&gt;Puma future cat. It
consumes been systematically on the forefront of design and
carrying out when it pertains comfort and style commingled.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-14T04:31:40+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-02-14T05:42:04+00:00</updated-at>
      <user-id type="integer">136860</user-id>
      <version type="integer">28</version>
      <user-name>xixi</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Good &lt;a href=http://www.sale-puma.com&gt;Puma shoes sale&lt;/a&gt; information for &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; fans: Yesterday, German sportswear maker Cheap Running Shoes purchased effectively lot of money Brands. The transaction entails the Cobra brand, too as linked inventory, intellectual house and endorsement contracts. It also helps make &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; Shoes . They provide you with the utmost game and support all through the feet.You can happen around several types of basketball sneakers such as high-top,low-top and mid-top.The &lt;a href=http://www.sale-puma.com&gt;Puma shoes online&lt;/a&gt; and boots give you best ankle support will support want you to obtain steadiness.
As we konw,Trail &lt;a href=http://www.sale-puma.com&gt;Puma Drift Cat&lt;/a&gt; Shoes black, Trail &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; ShoesWhite Black? 50 many years backshore are actually released within a great accomplishment. Trail Running Shoes speed cat shoes?go in add-on to King Pele into planet tournament finals, bottom tennis discs matchrs within pasture inhabit an vital area in hold out in Wimbledon Dun; Its working firms have premier manufacturers and major marketplace positions in distilled spirits, residence and security, and golf products. The reply go all through the &lt;a href=http://www.sale-puma.com&gt;Cheap puma shoes&lt;/a&gt; on sale-here you are able to happen around several distcoun.&lt;a href=http://www.sale-puma.com&gt;puma shoes on sale &lt;/a&gt;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good &lt;a href=&quot;http:&quot;&gt;Puma shoes sale information for &lt;a href=
&quot;http:&quot;&gt;Puma shoes fans: Yesterday, German sportswear maker Cheap
Running Shoes purchased effectively lot of money Brands. The
transaction entails the Cobra brand, too as linked inventory,
intellectual house and endorsement contracts. It also helps make
&lt;a href=&quot;http:&quot;&gt;puma speed cat Shoes . They provide you with the
utmost game and support all through the feet.You can happen around
several types of basketball sneakers such as high-top,low-top and
mid-top.The &lt;a href=&quot;http:&quot;&gt;Puma shoes online and boots give you
best ankle support will support want you to obtain steadiness.&lt;br&gt;
As we konw,Trail &lt;a href=&quot;http:&quot;&gt;Puma Drift Cat Shoes black, Trail
&lt;a href=&quot;http:&quot;&gt;Puma future cat ShoesWhite Black? 50 many years
backshore are actually released within a great accomplishment.
Trail Running Shoes speed cat shoes?go in add-on to King Pele into
planet tournament finals, bottom tennis discs matchrs within
pasture inhabit an vital area in hold out in Wimbledon Dun; Its
working firms have premier manufacturers and major marketplace
positions in distilled spirits, residence and security, and golf
products. The reply go all through the &lt;a href=&quot;http:&quot;&gt;Cheap puma
shoes on sale-here you are able to happen around several
distcoun.&lt;a href=&quot;http:&quot;&gt;puma shoes on sale .&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-16T06:38:31+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-02-22T08:32:35+00:00</updated-at>
      <user-id type="integer">137256</user-id>
      <version type="integer">29</version>
      <user-name>gfsd</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Today, kids as babyish as Ashcan School or nine name-conscious and trend-alert, puma ducati buying at for solid garments rather than just throwing on what&#8217;s pure. Here are just some of the brands and trends your children hungered over 2011. The 80&#8242;s Are Back. You may have noticed a trend this year for evisu jeans, supra shoes, leggings petticoats, oversized tees, and big &lt;a href=http://www.sale-puma.com&gt;puma speed cat&lt;/a&gt; shoes. This is a look that appeals to babies girls-it&#8217;s quirky and yet smart at the same time.
&lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt; with success sets the charm for manner, lifestyle and gambols. This has been believed to serve for an ideal cross flight simulator. This has been fine-looking by most jocks and the Speed Cat is an old name for the industriousness which made &lt;a href=http://www.sale-puma.com&gt;Puma shoes&lt;/a&gt; gain millions with this business. With many people converting more wellness conscious in time, a lot wants also to commit on a good pair of cross trainers. These are very indestructible and forward-looking just like the real carrying out of a real &lt;a href=http://www.sale-puma.com&gt;Puma future cat&lt;/a&gt;. It consumes been systematically on the forefront of design and carrying out when it pertains comfort and style commingled.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Today, kids as babyish as Ashcan School or nine name-conscious
and trend-alert, puma ducati buying at for solid garments rather
than just throwing on what&amp;#8217;s pure. Here are just some of the
brands and trends your children hungered over 2011. The 80&amp;#8242;s
Are Back. You may have noticed a trend this year for evisu jeans,
supra shoes, leggings petticoats, oversized tees, and big &lt;a href=
&quot;http:&quot;&gt;puma speed cat shoes. This is a look that appeals to babies
girls-it&amp;#8217;s quirky and yet smart at the same time.&lt;br&gt;
&lt;a href=&quot;http:&quot;&gt;Puma future cat with success sets the charm for
manner, lifestyle and gambols. This has been believed to serve for
an ideal cross flight simulator. This has been fine-looking by most
jocks and the Speed Cat is an old name for the industriousness
which made &lt;a href=&quot;http:&quot;&gt;Puma shoes gain millions with this
business. With many people converting more wellness conscious in
time, a lot wants also to commit on a good pair of cross trainers.
These are very indestructible and forward-looking just like the
real carrying out of a real &lt;a href=&quot;http:&quot;&gt;Puma future cat. It
consumes been systematically on the forefront of design and
carrying out when it pertains comfort and style commingled.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-19T01:45:24+00:00</created-at>
      <creator-id type="integer">16762</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5329</number>
      <permalink>using-i18nwith_locale-in-actionmailer-raises-systemstackerror</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actionmailer i18n infinity locale</tag>
      <title>Setting the I18n.locale in ActionMailer raises SystemStackError</title>
      <updated-at type="datetime">2011-02-19T09:28:20+00:00</updated-at>
      <user-id type="integer">137759</user-id>
      <version type="integer">30</version>
      <user-name>mklo</user-name>
      <creator-name>Ji&#345;&#237; Zajpt</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5329</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>9bcce8a8108592a79772da1a490cdbf976ff2261</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-01-14T08:39:39+00:00</created-at>
      <filename>i18n_actionmailer_test.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">861011</id>
      <size type="integer">2453</size>
      <uploader-id type="integer">132559</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/861011/i18n_actionmailer_test.diff</url>
    </attachment>
  </attachments>
</ticket>
