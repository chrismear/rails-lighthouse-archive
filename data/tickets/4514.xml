<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">85</assigned-user-id>
  <attachments-count type="integer">7</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-04-30T23:05:57+01:00</created-at>
  <creator-id type="integer">51632</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4514</number>
  <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>activerecord bigdecimal calculations</tag>
  <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
  <updated-at type="datetime">2010-12-02T17:14:32+00:00</updated-at>
  <user-id type="integer">77317</user-id>
  <version type="integer">21</version>
  <user-name>Andreas Mayer</user-name>
  <creator-name>Brian Lopez</creator-name>
  <assigned-user-name>Jeremy Kemper</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>The return value from an average calculation is assumed to respond to #to_d but the value may already be a BigDecimal to start with. This patch adds a check for that case and returns the value as-is.</original-body>
  <latest-body>The return value from an average calculation is assumed to respond to #to_d but the value may already be a BigDecimal to start with. This patch adds a check for that case and returns the value as-is.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The return value from an average calculation is assumed to
respond to #to_d but the value may already be a BigDecimal to start
with. This patch adds a check for that case and returns the value
as-is.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The return value from an average calculation is assumed to respond to #to_d but the value may already be a BigDecimal to start with. This patch adds a check for that case and returns the value as-is.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The return value from an average calculation is assumed to
respond to #to_d but the value may already be a BigDecimal to start
with. This patch adds a check for that case and returns the value
as-is.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-30T23:05:57+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-04-30T23:06:03+01:00</updated-at>
      <user-id type="integer">51632</user-id>
      <version type="integer">1</version>
      <user-name>Brian Lopez</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1

Looks good to me.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1&lt;/p&gt;
&lt;p&gt;Looks good to me.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-01T05:20:37+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-01T05:20:39+01:00</updated-at>
      <user-id type="integer">40263</user-id>
      <version type="integer">2</version>
      <user-name>Neeraj Singh</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I don't think the value is ever a BigDecimal, as it doesn't have a to_d method so would raise a NoMethodError if it ever was.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I don't think the value is ever a BigDecimal, as it doesn't have
a to_d method so would raise a NoMethodError if it ever was.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-03T15:18:28+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-03T15:18:34+01:00</updated-at>
      <user-id type="integer">7697</user-id>
      <version type="integer">3</version>
      <user-name>Andrew White</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>It is when the driver returns typecasted results, like mysql2.

Brian, this whole method should probably return self for non-Strings.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It is when the driver returns typecasted results, like
mysql2.&lt;/p&gt;
&lt;p&gt;Brian, this whole method should probably return self for
non-Strings.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-03T17:25:54+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-03T17:25:55+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">4</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Was hoping to fix and repost the patch this weekend but didn't end up having time. I'll try and get it up today or tomorrow</body>
      <body-html>&lt;div&gt;&lt;p&gt;Was hoping to fix and repost the patch this weekend but didn't
end up having time. I'll try and get it up today or tomorrow&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-03T19:11:32+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-03T19:11:36+01:00</updated-at>
      <user-id type="integer">51632</user-id>
      <version type="integer">5</version>
      <user-name>Brian Lopez</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Here's the updated patch, still looking into test failures to see if they're from this or something else</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here's the updated patch, still looking into test failures to
see if they're from this or something else&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-03T22:55:41+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-03T22:55:45+01:00</updated-at>
      <user-id type="integer">51632</user-id>
      <version type="integer">6</version>
      <user-name>Brian Lopez</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ok, here's the patch with updated and passing tests (based on master)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, here's the patch with updated and passing tests (based on
master)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T09:30:19+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-04T09:30:21+01:00</updated-at>
      <user-id type="integer">51632</user-id>
      <version type="integer">7</version>
      <user-name>Brian Lopez</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hey Brian, this changes behavior on nil results too, though. Think it should be confined to just letting pre-typecasted values through.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Brian, this changes behavior on nil results too, though.
Think it should be confined to just letting pre-typecasted values
through.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T19:01:43+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-04T19:05:54+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">8</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Was worried that wouldn't be desired - in our short chat on IRC about it you mentioned returning 0 for nil which is why I put it in there.
It does make sense to me that a sum/avg/count should return a Numeric in all cases, but then again it does seem a better fit to return exactly what the db is giving us (even null).

Updated patch coming soon...</body>
      <body-html>&lt;div&gt;&lt;p&gt;Was worried that wouldn't be desired - in our short chat on IRC
about it you mentioned returning 0 for nil which is why I put it in
there.&lt;br&gt;
It does make sense to me that a sum/avg/count should return a
Numeric in all cases, but then again it does seem a better fit to
return exactly what the db is giving us (even null).&lt;/p&gt;
&lt;p&gt;Updated patch coming soon...&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T19:10:19+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-04T19:10:20+01:00</updated-at>
      <user-id type="integer">51632</user-id>
      <version type="integer">9</version>
      <user-name>Brian Lopez</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>new patch per code-review</body>
      <body-html>&lt;div&gt;&lt;p&gt;new patch per code-review&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T19:35:37+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-04T19:35:40+01:00</updated-at>
      <user-id type="integer">51632</user-id>
      <version type="integer">10</version>
      <user-name>Brian Lopez</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [7aad851c2e0d4579aa33a54a069a767b53cca406]) Allow pre-casted values (other than nil) to pass through from calculations un-touched

[#4514 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/7aad851c2e0d4579aa33a54a069a767b53cca406</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/7aad851c2e0d4579aa33a54a069a767b53cca406&quot;
title=
&quot;Changeset [7aad851c2e0d4579aa33a54a069a767b53cca406]&quot;&gt;[7aad851c2e0d4579aa33a54a069a767b53cca406]&lt;/a&gt;)
Allow pre-casted values (other than nil) to pass through from
calculations un-touched&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4514&quot; title=
&quot;Ticket #4514&quot;&gt;#4514&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/7aad851c2e0d4579aa33a54a069a767b53cca406&quot;&gt;
http://github.com/rails/rails/commit/7aad851c2e0d4579aa33a54a069a76...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-04T19:58:13+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-04T19:58:14+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">11</version>
      <user-name>Repository</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Attaching the backport for 2.3</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attaching the backport for 2.3&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-04T20:23:04+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-04T20:23:06+01:00</updated-at>
      <user-id type="integer">51632</user-id>
      <version type="integer">12</version>
      <user-name>Brian Lopez</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [6dbc75fd7625c0248d269cc3127910cb4c888ed9]) Allow pre-casted values (other than nil) to pass through from calculations un-touched

[#4514 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/6dbc75fd7625c0248d269cc3127910cb4c888ed9</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/6dbc75fd7625c0248d269cc3127910cb4c888ed9&quot;
title=
&quot;Changeset [6dbc75fd7625c0248d269cc3127910cb4c888ed9]&quot;&gt;[6dbc75fd7625c0248d269cc3127910cb4c888ed9]&lt;/a&gt;)
Allow pre-casted values (other than nil) to pass through from
calculations un-touched&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4514&quot; title=
&quot;Ticket #4514&quot;&gt;#4514&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=
&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/6dbc75fd7625c0248d269cc3127910cb4c888ed9&quot;&gt;
http://github.com/rails/rails/commit/6dbc75fd7625c0248d269cc3127910...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-04T20:29:03+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">50064</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-04T20:29:05+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">13</version>
      <user-name>Repository</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>2.3.6</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>This break test_should_average_field test.
Patchs for master and 2-3-stable added.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This break test_should_average_field test.&lt;br&gt;
Patchs for master and 2-3-stable added.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-10T07:45:50+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
:milestone: 50064
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-10T07:45:53+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">14</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>A better master patch here. I will redo the one for 2-3-stable later</body>
      <body-html>&lt;div&gt;&lt;p&gt;A better master patch here. I will redo the one for 2-3-stable
later&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-12T05:50:34+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-12T05:50:36+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">15</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>For master without checking types</body>
      <body-html>&lt;div&gt;&lt;p&gt;For master without checking types&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-12T05:58:29+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-12T05:58:33+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">16</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>For 2-3-stable here</body>
      <body-html>&lt;div&gt;&lt;p&gt;For 2-3-stable here&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-12T06:02:15+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-12T06:02:17+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">17</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>(from [ad73a3aec4665d8a44060640e51075fd732c33a1]) type_cast_calculated_value refactor: value is never a Fixnum here.  Fix test since SQLite returns Float.

[#4514 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/ad73a3aec4665d8a44060640e51075fd732c33a1</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/ad73a3aec4665d8a44060640e51075fd732c33a1&quot;
title=
&quot;Changeset [ad73a3aec4665d8a44060640e51075fd732c33a1]&quot;&gt;[ad73a3aec4665d8a44060640e51075fd732c33a1]&lt;/a&gt;)
type_cast_calculated_value refactor: value is never a Fixnum here.
Fix test since SQLite returns Float.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4514&quot; title=
&quot;Ticket #4514&quot;&gt;#4514&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a href=
&quot;mailto:jeremy@bitsweat.net&quot;&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/ad73a3aec4665d8a44060640e51075fd732c33a1&quot;&gt;
http://github.com/rails/rails/commit/ad73a3aec4665d8a44060640e51075...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-12T06:30:27+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-12T06:30:29+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">18</version>
      <user-name>Repository</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>(from [5f3bd55726703e08ba595555e1cf428c57832603]) type_cast_calculated_value refactor: value is never a Fixnum here. Fix test since SQLite returns Float.

[#4514 state:committed]

Signed-off-by: Jeremy Kemper &lt;jeremy@bitsweat.net&gt;
http://github.com/rails/rails/commit/5f3bd55726703e08ba595555e1cf428c57832603</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/5f3bd55726703e08ba595555e1cf428c57832603&quot;
title=
&quot;Changeset [5f3bd55726703e08ba595555e1cf428c57832603]&quot;&gt;[5f3bd55726703e08ba595555e1cf428c57832603]&lt;/a&gt;)
type_cast_calculated_value refactor: value is never a Fixnum here.
Fix test since SQLite returns Float.&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4514&quot; title=
&quot;Ticket #4514&quot;&gt;#4514&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jeremy Kemper &lt;a&gt;jeremy@bitsweat.net&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/5f3bd55726703e08ba595555e1cf428c57832603&quot;&gt;
http://github.com/rails/rails/commit/5f3bd55726703e08ba595555e1cf42...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-12T06:30:29+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-05-12T06:30:31+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">19</version>
      <user-name>Repository</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:53+01:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-10-15T23:01:53+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">20</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">7</attachments-count>
      <body>May this be related to ticket #6103 ?</body>
      <body-html>&lt;div&gt;&lt;p&gt;May this be related to ticket &lt;a href=
&quot;/projects/8994/tickets/6103&quot; title=&quot;Ticket #6103&quot;&gt;#6103&lt;/a&gt; ?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-12-02T17:10:11+00:00</created-at>
      <creator-id type="integer">51632</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4514</number>
      <permalink>patch-check-and-immediately-return-value-from-an-average-if-its-already-a-bigdecimal</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>activerecord bigdecimal calculations</tag>
      <title>[PATCH] Check and immediately return value from an average if it's already a BigDecimal</title>
      <updated-at type="datetime">2010-12-02T17:14:32+00:00</updated-at>
      <user-id type="integer">77317</user-id>
      <version type="integer">21</version>
      <user-name>Andreas Mayer</user-name>
      <creator-name>Brian Lopez</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4514</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>313d306077975353f8b5cba162f43958fc4c540a</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-04T19:35:37+01:00</created-at>
      <filename>new-average-calculation.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">509409</id>
      <size type="integer">1455</size>
      <uploader-id type="integer">51632</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/509409/new-average-calculation.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>a615301303fa5f34490c46d51d9a53a667ab3602</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-04T20:23:04+01:00</created-at>
      <filename>23-average-calculation.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">509503</id>
      <size type="integer">1363</size>
      <uploader-id type="integer">51632</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/509503/23-average-calculation.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>cd76f0348398a37e59955ec2643d83c5846d5775</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-10T07:45:50+01:00</created-at>
      <filename>type_cast_calculated_value-master.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">515112</id>
      <size type="integer">1043</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/515112/type_cast_calculated_value-master.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>8566dd119bb164067db7a204381d8177a2b5aaa7</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-10T07:45:50+01:00</created-at>
      <filename>type_cast_calculated_value-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">515113</id>
      <size type="integer">1017</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/515113/type_cast_calculated_value-2-3-stable.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>98fd49490a3399666405679bc223f6b3c3a410b5</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-12T05:50:34+01:00</created-at>
      <filename>average_things-master.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">518160</id>
      <size type="integer">2085</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/518160/average_things-master.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>1edc2750af81986321f251cb623d719c8ae87a38</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-12T05:58:29+01:00</created-at>
      <filename>average_things-master.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">518162</id>
      <size type="integer">1944</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/518162/average_things-master.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>be70453f0b76bc286eeeb1bd1afb79f9f56a814c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-12T06:02:15+01:00</created-at>
      <filename>average_things-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">518165</id>
      <size type="integer">1876</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/518165/average_things-2-3-stable.patch</url>
    </attachment>
  </attachments>
</ticket>
