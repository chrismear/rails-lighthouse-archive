<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">5</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-06-29T01:28:20+01:00</created-at>
  <creator-id type="integer">16401</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">73534</milestone-id>
  <number type="integer">4942</number>
  <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>active_support timezone</tag>
  <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
  <updated-at type="datetime">2010-07-23T21:35:23+01:00</updated-at>
  <user-id type="integer">16401</user-id>
  <version type="integer">19</version>
  <user-name>Leigh Caplan</user-name>
  <creator-name>Leigh Caplan</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
  <milestone-title>2.3.9</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>@@@ ruby
&gt;&gt; ActiveSupport::TimeZone['bogus']
=&gt; nil
&gt;&gt; ActiveSupport::TimeZone.zones_map.key?('bogus')
=&gt; true
@@@

This *really* bites you if the value ends up being stored, but ActiveSupport::TimeZone.all hasn't been called yet. In this case, ActiveSupport::TimeZone.zones_map.values gets sorted, and blows up because nil has no &lt;=&gt; defined.

This was never an issue before [49943a712080644969d1](&quot;http://github.com/rails/rails/commit/49943a712080644969d14ac45919044cb54f174d&quot;), because ZONES and US_ZONES were pre-loaded before any shenanigans of this sort could take place.

I've included a patch that should apply to both 2-3-stable and master. Note that this failure mode doesn't rear its head in master, as long as you're using a newer version of the tzinfo gem- trying to look up a nonexistent time zone will raise an error. That being said, if the tzinfo behavior changed tomrrow, Rails would again be vulnerable due to the way this code is written.</original-body>
  <latest-body>@@@ ruby
&gt;&gt; ActiveSupport::TimeZone['bogus']
=&gt; nil
&gt;&gt; ActiveSupport::TimeZone.zones_map.key?('bogus')
=&gt; true
@@@

This *really* bites you if the value ends up being stored, but ActiveSupport::TimeZone.all hasn't been called yet. In this case, ActiveSupport::TimeZone.zones_map.values gets sorted, and blows up because nil has no &lt;=&gt; defined.

This was never an issue before [49943a712080644969d1](&quot;http://github.com/rails/rails/commit/49943a712080644969d14ac45919044cb54f174d&quot;), because ZONES and US_ZONES were pre-loaded before any shenanigans of this sort could take place.

I've included a patch that should apply to both 2-3-stable and master. Note that this failure mode doesn't rear its head in master, as long as you're using a newer version of the tzinfo gem- trying to look up a nonexistent time zone will raise an error. That being said, if the tzinfo behavior changed tomrrow, Rails would again be vulnerable due to the way this code is written.</latest-body>
  <original-body-html>&lt;div&gt;&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; ActiveSupport::TimeZone['bogus']
=&amp;gt; nil
&amp;gt;&amp;gt; ActiveSupport::TimeZone.zones_map.key?('bogus')
=&amp;gt; true&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This &lt;em&gt;really&lt;/em&gt; bites you if the value ends up being
stored, but ActiveSupport::TimeZone.all hasn't been called yet. In
this case, ActiveSupport::TimeZone.zones_map.values gets sorted,
and blows up because nil has no &amp;lt;=&amp;gt; defined.&lt;/p&gt;
&lt;p&gt;This was never an issue before &lt;a&gt;49943a712080644969d1&lt;/a&gt;,
because ZONES and US_ZONES were pre-loaded before any shenanigans
of this sort could take place.&lt;/p&gt;
&lt;p&gt;I've included a patch that should apply to both 2-3-stable and
master. Note that this failure mode doesn't rear its head in
master, as long as you're using a newer version of the tzinfo gem-
trying to look up a nonexistent time zone will raise an error. That
being said, if the tzinfo behavior changed tomrrow, Rails would
again be vulnerable due to the way this code is written.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>@@@ ruby
&gt;&gt; ActiveSupport::TimeZone['bogus']
=&gt; nil
&gt;&gt; ActiveSupport::TimeZone.zones_map.key?('bogus')
=&gt; true
@@@

This *really* bites you if the value ends up being stored, but ActiveSupport::TimeZone.all hasn't been called yet. In this case, ActiveSupport::TimeZone.zones_map.values gets sorted, and blows up because nil has no &lt;=&gt; defined.

This was never an issue before [49943a712080644969d1](&quot;http://github.com/rails/rails/commit/49943a712080644969d14ac45919044cb54f174d&quot;), because ZONES and US_ZONES were pre-loaded before any shenanigans of this sort could take place.

I've included a patch that should apply to both 2-3-stable and master. Note that this failure mode doesn't rear its head in master, as long as you're using a newer version of the tzinfo gem- trying to look up a nonexistent time zone will raise an error. That being said, if the tzinfo behavior changed tomrrow, Rails would again be vulnerable due to the way this code is written.</body>
      <body-html>&lt;div&gt;&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; ActiveSupport::TimeZone['bogus']
=&amp;gt; nil
&amp;gt;&amp;gt; ActiveSupport::TimeZone.zones_map.key?('bogus')
=&amp;gt; true&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This &lt;em&gt;really&lt;/em&gt; bites you if the value ends up being
stored, but ActiveSupport::TimeZone.all hasn't been called yet. In
this case, ActiveSupport::TimeZone.zones_map.values gets sorted,
and blows up because nil has no &amp;lt;=&amp;gt; defined.&lt;/p&gt;
&lt;p&gt;This was never an issue before &lt;a&gt;49943a712080644969d1&lt;/a&gt;,
because ZONES and US_ZONES were pre-loaded before any shenanigans
of this sort could take place.&lt;/p&gt;
&lt;p&gt;I've included a patch that should apply to both 2-3-stable and
master. Note that this failure mode doesn't rear its head in
master, as long as you're using a newer version of the tzinfo gem-
trying to look up a nonexistent time zone will raise an error. That
being said, if the tzinfo behavior changed tomrrow, Rails would
again be vulnerable due to the way this code is written.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T03:39:44+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-23T03:39:46+01:00</updated-at>
      <user-id type="integer">16401</user-id>
      <version type="integer">1</version>
      <user-name>Leigh Caplan</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">25293</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T03:45:44+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-23T03:45:49+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">2</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This patch does apply on `master`, but the test fails.

I can see the code in `master` (in `#lookup`) that it will create the time zone if it's not exists in the mapping. I don't know that this is the intended behavior or not.

I'm assigning this to Santiago Pastorino to have a look on this one.

By the way, in your opinion do you think it would be better for Rails to update the `tzinfo` gem to require at least 0.3.22 then?</body>
      <body-html>&lt;div&gt;&lt;p&gt;This patch does apply on &lt;code&gt;master&lt;/code&gt;, but the test
fails.&lt;/p&gt;
&lt;p&gt;I can see the code in &lt;code&gt;master&lt;/code&gt; (in
&lt;code&gt;#lookup&lt;/code&gt;) that it will create the time zone if it's not
exists in the mapping. I don't know that this is the intended
behavior or not.&lt;/p&gt;
&lt;p&gt;I'm assigning this to Santiago Pastorino to have a look on this
one.&lt;/p&gt;
&lt;p&gt;By the way, in your opinion do you think it would be better for
Rails to update the &lt;code&gt;tzinfo&lt;/code&gt; gem to require at least
0.3.22 then?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T16:40:45+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
:assigned_user: 25293
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-23T16:40:51+01:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">3</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I've included a test that passes in master... I just stubbed out the lookup method to return nil, to ensure that we're not explicitly relying on the TZInfo to do the right thing. And I don't think that storing nil values in @zones_map is the intended behavior. If it is, then it was probably done without understanding how it can break other time zone functionality.

For a little background, our app had some calendar events with time zones which had been accidentally sanitized, so the ampersands were HTML encoded. The current TZInfo behavior is correct, and if it was included in Rails 2.3.8, an exception would've been raised as soon as we tried to use the bad time zone. Unfortunately, what actually happened was that some of our backends fielded these calendar event requests as soon as they started up, and nil values &quot;poisoned&quot; the @zones_map. The next time someone tried to draw a time zone menu, we got an exception while trying to sort @zones_map. As you can imagine, this was a really difficult issue to track down, and it required that we roll back to 2.3.5 until the problem was sorted out.

FWIW, I think it's a great idea to update the `tzinfo` dependency to 0.3.22, but only because it gives us the latest tzdata. I'm pretty sure this behavior is the same in 0.3.16.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've included a test that passes in master... I just stubbed out
the lookup method to return nil, to ensure that we're not
explicitly relying on the TZInfo to do the right thing. And I don't
think that storing nil values in @zones_map is the intended
behavior. If it is, then it was probably done without understanding
how it can break other time zone functionality.&lt;/p&gt;
&lt;p&gt;For a little background, our app had some calendar events with
time zones which had been accidentally sanitized, so the ampersands
were HTML encoded. The current TZInfo behavior is correct, and if
it was included in Rails 2.3.8, an exception would've been raised
as soon as we tried to use the bad time zone. Unfortunately, what
actually happened was that some of our backends fielded these
calendar event requests as soon as they started up, and nil values
&quot;poisoned&quot; the @zones_map. The next time someone tried to draw a
time zone menu, we got an exception while trying to sort
@zones_map. As you can imagine, this was a really difficult issue
to track down, and it required that we roll back to 2.3.5 until the
problem was sorted out.&lt;/p&gt;
&lt;p&gt;FWIW, I think it's a great idea to update the
&lt;code&gt;tzinfo&lt;/code&gt; dependency to 0.3.22, but only because it gives
us the latest tzdata. I'm pretty sure this behavior is the same in
0.3.16.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-23T18:36:33+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-23T18:36:44+01:00</updated-at>
      <user-id type="integer">16401</user-id>
      <version type="integer">4</version>
      <user-name>Leigh Caplan</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [97a92a4cfddf819357ca09b4a91a5937b044e4d8]) test that unknown zones don't store mapping keys

[#4942]

Signed-off-by: Santiago Pastorino &lt;santiago@wyeworks.com&gt;
Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/97a92a4cfddf819357ca09b4a91a5937b044e4d8</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/97a92a4cfddf819357ca09b4a91a5937b044e4d8&quot;
title=
&quot;Changeset [97a92a4cfddf819357ca09b4a91a5937b044e4d8]&quot;&gt;[97a92a4cfddf819357ca09b4a91a5937b044e4d8]&lt;/a&gt;)
test that unknown zones don't store mapping keys&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4942&quot; title=
&quot;Ticket #4942&quot;&gt;#4942&lt;/a&gt;]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Santiago Pastorino
&lt;a&gt;santiago@wyeworks.com&lt;/a&gt;&lt;br&gt;
Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/97a92a4cfddf819357ca09b4a91a5937b044e4d8&quot;&gt;
http://github.com/rails/rails/commit/97a92a4cfddf819357ca09b4a91a59...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-28T18:40:05+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T18:40:11+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">5</version>
      <user-name>Repository</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [b2633f9f9323f5d5eca1c2c94bb7ae88ad276cda]) Don't store incorrect values in zones_map

[#4942 state:committed]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/b2633f9f9323f5d5eca1c2c94bb7ae88ad276cda</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/b2633f9f9323f5d5eca1c2c94bb7ae88ad276cda&quot;
title=
&quot;Changeset [b2633f9f9323f5d5eca1c2c94bb7ae88ad276cda]&quot;&gt;[b2633f9f9323f5d5eca1c2c94bb7ae88ad276cda]&lt;/a&gt;)
Don't store incorrect values in zones_map&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4942&quot; title=
&quot;Ticket #4942&quot;&gt;#4942&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/b2633f9f9323f5d5eca1c2c94bb7ae88ad276cda&quot;&gt;
http://github.com/rails/rails/commit/b2633f9f9323f5d5eca1c2c94bb7ae...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-28T18:40:11+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T18:40:16+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">6</version>
      <user-name>Repository</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I will push a backport in a couple of minutes</body>
      <body-html>&lt;div&gt;&lt;p&gt;I will push a backport in a couple of minutes&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-28T18:48:05+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
:milestone: 
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T18:48:14+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">7</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-28T19:33:54+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 40272
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T19:34:05+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">8</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [70af7efa16fa429f7bbc3acfc1c587c8655edf7e]) Don't store incorrect values in zones_map backport

[#4942 state:committed]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/70af7efa16fa429f7bbc3acfc1c587c8655edf7e</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/70af7efa16fa429f7bbc3acfc1c587c8655edf7e&quot;
title=
&quot;Changeset [70af7efa16fa429f7bbc3acfc1c587c8655edf7e]&quot;&gt;[70af7efa16fa429f7bbc3acfc1c587c8655edf7e]&lt;/a&gt;)
Don't store incorrect values in zones_map backport&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4942&quot; title=
&quot;Ticket #4942&quot;&gt;#4942&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/70af7efa16fa429f7bbc3acfc1c587c8655edf7e&quot;&gt;
http://github.com/rails/rails/commit/70af7efa16fa429f7bbc3acfc1c587...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-28T21:26:28+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T21:26:35+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">9</version>
      <user-name>Repository</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>(from [80473e035a166d270a204aedaf01c2b80415b8e4]) test that unknown zones don't store mapping keys

[#4942]

Signed-off-by: Santiago Pastorino &lt;santiago@wyeworks.com&gt;
Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/80473e035a166d270a204aedaf01c2b80415b8e4</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/80473e035a166d270a204aedaf01c2b80415b8e4&quot;
title=
&quot;Changeset [80473e035a166d270a204aedaf01c2b80415b8e4]&quot;&gt;[80473e035a166d270a204aedaf01c2b80415b8e4]&lt;/a&gt;)
test that unknown zones don't store mapping keys&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/4942&quot; title=
&quot;Ticket #4942&quot;&gt;#4942&lt;/a&gt;]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Santiago Pastorino
&lt;a&gt;santiago@wyeworks.com&lt;/a&gt;&lt;br&gt;
Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/80473e035a166d270a204aedaf01c2b80415b8e4&quot;&gt;
http://github.com/rails/rails/commit/80473e035a166d270a204aedaf01c2...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-28T21:26:48+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T21:26:55+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">10</version>
      <user-name>Repository</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Hey guys,

The 2.3 backport patch causes some additional unexpected behavior. It will never use the stored value in zones_map, and create a new TimeZone object each time #[] is invoked. Here's a patch to fix it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey guys,&lt;/p&gt;
&lt;p&gt;The 2.3 backport patch causes some additional unexpected
behavior. It will never use the stored value in zones_map, and
create a new TimeZone object each time #[] is invoked. Here's a
patch to fix it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-28T23:52:17+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T23:53:04+01:00</updated-at>
      <user-id type="integer">16401</user-id>
      <version type="integer">11</version>
      <user-name>Leigh Caplan</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Could you please include tests in the patch? Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you please include tests in the patch? Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-28T23:59:26+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-28T23:59:36+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">12</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Leigh your patch is ok but it's a performance improvement.

@@@
-            if tz = lookup(arg)
-              zones_map[arg] ||= tz
@@@

From this code you're removing note the ||=, if zones_map[arg] have something it will be returned before the assignation to tz. But i agree we can check zones_map[arg] before to not do some unneded lookups.

So Jos&#233; that doesn't need a test, all the things we need to test are already tested.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Leigh your patch is ok but it's a performance improvement.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;-            if tz = lookup(arg)
-              zones_map[arg] ||= tz&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;From this code you're removing note the ||=, if zones_map[arg]
have something it will be returned before the assignation to tz.
But i agree we can check zones_map[arg] before to not do some
unneded lookups.&lt;/p&gt;
&lt;p&gt;So Jos&amp;eacute; that doesn't need a test, all the things we need
to test are already tested.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-29T01:28:20+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-29T01:31:44+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">13</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Here's a patch with both the lookup fix and a test. I couldn't think of any way other than mocking out the call to `find_tzinfo` seeing as object apparently doesn't get stored anywhere. If someone else has any better ideas, I'd be glad to hear them.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here's a patch with both the lookup fix and a test. I couldn't
think of any way other than mocking out the call to
&lt;code&gt;find_tzinfo&lt;/code&gt; seeing as object apparently doesn't get
stored anywhere. If someone else has any better ideas, I'd be glad
to hear them.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-29T01:53:53+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-29T01:54:05+01:00</updated-at>
      <user-id type="integer">16401</user-id>
      <version type="integer">14</version>
      <user-name>Leigh Caplan</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-29T01:54:39+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 19965
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-29T01:54:46+01:00</updated-at>
      <user-id type="integer">16401</user-id>
      <version type="integer">15</version>
      <user-name>Leigh Caplan</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>We don't need this test for my it's ok to apply this patch

https://rails.lighthouseapp.com/projects/8994/tickets/4942/a/579448/lookup-fix-2-3-stable.patch</body>
      <body-html>&lt;div&gt;&lt;p&gt;We don't need this test for my it's ok to apply this patch&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/4942/a/579448/lookup-fix-2-3-stable.patch&quot;&gt;
https://rails.lighthouseapp.com/projects/8994/tickets/4942/a/579448...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-29T02:21:10+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
:assigned_user: 40272
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-29T02:21:19+01:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">16</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>(from [78e4d88c7071c633ee1eb68f49b90719aa198eaa]) Rewrite the clause to pluck the existing value from zones_map before performing a lookup. [#4942 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/78e4d88c7071c633ee1eb68f49b90719aa198eaa</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/78e4d88c7071c633ee1eb68f49b90719aa198eaa&quot;
title=
&quot;Changeset [78e4d88c7071c633ee1eb68f49b90719aa198eaa]&quot;&gt;[78e4d88c7071c633ee1eb68f49b90719aa198eaa]&lt;/a&gt;)
Rewrite the clause to pluck the existing value from zones_map
before performing a lookup. [&lt;a href=&quot;/projects/8994/tickets/4942&quot;
title=&quot;Ticket #4942&quot;&gt;#4942&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/78e4d88c7071c633ee1eb68f49b90719aa198eaa&quot;&gt;
http://github.com/rails/rails/commit/78e4d88c7071c633ee1eb68f49b907...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-29T16:57:28+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-06-29T16:57:34+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">17</version>
      <user-name>Repository</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>Does this solve this problem: http://stackoverflow.com/questions/3027704/nomethoderror-for-time-zone-select-in-a-form ?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Does this solve this problem: &lt;a href=
&quot;http://stackoverflow.com/questions/3027704/nomethoderror-for-time-zone-select-in-a-form&quot;&gt;
http://stackoverflow.com/questions/3027704/nomethoderror-for-time-z...&lt;/a&gt;
?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-01T13:02:24+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-07-01T13:02:43+01:00</updated-at>
      <user-id type="integer">103648</user-id>
      <version type="integer">18</version>
      <user-name>plind</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>@plind yes, sorry I didn't see this for a month. This resolves the issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@plind yes, sorry I didn't see this for a month. This resolves
the issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-23T21:35:18+01:00</created-at>
      <creator-id type="integer">16401</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">4942</number>
      <permalink>activesupporttimezone-incorrectly-stores-bogus-values-in-zones_map</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>active_support timezone</tag>
      <title>ActiveSupport::TimeZone.[] incorrectly stores bogus values in zones_map</title>
      <updated-at type="datetime">2010-07-23T21:35:23+01:00</updated-at>
      <user-id type="integer">16401</user-id>
      <version type="integer">19</version>
      <user-name>Leigh Caplan</user-name>
      <creator-name>Leigh Caplan</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4942</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>0f362ffa3600d0f30370c20dc7f0ace56e50ad16</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-23T03:39:44+01:00</created-at>
      <filename>0001-prevent-bogus-time-zones-from-storing-nil-keys-in-ac.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">569893</id>
      <size type="integer">1847</size>
      <uploader-id type="integer">16401</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/569893/0001-prevent-bogus-time-zones-from-storing-nil-keys-in-ac.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>a56b4c4f4a8d1c76c596170b08444019cf43cd71</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-23T18:36:33+01:00</created-at>
      <filename>time_zone_map_fix.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">570896</id>
      <size type="integer">3152</size>
      <uploader-id type="integer">16401</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/570896/time_zone_map_fix.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>a920db48aed5e489a8736dac942647e5d49b5558</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-28T19:33:54+01:00</created-at>
      <filename>backport-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">578931</id>
      <size type="integer">2094</size>
      <uploader-id type="integer">40272</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/578931/backport-2-3-stable.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>cd003b752e12db54567d7ea70f419ab62060dd03</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-28T23:52:17+01:00</created-at>
      <filename>lookup-fix-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">579448</id>
      <size type="integer">1065</size>
      <uploader-id type="integer">16401</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/579448/lookup-fix-2-3-stable.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>8ef47030f32b8c8589429291d00252118a74345d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-29T01:53:53+01:00</created-at>
      <filename>lookup-tests-fix-2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">579520</id>
      <size type="integer">2331</size>
      <uploader-id type="integer">16401</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/579520/lookup-tests-fix-2-3-stable.patch</url>
    </attachment>
  </attachments>
</ticket>
