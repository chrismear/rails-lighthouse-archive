<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">7697</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-03-29T02:29:20+01:00</created-at>
  <creator-id type="integer">1151</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">1939</number>
  <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
  <priority type="integer">1199</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag nil="true"></tag>
  <title>Bad routing recognition with globbing/format/requirements</title>
  <updated-at type="datetime">2011-03-29T02:29:20+01:00</updated-at>
  <user-id type="integer">7697</user-id>
  <version type="integer">14</version>
  <user-name>Andrew White</user-name>
  <creator-name>Johan S&#248;rensen</creator-name>
  <assigned-user-name>Andrew White</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
  <milestone-title>3.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>The changes introduced in fef6c32afe2276df (&quot;Added optimal formatted routes to rails, deprecating the formatted_* methods[...]&quot;) breaks the use of :requirement parameter on :format (useful on &quot;globbed&quot; route paths where you'd only want to allow certain formats)

Here's a failing test case:

@@@ ruby
  def test_paths_should_allow_to_set_format_regexp_requirement
    rs.draw do |map|
      map.connect('files/*path.:format', :controller =&gt; 'content', 
        :action =&gt; 'show_file', :requirements =&gt; {:format =&gt; /(zip|tar.gz)/})
    end
    
    assert_equal({:controller =&gt; &quot;content&quot;, :action =&gt; 'show_file', :path =&gt; ['foo', 'bar'], 
        :format =&gt; &quot;zip&quot; }, rs.recognize_path(&quot;/files/foo/bar.zip&quot;))
    assert_equal({:controller =&gt; &quot;content&quot;, :action =&gt; 'show_file', :path =&gt; ['foo', 'bar'], 
        :format =&gt; &quot;tar.gz&quot; }, rs.recognize_path(&quot;/files/foo/bar.tar.gz&quot;))
  end
@@@</original-body>
  <latest-body>The changes introduced in fef6c32afe2276df (&quot;Added optimal formatted routes to rails, deprecating the formatted_* methods[...]&quot;) breaks the use of :requirement parameter on :format (useful on &quot;globbed&quot; route paths where you'd only want to allow certain formats)

Here's a failing test case:

@@@ ruby
  def test_paths_should_allow_to_set_format_regexp_requirement
    rs.draw do |map|
      map.connect('files/*path.:format', :controller =&gt; 'content', 
        :action =&gt; 'show_file', :requirements =&gt; {:format =&gt; /(zip|tar.gz)/})
    end
    
    assert_equal({:controller =&gt; &quot;content&quot;, :action =&gt; 'show_file', :path =&gt; ['foo', 'bar'], 
        :format =&gt; &quot;zip&quot; }, rs.recognize_path(&quot;/files/foo/bar.zip&quot;))
    assert_equal({:controller =&gt; &quot;content&quot;, :action =&gt; 'show_file', :path =&gt; ['foo', 'bar'], 
        :format =&gt; &quot;tar.gz&quot; }, rs.recognize_path(&quot;/files/foo/bar.tar.gz&quot;))
  end
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The changes introduced in fef6c32afe2276df (&quot;Added optimal
formatted routes to rails, deprecating the formatted_*
methods[...]&quot;) breaks the use of :requirement parameter on :format
(useful on &quot;globbed&quot; route paths where you'd only want to allow
certain formats)&lt;/p&gt;
&lt;p&gt;Here's a failing test case:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  def test_paths_should_allow_to_set_format_regexp_requirement
    rs.draw do |map|
      map.connect('files/*path.:format', :controller =&amp;gt; 'content', 
        :action =&amp;gt; 'show_file', :requirements =&amp;gt; {:format =&amp;gt; /(zip|tar.gz)/})
    end
    
    assert_equal({:controller =&amp;gt; &amp;quot;content&amp;quot;, :action =&amp;gt; 'show_file', :path =&amp;gt; ['foo', 'bar'], 
        :format =&amp;gt; &amp;quot;zip&amp;quot; }, rs.recognize_path(&amp;quot;/files/foo/bar.zip&amp;quot;))
    assert_equal({:controller =&amp;gt; &amp;quot;content&amp;quot;, :action =&amp;gt; 'show_file', :path =&amp;gt; ['foo', 'bar'], 
        :format =&amp;gt; &amp;quot;tar.gz&amp;quot; }, rs.recognize_path(&amp;quot;/files/foo/bar.tar.gz&amp;quot;))
  end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The changes introduced in fef6c32afe2276df (&quot;Added optimal formatted routes to rails, deprecating the formatted_* methods[...]&quot;) breaks the use of :requirement parameter on :format (useful on &quot;globbed&quot; route paths where you'd only want to allow certain formats)

Here's a failing test case:

@@@ ruby
  def test_paths_should_allow_to_set_format_regexp_requirement
    rs.draw do |map|
      map.connect('files/*path.:format', :controller =&gt; 'content', 
        :action =&gt; 'show_file', :requirements =&gt; {:format =&gt; /(zip|tar.gz)/})
    end
    
    assert_equal({:controller =&gt; &quot;content&quot;, :action =&gt; 'show_file', :path =&gt; ['foo', 'bar'], 
        :format =&gt; &quot;zip&quot; }, rs.recognize_path(&quot;/files/foo/bar.zip&quot;))
    assert_equal({:controller =&gt; &quot;content&quot;, :action =&gt; 'show_file', :path =&gt; ['foo', 'bar'], 
        :format =&gt; &quot;tar.gz&quot; }, rs.recognize_path(&quot;/files/foo/bar.tar.gz&quot;))
  end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;The changes introduced in fef6c32afe2276df (&quot;Added optimal
formatted routes to rails, deprecating the formatted_*
methods[...]&quot;) breaks the use of :requirement parameter on :format
(useful on &quot;globbed&quot; route paths where you'd only want to allow
certain formats)&lt;/p&gt;
&lt;p&gt;Here's a failing test case:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
  def test_paths_should_allow_to_set_format_regexp_requirement
    rs.draw do |map|
      map.connect('files/*path.:format', :controller =&amp;gt; 'content', 
        :action =&amp;gt; 'show_file', :requirements =&amp;gt; {:format =&amp;gt; /(zip|tar.gz)/})
    end
    
    assert_equal({:controller =&amp;gt; &amp;quot;content&amp;quot;, :action =&amp;gt; 'show_file', :path =&amp;gt; ['foo', 'bar'], 
        :format =&amp;gt; &amp;quot;zip&amp;quot; }, rs.recognize_path(&amp;quot;/files/foo/bar.zip&amp;quot;))
    assert_equal({:controller =&amp;gt; &amp;quot;content&amp;quot;, :action =&amp;gt; 'show_file', :path =&amp;gt; ['foo', 'bar'], 
        :format =&amp;gt; &amp;quot;tar.gz&amp;quot; }, rs.recognize_path(&amp;quot;/files/foo/bar.tar.gz&amp;quot;))
  end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-11T13:48:06+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>&quot;optimal formatted routes&quot; breaks format requirements</title>
      <updated-at type="datetime">2009-02-11T13:48:10+00:00</updated-at>
      <user-id type="integer">1151</user-id>
      <version type="integer">1</version>
      <user-name>Johan S&#248;rensen</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>There are a couple of general issues tangled up together here. You can see both by looking at the route recognizer we build in this case:

@@@
def recognize(path, env = {})
if (match = /\A\/files(?:\/?\Z|\/(.*)(?:\/|(\.[^\/?\.]+)?)??)\Z/.match(path))
params = parameter_shell.dup
params[:path] = PathSegment::Result.new_escaped((match[1] || &quot;&quot;).split('/'))

          if (m = match[2])
            params[:format] = URI.unescape(m.from(1))
          end

params
end
end
@@@

Two problems:

1) Because we use (.*) to match the globbed path, there will never be a match[2] here to match against the format

2) Even if we fixed that, this would still fail because the regex segment we generate for the format includes [^\/?\.], causing it to only recognize formats without a dot in them - so .tar.gz will never been seen as a format in any route.

Both of these issues seem fairly intractable for the 2.3 cycle. It *looks* like changing the format recognition regexp segment to include [^\/?] would fix the second issue, but that causes test_irregular_id_with_no_requirements_should_raise_error(ResourcesTest) to fail - personally I'm not too happy about that test, but it documents existing behavior that we probably don't want to change.

For what it's worth, here's a patch with a bunch of tests to document the failures. In the current edge code, test_path_without_format_should_include_format_in_path passes and all the rest fail. I think in an ideal world all should pass.</body>
      <body-html>&lt;div&gt;&lt;p&gt;There are a couple of general issues tangled up together here.
You can see both by looking at the route recognizer we build in
this case:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
def recognize(path, env = {})
if (match = /\A\/files(?:\/?\Z|\/(.*)(?:\/|(\.[^\/?\.]+)?)??)\Z/.match(path))
params = parameter_shell.dup
params[:path] = PathSegment::Result.new_escaped((match[1] || &amp;quot;&amp;quot;).split('/'))

          if (m = match[2])
            params[:format] = URI.unescape(m.from(1))
          end

params
end
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Two problems:&lt;/p&gt;
&lt;p&gt;1) Because we use (.*) to match the globbed path, there will
never be a match[2] here to match against the format&lt;/p&gt;
&lt;p&gt;2) Even if we fixed that, this would still fail because the
regex segment we generate for the format includes [^\/?.], causing
it to only recognize formats without a dot in them - so .tar.gz
will never been seen as a format in any route.&lt;/p&gt;
&lt;p&gt;Both of these issues seem fairly intractable for the 2.3 cycle.
It &lt;em&gt;looks&lt;/em&gt; like changing the format recognition regexp
segment to include [^\/?] would fix the second issue, but that
causes
test_irregular_id_with_no_requirements_should_raise_error(ResourcesTest)
to fail - personally I'm not too happy about that test, but it
documents existing behavior that we probably don't want to
change.&lt;/p&gt;
&lt;p&gt;For what it's worth, here's a patch with a bunch of tests to
document the failures. In the current edge code,
test_path_without_format_should_include_format_in_path passes and
all the rest fail. I think in an ideal world all should pass.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-10T12:55:09+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:title: &quot;\&quot;optimal formatted routes\&quot; breaks format requirements&quot;
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-03-10T12:55:14+00:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">2</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-11T17:32:35+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 424
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-03-11T17:49:40+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">3</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-12T14:49:54+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-03-12T14:49:59+00:00</updated-at>
      <user-id type="integer">1366</user-id>
      <version type="integer">4</version>
      <user-name>Pratik</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>For me, globbed routes with an attached format parameter generally don't work:

@@@
map.article ':locale/*path.:format', :controller =&gt; &quot;articles&quot;, :action =&gt; &quot;show&quot;
@@@

The format parameter is always being concatenated to the last element of the path array.</body>
      <body-html>&lt;div&gt;&lt;p&gt;For me, globbed routes with an attached format parameter
generally don't work:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;map.article ':locale/*path.:format', :controller =&amp;gt; &quot;articles&quot;, :action =&amp;gt; &quot;show&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The format parameter is always being concatenated to the last
element of the path array.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-15T17:16:07+01:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-07-15T17:16:09+01:00</updated-at>
      <user-id type="integer">22073</user-id>
      <version type="integer">5</version>
      <user-name>Robert Glaser</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-03T06:14:40+01:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash</tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-08-03T06:14:43+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">6</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 The patch applies cleanly to Rails 2.3 (2-3-stable) and Rails 3.0 (master).</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 The patch applies cleanly to Rails 2.3 (2-3-stable) and Rails
3.0 (master).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T03:05:21+01:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash</tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-08-09T03:05:23+01:00</updated-at>
      <user-id type="integer">26790</user-id>
      <version type="integer">7</version>
      <user-name>Kieran P</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Mike's patch applies to master, and indeed, only test_path_without_format_should_include_format_in_path passes from the 5 proposed tests.

IMHO there's a link with #2478</body>
      <body-html>&lt;div&gt;&lt;p&gt;Mike's patch applies to master, and indeed, only
test_path_without_format_should_include_format_in_path passes from
the 5 proposed tests.&lt;/p&gt;
&lt;p&gt;IMHO there's a link with &lt;a href=&quot;/projects/8994/tickets/2478&quot;
title=&quot;Ticket #2478&quot;&gt;#2478&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-15T17:50:34+01:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash</tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-08-15T17:50:39+01:00</updated-at>
      <user-id type="integer">36650</user-id>
      <version type="integer">8</version>
      <user-name>Elise Huard</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Bump for great justice; this is really annoying.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Bump for great justice; this is really annoying.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-18T19:52:52+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>bugmash</tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2009-12-18T19:52:55+00:00</updated-at>
      <user-id type="integer">41151</user-id>
      <version type="integer">9</version>
      <user-name>Peter Abrahamsen</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/13645)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/13645&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-12T12:46:14+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2010-02-12T12:46:14+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">10</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:39+01:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2010-05-04T18:48:39+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">11</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This seems to be working now:

@@@ ruby
  match '/:locale/*path.:format', :to =&gt; 'articles#show'

  # GET /en/this/is/a/long/path.html
  # =&gt; {&quot;format&quot;=&gt;&quot;html&quot;, &quot;action&quot;=&gt;&quot;show&quot;, &quot;path&quot;=&gt;&quot;this/is/a/long/path&quot;, &quot;controller&quot;=&gt;&quot;articles&quot;, &quot;locale&quot;=&gt;&quot;en&quot;}
@@@

Please update this ticket if it isn't working for you.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This seems to be working now:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  match '/:locale/*path.:format', :to =&amp;gt; 'articles#show'

  # GET /en/this/is/a/long/path.html
  # =&amp;gt; {&quot;format&quot;=&amp;gt;&quot;html&quot;, &quot;action&quot;=&amp;gt;&quot;show&quot;, &quot;path&quot;=&amp;gt;&quot;this/is/a/long/path&quot;, &quot;controller&quot;=&amp;gt;&quot;articles&quot;, &quot;locale&quot;=&amp;gt;&quot;en&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Please update this ticket if it isn't working for you.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-25T14:44:20+01:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2010-06-25T14:44:34+01:00</updated-at>
      <user-id type="integer">7697</user-id>
      <version type="integer">12</version>
      <user-name>Andrew White</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hello,

what about cases where `:format` is omitted? The route to `/en/this/is/a/long/path` will not match `articles#show` action with `:format =&gt; 'html'`.

Adding:
@@@ ruby
:defaults =&gt; { :format =&gt; 'html' }
@@@

does not solve the problem. Also changing the `match` to:

@@@ ruby
match '/:locale/*path(.:format)', :to =&gt; 'articles#show'
@@@

The routes that work as expected (allows the optional format) should look like this:

@@@ ruby
match '/:locale/*path.:format', :to =&gt; 'articles#show'
match '/:locale/*path',         :to =&gt; 'articles#show', :as =&gt; &quot;article&quot;
@@@

I am submitting a diff with failing tests to clarify my point.

Regards,
Dawid</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;what about cases where &lt;code&gt;:format&lt;/code&gt; is omitted? The
route to &lt;code&gt;/en/this/is/a/long/path&lt;/code&gt; will not match
&lt;code&gt;articles#show&lt;/code&gt; action with &lt;code&gt;:format =&amp;gt;
'html'&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Adding:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;:defaults =&amp;gt; { :format =&amp;gt; 'html' }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;does not solve the problem. Also changing the &lt;code&gt;match&lt;/code&gt;
to:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;match '/:locale/*path(.:format)', :to =&amp;gt; 'articles#show'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The routes that work as expected (allows the optional format)
should look like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;match '/:locale/*path.:format', :to =&amp;gt; 'articles#show'
match '/:locale/*path',         :to =&amp;gt; 'articles#show', :as =&amp;gt; &quot;article&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I am submitting a diff with failing tests to clarify my
point.&lt;/p&gt;
&lt;p&gt;Regards,&lt;br&gt;
Dawid&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-11T12:56:48+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">1199</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2010-11-11T12:56:51+00:00</updated-at>
      <user-id type="integer">88025</user-id>
      <version type="integer">13</version>
      <user-name>Dawid Fatyga</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The problem with trying to make the format parameter optional is that glob parameter will eat up the format even if you set the parameter regexp to be non-greedy. You need a fixed item in the path to stop the glob matching - the following works:

@@@ ruby
  match '/:locale/*category/:article(.:format)' =&gt; 'articles#show', :as =&gt; :article
  # Matches the following:
  # - /en/computers/apple
  # - /en/computers/apple.html
  # - /en/computers/apple.xml
  # - /en/computers/apple/macbook
  # - /en/computers/apple/macbook.html
  # - /en/computers/apple/macbook.xml
@@@

You can make the category optional as well

@@@ ruby
  match '/:locale/(*category)/:article(.:format)' =&gt; 'articles#show', :as =&gt; :article
@@@

You don't need the format parameter - Rails will add that by default unless you pass :format =&gt; false.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The problem with trying to make the format parameter optional is
that glob parameter will eat up the format even if you set the
parameter regexp to be non-greedy. You need a fixed item in the
path to stop the glob matching - the following works:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  match '/:locale/*category/:article(.:format)' =&amp;gt; 'articles#show', :as =&amp;gt; :article
  # Matches the following:
  # - /en/computers/apple
  # - /en/computers/apple.html
  # - /en/computers/apple.xml
  # - /en/computers/apple/macbook
  # - /en/computers/apple/macbook.html
  # - /en/computers/apple/macbook.xml&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;You can make the category optional as well&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  match '/:locale/(*category)/:article(.:format)' =&amp;gt; 'articles#show', :as =&amp;gt; :article&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;You don't need the format parameter - Rails will add that by
default unless you pass :format =&amp;gt; false.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-11T13:58:58+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">1199</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2010-11-11T13:59:04+00:00</updated-at>
      <user-id type="integer">7697</user-id>
      <version type="integer">14</version>
      <user-name>Andrew White</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>In spite of there are thousands and millions shoes offered in the market, &lt;a href=&quot;http://www.wholesalenflstore.com/pittsburgh-steelers-jerseys-c-80.html&quot;&gt;pittsburgh steelers jerseys&lt;/a&gt; make your shoe storage cabinet &lt;a href=&quot;http://www.wholesalenflstore.com/houston-texans-jerseys-c-69.html&quot;&gt;houston texans authentic jerseys&lt;/a&gt; plenty choices by engaging a new pair of black wedge boots today, trust my word, Nike Air Max 95 shoes definitely worth more than its value. &lt;a href=&quot;http://www.wholesalenflstore.com/miami-dolphins-jerseys-c-66.html&quot;&gt;dolphins football jerseys&lt;/a&gt; This style is the aboriginal shoes to affection Air Max cushioning &lt;a href=&quot;http://www.wholesalenflstore.com/new-york-giants-jerseys-c-82.html&quot;&gt;new york giants nfl&lt;/a&gt; arrangement in both the heel and forefoot. The air max 95 wants to action you a &lt;a href=&quot;http://www.wholesalenflstore.com/womens-nfl-jerseys-c-101.html&quot;&gt;nfl jerseys for women&lt;/a&gt; brace air max shoes as adequate as fashionable. In 1995, Nike launched this &lt;a href=&quot;http://www.wholesalenflstore.com/oakland-raiders-jerseys-c-107.html&quot;&gt;oakland raiders jerseys&lt;/a&gt; version which won the high reputation in that time. Everybody loves Nike Air Max 95 that Nike had to re-issue the archetypal so abounding times. Most of the people are attracted by this unique design of Nike Air Max shoes. It comes in suede and mesh construction with some reflective 3M for visibility, and whilst this new pair makes use of none of those resources, it&#8217;ll have no difficulty being seen. These new Ninety-Fives are crafted fully in black leather, but simply because some of it&#8217;s smooth and supple while contrasting tiers are accomplished in patent leather, you receive a rather wide selection of &lt;a href=&quot;http://www.wholesalenflstore.com/san-diego-chargers-jerseys-c-76.html&quot;&gt;sd chargers jerseys&lt;/a&gt; this &#8216;un-color&#8217;. And as with pretty much any &lt;a href=&quot;http://www.wholesalenflstore.com/cincinnati-bengals-jerseys-c-78.html&quot;&gt;cincinnati bengals jerseys&lt;/a&gt; athletic shoe, adding red and white accents &lt;a href=&quot;http://www.wholesalenflstore.com/new-york-giants-jerseys-c-82.html&quot;&gt;new york giants nfl&lt;/a&gt; to a black base helps make &lt;a href=&quot;http://www.wholesalenflstore.com/cleveland-browns-jerseys-c-79.html&quot;&gt;cleveland browns jerseys&lt;/a&gt; for a must-cop. With long-term and rich experience, we believe Air &lt;a href=&quot;http://www.wholesalenflstore.com/youth-nfl-jerseys-c-100.html&quot;&gt;youth nfl football jersey&lt;/a&gt; Max shoes &lt;a href=&quot;http://www.wholesalenflstore.com/san-diego-chargers-jerseys-c-76.html&quot;&gt;san diego chargers jerseys&lt;/a&gt; will create our characterized selling points that offer new recent models with new color way based on &lt;a href=&quot;http://www.wholesalenflstore.com/detroit-lions-jerseys-c-94.html&quot;&gt;detroit lions jerseys&lt;/a&gt; our high &lt;a href=&quot;http://www.wholesalenflstore.com/philadelphia-eagles-jerseys-c-83.html&quot;&gt;philadelphia eagles jerseys&lt;/a&gt; quality, collegiate-inspired, casual luxury footwear. &lt;br/&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;In spite of there are thousands and millions shoes offered in
the market, &lt;a href=
&quot;http://www.wholesalenflstore.com/pittsburgh-steelers-jerseys-c-80.html&quot;&gt;
pittsburgh steelers jerseys&lt;/a&gt; make your shoe storage cabinet
&lt;a href=
&quot;http://www.wholesalenflstore.com/houston-texans-jerseys-c-69.html&quot;&gt;
houston texans authentic jerseys&lt;/a&gt; plenty choices by engaging a
new pair of black wedge boots today, trust my word, Nike Air Max 95
shoes definitely worth more than its value. &lt;a href=
&quot;http://www.wholesalenflstore.com/miami-dolphins-jerseys-c-66.html&quot;&gt;
dolphins football jerseys&lt;/a&gt; This style is the aboriginal shoes to
affection Air Max cushioning &lt;a href=
&quot;http://www.wholesalenflstore.com/new-york-giants-jerseys-c-82.html&quot;&gt;
new york giants nfl&lt;/a&gt; arrangement in both the heel and forefoot.
The air max 95 wants to action you a &lt;a href=
&quot;http://www.wholesalenflstore.com/womens-nfl-jerseys-c-101.html&quot;&gt;nfl
jerseys for women&lt;/a&gt; brace air max shoes as adequate as
fashionable. In 1995, Nike launched this &lt;a href=
&quot;http://www.wholesalenflstore.com/oakland-raiders-jerseys-c-107.html&quot;&gt;
oakland raiders jerseys&lt;/a&gt; version which won the high reputation
in that time. Everybody loves Nike Air Max 95 that Nike had to
re-issue the archetypal so abounding times. Most of the people are
attracted by this unique design of Nike Air Max shoes. It comes in
suede and mesh construction with some reflective 3M for visibility,
and whilst this new pair makes use of none of those resources,
it&amp;#8217;ll have no difficulty being seen. These new Ninety-Fives
are crafted fully in black leather, but simply because some of
it&amp;#8217;s smooth and supple while contrasting tiers are
accomplished in patent leather, you receive a rather wide selection
of &lt;a href=
&quot;http://www.wholesalenflstore.com/san-diego-chargers-jerseys-c-76.html&quot;&gt;
sd chargers jerseys&lt;/a&gt; this &amp;#8216;un-color&amp;#8217;. And as with
pretty much any &lt;a href=
&quot;http://www.wholesalenflstore.com/cincinnati-bengals-jerseys-c-78.html&quot;&gt;
cincinnati bengals jerseys&lt;/a&gt; athletic shoe, adding red and white
accents &lt;a href=
&quot;http://www.wholesalenflstore.com/new-york-giants-jerseys-c-82.html&quot;&gt;
new york giants nfl&lt;/a&gt; to a black base helps make &lt;a href=
&quot;http://www.wholesalenflstore.com/cleveland-browns-jerseys-c-79.html&quot;&gt;
cleveland browns jerseys&lt;/a&gt; for a must-cop. With long-term and
rich experience, we believe Air &lt;a href=
&quot;http://www.wholesalenflstore.com/youth-nfl-jerseys-c-100.html&quot;&gt;youth
nfl football jersey&lt;/a&gt; Max shoes &lt;a href=
&quot;http://www.wholesalenflstore.com/san-diego-chargers-jerseys-c-76.html&quot;&gt;
san diego chargers jerseys&lt;/a&gt; will create our characterized
selling points that offer new recent models with new color way
based on &lt;a href=
&quot;http://www.wholesalenflstore.com/detroit-lions-jerseys-c-94.html&quot;&gt;detroit
lions jerseys&lt;/a&gt; our high &lt;a href=
&quot;http://www.wholesalenflstore.com/philadelphia-eagles-jerseys-c-83.html&quot;&gt;
philadelphia eagles jerseys&lt;/a&gt; quality, collegiate-inspired,
casual luxury footwear.&lt;br&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-08T02:14:37+00:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">1199</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2011-01-08T23:56:41+00:00</updated-at>
      <user-id type="integer">131700</user-id>
      <version type="integer">15</version>
      <user-name>xxchenjialong</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">7697</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>&lt;a href=&quot;http://www.hdvideoconverter-mac.com&quot;&gt;Video Converter for Mac&lt;/a&gt;
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-converter-for-mac.html&quot;&gt;DVD Converter for Mac&lt;/a&gt; 
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/blu-ray-ripper-for-mac.html&quot;&gt;Blu-Ray Ripper for Mac&lt;/a&gt; 
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-maker-suite-for-mac.html&quot;&gt;DVD Maker Suite for Mac&lt;/a&gt; 
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-creator-for-mac.html&quot;&gt;DVD Creator for Mac&lt;/a&gt; 	
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-ripper-for-mac.html&quot;&gt;DVD Ripper for Mac&lt;/a&gt; 
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-copy-for-mac.html&quot;&gt;DVD Copy for Mac&lt;/a&gt; 
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/blu-ray-video-converter.html&quot;&gt;Blu-Ray Video Converter&lt;/a&gt;     
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-converter.html&quot;&gt;DVD Converter&lt;/a&gt;  
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-burner.html&quot;&gt;DVD Burner&lt;/a&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.hdvideoconverter-mac.com&quot;&gt;Video Converter
for Mac&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/dvd-converter-for-mac.html&quot;&gt;DVD
Converter for Mac&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/blu-ray-ripper-for-mac.html&quot;&gt;Blu-Ray
Ripper for Mac&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/dvd-maker-suite-for-mac.html&quot;&gt;DVD
Maker Suite for Mac&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/dvd-creator-for-mac.html&quot;&gt;DVD
Creator for Mac&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/dvd-ripper-for-mac.html&quot;&gt;DVD
Ripper for Mac&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/dvd-copy-for-mac.html&quot;&gt;DVD
Copy for Mac&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/blu-ray-video-converter.html&quot;&gt;Blu-Ray
Video Converter&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.hdvideoconverter-mac.com/dvd-converter.html&quot;&gt;DVD
Converter&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.hdvideoconverter-mac.com/dvd-burner.html&quot;&gt;DVD
Burner&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-29T02:14:12+01:00</created-at>
      <creator-id type="integer">1151</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">1939</number>
      <permalink>optimal-formatted-routes-breaks-format-requirements</permalink>
      <priority type="integer">1199</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>Bad routing recognition with globbing/format/requirements</title>
      <updated-at type="datetime">2011-03-29T02:29:20+01:00</updated-at>
      <user-id type="integer">143271</user-id>
      <version type="integer">16</version>
      <user-name>happy2011</user-name>
      <creator-name>Johan S&#248;rensen</creator-name>
      <assigned-user-name>Andrew White</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1939</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>c6d5efcba646fa0362166b34dbfe6807e981965c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-03-10T12:55:09+00:00</created-at>
      <filename>failing_routing_tests.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">97943</id>
      <size type="integer">3538</size>
      <uploader-id type="integer">7211</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/97943/failing_routing_tests.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>5bc95f9ab53a854ef929db5b74eb4eb2b58bce10</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-11-11T12:56:48+00:00</created-at>
      <filename>globbing_routes_failing_test.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">765661</id>
      <size type="integer">2027</size>
      <uploader-id type="integer">88025</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/765661/globbing_routes_failing_test.diff</url>
    </attachment>
  </attachments>
</ticket>
