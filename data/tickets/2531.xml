<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">12714</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-04-21T02:46:58+01:00</created-at>
  <creator-id type="integer">5026</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">2531</number>
  <permalink>fix-rails-templates-for-windows</permalink>
  <priority type="integer">8</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag nil="true"></tag>
  <title>Fix Rails Templates for Windows</title>
  <updated-at type="datetime">2010-11-08T08:48:40+00:00</updated-at>
  <user-id type="integer">94458</user-id>
  <version type="integer">22</version>
  <user-name>Jeff Kreeftmeijer</user-name>
  <creator-name>James Herdman</creator-name>
  <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Rails templates currently don't work with Windows. That thing you think is called &quot;rails&quot; is actually &quot;rails.bat&quot; for Windows. This patch makes things a little better for us stuck in the Enterprise.</original-body>
  <latest-body>Rails templates currently don't work with Windows. That thing you think is called &quot;rails&quot; is actually &quot;rails.bat&quot; for Windows. This patch makes things a little better for us stuck in the Enterprise.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Rails templates currently don't work with Windows. That thing
you think is called &quot;rails&quot; is actually &quot;rails.bat&quot; for Windows.
This patch makes things a little better for us stuck in the
Enterprise.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Rails templates currently don't work with Windows. That thing you think is called &quot;rails&quot; is actually &quot;rails.bat&quot; for Windows. This patch makes things a little better for us stuck in the Enterprise.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rails templates currently don't work with Windows. That thing
you think is called &quot;rails&quot; is actually &quot;rails.bat&quot; for Windows.
This patch makes things a little better for us stuck in the
Enterprise.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T02:46:58+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-04-21T02:46:59+01:00</updated-at>
      <user-id type="integer">5026</user-id>
      <version type="integer">1</version>
      <user-name>James Herdman</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Nice!  Thanks for fixing that.  I didn't have a chance to test in Windows, so this is a very welcome fix. :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Nice! Thanks for fixing that. I didn't have a chance to test in
Windows, so this is a very welcome fix. :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T03:35:33+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-04-21T03:35:35+01:00</updated-at>
      <user-id type="integer">159</user-id>
      <version type="integer">2</version>
      <user-name>Jeremy McAnally</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Might also want to solicit some input from the JRuby folks, as they have yet another way to run commands (jruby -S rake, for instance). See also discussion on #2215 for details.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Might also want to solicit some input from the JRuby folks, as
they have yet another way to run commands (jruby -S rake, for
instance). See also discussion on &lt;a href=
&quot;/projects/8994/tickets/2215&quot; title=&quot;Ticket #2215&quot;&gt;#2215&lt;/a&gt; for
details.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-26T16:20:28+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-05-26T16:20:32+01:00</updated-at>
      <user-id type="integer">22589</user-id>
      <version type="integer">3</version>
      <user-name>Matt Jones</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This is not only problem. Rails template commands (such as plugin) should be run with the same ruby executable that run generator.
So, if I run &quot;c:\ruby-1.8.7\bin\rails.bat myapp&quot; it should use interpeter from c:\ruby-1.8.7\bin.
This problem affects also other platforms. Patch is attached.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is not only problem. Rails template commands (such as
plugin) should be run with the same ruby executable that run
generator.&lt;br&gt;
So, if I run &quot;c:\ruby-1.8.7\bin\rails.bat myapp&quot; it should use
interpeter from c:\ruby-1.8.7\bin.&lt;br&gt;
This problem affects also other platforms. Patch is attached.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-02T14:31:15+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-02T14:31:16+01:00</updated-at>
      <user-id type="integer">43907</user-id>
      <version type="integer">4</version>
      <user-name>Dennis Ushakov</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Dennis Ushakov, good catch, but I'm not sure the best solution is to include Rake as a dependency to get use of FileUtils::RUBY. I think it's fairly safe to consider Ruby in the path of the user. Something like the following might be a little simpler:

@@@ruby
def run_ruby_script(command, log_action = true)
  run(&quot;#{app('ruby')} #{command}&quot;, log_action)
  # where +app+ is defined in my patch
end
@@@

Thoughts?</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Dennis Ushakov, good catch, but I'm not sure the best solution
is to include Rake as a dependency to get use of FileUtils::RUBY. I
think it's fairly safe to consider Ruby in the path of the user.
Something like the following might be a little simpler:&lt;/p&gt;
&lt;p&gt;@@@ruby def run_ruby_script(command, log_action = true)&lt;br&gt;
run(&quot;#{app('ruby')} #{command}&quot;, log_action) # where +app+ is
defined in my patch end&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
Thoughts?&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-02T14:45:17+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-02T14:45:21+01:00</updated-at>
      <user-id type="integer">5026</user-id>
      <version type="integer">5</version>
      <user-name>James Herdman</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Wow... I really borked the formatting on that comment.

@@@ ruby
def run_ruby_script(command, log_action = true) run(&quot;#{app('ruby')} #{command}&quot;, log_action) # where +app+ is defined in my patch end
@@@

Hopefully that worked out better.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Wow... I really borked the formatting on that comment.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;def run_ruby_script(command, log_action = true) run(&quot;#{app('ruby')} #{command}&quot;, log_action) # where +app+ is defined in my patch end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Hopefully that worked out better.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-02T14:46:35+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-02T14:46:40+01:00</updated-at>
      <user-id type="integer">5026</user-id>
      <version type="integer">6</version>
      <user-name>James Herdman</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@James Herdman
rake isn't really needed, but it's already a dependency for rails if you look at gem spec =) Also, code from rake could be simply copied.
ruby on path isn't a good idea, because someone (for example me) may have couple of ruby interpreters installed and only one of them is in the path. As far as I know, this is common behaviour for mac users (the have built-in ruby and macports)</body>
      <body-html>&lt;div&gt;&lt;p&gt;@James Herdman rake isn't really needed, but it's already a
dependency for rails if you look at gem spec =) Also, code from
rake could be simply copied.&lt;br&gt;
ruby on path isn't a good idea, because someone (for example me)
may have couple of ruby interpreters installed and only one of them
is in the path. As far as I know, this is common behaviour for mac
users (the have built-in ruby and macports)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-02T14:56:14+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-02T14:56:17+01:00</updated-at>
      <user-id type="integer">43907</user-id>
      <version type="integer">7</version>
      <user-name>Dennis Ushakov</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>doesn't accomodate for mingw with RUBY_PLATFORM =~ /mswin|mingw/
Cheers!</body>
      <body-html>&lt;div&gt;&lt;p&gt;doesn't accomodate for mingw with RUBY_PLATFORM =~
/mswin|mingw/&lt;br&gt;
Cheers!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-23T16:47:25+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-23T16:47:31+01:00</updated-at>
      <user-id type="integer">18996</user-id>
      <version type="integer">8</version>
      <user-name>Roger</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Roger: what problems do you see with my patch on mingw?</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Roger: what problems do you see with my patch on mingw?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-23T21:06:38+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-23T21:06:42+01:00</updated-at>
      <user-id type="integer">43907</user-id>
      <version type="integer">9</version>
      <user-name>Dennis Ushakov</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>While in berlin yehuda and I had a conversation about something along these lines.  A cross-platform and 'safe' way to determine the correct ruby command to run.

yehuda,  what was it? ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;While in berlin yehuda and I had a conversation about something
along these lines. A cross-platform and 'safe' way to determine the
correct ruby command to run.&lt;/p&gt;
&lt;p&gt;yehuda, what was it? ;)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-26T06:14:34+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-26T06:14:40+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">10</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Michael, perhaps we should talk to Charles Nutter about this issue? JRuby automagically handles the issue at hand.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Michael, perhaps we should talk to Charles Nutter about this
issue? JRuby automagically handles the issue at hand.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-26T13:58:08+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-26T13:58:13+01:00</updated-at>
      <user-id type="integer">5026</user-id>
      <version type="integer">11</version>
      <user-name>James Herdman</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Gem.ruby should probably work. It's implemented as:

@@@ ruby
  def self.ruby
    if @ruby.nil? then
      @ruby = File.join(ConfigMap[:bindir],
                        ConfigMap[:ruby_install_name])
      @ruby &lt;&lt; ConfigMap[:EXEEXT]

      # escape string in case path to ruby executable contain spaces.
      @ruby.sub!(/.*\s.*/m, '&quot;\&amp;&quot;')
    end

    @ruby
  end
@@@

Seems pretty straight-forward. We could probably grab it for cases where the rubygems library is unavailable.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Gem.ruby should probably work. It's implemented as:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;  def self.ruby
    if @ruby.nil? then
      @ruby = File.join(ConfigMap[:bindir],
                        ConfigMap[:ruby_install_name])
      @ruby &amp;lt;&amp;lt; ConfigMap[:EXEEXT]

      # escape string in case path to ruby executable contain spaces.
      @ruby.sub!(/.*\s.*/m, '&quot;\&amp;amp;&quot;')
    end

    @ruby
  end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Seems pretty straight-forward. We could probably grab it for
cases where the rubygems library is unavailable.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-26T20:27:47+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 templates
:state: new
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-26T20:27:49+01:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">12</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>As expected, Yehuda solutions works here on Ruby 1.8, 1.9 and Jruby.
Since I'm working on Rails templates, I can update it and add some tests. Sounds good?</body>
      <body-html>&lt;div&gt;&lt;p&gt;As expected, Yehuda solutions works here on Ruby 1.8, 1.9 and
Jruby.&lt;br&gt;
Since I'm working on Rails templates, I can update it and add some
tests. Sounds good?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-28T15:09:03+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-28T15:09:04+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">13</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>That sounds like a plan Jos&#233;.</body>
      <body-html>&lt;div&gt;&lt;p&gt;That sounds like a plan Jos&amp;eacute;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-29T01:10:35+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-29T01:10:36+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">14</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>How can I help?</body>
      <body-html>&lt;div&gt;&lt;p&gt;How can I help?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-29T05:27:10+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-29T05:27:15+01:00</updated-at>
      <user-id type="integer">5026</user-id>
      <version type="integer">15</version>
      <user-name>James Herdman</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@james, it will still take a couple weeks until my fork gets into master. As soon as it gets, it would be nice if you could test it. :)

@dennis, for *unix users if you have multiple interpreters it must still work because a shebang is added to script files. Although rake might still show the wrong behavior.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@james, it will still take a couple weeks until my fork gets
into master. As soon as it gets, it would be nice if you could test
it. :)&lt;/p&gt;
&lt;p&gt;@dennis, for *unix users if you have multiple interpreters it
must still work because a shebang is added to script files.
Although rake might still show the wrong behavior.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-29T08:36:35+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-06-29T08:36:37+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">16</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Can you update the patch to use the same thing that Rubygems uses? I wouldn't use Gem.ruby because we want this code to work in the absence of Rubygems as well.

@@@ ruby
  def ruby
    @ruby ||= begin
      ruby = File.join(ConfigMap[:bindir],
                        ConfigMap[:ruby_install_name])
      ruby &lt;&lt; ConfigMap[:EXEEXT]

      # escape string in case path to ruby executable contain spaces.
      ruby.sub!(/.*\s.*/m, '&quot;\&amp;&quot;')
      ruby
    end
   end
  end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can you update the patch to use the same thing that Rubygems
uses? I wouldn't use Gem.ruby because we want this code to work in
the absence of Rubygems as well.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;  def ruby
    @ruby ||= begin
      ruby = File.join(ConfigMap[:bindir],
                        ConfigMap[:ruby_install_name])
      ruby &amp;lt;&amp;lt; ConfigMap[:EXEEXT]

      # escape string in case path to ruby executable contain spaces.
      ruby.sub!(/.*\s.*/m, '&quot;\&amp;amp;&quot;')
      ruby
    end
   end
  end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-02T19:45:50+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-07-02T19:46:05+01:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">17</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@wycats, @nkoz and @james. Just solved this on my Rails fork, the solution includes:

1) The ruby method that Yehuda showed to invoke ruby scripts with the correct interpreter;

2) I've talked with Charles Nutter and he said that the only problem with application generator and templates on jruby is that they had to specify by hand that jruby should be used: rails -r &quot;/usr/bin/env jruby&quot;, even if &quot;jruby rails&quot; was being invoked. This is likely to affect Ruby 1.9 as well and was fixed.

3) According to Charles Nutter, invoking rake with jruby is not a problem as long as it's on PATH. So I assumed that the problem is only on windows, where the &quot;.bat&quot; extensions was not added properly. Now the same extension used to invoke ruby is added before invoking rake. So if you are invoking ruby.bat, the template will invoke rake.bat. The same for capify.

@james, if everything goes according to planned, it should be merged next week.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@wycats, @nkoz and @james. Just solved this on my Rails fork,
the solution includes:&lt;/p&gt;
&lt;p&gt;1) The ruby method that Yehuda showed to invoke ruby scripts
with the correct interpreter;&lt;/p&gt;
&lt;p&gt;2) I've talked with Charles Nutter and he said that the only
problem with application generator and templates on jruby is that
they had to specify by hand that jruby should be used: rails -r
&quot;/usr/bin/env jruby&quot;, even if &quot;jruby rails&quot; was being invoked. This
is likely to affect Ruby 1.9 as well and was fixed.&lt;/p&gt;
&lt;p&gt;3) According to Charles Nutter, invoking rake with jruby is not
a problem as long as it's on PATH. So I assumed that the problem is
only on windows, where the &quot;.bat&quot; extensions was not added
properly. Now the same extension used to invoke ruby is added
before invoking rake. So if you are invoking ruby.bat, the template
will invoke rake.bat. The same for capify.&lt;/p&gt;
&lt;p&gt;@james, if everything goes according to planned, it should be
merged next week.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-04T16:46:04+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-07-04T16:46:07+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">18</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [35925a8995e4b3522e4a4e4e52a3a18c9c1cee52]) Ensure that rails templates methods are invoked with the proper extensions [#2531 status:resolved]
http://github.com/rails/rails/commit/35925a8995e4b3522e4a4e4e52a3a18c9c1cee52</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/35925a8995e4b3522e4a4e4e52a3a18c9c1cee52&quot;
title=
&quot;Changeset [35925a8995e4b3522e4a4e4e52a3a18c9c1cee52]&quot;&gt;[35925a8995e4b3522e4a4e4e52a3a18c9c1cee52]&lt;/a&gt;)
Ensure that rails templates methods are invoked with the proper
extensions [&lt;a href=&quot;/projects/8994/tickets/2531&quot; title=
&quot;Ticket #2531&quot;&gt;#2531&lt;/a&gt; status:resolved] &lt;a href=
&quot;http://github.com/rails/rails/commit/35925a8995e4b3522e4a4e4e52a3a18c9c1cee52&quot;&gt;
http://github.com/rails/rails/commit/35925a8995e4b3522e4a4e4e52a3a1...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-30T00:23:33+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2009-07-30T00:23:35+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">19</version>
      <user-name>Repository</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:31+01:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">8</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.3.2 3.0 templates</tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2010-10-15T23:01:31+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">20</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-08T08:48:34+00:00</created-at>
      <creator-id type="integer">5026</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 3.0 templates
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">2531</number>
      <permalink>fix-rails-templates-for-windows</permalink>
      <priority type="integer">8</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag nil="true"></tag>
      <title>Fix Rails Templates for Windows</title>
      <updated-at type="datetime">2010-11-08T08:48:40+00:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">22</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>James Herdman</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2531</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>8e2abeba96ec8338555abfa66ca47b6388953b2d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-21T02:46:58+01:00</created-at>
      <filename>0001-Fix-template-commands-for-Windows.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">113351</id>
      <size type="integer">2786</size>
      <uploader-id type="integer">5026</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/113351/0001-Fix-template-commands-for-Windows.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>27e9d960093fcf83fd58bfba0b2bf0582ae737ae</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-06-02T14:31:15+01:00</created-at>
      <filename>ruby_executable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">128661</id>
      <size type="integer">957</size>
      <uploader-id type="integer">43907</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/128661/ruby_executable.patch</url>
    </attachment>
  </attachments>
</ticket>
