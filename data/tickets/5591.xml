<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-09-16T11:32:35+01:00</created-at>
  <creator-id type="integer">22073</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5591</number>
  <permalink>cant-boot-rails-30-app-on-jrubywindowstomcat-due-to-encodingexception</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>activesupport jruby rails3.0.0 windows</tag>
  <title>Can't boot Rails 3.0 app on JRuby/Windows/Tomcat due to EncodingException</title>
  <updated-at type="datetime">2010-09-16T11:32:35+01:00</updated-at>
  <user-id type="integer">89656</user-id>
  <version type="integer">4</version>
  <user-name>Rohit Arondekar</user-name>
  <creator-name>Robert Glaser</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5591</url>
  <priority-name>Low</priority-name>
  <original-body>When I try to boot a Rails 3.0 app on a Windows Server 2008 with JRuby 1.5.2 and Tomcat, I get the following exception within ActiveSupport:

@@@
Sep 9, 2010 3:39:24 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Application Error
org.jruby.rack.RackInitializationException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216:in `require_dependency'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `each'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `each'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41
	 ... 19 levels...
	from classpath:/vendor/rack-1.2.1/rack/builder.rb:46:in `initialize'
	from &lt;script&gt;:2:in `new'
	from &lt;script&gt;:2

	at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:184)
	at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:59)
	at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:94)
	at org.jruby.rack.servlet.DefaultServletDispatcher.process(DefaultServletDispatcher.java:36)
	at org.jruby.rack.RackFilter.doFilter(RackFilter.java:59)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
	at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
	at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
	at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
	at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
	at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
	at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
	at java.lang.Thread.run(Unknown Source)
Caused by: org.jruby.exceptions.RaiseException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
	at Kernel.raise(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:304)
	at ActiveSupport::Dependencies.depend_on(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216)
	at ActiveSupport::Dependencies::Loadable.require_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108)
	at Rails::Application.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41)
	at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Rails::Initializable::Initializer.run(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:50)
	at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
	at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:134)
	at Rails::Application.initialize!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:77)
	at #&lt;Class:01xc5752e&gt;.method_missing(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:5)
	at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:239)
	at Kernel.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
	at ActiveSupport::Dependencies::Loadable.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
	at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591)
	at ActiveSupport::Dependencies.new_constants_in(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
	at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
	at ActiveSupport::Dependencies::Loadable.require(classpath:/jruby/rack/rails.rb:161)
	at JRuby::Rack::RailsBooter::Rails3Environment.load_environment(classpath:/jruby/rack/rails.rb:165)
	at JRuby::Rack::RailsBooter::Rails3Environment.to_app(classpath:/jruby/rack/rails.rb:186)
	at #&lt;Class:01x893021&gt;.new(&lt;script&gt;:2)
	at (unknown).(unknown)(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Rack::Builder.initialize(&lt;script&gt;:2)
	at (unknown).new(&lt;script&gt;:2)
	at (unknown).(unknown)(:1)
@@@

I attached the complete stack trace. It seems that JRuby wraps a try/catch around the boot process and throws a RackInitializationException on any exception. I looked into dependencies.rb, but found no obvious bad encodings.</original-body>
  <latest-body>When I try to boot a Rails 3.0 app on a Windows Server 2008 with JRuby 1.5.2 and Tomcat, I get the following exception within ActiveSupport:

@@@
Sep 9, 2010 3:39:24 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Application Error
org.jruby.rack.RackInitializationException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216:in `require_dependency'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `each'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `each'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41
	 ... 19 levels...
	from classpath:/vendor/rack-1.2.1/rack/builder.rb:46:in `initialize'
	from &lt;script&gt;:2:in `new'
	from &lt;script&gt;:2

	at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:184)
	at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:59)
	at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:94)
	at org.jruby.rack.servlet.DefaultServletDispatcher.process(DefaultServletDispatcher.java:36)
	at org.jruby.rack.RackFilter.doFilter(RackFilter.java:59)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
	at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
	at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
	at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
	at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
	at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
	at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
	at java.lang.Thread.run(Unknown Source)
Caused by: org.jruby.exceptions.RaiseException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
	at Kernel.raise(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:304)
	at ActiveSupport::Dependencies.depend_on(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216)
	at ActiveSupport::Dependencies::Loadable.require_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108)
	at Rails::Application.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41)
	at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Rails::Initializable::Initializer.run(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:50)
	at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
	at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:134)
	at Rails::Application.initialize!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:77)
	at #&lt;Class:01xc5752e&gt;.method_missing(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:5)
	at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:239)
	at Kernel.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
	at ActiveSupport::Dependencies::Loadable.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
	at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591)
	at ActiveSupport::Dependencies.new_constants_in(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
	at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
	at ActiveSupport::Dependencies::Loadable.require(classpath:/jruby/rack/rails.rb:161)
	at JRuby::Rack::RailsBooter::Rails3Environment.load_environment(classpath:/jruby/rack/rails.rb:165)
	at JRuby::Rack::RailsBooter::Rails3Environment.to_app(classpath:/jruby/rack/rails.rb:186)
	at #&lt;Class:01x893021&gt;.new(&lt;script&gt;:2)
	at (unknown).(unknown)(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Rack::Builder.initialize(&lt;script&gt;:2)
	at (unknown).new(&lt;script&gt;:2)
	at (unknown).(unknown)(:1)
@@@

I attached the complete stack trace. It seems that JRuby wraps a try/catch around the boot process and throws a RackInitializationException on any exception. I looked into dependencies.rb, but found no obvious bad encodings.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When I try to boot a Rails 3.0 app on a Windows Server 2008 with
JRuby 1.5.2 and Tomcat, I get the following exception within
ActiveSupport:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Sep 9, 2010 3:39:24 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Application Error
org.jruby.rack.RackInitializationException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216:in `require_dependency'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `each'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `each'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41
     ... 19 levels...
    from classpath:/vendor/rack-1.2.1/rack/builder.rb:46:in `initialize'
    from &amp;lt;script&amp;gt;:2:in `new'
    from &amp;lt;script&amp;gt;:2

    at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:184)
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:59)
    at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:94)
    at org.jruby.rack.servlet.DefaultServletDispatcher.process(DefaultServletDispatcher.java:36)
    at org.jruby.rack.RackFilter.doFilter(RackFilter.java:59)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.jruby.exceptions.RaiseException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
    at Kernel.raise(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:304)
    at ActiveSupport::Dependencies.depend_on(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216)
    at ActiveSupport::Dependencies::Loadable.require_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138)
    at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
    at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
    at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
    at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
    at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108)
    at Rails::Application.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41)
    at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
    at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
    at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
    at Rails::Initializable::Initializer.run(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:50)
    at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
    at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
    at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:134)
    at Rails::Application.initialize!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:77)
    at #&amp;lt;Class:01xc5752e&amp;gt;.method_missing(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:5)
    at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:239)
    at Kernel.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
    at ActiveSupport::Dependencies::Loadable.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
    at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591)
    at ActiveSupport::Dependencies.new_constants_in(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
    at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
    at ActiveSupport::Dependencies::Loadable.require(classpath:/jruby/rack/rails.rb:161)
    at JRuby::Rack::RailsBooter::Rails3Environment.load_environment(classpath:/jruby/rack/rails.rb:165)
    at JRuby::Rack::RailsBooter::Rails3Environment.to_app(classpath:/jruby/rack/rails.rb:186)
    at #&amp;lt;Class:01x893021&amp;gt;.new(&amp;lt;script&amp;gt;:2)
    at (unknown).(unknown)(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
    at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
    at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
    at Rack::Builder.initialize(&amp;lt;script&amp;gt;:2)
    at (unknown).new(&amp;lt;script&amp;gt;:2)
    at (unknown).(unknown)(:1)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I attached the complete stack trace. It seems that JRuby wraps a
try/catch around the boot process and throws a
RackInitializationException on any exception. I looked into
dependencies.rb, but found no obvious bad encodings.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When I try to boot a Rails 3.0 app on a Windows Server 2008 with JRuby 1.5.2 and Tomcat, I get the following exception within ActiveSupport:

@@@
Sep 9, 2010 3:39:24 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Application Error
org.jruby.rack.RackInitializationException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216:in `require_dependency'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `each'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `each'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108:in `eager_load!'
	from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41
	 ... 19 levels...
	from classpath:/vendor/rack-1.2.1/rack/builder.rb:46:in `initialize'
	from &lt;script&gt;:2:in `new'
	from &lt;script&gt;:2

	at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:184)
	at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:59)
	at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:94)
	at org.jruby.rack.servlet.DefaultServletDispatcher.process(DefaultServletDispatcher.java:36)
	at org.jruby.rack.RackFilter.doFilter(RackFilter.java:59)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
	at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
	at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
	at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
	at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
	at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
	at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
	at java.lang.Thread.run(Unknown Source)
Caused by: org.jruby.exceptions.RaiseException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
	at Kernel.raise(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:304)
	at ActiveSupport::Dependencies.depend_on(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216)
	at ActiveSupport::Dependencies::Loadable.require_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
	at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108)
	at Rails::Application.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41)
	at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
	at Rails::Initializable::Initializer.run(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:50)
	at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
	at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
	at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:134)
	at Rails::Application.initialize!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:77)
	at #&lt;Class:01xc5752e&gt;.method_missing(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:5)
	at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:239)
	at Kernel.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
	at ActiveSupport::Dependencies::Loadable.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
	at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591)
	at ActiveSupport::Dependencies.new_constants_in(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
	at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
	at ActiveSupport::Dependencies::Loadable.require(classpath:/jruby/rack/rails.rb:161)
	at JRuby::Rack::RailsBooter::Rails3Environment.load_environment(classpath:/jruby/rack/rails.rb:165)
	at JRuby::Rack::RailsBooter::Rails3Environment.to_app(classpath:/jruby/rack/rails.rb:186)
	at #&lt;Class:01x893021&gt;.new(&lt;script&gt;:2)
	at (unknown).(unknown)(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
	at Rack::Builder.initialize(&lt;script&gt;:2)
	at (unknown).new(&lt;script&gt;:2)
	at (unknown).(unknown)(:1)
@@@

I attached the complete stack trace. It seems that JRuby wraps a try/catch around the boot process and throws a RackInitializationException on any exception. I looked into dependencies.rb, but found no obvious bad encodings.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When I try to boot a Rails 3.0 app on a Windows Server 2008 with
JRuby 1.5.2 and Tomcat, I get the following exception within
ActiveSupport:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Sep 9, 2010 3:39:24 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Application Error
org.jruby.rack.RackInitializationException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216:in `require_dependency'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `each'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `each'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108:in `eager_load!'
    from C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41
     ... 19 levels...
    from classpath:/vendor/rack-1.2.1/rack/builder.rb:46:in `initialize'
    from &amp;lt;script&amp;gt;:2:in `new'
    from &amp;lt;script&amp;gt;:2

    at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:184)
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:59)
    at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:94)
    at org.jruby.rack.servlet.DefaultServletDispatcher.process(DefaultServletDispatcher.java:36)
    at org.jruby.rack.RackFilter.doFilter(RackFilter.java:59)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.jruby.exceptions.RaiseException: No such file to load -- org.jcodings.exception.EncodingException: invalid code point value
    at Kernel.raise(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:304)
    at ActiveSupport::Dependencies.depend_on(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216)
    at ActiveSupport::Dependencies::Loadable.require_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:138)
    at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
    at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:137)
    at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
    at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/engine.rb:135)
    at Rails::Engine.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:108)
    at Rails::Application.eager_load!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application/finisher.rb:41)
    at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
    at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
    at Kernel.instance_exec(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:25)
    at Rails::Initializable::Initializer.run(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:50)
    at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
    at Array.each(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/initializable.rb:49)
    at Rails::Initializable.run_initializers(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:134)
    at Rails::Application.initialize!(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/railties-3.0.0/lib/rails/application.rb:77)
    at #&amp;lt;Class:01xc5752e&amp;gt;.method_missing(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:5)
    at (unknown).(unknown)(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/config/environment.rb:239)
    at Kernel.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
    at ActiveSupport::Dependencies::Loadable.require(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
    at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591)
    at ActiveSupport::Dependencies.new_constants_in(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225)
    at ActiveSupport::Dependencies::Loadable.load_dependency(C:/Program Files/Apache Software Foundation/Tomcat 6.0/temp/0-ROOT/WEB-INF/gems/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239)
    at ActiveSupport::Dependencies::Loadable.require(classpath:/jruby/rack/rails.rb:161)
    at JRuby::Rack::RailsBooter::Rails3Environment.load_environment(classpath:/jruby/rack/rails.rb:165)
    at JRuby::Rack::RailsBooter::Rails3Environment.to_app(classpath:/jruby/rack/rails.rb:186)
    at #&amp;lt;Class:01x893021&amp;gt;.new(&amp;lt;script&amp;gt;:2)
    at (unknown).(unknown)(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
    at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
    at Kernel.instance_eval(classpath:/vendor/rack-1.2.1/rack/builder.rb:46)
    at Rack::Builder.initialize(&amp;lt;script&amp;gt;:2)
    at (unknown).new(&amp;lt;script&amp;gt;:2)
    at (unknown).(unknown)(:1)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I attached the complete stack trace. It seems that JRuby wraps a
try/catch around the boot process and throws a
RackInitializationException on any exception. I looked into
dependencies.rb, but found no obvious bad encodings.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-09T16:40:06+01:00</created-at>
      <creator-id type="integer">22073</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5591</number>
      <permalink>cant-boot-rails-30-app-on-jrubywindowstomcat-due-to-encodingexception</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport jruby rails3.0.0 windows</tag>
      <title>Can't boot Rails 3.0 app on JRuby/Windows/Tomcat due to EncodingException</title>
      <updated-at type="datetime">2010-09-09T16:40:07+01:00</updated-at>
      <user-id type="integer">22073</user-id>
      <version type="integer">1</version>
      <user-name>Robert Glaser</user-name>
      <creator-name>Robert Glaser</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5591</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-09T17:56:38+01:00</created-at>
      <creator-id type="integer">22073</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5591</number>
      <permalink>cant-boot-rails-30-app-on-jrubywindowstomcat-due-to-encodingexception</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport jruby rails3.0.0 windows</tag>
      <title>Can't boot Rails 3.0 app on JRuby/Windows/Tomcat due to EncodingException</title>
      <updated-at type="datetime">2010-09-09T17:56:41+01:00</updated-at>
      <user-id type="integer">22073</user-id>
      <version type="integer">2</version>
      <user-name>Robert Glaser</user-name>
      <creator-name>Robert Glaser</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5591</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It seems that Warbler introduced the problem with new &quot;jruby-jars&quot; gem versions. Version 1.4.0 of the gem works, every version from 1.5.0 has this EncodingException issue. Maybe it's a gem related bug, in this case please close this ticket.</body>
      <body-html>&lt;div&gt;&lt;p&gt;It seems that Warbler introduced the problem with new
&quot;jruby-jars&quot; gem versions. Version 1.4.0 of the gem works, every
version from 1.5.0 has this EncodingException issue. Maybe it's a
gem related bug, in this case please close this ticket.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-09-09T17:58:32+01:00</created-at>
      <creator-id type="integer">22073</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5591</number>
      <permalink>cant-boot-rails-30-app-on-jrubywindowstomcat-due-to-encodingexception</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport jruby rails3.0.0 windows</tag>
      <title>Can't boot Rails 3.0 app on JRuby/Windows/Tomcat due to EncodingException</title>
      <updated-at type="datetime">2010-09-09T17:58:33+01:00</updated-at>
      <user-id type="integer">22073</user-id>
      <version type="integer">3</version>
      <user-name>Robert Glaser</user-name>
      <creator-name>Robert Glaser</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5591</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-14T04:43:26+01:00</created-at>
      <creator-id type="integer">22073</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5591</number>
      <permalink>cant-boot-rails-30-app-on-jrubywindowstomcat-due-to-encodingexception</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>activesupport jruby rails3.0.0 windows</tag>
      <title>Can't boot Rails 3.0 app on JRuby/Windows/Tomcat due to EncodingException</title>
      <updated-at type="datetime">2010-09-14T04:43:27+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">4</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Robert Glaser</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5591</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
