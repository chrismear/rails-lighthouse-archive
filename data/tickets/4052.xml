<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-02-25T11:09:59+00:00</created-at>
  <creator-id type="integer">9958</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4052</number>
  <permalink>activesupport-breaks-literal-in-non-hash-string-interpolation</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activesupport active_support interpolation patch ruby1.9 &quot;string interpolation&quot;</tag>
  <title>ActiveSupport breaks literal &quot;%%&quot; in non-hash String interpolation</title>
  <updated-at type="datetime">2010-10-11T01:03:08+01:00</updated-at>
  <user-id type="integer">14998</user-id>
  <version type="integer">6</version>
  <user-name>Ryan Bigg</user-name>
  <creator-name>Henrik Nyh</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4052</url>
  <priority-name>Low</priority-name>
  <original-body>This works in regular Ruby 1.8 IRB:

@@@ ruby
&gt;&gt; &quot;%d%%&quot; % 123
=&gt; &quot;123%&quot;
@@@

But with ActiveSupport:

@@@ ruby
&gt;&gt; &quot;%d%%&quot; % 123
ArgumentError: one hash required
@@@

It seems ActiveSupport attempts to emulate Ruby 1.9 string interpolation, but in doing so, it effectively breaks &quot;%%&quot; when you're not interpolating with a hash. 

Will write patch shortly.</original-body>
  <latest-body>This works in regular Ruby 1.8 IRB:

@@@ ruby
&gt;&gt; &quot;%d%%&quot; % 123
=&gt; &quot;123%&quot;
@@@

But with ActiveSupport:

@@@ ruby
&gt;&gt; &quot;%d%%&quot; % 123
ArgumentError: one hash required
@@@

It seems ActiveSupport attempts to emulate Ruby 1.9 string interpolation, but in doing so, it effectively breaks &quot;%%&quot; when you're not interpolating with a hash. 

Will write patch shortly.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;This works in regular Ruby 1.8 IRB:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; &quot;%d%%&quot; % 123
=&amp;gt; &quot;123%&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;But with ActiveSupport:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; &quot;%d%%&quot; % 123
ArgumentError: one hash required&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;It seems ActiveSupport attempts to emulate Ruby 1.9 string
interpolation, but in doing so, it effectively breaks &quot;%%&quot; when
you're not interpolating with a hash.&lt;/p&gt;
&lt;p&gt;Will write patch shortly.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This works in regular Ruby 1.8 IRB:

@@@ ruby
&gt;&gt; &quot;%d%%&quot; % 123
=&gt; &quot;123%&quot;
@@@

But with ActiveSupport:

@@@ ruby
&gt;&gt; &quot;%d%%&quot; % 123
ArgumentError: one hash required
@@@

It seems ActiveSupport attempts to emulate Ruby 1.9 string interpolation, but in doing so, it effectively breaks &quot;%%&quot; when you're not interpolating with a hash. 

Will write patch shortly.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This works in regular Ruby 1.8 IRB:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; &quot;%d%%&quot; % 123
=&amp;gt; &quot;123%&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;But with ActiveSupport:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; &quot;%d%%&quot; % 123
ArgumentError: one hash required&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;It seems ActiveSupport attempts to emulate Ruby 1.9 string
interpolation, but in doing so, it effectively breaks &quot;%%&quot; when
you're not interpolating with a hash.&lt;/p&gt;
&lt;p&gt;Will write patch shortly.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-25T11:09:59+00:00</created-at>
      <creator-id type="integer">9958</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4052</number>
      <permalink>activesupport-breaks-literal-in-non-hash-string-interpolation</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport active_support interpolation ruby1.9 &quot;string interpolation&quot;</tag>
      <title>ActiveSupport breaks literal &quot;%%&quot; in non-hash String interpolation</title>
      <updated-at type="datetime">2010-02-25T11:10:37+00:00</updated-at>
      <user-id type="integer">9958</user-id>
      <version type="integer">1</version>
      <user-name>Henrik Nyh</user-name>
      <creator-name>Henrik Nyh</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4052</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-25T11:10:18+00:00</created-at>
      <creator-id type="integer">9958</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4052</number>
      <permalink>activesupport-breaks-literal-in-non-hash-string-interpolation</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport active_support interpolation ruby1.9 &quot;string interpolation&quot;</tag>
      <title>ActiveSupport breaks literal &quot;%%&quot; in non-hash String interpolation</title>
      <updated-at type="datetime">2010-02-25T11:10:20+00:00</updated-at>
      <user-id type="integer">9958</user-id>
      <version type="integer">2</version>
      <user-name>Henrik Nyh</user-name>
      <creator-name>Henrik Nyh</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4052</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When I run the tests, it seems the i18n gem is used for the actual interpolation. Apparently this issue has been fixed in the i18n gem on GitHub (http://github.com/svenfuchs/i18n/commit/bd740600683ca2aae78e4abf898f011627b623e0). That version of the gem does not appear to be published.

It's still not fixed in ActiveSupport proper, and since the i18n gem is used for interpolation in the ActiveSupport tests, at least the way I ran them, I'm not sure what the best course of action is. Should this functionality exist in both places? Should the tests be modified to actually test the ActiveSupport version? Did I run the tests wrong?

Either way, I made a patch, then ran the tests with that part of the i18n gem commented out, so that when this code actually runs, it does work.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When I run the tests, it seems the i18n gem is used for the
actual interpolation. Apparently this issue has been fixed in the
i18n gem on GitHub (&lt;a href=
&quot;http://github.com/svenfuchs/i18n/commit/bd740600683ca2aae78e4abf898f011627b623e0)&quot;&gt;http://github.com/svenfuchs/i18n/commit/bd740600683ca2aae78e4abf898...&lt;/a&gt;.
That version of the gem does not appear to be published.&lt;/p&gt;
&lt;p&gt;It's still not fixed in ActiveSupport proper, and since the i18n
gem is used for interpolation in the ActiveSupport tests, at least
the way I ran them, I'm not sure what the best course of action is.
Should this functionality exist in both places? Should the tests be
modified to actually test the ActiveSupport version? Did I run the
tests wrong?&lt;/p&gt;
&lt;p&gt;Either way, I made a patch, then ran the tests with that part of
the i18n gem commented out, so that when this code actually runs,
it does work.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-25T11:47:15+00:00</created-at>
      <creator-id type="integer">9958</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activesupport active_support interpolation ruby1.9 &quot;string interpolation&quot;
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4052</number>
      <permalink>activesupport-breaks-literal-in-non-hash-string-interpolation</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport active_support interpolation patch ruby1.9 &quot;string interpolation&quot;</tag>
      <title>ActiveSupport breaks literal &quot;%%&quot; in non-hash String interpolation</title>
      <updated-at type="datetime">2010-02-25T11:47:19+00:00</updated-at>
      <user-id type="integer">9958</user-id>
      <version type="integer">3</version>
      <user-name>Henrik Nyh</user-name>
      <creator-name>Henrik Nyh</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4052</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Monkeypatch initializer until this is applied: http://gist.github.com/314504</body>
      <body-html>&lt;div&gt;&lt;p&gt;Monkeypatch initializer until this is applied: &lt;a href=
&quot;http://gist.github.com/314504&quot;&gt;http://gist.github.com/314504&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-02-25T12:28:55+00:00</created-at>
      <creator-id type="integer">9958</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4052</number>
      <permalink>activesupport-breaks-literal-in-non-hash-string-interpolation</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport active_support interpolation patch ruby1.9 &quot;string interpolation&quot;</tag>
      <title>ActiveSupport breaks literal &quot;%%&quot; in non-hash String interpolation</title>
      <updated-at type="datetime">2010-02-25T12:28:56+00:00</updated-at>
      <user-id type="integer">9958</user-id>
      <version type="integer">4</version>
      <user-name>Henrik Nyh</user-name>
      <creator-name>Henrik Nyh</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4052</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This appears to have been remedied in Rails 2.3.8.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This appears to have been remedied in Rails 2.3.8.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-26T16:45:39+01:00</created-at>
      <creator-id type="integer">9958</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4052</number>
      <permalink>activesupport-breaks-literal-in-non-hash-string-interpolation</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport active_support interpolation patch ruby1.9 &quot;string interpolation&quot;</tag>
      <title>ActiveSupport breaks literal &quot;%%&quot; in non-hash String interpolation</title>
      <updated-at type="datetime">2010-05-26T16:45:42+01:00</updated-at>
      <user-id type="integer">16948</user-id>
      <version type="integer">5</version>
      <user-name>tadman</user-name>
      <creator-name>Henrik Nyh</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4052</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-11T01:03:04+01:00</created-at>
      <creator-id type="integer">9958</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4052</number>
      <permalink>activesupport-breaks-literal-in-non-hash-string-interpolation</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport active_support interpolation patch ruby1.9 &quot;string interpolation&quot;</tag>
      <title>ActiveSupport breaks literal &quot;%%&quot; in non-hash String interpolation</title>
      <updated-at type="datetime">2010-10-11T01:03:08+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">6</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Henrik Nyh</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4052</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>0f1601e5f40efe5a4b41e864b64eebd27a602faa</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-02-25T11:47:16+00:00</created-at>
      <filename>interpolation.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">423877</id>
      <size type="integer">2445</size>
      <uploader-id type="integer">9958</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/423877/interpolation.patch</url>
    </attachment>
  </attachments>
</ticket>
