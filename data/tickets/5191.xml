<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-26T04:42:33+01:00</created-at>
  <creator-id type="integer">99411</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5191</number>
  <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>patch &quot;rails3 routes&quot; regression router</tag>
  <title>resource/resources inside namespace generates wrong routes</title>
  <updated-at type="datetime">2011-02-02T16:43:23+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">11</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>gucki</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
  <priority-name>Low</priority-name>
  <original-body>Using latest rails3 edge and the following routes.rb:

@@@
Rails.application.routes.draw do |map|
  namespace(:my) do
    resource :text
  end

  map.namespace(:a) do |a|
    a.resource :text
  end
end
@@@

Output:
             POST   /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;create&quot;}
 new_my_text GET    /my/text/new(.:format)  {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;new&quot;}
             GET    /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;update&quot;}
     my_text DELETE /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;destroy&quot;}
edit_my_text GET    /my/text/edit(.:format) {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;edit&quot;}

  new_a_text GET    /a/text/new(.:format)   {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;new&quot;}
 edit_a_text GET    /a/text/edit(.:format)  {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;edit&quot;}
      a_text GET    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;update&quot;}
             DELETE /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;destroy&quot;}
             POST   /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;create&quot;}

As you can see the &quot;my_text&quot; path is on the DELETE method, while the &quot;a_text&quot; path is on the GET method (which is correct!).</original-body>
  <latest-body>Using latest rails3 edge and the following routes.rb:

@@@
Rails.application.routes.draw do |map|
  namespace(:my) do
    resource :text
  end

  map.namespace(:a) do |a|
    a.resource :text
  end
end
@@@

Output:
             POST   /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;create&quot;}
 new_my_text GET    /my/text/new(.:format)  {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;new&quot;}
             GET    /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;update&quot;}
     my_text DELETE /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;destroy&quot;}
edit_my_text GET    /my/text/edit(.:format) {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;edit&quot;}

  new_a_text GET    /a/text/new(.:format)   {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;new&quot;}
 edit_a_text GET    /a/text/edit(.:format)  {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;edit&quot;}
      a_text GET    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;update&quot;}
             DELETE /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;destroy&quot;}
             POST   /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;create&quot;}

As you can see the &quot;my_text&quot; path is on the DELETE method, while the &quot;a_text&quot; path is on the GET method (which is correct!).</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Using latest rails3 edge and the following routes.rb:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Rails.application.routes.draw do |map|
  namespace(:my) do
    resource :text
  end

  map.namespace(:a) do |a|
    a.resource :text
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Output:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;         POST   /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;create&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;new_my_text GET /my/text/new(.:format)
{:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;new&quot;}&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;         GET    /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;show&quot;}
         PUT    /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;update&quot;}
 my_text DELETE /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;destroy&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;edit_my_text GET /my/text/edit(.:format)
{:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;edit&quot;}&lt;/p&gt;
&lt;p&gt;new_a_text GET /a/text/new(.:format) {:controller=&amp;gt;&quot;a/texts&quot;,
:action=&amp;gt;&quot;new&quot;} edit_a_text GET /a/text/edit(.:format)
{:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;edit&quot;}&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  a_text GET    /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;show&quot;}
         PUT    /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;update&quot;}
         DELETE /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;destroy&quot;}
         POST   /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;create&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;As you can see the &quot;my_text&quot; path is on the DELETE method, while
the &quot;a_text&quot; path is on the GET method (which is correct!).&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Using latest rails3 edge and the following routes.rb:

@@@
Rails.application.routes.draw do |map|
  namespace(:my) do
    resource :text
  end

  map.namespace(:a) do |a|
    a.resource :text
  end
end
@@@

Output:
             POST   /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;create&quot;}
 new_my_text GET    /my/text/new(.:format)  {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;new&quot;}
             GET    /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;update&quot;}
     my_text DELETE /my/text(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;destroy&quot;}
edit_my_text GET    /my/text/edit(.:format) {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;edit&quot;}

  new_a_text GET    /a/text/new(.:format)   {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;new&quot;}
 edit_a_text GET    /a/text/edit(.:format)  {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;edit&quot;}
      a_text GET    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;update&quot;}
             DELETE /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;destroy&quot;}
             POST   /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;create&quot;}

As you can see the &quot;my_text&quot; path is on the DELETE method, while the &quot;a_text&quot; path is on the GET method (which is correct!).</body>
      <body-html>&lt;div&gt;&lt;p&gt;Using latest rails3 edge and the following routes.rb:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Rails.application.routes.draw do |map|
  namespace(:my) do
    resource :text
  end

  map.namespace(:a) do |a|
    a.resource :text
  end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Output:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;         POST   /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;create&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;new_my_text GET /my/text/new(.:format)
{:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;new&quot;}&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;         GET    /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;show&quot;}
         PUT    /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;update&quot;}
 my_text DELETE /my/text(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;destroy&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;edit_my_text GET /my/text/edit(.:format)
{:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;edit&quot;}&lt;/p&gt;
&lt;p&gt;new_a_text GET /a/text/new(.:format) {:controller=&amp;gt;&quot;a/texts&quot;,
:action=&amp;gt;&quot;new&quot;} edit_a_text GET /a/text/edit(.:format)
{:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;edit&quot;}&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  a_text GET    /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;show&quot;}
         PUT    /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;update&quot;}
         DELETE /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;destroy&quot;}
         POST   /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;create&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;As you can see the &quot;my_text&quot; path is on the DELETE method, while
the &quot;a_text&quot; path is on the GET method (which is correct!).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-25T12:34:05+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-25T12:34:07+01:00</updated-at>
      <user-id type="integer">99411</user-id>
      <version type="integer">1</version>
      <user-name>gucki</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Nicer display of thew generated routes:

&lt;pre&gt;
             GET    /my/text(.:format)      {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;my/texts&quot;}
             POST   /my/text(.:format)      {:action=&gt;&quot;create&quot;, :controller=&gt;&quot;my/texts&quot;}
             PUT    /my/text(.:format)      {:action=&gt;&quot;update&quot;, :controller=&gt;&quot;my/texts&quot;}
     my_text DELETE /my/text(.:format)      {:action=&gt;&quot;destroy&quot;, :controller=&gt;&quot;my/texts&quot;}
 new_my_text GET    /my/text/new(.:format)  {:action=&gt;&quot;new&quot;, :controller=&gt;&quot;my/texts&quot;}
edit_my_text GET    /my/text/edit(.:format) {:action=&gt;&quot;edit&quot;, :controller=&gt;&quot;my/texts&quot;}

  new_a_text GET    /a/text/new(.:format)   {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;new&quot;}
 edit_a_text GET    /a/text/edit(.:format)  {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;edit&quot;}
      a_text GET    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;update&quot;}
             DELETE /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;destroy&quot;}
             POST   /a/text(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;create&quot;}
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Nicer display of thew generated routes:&lt;/p&gt;
&lt;pre&gt;
             GET    /my/text(.:format)      {:action=&amp;gt;&quot;show&quot;, :controller=&amp;gt;&quot;my/texts&quot;}
             POST   /my/text(.:format)      {:action=&amp;gt;&quot;create&quot;, :controller=&amp;gt;&quot;my/texts&quot;}
             PUT    /my/text(.:format)      {:action=&amp;gt;&quot;update&quot;, :controller=&amp;gt;&quot;my/texts&quot;}
     my_text DELETE /my/text(.:format)      {:action=&amp;gt;&quot;destroy&quot;, :controller=&amp;gt;&quot;my/texts&quot;}
 new_my_text GET    /my/text/new(.:format)  {:action=&amp;gt;&quot;new&quot;, :controller=&amp;gt;&quot;my/texts&quot;}
edit_my_text GET    /my/text/edit(.:format) {:action=&amp;gt;&quot;edit&quot;, :controller=&amp;gt;&quot;my/texts&quot;}

  new_a_text GET    /a/text/new(.:format)   {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;new&quot;}
 edit_a_text GET    /a/text/edit(.:format)  {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;edit&quot;}
      a_text GET    /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;show&quot;}
             PUT    /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;update&quot;}
             DELETE /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;destroy&quot;}
             POST   /a/text(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;create&quot;}
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-25T12:36:23+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: regression router
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-25T12:36:25+01:00</updated-at>
      <user-id type="integer">99411</user-id>
      <version type="integer">2</version>
      <user-name>gucki</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>And just for completeness, the same bug is present with resourceS inside namespace:

&lt;pre&gt;
             GET    /my/texts(.:format)          {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;index&quot;}
    my_texts POST   /my/texts(.:format)          {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;create&quot;}
 new_my_text GET    /my/texts/new(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;new&quot;}
             GET    /my/texts/:id(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /my/texts/:id(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;update&quot;}
     my_text DELETE /my/texts/:id(.:format)      {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;destroy&quot;}
edit_my_text GET    /my/texts/:id/edit(.:format) {:controller=&gt;&quot;my/texts&quot;, :action=&gt;&quot;edit&quot;}

     a_texts GET    /a/texts(.:format)           {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;index&quot;}
             POST   /a/texts(.:format)           {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;create&quot;}
  new_a_text GET    /a/texts/new(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;new&quot;}
 edit_a_text GET    /a/texts/:id/edit(.:format)  {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;edit&quot;}
      a_text GET    /a/texts/:id(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;show&quot;}
             PUT    /a/texts/:id(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;update&quot;}
             DELETE /a/texts/:id(.:format)       {:controller=&gt;&quot;a/texts&quot;, :action=&gt;&quot;destroy&quot;}
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;And just for completeness, the same bug is present with
resourceS inside namespace:&lt;/p&gt;
&lt;pre&gt;
             GET    /my/texts(.:format)          {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;index&quot;}
    my_texts POST   /my/texts(.:format)          {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;create&quot;}
 new_my_text GET    /my/texts/new(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;new&quot;}
             GET    /my/texts/:id(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;show&quot;}
             PUT    /my/texts/:id(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;update&quot;}
     my_text DELETE /my/texts/:id(.:format)      {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;destroy&quot;}
edit_my_text GET    /my/texts/:id/edit(.:format) {:controller=&amp;gt;&quot;my/texts&quot;, :action=&amp;gt;&quot;edit&quot;}

     a_texts GET    /a/texts(.:format)           {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;index&quot;}
             POST   /a/texts(.:format)           {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;create&quot;}
  new_a_text GET    /a/texts/new(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;new&quot;}
 edit_a_text GET    /a/texts/:id/edit(.:format)  {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;edit&quot;}
      a_text GET    /a/texts/:id(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;show&quot;}
             PUT    /a/texts/:id(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;update&quot;}
             DELETE /a/texts/:id(.:format)       {:controller=&amp;gt;&quot;a/texts&quot;, :action=&amp;gt;&quot;destroy&quot;}
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-25T12:39:17+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-25T12:39:18+01:00</updated-at>
      <user-id type="integer">99411</user-id>
      <version type="integer">3</version>
      <user-name>gucki</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ok, the bug seems to happen even without namespace:

&lt;pre&gt;
Test::Application.routes.draw do |map|
  resources :as
  map.resources :bs
end
&lt;/pre&gt;

&lt;pre&gt;
       GET    /as(.:format)          {:controller=&gt;&quot;as&quot;, :action=&gt;&quot;index&quot;}
    as POST   /as(.:format)          {:controller=&gt;&quot;as&quot;, :action=&gt;&quot;create&quot;}
 new_a GET    /as/new(.:format)      {:controller=&gt;&quot;as&quot;, :action=&gt;&quot;new&quot;}
       GET    /as/:id(.:format)      {:controller=&gt;&quot;as&quot;, :action=&gt;&quot;show&quot;}
       PUT    /as/:id(.:format)      {:controller=&gt;&quot;as&quot;, :action=&gt;&quot;update&quot;}
     a DELETE /as/:id(.:format)      {:controller=&gt;&quot;as&quot;, :action=&gt;&quot;destroy&quot;}
edit_a GET    /as/:id/edit(.:format) {:controller=&gt;&quot;as&quot;, :action=&gt;&quot;edit&quot;}

    bs GET    /bs(.:format)          {:controller=&gt;&quot;bs&quot;, :action=&gt;&quot;index&quot;}
       POST   /bs(.:format)          {:controller=&gt;&quot;bs&quot;, :action=&gt;&quot;create&quot;}
 new_b GET    /bs/new(.:format)      {:controller=&gt;&quot;bs&quot;, :action=&gt;&quot;new&quot;}
edit_b GET    /bs/:id/edit(.:format) {:controller=&gt;&quot;bs&quot;, :action=&gt;&quot;edit&quot;}
     b GET    /bs/:id(.:format)      {:controller=&gt;&quot;bs&quot;, :action=&gt;&quot;show&quot;}
       PUT    /bs/:id(.:format)      {:controller=&gt;&quot;bs&quot;, :action=&gt;&quot;update&quot;}
       DELETE /bs/:id(.:format)      {:controller=&gt;&quot;bs&quot;, :action=&gt;&quot;destroy&quot;}
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, the bug seems to happen even without namespace:&lt;/p&gt;
&lt;pre&gt;
Test::Application.routes.draw do |map|
  resources :as
  map.resources :bs
end
&lt;/pre&gt;
&lt;pre&gt;
       GET    /as(.:format)          {:controller=&amp;gt;&quot;as&quot;, :action=&amp;gt;&quot;index&quot;}
    as POST   /as(.:format)          {:controller=&amp;gt;&quot;as&quot;, :action=&amp;gt;&quot;create&quot;}
 new_a GET    /as/new(.:format)      {:controller=&amp;gt;&quot;as&quot;, :action=&amp;gt;&quot;new&quot;}
       GET    /as/:id(.:format)      {:controller=&amp;gt;&quot;as&quot;, :action=&amp;gt;&quot;show&quot;}
       PUT    /as/:id(.:format)      {:controller=&amp;gt;&quot;as&quot;, :action=&amp;gt;&quot;update&quot;}
     a DELETE /as/:id(.:format)      {:controller=&amp;gt;&quot;as&quot;, :action=&amp;gt;&quot;destroy&quot;}
edit_a GET    /as/:id/edit(.:format) {:controller=&amp;gt;&quot;as&quot;, :action=&amp;gt;&quot;edit&quot;}

    bs GET    /bs(.:format)          {:controller=&amp;gt;&quot;bs&quot;, :action=&amp;gt;&quot;index&quot;}
       POST   /bs(.:format)          {:controller=&amp;gt;&quot;bs&quot;, :action=&amp;gt;&quot;create&quot;}
 new_b GET    /bs/new(.:format)      {:controller=&amp;gt;&quot;bs&quot;, :action=&amp;gt;&quot;new&quot;}
edit_b GET    /bs/:id/edit(.:format) {:controller=&amp;gt;&quot;bs&quot;, :action=&amp;gt;&quot;edit&quot;}
     b GET    /bs/:id(.:format)      {:controller=&amp;gt;&quot;bs&quot;, :action=&amp;gt;&quot;show&quot;}
       PUT    /bs/:id(.:format)      {:controller=&amp;gt;&quot;bs&quot;, :action=&amp;gt;&quot;update&quot;}
       DELETE /bs/:id(.:format)      {:controller=&amp;gt;&quot;bs&quot;, :action=&amp;gt;&quot;destroy&quot;}
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-25T12:48:50+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>&quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-25T12:48:52+01:00</updated-at>
      <user-id type="integer">99411</user-id>
      <version type="integer">4</version>
      <user-name>gucki</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The attached patch seems to fix the bugs for me. Please review :-)</body>
      <body-html>&lt;div&gt;&lt;p&gt;The attached patch seems to fix the bugs for me. Please review
:-)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-25T13:24:36+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: &quot;\&quot;rails3 routes\&quot; regression router&quot;
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-25T13:24:38+01:00</updated-at>
      <user-id type="integer">99411</user-id>
      <version type="integer">5</version>
      <user-name>gucki</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Hm, lighthouse seems to have some troubles with the attached file. Here it is again.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hm, lighthouse seems to have some troubles with the attached
file. Here it is again.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-25T13:26:33+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-25T13:26:34+01:00</updated-at>
      <user-id type="integer">99411</user-id>
      <version type="integer">6</version>
      <user-name>gucki</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>As the attachment is still not loading, here as a pastie: http://pastie.org/1059180</body>
      <body-html>&lt;div&gt;&lt;p&gt;As the attachment is still not loading, here as a pastie:
&lt;a href=
&quot;http://pastie.org/1059180&quot;&gt;http://pastie.org/1059180&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-25T13:31:56+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-25T13:31:59+01:00</updated-at>
      <user-id type="integer">99411</user-id>
      <version type="integer">7</version>
      <user-name>gucki</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>nded watches &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net/designer-jewelry/chanel-jewelry.html&quot;&gt;Chanel&lt;/a&gt;&lt;/b&gt; on their wrist especially &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net/designer-jewelry/christian-dior-necklaces.html&quot;&gt;replica Christian Dior Necklaces&lt;/a&gt;&lt;/b&gt; Rolex and Breitling, but &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;cheap fashion jewelry&lt;/a&gt;&lt;/b&gt; are reluctant to spend &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net/designer-jewelry/christian-dior-jewelry.html&quot;&gt;replica Christian Dior wholeslae&lt;/a&gt;&lt;/b&gt; lots of cash that &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;jewelry designer&lt;/a&gt;&lt;/b&gt; a genuine watch costs. &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;designer jewelry online&lt;/a&gt;&lt;/b&gt; We would like you &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;cheap wholesale fashion jewelry&lt;/a&gt;&lt;/b&gt; to visit our latest &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;cheap wholesale jewelry&lt;/a&gt;&lt;/b&gt; assortment of famed replica &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net/designer-jewelry/chanel-hairpins.html&quot;&gt;cheap Chanel Hairpins&lt;/a&gt;&lt;/b&gt; watches. In this day &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net/designer-jewelry/tiffany-1837.html&quot;&gt;replica Tiffany 1837 wholesale&lt;/a&gt;&lt;/b&gt; and age, Holly Golightly wouldn't have to dream. She could simply and easily buy an i</body>
      <body-html>&lt;div&gt;&lt;p&gt;nded watches &lt;b&gt;&lt;a href=
&quot;http://www.jewelrysea.net/designer-jewelry/chanel-jewelry.html&quot;&gt;Chanel&lt;/a&gt;&lt;/b&gt;
on their wrist especially &lt;b&gt;&lt;a href=
&quot;http://www.jewelrysea.net/designer-jewelry/christian-dior-necklaces.html&quot;&gt;
replica Christian Dior Necklaces&lt;/a&gt;&lt;/b&gt; Rolex and Breitling, but
&lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;cheap fashion
jewelry&lt;/a&gt;&lt;/b&gt; are reluctant to spend &lt;b&gt;&lt;a href=
&quot;http://www.jewelrysea.net/designer-jewelry/christian-dior-jewelry.html&quot;&gt;
replica Christian Dior wholeslae&lt;/a&gt;&lt;/b&gt; lots of cash that
&lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;jewelry designer&lt;/a&gt;&lt;/b&gt; a
genuine watch costs. &lt;b&gt;&lt;a href=
&quot;http://www.jewelrysea.net&quot;&gt;designer jewelry online&lt;/a&gt;&lt;/b&gt; We
would like you &lt;b&gt;&lt;a href=&quot;http://www.jewelrysea.net&quot;&gt;cheap
wholesale fashion jewelry&lt;/a&gt;&lt;/b&gt; to visit our latest &lt;b&gt;&lt;a href=
&quot;http://www.jewelrysea.net&quot;&gt;cheap wholesale jewelry&lt;/a&gt;&lt;/b&gt;
assortment of famed replica &lt;b&gt;&lt;a href=
&quot;http://www.jewelrysea.net/designer-jewelry/chanel-hairpins.html&quot;&gt;cheap
Chanel Hairpins&lt;/a&gt;&lt;/b&gt; watches. In this day &lt;b&gt;&lt;a href=
&quot;http://www.jewelrysea.net/designer-jewelry/tiffany-1837.html&quot;&gt;replica
Tiffany 1837 wholesale&lt;/a&gt;&lt;/b&gt; and age, Holly Golightly wouldn't
have to dream. She could simply and easily buy an i&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-26T04:05:39+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-07-26T04:42:33+01:00</updated-at>
      <user-id type="integer">107926</user-id>
      <version type="integer">8</version>
      <user-name>echo</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Any updates here? Is this still an issue?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any updates here? Is this still an issue?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-15T11:05:46+01:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>patch &quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2010-10-15T11:05:50+01:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">9</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:30:16+00:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>patch &quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2011-02-02T16:43:23+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">10</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:30:17+00:00</created-at>
      <creator-id type="integer">99411</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5191</number>
      <permalink>resourceresources-inside-namespace-generates-wrong-routes</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>patch &quot;rails3 routes&quot; regression router</tag>
      <title>resource/resources inside namespace generates wrong routes</title>
      <updated-at type="datetime">2011-02-02T16:43:02+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">11</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>gucki</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5191</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>748d76fca11ed5434703a08065bae0f5a343a3fe</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-07-25T13:24:36+01:00</created-at>
      <filename>your-patch-file.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">601765</id>
      <size type="integer">872</size>
      <uploader-id type="integer">99411</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/601765/your-patch-file.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>ddca5f4438e9b3952af02b948009f3d99fd75922</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-07-25T13:26:33+01:00</created-at>
      <filename>patch.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">601766</id>
      <size type="integer">872</size>
      <uploader-id type="integer">99411</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/601766/patch.diff</url>
    </attachment>
  </attachments>
</ticket>
