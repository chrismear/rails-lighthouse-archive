<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-11-17T00:01:13+00:00</created-at>
  <creator-id type="integer">22610</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">5985</number>
  <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>1.9.2 3.x builder dependency</tag>
  <title>Remove the claim of 1.9.2 compatibility from guides.</title>
  <updated-at type="datetime">2011-03-18T17:45:53+00:00</updated-at>
  <user-id type="integer">141756</user-id>
  <version type="integer">28</version>
  <user-name>johnae</user-name>
  <creator-name>Dusan Maliarik</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
  <milestone-title>3.x</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>In a hope that Rails 3.0.0 (or master) works well with Ruby 1.9.2, we changed our production environment to use Ruby 1.9.2. We found out that it's not true that Rails works well on 1.9.2, because of dependency on official builder gem (~&gt; 2.1.2).

ruby-1.9.2-p0 &gt; xml = Builder::XmlMarkup.new
NameError: uninitialized constant Builder::XmlBase::Symbol
        from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2/lib/builder/xmlbase.rb:40:in `method_missing'
        from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/bundler/gems/rails-8124b2bc24b8/railties/lib/rails/commands/console.rb:44:in `start'
...

So the official builder gem, and it's github repo. is not 1.9.2 compatible. There is however a trivial fix to this issues, but it's being ignored by Jim Weirich, maintainer of builder. What I did is forking his repo, apply this trivial fix, add gemspec (for bundler compatibility), and use this repo, all to find out that it's still no-go because of: 

Bundler could not find compatible versions for gem &quot;builder&quot;:
  In Gemfile:    rails depends on
      builder (~&gt; 2.1.2)
    builder (2.2.0)</original-body>
  <latest-body>In a hope that Rails 3.0.0 (or master) works well with Ruby 1.9.2, we changed our production environment to use Ruby 1.9.2. We found out that it's not true that Rails works well on 1.9.2, because of dependency on official builder gem (~&gt; 2.1.2).

ruby-1.9.2-p0 &gt; xml = Builder::XmlMarkup.new
NameError: uninitialized constant Builder::XmlBase::Symbol
        from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2/lib/builder/xmlbase.rb:40:in `method_missing'
        from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/bundler/gems/rails-8124b2bc24b8/railties/lib/rails/commands/console.rb:44:in `start'
...

So the official builder gem, and it's github repo. is not 1.9.2 compatible. There is however a trivial fix to this issues, but it's being ignored by Jim Weirich, maintainer of builder. What I did is forking his repo, apply this trivial fix, add gemspec (for bundler compatibility), and use this repo, all to find out that it's still no-go because of: 

Bundler could not find compatible versions for gem &quot;builder&quot;:
  In Gemfile:    rails depends on
      builder (~&gt; 2.1.2)
    builder (2.2.0)</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;In a hope that Rails 3.0.0 (or master) works well with Ruby
1.9.2, we changed our production environment to use Ruby 1.9.2. We
found out that it's not true that Rails works well on 1.9.2,
because of dependency on official builder gem (~&amp;gt; 2.1.2).&lt;/p&gt;
&lt;p&gt;ruby-1.9.2-p0 &amp;gt; xml = Builder::XmlMarkup.new&lt;br&gt;
NameError: uninitialized constant Builder::XmlBase::Symbol&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2/lib/builder/xmlbase.rb:40:in `method_missing'
    from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/bundler/gems/rails-8124b2bc24b8/railties/lib/rails/commands/console.rb:44:in `start'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;p&gt;So the official builder gem, and it's github repo. is not 1.9.2
compatible. There is however a trivial fix to this issues, but it's
being ignored by Jim Weirich, maintainer of builder. What I did is
forking his repo, apply this trivial fix, add gemspec (for bundler
compatibility), and use this repo, all to find out that it's still
no-go because of:&lt;/p&gt;
&lt;p&gt;Bundler could not find compatible versions for gem
&quot;builder&quot;:&lt;br&gt;
In Gemfile: rails depends on&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  builder (~&amp;gt; 2.1.2)
builder (2.2.0)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>In a hope that Rails 3.0.0 (or master) works well with Ruby 1.9.2, we changed our production environment to use Ruby 1.9.2. We found out that it's not true that Rails works well on 1.9.2, because of dependency on official builder gem (~&gt; 2.1.2).

ruby-1.9.2-p0 &gt; xml = Builder::XmlMarkup.new
NameError: uninitialized constant Builder::XmlBase::Symbol
        from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2/lib/builder/xmlbase.rb:40:in `method_missing'
        from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/bundler/gems/rails-8124b2bc24b8/railties/lib/rails/commands/console.rb:44:in `start'
...

So the official builder gem, and it's github repo. is not 1.9.2 compatible. There is however a trivial fix to this issues, but it's being ignored by Jim Weirich, maintainer of builder. What I did is forking his repo, apply this trivial fix, add gemspec (for bundler compatibility), and use this repo, all to find out that it's still no-go because of: 

Bundler could not find compatible versions for gem &quot;builder&quot;:
  In Gemfile:    rails depends on
      builder (~&gt; 2.1.2)
    builder (2.2.0)</body>
      <body-html>&lt;div&gt;&lt;p&gt;In a hope that Rails 3.0.0 (or master) works well with Ruby
1.9.2, we changed our production environment to use Ruby 1.9.2. We
found out that it's not true that Rails works well on 1.9.2,
because of dependency on official builder gem (~&amp;gt; 2.1.2).&lt;/p&gt;
&lt;p&gt;ruby-1.9.2-p0 &amp;gt; xml = Builder::XmlMarkup.new&lt;br&gt;
NameError: uninitialized constant Builder::XmlBase::Symbol&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2/lib/builder/xmlbase.rb:40:in `method_missing'
    from /Users/skrat/.rvm/gems/ruby-1.9.2-p0/bundler/gems/rails-8124b2bc24b8/railties/lib/rails/commands/console.rb:44:in `start'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;p&gt;So the official builder gem, and it's github repo. is not 1.9.2
compatible. There is however a trivial fix to this issues, but it's
being ignored by Jim Weirich, maintainer of builder. What I did is
forking his repo, apply this trivial fix, add gemspec (for bundler
compatibility), and use this repo, all to find out that it's still
no-go because of:&lt;/p&gt;
&lt;p&gt;Bundler could not find compatible versions for gem
&quot;builder&quot;:&lt;br&gt;
In Gemfile: rails depends on&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  builder (~&amp;gt; 2.1.2)
builder (2.2.0)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-16T15:16:02+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T00:10:14+00:00</updated-at>
      <user-id type="integer">22610</user-id>
      <version type="integer">1</version>
      <user-name>Dusan Maliarik</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>FUD?</body>
      <body-html>&lt;div&gt;&lt;p&gt;FUD?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-16T23:58:43+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-16T23:58:45+00:00</updated-at>
      <user-id type="integer">15316</user-id>
      <version type="integer">2</version>
      <user-name>Aaron Patterson</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Dusan builder works ok for me in 1.9.2

@@@
$ irb             
ruby-1.9.2-p0 &gt; require 'builder'
 =&gt; true 
ruby-1.9.2-p0 &gt; xml = Builder::XmlMarkup.new
 =&gt; #&lt;Builder::XmlMarkup:0x0000010083b318 @indent=0, @level=0, @target=&quot;&quot;&gt;
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Dusan builder works ok for me in 1.9.2&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ irb             
ruby-1.9.2-p0 &amp;gt; require 'builder'
 =&amp;gt; true 
ruby-1.9.2-p0 &amp;gt; xml = Builder::XmlMarkup.new
 =&amp;gt; #&amp;lt;Builder::XmlMarkup:0x0000010083b318 @indent=0, @level=0, @target=&quot;&quot;&amp;gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T00:01:13+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T00:01:35+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">3</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hi Santiago, it seems I'm not alone http://isitruby19.com/builder, this is a rather weird error likely to be caused by MRI Ruby. I haven't found any other way to get rid of it then use patched builder. I'm experiencing this with both Debian server and OS X desktop with freshly installed RFM and Ruby 1.9.2-p0.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Santiago, it seems I'm not alone &lt;a href=
&quot;http://isitruby19.com/builder&quot;&gt;http://isitruby19.com/builder&lt;/a&gt;,
this is a rather weird error likely to be caused by MRI Ruby. I
haven't found any other way to get rid of it then use patched
builder. I'm experiencing this with both Debian server and OS X
desktop with freshly installed RFM and Ruby 1.9.2-p0.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T00:09:41+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T00:09:43+00:00</updated-at>
      <user-id type="integer">22610</user-id>
      <version type="integer">4</version>
      <user-name>Dusan Maliarik</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Dusan, can you point us to your fix and give us a link where Jim refuses to fix the issue? Maybe we can convince him over it. Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Dusan, can you point us to your fix and give us a link where Jim
refuses to fix the issue? Maybe we can convince him over it.
Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T08:59:31+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T08:59:32+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">5</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm not able to reproduce this on OSX/1.9.2-p0 or on Ubuntu8.04/1.9.2-p0. I'm using rvm. 

test was the same as Santiago's above.

Dusan, this obviously doesnt mean that this problem doesnt exist, but we need to determine the difference in the environments.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm not able to reproduce this on OSX/1.9.2-p0 or on
Ubuntu8.04/1.9.2-p0. I'm using rvm.&lt;/p&gt;
&lt;p&gt;test was the same as Santiago's above.&lt;/p&gt;
&lt;p&gt;Dusan, this obviously doesnt mean that this problem doesnt
exist, but we need to determine the difference in the
environments.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T09:51:40+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T09:51:44+00:00</updated-at>
      <user-id type="integer">17433</user-id>
      <version type="integer">6</version>
      <user-name>Aditya Sanghi</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Jose: by refusing, I mean ignoring (http://goo.gl/MQNtV)
Aditya: the difference is that I'm not running my snippet in plain irb, but in Rails console.

Personally, it doesn't make any sense to me, that code in builder is perfectly fine.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jose: by refusing, I mean ignoring (&lt;a href=
&quot;http://goo.gl/MQNtV&quot;&gt;http://goo.gl/MQNtV&lt;/a&gt;)&lt;br&gt;
Aditya: the difference is that I'm not running my snippet in plain
irb, but in Rails console.&lt;/p&gt;
&lt;p&gt;Personally, it doesn't make any sense to me, that code in
builder is perfectly fine.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T10:13:14+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T10:13:18+00:00</updated-at>
      <user-id type="integer">22610</user-id>
      <version type="integer">7</version>
      <user-name>Dusan Maliarik</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Dusan, unless I am missing something, that ticket was opened less than 24h ago. I think that is a little bit too soon to express that he's ignoring it, no?

And people trying to reproduce the error, please try to reproduce the error inside a `rails console` than just `irb`. This is because Rails tweaks constant lookups a bit.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Dusan, unless I am missing something, that ticket was opened
less than 24h ago. I think that is a little bit too soon to express
that he's ignoring it, no?&lt;/p&gt;
&lt;p&gt;And people trying to reproduce the error, please try to
reproduce the error inside a &lt;code&gt;rails console&lt;/code&gt; than just
&lt;code&gt;irb&lt;/code&gt;. This is because Rails tweaks constant lookups a
bit.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T10:30:38+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T10:30:42+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">8</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>You're right, I totally missed the timestamp on that issue, my bad. In fact I don't know how does it behave in plain irb. I've seen this error in Rails logs and Rails console.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You're right, I totally missed the timestamp on that issue, my
bad. In fact I don't know how does it behave in plain irb. I've
seen this error in Rails logs and Rails console.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T10:49:43+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T10:49:46+00:00</updated-at>
      <user-id type="integer">22610</user-id>
      <version type="integer">9</version>
      <user-name>Dusan Maliarik</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I also don't think 1.9.2 support should be removed from guides. We have bugs in different Ruby versions, nothing is perfect.

Finally, we don't say it is &quot;1.9.2 ready&quot; to fool people and we would be happy if people contribute back reporting bugs and sending fixes when possible. More patience and comprehension is always welcome.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I also don't think 1.9.2 support should be removed from guides.
We have bugs in different Ruby versions, nothing is perfect.&lt;/p&gt;
&lt;p&gt;Finally, we don't say it is &quot;1.9.2 ready&quot; to fool people and we
would be happy if people contribute back reporting bugs and sending
fixes when possible. More patience and comprehension is always
welcome.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-17T10:59:29+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- 
:state: invalid
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T10:59:31+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">10</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Couldn't reproduce this on Rails 3.0.1 with Ruby 1.9.2-p0:

@@@
$ rails c
Loading development environment (Rails 3.0.1)
ruby-1.9.2-p0 &gt; require 'builder'
 =&gt; nil 
ruby-1.9.2-p0 &gt; xml = Builder::XmlMarkup.new
 =&gt; #&lt;Builder::XmlMarkup:0x00000103328b20 @indent=0, @level=0, @target=&quot;&quot;&gt; 
ruby-1.9.2-p0 &gt; 
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Couldn't reproduce this on Rails 3.0.1 with Ruby 1.9.2-p0:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ rails c
Loading development environment (Rails 3.0.1)
ruby-1.9.2-p0 &amp;gt; require 'builder'
 =&amp;gt; nil 
ruby-1.9.2-p0 &amp;gt; xml = Builder::XmlMarkup.new
 =&amp;gt; #&amp;lt;Builder::XmlMarkup:0x00000103328b20 @indent=0, @level=0, @target=&quot;&quot;&amp;gt; 
ruby-1.9.2-p0 &amp;gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-17T11:06:14+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T11:06:18+00:00</updated-at>
      <user-id type="integer">123547</user-id>
      <version type="integer">11</version>
      <user-name>Andr&#233;s Mej&#237;a</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>On my OS X laptop - 

@@@ text

[ 04:22:07 ] &gt; rails c production
Loading production environment (Rails 3.0.3)
&gt;&gt; RUBY_VERSION
=&gt; &quot;1.9.2&quot;
&gt;&gt; Rails.version
=&gt; &quot;3.0.3&quot;
&gt;&gt; require 'builder'
=&gt; true
&gt;&gt; xml = Builder::XmlMarkup.new
=&gt; #&lt;Builder::XmlMarkup:0x00000101cafda8 @indent=0, @level=0, @target=&quot;&quot;&gt;

[ 04:23:39 ] &gt; ruby -v
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]

[ 04:23:42 ] &gt; gem list builder

*** LOCAL GEMS ***

builder (2.1.2)

[ 04:24:12 ] &gt; bundle show builder
/Users/adityasanghi/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2
@@@

and on ubuntu 

@@@ text
asanghi@Risingsun10:~/tmp/btest$ rails c production
Loading production environment (Rails 3.0.3)
ruby-1.9.2-head &gt; RUBY_VERSION
 =&gt; &quot;1.9.2&quot; 
ruby-1.9.2-head &gt; Rails.version
 =&gt; &quot;3.0.3&quot; 
ruby-1.9.2-head &gt; require 'builder'
 =&gt; true 
ruby-1.9.2-head &gt; Builder
 =&gt; Builder 
ruby-1.9.2-head &gt; xml = Builder::XmlMarkup.new
 =&gt; #&lt;Builder::XmlMarkup:0x00000002827308 @indent=0, @level=0, @target=&quot;&quot;&gt; 
ruby-1.9.2-head &gt; exit
asanghi@Risingsun10:~/tmp/btest$ ruby -v
ruby 1.9.2p42 (2010-11-15 revision 29797) [x86_64-linux]
asanghi@Risingsun10:~/tmp/btest$ uname -a
Linux Risingsun10 2.6.24-24-server #1 SMP Fri Sep 18 16:47:05 UTC 2009 x86_64 GNU/Linux
asanghi@Risingsun10:~/tmp/btest$ cat /etc/lsb-release 
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=8.04
DISTRIB_CODENAME=hardy
DISTRIB_DESCRIPTION=&quot;Ubuntu 8.04.4 LTS&quot;
asanghi@Risingsun10:~/tmp/btest$ gem list builder rails

*** LOCAL GEMS ***

builder (2.1.2)

@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;On my OS X laptop -&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;text&quot;&gt;
[ 04:22:07 ] &amp;gt; rails c production
Loading production environment (Rails 3.0.3)
&amp;gt;&amp;gt; RUBY_VERSION
=&amp;gt; &quot;1.9.2&quot;
&amp;gt;&amp;gt; Rails.version
=&amp;gt; &quot;3.0.3&quot;
&amp;gt;&amp;gt; require 'builder'
=&amp;gt; true
&amp;gt;&amp;gt; xml = Builder::XmlMarkup.new
=&amp;gt; #&amp;lt;Builder::XmlMarkup:0x00000101cafda8 @indent=0, @level=0, @target=&quot;&quot;&amp;gt;

[ 04:23:39 ] &amp;gt; ruby -v
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]

[ 04:23:42 ] &amp;gt; gem list builder

*** LOCAL GEMS ***

builder (2.1.2)

[ 04:24:12 ] &amp;gt; bundle show builder
/Users/adityasanghi/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;and on ubuntu&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;text&quot;&gt;asanghi@Risingsun10:~/tmp/btest$ rails c production
Loading production environment (Rails 3.0.3)
ruby-1.9.2-head &amp;gt; RUBY_VERSION
 =&amp;gt; &quot;1.9.2&quot; 
ruby-1.9.2-head &amp;gt; Rails.version
 =&amp;gt; &quot;3.0.3&quot; 
ruby-1.9.2-head &amp;gt; require 'builder'
 =&amp;gt; true 
ruby-1.9.2-head &amp;gt; Builder
 =&amp;gt; Builder 
ruby-1.9.2-head &amp;gt; xml = Builder::XmlMarkup.new
 =&amp;gt; #&amp;lt;Builder::XmlMarkup:0x00000002827308 @indent=0, @level=0, @target=&quot;&quot;&amp;gt; 
ruby-1.9.2-head &amp;gt; exit
asanghi@Risingsun10:~/tmp/btest$ ruby -v
ruby 1.9.2p42 (2010-11-15 revision 29797) [x86_64-linux]
asanghi@Risingsun10:~/tmp/btest$ uname -a
Linux Risingsun10 2.6.24-24-server #1 SMP Fri Sep 18 16:47:05 UTC 2009 x86_64 GNU/Linux
asanghi@Risingsun10:~/tmp/btest$ cat /etc/lsb-release 
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=8.04
DISTRIB_CODENAME=hardy
DISTRIB_DESCRIPTION=&quot;Ubuntu 8.04.4 LTS&quot;
asanghi@Risingsun10:~/tmp/btest$ gem list builder rails

*** LOCAL GEMS ***

builder (2.1.2)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T11:07:15+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
:milestone: 71472
:assigned_user: 19965
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T11:07:17+00:00</updated-at>
      <user-id type="integer">17433</user-id>
      <version type="integer">12</version>
      <user-name>Aditya Sanghi</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Sorry there were updates while i had this page open. reverting ticket state back.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry there were updates while i had this page open. reverting
ticket state back.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-17T11:08:20+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- 
:state: invalid
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T11:08:22+00:00</updated-at>
      <user-id type="integer">17433</user-id>
      <version type="integer">13</version>
      <user-name>Aditya Sanghi</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I tried again with both 3.0.2 and edge Rails, and I don't see the bug anymore. Putting this into my &quot;Strange Ruby issues resolved without intervention&quot; bucket.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I tried again with both 3.0.2 and edge Rails, and I don't see
the bug anymore. Putting this into my &quot;Strange Ruby issues resolved
without intervention&quot; bucket.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-17T15:08:52+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T15:08:56+00:00</updated-at>
      <user-id type="integer">22610</user-id>
      <version type="integer">14</version>
      <user-name>Dusan Maliarik</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T15:22:02+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-17T15:22:05+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">15</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Jim just applied mysterious ::Symbol fix and bumped version to 3.0.0, would it be possible to use this one? Colleague of mine is still experiencing this issue and we couldn't find an explanation for it so far :(</body>
      <body-html>&lt;div&gt;&lt;p&gt;Jim just applied mysterious ::Symbol fix and bumped version to
3.0.0, would it be possible to use this one? Colleague of mine is
still experiencing this issue and we couldn't find an explanation
for it so far :(&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-18T12:20:15+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-18T12:20:20+00:00</updated-at>
      <user-id type="integer">22610</user-id>
      <version type="integer">16</version>
      <user-name>Dusan Maliarik</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>What I've found so far.
Clean Rails 3.0.3 install with Ruby 1.9.2-p0 (using RVM) works fine:
&lt;code&gt;
rails c
require 'builder'; Builder::XmlMarkup.new
=&gt; #&lt;Builder::XmlMarkup:0x0000000229fa70 @indent=0, @level=0, @target=&quot;&quot;&gt;
&lt;/code&gt;
The problem occurs when you add &quot;amqp&quot; gem to the Gemfile (https://github.com/tmm1/amqp)
&lt;code&gt;
....
gem &quot;amqp&quot;
...
&lt;/code&gt;
&lt;code&gt;
bundle install
rails c
require 'builder'; Builder::XmlMarkup.new
NameError: uninitialized constant Builder::XmlBase::Symbol
	from /home/valentin/.rvm/gems/ruby-1.9.2-p0/gems/builder-2.1.2/lib/builder/xmlbase.rb:40:in `method_missing'
	from /home/valentin/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.0.3/lib/rails/commands/console.rb:44:in `start'
	from /home/valentin/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.0.3/lib/rails/commands/console.rb:8:in `start'
	from /home/valentin/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.0.3/lib/rails/commands.rb:23:in `&lt;top (required)&gt;'
	from script/rails:6:in `require'
	from script/rails:6:in `&lt;main&gt;'
&lt;/code&gt;
The problem is caused by this line in xmlbase.rb:
&lt;code&gt;
sym = &quot;#{sym}:#{args.shift}&quot; if args.first.kind_of?(Symbol)
&lt;/code&gt;
which is fixed in Builder 3.0.0.

How do I deal with this problem now:
- add #{myapp}/lib dir to autorequire
- clone Builder 3.0.0 from the repository
&lt;code&gt;
mkdir #{myapp}/lib/builder
cd #{cloned_builder_dir}/lib/bulder
cp blankslate.rb css.rb xchar.rb xmlbase.rb xmlmarkup.rb #{myapp}/lib/builder
&lt;/code&gt;

Everything works fine now :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;What I've found so far.&lt;br&gt;
Clean Rails 3.0.3 install with Ruby 1.9.2-p0 (using RVM) works
fine:&lt;br&gt;
&lt;code&gt;&lt;br&gt;
rails c&lt;br&gt;
require 'builder'; Builder::XmlMarkup.new&lt;br&gt;
=&amp;gt; #&amp;lt;Builder::XmlMarkup:0x0000000229fa70 @indent=0, @level=0,
@target=&quot;&quot;&amp;gt;&lt;/code&gt;&lt;br&gt;
The problem occurs when you add &quot;amqp&quot; gem to the Gemfile (&lt;a href=
&quot;https://github.com/tmm1/amqp&quot;&gt;https://github.com/tmm1/amqp&lt;/a&gt;)&lt;br&gt;
&lt;code&gt;&lt;br&gt;
.... gem &quot;amqp&quot;&lt;br&gt;
...&lt;/code&gt;&lt;br&gt;
&lt;code&gt;&lt;br&gt;
bundle install&lt;br&gt;
rails c&lt;br&gt;
require 'builder'; Builder::XmlMarkup.new&lt;br&gt;
NameError: uninitialized constant
Builder::XmlBase::Symbol&lt;br&gt;&lt;/code&gt;&lt;/p&gt;
{mkd-extraction-f45ad5fc1bccc23b07b426430f1fdbad}
&lt;p&gt;&lt;br&gt;
The problem is caused by this line in xmlbase.rb:&lt;br&gt;
&lt;code&gt;&lt;br&gt;
sym = &quot;#{sym}:#{args.shift}&quot; if
args.first.kind_of?(Symbol)&lt;br&gt;&lt;/code&gt;&lt;br&gt;
which is fixed in Builder 3.0.0.&lt;/p&gt;
&lt;p&gt;How do I deal with this problem now:&lt;br&gt;
- add #{myapp}/lib dir to autorequire - clone Builder 3.0.0 from
the repository &lt;code&gt;&lt;br&gt;
mkdir #{myapp}/lib/builder&lt;br&gt;
cd #{cloned_builder_dir}/lib/bulder&lt;br&gt;
cp blankslate.rb css.rb xchar.rb xmlbase.rb xmlmarkup.rb
#{myapp}/lib/builder&lt;br&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Everything works fine now :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-18T13:00:22+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-18T13:00:24+00:00</updated-at>
      <user-id type="integer">90112</user-id>
      <version type="integer">17</version>
      <user-name>Valentine Bichkovsky</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-18T13:02:18+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-18T13:02:23+00:00</updated-at>
      <user-id type="integer">90112</user-id>
      <version type="integer">18</version>
      <user-name>Valentine Bichkovsky</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've bumped up the builder version</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've bumped up the builder version&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-18T14:58:04+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-18T14:58:06+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">19</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>@Dusan,

Can you please list the gems you have in your application? From @valentine's comment above it seems amqp can trigger this problem, but there maybe others too that cause this problem. If we know which ones cause it, it will help those who are currently wondering about the failure relating to builder.

@santiago, we should possibly mark this ticket resolved instead of invalid now that you've updated builder version. ya?

Cheers,
Aditya</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Dusan,&lt;/p&gt;
&lt;p&gt;Can you please list the gems you have in your application? From
@valentine's comment above it seems amqp can trigger this problem,
but there maybe others too that cause this problem. If we know
which ones cause it, it will help those who are currently wondering
about the failure relating to builder.&lt;/p&gt;
&lt;p&gt;@santiago, we should possibly mark this ticket resolved instead
of invalid now that you've updated builder version. ya?&lt;/p&gt;
&lt;p&gt;Cheers,&lt;br&gt;
Aditya&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-19T10:47:54+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-19T10:47:56+00:00</updated-at>
      <user-id type="integer">17433</user-id>
      <version type="integer">20</version>
      <user-name>Aditya Sanghi</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Aditya go ahead if you want ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Aditya go ahead if you want ;)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-19T16:13:08+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2010-11-19T16:13:10+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">21</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've seen this error when using Rails, the amqp gem and ruby 1.9.2 together. The problem comes from a change in ruby 1.9.x. Basically, builder 2.1.2 and amqp (I guess, among other things) are unusable together. Builder 3.0.x does not have this problem it seems. Unfortunately Rails 3.0.x together with lots of other gems depend on builder 2.1.2.

Please see:
https://github.com/ruby-amqp/amqp/issues/#issue/38
https://github.com/jimweirich/builder/issues/#issue/4</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've seen this error when using Rails, the amqp gem and ruby
1.9.2 together. The problem comes from a change in ruby 1.9.x.
Basically, builder 2.1.2 and amqp (I guess, among other things) are
unusable together. Builder 3.0.x does not have this problem it
seems. Unfortunately Rails 3.0.x together with lots of other gems
depend on builder 2.1.2.&lt;/p&gt;
&lt;p&gt;Please see:&lt;br&gt;
&lt;a href=
&quot;https://github.com/ruby-amqp/amqp/issues/#issue/38&quot;&gt;https://github.com/ruby-amqp/amqp/issues/#issue/38&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;https://github.com/jimweirich/builder/issues/#issue/4&quot;&gt;https://github.com/jimweirich/builder/issues/#issue/4&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-17T16:06:37+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2011-03-17T16:06:59+00:00</updated-at>
      <user-id type="integer">141756</user-id>
      <version type="integer">22</version>
      <user-name>johnae</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>An example of this behavior, this code works:

    require 'rubygems'
    #require 'mq'
    require 'rails'
    require 'builder'
    
    builder = Builder::XmlMarkup.new
    xml = builder.person { |b| b.name(&quot;Jim&quot;); b.phone(&quot;555-1234&quot;) }
    puts xml

this code doesn't:

    require 'rubygems'
    require 'mq'
    require 'rails'
    require 'builder'
    
    builder = Builder::XmlMarkup.new
    xml = builder.person { |b| b.name(&quot;Jim&quot;); b.phone(&quot;555-1234&quot;) }
    puts xml</body>
      <body-html>&lt;div&gt;&lt;p&gt;An example of this behavior, this code works:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;require 'rubygems'
#require 'mq'
require 'rails'
require 'builder'

builder = Builder::XmlMarkup.new
xml = builder.person { |b| b.name(&quot;Jim&quot;); b.phone(&quot;555-1234&quot;) }
puts xml&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;this code doesn't:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;require 'rubygems'
require 'mq'
require 'rails'
require 'builder'

builder = Builder::XmlMarkup.new
xml = builder.person { |b| b.name(&quot;Jim&quot;); b.phone(&quot;555-1234&quot;) }
puts xml&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-17T16:08:10+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2011-03-17T16:08:29+00:00</updated-at>
      <user-id type="integer">141756</user-id>
      <version type="integer">23</version>
      <user-name>johnae</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>In Rails master it seems to depend on builder 3.0.0 but in Rails release 3.0.5 (latest) it depends on builder 2.1.2. Don't know why that is.</body>
      <body-html>&lt;div&gt;&lt;p&gt;In Rails master it seems to depend on builder 3.0.0 but in Rails
release 3.0.5 (latest) it depends on builder 2.1.2. Don't know why
that is.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-17T16:15:21+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2011-03-17T16:15:39+00:00</updated-at>
      <user-id type="integer">141756</user-id>
      <version type="integer">24</version>
      <user-name>johnae</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>that seems like waiting for a release should do the trick, although, I've seen this problem, it wen't away after some time, and I don't remember what we did, we now use 3.0.3 with amqp without (builder related) issues</body>
      <body-html>&lt;div&gt;&lt;p&gt;that seems like waiting for a release should do the trick,
although, I've seen this problem, it wen't away after some time,
and I don't remember what we did, we now use 3.0.3 with amqp
without (builder related) issues&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-17T16:18:17+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2011-03-17T16:18:36+00:00</updated-at>
      <user-id type="integer">22610</user-id>
      <version type="integer">25</version>
      <user-name>Dusan Maliarik</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This is what I've done in a monkey-patch - don't even remember exactly what did the trick anymore (been using it on occasion when this problem manifests):


    module Builder
      
      class CSS &lt; BlankSlate
        
        def id!(arg, &amp;block)
          _start_container('#'+arg.to_s, nil, ::Kernel.block_given?)
          _css_block(block) if block
          _unify_block
          self
        end
        
        def class!(arg, &amp;block)
          _start_container('.'+arg.to_s, nil, ::Kernel.block_given?)
          _css_block(block) if block
          _unify_block
          self
        end
        
        def method_missing(sym, *args, &amp;block)
          sym = &quot;#{sym}:#{args.shift}&quot; if args.first.kind_of?(::Symbol)
          if block
            _start_container(sym, args.first)
            _css_block(block)
            _unify_block
          elsif @in_block
            _indent
            _css_line(sym, *args)
            _newline
            return self
          else
            _start_container(sym, args.first, false)
            _unify_block
          end
          self
        end
        
      end
      
      class XmlBase &lt; BlankSlate
    
        def method_missing(sym, *args, &amp;block)
          text = nil
          attrs = nil
          sym = &quot;#{sym}:#{args.shift}&quot; if args.first.kind_of?(::Symbol)
          args.each do |arg|
            case arg
            when ::Hash
              attrs ||= {}
              attrs.merge!(arg)
            else
              text ||= ''
              text &lt;&lt; arg.to_s
            end
          end
          if block
            unless text.nil?
              ::Kernel::raise ::ArgumentError,
                &quot;XmlMarkup cannot mix a text argument with a block&quot;
            end
            _indent
            _start_tag(sym, attrs)
            _newline
            begin
              _nested_structures(block)
            ensure
              _indent
              _end_tag(sym)
              _newline
            end
          elsif text.nil?
            _indent
            _start_tag(sym, attrs, true)
            _newline
          else
            _indent
            _start_tag(sym, attrs)
            text! text
            _end_tag(sym)
            _newline
          end
          @target
        end
        
      end
      
      class XmlMarkup &lt; XmlBase
          def initialize(options={})
            indent = options[:indent] || 0
            margin = options[:margin] || 0
            super(indent, margin)
            @target = options[:target] || &quot;&quot;
          end
          
          def target!
            @target
          end
    
          def comment!(comment_text)
            _ensure_no_block ::Kernel::block_given?
            _special(&quot;&lt;!-- &quot;, &quot; --&gt;&quot;, comment_text, nil)
          end
          
          def declare!(inst, *args, &amp;block)
            _indent
            @target &lt;&lt; &quot;&lt;!#{inst}&quot;
            args.each do |arg|
              case arg
              when ::String
                @target &lt;&lt; %{ &quot;#{arg}&quot;} # &quot; WART
              when ::Symbol
                @target &lt;&lt; &quot; #{arg}&quot;
              end
            end
            if ::Kernel::block_given?
              @target &lt;&lt; &quot; [&quot;
              _newline
              _nested_structures(block)
              @target &lt;&lt; &quot;]&quot;
            end
            @target &lt;&lt; &quot;&gt;&quot;
            _newline
          end
          
          def instruct!(directive_tag=:xml, attrs={})
            _ensure_no_block ::Kernel::block_given?
            if directive_tag == :xml
              a = { :version=&gt;&quot;1.0&quot;, :encoding=&gt;&quot;UTF-8&quot; }
              attrs = a.merge attrs
      	@encoding = attrs[:encoding].downcase
            end
            _special(
              &quot;&lt;?#{directive_tag}&quot;,
              &quot;?&gt;&quot;,
              nil,
              attrs,
              [:version, :encoding, :standalone])
          end
    
          def cdata!(text)
            _ensure_no_block ::Kernel::block_given?
            _special(&quot;&lt;![CDATA[&quot;, &quot;]]&gt;&quot;, text, nil)
          end
    
          private
    
          def _text(text)
            @target &lt;&lt; text
          end
    
          # Insert special instruction. 
          def _special(open, close, data=nil, attrs=nil, order=[])
            _indent
            @target &lt;&lt; open
            @target &lt;&lt; data if data
            _insert_attributes(attrs, order) if attrs
            @target &lt;&lt; close
            _newline
          end
    
          # Start an XML tag.  If &lt;tt&gt;end_too&lt;/tt&gt; is true, then the start
          # tag is also the end tag (e.g.  &lt;br/&gt;
          def _start_tag(sym, attrs, end_too=false)
            @target &lt;&lt; &quot;&lt;#{sym}&quot;
            _insert_attributes(attrs)
            @target &lt;&lt; &quot;/&quot; if end_too
            @target &lt;&lt; &quot;&gt;&quot;
          end
    
          # Insert an ending tag.
          def _end_tag(sym)
            @target &lt;&lt; &quot;&lt;/#{sym}&gt;&quot;
          end
    
          # Insert the attributes (given in the hash).
          def _insert_attributes(attrs, order=[])
            return if attrs.nil?
            order.each do |k|
              v = attrs[k]
              @target &lt;&lt; %{ #{k}=&quot;#{_attr_value(v)}&quot;} if v # &quot; WART
            end
            attrs.each do |k, v|
              @target &lt;&lt; %{ #{k}=&quot;#{_attr_value(v)}&quot;} unless order.member?(k) # &quot; WART
            end
          end
    
          def _attr_value(value)
            case value
            when ::Symbol
              value.to_s
            else
              _escape_quote(value.to_s)
            end
          end
    
          def _ensure_no_block(got_block)
            if got_block
              ::Kernel::raise IllegalBlockError.new(
                &quot;Blocks are not allowed on XML instructions&quot;
              )
            end
          end
    
        end
    
    end</body>
      <body-html>&lt;div&gt;&lt;p&gt;This is what I've done in a monkey-patch - don't even remember
exactly what did the trick anymore (been using it on occasion when
this problem manifests):&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;module Builder

  class CSS &amp;lt; BlankSlate

    def id!(arg, &amp;amp;block)
      _start_container('#'+arg.to_s, nil, ::Kernel.block_given?)
      _css_block(block) if block
      _unify_block
      self
    end

    def class!(arg, &amp;amp;block)
      _start_container('.'+arg.to_s, nil, ::Kernel.block_given?)
      _css_block(block) if block
      _unify_block
      self
    end

    def method_missing(sym, *args, &amp;amp;block)
      sym = &quot;#{sym}:#{args.shift}&quot; if args.first.kind_of?(::Symbol)
      if block
        _start_container(sym, args.first)
        _css_block(block)
        _unify_block
      elsif @in_block
        _indent
        _css_line(sym, *args)
        _newline
        return self
      else
        _start_container(sym, args.first, false)
        _unify_block
      end
      self
    end

  end

  class XmlBase &amp;lt; BlankSlate

    def method_missing(sym, *args, &amp;amp;block)
      text = nil
      attrs = nil
      sym = &quot;#{sym}:#{args.shift}&quot; if args.first.kind_of?(::Symbol)
      args.each do |arg|
        case arg
        when ::Hash
          attrs ||= {}
          attrs.merge!(arg)
        else
          text ||= ''
          text &amp;lt;&amp;lt; arg.to_s
        end
      end
      if block
        unless text.nil?
          ::Kernel::raise ::ArgumentError,
            &quot;XmlMarkup cannot mix a text argument with a block&quot;
        end
        _indent
        _start_tag(sym, attrs)
        _newline
        begin
          _nested_structures(block)
        ensure
          _indent
          _end_tag(sym)
          _newline
        end
      elsif text.nil?
        _indent
        _start_tag(sym, attrs, true)
        _newline
      else
        _indent
        _start_tag(sym, attrs)
        text! text
        _end_tag(sym)
        _newline
      end
      @target
    end

  end

  class XmlMarkup &amp;lt; XmlBase
      def initialize(options={})
        indent = options[:indent] || 0
        margin = options[:margin] || 0
        super(indent, margin)
        @target = options[:target] || &quot;&quot;
      end

      def target!
        @target
      end

      def comment!(comment_text)
        _ensure_no_block ::Kernel::block_given?
        _special(&quot;&amp;lt;!-- &quot;, &quot; --&amp;gt;&quot;, comment_text, nil)
      end

      def declare!(inst, *args, &amp;amp;block)
        _indent
        @target &amp;lt;&amp;lt; &quot;&amp;lt;!#{inst}&quot;
        args.each do |arg|
          case arg
          when ::String
            @target &amp;lt;&amp;lt; %{ &quot;#{arg}&quot;} # &quot; WART
          when ::Symbol
            @target &amp;lt;&amp;lt; &quot; #{arg}&quot;
          end
        end
        if ::Kernel::block_given?
          @target &amp;lt;&amp;lt; &quot; [&quot;
          _newline
          _nested_structures(block)
          @target &amp;lt;&amp;lt; &quot;]&quot;
        end
        @target &amp;lt;&amp;lt; &quot;&amp;gt;&quot;
        _newline
      end

      def instruct!(directive_tag=:xml, attrs={})
        _ensure_no_block ::Kernel::block_given?
        if directive_tag == :xml
          a = { :version=&amp;gt;&quot;1.0&quot;, :encoding=&amp;gt;&quot;UTF-8&quot; }
          attrs = a.merge attrs
    @encoding = attrs[:encoding].downcase
        end
        _special(
          &quot;&amp;lt;?#{directive_tag}&quot;,
          &quot;?&amp;gt;&quot;,
          nil,
          attrs,
          [:version, :encoding, :standalone])
      end

      def cdata!(text)
        _ensure_no_block ::Kernel::block_given?
        _special(&quot;&amp;lt;![CDATA[&quot;, &quot;]]&amp;gt;&quot;, text, nil)
      end

      private

      def _text(text)
        @target &amp;lt;&amp;lt; text
      end

      # Insert special instruction. 
      def _special(open, close, data=nil, attrs=nil, order=[])
        _indent
        @target &amp;lt;&amp;lt; open
        @target &amp;lt;&amp;lt; data if data
        _insert_attributes(attrs, order) if attrs
        @target &amp;lt;&amp;lt; close
        _newline
      end

      # Start an XML tag.  If &amp;lt;tt&amp;gt;end_too&amp;lt;/tt&amp;gt; is true, then the start
      # tag is also the end tag (e.g.  &amp;lt;br/&amp;gt;
      def _start_tag(sym, attrs, end_too=false)
        @target &amp;lt;&amp;lt; &quot;&amp;lt;#{sym}&quot;
        _insert_attributes(attrs)
        @target &amp;lt;&amp;lt; &quot;/&quot; if end_too
        @target &amp;lt;&amp;lt; &quot;&amp;gt;&quot;
      end

      # Insert an ending tag.
      def _end_tag(sym)
        @target &amp;lt;&amp;lt; &quot;&amp;lt;/#{sym}&amp;gt;&quot;
      end

      # Insert the attributes (given in the hash).
      def _insert_attributes(attrs, order=[])
        return if attrs.nil?
        order.each do |k|
          v = attrs[k]
          @target &amp;lt;&amp;lt; %{ #{k}=&quot;#{_attr_value(v)}&quot;} if v # &quot; WART
        end
        attrs.each do |k, v|
          @target &amp;lt;&amp;lt; %{ #{k}=&quot;#{_attr_value(v)}&quot;} unless order.member?(k) # &quot; WART
        end
      end

      def _attr_value(value)
        case value
        when ::Symbol
          value.to_s
        else
          _escape_quote(value.to_s)
        end
      end

      def _ensure_no_block(got_block)
        if got_block
          ::Kernel::raise IllegalBlockError.new(
            &quot;Blocks are not allowed on XML instructions&quot;
          )
        end
      end

    end

end&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-17T16:22:07+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2011-03-17T16:22:25+00:00</updated-at>
      <user-id type="integer">141756</user-id>
      <version type="integer">26</version>
      <user-name>johnae</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>What we did is in my previous message (copied builder 3 files into &lt;app root&gt;/lib/builder).</body>
      <body-html>&lt;div&gt;&lt;p&gt;What we did is in my previous message (copied builder 3 files
into /lib/builder).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-17T16:22:34+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2011-03-17T16:22:48+00:00</updated-at>
      <user-id type="integer">90112</user-id>
      <version type="integer">27</version>
      <user-name>Valentine Bichkovsky</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The incompatibility between builder 2.1.2 and amqp has now been resolved and was actually (it seems) a problem with the amqp gem.

For more info see:
https://github.com/ruby-amqp/amqp/issues/38#comment_890160

(fixed in amqp 0.7.1)</body>
      <body-html>&lt;div&gt;&lt;p&gt;The incompatibility between builder 2.1.2 and amqp has now been
resolved and was actually (it seems) a problem with the amqp
gem.&lt;/p&gt;
&lt;p&gt;For more info see:&lt;br&gt;
&lt;a href=
&quot;https://github.com/ruby-amqp/amqp/issues/38#comment_890160&quot;&gt;https://github.com/ruby-amqp/amqp/issues/38#comment_890160&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;(fixed in amqp 0.7.1)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-18T17:45:35+00:00</created-at>
      <creator-id type="integer">22610</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">5985</number>
      <permalink>remove-the-claim-of-192-compatibility-from-guides</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>1.9.2 3.x builder dependency</tag>
      <title>Remove the claim of 1.9.2 compatibility from guides.</title>
      <updated-at type="datetime">2011-03-18T17:45:53+00:00</updated-at>
      <user-id type="integer">141756</user-id>
      <version type="integer">28</version>
      <user-name>johnae</user-name>
      <creator-name>Dusan Maliarik</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5985</url>
      <milestone-title>3.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
