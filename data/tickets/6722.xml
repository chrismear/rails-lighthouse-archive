<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">false</closed>
  <created-at type="datetime">2011-04-19T09:49:20+01:00</created-at>
  <creator-id type="integer">146204</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6722</number>
  <permalink>add-autocompleteoff-attribute-to-the-authenticity_token-of-form_tag</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>new</state>
  <tag nil="true"></tag>
  <title>Add autocomplete=&quot;off&quot; Attribute to the authenticity_token of form_tag</title>
  <updated-at type="datetime">2011-04-19T09:49:26+01:00</updated-at>
  <user-id type="integer">146204</user-id>
  <version type="integer">1</version>
  <user-name>Florent Viard</user-name>
  <creator-name>Florent Viard</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6722</url>
  <priority-name nil="true"></priority-name>
  <original-body>Today, Chrome and maybe other brothers also remember hidden fields in forms when using the AutoFill/AutoComplete feature (like for keeping user credentials).

And so, when using form_tag in RoR with the authenticity token feature enabled, the form submission could fail with an invalid token error because Chrome will try to autocomplete the authentication_token hidden field with an old value.

See for example those bugs in redmine:
http://www.redmine.org/issues/4825
http://www.redmine.org/issues/5915
http://www.redmine.org/issues/5230

An easy fix will be to add the autocomplete=&quot;off&quot; attribute to the hidden input field used for the authenticity token.

To fix this, in &quot;rails/actionpack/lib/action_view/helpers/form_tag_helper.rb&quot;:
Add ' :autocomplete =&gt; &quot;off&quot; '
to ' tag(:input, :type =&gt; &quot;hidden&quot;, :name =&gt; request_forgery_protection_token.to_s, :value =&gt; token) '
in the function: def token_tag(token)</original-body>
  <latest-body>Today, Chrome and maybe other brothers also remember hidden fields in forms when using the AutoFill/AutoComplete feature (like for keeping user credentials).

And so, when using form_tag in RoR with the authenticity token feature enabled, the form submission could fail with an invalid token error because Chrome will try to autocomplete the authentication_token hidden field with an old value.

See for example those bugs in redmine:
http://www.redmine.org/issues/4825
http://www.redmine.org/issues/5915
http://www.redmine.org/issues/5230

An easy fix will be to add the autocomplete=&quot;off&quot; attribute to the hidden input field used for the authenticity token.

To fix this, in &quot;rails/actionpack/lib/action_view/helpers/form_tag_helper.rb&quot;:
Add ' :autocomplete =&gt; &quot;off&quot; '
to ' tag(:input, :type =&gt; &quot;hidden&quot;, :name =&gt; request_forgery_protection_token.to_s, :value =&gt; token) '
in the function: def token_tag(token)</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Today, Chrome and maybe other brothers also remember hidden
fields in forms when using the AutoFill/AutoComplete feature (like
for keeping user credentials).&lt;/p&gt;
&lt;p&gt;And so, when using form_tag in RoR with the authenticity token
feature enabled, the form submission could fail with an invalid
token error because Chrome will try to autocomplete the
authentication_token hidden field with an old value.&lt;/p&gt;
&lt;p&gt;See for example those bugs in redmine:&lt;br&gt;
&lt;a href=
&quot;http://www.redmine.org/issues/4825&quot;&gt;http://www.redmine.org/issues/4825&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.redmine.org/issues/5915&quot;&gt;http://www.redmine.org/issues/5915&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.redmine.org/issues/5230&quot;&gt;http://www.redmine.org/issues/5230&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;An easy fix will be to add the autocomplete=&quot;off&quot; attribute to
the hidden input field used for the authenticity token.&lt;/p&gt;
&lt;p&gt;To fix this, in
&quot;rails/actionpack/lib/action_view/helpers/form_tag_helper.rb&quot;:&lt;br&gt;
Add ' :autocomplete =&amp;gt; &quot;off&quot; '&lt;br&gt;
to ' tag(:input, :type =&amp;gt; &quot;hidden&quot;, :name =&amp;gt;
request_forgery_protection_token.to_s, :value =&amp;gt; token) '&lt;br&gt;
in the function: def token_tag(token)&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Today, Chrome and maybe other brothers also remember hidden fields in forms when using the AutoFill/AutoComplete feature (like for keeping user credentials).

And so, when using form_tag in RoR with the authenticity token feature enabled, the form submission could fail with an invalid token error because Chrome will try to autocomplete the authentication_token hidden field with an old value.

See for example those bugs in redmine:
http://www.redmine.org/issues/4825
http://www.redmine.org/issues/5915
http://www.redmine.org/issues/5230

An easy fix will be to add the autocomplete=&quot;off&quot; attribute to the hidden input field used for the authenticity token.

To fix this, in &quot;rails/actionpack/lib/action_view/helpers/form_tag_helper.rb&quot;:
Add ' :autocomplete =&gt; &quot;off&quot; '
to ' tag(:input, :type =&gt; &quot;hidden&quot;, :name =&gt; request_forgery_protection_token.to_s, :value =&gt; token) '
in the function: def token_tag(token)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Today, Chrome and maybe other brothers also remember hidden
fields in forms when using the AutoFill/AutoComplete feature (like
for keeping user credentials).&lt;/p&gt;
&lt;p&gt;And so, when using form_tag in RoR with the authenticity token
feature enabled, the form submission could fail with an invalid
token error because Chrome will try to autocomplete the
authentication_token hidden field with an old value.&lt;/p&gt;
&lt;p&gt;See for example those bugs in redmine:&lt;br&gt;
&lt;a href=
&quot;http://www.redmine.org/issues/4825&quot;&gt;http://www.redmine.org/issues/4825&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.redmine.org/issues/5915&quot;&gt;http://www.redmine.org/issues/5915&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://www.redmine.org/issues/5230&quot;&gt;http://www.redmine.org/issues/5230&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;An easy fix will be to add the autocomplete=&quot;off&quot; attribute to
the hidden input field used for the authenticity token.&lt;/p&gt;
&lt;p&gt;To fix this, in
&quot;rails/actionpack/lib/action_view/helpers/form_tag_helper.rb&quot;:&lt;br&gt;
Add ' :autocomplete =&amp;gt; &quot;off&quot; '&lt;br&gt;
to ' tag(:input, :type =&amp;gt; &quot;hidden&quot;, :name =&amp;gt;
request_forgery_protection_token.to_s, :value =&amp;gt; token) '&lt;br&gt;
in the function: def token_tag(token)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-04-19T09:49:20+01:00</created-at>
      <creator-id type="integer">146204</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6722</number>
      <permalink>add-autocompleteoff-attribute-to-the-authenticity_token-of-form_tag</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Add autocomplete=&quot;off&quot; Attribute to the authenticity_token of form_tag</title>
      <updated-at type="datetime">2011-04-19T09:49:26+01:00</updated-at>
      <user-id type="integer">146204</user-id>
      <version type="integer">1</version>
      <user-name>Florent Viard</user-name>
      <creator-name>Florent Viard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6722</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
