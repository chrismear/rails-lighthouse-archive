<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">141</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-07-20T21:00:15+01:00</created-at>
  <creator-id type="integer">4642</creator-id>
  <milestone-due-on type="datetime">2009-08-31T00:00:00+01:00</milestone-due-on>
  <milestone-id type="integer">41987</milestone-id>
  <number type="integer">2927</number>
  <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
  <priority type="integer">8</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>action_controller</tag>
  <title>filter_parameter_logging fails with scalar values in an array</title>
  <updated-at type="datetime">2009-07-22T22:35:43+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">8</version>
  <user-name>Repository</user-name>
  <creator-name>Cody Fauser</creator-name>
  <assigned-user-name>Michael Koziarski</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
  <milestone-title>2.3.4</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>filter_parameter_logging was enhanced to correctly filter within array params in http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e4f77bb4b71.

This patch has a slight issue, which is that it fails when the values within the array are not hashes. This patch fixes the issue.</original-body>
  <latest-body>filter_parameter_logging was enhanced to correctly filter within array params in http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e4f77bb4b71.

This patch has a slight issue, which is that it fails when the values within the array are not hashes. This patch fixes the issue.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;filter_parameter_logging was enhanced to correctly filter within
array params in &lt;a href=&quot;http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e4f77bb4b71.%3C/p&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&amp;gt;&lt;/p&gt;
&lt;p&gt;This patch has a slight issue, which is that it fails when the
values within the array are not hashes. This patch fixes the
issue.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>filter_parameter_logging was enhanced to correctly filter within array params in http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e4f77bb4b71.

This patch has a slight issue, which is that it fails when the values within the array are not hashes. This patch fixes the issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;filter_parameter_logging was enhanced to correctly filter within
array params in &lt;a href=
&quot;http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e4f77bb4b71&quot;&gt;
http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e...&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This patch has a slight issue, which is that it fails when the
values within the array are not hashes. This patch fixes the
issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-20T21:00:15+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-20T21:00:18+01:00</updated-at>
      <user-id type="integer">4642</user-id>
      <version type="integer">1</version>
      <user-name>Cody Fauser</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Targeting 2.3.4 for this</body>
      <body-html>&lt;div&gt;&lt;p&gt;Targeting 2.3.4 for this&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-20T22:53:20+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-20T23:39:37+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">2</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Slightly better patch that allows for nested arrays and hashes. It also includes tests that fail.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Slightly better patch that allows for nested arrays and hashes.
It also includes tests that fail.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-20T22:59:18+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-20T23:40:38+01:00</updated-at>
      <user-id type="integer">12206</user-id>
      <version type="integer">3</version>
      <user-name>Sebastian Delmont</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Technically, it fails when the values within the array are not enumerable.

The error didn't surface during testing because param values are always strings under normal conditions.

Only when testing controllers with params including arrays of integers (for example) you run into this issue.

A quick workaround is to convert to strings any non-string parameters in your tests.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Technically, it fails when the values within the array are not
enumerable.&lt;/p&gt;
&lt;p&gt;The error didn't surface during testing because param values are
always strings under normal conditions.&lt;/p&gt;
&lt;p&gt;Only when testing controllers with params including arrays of
integers (for example) you run into this issue.&lt;/p&gt;
&lt;p&gt;A quick workaround is to convert to strings any non-string
parameters in your tests.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-20T23:08:13+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-20T23:41:45+01:00</updated-at>
      <user-id type="integer">12206</user-id>
      <version type="integer">4</version>
      <user-name>Sebastian Delmont</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>The same here. This issue blocks me from upgrading to Rails 2.3.3.

With Rails 2.3.3 I have more than 10 failing tests.
I confirm that the bug has been introduced with http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e4f77bb4b71. Reverting the commit causes the tests to pass again.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The same here. This issue blocks me from upgrading to Rails
2.3.3.&lt;/p&gt;
&lt;p&gt;With Rails 2.3.3 I have more than 10 failing tests.&lt;br&gt;
I confirm that the bug has been introduced with &lt;a href=
&quot;http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e4f77bb4b71&quot;&gt;
http://github.com/rails/rails/commit/9407f6e9a428b37517fdd779eac15e...&lt;/a&gt;.
Reverting the commit causes the tests to pass again.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-21T15:12:00+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-21T15:12:02+01:00</updated-at>
      <user-id type="integer">27932</user-id>
      <version type="integer">5</version>
      <user-name>Simone Carletti</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Simone, does this patch fix your problem also?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Simone, does this patch fix your problem also?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-21T22:40:29+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-21T22:40:30+01:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">6</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Hi Michael,
with the second path my tests passes again.

I've got a couple of failure compared with Rails 2.3.2, but they don't seem to be related to this specific issue but with more probability to an incompatible GEM. That said, I'm confident to confirm Sebastian's patch successfully fixes the bugfix.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Michael,&lt;br&gt;
with the second path my tests passes again.&lt;/p&gt;
&lt;p&gt;I've got a couple of failure compared with Rails 2.3.2, but they
don't seem to be related to this specific issue but with more
probability to an incompatible GEM. That said, I'm confident to
confirm Sebastian's patch successfully fixes the bugfix.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-07-21T23:29:48+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-21T23:29:53+01:00</updated-at>
      <user-id type="integer">27932</user-id>
      <version type="integer">7</version>
      <user-name>Simone Carletti</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [ead5d88bf178b8a32d151747a42df2aafa57eeaa]) Fix filter_parameter_logging of non-hash values within array params

Signed-off-by: Michael Koziarski &lt;michael@koziarski.com&gt;
[#2927 state:committed]
http://github.com/rails/rails/commit/ead5d88bf178b8a32d151747a42df2aafa57eeaa</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/ead5d88bf178b8a32d151747a42df2aafa57eeaa&quot;
title=
&quot;Changeset [ead5d88bf178b8a32d151747a42df2aafa57eeaa]&quot;&gt;[ead5d88bf178b8a32d151747a42df2aafa57eeaa]&lt;/a&gt;)
Fix filter_parameter_logging of non-hash values within array
params&lt;/p&gt;
&lt;p&gt;Signed-off-by: Michael Koziarski &lt;a href=
&quot;mailto:michael@koziarski.com&quot;&gt;michael@koziarski.com&lt;/a&gt;&lt;br&gt;
[&lt;a href=&quot;/projects/8994/tickets/2927&quot; title=
&quot;Ticket #2927&quot;&gt;#2927&lt;/a&gt; state:committed] &lt;a href=
&quot;http://github.com/rails/rails/commit/ead5d88bf178b8a32d151747a42df2aafa57eeaa&quot;&gt;
http://github.com/rails/rails/commit/ead5d88bf178b8a32d151747a42df2...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-07-22T22:35:42+01:00</created-at>
      <creator-id type="integer">4642</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">41987</milestone-id>
      <number type="integer">2927</number>
      <permalink>filter_parameter_logging-fails-with-scalar-values-in-an-array</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>action_controller</tag>
      <title>filter_parameter_logging fails with scalar values in an array</title>
      <updated-at type="datetime">2009-07-22T22:35:43+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">8</version>
      <user-name>Repository</user-name>
      <creator-name>Cody Fauser</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2927</url>
      <milestone-title>2.3.4</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>c00c79484c27fd2347c867ec5bfec686047f990c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-07-20T21:00:16+01:00</created-at>
      <filename>0001-Fix-filter_parameter_logging-of-non-hash-values-with.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">225160</id>
      <size type="integer">2161</size>
      <uploader-id type="integer">4642</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/225160/0001-Fix-filter_parameter_logging-of-non-hash-values-with.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>cf1e771e2249e3495159c2f0ff8eb18b2d4bcf62</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-07-20T22:59:18+01:00</created-at>
      <filename>Fix-filter_parameter-arrays-and-hashes.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">225248</id>
      <size type="integer">2184</size>
      <uploader-id type="integer">12206</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/225248/Fix-filter_parameter-arrays-and-hashes.patch</url>
    </attachment>
  </attachments>
</ticket>
