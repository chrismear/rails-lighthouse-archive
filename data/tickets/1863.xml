<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-02-03T23:26:49+00:00</created-at>
  <creator-id type="integer">18882</creator-id>
  <milestone-due-on type="datetime">2009-01-31T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1863</number>
  <permalink>check_box-doesnt-work-with-nested-forms</permalink>
  <priority type="integer">51</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>check_box nested</tag>
  <title>check_box doesn't work with nested forms</title>
  <updated-at type="datetime">2009-04-16T16:16:59+01:00</updated-at>
  <user-id type="integer">48586</user-id>
  <version type="integer">15</version>
  <user-name>Soph</user-name>
  <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
  <priority-name nil="true"></priority-name>
  <original-body>When using check_box in a nested form, the value that gets passed to the controller is always the value of the check_box's hidden field. Even if the checkbox is selected, it will not pass the appropriate value.</original-body>
  <latest-body>When using check_box in a nested form, the value that gets passed to the controller is always the value of the check_box's hidden field. Even if the checkbox is selected, it will not pass the appropriate value.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When using check_box in a nested form, the value that gets
passed to the controller is always the value of the check_box's
hidden field. Even if the checkbox is selected, it will not pass
the appropriate value.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When using check_box in a nested form, the value that gets passed to the controller is always the value of the check_box's hidden field. Even if the checkbox is selected, it will not pass the appropriate value.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When using check_box in a nested form, the value that gets
passed to the controller is always the value of the check_box's
hidden field. Even if the checkbox is selected, it will not pass
the appropriate value.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-03T23:26:49+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-03T23:26:54+00:00</updated-at>
      <user-id type="integer">18882</user-id>
      <version type="integer">1</version>
      <user-name>ronin-18882 (at lighthouseapp)</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Update:

the parameters parse correctly when using :get but not :put</body>
      <body-html>&lt;div&gt;&lt;p&gt;Update:&lt;/p&gt;
&lt;p&gt;the parameters parse correctly when using :get but not :put&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-03T23:45:17+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-03T23:45:22+00:00</updated-at>
      <user-id type="integer">18882</user-id>
      <version type="integer">2</version>
      <user-name>ronin-18882 (at lighthouseapp)</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Could you please provide some details; code/log etc.

Because in my example it works perfectly: http://github.com/alloy/complex-form-examples/blob/a234fde4419836f277d7e340657f1d8418911d68/app/views/projects/_form.html.erb</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you please provide some details; code/log etc.&lt;/p&gt;
&lt;p&gt;Because in my example it works perfectly: &lt;a href=&quot;http://github.com/alloy/complex-form-examples/blob/a234fde4419836f277d7e340657f1d8418911d68/app/views/projects/_form.html.erb&quot;&gt;
http://github.com/alloy/complex-...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-04T08:39:55+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-04T08:39:57+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">3</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Could you indicate which version of Rails you are using? Because I want to make sure we don't confuse the addition of NestedAttributes to 2.3RC1 with this issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Could you indicate which version of Rails you are using? Because
I want to make sure we don't confuse the addition of
NestedAttributes to 2.3RC1 with this issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-06T10:51:39+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-06T10:51:43+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">4</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have the same situation in Rails 2.3 RC1

form.check_box :agree 

creates an input type=&quot;checkox&quot; and hidden input with value 0, here are the http headers:

-----------------------------21129738941962649666904118542
Content-Disposition: form-data; name=&quot;appl[agree]&quot;

1
-----------------------------21129738941962649666904118542
Content-Disposition: form-data; name=&quot;appl[agree]&quot;

0

first one is valid (from the checkbox) and the second isn't... and in params I do always get the value 0.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have the same situation in Rails 2.3 RC1&lt;/p&gt;
&lt;p&gt;form.check_box :agree&lt;/p&gt;
&lt;p&gt;creates an input type=&quot;checkox&quot; and hidden input with value 0,
here are the http headers:&lt;/p&gt;
&lt;p&gt;-----------------------------21129738941962649666904118542
Content-Disposition: form-data; name=&quot;appl[agree]&quot;&lt;/p&gt;
&lt;p&gt;1 -----------------------------21129738941962649666904118542
Content-Disposition: form-data; name=&quot;appl[agree]&quot;&lt;/p&gt;
&lt;p&gt;0&lt;/p&gt;
&lt;p&gt;first one is valid (from the checkbox) and the second isn't...
and in params I do always get the value 0.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-06T15:08:41+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-06T15:08:44+00:00</updated-at>
      <user-id type="integer">26415</user-id>
      <version type="integer">5</version>
      <user-name>Bartosz Pietrzak</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>My question is actually if this has to do with NestedAttributes which was added in 2.3RC1 or that the author is talking about nested attributes in older versions of Rails.</body>
      <body-html>&lt;div&gt;&lt;p&gt;My question is actually if this has to do with NestedAttributes
which was added in 2.3RC1 or that the author is talking about
nested attributes in older versions of Rails.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-06T15:41:15+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-06T15:41:16+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">6</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Yes. This is in reference to 2.3RC1

I believe I've gotten closer to solving the problem. This only occurs when posting a form with :multipart =&gt; true

Therefore, I believe there is some inconsistency in the way that rack parses input parameters when reading data from a multipart form. The hash that is returned has the wrong values when it is returned from rack, even before it hit the parser in rails.

Not sure if this should be reported with the rack guys or if it can be handled here.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yes. This is in reference to 2.3RC1&lt;/p&gt;
&lt;p&gt;I believe I've gotten closer to solving the problem. This only
occurs when posting a form with :multipart =&amp;gt; true&lt;/p&gt;
&lt;p&gt;Therefore, I believe there is some inconsistency in the way that
rack parses input parameters when reading data from a multipart
form. The hash that is returned has the wrong values when it is
returned from rack, even before it hit the parser in rails.&lt;/p&gt;
&lt;p&gt;Not sure if this should be reported with the rack guys or if it
can be handled here.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-06T16:39:31+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-06T16:39:35+00:00</updated-at>
      <user-id type="integer">18882</user-id>
      <version type="integer">7</version>
      <user-name>ronin-18882 (at lighthouseapp)</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-06T16:48:58+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-06T16:49:04+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">8</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-07T04:48:49+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-07T04:48:51+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">9</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Just bundled Rack master with the its params parsing stuff. Can you please test against that. Then we can determine if its something that needs to be patched against Racks parser or our extensions to it.

Also unit tests would be much appreciated too :)

http://github.com/rails/rails/commit/2277fbe</body>
      <body-html>&lt;div&gt;&lt;p&gt;Just bundled Rack master with the its params parsing stuff. Can
you please test against that. Then we can determine if its
something that needs to be patched against Racks parser or our
extensions to it.&lt;/p&gt;
&lt;p&gt;Also unit tests would be much appreciated too :)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/rails/rails/commit/2277fbe&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-07T06:11:06+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-07T06:11:09+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">10</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm assuming this is related, but I'm not sure.

If the checkbox isn't select I get the correct value from the hidden field. Otherwise I get both values as an array.

This happens for both regular forms and nested forms.

Selected checkbox returns these params:
  &quot;available&quot;=&gt;[&quot;1&quot;, &quot;0&quot;]
Not selected checkbox return these params:
  &quot;available&quot;=&gt;&quot;0&quot;

I'm using the current: rake rails:freeze:edge

Using 2.2.2 gives me the correct params: 
&quot;available&quot;=&gt;&quot;1&quot;</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm assuming this is related, but I'm not sure.&lt;/p&gt;
&lt;p&gt;If the checkbox isn't select I get the correct value from the
hidden field. Otherwise I get both values as an array.&lt;/p&gt;
&lt;p&gt;This happens for both regular forms and nested forms.&lt;/p&gt;
&lt;p&gt;Selected checkbox returns these params: &quot;available&quot;=&amp;gt;[&quot;1&quot;,
&quot;0&quot;] Not selected checkbox return these params:
&quot;available&quot;=&amp;gt;&quot;0&quot;&lt;/p&gt;
&lt;p&gt;I'm using the current: rake rails:freeze:edge&lt;/p&gt;
&lt;p&gt;Using 2.2.2 gives me the correct params: &quot;available&quot;=&amp;gt;&quot;1&quot;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-10T18:25:20+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-10T18:25:20+00:00</updated-at>
      <user-id type="integer">46930</user-id>
      <version type="integer">11</version>
      <user-name>Ren&#233; Rask</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [f400209084fabb00e18c3325e1933f4543fce94c]) Move checkbox hidden field before the actual checkbox so the actual value doesn't get clobbered [#1863 state:resolved]
http://github.com/rails/rails/commit/f400209084fabb00e18c3325e1933f4543fce94c</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [f400209084fabb00e18c3325e1933f4543fce94c]) Move checkbox
hidden field before the actual checkbox so the actual value doesn't
get clobbered [&lt;a href=&quot;/projects/8994/tickets/1863&quot; title=&quot;Ticket #1863&quot;&gt;#1863&lt;/a&gt; state:resolved] &lt;a href=&quot;http://github.com/rails/rails/commit/f400209084fabb00e18c3325e1933f4543fce94c&quot;&gt;
http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-10T19:19:55+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-10T19:19:56+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">12</version>
      <user-name>Repository</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue is still huge. 2.3 blocker.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue is still huge. 2.3 blocker.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-12T17:59:31+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- 
:state: resolved
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-12T17:59:33+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">13</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Fixed in Rack.

http://github.com/rack/rack/commit/5c00dd698edb953b4bee432fa12a20ba69a067c1</body>
      <body-html>&lt;div&gt;&lt;p&gt;Fixed in Rack.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/rack/rack/commit/5c00dd698edb953b4bee432fa12a20ba69a067c1&quot;&gt;
http://github.com/rack/rack/comm...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-15T00:17:04+00:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-02-15T00:17:08+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">14</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I hope it is ok to add this to this ticket, but it looks like the best place for me.

According to the Rails-API-rdoc: 
http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#M001580

&quot;To prevent this the helper generates a hidden field with the same name as the checkbox after the very check box. So, the client either sends only the hidden field (representing the check box is unchecked), or both fields. Since the HTML specification says key/value pairs have to be sent in the same order they appear in the form and Rails parameters extraction always gets the first occurrence of any given key, that works in ordinary forms.&quot;

If i get everything right, with the changes in this ticket rails now uses the last occurrence of any given key, or otherwise putting the hidden box before the checkbox wouldn't work.
I wonder if there are other places where this could raise problems? And maybe the rdocs should be changed. &quot;first&quot; -&gt; &quot;last&quot;.
We run into this, when some of our tests failed after upgrading to 2.3.2. We used find_tag and checked for the first occurrence, since this is now the hidden tag, testing for &quot;checked&quot; and &quot;disabled&quot; failed.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I hope it is ok to add this to this ticket, but it looks like
the best place for me.&lt;/p&gt;
&lt;p&gt;According to the Rails-API-rdoc: &lt;a href=&quot;http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#M001580&quot;&gt;
http://api.rubyonrails.org/class...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&quot;To prevent this the helper generates a hidden field with the
same name as the checkbox after the very check box. So, the client
either sends only the hidden field (representing the check box is
unchecked), or both fields. Since the HTML specification says
key/value pairs have to be sent in the same order they appear in
the form and Rails parameters extraction always gets the first
occurrence of any given key, that works in ordinary forms.&quot;&lt;/p&gt;
&lt;p&gt;If i get everything right, with the changes in this ticket rails
now uses the last occurrence of any given key, or otherwise putting
the hidden box before the checkbox wouldn't work. I wonder if there
are other places where this could raise problems? And maybe the
rdocs should be changed. &quot;first&quot; -&amp;gt; &quot;last&quot;. We run into this,
when some of our tests failed after upgrading to 2.3.2. We used
find_tag and checked for the first occurrence, since this is now
the hidden tag, testing for &quot;checked&quot; and &quot;disabled&quot; failed.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-04-16T16:16:57+01:00</created-at>
      <creator-id type="integer">18882</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1863</number>
      <permalink>check_box-doesnt-work-with-nested-forms</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>check_box nested</tag>
      <title>check_box doesn't work with nested forms</title>
      <updated-at type="datetime">2009-04-16T16:16:59+01:00</updated-at>
      <user-id type="integer">48586</user-id>
      <version type="integer">15</version>
      <user-name>Soph</user-name>
      <creator-name>ronin-18882 (at lighthouseapp)</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1863</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
</ticket>
