<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-04-20T13:37:38+01:00</created-at>
  <creator-id type="integer">18474</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2527</number>
  <permalink>time-columns-are-not-zone-aware</permalink>
  <priority type="integer">1671</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag>2.3.2 active_record bug in_time_zone time zone</tag>
  <title>Time columns are not zone aware</title>
  <updated-at type="datetime">2009-04-22T15:38:29+01:00</updated-at>
  <user-id type="integer">15783</user-id>
  <version type="integer">6</version>
  <user-name>Geoff Buesing</user-name>
  <creator-name>Justin Mazzi</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2527</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>#1095 seems to be the same issue. 

Time columns do not seem to be zone aware. I am storing a schedule and I want to show that time in the users chosen time zone. Changing the time zone with Time.zone does not affect the output of the time. However, if you call it with column_name.in_time_zone, it does work.</original-body>
  <latest-body>#1095 seems to be the same issue. 

Time columns do not seem to be zone aware. I am storing a schedule and I want to show that time in the users chosen time zone. Changing the time zone with Time.zone does not affect the output of the time. However, if you call it with column_name.in_time_zone, it does work.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;/projects/8994/tickets/1095&quot; title=&quot;Ticket #1095&quot;&gt;#1095&lt;/a&gt; seems to be the same issue.&lt;/p&gt;
&lt;p&gt;Time columns do not seem to be zone aware. I am storing a
schedule and I want to show that time in the users chosen time
zone. Changing the time zone with Time.zone does not affect the
output of the time. However, if you call it with
column_name.in_time_zone, it does work.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>#1095 seems to be the same issue. 

Time columns do not seem to be zone aware. I am storing a schedule and I want to show that time in the users chosen time zone. Changing the time zone with Time.zone does not affect the output of the time. However, if you call it with column_name.in_time_zone, it does work.</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;/projects/8994/tickets/1095&quot; title=&quot;Ticket #1095&quot;&gt;#1095&lt;/a&gt; seems to be the same issue.&lt;/p&gt;
&lt;p&gt;Time columns do not seem to be zone aware. I am storing a
schedule and I want to show that time in the users chosen time
zone. Changing the time zone with Time.zone does not affect the
output of the time. However, if you call it with
column_name.in_time_zone, it does work.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-20T13:37:38+01:00</created-at>
      <creator-id type="integer">18474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2527</number>
      <permalink>time-columns-are-not-zone-aware</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 in_time_zone time zone</tag>
      <title>Time columns are not zone aware</title>
      <updated-at type="datetime">2009-04-20T13:37:40+01:00</updated-at>
      <user-id type="integer">18474</user-id>
      <version type="integer">1</version>
      <user-name>Justin Mazzi</user-name>
      <creator-name>Justin Mazzi</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2527</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-20T13:37:53+01:00</created-at>
      <creator-id type="integer">18474</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 in_time_zone time zone
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2527</number>
      <permalink>time-columns-are-not-zone-aware</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 active_record in_time_zone time zone</tag>
      <title>Time columns are not zone aware</title>
      <updated-at type="datetime">2009-04-20T13:37:56+01:00</updated-at>
      <user-id type="integer">18474</user-id>
      <version type="integer">2</version>
      <user-name>Justin Mazzi</user-name>
      <creator-name>Justin Mazzi</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2527</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-20T13:38:08+01:00</created-at>
      <creator-id type="integer">18474</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 active_record in_time_zone time zone
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2527</number>
      <permalink>time-columns-are-not-zone-aware</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 active_record bug in_time_zone time zone</tag>
      <title>Time columns are not zone aware</title>
      <updated-at type="datetime">2009-04-20T13:38:13+01:00</updated-at>
      <user-id type="integer">18474</user-id>
      <version type="integer">3</version>
      <user-name>Justin Mazzi</user-name>
      <creator-name>Justin Mazzi</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2527</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I think this is more of a bug in your Rails application, not Rails.

Do you have `config.active_record.time_zone` set in _config/environment.rb_? If that is set and Time.zone is set to the user's timezone, then any time retrieved from the database should be relative to that user. Take this example:

    &gt;&gt; Topic.first.created_at
    =&gt; Sun, 19 Apr 2009 11:17:35 UTC +00:00
    &gt;&gt; Time.zone = &quot;Brisbane&quot;
    =&gt; &quot;Brisbane&quot;
    &gt;&gt; Topic.first.created_at
    =&gt; Sun, 19 Apr 2009 21:17:35 EST +10:00</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think this is more of a bug in your Rails application, not
Rails.&lt;/p&gt;
&lt;p&gt;Do you have &lt;code&gt;config.active_record.time_zone&lt;/code&gt; set in
&lt;em&gt;config/environment.rb&lt;/em&gt;? If that is set and Time.zone is set
to the user's timezone, then any time retrieved from the database
should be relative to that user. Take this example:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;gt;&amp;gt; Topic.first.created_at
=&amp;gt; Sun, 19 Apr 2009 11:17:35 UTC +00:00
&amp;gt;&amp;gt; Time.zone = &quot;Brisbane&quot;
=&amp;gt; &quot;Brisbane&quot;
&amp;gt;&amp;gt; Topic.first.created_at
=&amp;gt; Sun, 19 Apr 2009 21:17:35 EST +10:00
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T00:31:03+01:00</created-at>
      <creator-id type="integer">18474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2527</number>
      <permalink>time-columns-are-not-zone-aware</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 active_record bug in_time_zone time zone</tag>
      <title>Time columns are not zone aware</title>
      <updated-at type="datetime">2009-04-21T00:31:08+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">4</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>Justin Mazzi</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2527</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Yes, this works fine with a datetime, but not with a time (unless you call it with in_time_zone)


@@@ ruby
create_table :schedules do |t|
  t.time :start_time
end

&gt;&gt; Schedule.first.start_time
=&gt; Sat Jan 01 08:19:00 UTC 2000
&gt;&gt; Time.zone = &quot;Brisbane&quot;
=&gt; &quot;Brisbane&quot;
&gt;&gt; Schedule.first.start_time
=&gt; Sat Jan 01 08:19:00 UTC 2000
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yes, this works fine with a datetime, but not with a time
(unless you call it with in_time_zone)&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
create_table :schedules do |t|
  t.time :start_time
end

&amp;gt;&amp;gt; Schedule.first.start_time
=&amp;gt; Sat Jan 01 08:19:00 UTC 2000
&amp;gt;&amp;gt; Time.zone = &amp;quot;Brisbane&amp;quot;
=&amp;gt; &amp;quot;Brisbane&amp;quot;
&amp;gt;&amp;gt; Schedule.first.start_time
=&amp;gt; Sat Jan 01 08:19:00 UTC 2000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-21T01:41:09+01:00</created-at>
      <creator-id type="integer">18474</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2527</number>
      <permalink>time-columns-are-not-zone-aware</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 active_record bug in_time_zone time zone</tag>
      <title>Time columns are not zone aware</title>
      <updated-at type="datetime">2009-04-21T01:41:13+01:00</updated-at>
      <user-id type="integer">18474</user-id>
      <version type="integer">5</version>
      <user-name>Justin Mazzi</user-name>
      <creator-name>Justin Mazzi</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2527</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I assume you're talking about a sql :time (i.e., time-only) column, which AR returns as an instance of Time, with year, month and day set to Jan 1, 2000.

Rails doesn't do automatic time zone conversions on time-only columns, because there's not enough information to do so, given that the UTC offset changes depending upon the date. If we did do automatic time zone conversions, they would be for that time on Jan 1, 2000, which is probably not what you want.

So it's appropriate that you'll have to do a bit more fiddling to do the proper time zone conversions, since the rules will be app-specific.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I assume you're talking about a sql :time (i.e., time-only)
column, which AR returns as an instance of Time, with year, month
and day set to Jan 1, 2000.&lt;/p&gt;
&lt;p&gt;Rails doesn't do automatic time zone conversions on time-only
columns, because there's not enough information to do so, given
that the UTC offset changes depending upon the date. If we did do
automatic time zone conversions, they would be for that time on Jan
1, 2000, which is probably not what you want.&lt;/p&gt;
&lt;p&gt;So it's appropriate that you'll have to do a bit more fiddling
to do the proper time zone conversions, since the rules will be
app-specific.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-04-22T15:38:28+01:00</created-at>
      <creator-id type="integer">18474</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2527</number>
      <permalink>time-columns-are-not-zone-aware</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag>2.3.2 active_record bug in_time_zone time zone</tag>
      <title>Time columns are not zone aware</title>
      <updated-at type="datetime">2009-04-22T15:38:29+01:00</updated-at>
      <user-id type="integer">15783</user-id>
      <version type="integer">6</version>
      <user-name>Geoff Buesing</user-name>
      <creator-name>Justin Mazzi</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2527</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
