<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-04-15T15:45:30+01:00</created-at>
  <creator-id type="integer">47545</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">4405</number>
  <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>activemodel haml label</tag>
  <title>fields with errors do not get wrapped in fieldWithErrors </title>
  <updated-at type="datetime">2010-05-15T10:27:11+01:00</updated-at>
  <user-id type="integer">65556</user-id>
  <version type="integer">7</version>
  <user-name>Rizwan Reza</user-name>
  <creator-name>Mike (at coverallcrew)</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
  <priority-name>Low</priority-name>
  <original-body>ActiveModel form_for does not call field_error_proc when there is an error on the field.

input's work fine. Labels, select lists fail.

This results in labels not being highlighted.

Please note, when using ActiveRecord this does not appear to be an issue.</original-body>
  <latest-body>ActiveModel form_for does not call field_error_proc when there is an error on the field.

input's work fine. Labels, select lists fail.

This results in labels not being highlighted.

Please note, when using ActiveRecord this does not appear to be an issue.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;ActiveModel form_for does not call field_error_proc when there
is an error on the field.&lt;/p&gt;
&lt;p&gt;input's work fine. Labels, select lists fail.&lt;/p&gt;
&lt;p&gt;This results in labels not being highlighted.&lt;/p&gt;
&lt;p&gt;Please note, when using ActiveRecord this does not appear to be
an issue.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>ActiveModel form_for does not call field_error_proc when there is an error on the field.

input's work fine. Labels, select lists fail.

This results in labels not being highlighted.

Please note, when using ActiveRecord this does not appear to be an issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;ActiveModel form_for does not call field_error_proc when there
is an error on the field.&lt;/p&gt;
&lt;p&gt;input's work fine. Labels, select lists fail.&lt;/p&gt;
&lt;p&gt;This results in labels not being highlighted.&lt;/p&gt;
&lt;p&gt;Please note, when using ActiveRecord this does not appear to be
an issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-15T15:45:30+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4405</number>
      <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activemodel label</tag>
      <title>fields with errors do not get wrapped in fieldWithErrors </title>
      <updated-at type="datetime">2010-04-15T15:45:31+01:00</updated-at>
      <user-id type="integer">47545</user-id>
      <version type="integer">1</version>
      <user-name>Mike (at coverallcrew)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>After some hackery I found that adding label_tag to the array in the module: ActionView::Helpers::ActiveModelInstanceTag (/lib/actionview/helpers/active_model_helper) allowed the label errors to be highlighted.

Still cannot get select lists to be highlighted.</body>
      <body-html>&lt;div&gt;&lt;p&gt;After some hackery I found that adding label_tag to the array in
the module: ActionView::Helpers::ActiveModelInstanceTag
(/lib/actionview/helpers/active_model_helper) allowed the label
errors to be highlighted.&lt;/p&gt;
&lt;p&gt;Still cannot get select lists to be highlighted.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-15T17:13:17+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4405</number>
      <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activemodel label</tag>
      <title>fields with errors do not get wrapped in fieldWithErrors </title>
      <updated-at type="datetime">2010-04-15T17:13:20+01:00</updated-at>
      <user-id type="integer">47545</user-id>
      <version type="integer">2</version>
      <user-name>Mike (at coverallcrew)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Attached a patch that allows the label to be highlighted if there is a validation error.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached a patch that allows the label to be highlighted if
there is a validation error.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-15T17:46:37+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4405</number>
      <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activemodel label</tag>
      <title>fields with errors do not get wrapped in fieldWithErrors </title>
      <updated-at type="datetime">2010-04-15T17:46:44+01:00</updated-at>
      <user-id type="integer">47545</user-id>
      <version type="integer">3</version>
      <user-name>Mike (at coverallcrew)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm may be barking up the wrong tree here...

This error only seems to happen when HAML is in the picture. The reason I thought ActiveRecord was unaffected is because I was using erb.

Any Rails 3 + Haml gurus out there - finding someone who can fix this is going to be harder than finding the actual bug!</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm may be barking up the wrong tree here...&lt;/p&gt;
&lt;p&gt;This error only seems to happen when HAML is in the picture. The
reason I thought ActiveRecord was unaffected is because I was using
erb.&lt;/p&gt;
&lt;p&gt;Any Rails 3 + Haml gurus out there - finding someone who can fix
this is going to be harder than finding the actual bug!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-15T18:39:25+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activemodel label
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4405</number>
      <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activemodel haml label</tag>
      <title>fields with errors do not get wrapped in fieldWithErrors </title>
      <updated-at type="datetime">2010-04-15T18:39:26+01:00</updated-at>
      <user-id type="integer">47545</user-id>
      <version type="integer">4</version>
      <user-name>Mike (at coverallcrew)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>For what it's worth here is the patch with the Haml &quot;fix&quot;. I have a monkey patch in my code that does this. It seems that Haml is what needs fixin' Rails 3 works just fine for this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;For what it's worth here is the patch with the Haml &quot;fix&quot;. I
have a monkey patch in my code that does this. It seems that Haml
is what needs fixin' Rails 3 works just fine for this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-15T19:49:02+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4405</number>
      <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activemodel haml label</tag>
      <title>fields with errors do not get wrapped in fieldWithErrors </title>
      <updated-at type="datetime">2010-04-15T19:49:05+01:00</updated-at>
      <user-id type="integer">47545</user-id>
      <version type="integer">5</version>
      <user-name>Mike (at coverallcrew)</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Yes, this is an issue of HAML 2.2.23 -- 2.2.22 works as expected.
(Rails 2.3.5 here)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yes, this is an issue of HAML 2.2.23 -- 2.2.22 works as
expected.&lt;br&gt;
(Rails 2.3.5 here)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-04-16T10:18:58+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4405</number>
      <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activemodel haml label</tag>
      <title>fields with errors do not get wrapped in fieldWithErrors </title>
      <updated-at type="datetime">2010-04-16T10:19:01+01:00</updated-at>
      <user-id type="integer">95196</user-id>
      <version type="integer">6</version>
      <user-name>Foobear</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Mike, send a pull request after fixing the bug to nex3: http://github.com/nex3/haml

I'm closing this since this is not a Rails 3 issue. Reply if otherwise.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Mike, send a pull request after fixing the bug to nex3: &lt;a href=
&quot;http://github.com/nex3/haml&quot;&gt;http://github.com/nex3/haml&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I'm closing this since this is not a Rails 3 issue. Reply if
otherwise.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-05-15T10:27:10+01:00</created-at>
      <creator-id type="integer">47545</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4405</number>
      <permalink>fields-with-errors-do-not-get-wrapped-in-fieldwitherrors</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>activemodel haml label</tag>
      <title>fields with errors do not get wrapped in fieldWithErrors </title>
      <updated-at type="datetime">2010-05-15T10:27:11+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">7</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Mike (at coverallcrew)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4405</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>9c7c9ca88640b85d61aaf709a323b931f5844cf6</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-04-15T19:49:03+01:00</created-at>
      <filename>label_tag_error.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">484380</id>
      <size type="integer">1053</size>
      <uploader-id type="integer">47545</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/484380/label_tag_error.patch</url>
    </attachment>
  </attachments>
</ticket>
