<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-10-31T06:02:32+00:00</created-at>
  <creator-id type="integer">42916</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">3409</number>
  <permalink>content_for-and-fragment-caching</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>hold</state>
  <tag>caching content_for feature_request patch rails3</tag>
  <title>[PATCH]content_for and fragment caching</title>
  <updated-at type="datetime">2011-03-29T07:51:07+01:00</updated-at>
  <user-id type="integer">143300</user-id>
  <version type="integer">40</version>
  <user-name>StackNG</user-name>
  <creator-name>Greg Hazel</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>High</priority-name>
  <original-body>There are a lot of place where people talk about content_for and fragment caching being incompatible:

https://rails.lighthouseapp.com/projects/8994/tickets/1896-content_for-not-rendering-from-partials-in-layout
http://blog.innerewut.de/2009/5/8/fragement-caching-tip
http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#M001763

etc.

Since this seems to be a common gotcha, and it is entirely possible to support this feature, I'm proposing this as a feature request.

One solution would be to store content_for results in a list which gets serialized and stored in the fragment cache. Then when the fragment cache is read the items could be deserialized and content_for could be called for each as the cached data is appended to the buffer. The serialization format could be very simple (i.e. something length prefixed instead of escaped) to avoid a serious serialization penalty.

I'm volunteering to make a first pass at this, if someone will agree to accept it if it and the tests are up to par.</original-body>
  <latest-body>There are a lot of place where people talk about content_for and fragment caching being incompatible:

https://rails.lighthouseapp.com/projects/8994/tickets/1896-content_for-not-rendering-from-partials-in-layout
http://blog.innerewut.de/2009/5/8/fragement-caching-tip
http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#M001763

etc.

Since this seems to be a common gotcha, and it is entirely possible to support this feature, I'm proposing this as a feature request.

One solution would be to store content_for results in a list which gets serialized and stored in the fragment cache. Then when the fragment cache is read the items could be deserialized and content_for could be called for each as the cached data is appended to the buffer. The serialization format could be very simple (i.e. something length prefixed instead of escaped) to avoid a serious serialization penalty.

I'm volunteering to make a first pass at this, if someone will agree to accept it if it and the tests are up to par.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;There are a lot of place where people talk about content_for and
fragment caching being incompatible:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/1896-content_for-not-rendering-from-partials-in-layout&quot;&gt;
https://rails.lighthouseapp.com/projects/8994/tickets/1896-content_...&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://blog.innerewut.de/2009/5/8/fragement-caching-tip&quot;&gt;http://blog.innerewut.de/2009/5/8/fragement-caching-tip&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#M001763&quot;&gt;
http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;etc.&lt;/p&gt;
&lt;p&gt;Since this seems to be a common gotcha, and it is entirely
possible to support this feature, I'm proposing this as a feature
request.&lt;/p&gt;
&lt;p&gt;One solution would be to store content_for results in a list
which gets serialized and stored in the fragment cache. Then when
the fragment cache is read the items could be deserialized and
content_for could be called for each as the cached data is appended
to the buffer. The serialization format could be very simple (i.e.
something length prefixed instead of escaped) to avoid a serious
serialization penalty.&lt;/p&gt;
&lt;p&gt;I'm volunteering to make a first pass at this, if someone will
agree to accept it if it and the tests are up to par.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>There are a lot of places where people talk about content_for and fragment caching being incompatible:

https://rails.lighthouseapp.com/projects/8994/tickets/1896-content_for-not-rendering-from-partials-in-layout
http://blog.innerewut.de/2009/5/8/fragement-caching-tip
http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#M001763

etc.

Since this seems to be a common gotcha, and it is entirely possible to support this feature, I'm proposing this as a feature request.

One solution would be to store content_for results in a list which gets serialized and stored in the fragment cache. Then when the fragment cache is read the items could be deserialized and content_for could be called for each as the cached data is appended to the buffer. The serialization format could be very simple (i.e. something length prefixed instead of escaped, or with a large random delimiter) to avoid a serious serialization penalty.

I'm volunteering to make a first pass at this, if someone will agree to accept it if it and the tests are up to par.</body>
      <body-html>&lt;div&gt;&lt;p&gt;There are a lot of places where people talk about content_for
and fragment caching being incompatible:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/1896-content_for-not-rendering-from-partials-in-layout&quot;&gt;
https://rails.lighthouseapp.com/projects/8994/tickets/1896-content_...&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://blog.innerewut.de/2009/5/8/fragement-caching-tip&quot;&gt;http://blog.innerewut.de/2009/5/8/fragement-caching-tip&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#M001763&quot;&gt;
http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;etc.&lt;/p&gt;
&lt;p&gt;Since this seems to be a common gotcha, and it is entirely
possible to support this feature, I'm proposing this as a feature
request.&lt;/p&gt;
&lt;p&gt;One solution would be to store content_for results in a list
which gets serialized and stored in the fragment cache. Then when
the fragment cache is read the items could be deserialized and
content_for could be called for each as the cached data is appended
to the buffer. The serialization format could be very simple (i.e.
something length prefixed instead of escaped, or with a large
random delimiter) to avoid a serious serialization penalty.&lt;/p&gt;
&lt;p&gt;I'm volunteering to make a first pass at this, if someone will
agree to accept it if it and the tests are up to par.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-10-22T06:28:44+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request</tag>
      <title>content_for and fragment caching</title>
      <updated-at type="datetime">2009-10-23T11:29:17+01:00</updated-at>
      <user-id type="integer">42916</user-id>
      <version type="integer">1</version>
      <user-name>Greg Hazel</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>At my company, a simple `grep -R &quot;content_for&quot; app | wc -l` shows we have 86 places where we use `content_for`.  We would like to use action caching to improve our site performance while still retaining some dynamism, but unfortunately refactoring to remove our reliance on `content_for` is simply impractical.

So without further ado I introduce to you... action caching _AND_ fragment caching that both support content_for blocks!!  Tryout my patch and let me know if you have any success.  

I added tests for every piece of functionality I added, and I ran the tests for the files I changed.  Everything appears to be OK, but I couldn't get the full rails test suite passing even without my patch applied (rvm + ruby1.9.1 + pg + mysql = FAIL!).  But like I said, these other tests seem less applicable.  ActiveSupport had a bunch of warnings about i8ln and of cource ActiveRecord mysql + postgre wouldn't run.  Everything else seemed to be OK.</body>
      <body-html>&lt;div&gt;&lt;p&gt;At my company, a simple &lt;code&gt;grep -R &quot;content_for&quot; app | wc
-l&lt;/code&gt; shows we have 86 places where we use
&lt;code&gt;content_for&lt;/code&gt;. We would like to use action caching to
improve our site performance while still retaining some dynamism,
but unfortunately refactoring to remove our reliance on
&lt;code&gt;content_for&lt;/code&gt; is simply impractical.&lt;/p&gt;
&lt;p&gt;So without further ado I introduce to you... action caching
&lt;em&gt;AND&lt;/em&gt; fragment caching that both support content_for
blocks!! Tryout my patch and let me know if you have any
success.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;I added tests for every piece of functionality I added, and I
ran the tests for the files I changed. Everything appears to be OK,
but I couldn't get the full rails test suite passing even without
my patch applied (rvm + ruby1.9.1 + pg + mysql = FAIL!). But like I
said, these other tests seem less applicable. ActiveSupport had a
bunch of warnings about i8ln and of cource ActiveRecord mysql +
postgre wouldn't run. Everything else seemed to be OK.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-17T07:53:26+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: caching content_for feature_request
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-17T07:53:38+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">2</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Whoops that patch was for 3.0b1.  I can probably make a similar one for 2.3.6 without much trouble, but... don't try to apply this to 2.3.6.

Seems a little unfortunate that there is no obvious way to edit or remove my previous reply.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Whoops that patch was for 3.0b1. I can probably make a similar
one for 2.3.6 without much trouble, but... don't try to apply this
to 2.3.6.&lt;/p&gt;
&lt;p&gt;Seems a little unfortunate that there is no obvious way to edit
or remove my previous reply.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-17T07:59:40+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-17T07:59:42+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">3</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK maybe I should have let my mind simmer for awhile before I submitted that patch.  I just thought of a small problem with the way I implemented the fragment content_for caching, and a good way I could DRY up the code a little bit.  Stay tuned for a new patch in the next couple days...  I'll also take a look at implementing this for Rails 2.3.6.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK maybe I should have let my mind simmer for awhile before I
submitted that patch. I just thought of a small problem with the
way I implemented the fragment content_for caching, and a good way
I could DRY up the code a little bit. Stay tuned for a new patch in
the next couple days... I'll also take a look at implementing this
for Rails 2.3.6.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-17T16:06:54+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-17T16:06:56+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">4</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Whew!  OK I'm making progress.  I had a nightmarish merge because I (foolishly) started from the 3.0b1 tag when I was originally working on this, instead of starting from master.

I definitely made some major improvements over my previous attempt.  It works great and tests pass, but I think I can do better.  I'll sleep on it then post the new patch.  No point in rushing it I guess, especially considering I appear to be the only one interested in this patch.  ;)

Thanks,
Steve</body>
      <body-html>&lt;div&gt;&lt;p&gt;Whew! OK I'm making progress. I had a nightmarish merge because
I (foolishly) started from the 3.0b1 tag when I was originally
working on this, instead of starting from master.&lt;/p&gt;
&lt;p&gt;I definitely made some major improvements over my previous
attempt. It works great and tests pass, but I think I can do
better. I'll sleep on it then post the new patch. No point in
rushing it I guess, especially considering I appear to be the only
one interested in this patch. ;)&lt;/p&gt;
&lt;p&gt;Thanks,&lt;br&gt;
Steve&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-18T09:35:37+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-18T09:35:40+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">5</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm interested! :)

Take your time, though.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm interested! :)&lt;/p&gt;
&lt;p&gt;Take your time, though.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-18T15:57:08+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-18T15:57:22+00:00</updated-at>
      <user-id type="integer">42916</user-id>
      <version type="integer">6</version>
      <user-name>Greg Hazel</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK I have one failing test left.  The problem I'm trying to fight through seems to be that in the testing environment, `@controller.view_context` always brings back a `new` object, so trying to `assert content_for?(:foo)` will of course not work, as it's transitory and will vanish the next time you call `@controller.view_context`

I guess I'll look at moving my fragment_for test with content_for to the view tests, but right now it's looking fairly confounding.  Plus trying to patch Rails is like coding for a moving target, so it's proved an incredible time-sink: write the tests, writing the code to make them pass, rebase, make the tests pass again, rebase, make the tests pass again.... etc.  It's like I'm stuck in an infinite loop.  Even if I get them to pass and rebase again and everything still looks good and post a patch really quick, it will probably be almost immediately impossible to apply cleanly.

How do most people deal with this?</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK I have one failing test left. The problem I'm trying to fight
through seems to be that in the testing environment,
&lt;code&gt;@controller.view_context&lt;/code&gt; always brings back a
&lt;code&gt;new&lt;/code&gt; object, so trying to &lt;code&gt;assert
content_for?(:foo)&lt;/code&gt; will of course not work, as it's
transitory and will vanish the next time you call
&lt;code&gt;@controller.view_context&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I guess I'll look at moving my fragment_for test with
content_for to the view tests, but right now it's looking fairly
confounding. Plus trying to patch Rails is like coding for a moving
target, so it's proved an incredible time-sink: write the tests,
writing the code to make them pass, rebase, make the tests pass
again, rebase, make the tests pass again.... etc. It's like I'm
stuck in an infinite loop. Even if I get them to pass and rebase
again and everything still looks good and post a patch really
quick, it will probably be almost immediately impossible to apply
cleanly.&lt;/p&gt;
&lt;p&gt;How do most people deal with this?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-23T21:17:52+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-23T21:17:55+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">7</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK well maybe I was exaggerating a bit.  Anyway time will tell.  I finally got this working, albeit with a slightly shady test implementation (by memoizing view_context in the test controllers).

So this probably not the _best_ implementation that is possible, but it's the best implementation I could figure out in a first pass.  Here is the basic strategy:

##Action Caching &amp; Fragment Caching##
* Added a method `CaptureHelper#all_content_for` which returns a deep dup of @_content_for instance variable, with the :layout key deleted.
* If `caches_action` is called with `:layout =&gt; false`, grab `all_content_for`, dump it with Marshal, and cache it separately (using a key prepended with &quot;content_for/&quot; instead of &quot;views/&quot;).
* If `fragment_for` is called, we have to determine what content_for was added in the block that is being cached.  To do this, we grab `all_content_for` before we enter the block, then we grab `all_content_for` again after the block and diff the two hashes.  For any keys that appear in the last hash and the diff_hash, we sub out whatever was in the earlier value with empty string, and we are left with exactly what was added to @_content_for in the block.  We Marshal that and cache it separately.
* Whenever read_fragment is called, we attempt to look up the cached content_for and &quot;rehydrate&quot; it.  Ie, for each key in the Marshalled hash we pull out of the cache, we call content_for(key, value) in order to push that stuff back into the @_content_for variable.

I only ran the ActionPack tests, since that's all I touched and I didn't want to waste my time getting the pg and system_timer gems installed &amp; working properly on my dev box.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK well maybe I was exaggerating a bit. Anyway time will tell. I
finally got this working, albeit with a slightly shady test
implementation (by memoizing view_context in the test
controllers).&lt;/p&gt;
&lt;p&gt;So this probably not the &lt;em&gt;best&lt;/em&gt; implementation that is
possible, but it's the best implementation I could figure out in a
first pass. Here is the basic strategy:&lt;/p&gt;
&lt;h2&gt;Action Caching &amp;amp; Fragment Caching&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Added a method &lt;code&gt;CaptureHelper#all_content_for&lt;/code&gt; which
returns a deep dup of @_content_for instance variable, with the
:layout key deleted.&lt;/li&gt;
&lt;li&gt;If &lt;code&gt;caches_action&lt;/code&gt; is called with &lt;code&gt;:layout
=&amp;gt; false&lt;/code&gt;, grab &lt;code&gt;all_content_for&lt;/code&gt;, dump it with
Marshal, and cache it separately (using a key prepended with
&quot;content_for/&quot; instead of &quot;views/&quot;).&lt;/li&gt;
&lt;li&gt;If &lt;code&gt;fragment_for&lt;/code&gt; is called, we have to determine
what content_for was added in the block that is being cached. To do
this, we grab &lt;code&gt;all_content_for&lt;/code&gt; before we enter the
block, then we grab &lt;code&gt;all_content_for&lt;/code&gt; again after the
block and diff the two hashes. For any keys that appear in the last
hash and the diff_hash, we sub out whatever was in the earlier
value with empty string, and we are left with exactly what was
added to @_content_for in the block. We Marshal that and cache it
separately.&lt;/li&gt;
&lt;li&gt;Whenever read_fragment is called, we attempt to look up the
cached content_for and &quot;rehydrate&quot; it. Ie, for each key in the
Marshalled hash we pull out of the cache, we call content_for(key,
value) in order to push that stuff back into the @_content_for
variable.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I only ran the ActionPack tests, since that's all I touched and
I didn't want to waste my time getting the pg and system_timer gems
installed &amp;amp; working properly on my dev box.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-23T22:53:13+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- 
:title: content_for and fragment caching
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-23T22:53:20+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">8</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Also since I (foolishly) started my work on the 3.0b1 tag, it will probably be fairly easy to backport this enhancement to Rails 2.x.  I'll work on that next since I don't see my company taking the time and effort to upgrade from 2.3.2 to 3 anytime soon.

I had to start over from scratch with master as my starting point in order to get the patch working properly, so by now I know this area of the Rails code fairly well.  ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Also since I (foolishly) started my work on the 3.0b1 tag, it
will probably be fairly easy to backport this enhancement to Rails
2.x. I'll work on that next since I don't see my company taking the
time and effort to upgrade from 2.3.2 to 3 anytime soon.&lt;/p&gt;
&lt;p&gt;I had to start over from scratch with master as my starting
point in order to get the patch working properly, so by now I know
this area of the Rails code fairly well. ;)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-24T02:24:45+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>caching content_for feature_request patch</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-24T02:24:49+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">9</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-27T07:52:35+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: caching content_for feature_request patch
:state: new
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-27T07:52:38+00:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">10</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK I've backported this to 2.3.2. Should I post that patch here or keep it off to avoid confusion?  Does anyone other than me want it for 2.3.2?</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK I've backported this to 2.3.2. Should I post that patch here
or keep it off to avoid confusion? Does anyone other than me want
it for 2.3.2?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-29T18:41:47+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-29T18:41:49+01:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">11</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@steve I reviewed the patch and would like to chat with you. Are you on IRC or GTalk?</body>
      <body-html>&lt;div&gt;&lt;p&gt;@steve I reviewed the patch and would like to chat with you. Are
you on IRC or GTalk?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-29T19:25:08+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-29T19:25:13+01:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">12</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm putting this ticket on hold while I work with Steve on improving this patch. It's definitely important and I hope to get it in before 3.0 final.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm putting this ticket on hold while I work with Steve on
improving this patch. It's definitely important and I hope to get
it in before 3.0 final.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-03-29T21:48:47+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-03-29T21:48:49+01:00</updated-at>
      <user-id type="integer">12714</user-id>
      <version type="integer">13</version>
      <user-name>Yehuda Katz (wycats)</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>OK!  I was foolish enough to tell Yehuda that I was &quot;just about done&quot; like four days ago.  Then I promptly fell into a super amateurish rabbit-hole.  Anyway I finally came out the other end with this new, improved, updated patch for your consideration!

### Caching content_for ###
* Assumes that the cache_store can store arbitrary ruby objects (or at least hashes with defaults defined).
  * IF this is not true, it will be necessary for &quot;string-only&quot; cache_stores to be enhanced to transparently serialize and de-serialize objects when they are written and read.
* For the &quot;standard case&quot; (ie, caching with content_for being unused), this will incur merely an extra `if` statement for action-caching and an extra block evaluation &amp; new Hash being created and then destroyed in the case of fragment caching.
* Fragment caching is much cleaner than my previous patch
  * content_for keeps an additional Hash while it is evaluating the block to be cached, which is then cached in addition to the content itself. The pointer to the additional Hash is assigned to `nil` at the end of the block execution.
* Cache-store issues with possible falloff of related keys has been mitigated, relative to my previous patch.
  * Yehuda identified a potential problem with the fact that content_for was being stored separately from the content itself. This could cause the problem where the content itself still exists, so the associated block or action won't be re-executed, but the associated cached content_for could have been pushed out of the cache-store.
  * This has been solved by storing the content and the content_for stuff together in a hash.

### Other thoughts ###

* It would be nice if the tests weren't so implementation specific, but rather tested the _essence_ of the functionality.  I tried to make them less brittle but failed.
* To that end, re-writing all the tests in rspec would be (IMHO) a brilliant improvement and pave the way for better tests in the future and more flexibility in implementation.  I understand that this would be an enormous undertaking, but I figure that with like 10 people in the community working on different pieces, we could knock it out in a reasonable amount of time.  Maybe we can coordinate something at RailsConf...</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK! I was foolish enough to tell Yehuda that I was &quot;just about
done&quot; like four days ago. Then I promptly fell into a super
amateurish rabbit-hole. Anyway I finally came out the other end
with this new, improved, updated patch for your consideration!&lt;/p&gt;
&lt;h3&gt;Caching content_for&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Assumes that the cache_store can store arbitrary ruby objects
(or at least hashes with defaults defined).
&lt;ul&gt;
&lt;li&gt;IF this is not true, it will be necessary for &quot;string-only&quot;
cache_stores to be enhanced to transparently serialize and
de-serialize objects when they are written and read.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;For the &quot;standard case&quot; (ie, caching with content_for being
unused), this will incur merely an extra &lt;code&gt;if&lt;/code&gt; statement
for action-caching and an extra block evaluation &amp;amp; new Hash
being created and then destroyed in the case of fragment
caching.&lt;/li&gt;
&lt;li&gt;Fragment caching is much cleaner than my previous patch
&lt;ul&gt;
&lt;li&gt;content_for keeps an additional Hash while it is evaluating the
block to be cached, which is then cached in addition to the content
itself. The pointer to the additional Hash is assigned to
&lt;code&gt;nil&lt;/code&gt; at the end of the block execution.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Cache-store issues with possible falloff of related keys has
been mitigated, relative to my previous patch.
&lt;ul&gt;
&lt;li&gt;Yehuda identified a potential problem with the fact that
content_for was being stored separately from the content itself.
This could cause the problem where the content itself still exists,
so the associated block or action won't be re-executed, but the
associated cached content_for could have been pushed out of the
cache-store.&lt;/li&gt;
&lt;li&gt;This has been solved by storing the content and the content_for
stuff together in a hash.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Other thoughts&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;It would be nice if the tests weren't so implementation
specific, but rather tested the &lt;em&gt;essence&lt;/em&gt; of the
functionality. I tried to make them less brittle but failed.&lt;/li&gt;
&lt;li&gt;To that end, re-writing all the tests in rspec would be (IMHO)
a brilliant improvement and pave the way for better tests in the
future and more flexibility in implementation. I understand that
this would be an enormous undertaking, but I figure that with like
10 people in the community working on different pieces, we could
knock it out in a reasonable amount of time. Maybe we can
coordinate something at RailsConf...&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-06T08:24:23+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-04-06T08:24:29+01:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">14</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I don't think this is a high priority for anyone, but just in case people are wondering about the status of this -- here's an update:

I made my tests pass by working around a bug (controller.view_context is a new instance of the view_context every time you call it, so I memoized it in my tests).  It seems to me that a simple fix for this would be:
@@@ ruby
# actionpack/lib/abstract_controller/rendering.rb: line 84
def view_context
  @template ||= view_context_class.new(lookup_context, view_assigns, self)
end
@@@

A little bonus would be that if legacy Rails apps used the @template instance variable, this might still work for them (assuming that view_context had been called prior to them trying to use it, of course).  I'm _guessing_ that there's some reason this wouldn't be ideal, but I'm not sure what that reason is...

I did a spot check of the cache stores implemented, and I found that they appear to support arbitrary Ruby objects (by utilizing Marshal), so that should be OK.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I don't think this is a high priority for anyone, but just in
case people are wondering about the status of this -- here's an
update:&lt;/p&gt;
&lt;p&gt;I made my tests pass by working around a bug
(controller.view_context is a new instance of the view_context
every time you call it, so I memoized it in my tests). It seems to
me that a simple fix for this would be:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;# actionpack/lib/abstract_controller/rendering.rb: line 84
def view_context
  @template ||= view_context_class.new(lookup_context, view_assigns, self)
end&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;A little bonus would be that if legacy Rails apps used the
@template instance variable, this might still work for them
(assuming that view_context had been called prior to them trying to
use it, of course). I'm &lt;em&gt;guessing&lt;/em&gt; that there's some reason
this wouldn't be ideal, but I'm not sure what that reason is...&lt;/p&gt;
&lt;p&gt;I did a spot check of the cache stores implemented, and I found
that they appear to support arbitrary Ruby objects (by utilizing
Marshal), so that should be OK.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-22T18:50:21+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-04-22T18:50:27+01:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">15</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I am just stopping by to say thanks for working on this and that I really hope this makes it into rails 3.  It's fairly important imho.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am just stopping by to say thanks for working on this and that
I really hope this makes it into rails 3. It's fairly important
imho.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-28T04:36:26+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-04-28T04:36:31+01:00</updated-at>
      <user-id type="integer">96936</user-id>
      <version type="integer">16</version>
      <user-name>James Hayton</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>agreed, looking forward to this making it into rails</body>
      <body-html>&lt;div&gt;&lt;p&gt;agreed, looking forward to this making it into rails&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-29T00:58:07+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-04-29T00:58:09+01:00</updated-at>
      <user-id type="integer">97091</user-id>
      <version type="integer">17</version>
      <user-name>varchar</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>OK I cleaned up the patch a bit (removed vestige of old approach, squashed my commits, and removed the &quot;def view_context&quot; stuff from the caching_test.rb).  The removal of the &quot;def view_context&quot; stuff means that my patch won't work (and accordingly, 2 tests fail), as it depends on view_context being the same object before, during and after rendering.

To address that, I have also attached a patch that memoizes the view_context in a @template variable (as shown in my last post).  Of course, memoizing the view_context causes 2 other tests to fail.  Go figure.</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK I cleaned up the patch a bit (removed vestige of old
approach, squashed my commits, and removed the &quot;def view_context&quot;
stuff from the caching_test.rb). The removal of the &quot;def
view_context&quot; stuff means that my patch won't work (and
accordingly, 2 tests fail), as it depends on view_context being the
same object before, during and after rendering.&lt;/p&gt;
&lt;p&gt;To address that, I have also attached a patch that memoizes the
view_context in a @template variable (as shown in my last post). Of
course, memoizing the view_context causes 2 other tests to fail. Go
figure.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-04-30T02:05:35+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-04-30T02:05:41+01:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">18</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Any update on this?  Is this not going to make it in Rails3?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any update on this? Is this not going to make it in Rails3?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-08-24T17:12:07+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-08-24T17:12:09+01:00</updated-at>
      <user-id type="integer">96936</user-id>
      <version type="integer">19</version>
      <user-name>James Hayton</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@James Hayton -- I honestly haven't tried to apply my patch to the latest Rails3 code base.  I'll give it a shot and resolve conflicts/fix issues that come up, then try to reconnect with Yehuda about it...

Yehuda mentioned it may not make it into Rails 3 till a point release or something.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@James Hayton -- I honestly haven't tried to apply my patch to
the latest Rails3 code base. I'll give it a shot and resolve
conflicts/fix issues that come up, then try to reconnect with
Yehuda about it...&lt;/p&gt;
&lt;p&gt;Yehuda mentioned it may not make it into Rails 3 till a point
release or something.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-08-31T23:29:56+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-08-31T23:29:57+01:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">20</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Steve, have you tested this patch with the Rails3 release? Could you post the latest patch? I'd be happy to help out with this, but i'd rather not start from scratch. Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Steve, have you tested this patch with the Rails3 release?
Could you post the latest patch? I'd be happy to help out with
this, but i'd rather not start from scratch. Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-19T05:13:01+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-09-19T05:13:03+01:00</updated-at>
      <user-id type="integer">91199</user-id>
      <version type="integer">21</version>
      <user-name>Zach</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Zach: honestly, I haven't touched this stuff for months.  My 9-5 job that pays the bills has been taking all my time &amp; energy recently, and realistically, I don't see myself being able to make time for this till next week at the earliest.

I'll try to get to it sooner, but it doesn't look good.  FWIW, Yehuda said we can target 3.1 for this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Zach: honestly, I haven't touched this stuff for months. My 9-5
job that pays the bills has been taking all my time &amp;amp; energy
recently, and realistically, I don't see myself being able to make
time for this till next week at the earliest.&lt;/p&gt;
&lt;p&gt;I'll try to get to it sooner, but it doesn't look good. FWIW,
Yehuda said we can target 3.1 for this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-22T08:38:32+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-09-22T08:38:35+01:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">22</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>@Steve:  Thanks for the updates.  Would love for this to happen.  Thanks for all the work.  Totally understand how things go.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Steve: Thanks for the updates. Would love for this to happen.
Thanks for all the work. Totally understand how things go.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-23T20:12:11+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-09-23T20:12:13+01:00</updated-at>
      <user-id type="integer">96936</user-id>
      <version type="integer">23</version>
      <user-name>James Hayton</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:37+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-10-15T23:01:37+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">24</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Allow me to add my encouragement on getting this in too, @Steve. Just ran into this problem myself and will work around it less elegantly for now.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Allow me to add my encouragement on getting this in too, @Steve.
Just ran into this problem myself and will work around it less
elegantly for now.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-29T11:31:20+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-10-29T11:31:26+01:00</updated-at>
      <user-id type="integer">69486</user-id>
      <version type="integer">25</version>
      <user-name>Joost Schuur</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Joost, James, Zach -- thanks. Your encouragement spurs me onward.  :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Joost, James, Zach -- thanks. Your encouragement spurs me
onward. :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-30T07:13:27+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-10-30T07:13:30+01:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">26</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Are you looking for Designer Replica Handbags? My-Handbag.com is happy to offer you the best replicas handbags and watches made with high quality materials at lowest price you'll find anywhere.
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;watches replica&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;cheap watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;designer watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;Swiss watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;mens watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;ladies watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;fake watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;discounted watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;sport watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;wholesale replica watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica swiss watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;knockoff watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica watches on sale&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_15.html&quot;&gt;Chanel handbags Replica&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_19.html&quot;&gt;Gucci handbags Replica&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_12.html&quot;&gt;Louis Vuitton handbags Replica&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;replica hermes handbags&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;replica hermes bags&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags replica&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags replica&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;designer hermes handbags&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags designer&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;designer hermes bags&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags designer&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;discounted hermes handbags&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags cheap&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags cheap&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags discounted&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags on sale&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags on sale&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags wholesale&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;watches replica&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;cheap watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;designer watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;Swiss watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;mens watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;ladies watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;fake watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;discounted watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;sport watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;wholesale replica watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica swiss watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;knockoff watches&lt;/a&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica watches on sale&lt;/a&gt;
replicasincn.com is dedicated to bring buyers the top grade replica handbags and watches at wholesale price. Here you can find a genuine pool of replica bags and watches with a wide range varieties.
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;handbags fake&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;bags replica&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;handbags cheap&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;bags cheap&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;handbags discounted&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;bags discounted&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_19.html&quot;&gt;replica gucci handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_15.html&quot;&gt;replica chanel handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_12.html&quot;&gt;replica Louis Vuitton handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Cheap handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale replica handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale fake handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale cheap handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale designer handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_32.html&quot;&gt;Replica hermes kelly handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_32.html&quot;&gt;Replica hermes kelly bags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;designer Coach handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;designer Coach bags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Replica Coach handbags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Replica Coach bags&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Coach handbags replica&lt;/a&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Coach bags replica&lt;/a&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Are you looking for Designer Replica Handbags? My-Handbag.com is
happy to offer you the best replicas handbags and watches made with
high quality materials at lowest price you'll find anywhere.&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;watches
replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;cheap
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;designer
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;Swiss
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;mens
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;ladies
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;fake
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;discounted
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;sport
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;wholesale
replica watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica swiss
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;knockoff
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica
watches on sale&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_15.html&quot;&gt;Chanel handbags
Replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_19.html&quot;&gt;Gucci handbags
Replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_12.html&quot;&gt;Louis Vuitton
handbags Replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;replica hermes
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;replica hermes
bags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags
replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags
replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;designer hermes
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags
designer&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;designer hermes
bags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags
designer&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;discounted
hermes handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags
cheap&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags
cheap&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags
discounted&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags
on sale&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes bags on
sale&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes handbags
wholesale&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_32.html&quot;&gt;hermes
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;watches
replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;cheap
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;designer
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;Swiss
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;mens
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;ladies
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;fake
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;discounted
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;sport
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;wholesale
replica watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica swiss
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;knockoff
watches&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.my-handbag.com/catalog_111.html&quot;&gt;replica
watches on sale&lt;/a&gt;&lt;br&gt;
replicasincn.com is dedicated to bring buyers the top grade replica
handbags and watches at wholesale price. Here you can find a
genuine pool of replica bags and watches with a wide range
varieties.&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;handbags fake&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;bags replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;handbags cheap&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;bags cheap&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;handbags discounted&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;bags discounted&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_19.html&quot;&gt;replica gucci
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_15.html&quot;&gt;replica
chanel handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_12.html&quot;&gt;replica Louis
Vuitton handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Cheap handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale replica
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale fake
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale cheap
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/&quot;&gt;Wholesale designer
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_32.html&quot;&gt;Replica
hermes kelly handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_32.html&quot;&gt;Replica
hermes kelly bags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;designer
Coach handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;designer
Coach bags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Replica Coach
handbags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Replica Coach
bags&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Coach
handbags replica&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.replicasincn.com/catalog_22.html&quot;&gt;Coach bags
replica&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-30T07:16:04+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-10-31T06:02:32+00:00</updated-at>
      <user-id type="integer">122552</user-id>
      <version type="integer">27</version>
      <user-name>fstory</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>What's the latest status for this? I've run into this problem making it impossible for me to cache certain items which I'd really like cached. The problem most of the time is that we use content_for to send javascript code to the bottom of the dom.

Will this be included in 3.0.2? Is it testable/usable today?</body>
      <body-html>&lt;div&gt;&lt;p&gt;What's the latest status for this? I've run into this problem
making it impossible for me to cache certain items which I'd really
like cached. The problem most of the time is that we use
content_for to send javascript code to the bottom of the dom.&lt;/p&gt;
&lt;p&gt;Will this be included in 3.0.2? Is it testable/usable today?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-05T13:53:53+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-11-05T13:53:56+00:00</updated-at>
      <user-id type="integer">123566</user-id>
      <version type="integer">28</version>
      <user-name>Daniel Gaiottino</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>+1... also eagerly awaiting this!</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1... also eagerly awaiting this!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-05T17:15:26+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-11-05T17:15:29+00:00</updated-at>
      <user-id type="integer">101032</user-id>
      <version type="integer">29</version>
      <user-name>Ben Hutton</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Any updates here?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Any updates here?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T01:33:51+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-11-17T01:33:56+00:00</updated-at>
      <user-id type="integer">89656</user-id>
      <version type="integer">30</version>
      <user-name>Rohit Arondekar</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Actually, yes!

I've been working on it all this past week.  In short, I think I'm going to separate the fragment caching and the action caching support for content_for into two patches.  The reason for this is that the fragment part is pretty much done and working, and while I was able to get action caching working with content_for as well, 149 tests in action_pack broke afterwards(!).

@Daniel -- it's not testable nor usable yet.  I'll post a patch soon that can cleanly apply to current-ish HEAD.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Actually, yes!&lt;/p&gt;
&lt;p&gt;I've been working on it all this past week. In short, I think
I'm going to separate the fragment caching and the action caching
support for content_for into two patches. The reason for this is
that the fragment part is pretty much done and working, and while I
was able to get action caching working with content_for as well,
149 tests in action_pack broke afterwards(!).&lt;/p&gt;
&lt;p&gt;@Daniel -- it's not testable nor usable yet. I'll post a patch
soon that can cleanly apply to current-ish HEAD.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T02:03:41+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-11-17T02:03:45+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">31</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Hah!  Just got them down to 10 failures.  Patch may be forthcoming...   :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hah! Just got them down to 10 failures. Patch may be
forthcoming... :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T02:56:55+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-11-17T02:56:59+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">32</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[Action pack] tests are green! Feast your eyes on the patch that should apply cleanly to current HEAD.

It's a bit ugly, but it works.  I have an idea for refactoring to something a little less disgusting, but for now... this is what I got.  Feel free to check it out and give me _your_ suggestions for making it prettier.</body>
      <body-html>&lt;div&gt;&lt;p&gt;[Action pack] tests are green! Feast your eyes on the patch that
should apply cleanly to current HEAD.&lt;/p&gt;
&lt;p&gt;It's a bit ugly, but it works. I have an idea for refactoring to
something a little less disgusting, but for now... this is what I
got. Feel free to check it out and give me &lt;em&gt;your&lt;/em&gt;
suggestions for making it prettier.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-17T10:24:04+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2010-11-17T10:24:09+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">33</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">12714</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>What does it mean when it says that this story is on hold?

Since the patch passes all the tests shouldn't it included in the next release of rails? Still waiting eagerly for this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;What does it mean when it says that this story is on hold?&lt;/p&gt;
&lt;p&gt;Since the patch passes all the tests shouldn't it included in
the next release of rails? Still waiting eagerly for this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-05T17:26:11+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2011-01-05T17:26:39+00:00</updated-at>
      <user-id type="integer">123566</user-id>
      <version type="integer">34</version>
      <user-name>Daniel Gaiottino</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Yehuda Katz (wycats)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@Daniel -- honestly I don't think this is patch is going to be accepted.  Obviously, I'd love to see it accepted, as I've put numerous hours into getting it working, but I think it's a bit too big (touches too many files), and is probably a bit too complex for the rails team to feel comfortable accepting.

That said, last I heard from Yehuda, Jos&#233; was supposed to review this patch, but I haven't heard anything about it since then (Nov 17th).  So I guess I'll assign it to Jos&#233; and maybe he'll be able to help me get this ready for primetime (?).

Cheers!

-Steve</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Daniel -- honestly I don't think this is patch is going to be
accepted. Obviously, I'd love to see it accepted, as I've put
numerous hours into getting it working, but I think it's a bit too
big (touches too many files), and is probably a bit too complex for
the rails team to feel comfortable accepting.&lt;/p&gt;
&lt;p&gt;That said, last I heard from Yehuda, Jos&amp;eacute; was supposed to
review this patch, but I haven't heard anything about it since then
(Nov 17th). So I guess I'll assign it to Jos&amp;eacute; and maybe
he'll be able to help me get this ready for primetime (?).&lt;/p&gt;
&lt;p&gt;Cheers!&lt;/p&gt;
&lt;p&gt;-Steve&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-06T07:11:30+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 12714
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2011-01-06T07:11:53+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">35</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Getting content_for to work with caches_action might get me to update to rails3 ...
unless there's a backport somewhere.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Getting content_for to work with caches_action might get me to
update to rails3 ...&lt;br&gt;
unless there's a backport somewhere.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-21T16:45:57+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2011-01-21T16:46:20+00:00</updated-at>
      <user-id type="integer">70258</user-id>
      <version type="integer">36</version>
      <user-name>Brad Langhorst</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Can someone give an update on this?  Would love to know if it will make it to 3.1?  Really really useful feature imho.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can someone give an update on this? Would love to know if it
will make it to 3.1? Really really useful feature imho.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-25T18:49:55+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2011-02-25T18:50:27+00:00</updated-at>
      <user-id type="integer">96936</user-id>
      <version type="integer">37</version>
      <user-name>James Hayton</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@James: I think that making action caching (when you're not caching the template) work with content_for might be a bit too heavy for the Rails team to accept.  I'll pull out fragment caching and make it a separate patch since it's much smaller and more lightweight IMO.  After that, if no rails core team member will review it and accept it or even reject it...  I think that will be the end of this (as far as I'm concerned).</body>
      <body-html>&lt;div&gt;&lt;p&gt;@James: I think that making action caching (when you're not
caching the template) work with content_for might be a bit too
heavy for the Rails team to accept. I'll pull out fragment caching
and make it a separate patch since it's much smaller and more
lightweight IMO. After that, if no rails core team member will
review it and accept it or even reject it... I think that will be
the end of this (as far as I'm concerned).&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-25T19:03:11+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2011-02-25T19:03:36+00:00</updated-at>
      <user-id type="integer">50328</user-id>
      <version type="integer">38</version>
      <user-name>Steve</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@Steve: I just wish they would at least review it and give an answer one way or the other.  I can't believe that there aren't more people clamoring for this.  I use action caching extensively with layout =&gt; false and this would really help me dry up my views.</body>
      <body-html>&lt;div&gt;&lt;p&gt;@Steve: I just wish they would at least review it and give an
answer one way or the other. I can't believe that there aren't more
people clamoring for this. I use action caching extensively with
layout =&amp;gt; false and this would really help me dry up my
views.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-25T20:34:01+00:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2011-02-25T20:34:23+00:00</updated-at>
      <user-id type="integer">96936</user-id>
      <version type="integer">39</version>
      <user-name>James Hayton</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>For those who need this function now:
I just make a monkey patch for rails 3 based on Steve's great work, and leave the abstract_controller untouched.
The patch is here: https://gist.github.com/891895, all you have to do is to put it in your config/initializers directory.

I'm very curious why abstract_controller.view_context returns a new instance instead of a memorized one like @template, too.
Could anyone point this out?</body>
      <body-html>&lt;div&gt;&lt;p&gt;For those who need this function now:&lt;br&gt;
I just make a monkey patch for rails 3 based on Steve's great work,
and leave the abstract_controller untouched.&lt;br&gt;
The patch is here: &lt;a href=
&quot;https://gist.github.com/891895&quot;&gt;https://gist.github.com/891895&lt;/a&gt;,
all you have to do is to put it in your config/initializers
directory.&lt;/p&gt;
&lt;p&gt;I'm very curious why abstract_controller.view_context returns a
new instance instead of a memorized one like @template, too.&lt;br&gt;
Could anyone point this out?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-29T07:50:38+01:00</created-at>
      <creator-id type="integer">42916</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3409</number>
      <permalink>content_for-and-fragment-caching</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>hold</state>
      <tag>caching content_for feature_request patch rails3</tag>
      <title>[PATCH]content_for and fragment caching</title>
      <updated-at type="datetime">2011-03-29T07:51:07+01:00</updated-at>
      <user-id type="integer">143300</user-id>
      <version type="integer">40</version>
      <user-name>StackNG</user-name>
      <creator-name>Greg Hazel</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3409</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>2aeb62f7a60212b1f5cdf837f7be5b98a9568ee8</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-11-17T10:24:04+00:00</created-at>
      <filename>cache_content_for_v4.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">774852</id>
      <size type="integer">16724</size>
      <uploader-id type="integer">50328</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/774852/cache_content_for_v4.patch</url>
    </attachment>
  </attachments>
</ticket>
