<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-10-11T17:55:47+01:00</created-at>
  <creator-id type="integer">52870</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5787</number>
  <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
  <updated-at type="datetime">2011-02-02T18:01:16+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">11</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>ara.t.howard</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
  <priority-name>Low</priority-name>
  <original-body>problem, including a fix.

http://dojo4.tumblr.com/post/1291667774/un-screwing-rails-object-to-json</original-body>
  <latest-body>problem, including a fix.

http://dojo4.tumblr.com/post/1291667774/un-screwing-rails-object-to-json</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;problem, including a fix.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://dojo4.tumblr.com/post/1291667774/un-screwing-rails-object-to-json&quot;&gt;
http://dojo4.tumblr.com/post/1291667774/un-screwing-rails-object-to...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>problem, including a fix.

http://dojo4.tumblr.com/post/1291667774/un-screwing-rails-object-to-json</body>
      <body-html>&lt;div&gt;&lt;p&gt;problem, including a fix.&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://dojo4.tumblr.com/post/1291667774/un-screwing-rails-object-to-json&quot;&gt;
http://dojo4.tumblr.com/post/1291667774/un-screwing-rails-object-to...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-11T17:55:47+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>prettty pretty_generate to_json</tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-11T17:55:51+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">1</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If you'd like this fixed in Rails please attach a patch as per the http://guides.rubyonrails.org/contributing_to_rails.html guide.</body>
      <body-html>&lt;div&gt;&lt;p&gt;If you'd like this fixed in Rails please attach a patch as per
the &lt;a href=
&quot;http://guides.rubyonrails.org/contributing_to_rails.html&quot;&gt;http://guides.rubyonrails.org/contributing_to_rails.html&lt;/a&gt;
guide.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-11T23:32:17+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>prettty pretty_generate to_json</tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-11T23:32:19+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">2</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>i'm not exactly sure what you mean.  the 'patch' is just not to require 'json'.  if one does that all the tests pass - of course.

this isn't something one can really fix with tests.  should it submit a patch for each version of the json gem?  for some a given test will fail and, for others, different tests will fail.  not many, but 1 or 2 different ones.  i'm pretty sure you aren't suggesting submitting a patch that test all permutations of gems one might possibly load - right?

more problematic is that, but requiring and alternate json gem the user is *asserting* that he wants different json generation/parsing - that's the whole point.

so, i guess i'm not following.  there is no bug, just bad form on rails part which is really hard to fix on the user end: the code is marked with the comment 'hack' - which it is.  the fix is simply to remove the hack.</body>
      <body-html>&lt;div&gt;&lt;p&gt;i'm not exactly sure what you mean. the 'patch' is just not to
require 'json'. if one does that all the tests pass - of
course.&lt;/p&gt;
&lt;p&gt;this isn't something one can really fix with tests. should it
submit a patch for each version of the json gem? for some a given
test will fail and, for others, different tests will fail. not
many, but 1 or 2 different ones. i'm pretty sure you aren't
suggesting submitting a patch that test all permutations of gems
one might possibly load - right?&lt;/p&gt;
&lt;p&gt;more problematic is that, but requiring and alternate json gem
the user is &lt;em&gt;asserting&lt;/em&gt; that he wants different json
generation/parsing - that's the whole point.&lt;/p&gt;
&lt;p&gt;so, i guess i'm not following. there is no bug, just bad form on
rails part which is really hard to fix on the user end: the code is
marked with the comment 'hack' - which it is. the fix is simply to
remove the hack.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-12T01:29:27+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>prettty pretty_generate to_json</tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-12T01:29:28+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">3</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>So it's unpatchable and untestable and only results in problems if somebody requires 'json', which makes it a non-Rails issue?

Sorry, can't help you.</body>
      <body-html>&lt;div&gt;&lt;p&gt;So it's unpatchable and untestable and only results in problems
if somebody requires 'json', which makes it a non-Rails issue?&lt;/p&gt;
&lt;p&gt;Sorry, can't help you.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-12T03:12:26+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>prettty pretty_generate to_json</tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-12T03:12:28+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">4</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>If you want to see this fixed: please suggest an alternative.</body>
      <body-html>&lt;div&gt;&lt;p&gt;If you want to see this fixed: please suggest an
alternative.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-12T03:13:27+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:state: invalid
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>prettty pretty_generate to_json</tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-12T03:13:32+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">5</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>the alternative is simple: rather than

1) requiring the json gem and then clobbering all it's code

  do instead

2) do nothing.  let the json gem maintainers provide bug fixes for rails compatibility

as it stands now it's just a massive hack (as the author states in the code).  not only does it literally require a gem and then clobber it's method to death, but it introduces dependency issues since it does the hack *outside* of bundler and then loads the app inside of bundler - aka it can result in two json verions being loaded/blowing up.

all i'm saying is that it would be more clean to remove the code marked 'hack', which breaks no tests, and then to let *actual* bug reports come in (to rails or json.gem) than to make the person yelling foul provide alternatives when none are needed...

summary: do nothing.

it works fine, just slightly differently (as intended) when the json gem is loaded - user beware!  actually, maybe that is the best approach: issue a warning after initialize if the json gem has been loaded... hrm.</body>
      <body-html>&lt;div&gt;&lt;p&gt;the alternative is simple: rather than&lt;/p&gt;
&lt;p&gt;1) requiring the json gem and then clobbering all it's code&lt;/p&gt;
&lt;p&gt;do instead&lt;/p&gt;
&lt;p&gt;2) do nothing. let the json gem maintainers provide bug fixes
for rails compatibility&lt;/p&gt;
&lt;p&gt;as it stands now it's just a massive hack (as the author states
in the code). not only does it literally require a gem and then
clobber it's method to death, but it introduces dependency issues
since it does the hack &lt;em&gt;outside&lt;/em&gt; of bundler and then loads
the app inside of bundler - aka it can result in two json verions
being loaded/blowing up.&lt;/p&gt;
&lt;p&gt;all i'm saying is that it would be more clean to remove the code
marked 'hack', which breaks no tests, and then to let
&lt;em&gt;actual&lt;/em&gt; bug reports come in (to rails or json.gem) than to
make the person yelling foul provide alternatives when none are
needed...&lt;/p&gt;
&lt;p&gt;summary: do nothing.&lt;/p&gt;
&lt;p&gt;it works fine, just slightly differently (as intended) when the
json gem is loaded - user beware! actually, maybe that is the best
approach: issue a warning after initialize if the json gem has been
loaded... hrm.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-12T03:23:19+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>prettty pretty_generate to_json</tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-12T03:23:24+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">6</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>ps.  if you've ever worked on an extensive /api you'll see just how nice using JSON.pretty_generate in development actually is - it saves hours of debugging time.  and, of course, it is *way* faster.</body>
      <body-html>&lt;div&gt;&lt;p&gt;ps. if you've ever worked on an extensive /api you'll see just
how nice using JSON.pretty_generate in development actually is - it
saves hours of debugging time. and, of course, it is &lt;em&gt;way&lt;/em&gt;
faster.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-12T03:25:21+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>prettty pretty_generate to_json</tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-12T03:25:24+01:00</updated-at>
      <user-id type="integer">52870</user-id>
      <version type="integer">7</version>
      <user-name>ara.t.howard</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-19T08:26:40+01:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: prettty pretty_generate to_json
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag nil="true"></tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2010-10-19T08:26:42+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">9</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:48:14+00:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2011-02-02T18:00:43+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">10</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:48:15+00:00</created-at>
      <creator-id type="integer">52870</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5787</number>
      <permalink>rails-makes-it-impossible-to-use-any-3rd-party-json-libs-to-generate-pretty-json</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>rails makes it *impossible* to use any 3rd party json libs to generate pretty json</title>
      <updated-at type="datetime">2011-02-02T18:01:16+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">11</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>ara.t.howard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5787</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
</ticket>
