<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-02-26T20:17:14+00:00</created-at>
  <creator-id type="integer">42669</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">2088</number>
  <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
  <priority type="integer">1314</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>232 mongrel rack server &quot;Server&quot; windows</tag>
  <title>Mongrel not being stopped with CTRL-C under Windows</title>
  <updated-at type="datetime">2011-02-02T18:32:48+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">8</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>C. Bedard</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
  <milestone-title>3.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Because of the way Rack::Handler::Mongrel instantiates the Mongrel::HttpHandler, it becomes impossible to shutdown the server with CTRL-C unless one actually enters CTRL-C and then hits the (still running) server.

This seems to be a Windows-only issue.

Attached is a patch which fixes this issue. This solution comes from the Mongrel gem source code.</original-body>
  <latest-body>Because of the way Rack::Handler::Mongrel instantiates the Mongrel::HttpHandler, it becomes impossible to shutdown the server with CTRL-C unless one actually enters CTRL-C and then hits the (still running) server.

This seems to be a Windows-only issue.

Attached is a patch which fixes this issue. This solution comes from the Mongrel gem source code.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Because of the way Rack::Handler::Mongrel instantiates the
Mongrel::HttpHandler, it becomes impossible to shutdown the server
with CTRL-C unless one actually enters CTRL-C and then hits the
(still running) server.&lt;/p&gt;
&lt;p&gt;This seems to be a Windows-only issue.&lt;/p&gt;
&lt;p&gt;Attached is a patch which fixes this issue. This solution comes
from the Mongrel gem source code.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Because of the way Rack::Handler::Mongrel instantiates the Mongrel::HttpHandler, it becomes impossible to shutdown the server with CTRL-C unless one actually enters CTRL-C and then hits the (still running) server.

This seems to be a Windows-only issue.

Attached is a patch which fixes this issue. This solution comes from the Mongrel gem source code.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Because of the way Rack::Handler::Mongrel instantiates the
Mongrel::HttpHandler, it becomes impossible to shutdown the server
with CTRL-C unless one actually enters CTRL-C and then hits the
(still running) server.&lt;/p&gt;
&lt;p&gt;This seems to be a Windows-only issue.&lt;/p&gt;
&lt;p&gt;Attached is a patch which fixes this issue. This solution comes
from the Mongrel gem source code.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-26T20:17:14+00:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3-rc1 mongrel rack server windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2009-02-26T20:17:19+00:00</updated-at>
      <user-id type="integer">42669</user-id>
      <version type="integer">1</version>
      <user-name>C. Bedard</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>May I suggest submitting this patch to the Rack team? It might be more applicable there.</body>
      <body-html>&lt;div&gt;&lt;p&gt;May I suggest submitting this patch to the Rack team? It might
be more applicable there.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-06T21:39:35+01:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3-rc1 mongrel rack server windows
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 mongrel rack server windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2009-04-06T21:39:40+01:00</updated-at>
      <user-id type="integer">5026</user-id>
      <version type="integer">2</version>
      <user-name>James Herdman</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Running rails via gem 2.3.2. (Also have installed the gem for mongrel 1.1.5, but I take it that appears elsewhere.)  I can confirm the problematic behavior described, and confirm that this patch fixes the silly mongrel.  

I manually applied the patch by adding the two new lines (trap &amp; sleeper_thread) to mongrel.rb in c:\ruby\lib\ruby\gems\1.8\gems\actionpack-2.3.2\lib\action_controller\vendor\rack-1.0\rack\handler&gt;.

There must be a better way to manage patches like this.  Googled a ton but found no answer that made sense.  Do I need to get off the gems and start using git?  freeze rails 2.3.2?  

Thoughts appreciated, or better yet a link as this is probably the wrong place for this question.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Running rails via gem 2.3.2. (Also have installed the gem for
mongrel 1.1.5, but I take it that appears elsewhere.) I can confirm
the problematic behavior described, and confirm that this patch
fixes the silly mongrel.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;I manually applied the patch by adding the two new lines (trap
&amp;amp; sleeper_thread) to mongrel.rb in
c:\ruby\lib\ruby\gems\1.8\gems\actionpack-2.3.2\lib\action_controller\vendor\rack-1.0\rack\handler&amp;gt;.&lt;/p&gt;
&lt;p&gt;There must be a better way to manage patches like this. Googled
a ton but found no answer that made sense. Do I need to get off the
gems and start using git? freeze rails 2.3.2?&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Thoughts appreciated, or better yet a link as this is probably
the wrong place for this question.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-11T01:34:50+01:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 mongrel rack server windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2009-05-11T01:34:55+01:00</updated-at>
      <user-id type="integer">56340</user-id>
      <version type="integer">3</version>
      <user-name>mkosma</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I think this only affects the very old VS 6.0 builds, though?

The bug is actually in IO blocking in the ruby interpreter itself.

Update your compiler and interpreter, and the issue should go away.

Can anyone confirm this (I'm relatively sure)?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think this only affects the very old VS 6.0 builds,
though?&lt;/p&gt;
&lt;p&gt;The bug is actually in IO blocking in the ruby interpreter
itself.&lt;/p&gt;
&lt;p&gt;Update your compiler and interpreter, and the issue should go
away.&lt;/p&gt;
&lt;p&gt;Can anyone confirm this (I'm relatively sure)?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-19T09:18:16+01:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 mongrel rack server windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2009-08-19T09:18:18+01:00</updated-at>
      <user-id type="integer">29656</user-id>
      <version type="integer">4</version>
      <user-name>raggi</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>According to Luis Lavena, maintainer of RubyInstaller on Windows, this problem *isn't* related to the compiler. I can confirm the issue is still present on the newer mingw builds.

Here's a thread discussing it:

http://groups.google.com/group/rubyinstaller/browse_thread/thread/8bee587c8aba47d8</body>
      <body-html>&lt;div&gt;&lt;p&gt;According to Luis Lavena, maintainer of RubyInstaller on
Windows, this problem &lt;em&gt;isn't&lt;/em&gt; related to the compiler. I can
confirm the issue is still present on the newer mingw builds.&lt;/p&gt;
&lt;p&gt;Here's a thread discussing it:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://groups.google.com/group/rubyinstaller/browse_thread/thread/8bee587c8aba47d8&quot;&gt;
http://groups.google.com/group/rubyinstaller/browse_thread/thread/8...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-22T17:54:56+00:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 mongrel rack server windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2010-03-22T17:54:59+00:00</updated-at>
      <user-id type="integer">32141</user-id>
      <version type="integer">5</version>
      <user-name>Charles Roper</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:40+01:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 mongrel rack server windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2010-05-04T18:48:40+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">6</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:53:58+00:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 mongrel rack server windows
:priority: 0
:state: new
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">1314</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>232 mongrel rack &quot;Server&quot; server windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2011-02-02T18:32:22+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">7</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:53:59+00:00</created-at>
      <creator-id type="integer">42669</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 232 mongrel rack &quot;Server&quot; server windows
:state: open
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2088</number>
      <permalink>mongrel-not-being-stopped-with-ctrl-c-under-windows</permalink>
      <priority type="integer">1314</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>232 mongrel rack server &quot;Server&quot; windows</tag>
      <title>Mongrel not being stopped with CTRL-C under Windows</title>
      <updated-at type="datetime">2011-02-02T18:32:48+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">8</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>C. Bedard</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2088</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>b365e49466fd2d4af14d3a62d52654eb2948e2af</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-02-26T20:17:14+00:00</created-at>
      <filename>rack-handler-mongrel-win32-fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">93568</id>
      <size type="integer">1199</size>
      <uploader-id type="integer">42669</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/93568/rack-handler-mongrel-win32-fix.diff</url>
    </attachment>
  </attachments>
</ticket>
