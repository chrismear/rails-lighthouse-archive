<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-03-16T07:21:13+00:00</created-at>
  <creator-id type="integer">48080</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2248</number>
  <permalink>plugin-tests-not-running</permalink>
  <priority type="integer">1431</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>duplicate</state>
  <tag>2.2.2 2.3-rc2 patch plugin test testcase</tag>
  <title>Plugin Tests not Running</title>
  <updated-at type="datetime">2009-06-15T12:42:03+01:00</updated-at>
  <user-id type="integer">7211</user-id>
  <version type="integer">5</version>
  <user-name>CancelProfileIsBroken</user-name>
  <creator-name>Adam Elliot</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2248</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>I'm not sure if this is a bug or I'm not using the feature set as intended, but I'm having issues executing test cases right from my plugin. It appears things aren't running as expected right from the get go (script/generate plugin blah).

Here's what's going on. I've generated a new plugin (rails 2.3rc2, but I've tried this on 2.2.2 and it does the same thing):

`script/generate plugin blah`

When I switch to the plugins folder and run the default tests:

`cd vendor/plugins/blah`
`rake test`

It loads all the tests, but none of them actually run. If I change the default test to:

`test &quot;the truth&quot; do`
`  assert false`
`end`

It doesn't fail.

If I run `rake test:plugins` from RAILS_ROOT the tests fail, but it also loads portions of the application code, which is undesirable. Should `rake test` work in the plugin's folder or am I misunderstanding things?

Thanks,
Adam</original-body>
  <latest-body>I'm not sure if this is a bug or I'm not using the feature set as intended, but I'm having issues executing test cases right from my plugin. It appears things aren't running as expected right from the get go (script/generate plugin blah).

Here's what's going on. I've generated a new plugin (rails 2.3rc2, but I've tried this on 2.2.2 and it does the same thing):

`script/generate plugin blah`

When I switch to the plugins folder and run the default tests:

`cd vendor/plugins/blah`
`rake test`

It loads all the tests, but none of them actually run. If I change the default test to:

`test &quot;the truth&quot; do`
`  assert false`
`end`

It doesn't fail.

If I run `rake test:plugins` from RAILS_ROOT the tests fail, but it also loads portions of the application code, which is undesirable. Should `rake test` work in the plugin's folder or am I misunderstanding things?

Thanks,
Adam</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I'm not sure if this is a bug or I'm not using the feature set
as intended, but I'm having issues executing test cases right from
my plugin. It appears things aren't running as expected right from
the get go (script/generate plugin blah).&lt;/p&gt;
&lt;p&gt;Here's what's going on. I've generated a new plugin (rails
2.3rc2, but I've tried this on 2.2.2 and it does the same
thing):&lt;/p&gt;
&lt;p&gt;&lt;code&gt;script/generate plugin blah&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;When I switch to the plugins folder and run the default
tests:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cd vendor/plugins/blah&lt;/code&gt; &lt;code&gt;rake test&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;It loads all the tests, but none of them actually run. If I
change the default test to:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;test &quot;the truth&quot; do&lt;/code&gt; &lt;code&gt;assert false&lt;/code&gt;
&lt;code&gt;end&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;It doesn't fail.&lt;/p&gt;
&lt;p&gt;If I run &lt;code&gt;rake test:plugins&lt;/code&gt; from RAILS_ROOT the
tests fail, but it also loads portions of the application code,
which is undesirable. Should &lt;code&gt;rake test&lt;/code&gt; work in the
plugin's folder or am I misunderstanding things?&lt;/p&gt;
&lt;p&gt;Thanks, Adam&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm not sure if this is a bug or I'm not using the feature set as intended, but I'm having issues executing test cases right from my plugin. It appears things aren't running as expected right from the get go (script/generate plugin blah).

Here's what's going on. I've generated a new plugin (rails 2.3rc2, but I've tried this on 2.2.2 and it does the same thing):

`script/generate plugin blah`

When I switch to the plugins folder and run the default tests:
@@@ shell
cd vendor/plugins/blah
rake test
@@@

It loads all the tests, but none of them actually run. If I change the default test to:
@@@ ruby
test &quot;the truth&quot; do
  assert false
end
@@@

It doesn't fail.

If I run `rake test:plugins` from RAILS_ROOT the tests fail, but it also loads portions of the application code, which is undesirable. Should `rake test` work in the plugin's folder or am I misunderstanding things?

Thanks,
Adam</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm not sure if this is a bug or I'm not using the feature set
as intended, but I'm having issues executing test cases right from
my plugin. It appears things aren't running as expected right from
the get go (script/generate plugin blah).&lt;/p&gt;
&lt;p&gt;Here's what's going on. I've generated a new plugin (rails
2.3rc2, but I've tried this on 2.2.2 and it does the same
thing):&lt;/p&gt;
&lt;p&gt;&lt;code&gt;script/generate plugin blah&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;When I switch to the plugins folder and run the default
tests:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;
cd vendor/plugins/blah
rake test
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It loads all the tests, but none of them actually run. If I
change the default test to:&lt;/p&gt;


&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;
test &amp;quot;the truth&amp;quot; do
  assert false
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It doesn't fail.&lt;/p&gt;
&lt;p&gt;If I run &lt;code&gt;rake test:plugins&lt;/code&gt; from RAILS_ROOT the
tests fail, but it also loads portions of the application code,
which is undesirable. Should &lt;code&gt;rake test&lt;/code&gt; work in the
plugin's folder or am I misunderstanding things?&lt;/p&gt;
&lt;p&gt;Thanks, Adam&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-16T07:21:13+00:00</created-at>
      <creator-id type="integer">48080</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2248</number>
      <permalink>plugin-tests-not-running</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2.2 2.3-rc2 testcase</tag>
      <title>Plugin Tests not Running</title>
      <updated-at type="datetime">2009-03-16T07:39:47+00:00</updated-at>
      <user-id type="integer">48080</user-id>
      <version type="integer">1</version>
      <user-name>Adam Elliot</user-name>
      <creator-name>Adam Elliot</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2248</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Seems to be a duplicate of https://rails.lighthouseapp.com/projects/8994/tickets/2248-plugin-tests-not-running</body>
      <body-html>&lt;div&gt;&lt;p&gt;Seems to be a duplicate of &lt;a href=&quot;https://rails.lighthouseapp.com/projects/8994/tickets/2248-plugin-tests-not-running&quot;&gt;
https://rails.lighthouseapp.com/...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-01T13:56:51+01:00</created-at>
      <creator-id type="integer">48080</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.2.2 2.3-rc2 testcase
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2248</number>
      <permalink>plugin-tests-not-running</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2.2 2.3-rc2 duplicate testcase</tag>
      <title>Plugin Tests not Running</title>
      <updated-at type="datetime">2009-04-01T13:56:53+01:00</updated-at>
      <user-id type="integer">11144</user-id>
      <version type="integer">2</version>
      <user-name>pablobm</user-name>
      <creator-name>Adam Elliot</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2248</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(removing the duplicate tag because the link provided links to this same ticket, and I couldn't find an obvious duplicate via search)

I believe this is caused by the fact that activesupport/testcase never actually requires 'test/unit', which has the hooks to run your test. 

This may be a conscious decision to prevent clashing with plugins that wish to use other testing frameworks, although if that's the case then they probably shouldn't be requiring activesupport/testcase either.

I've attached a simple patch to fix this, and hopefully make it clearer.</body>
      <body-html>&lt;div&gt;&lt;p&gt;(removing the duplicate tag because the link provided links to
this same ticket, and I couldn't find an obvious duplicate via
search)&lt;/p&gt;
&lt;p&gt;I believe this is caused by the fact that activesupport/testcase
never actually requires 'test/unit', which has the hooks to run
your test.&lt;/p&gt;
&lt;p&gt;This may be a conscious decision to prevent clashing with
plugins that wish to use other testing frameworks, although if
that's the case then they probably shouldn't be requiring
activesupport/testcase either.&lt;/p&gt;
&lt;p&gt;I've attached a simple patch to fix this, and hopefully make it
clearer.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-03T16:58:36+01:00</created-at>
      <creator-id type="integer">48080</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.2.2 2.3-rc2 duplicate testcase
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2248</number>
      <permalink>plugin-tests-not-running</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2.2 2.3-rc2 patch plugin test testcase</tag>
      <title>Plugin Tests not Running</title>
      <updated-at type="datetime">2009-04-03T16:58:39+01:00</updated-at>
      <user-id type="integer">137</user-id>
      <version type="integer">3</version>
      <user-name>James Adam</user-name>
      <creator-name>Adam Elliot</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2248</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>pablobm,

You seem to paste a wrong url, the identical to this issue:)
I suppose the right isssue is https://rails.lighthouseapp.com/projects/8994/tickets/1878-a-generated-plugins-tests-are-not-run-by-rake-test#ticket-1878-2</body>
      <body-html>&lt;div&gt;&lt;p&gt;pablobm,&lt;/p&gt;
&lt;p&gt;You seem to paste a wrong url, the identical to this issue:)&lt;br&gt;
I suppose the right isssue is &lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994/tickets/1878-a-generated-plugins-tests-are-not-run-by-rake-test#ticket-1878-2&quot;&gt;
https://rails.lighthouseapp.com/projects/8994/tickets/1878-a-genera...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-13T16:17:04+01:00</created-at>
      <creator-id type="integer">48080</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2248</number>
      <permalink>plugin-tests-not-running</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2.2 2.3-rc2 patch plugin test testcase</tag>
      <title>Plugin Tests not Running</title>
      <updated-at type="datetime">2009-06-13T16:17:04+01:00</updated-at>
      <user-id type="integer">29204</user-id>
      <version type="integer">4</version>
      <user-name>hiroshi</user-name>
      <creator-name>Adam Elliot</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2248</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Duplicate of #1878</body>
      <body-html>&lt;div&gt;&lt;p&gt;Duplicate of &lt;a href=&quot;/projects/8994/tickets/1878&quot; title=
&quot;Ticket #1878&quot;&gt;#1878&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-06-15T12:42:03+01:00</created-at>
      <creator-id type="integer">48080</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2248</number>
      <permalink>plugin-tests-not-running</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>duplicate</state>
      <tag>2.2.2 2.3-rc2 patch plugin test testcase</tag>
      <title>Plugin Tests not Running</title>
      <updated-at type="datetime">2009-06-15T12:42:03+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">5</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Adam Elliot</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2248</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>719eb47b4982d9e0603dc8614d03c0ea768a7f78</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-04-03T16:58:36+01:00</created-at>
      <filename>plugin_tests_should_run.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">107784</id>
      <size type="integer">1075</size>
      <uploader-id type="integer">137</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/107784/plugin_tests_should_run.diff</url>
    </attachment>
  </attachments>
</ticket>
