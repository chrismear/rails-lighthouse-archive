<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">19965</assigned-user-id>
  <attachments-count type="integer">3</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-20T15:14:31+01:00</created-at>
  <creator-id type="integer">20327</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">5160</number>
  <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>absolutepath asset_host patch rails3 url</tag>
  <title>[Patch] Ignore asset host for relative uri with host</title>
  <updated-at type="datetime">2011-04-26T20:59:58+01:00</updated-at>
  <user-id type="integer">19965</user-id>
  <version type="integer">10</version>
  <user-name>Jos&#233; Valim</user-name>
  <creator-name>valodzka</creator-name>
  <assigned-user-name>Jos&#233; Valim</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
  <priority-name>Low</priority-name>
  <original-body>According to URI rfc this is relative uri with host but without scheme:

    //example.com/test

Currently rails handles such uri incorrectly when assets host set. It adds asset  host to such urls, and that is incorrect,

&quot;This commit&quot;:http://github.com/valodzka/rails/commit/50dabed79dbf89493b00de3fdd600ca91e2b16f4 (in attach) fixes problem.</original-body>
  <latest-body>According to URI rfc this is relative uri with host but without scheme:

    //example.com/test

Currently rails handles such uri incorrectly when assets host set. It adds asset  host to such urls, and that is incorrect,

&quot;This commit&quot;:http://github.com/valodzka/rails/commit/50dabed79dbf89493b00de3fdd600ca91e2b16f4 (in attach) fixes problem.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;According to URI rfc this is relative uri with host but without
scheme:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;//example.com/test&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Currently rails handles such uri incorrectly when assets host
set. It adds asset host to such urls, and that is incorrect,&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/valodzka/rails/commit/50dabed79dbf89493b00de3fdd600ca91e2b16f4&quot;&gt;
This commit&lt;/a&gt; (in attach) fixes problem.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>According to URI rfc this is relative uri with host but without scheme:

    //example.com/test

Currently rails handles such uri incorrectly when assets host set. It adds asset  host to such urls, and that is incorrect,

&quot;This commit&quot;:http://github.com/valodzka/rails/commit/50dabed79dbf89493b00de3fdd600ca91e2b16f4 (in attach) fixes problem.</body>
      <body-html>&lt;div&gt;&lt;p&gt;According to URI rfc this is relative uri with host but without
scheme:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;//example.com/test&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Currently rails handles such uri incorrectly when assets host
set. It adds asset host to such urls, and that is incorrect,&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://github.com/valodzka/rails/commit/50dabed79dbf89493b00de3fdd600ca91e2b16f4&quot;&gt;
This commit&lt;/a&gt; (in attach) fixes problem.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-20T15:14:31+01:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>absolutepath asset_host patch url</tag>
      <title>Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2010-07-20T15:14:35+01:00</updated-at>
      <user-id type="integer">20327</user-id>
      <version type="integer">1</version>
      <user-name>valodzka</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-07-21T19:08:33+01:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
:title: Ignore asset host for relative uri with host
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>absolutepath asset_host patch url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2010-07-21T19:08:36+01:00</updated-at>
      <user-id type="integer">20327</user-id>
      <version type="integer">2</version>
      <user-name>valodzka</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 looks good and tests pass</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 looks good and tests pass&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-17T00:04:56+01:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: absolutepath asset_host patch url
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2010-10-17T00:04:59+01:00</updated-at>
      <user-id type="integer">81551</user-id>
      <version type="integer">3</version>
      <user-name>Andrea Campi</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T16:29:55+00:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2011-02-02T16:41:43+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">4</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T16:29:57+00:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2011-02-02T16:42:08+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">5</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Problem is still here, I'm get it when tried to use jquery from google CDN.
I'm rewrite patch for rails3 edge.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Problem is still here, I'm get it when tried to use jquery from
google CDN.&lt;br&gt;
I'm rewrite patch for rails3 edge.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-20T10:51:36+00:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2011-02-20T10:51:53+00:00</updated-at>
      <user-id type="integer">17936</user-id>
      <version type="integer">6</version>
      <user-name>sergey.kojin</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Here is patch with tests only, to see that problem is really here. [state:open]</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here is patch with tests only, to see that problem is really
here. [state:open]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-20T10:53:00+00:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- 
:state: stale
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2011-02-20T10:53:08+00:00</updated-at>
      <user-id type="integer">17936</user-id>
      <version type="integer">7</version>
      <user-name>sergey.kojin</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-22T16:44:51+00:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 1366
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2011-02-22T16:45:00+00:00</updated-at>
      <user-id type="integer">17936</user-id>
      <version type="integer">8</version>
      <user-name>sergey.kojin</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>fixed https://github.com/rails/rails/commit/4ce14fb0809ea8d636be0a1790fa38eafe64a46f</body>
      <body-html>&lt;div&gt;&lt;p&gt;fixed &lt;a href=
&quot;https://github.com/rails/rails/commit/4ce14fb0809ea8d636be0a1790fa38eafe64a46f&quot;&gt;
https://github.com/rails/rails/commit/4ce14fb0809ea8d636be0a1790fa3...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-04-26T20:58:09+01:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2011-04-26T20:58:18+01:00</updated-at>
      <user-id type="integer">17936</user-id>
      <version type="integer">9</version>
      <user-name>sergey.kojin</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-04-26T20:59:43+01:00</created-at>
      <creator-id type="integer">20327</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">5160</number>
      <permalink>ignore-asset-host-for-relative-uri-with-host</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>absolutepath asset_host patch rails3 url</tag>
      <title>[Patch] Ignore asset host for relative uri with host</title>
      <updated-at type="datetime">2011-04-26T20:59:58+01:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">10</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>valodzka</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/5160</url>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>e069aea175b34e1743b2b620720a118376ce14d6</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-07-20T15:14:31+01:00</created-at>
      <filename>assets_uri.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">597295</id>
      <size type="integer">2242</size>
      <uploader-id type="integer">20327</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/597295/assets_uri.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>077f4f717c8c1b6b6e3e6a895db202562c6ce6a4</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-02-20T10:51:36+00:00</created-at>
      <filename>protocol_relative_url.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">921124</id>
      <size type="integer">2183</size>
      <uploader-id type="integer">17936</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/921124/protocol_relative_url.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>4de519d24f264f4fd56e6899d168f5440a7c71e2</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-02-20T10:53:00+00:00</created-at>
      <filename>protocol_relative_url_tests.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">921125</id>
      <size type="integer">1587</size>
      <uploader-id type="integer">17936</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/921125/protocol_relative_url_tests.diff</url>
    </attachment>
  </attachments>
</ticket>
