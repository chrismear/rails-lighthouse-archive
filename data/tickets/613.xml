<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-07-13T16:09:42+01:00</created-at>
  <creator-id type="integer">17112</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">613</number>
  <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
  <priority type="integer">99</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activesupport core_ext patch tested</tag>
  <title>Slice and Slice! don't accept an array of keys</title>
  <updated-at type="datetime">2008-07-17T15:38:36+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">9</version>
  <user-name>Repository</user-name>
  <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Currently slice and slice! don't worry if you pass yours keys as an array ([:a, :b]) since the slice method doesn't flatten the array down and the args use a splat (*).

This patch includes the test and I also have this applied to one of my production apps.</original-body>
  <latest-body>Currently slice and slice! don't worry if you pass yours keys as an array ([:a, :b]) since the slice method doesn't flatten the array down and the args use a splat (*).

This patch includes the test and I also have this applied to one of my production apps.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
Currently slice and slice! don't worry if you pass yours keys as an array ([:a, :b]) since the slice method doesn't flatten the array down and the args use a splat (*).
&lt;/p&gt;&lt;p&gt;
This patch includes the test and I also have this applied to one of my production apps.
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Currently slice and slice! don't worry if you pass yours keys as an array ([:a, :b]) since the slice method doesn't flatten the array down and the args use a splat (*).

This patch includes the test and I also have this applied to one of my production apps.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Currently slice and slice! don't worry if you pass yours keys as an array ([:a, :b]) since the slice method doesn't flatten the array down and the args use a splat (*).
&lt;/p&gt;&lt;p&gt;
This patch includes the test and I also have this applied to one of my production apps.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-13T16:09:43+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-13T16:09:43+01:00</updated-at>
      <user-id type="integer">17112</user-id>
      <version type="integer">1</version>
      <user-name>ronin-17112 (at lighthouseapp)</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [396f9df8916b71f83aad8d56559cf55fc8501679]) Hash#slice supports an array of keys [#613 state:resolved]

Signed-off-by: Joshua Peek &lt;josh@joshpeek.com&gt;
http://github.com/rails/rails/commit/396f9df8916b71f83aad8d56559cf55fc8501679</body>
      <body-html>&lt;div&gt;&lt;p&gt;
(from [396f9df8916b71f83aad8d56559cf55fc8501679]) Hash#slice supports an array of keys [#613 state:resolved]
&lt;/p&gt;&lt;p&gt;
Signed-off-by: Joshua Peek 
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/396f9df8916b71f83aad8d56559cf55fc8501679&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T01:28:48+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T01:28:48+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">2</version>
      <user-name>Repository</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>reiterating,
this is bad.

if you want to pass it an array,
you should be able to pass it an array,

if you want to splat it,
splat it

hash.slice(*[:a,:b]) if you mean slice(:a, :b)

or hash.slice([:a,:b]) if that's a key</body>
      <body-html>&lt;div&gt;&lt;p&gt;
reiterating,
&lt;/p&gt;&lt;p&gt;
this is bad.
&lt;/p&gt;&lt;p&gt;
if you want to pass it an array,
&lt;/p&gt;&lt;p&gt;
you should be able to pass it an array,
&lt;/p&gt;&lt;p&gt;
if you want to splat it,
&lt;/p&gt;&lt;p&gt;
splat it
&lt;/p&gt;&lt;p&gt;
hash.slice(*[:a,:b]) if you mean slice(:a, :b)
&lt;/p&gt;&lt;p&gt;
or hash.slice([:a,:b]) if that's a key
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T13:19:06+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T13:19:06+01:00</updated-at>
      <user-id type="integer">18469</user-id>
      <version type="integer">3</version>
      <user-name>MatthewRudy</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>and here's a perversion of the attached test.

@@@ ruby
def test_slice_with_array_keys
  original = { :a =&gt; 'x', :b =&gt; 'y', :c =&gt; 10, [:a, :b] =&gt; &quot;an array key&quot; }
  expected = { [:a, :b] =&gt; &quot;an array key&quot;, :c =&gt; 10 }

  # Should return a new hash with only the given keys, when given an array as a key.
  assert_equal expected, original.slice([:a, :b], :c)
  assert_not_equal expected, original

  # Should replace the hash with only the given keys, when given an array of keys.
  assert_equal expected, original.slice!([:a, :b], :c)
  assert_equal expected, original
end
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;
and here's a perversion of the attached test.
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;def test_slice_with_array_keys
  original = { :a =&amp;gt; 'x', :b =&amp;gt; 'y', :c =&amp;gt; 10, [:a, :b] =&amp;gt; &amp;quot;an array key&amp;quot; }
  expected = { [:a, :b] =&amp;gt; &amp;quot;an array key&amp;quot;, :c =&amp;gt; 10 }

  # Should return a new hash with only the given keys, when given an array as a key.
  assert_equal expected, original.slice([:a, :b], :c)
  assert_not_equal expected, original

  # Should replace the hash with only the given keys, when given an array of keys.
  assert_equal expected, original.slice!([:a, :b], :c)
  assert_equal expected, original
end&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T13:23:47+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T13:23:47+01:00</updated-at>
      <user-id type="integer">18469</user-id>
      <version type="integer">4</version>
      <user-name>MatthewRudy</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>@@@ ruby
def test_slice_with_splatted_keys
  original = { :a =&gt; 'x', :b =&gt; 'y', :c =&gt; 10, [:a, :b] =&gt; &quot;an array key&quot; }
  expected = { :a =&gt; 'x', :b =&gt; &quot;y&quot; }

  # Should grab each of the splatted keys.
  assert_equal expected, original.slice(*[:a, :b])
end
@@@</body>
      <body-html>&lt;div&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;def test_slice_with_splatted_keys
  original = { :a =&amp;gt; 'x', :b =&amp;gt; 'y', :c =&amp;gt; 10, [:a, :b] =&amp;gt; &amp;quot;an array key&amp;quot; }
  expected = { :a =&amp;gt; 'x', :b =&amp;gt; &amp;quot;y&amp;quot; }

  # Should grab each of the splatted keys.
  assert_equal expected, original.slice(*[:a, :b])
end&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T13:26:12+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T13:26:12+01:00</updated-at>
      <user-id type="integer">18469</user-id>
      <version type="integer">5</version>
      <user-name>MatthewRudy</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>here's a patch to add the above tests</body>
      <body-html>&lt;div&gt;&lt;p&gt;
here's a patch to add the above tests
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T14:01:34+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T14:01:34+01:00</updated-at>
      <user-id type="integer">18469</user-id>
      <version type="integer">6</version>
      <user-name>MatthewRudy</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>MatthewRudy,

You are correct sir.  I didn't realize a hash could have a key that was an array.  I don't see a way to clarify the intentions of the method's user based on the current footprint of the method.  I suppose we could just clean up the docs a bit to point out that you can use the *splat to pass an array that you don't want used for a single hash key?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
MatthewRudy,
&lt;/p&gt;&lt;p&gt;
You are correct sir.  I didn't realize a hash could have a key that was an array.  I don't see a way to clarify the intentions of the method's user based on the current footprint of the method.  I suppose we could just clean up the docs a bit to point out that you can use the *splat to pass an array that you don't want used for a single hash key?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T14:50:01+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T14:50:01+01:00</updated-at>
      <user-id type="integer">17112</user-id>
      <version type="integer">7</version>
      <user-name>ronin-17112 (at lighthouseapp)</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>yeah.
here's a patch with the tests I added earlier
and documentation on that specific use.

@@@ ruby
      # If you have an array of keys you want to limit to, you should splat them:
      #
      #   valid_keys = [:mass, :velocity, :time]
      #   search(options.slice(*valid_keys))
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;
yeah.
&lt;/p&gt;&lt;p&gt;
here's a patch with the tests I added earlier
&lt;/p&gt;&lt;p&gt;
and documentation on that specific use.
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;      # If you have an array of keys you want to limit to, you should splat them:
      #
      #   valid_keys = [:mass, :velocity, :time]
      #   search(options.slice(*valid_keys))&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T15:09:56+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T15:09:56+01:00</updated-at>
      <user-id type="integer">18469</user-id>
      <version type="integer">8</version>
      <user-name>MatthewRudy</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [b3a2ee7b87a6b2a4c6ff086644f40a472a676b65]) Revert &quot;Hash#slice supports an array of keys [#613 state:resolved]&quot;

This reverts commit 396f9df8916b71f83aad8d56559cf55fc8501679.
http://github.com/rails/rails/commit/b3a2ee7b87a6b2a4c6ff086644f40a472a676b65</body>
      <body-html>&lt;div&gt;&lt;p&gt;
(from [b3a2ee7b87a6b2a4c6ff086644f40a472a676b65]) Revert &quot;Hash#slice supports an array of keys [#613 state:resolved]&quot;
&lt;/p&gt;&lt;p&gt;
This reverts commit 396f9df8916b71f83aad8d56559cf55fc8501679.
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/b3a2ee7b87a6b2a4c6ff086644f40a472a676b65&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-07-17T15:38:36+01:00</created-at>
      <creator-id type="integer">17112</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">613</number>
      <permalink>slice-and-slice-don-t-accept-an-array-of-keys</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activesupport core_ext patch tested</tag>
      <title>Slice and Slice! don't accept an array of keys</title>
      <updated-at type="datetime">2008-07-17T15:38:36+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">9</version>
      <user-name>Repository</user-name>
      <creator-name>ronin-17112 (at lighthouseapp)</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/613</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>c6f79d11ebc11de5f365b5ce489a6dfc095d5ac5</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-07-13T16:09:42+01:00</created-at>
      <filename>slice_with_array_keys.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">32274</id>
      <size type="integer">2122</size>
      <uploader-id type="integer">17112</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/32274/slice_with_array_keys.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>4050b8bdc06a69d21b17e145eeeaa35865e8aec0</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-07-17T15:09:56+01:00</created-at>
      <filename>test_and_document_hash_slice_with_array_keys.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">33256</id>
      <size type="integer">2770</size>
      <uploader-id type="integer">18469</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/33256/test_and_document_hash_slice_with_array_keys.patch</url>
    </attachment>
  </attachments>
</ticket>
