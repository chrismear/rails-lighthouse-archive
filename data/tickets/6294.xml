<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-01-16T02:37:03+00:00</created-at>
  <creator-id type="integer">14891</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">6294</number>
  <permalink>fields_for-not-working-correctly-outside-erb</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>303 fields_for helpers</tag>
  <title>fields_for not working correctly outside erb</title>
  <updated-at type="datetime">2011-04-17T01:00:16+01:00</updated-at>
  <user-id type="integer">136779</user-id>
  <version type="integer">4</version>
  <user-name>rails</user-name>
  <creator-name>Indrek Juhkam</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6294</url>
  <priority-name nil="true"></priority-name>
  <original-body>This code, when in a helper, only outputs existing records hidden id fields.
@@@ ruby
def answer_fields(f)
  f.fields_for :answers {|builder| builder.text_field :title}
end
@@@
It works fine directly inside an .erb file. Also, it works perfectly for unsaved records.


When I commented out this line, then it worked for existing records too. Didn't get any id-s of course.
https://github.com/rails/rails/blob/v3.0.3/actionpack/lib/action_view/helpers/form_helper.rb#L1286
It seems that @template.concat is overwriting the block content.</original-body>
  <latest-body>This code, when in a helper, only outputs existing records hidden id fields.
@@@ ruby
def answer_fields(f)
  f.fields_for :answers {|builder| builder.text_field :title}
end
@@@
It works fine directly inside an .erb file. Also, it works perfectly for unsaved records.


When I commented out this line, then it worked for existing records too. Didn't get any id-s of course.
https://github.com/rails/rails/blob/v3.0.3/actionpack/lib/action_view/helpers/form_helper.rb#L1286
It seems that @template.concat is overwriting the block content.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;This code, when in a helper, only outputs existing records
hidden id fields.&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;def answer_fields(f)
  f.fields_for :answers {|builder| builder.text_field :title}
end&lt;/code&gt;
&lt;/pre&gt;
It works fine directly inside an .erb file. Also, it works
perfectly for unsaved records.
&lt;p&gt;When I commented out this line, then it worked for existing
records too. Didn't get any id-s of course.&lt;br&gt;
&lt;a href=
&quot;https://github.com/rails/rails/blob/v3.0.3/actionpack/lib/action_view/helpers/form_helper.rb#L1286&quot;&gt;
https://github.com/rails/rails/blob/v3.0.3/actionpack/lib/action_vi...&lt;/a&gt;&lt;br&gt;
It seems that @template.concat is overwriting the block
content.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This code, when in a helper, only outputs existing records hidden id fields.
@@@ ruby
def answer_fields(f)
  f.fields_for :answers {|builder| builder.text_field :title}
end
@@@
It works fine directly inside an .erb file. Also, it works perfectly for unsaved records.


When I commented out this line, then it worked for existing records too. Didn't get any id-s of course.
https://github.com/rails/rails/blob/v3.0.3/actionpack/lib/action_view/helpers/form_helper.rb#L1286
It seems that @template.concat is overwriting the block content.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This code, when in a helper, only outputs existing records
hidden id fields.&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;def answer_fields(f)
  f.fields_for :answers {|builder| builder.text_field :title}
end&lt;/code&gt;
&lt;/pre&gt;
It works fine directly inside an .erb file. Also, it works
perfectly for unsaved records.
&lt;p&gt;When I commented out this line, then it worked for existing
records too. Didn't get any id-s of course.&lt;br&gt;
&lt;a href=
&quot;https://github.com/rails/rails/blob/v3.0.3/actionpack/lib/action_view/helpers/form_helper.rb#L1286&quot;&gt;
https://github.com/rails/rails/blob/v3.0.3/actionpack/lib/action_vi...&lt;/a&gt;&lt;br&gt;
It seems that @template.concat is overwriting the block
content.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-15T23:06:17+00:00</created-at>
      <creator-id type="integer">14891</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6294</number>
      <permalink>fields_for-not-working-correctly-outside-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0.3 fields_for helpers</tag>
      <title>fields_for not working correctly outside erb</title>
      <updated-at type="datetime">2011-01-15T23:06:20+00:00</updated-at>
      <user-id type="integer">14891</user-id>
      <version type="integer">1</version>
      <user-name>Indrek Juhkam</user-name>
      <creator-name>Indrek Juhkam</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6294</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>&lt;h1&gt;&lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;Microsoft xbox live points&lt;/a&gt;&lt;/strong&gt;&lt;/h1&gt;is measured by &lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;Microsoft points &lt;/a&gt;&lt;/strong&gt;which is the coin of the Xbox Live Marketplace realm. Where to purchase         &lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;xbox 360 live points&lt;/a&gt;&lt;/strong&gt; quickly? &lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;microsoftxboxlivepoints.com&lt;/a&gt;&lt;/strong&gt; is your     first   choice for   Competitive Price and Knight Service. It is not     xbox live   pre-paid code   but Microsoft Points account.The Microsoft     Points   accounts on our   website are US server.Currently,there are     &lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-4000-points-card.html&quot;&gt;Microsoft Xbox 360 Live 4000 Points&lt;/a&gt;&lt;/strong&gt;   account,&lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-6000-points-card.html&quot;&gt;Microsoft  6000 Points&lt;/a&gt;&lt;/strong&gt; account,&lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-8000-points-card.html&quot;&gt;Microsoft 8000 Points&lt;/a&gt;&lt;/strong&gt; account,&lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-10000-points-card.html&quot;&gt;Microsoft 10000 Points&lt;/a&gt;&lt;/strong&gt;  account available on ours       site:&lt;strong&gt;&lt;a href=&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;www.microsoftxboxlivepoints.com&lt;/a&gt;&lt;/strong&gt;</body>
      <body-html>&lt;div&gt;&lt;h1&gt;&lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;Microsoft xbox live
points&lt;/a&gt;&lt;/strong&gt;&lt;/h1&gt;
is measured by &lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;Microsoft
points&lt;/a&gt;&lt;/strong&gt; which is the coin of the Xbox Live Marketplace
realm. Where to purchase &lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;xbox 360 live
points&lt;/a&gt;&lt;/strong&gt; quickly? &lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;microsoftxboxlivepoints.com&lt;/a&gt;&lt;/strong&gt;
is your first choice for Competitive Price and Knight Service. It
is not xbox live pre-paid code but Microsoft Points account.The
Microsoft Points accounts on our website are US
server.Currently,there are &lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-4000-points-card.html&quot;&gt;
Microsoft Xbox 360 Live 4000 Points&lt;/a&gt;&lt;/strong&gt;
account,&lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-6000-points-card.html&quot;&gt;Microsoft
6000 Points&lt;/a&gt;&lt;/strong&gt; account,&lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-8000-points-card.html&quot;&gt;Microsoft
8000 Points&lt;/a&gt;&lt;/strong&gt; account,&lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/microsoft-xbox-360-live-10000-points-card.html&quot;&gt;Microsoft
10000 Points&lt;/a&gt;&lt;/strong&gt; account available on ours
site:&lt;strong&gt;&lt;a href=
&quot;http://www.microsoftxboxlivepoints.com/&quot;&gt;www.microsoftxboxlivepoints.com&lt;/a&gt;&lt;/strong&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-01-16T00:04:41+00:00</created-at>
      <creator-id type="integer">14891</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6294</number>
      <permalink>fields_for-not-working-correctly-outside-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>3.0.3 fields_for helpers</tag>
      <title>fields_for not working correctly outside erb</title>
      <updated-at type="datetime">2011-01-16T02:37:03+00:00</updated-at>
      <user-id type="integer">132761</user-id>
      <version type="integer">2</version>
      <user-name>depyou</user-name>
      <creator-name>Indrek Juhkam</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6294</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-04-17T01:00:06+01:00</created-at>
      <creator-id type="integer">14891</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:tag: 3.0.3 fields_for helpers
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6294</number>
      <permalink>fields_for-not-working-correctly-outside-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>303 fields_for helpers</tag>
      <title>fields_for not working correctly outside erb</title>
      <updated-at type="datetime">2011-04-17T01:00:16+01:00</updated-at>
      <user-id type="integer">136779</user-id>
      <version type="integer">3</version>
      <user-name>rails</user-name>
      <creator-name>Indrek Juhkam</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6294</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-04-17T01:00:06+01:00</created-at>
      <creator-id type="integer">14891</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6294</number>
      <permalink>fields_for-not-working-correctly-outside-erb</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>303 fields_for helpers</tag>
      <title>fields_for not working correctly outside erb</title>
      <updated-at type="datetime">2011-04-17T01:00:13+01:00</updated-at>
      <user-id type="integer">136779</user-id>
      <version type="integer">4</version>
      <user-name>rails</user-name>
      <creator-name>Indrek Juhkam</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6294</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
