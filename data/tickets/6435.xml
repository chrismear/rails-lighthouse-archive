<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">40272</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-02-15T19:24:13+00:00</created-at>
  <creator-id type="integer">121198</creator-id>
  <milestone-due-on type="datetime">2011-02-27T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">101623</milestone-id>
  <number type="integer">6435</number>
  <permalink>gctime-profiler-checks-against-incorrect-object-for-respond_tototal_time</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag nil="true"></tag>
  <title>GcTime profiler checks against incorrect object for respond_to?(:total_time)</title>
  <updated-at type="datetime">2011-02-15T22:16:07+00:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">5</version>
  <user-name>Repository</user-name>
  <creator-name>jnimety</creator-name>
  <assigned-user-name>Santiago Pastorino</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6435</url>
  <milestone-title>3.0.5</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>The GcTime profile test does not work on ruby 1.9.2 because the class incorrectly checks  GC.respond_to?(:total_time) when it should check  GC::Profiler.respond_to?(:total_time).  I have attached a patch.</original-body>
  <latest-body>The GcTime profile test does not work on ruby 1.9.2 because the class incorrectly checks  GC.respond_to?(:total_time) when it should check  GC::Profiler.respond_to?(:total_time).  I have attached a patch.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;The GcTime profile test does not work on ruby 1.9.2 because the
class incorrectly checks GC.respond_to?(:total_time) when it should
check GC::Profiler.respond_to?(:total_time). I have attached a
patch.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The GcTime profile test does not work on ruby 1.9.2 because the class incorrectly checks  GC.respond_to?(:total_time) when it should check  GC::Profiler.respond_to?(:total_time).  I have attached a patch.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The GcTime profile test does not work on ruby 1.9.2 because the
class incorrectly checks GC.respond_to?(:total_time) when it should
check GC::Profiler.respond_to?(:total_time). I have attached a
patch.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-15T19:24:13+00:00</created-at>
      <creator-id type="integer">121198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6435</number>
      <permalink>gctime-profiler-checks-against-incorrect-object-for-respond_tototal_time</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>GcTime profiler checks against incorrect object for respond_to?(:total_time)</title>
      <updated-at type="datetime">2011-02-15T19:24:16+00:00</updated-at>
      <user-id type="integer">121198</user-id>
      <version type="integer">1</version>
      <user-name>jnimety</user-name>
      <creator-name>jnimety</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6435</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I can confirm this bug exists using Rails 3.0.4 with Ruby 1.9.2-p136 on Debian Squeeze.

    $ uname -a
    Linux Akiba 2.6.32-5-686 #1 SMP Wed Jan 12 04:01:41 UTC 2011 i686 GNU/Linux

    $ ruby --version
    ruby 1.9.2p136 (2010-12-25 revision 30365) [i686-linux]

    $ rails --version
    Rails 3.0.4</body>
      <body-html>&lt;div&gt;&lt;p&gt;I can confirm this bug exists using Rails 3.0.4 with Ruby
1.9.2-p136 on Debian Squeeze.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ uname -a
Linux Akiba 2.6.32-5-686 [#1](/projects/8994/tickets/1 &quot;Ticket #1&quot;) SMP Wed Jan 12 04:01:41 UTC 2011 i686 GNU/Linux

$ ruby --version
ruby 1.9.2p136 (2010-12-25 revision 30365) [i686-linux]

$ rails --version
Rails 3.0.4&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-15T19:32:20+00:00</created-at>
      <creator-id type="integer">121198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6435</number>
      <permalink>gctime-profiler-checks-against-incorrect-object-for-respond_tototal_time</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>GcTime profiler checks against incorrect object for respond_to?(:total_time)</title>
      <updated-at type="datetime">2011-02-15T19:32:25+00:00</updated-at>
      <user-id type="integer">25438</user-id>
      <version type="integer">2</version>
      <user-name>yonkeltron</user-name>
      <creator-name>jnimety</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6435</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Good catch but is not the appropriate fix you will break 1.8 with that.
Just check for defined?(GC::Profiler).
Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Good catch but is not the appropriate fix you will break 1.8
with that.&lt;br&gt;
Just check for defined?(GC::Profiler).&lt;br&gt;
Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-15T20:32:49+00:00</created-at>
      <creator-id type="integer">121198</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">101623</milestone-id>
      <number type="integer">6435</number>
      <permalink>gctime-profiler-checks-against-incorrect-object-for-respond_tototal_time</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>GcTime profiler checks against incorrect object for respond_to?(:total_time)</title>
      <updated-at type="datetime">2011-02-15T20:33:00+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">3</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>jnimety</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6435</url>
      <milestone-title>3.0.5</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [ef573342106369b07bb5c97a0db0b121d6d18621]) GcTime incorrectly checks GC.respond_to?(:total_time), it should check GC::Profiler.respond_to?(:total_time)

[#6435 state:committed]

Signed-off-by: Santiago Pastorino &lt;santiago@wyeworks.com&gt;
https://github.com/rails/rails/commit/ef573342106369b07bb5c97a0db0b121d6d18621</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/ef573342106369b07bb5c97a0db0b121d6d18621&quot;
title=
&quot;Changeset [ef573342106369b07bb5c97a0db0b121d6d18621]&quot;&gt;[ef573342106369b07bb5c97a0db0b121d6d18621]&lt;/a&gt;)
GcTime incorrectly checks GC.respond_to?(:total_time), it should
check GC::Profiler.respond_to?(:total_time)&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/6435&quot; title=
&quot;Ticket #6435&quot;&gt;#6435&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Santiago Pastorino
&lt;a&gt;santiago@wyeworks.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;https://github.com/rails/rails/commit/ef573342106369b07bb5c97a0db0b121d6d18621&quot;&gt;
https://github.com/rails/rails/commit/ef573342106369b07bb5c97a0db0b...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-15T22:15:08+00:00</created-at>
      <creator-id type="integer">121198</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">101623</milestone-id>
      <number type="integer">6435</number>
      <permalink>gctime-profiler-checks-against-incorrect-object-for-respond_tototal_time</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>GcTime profiler checks against incorrect object for respond_to?(:total_time)</title>
      <updated-at type="datetime">2011-02-15T22:15:17+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">4</version>
      <user-name>Repository</user-name>
      <creator-name>jnimety</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6435</url>
      <milestone-title>3.0.5</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>(from [0cee3034c4bb26e8b82bda513694b9e650961744]) GcTime incorrectly checks GC.respond_to?(:total_time), it should check GC::Profiler.respond_to?(:total_time)

[#6435 state:committed]

Signed-off-by: Santiago Pastorino &lt;santiago@wyeworks.com&gt;
https://github.com/rails/rails/commit/0cee3034c4bb26e8b82bda513694b9e650961744</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/0cee3034c4bb26e8b82bda513694b9e650961744&quot;
title=
&quot;Changeset [0cee3034c4bb26e8b82bda513694b9e650961744]&quot;&gt;[0cee3034c4bb26e8b82bda513694b9e650961744]&lt;/a&gt;)
GcTime incorrectly checks GC.respond_to?(:total_time), it should
check GC::Profiler.respond_to?(:total_time)&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/6435&quot; title=
&quot;Ticket #6435&quot;&gt;#6435&lt;/a&gt; state:committed]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Santiago Pastorino &lt;a href=
&quot;mailto:santiago@wyeworks.com&quot;&gt;santiago@wyeworks.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;https://github.com/rails/rails/commit/0cee3034c4bb26e8b82bda513694b9e650961744&quot;&gt;
https://github.com/rails/rails/commit/0cee3034c4bb26e8b82bda513694b...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-15T22:15:57+00:00</created-at>
      <creator-id type="integer">121198</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">101623</milestone-id>
      <number type="integer">6435</number>
      <permalink>gctime-profiler-checks-against-incorrect-object-for-respond_tototal_time</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag nil="true"></tag>
      <title>GcTime profiler checks against incorrect object for respond_to?(:total_time)</title>
      <updated-at type="datetime">2011-02-15T22:16:07+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">5</version>
      <user-name>Repository</user-name>
      <creator-name>jnimety</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6435</url>
      <milestone-title>3.0.5</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>57a1d5db2a5cdf09ca11a93fb6d7f5ef79a3ac3e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-02-15T19:24:13+00:00</created-at>
      <filename>gc_time_respond_to.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">913858</id>
      <size type="integer">1020</size>
      <uploader-id type="integer">121198</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/913858/gc_time_respond_to.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>c1de69da02841bfe1e48c2d313a70f23858e1868</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-02-15T22:03:34+00:00</created-at>
      <filename>gc_time_respond_to.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">914204</id>
      <size type="integer">1046</size>
      <uploader-id type="integer">121198</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/914204/gc_time_respond_to.diff</url>
    </attachment>
  </attachments>
</ticket>
