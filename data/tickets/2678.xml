<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-05-20T07:00:40+01:00</created-at>
  <creator-id type="integer">749</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2678</number>
  <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
  <priority type="integer">1802</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>committed</state>
  <tag>2-3-stable 2.x gems patch vendor</tag>
  <title>Recursively unpack gem dependencies *and their dependencies*</title>
  <updated-at type="datetime">2009-06-09T08:58:26+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">10</version>
  <user-name>Repository</user-name>
  <creator-name>Graeme Mathieson</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>Attached is a trivial patch against the 2-3-stable branch so that, when unpacking gem dependencies, it also unpacks the dependencies of those dependencies.  Take, for example, I have:

@@@ruby
config.gem &quot;bamboo_rails&quot;
@@@

The bamboo_rails gem depends upon ci_reporter, which depends upon builder.  In the current 2-3-stable, if I run:

@@@
rake gems:unpack:dependencies
@@@

it will unpack bamboo_rails and ci_reporter, but not builder.  With this patch, it also unpacks builder.</original-body>
  <latest-body>Attached is a trivial patch against the 2-3-stable branch so that, when unpacking gem dependencies, it also unpacks the dependencies of those dependencies.  Take, for example, I have:

@@@ruby
config.gem &quot;bamboo_rails&quot;
@@@

The bamboo_rails gem depends upon ci_reporter, which depends upon builder.  In the current 2-3-stable, if I run:

@@@
rake gems:unpack:dependencies
@@@

it will unpack bamboo_rails and ci_reporter, but not builder.  With this patch, it also unpacks builder.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Attached is a trivial patch against the 2-3-stable branch so
that, when unpacking gem dependencies, it also unpacks the
dependencies of those dependencies. Take, for example, I have:&lt;/p&gt;
&lt;p&gt;@@@ruby config.gem &quot;bamboo_rails&quot;&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;

The bamboo_rails gem depends upon ci_reporter, which depends upon builder.  In the current 2-3-stable, if I run:

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;rake gems:unpack:dependencies&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;

it will unpack bamboo_rails and ci_reporter, but not builder.  With this patch, it also unpacks builder.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Attached is a trivial patch against the 2-3-stable branch so that, when unpacking gem dependencies, it also unpacks the dependencies of those dependencies.  Take, for example, I have:

@@@ ruby
config.gem &quot;bamboo_rails&quot;
@@@

The bamboo_rails gem depends upon ci_reporter, which depends upon builder.  In the current 2-3-stable, if I run:

@@@
rake gems:unpack:dependencies
@@@

it will unpack bamboo_rails and ci_reporter, but not builder.  With this patch, it also unpacks builder.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached is a trivial patch against the 2-3-stable branch so
that, when unpacking gem dependencies, it also unpacks the
dependencies of those dependencies. Take, for example, I have:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;config.gem &quot;bamboo_rails&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The bamboo_rails gem depends upon ci_reporter, which depends
upon builder. In the current 2-3-stable, if I run:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;rake gems:unpack:dependencies&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;it will unpack bamboo_rails and ci_reporter, but not builder.
With this patch, it also unpacks builder.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-20T07:00:40+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-05-20T07:02:11+01:00</updated-at>
      <user-id type="integer">749</user-id>
      <version type="integer">1</version>
      <user-name>Graeme Mathieson</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I seem to have screwed up the formatting on the main ticket.  Try again:

Attached is a trivial patch against the 2-3-stable branch so that, when unpacking gem dependencies, it also unpacks the dependencies of those dependencies.  Take, for example, I have:

@@@ ruby
config.gem &quot;bamboo_rails&quot;
@@@

The bamboo_rails gem depends upon ci_reporter, which depends upon builder.  In the current 2-3-stable, if I run:

@@@
rake gems:unpack:dependencies
@@@

it will unpack bamboo_rails and ci_reporter, but not builder.  With this patch, it also unpacks builder.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I seem to have screwed up the formatting on the main ticket. Try
again:&lt;/p&gt;
&lt;p&gt;Attached is a trivial patch against the 2-3-stable branch so
that, when unpacking gem dependencies, it also unpacks the
dependencies of those dependencies. Take, for example, I have:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;ruby&quot;&gt;config.gem &quot;bamboo_rails&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The bamboo_rails gem depends upon ci_reporter, which depends
upon builder. In the current 2-3-stable, if I run:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;rake gems:unpack:dependencies&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;it will unpack bamboo_rails and ci_reporter, but not builder.
With this patch, it also unpacks builder.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-20T07:01:56+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-05-20T07:02:01+01:00</updated-at>
      <user-id type="integer">749</user-id>
      <version type="integer">2</version>
      <user-name>Graeme Mathieson</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1. Easily vendoring all gem dependencies would be great.</body>
      <body-html>&lt;div&gt;&lt;ol&gt;
&lt;li&gt;Easily vendoring all gem dependencies would be great.&lt;/li&gt;
&lt;/ol&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-20T10:56:39+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-05-20T10:56:43+01:00</updated-at>
      <user-id type="integer">57469</user-id>
      <version type="integer">3</version>
      <user-name>Craig Webster</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Err, how embarrassing.  I seem to have attached the wrong patch!  Here's the correct one.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Err, how embarrassing. I seem to have attached the wrong patch!
Here's the correct one.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-26T17:13:26+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-05-26T17:13:31+01:00</updated-at>
      <user-id type="integer">749</user-id>
      <version type="integer">4</version>
      <user-name>Graeme Mathieson</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Looks good, but I'd like to see a test for this one included. There are 'fake' gems in railties/test/vendor/gems used to test the gem system. If you need any assistance, I'm usually around as ddollar on #rails-contrib@freenode</body>
      <body-html>&lt;div&gt;&lt;p&gt;Looks good, but I'd like to see a test for this one included.
There are 'fake' gems in railties/test/vendor/gems used to test the
gem system. If you need any assistance, I'm usually around as
ddollar on #rails-contrib@freenode&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-27T16:20:25+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-05-27T16:20:29+01:00</updated-at>
      <user-id type="integer">8721</user-id>
      <version type="integer">5</version>
      <user-name>David Dollar</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Taking another look at this and #2722 it would probably be better just to pass the whole options hash down to children.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Taking another look at this and &lt;a href=
&quot;/projects/8994/tickets/2722&quot; title=&quot;Ticket #2722&quot;&gt;#2722&lt;/a&gt; it
would probably be better just to pass the whole options hash down
to children.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-27T17:32:52+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-05-27T17:32:58+01:00</updated-at>
      <user-id type="integer">8721</user-id>
      <version type="integer">6</version>
      <user-name>David Dollar</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>A fix for this is included in #2773.

There's a test included in that patch for the identical case in gems:build.</body>
      <body-html>&lt;div&gt;&lt;p&gt;A fix for this is included in &lt;a href=
&quot;/projects/8994/tickets/2773&quot; title=&quot;Ticket #2773&quot;&gt;#2773&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There's a test included in that patch for the identical case in
gems:build.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-06T23:25:41+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-06-06T23:25:46+01:00</updated-at>
      <user-id type="integer">22589</user-id>
      <version type="integer">7</version>
      <user-name>Matt Jones</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I'm happy for this ticket to be closed alongside #2773 being resolved.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm happy for this ticket to be closed alongside &lt;a href=
&quot;/projects/8994/tickets/2773&quot; title=&quot;Ticket #2773&quot;&gt;#2773&lt;/a&gt; being
resolved.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-06-09T05:32:49+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-06-09T05:32:51+01:00</updated-at>
      <user-id type="integer">749</user-id>
      <version type="integer">8</version>
      <user-name>Graeme Mathieson</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [2c3d2906b255b1cb3aeb5d3abb9fe2dcb2872c28]) Fix several issues with the 2.3.2 gem loader.

Incorporates the following:

- migrates back small change to gems:build:force from bfc1609a501fc3ed442685819de5bcdb5fbada1c to finish closing #2266.

- unrolls to_proc calls in gems.rake, to match the change in master.

- fixes #2722 by passing the options hash to dependencies during build. (includes a test)

- fixes #2721 by loading the specification directly in from_directory_name. Adds an option to opt-out of specification loading when needed (in gems:refresh_specs, for instance). Includes tests.

- fixes #2679 by refreshing specs for all frozen gems rather than just gems loaded from the environment.

- fixes #2678 by passing the options hash to dependencies during unpack.

Signed-off-by: Michael Koziarski &lt;michael@koziarski.com&gt;
http://github.com/rails/rails/commit/2c3d2906b255b1cb3aeb5d3abb9fe2dcb2872c28</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/2c3d2906b255b1cb3aeb5d3abb9fe2dcb2872c28&quot;
title=
&quot;Changeset [2c3d2906b255b1cb3aeb5d3abb9fe2dcb2872c28]&quot;&gt;[2c3d2906b255b1cb3aeb5d3abb9fe2dcb2872c28]&lt;/a&gt;)
Fix several issues with the 2.3.2 gem loader.&lt;/p&gt;
&lt;p&gt;Incorporates the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;migrates back small change to gems:build:force from
bfc1609a501fc3ed442685819de5bcdb5fbada1c to finish closing &lt;a href=
&quot;/projects/8994/tickets/2266&quot; title=&quot;Ticket #2266&quot;&gt;#2266&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;unrolls to_proc calls in gems.rake, to match the change in
master.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2722&quot; title=
&quot;Ticket #2722&quot;&gt;#2722&lt;/a&gt; by passing the options hash to
dependencies during build. (includes a test)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2721&quot; title=
&quot;Ticket #2721&quot;&gt;#2721&lt;/a&gt; by loading the specification directly in
from_directory_name. Adds an option to opt-out of specification
loading when needed (in gems:refresh_specs, for instance). Includes
tests.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2679&quot; title=
&quot;Ticket #2679&quot;&gt;#2679&lt;/a&gt; by refreshing specs for all frozen gems
rather than just gems loaded from the environment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2678&quot; title=
&quot;Ticket #2678&quot;&gt;#2678&lt;/a&gt; by passing the options hash to
dependencies during unpack.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Signed-off-by: Michael Koziarski
&lt;a&gt;michael@koziarski.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/2c3d2906b255b1cb3aeb5d3abb9fe2dcb2872c28&quot;&gt;
http://github.com/rails/rails/commit/2c3d2906b255b1cb3aeb5d3abb9fe2...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-06-09T08:58:15+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-06-09T08:58:21+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">9</version>
      <user-name>Repository</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [41a94048e55e082f373e19d9fcee311860aaba9e]) Fix several issues with the 2.3.2 gem loader.

Incorporates the following:

- migrates back small change to gems:build:force from bfc1609a501fc3ed442685819de5bcdb5fbada1c to finish closing #2266.

- unrolls to_proc calls in gems.rake, to match the change in master.

- fixes #2722 by passing the options hash to dependencies during build. (includes a test)

- fixes #2721 by loading the specification directly in from_directory_name. Adds an option to opt-out of specification loading when needed (in gems:refresh_specs, for instance). Includes tests.

- fixes #2679 by refreshing specs for all frozen gems rather than just gems loaded from the environment.

- fixes #2678 by passing the options hash to dependencies during unpack.

Signed-off-by: Michael Koziarski &lt;michael@koziarski.com&gt;
http://github.com/rails/rails/commit/41a94048e55e082f373e19d9fcee311860aaba9e</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/41a94048e55e082f373e19d9fcee311860aaba9e&quot;
title=
&quot;Changeset [41a94048e55e082f373e19d9fcee311860aaba9e]&quot;&gt;[41a94048e55e082f373e19d9fcee311860aaba9e]&lt;/a&gt;)
Fix several issues with the 2.3.2 gem loader.&lt;/p&gt;
&lt;p&gt;Incorporates the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;migrates back small change to gems:build:force from
bfc1609a501fc3ed442685819de5bcdb5fbada1c to finish closing &lt;a href=
&quot;/projects/8994/tickets/2266&quot; title=&quot;Ticket #2266&quot;&gt;#2266&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;unrolls to_proc calls in gems.rake, to match the change in
master.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2722&quot; title=
&quot;Ticket #2722&quot;&gt;#2722&lt;/a&gt; by passing the options hash to
dependencies during build. (includes a test)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2721&quot; title=
&quot;Ticket #2721&quot;&gt;#2721&lt;/a&gt; by loading the specification directly in
from_directory_name. Adds an option to opt-out of specification
loading when needed (in gems:refresh_specs, for instance). Includes
tests.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2679&quot; title=
&quot;Ticket #2679&quot;&gt;#2679&lt;/a&gt; by refreshing specs for all frozen gems
rather than just gems loaded from the environment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fixes &lt;a href=&quot;/projects/8994/tickets/2678&quot; title=
&quot;Ticket #2678&quot;&gt;#2678&lt;/a&gt; by passing the options hash to
dependencies during unpack.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Signed-off-by: Michael Koziarski &lt;a href=
&quot;mailto:michael@koziarski.com&quot;&gt;michael@koziarski.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/41a94048e55e082f373e19d9fcee311860aaba9e&quot;&gt;
http://github.com/rails/rails/commit/41a94048e55e082f373e19d9fcee31...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-06-09T08:58:21+01:00</created-at>
      <creator-id type="integer">749</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2678</number>
      <permalink>recursively-unpack-gem-dependencies-and-their-dependencies</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>2-3-stable 2.x gems patch vendor</tag>
      <title>Recursively unpack gem dependencies *and their dependencies*</title>
      <updated-at type="datetime">2009-06-09T08:58:26+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">10</version>
      <user-name>Repository</user-name>
      <creator-name>Graeme Mathieson</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2678</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>0968a4ca4ae80216f6837dbf36e3f2bbe7f344e9</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-05-26T17:13:26+01:00</created-at>
      <filename>0001-Unpack-dependencies-recursively.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">126302</id>
      <size type="integer">882</size>
      <uploader-id type="integer">749</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/126302/0001-Unpack-dependencies-recursively.patch</url>
    </attachment>
  </attachments>
</ticket>
