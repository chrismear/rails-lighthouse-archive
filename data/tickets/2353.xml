<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-03-26T19:28:53+00:00</created-at>
  <creator-id type="integer">22682</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">2353</number>
  <permalink>helper-caching-issue</permalink>
  <priority type="integer">1514</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>2.3.2 helper</tag>
  <title>helper caching issue</title>
  <updated-at type="datetime">2009-08-10T02:44:54+01:00</updated-at>
  <user-id type="integer">7211</user-id>
  <version type="integer">9</version>
  <user-name>CancelProfileIsBroken</user-name>
  <creator-name>Greg Donald</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>I have a helper:

def pretty_datetime( dt )
 dt.strftime( &quot;%b %d, %Y %I:%m%p&quot; )
end


and I have a partial that uses the helper like this:

&lt;%= pretty_datetime alert.updated_at %&gt;


The problem is when I update the record the previous updated_at value is still being displayed.


When I don't use the helper I see the updated_at value change every time.

&lt;%= alert.updated_at %&gt;


When I put the helper call back again, the partial again shows me the previous updated_at value, even after multiple updates and me taking it away and putting it back multiple times.  Even if I restart the server I'm still seeing the old updated_at values from when the record was first created.  I see the values changing in the database when I update the record so I know the problem isn't there.


This is in development mode, Rails 2.3.2.</original-body>
  <latest-body>I have a helper:

def pretty_datetime( dt )
 dt.strftime( &quot;%b %d, %Y %I:%m%p&quot; )
end


and I have a partial that uses the helper like this:

&lt;%= pretty_datetime alert.updated_at %&gt;


The problem is when I update the record the previous updated_at value is still being displayed.


When I don't use the helper I see the updated_at value change every time.

&lt;%= alert.updated_at %&gt;


When I put the helper call back again, the partial again shows me the previous updated_at value, even after multiple updates and me taking it away and putting it back multiple times.  Even if I restart the server I'm still seeing the old updated_at values from when the record was first created.  I see the values changing in the database when I update the record so I know the problem isn't there.


This is in development mode, Rails 2.3.2.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I have a helper:&lt;/p&gt;
&lt;p&gt;def pretty_datetime( dt ) dt.strftime( &quot;%b %d, %Y %I:%m%p&quot; )
end&lt;/p&gt;
&lt;p&gt;and I have a partial that uses the helper like this:&lt;/p&gt;
&lt;p&gt;&amp;lt;%= pretty_datetime alert.updated_at %&amp;gt;&lt;/p&gt;
&lt;p&gt;The problem is when I update the record the previous updated_at
value is still being displayed.&lt;/p&gt;
&lt;p&gt;When I don't use the helper I see the updated_at value change
every time.&lt;/p&gt;
&lt;p&gt;&amp;lt;%= alert.updated_at %&amp;gt;&lt;/p&gt;
&lt;p&gt;When I put the helper call back again, the partial again shows
me the previous updated_at value, even after multiple updates and
me taking it away and putting it back multiple times. Even if I
restart the server I'm still seeing the old updated_at values from
when the record was first created. I see the values changing in the
database when I update the record so I know the problem isn't
there.&lt;/p&gt;
&lt;p&gt;This is in development mode, Rails 2.3.2.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I have a helper:

def pretty_datetime( dt )
 dt.strftime( &quot;%b %d, %Y %I:%m%p&quot; )
end


and I have a partial that uses the helper like this:

&lt;%= pretty_datetime alert.updated_at %&gt;


The problem is when I update the record the previous updated_at value is still being displayed.


When I don't use the helper I see the updated_at value change every time.

&lt;%= alert.updated_at %&gt;


When I put the helper call back again, the partial again shows me the previous updated_at value, even after multiple updates and me taking it away and putting it back multiple times.  Even if I restart the server I'm still seeing the old updated_at values from when the record was first created.  I see the values changing in the database when I update the record so I know the problem isn't there.


This is in development mode, Rails 2.3.2.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have a helper:&lt;/p&gt;
&lt;p&gt;def pretty_datetime( dt ) dt.strftime( &quot;%b %d, %Y %I:%m%p&quot; )
end&lt;/p&gt;
&lt;p&gt;and I have a partial that uses the helper like this:&lt;/p&gt;
&lt;p&gt;&amp;lt;%= pretty_datetime alert.updated_at %&amp;gt;&lt;/p&gt;
&lt;p&gt;The problem is when I update the record the previous updated_at
value is still being displayed.&lt;/p&gt;
&lt;p&gt;When I don't use the helper I see the updated_at value change
every time.&lt;/p&gt;
&lt;p&gt;&amp;lt;%= alert.updated_at %&amp;gt;&lt;/p&gt;
&lt;p&gt;When I put the helper call back again, the partial again shows
me the previous updated_at value, even after multiple updates and
me taking it away and putting it back multiple times. Even if I
restart the server I'm still seeing the old updated_at values from
when the record was first created. I see the values changing in the
database when I update the record so I know the problem isn't
there.&lt;/p&gt;
&lt;p&gt;This is in development mode, Rails 2.3.2.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-26T19:28:53+00:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-03-26T19:28:57+00:00</updated-at>
      <user-id type="integer">22682</user-id>
      <version type="integer">1</version>
      <user-name>Greg Donald</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Can you create smallish 1 controller 1 helper app on github to demonstrate the issue?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can you create smallish 1 controller 1 helper app on github to
demonstrate the issue?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-03-27T15:11:10+00:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-03-27T15:11:12+00:00</updated-at>
      <user-id type="integer">46643</user-id>
      <version type="integer">2</version>
      <user-name>thedarkone</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-05T15:50:33+01:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2.3.2 helper
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 bugmash helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-08-05T15:50:36+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">3</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Invalid. First off, I think because you're trying to display `updated_at`, when you edit it, ActiveRecord tries to update it like it's a timestamp. Also, I think this is not the best way to show a custom date format. You should instead set a custom format in an initializer, like so:

@@@ ruby
ActiveSupport::CoreExtensions::Date::Conversions::DATE_FORMATS.merge!(
:my_custom_format =&gt; &#8220;%A %B %d, %Y&#8221;
)
@@@

Then in your view:

@@@ ruby
  @user.updated_at.to_formatted_s(:my_custom_format)
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Invalid. First off, I think because you're trying to display
&lt;code&gt;updated_at&lt;/code&gt;, when you edit it, ActiveRecord tries to
update it like it's a timestamp. Also, I think this is not the best
way to show a custom date format. You should instead set a custom
format in an initializer, like so:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;ActiveSupport::CoreExtensions::Date::Conversions::DATE_FORMATS.merge!(
:my_custom_format =&amp;gt; &amp;ldquo;%A %B %d, %Y&amp;rdquo;
)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Then in your view:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=
&quot;ruby&quot;&gt;  @user.updated_at.to_formatted_s(:my_custom_format)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-08T23:50:58+01:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 bugmash helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-08-08T23:51:03+01:00</updated-at>
      <user-id type="integer">31296</user-id>
      <version type="integer">4</version>
      <user-name>Nick Quaranto</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>-1 I agree with Nick. I've never run into this issue with apps I've worked on, and using active support is much better suited to this task than cluttering your helpers. Double check the method isn't memoized either.</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 I agree with Nick. I've never run into this issue with apps
I've worked on, and using active support is much better suited to
this task than cluttering your helpers. Double check the method
isn't memoized either.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T04:58:35+01:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 bugmash helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-08-09T04:58:38+01:00</updated-at>
      <user-id type="integer">26790</user-id>
      <version type="integer">5</version>
      <user-name>Kieran P</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>not reproducible

-1 Agreed with Nick. The problem lies in defining that pretty_datetime. Invalid.</body>
      <body-html>&lt;div&gt;&lt;p&gt;not reproducible&lt;/p&gt;
&lt;p&gt;-1 Agreed with Nick. The problem lies in defining that
pretty_datetime. Invalid.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T16:23:34+01:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 bugmash helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-08-09T16:23:37+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">6</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>-1 was unable to reproduce. I agree with nick, use of #to_s with a custom format is probably the consist way to approach this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 was unable to reproduce. I agree with nick, use of #to_s with
a custom format is probably the consist way to approach this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T17:55:59+01:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 bugmash helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-08-09T17:56:04+01:00</updated-at>
      <user-id type="integer">10379</user-id>
      <version type="integer">7</version>
      <user-name>Elad Meidar</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>-1 should use date conversions</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 should use date conversions&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-08-09T18:00:20+01:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.3.2 bugmash helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-08-09T18:00:25+01:00</updated-at>
      <user-id type="integer">10900</user-id>
      <version type="integer">8</version>
      <user-name>Dan Croak</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-08-10T02:44:52+01:00</created-at>
      <creator-id type="integer">22682</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:tag: 2.3.2 bugmash helper
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2353</number>
      <permalink>helper-caching-issue</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>&quot;&quot; 2.3.2 helper</tag>
      <title>helper caching issue</title>
      <updated-at type="datetime">2009-08-10T02:44:54+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">9</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Greg Donald</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2353</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
