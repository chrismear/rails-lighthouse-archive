<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">85</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-21T01:47:08+01:00</created-at>
  <creator-id type="integer">17515</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">834</number>
  <permalink>make-migrations-use-transaction-and-rollback-if-something-was-wrong</permalink>
  <priority type="integer">0</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activerecord migrations</tag>
  <title>Make migrations use transaction and rollback if something was wrong</title>
  <updated-at type="datetime">2010-07-21T01:47:08+01:00</updated-at>
  <user-id type="integer">17393</user-id>
  <version type="integer">4</version>
  <user-name>Repository</user-name>
  <creator-name>Ian Bailey</creator-name>
  <assigned-user-name>Jeremy Kemper</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/834</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>When a migration is running and an error is raised, everything before the error is applied to the database schema and everything before (obviously) doesn't. Also, the migration version is stored as executed, which creates schema inconsistency and migration version control brokeness. 

This would not work for migrations involving schema changes on databases that do not support DDL rollback (i.e. MySQL, Oracle).

This ticket was in &quot;Trac ticket 5470&quot;:http://dev.rubyonrails.org/ticket/5470 but was not resovled. There are working patches on that ticket.</original-body>
  <latest-body>When a migration is running and an error is raised, everything before the error is applied to the database schema and everything before (obviously) doesn't. Also, the migration version is stored as executed, which creates schema inconsistency and migration version control brokeness. 

This would not work for migrations involving schema changes on databases that do not support DDL rollback (i.e. MySQL, Oracle).

This ticket was in &quot;Trac ticket 5470&quot;:http://dev.rubyonrails.org/ticket/5470 but was not resovled. There are working patches on that ticket.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When a migration is running and an error is raised, everything before the error is applied to the database schema and everything before (obviously) doesn't. Also, the migration version is stored as executed, which creates schema inconsistency and migration version control brokeness.&lt;/p&gt;

&lt;p&gt;This would not work for migrations involving schema changes on databases that do not support DDL rollback (i.e. MySQL, Oracle).&lt;/p&gt;

&lt;p&gt;This ticket was in &lt;a href=&quot;http://dev.rubyonrails.org/ticket/5470&quot;&gt;Trac ticket 5470&lt;/a&gt; but was not resovled. There are working patches on that ticket.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When a migration is running and an error is raised, everything before the error is applied to the database schema and everything before (obviously) doesn't. Also, the migration version is stored as executed, which creates schema inconsistency and migration version control brokeness. 

This would not work for migrations involving schema changes on databases that do not support DDL rollback (i.e. MySQL, Oracle).

This ticket was in &quot;Trac ticket 5470&quot;:http://dev.rubyonrails.org/ticket/5470 but was not resovled. There are working patches on that ticket.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When a migration is running and an error is raised, everything before the error is applied to the database schema and everything before (obviously) doesn't. Also, the migration version is stored as executed, which creates schema inconsistency and migration version control brokeness.&lt;/p&gt;

&lt;p&gt;This would not work for migrations involving schema changes on databases that do not support DDL rollback (i.e. MySQL, Oracle).&lt;/p&gt;

&lt;p&gt;This ticket was in &lt;a href=&quot;http://dev.rubyonrails.org/ticket/5470&quot;&gt;Trac ticket 5470&lt;/a&gt; but was not resovled. There are working patches on that ticket.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-14T19:58:53+01:00</created-at>
      <creator-id type="integer">17515</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">834</number>
      <permalink>make-migrations-use-transaction-and-rollback-if-something-was-wrong</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord migrations</tag>
      <title>Make migrations use transaction and rollback if something was wrong</title>
      <updated-at type="datetime">2008-08-14T19:58:53+01:00</updated-at>
      <user-id type="integer">17515</user-id>
      <version type="integer">1</version>
      <user-name>Ian Bailey</user-name>
      <creator-name>Ian Bailey</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/834</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Rebased the patch from trac and added a test.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rebased the patch from trac and added a test.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-22T22:03:07+01:00</created-at>
      <creator-id type="integer">17515</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">834</number>
      <permalink>make-migrations-use-transaction-and-rollback-if-something-was-wrong</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord migrations</tag>
      <title>Make migrations use transaction and rollback if something was wrong</title>
      <updated-at type="datetime">2008-08-22T22:03:07+01:00</updated-at>
      <user-id type="integer">14890</user-id>
      <version type="integer">2</version>
      <user-name>Tarmo T&#228;nav</user-name>
      <creator-name>Ian Bailey</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/834</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-08-22T22:19:15+01:00</created-at>
      <creator-id type="integer">17515</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">834</number>
      <permalink>make-migrations-use-transaction-and-rollback-if-something-was-wrong</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord migrations</tag>
      <title>Make migrations use transaction and rollback if something was wrong</title>
      <updated-at type="datetime">2008-08-22T22:19:15+01:00</updated-at>
      <user-id type="integer">14890</user-id>
      <version type="integer">3</version>
      <user-name>Tarmo T&#228;nav</user-name>
      <creator-name>Ian Bailey</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/834</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>(from [707ee0e2695e85186d59aa407f09691ebfcc3125]) Made migrations transactional for PostgreSQL [#834 state:resolved]

Patch originally from http://dev.rubyonrails.org/ticket/5470
http://github.com/rails/rails/commit/707ee0e2695e85186d59aa407f09691ebfcc3125</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from [707ee0e2695e85186d59aa407f09691ebfcc3125]) Made migrations transactional for PostgreSQL [&lt;a href=&quot;/projects/8994/tickets/834&quot; title=&quot;Ticket #834&quot;&gt;#834&lt;/a&gt; state:resolved]&lt;/p&gt;

&lt;p&gt;Patch originally from &lt;a href=&quot;http://dev.rubyonrails.org/ticket/5470&quot;&gt;http://dev.rubyonrails.org/ticke...&lt;/a&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/707ee0e2695e85186d59aa407f09691ebfcc3125&quot;&gt;http://github.com/rails/rails/co...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-08-22T22:47:00+01:00</created-at>
      <creator-id type="integer">17515</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">834</number>
      <permalink>make-migrations-use-transaction-and-rollback-if-something-was-wrong</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord migrations</tag>
      <title>Make migrations use transaction and rollback if something was wrong</title>
      <updated-at type="datetime">2008-08-22T22:47:00+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">4</version>
      <user-name>Repository</user-name>
      <creator-name>Ian Bailey</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/834</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>following your &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net&quot;&gt;cheap jewlery&lt;/a&gt;&lt;/b&gt; wedding. # Step 3 &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net/fashion-jewelry/chanel-brooches.html&quot;&gt;cheap Chanel Brooches&lt;/a&gt;&lt;/b&gt; Contact your insurance provider &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net&quot;&gt;cheap jewelry stores&lt;/a&gt;&lt;/b&gt; within 30 days of &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net/fashion-jewelry/cartier-jewelry.html&quot;&gt;replica Cartier&lt;/a&gt;&lt;/b&gt; a amassed installation or &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net/fashion-jewelry/cartier-jewelry.html&quot;&gt;Cartier for sale&lt;/a&gt;&lt;/b&gt; fitness. To count your &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net/fashion-jewelry/pandora-jewelry.html&quot;&gt;replica Pandora wholesale&lt;/a&gt;&lt;/b&gt; likewise kid to your &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net/fashion-jewelry/cartier-jewelry.html&quot;&gt;replica Cartier wholesale&lt;/a&gt;&lt;/b&gt; insurance, you leave covetousness &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net/fashion-jewelry/christian-dior-jewelry.html&quot;&gt;replica Christian Dior wholesale&lt;/a&gt;&lt;/b&gt; to consider a gregarious &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net&quot;&gt;cheap jewelry sale&lt;/a&gt;&lt;/b&gt; assumption incorporate now the &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net/fashion-jewelry/links-of-london-jewelry.html&quot;&gt;cheap Links of London wholesale&lt;/a&gt;&lt;/b&gt; youth. vastly of the time, the hospital that handles the</body>
      <body-html>&lt;div&gt;&lt;p&gt;following your &lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net&quot;&gt;cheap
jewlery&lt;/a&gt;&lt;/b&gt; wedding. # Step 3 &lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net/fashion-jewelry/chanel-brooches.html&quot;&gt;cheap
Chanel Brooches&lt;/a&gt;&lt;/b&gt; Contact your insurance provider &lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net&quot;&gt;cheap jewelry stores&lt;/a&gt;&lt;/b&gt; within 30
days of &lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net/fashion-jewelry/cartier-jewelry.html&quot;&gt;replica
Cartier&lt;/a&gt;&lt;/b&gt; a amassed installation or &lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net/fashion-jewelry/cartier-jewelry.html&quot;&gt;Cartier
for sale&lt;/a&gt;&lt;/b&gt; fitness. To count your &lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net/fashion-jewelry/pandora-jewelry.html&quot;&gt;replica
Pandora wholesale&lt;/a&gt;&lt;/b&gt; likewise kid to your &lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net/fashion-jewelry/cartier-jewelry.html&quot;&gt;replica
Cartier wholesale&lt;/a&gt;&lt;/b&gt; insurance, you leave covetousness
&lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net/fashion-jewelry/christian-dior-jewelry.html&quot;&gt;
replica Christian Dior wholesale&lt;/a&gt;&lt;/b&gt; to consider a gregarious
&lt;b&gt;&lt;a href=&quot;http://www.jewelry1.net&quot;&gt;cheap jewelry sale&lt;/a&gt;&lt;/b&gt;
assumption incorporate now the &lt;b&gt;&lt;a href=
&quot;http://www.jewelry1.net/fashion-jewelry/links-of-london-jewelry.html&quot;&gt;
cheap Links of London wholesale&lt;/a&gt;&lt;/b&gt; youth. vastly of the time,
the hospital that handles the&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-07-19T11:33:49+01:00</created-at>
      <creator-id type="integer">17515</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">834</number>
      <permalink>make-migrations-use-transaction-and-rollback-if-something-was-wrong</permalink>
      <priority type="integer">291</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>activerecord migrations</tag>
      <title>Make migrations use transaction and rollback if something was wrong</title>
      <updated-at type="datetime">2010-07-21T01:47:08+01:00</updated-at>
      <user-id type="integer">107778</user-id>
      <version type="integer">5</version>
      <user-name>xiaobao</user-name>
      <creator-name>Ian Bailey</creator-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/834</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>866b8961c7d634e753e80091bdbf5ed48dc473f2</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-08-22T22:03:06+01:00</created-at>
      <filename>0001-Made-migrations-transactional-for-PostgreSQL-834-s.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">41029</id>
      <size type="integer">5835</size>
      <uploader-id type="integer">14890</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/41029/0001-Made-migrations-transactional-for-PostgreSQL-834-s.patch</url>
    </attachment>
  </attachments>
</ticket>
