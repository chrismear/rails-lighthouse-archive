<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">40272</assigned-user-id>
  <attachments-count type="integer">4</attachments-count>
  <closed type="boolean">false</closed>
  <created-at type="datetime">2011-03-01T15:14:05+00:00</created-at>
  <creator-id type="integer">135830</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71470</milestone-id>
  <number type="integer">6379</number>
  <permalink>accept-header-with-does-not-match-html-templates</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>verified</state>
  <tag nil="true"></tag>
  <title>accept header with */* does not match html templates</title>
  <updated-at type="datetime">2011-03-01T15:14:05+00:00</updated-at>
  <user-id type="integer">94458</user-id>
  <version type="integer">9</version>
  <user-name>Jeff Kreeftmeijer</user-name>
  <creator-name>Alex Tambellini</creator-name>
  <assigned-user-name>Santiago Pastorino</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
  <milestone-title>3.1</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>See the comments attached to this commit for details:

https://github.com/rails/jquery-ujs/commit/22877193b17f2c257a83faca5ea5b4efa9c42943</original-body>
  <latest-body>See the comments attached to this commit for details:

https://github.com/rails/jquery-ujs/commit/22877193b17f2c257a83faca5ea5b4efa9c42943</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;See the comments attached to this commit for details:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;https://github.com/rails/jquery-ujs/commit/22877193b17f2c257a83faca5ea5b4efa9c42943&quot;&gt;
https://github.com/rails/jquery-ujs/commit/22877193b17f2c257a83faca...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>See the comments attached to this commit for details:

https://github.com/rails/jquery-ujs/commit/22877193b17f2c257a83faca5ea5b4efa9c42943</body>
      <body-html>&lt;div&gt;&lt;p&gt;See the comments attached to this commit for details:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;https://github.com/rails/jquery-ujs/commit/22877193b17f2c257a83faca5ea5b4efa9c42943&quot;&gt;
https://github.com/rails/jquery-ujs/commit/22877193b17f2c257a83faca...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-05T22:27:23+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-05T22:27:24+00:00</updated-at>
      <user-id type="integer">135830</user-id>
      <version type="integer">1</version>
      <user-name>Alex Tambellini</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Can you provide a test case?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can you provide a test case?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-06T21:14:45+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
:milestone: 
</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-06T21:14:53+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">2</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Attached is a rails app that demonstrates the bug:

It has a html controller with an index action and a post action.

The index action renders 2 forms that use :remote =&gt; true.

Both forms submit to the post action with the accept header containing */*. However, only the form that includes :&quot;data-type&quot; =&gt; &quot;html&quot; succeeds.

Just start the app (rails 3.0.3) and go to localhost:3000 and then click on &quot;Submit With Data Type&quot; and &quot;Submit Without Data Type&quot; buttons to see the behavior described above.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Attached is a rails app that demonstrates the bug:&lt;/p&gt;
&lt;p&gt;It has a html controller with an index action and a post
action.&lt;/p&gt;
&lt;p&gt;The index action renders 2 forms that use :remote =&amp;gt;
true.&lt;/p&gt;
&lt;p&gt;Both forms submit to the post action with the accept header
containing &lt;em&gt;/&lt;/em&gt;. However, only the form that includes
:&quot;data-type&quot; =&amp;gt; &quot;html&quot; succeeds.&lt;/p&gt;
&lt;p&gt;Just start the app (rails 3.0.3) and go to localhost:3000 and
then click on &quot;Submit With Data Type&quot; and &quot;Submit Without Data
Type&quot; buttons to see the behavior described above.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-06T22:10:41+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-06T22:10:50+00:00</updated-at>
      <user-id type="integer">135830</user-id>
      <version type="integer">3</version>
      <user-name>Alex Tambellini</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Here is a patch that solves this issue.
I've tested it against Alex's app.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Here is a patch that solves this issue.&lt;br&gt;
I've tested it against Alex's app.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-27T01:34:54+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-27T01:35:07+00:00</updated-at>
      <user-id type="integer">138366</user-id>
      <version type="integer">4</version>
      <user-name>Mathieu Ravaux</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>hey Methieu we need a test case to apply the patch.
Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;hey Methieu we need a test case to apply the patch.&lt;br&gt;
Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-27T04:01:02+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-27T04:01:19+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">5</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Hi Santiago, thank you for your quick reply. It's encouraging for a first contribution !

Here is the testcase:</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hi Santiago, thank you for your quick reply. It's encouraging
for a first contribution !&lt;/p&gt;
&lt;p&gt;Here is the testcase:&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-27T05:05:47+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-27T05:06:01+00:00</updated-at>
      <user-id type="integer">138366</user-id>
      <version type="integer">6</version>
      <user-name>Mathieu Ravaux</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Hey Mathieu,

Nice work on your first patch! The testcase looks good too. 

One thing: could you merge the testcase and the fix into one commit and supply a new patch? :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey Mathieu,&lt;/p&gt;
&lt;p&gt;Nice work on your first patch! The testcase looks good too.&lt;/p&gt;
&lt;p&gt;One thing: could you merge the testcase and the fix into one
commit and supply a new patch? :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-27T17:25:27+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-27T17:25:43+00:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">7</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Sure, here it is !
Thanks for reviewing it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sure, here it is !&lt;br&gt;
Thanks for reviewing it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-28T22:50:28+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-28T22:50:45+00:00</updated-at>
      <user-id type="integer">138366</user-id>
      <version type="integer">8</version>
      <user-name>Mathieu Ravaux</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Verified. The patch applies to master and the provided test fails without it. :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Verified. The patch applies to master and the provided test
fails without it. :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-28T23:43:28+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-02-28T23:43:46+00:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">9</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">40272</assigned-user-id>
      <attachments-count type="integer">4</attachments-count>
      <body>Wide range of web hosting services are accessible, such as cheap vps , email hosting, Unix hosting, &lt;a href=&quot;http://www.ucvhost.com/VPS/Forex/ForexVps.aspx&quot;&gt;forex vps&lt;/a&gt; , Windows hosting, Linux web hosting &lt;a href=&quot;http://www.ucvhost.com/VPS/EntryLevelVPS/EntryLevelVps.aspx&quot;&gt;windows vps&lt;/a&gt;   etc. We hope you will find a  &lt;a href=&quot;http://www.ucvhost.com/&quot;&gt;cheap hosting&lt;/a&gt; company.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Wide range of web hosting services are accessible, such as cheap
vps , email hosting, Unix hosting, &lt;a href=
&quot;http://www.ucvhost.com/VPS/Forex/ForexVps.aspx&quot;&gt;forex vps&lt;/a&gt; ,
Windows hosting, Linux web hosting &lt;a href=
&quot;http://www.ucvhost.com/VPS/EntryLevelVPS/EntryLevelVps.aspx&quot;&gt;windows
vps&lt;/a&gt; etc. We hope you will find a &lt;a href=
&quot;http://www.ucvhost.com/&quot;&gt;cheap hosting&lt;/a&gt; company.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-03-01T15:13:09+00:00</created-at>
      <creator-id type="integer">135830</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71470</milestone-id>
      <number type="integer">6379</number>
      <permalink>accept-header-with-does-not-match-html-templates</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag nil="true"></tag>
      <title>accept header with */* does not match html templates</title>
      <updated-at type="datetime">2011-03-01T15:14:05+00:00</updated-at>
      <user-id type="integer">139262</user-id>
      <version type="integer">10</version>
      <user-name>piter</user-name>
      <creator-name>Alex Tambellini</creator-name>
      <assigned-user-name>Santiago Pastorino</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/6379</url>
      <milestone-title>3.1</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>c598578d4f67589c51dad5fbe36a17b0f3f44235</code>
      <content-type>application/zip</content-type>
      <created-at type="datetime">2011-02-06T22:10:41+00:00</created-at>
      <filename>accept_header_test.zip</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">898153</id>
      <size type="integer">129979</size>
      <uploader-id type="integer">135830</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/898153/accept_header_test.zip</url>
    </attachment>
    <attachment type="Attachment">
      <code>56dc3108f4fe7bc1042bce1d5e8b5103582089a6</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-02-27T01:34:54+00:00</created-at>
      <filename>accept_header_fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">932370</id>
      <size type="integer">1148</size>
      <uploader-id type="integer">138366</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/932370/accept_header_fix.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>731780467af985687bedca420107c34492301479</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-02-27T05:05:47+00:00</created-at>
      <filename>testcase_for_6379_accept_headers.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">932408</id>
      <size type="integer">1213</size>
      <uploader-id type="integer">138366</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/932408/testcase_for_6379_accept_headers.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>f5e1297947174b37d52697c682e3955aba1cb1bc</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2011-02-28T22:50:28+00:00</created-at>
      <filename>6479_accept_headers_fix_and_testcase.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">934603</id>
      <size type="integer">2054</size>
      <uploader-id type="integer">138366</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/934603/6479_accept_headers_fix_and_testcase.diff</url>
    </attachment>
  </attachments>
</ticket>
