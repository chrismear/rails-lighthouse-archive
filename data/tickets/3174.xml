<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">1366</assigned-user-id>
  <attachments-count type="integer">2</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-01-29T13:33:21+00:00</created-at>
  <creator-id type="integer">10014</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">3174</number>
  <permalink>add-support-for-postgresql-citext-column-type</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
  <title>Add support for PostgreSQL citext column type</title>
  <updated-at type="datetime">2011-03-21T19:52:28+00:00</updated-at>
  <user-id type="integer">22887</user-id>
  <version type="integer">17</version>
  <user-name>Sean Kirby</user-name>
  <creator-name>James Le Cuirot</creator-name>
  <assigned-user-name>Pratik</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I've just migrated from MySQL to PostgreSQL and I was really surprised to find that text columns are actually case sensitive. The workarounds were ugly and awkward to do in Rails, I think, but then I found the new citext column type. It's available as an add-on for 8.3 and it's included as an add-on for 8.4.

I needed to get this going quickly so I added support for a new citext column type which, as far as Rails is concerned, behaves just like a regular text column. It occurred to me afterwards that maybe I could have implemented it as a :case_sensitive option on the regular text column type to make switching between databases easier. MySQL doesn't have a converse case sensitive column type (right?) so the option would be ineffective there but I still think this would be the better option. I'm short on time at the moment though and this is better than nothing for people that need it.

There are no tests because they would require the extension to be installed, not just on the filesystem, but via SQL as well. It works with my app against 2-3-stable though. I haven't tried it against master but the other tests are still passing in both cases.</original-body>
  <latest-body>I've just migrated from MySQL to PostgreSQL and I was really surprised to find that text columns are actually case sensitive. The workarounds were ugly and awkward to do in Rails, I think, but then I found the new citext column type. It's available as an add-on for 8.3 and it's included as an add-on for 8.4.

I needed to get this going quickly so I added support for a new citext column type which, as far as Rails is concerned, behaves just like a regular text column. It occurred to me afterwards that maybe I could have implemented it as a :case_sensitive option on the regular text column type to make switching between databases easier. MySQL doesn't have a converse case sensitive column type (right?) so the option would be ineffective there but I still think this would be the better option. I'm short on time at the moment though and this is better than nothing for people that need it.

There are no tests because they would require the extension to be installed, not just on the filesystem, but via SQL as well. It works with my app against 2-3-stable though. I haven't tried it against master but the other tests are still passing in both cases.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I've just migrated from MySQL to PostgreSQL and I was really
surprised to find that text columns are actually case sensitive.
The workarounds were ugly and awkward to do in Rails, I think, but
then I found the new citext column type. It's available as an
add-on for 8.3 and it's included as an add-on for 8.4.&lt;/p&gt;
&lt;p&gt;I needed to get this going quickly so I added support for a new
citext column type which, as far as Rails is concerned, behaves
just like a regular text column. It occurred to me afterwards that
maybe I could have implemented it as a :case_sensitive option on
the regular text column type to make switching between databases
easier. MySQL doesn't have a converse case sensitive column type
(right?) so the option would be ineffective there but I still think
this would be the better option. I'm short on time at the moment
though and this is better than nothing for people that need it.&lt;/p&gt;
&lt;p&gt;There are no tests because they would require the extension to
be installed, not just on the filesystem, but via SQL as well. It
works with my app against 2-3-stable though. I haven't tried it
against master but the other tests are still passing in both
cases.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've just migrated from MySQL to PostgreSQL and I was really surprised to find that text columns are actually case sensitive. The workarounds were ugly and awkward to do in Rails, I think, but then I found the new citext column type. It's available as an add-on for 8.3 and it's included as an add-on for 8.4.

I needed to get this going quickly so I added support for a new citext column type which, as far as Rails is concerned, behaves just like a regular text column. It occurred to me afterwards that maybe I could have implemented it as a :case_sensitive option on the regular text column type to make switching between databases easier. MySQL doesn't have a converse case sensitive column type (right?) so the option would be ineffective there but I still think this would be the better option. I'm short on time at the moment though and this is better than nothing for people that need it.

There are no tests because they would require the extension to be installed, not just on the filesystem, but via SQL as well. It works with my app against 2-3-stable though. I haven't tried it against master but the other tests are still passing in both cases.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've just migrated from MySQL to PostgreSQL and I was really
surprised to find that text columns are actually case sensitive.
The workarounds were ugly and awkward to do in Rails, I think, but
then I found the new citext column type. It's available as an
add-on for 8.3 and it's included as an add-on for 8.4.&lt;/p&gt;
&lt;p&gt;I needed to get this going quickly so I added support for a new
citext column type which, as far as Rails is concerned, behaves
just like a regular text column. It occurred to me afterwards that
maybe I could have implemented it as a :case_sensitive option on
the regular text column type to make switching between databases
easier. MySQL doesn't have a converse case sensitive column type
(right?) so the option would be ineffective there but I still think
this would be the better option. I'm short on time at the moment
though and this is better than nothing for people that need it.&lt;/p&gt;
&lt;p&gt;There are no tests because they would require the extension to
be installed, not just on the filesystem, but via SQL as well. It
works with my app against 2-3-stable though. I haven't tried it
against master but the other tests are still passing in both
cases.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-09T16:09:06+01:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2009-09-09T16:09:12+01:00</updated-at>
      <user-id type="integer">10014</user-id>
      <version type="integer">1</version>
      <user-name>James Le Cuirot</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>The above patch was against master. This is against 2-3-stable.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The above patch was against master. This is against
2-3-stable.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-09T16:09:38+01:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2009-09-09T16:09:42+01:00</updated-at>
      <user-id type="integer">10014</user-id>
      <version type="integer">2</version>
      <user-name>James Le Cuirot</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-25T12:28:13+01:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2-3-stable activerecord citext master patch postgres postgresql
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2-3-stable activerecord bugmash citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2009-09-25T12:49:24+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">3</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Tests missing.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Tests missing.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-21T06:42:19+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 2-3-stable activerecord bugmash citext master patch postgres postgresql
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-01-21T06:42:23+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">4</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I've explained why the tests are missing. How would you approach the problem?</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've explained why the tests are missing. How would you approach
the problem?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-21T10:13:13+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-01-21T10:13:15+00:00</updated-at>
      <user-id type="integer">10014</user-id>
      <version type="integer">5</version>
      <user-name>James Le Cuirot</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I'm assigning this ticket to Pratik, who's working on ActiveRecord these days. He'll be able to help you in this regard.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm assigning this ticket to Pratik, who's working on
ActiveRecord these days. He'll be able to help you in this
regard.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-21T10:17:54+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-01-21T10:17:56+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">6</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Rather than trying to redefine the column types, why not just use the postgres ILIKE command to give case-insensitive compares?  For rails 3, I currently have a very small monkey patch on Arel that changes generated LIKEs to ILIKEs.  Just put this in config/initializers.

&lt;pre&gt;
require 'arel'

module Arel
  module Predicates
    class Match &lt; Binary
      def predicate_sql
        'ILIKE'
      end
    end
    class NotMatch &lt; Binary
      def predicate_sql
        'NOT ILIKE'
      end
    end
  end
end
&lt;/pre&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rather than trying to redefine the column types, why not just
use the postgres ILIKE command to give case-insensitive compares?
For rails 3, I currently have a very small monkey patch on Arel
that changes generated LIKEs to ILIKEs. Just put this in
config/initializers.&lt;/p&gt;
&lt;pre&gt;
require 'arel'

module Arel
  module Predicates
    class Match &amp;lt; Binary
      def predicate_sql
        'ILIKE'
      end
    end
    class NotMatch &amp;lt; Binary
      def predicate_sql
        'NOT ILIKE'
      end
    end
  end
end
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-06T03:55:58+01:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-08-06T03:55:59+01:00</updated-at>
      <user-id type="integer">17728</user-id>
      <version type="integer">7</version>
      <user-name>spovich</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I'm not familiar with Rails 3 yet but it was a tad annoying to have User.find_by_name not work in a case-insensitive fashion. I'm still using this patch on a recent 2-3-stable without issue.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm not familiar with Rails 3 yet but it was a tad annoying to
have User.find_by_name not work in a case-insensitive fashion. I'm
still using this patch on a recent 2-3-stable without issue.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-06T09:12:38+01:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-08-06T09:12:42+01:00</updated-at>
      <user-id type="integer">10014</user-id>
      <version type="integer">8</version>
      <user-name>James Le Cuirot</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/27625)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/27625&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-08-30T04:10:31+01:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-08-30T04:10:31+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">9</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-10-15T23:01:35+01:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 82861
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-10-15T23:01:35+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">10</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>ARel 2 will fix this come Rails 3.0.2, just FYI: https://github.com/rails/arel/commit/5ca0c9a45788a14b9f454c93cd24fb0ae12a896b</body>
      <body-html>&lt;div&gt;&lt;p&gt;ARel 2 will fix this come Rails 3.0.2, just FYI: &lt;a href=
&quot;https://github.com/rails/arel/commit/5ca0c9a45788a14b9f454c93cd24fb0ae12a896b&quot;&gt;
https://github.com/rails/arel/commit/5ca0c9a45788a14b9f454c93cd24fb...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-04T23:55:28+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-11-04T23:55:33+00:00</updated-at>
      <user-id type="integer">24325</user-id>
      <version type="integer">11</version>
      <user-name>Ernie Miller</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>That's fantastic. I'm slowly but surely moving over to Rails 3. ;)</body>
      <body-html>&lt;div&gt;&lt;p&gt;That's fantastic. I'm slowly but surely moving over to Rails 3.
;)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-05T00:05:22+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-11-05T00:05:25+00:00</updated-at>
      <user-id type="integer">10014</user-id>
      <version type="integer">12</version>
      <user-name>James Le Cuirot</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>James I guess this could be closed now, right?</body>
      <body-html>&lt;div&gt;&lt;p&gt;James I guess this could be closed now, right?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-05T02:18:12+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-11-05T02:18:14+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">13</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>Yeah, this result is good enough for me.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yeah, this result is good enough for me.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-11-05T11:03:20+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-11-05T11:03:24+00:00</updated-at>
      <user-id type="integer">10014</user-id>
      <version type="integer">14</version>
      <user-name>James Le Cuirot</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-05T14:50:12+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2010-11-05T14:50:17+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">15</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;&lt;strong&gt;beats by dr dre tour controltalk&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;&lt;strong&gt;Monster-Power Beats by Dr. Dre Tour with ControlTalk In-Ear Headset&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;&lt;strong&gt;Monster Beats by Dr Dre Tour with ControlTalk&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;&lt;strong&gt;Beats by Dr. Dre Tour ControlTalk In-Ear Headphones from Monster&lt;/strong&gt;&lt;/a&gt;| 
&lt;a href=&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;&lt;strong&gt;purple monster dre beats&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;&lt;strong&gt;purple studio beats&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;&lt;strong&gt;solo heartbeats purple headphones&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;&lt;strong&gt;purple studio headphones&lt;/strong&gt;&lt;/a&gt;| 
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;&lt;strong&gt;beats by dre studio red sox&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;&lt;strong&gt;beats studio red sox&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;&lt;strong&gt;dre red sox&lt;/strong&gt;&lt;/a&gt;|  
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;&lt;strong&gt;monster beats red sox&lt;/strong&gt;&lt;/a&gt;| 
&lt;a href=&quot;http://www.beatsbydr-dre.com/monster-diddy-beats-by-dre-headphones-in-black-p-24.html&quot;&gt;&lt;strong&gt;monster beats by dre diddy black&lt;/strong&gt;&lt;/a&gt;|</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;
&lt;strong&gt;beats by dr dre tour controltalk&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;
&lt;strong&gt;Monster-Power Beats by Dr. Dre Tour with ControlTalk In-Ear
Headset&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;
&lt;strong&gt;Monster Beats by Dr Dre Tour with
ControlTalk&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-tour-inear-headphones-with-controltalk-p-8.html&quot;&gt;
&lt;strong&gt;Beats by Dr. Dre Tour ControlTalk In-Ear Headphones from
Monster&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;
&lt;strong&gt;purple monster dre beats&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;
&lt;strong&gt;purple studio beats&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;
&lt;strong&gt;solo heartbeats purple headphones&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/purple-limited-edition-monster-beats-studio-by-dr-dre-drdre-onear-on-ear-hd-headphones-p-31.html&quot;&gt;
&lt;strong&gt;purple studio headphones&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;
&lt;strong&gt;beats by dre studio red sox&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;
&lt;strong&gt;beats studio red sox&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;
&lt;strong&gt;dre red sox&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-beats-by-dr-dre-studio-red-sox-definition-headphones-p-7.html&quot;&gt;
&lt;strong&gt;monster beats red sox&lt;/strong&gt;&lt;/a&gt;|&lt;br&gt;
&lt;a href=
&quot;http://www.beatsbydr-dre.com/monster-diddy-beats-by-dre-headphones-in-black-p-24.html&quot;&gt;
&lt;strong&gt;monster beats by dre diddy black&lt;/strong&gt;&lt;/a&gt;|&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-19T08:18:39+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2011-01-29T13:33:21+00:00</updated-at>
      <user-id type="integer">133191</user-id>
      <version type="integer">16</version>
      <user-name>beats by dr. dre</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1366</assigned-user-id>
      <attachments-count type="integer">2</attachments-count>
      <body>I would not consider the proposed solution of using an ILIKE query to do a case insensitive match acceptable.  The main reason is that Postgres will not use indexes for ILIKE queries.  You can construct an index for doing case-insensitive searches (http://archives.postgresql.org/pgsql-novice/2006-07/msg00112.php) but this requires modifying all the SQL in order to make sure that the index is used.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I would not consider the proposed solution of using an ILIKE
query to do a case insensitive match acceptable. The main reason is
that Postgres will not use indexes for ILIKE queries. You can
construct an index for doing case-insensitive searches (&lt;a href=
&quot;http://archives.postgresql.org/pgsql-novice/2006-07/msg00112.php&quot;&gt;http://archives.postgresql.org/pgsql-novice/2006-07/msg00112.php&lt;/a&gt;)
but this requires modifying all the SQL in order to make sure that
the index is used.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-03-21T19:52:13+00:00</created-at>
      <creator-id type="integer">10014</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3174</number>
      <permalink>add-support-for-postgresql-citext-column-type</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>2-3-stable activerecord citext master patch postgres postgresql</tag>
      <title>Add support for PostgreSQL citext column type</title>
      <updated-at type="datetime">2011-03-21T19:52:28+00:00</updated-at>
      <user-id type="integer">22887</user-id>
      <version type="integer">17</version>
      <user-name>Sean Kirby</user-name>
      <creator-name>James Le Cuirot</creator-name>
      <assigned-user-name>Pratik</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3174</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>2792aa66827b7afb46c87eeafaa75fcb04e5c171</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-09-09T16:09:09+01:00</created-at>
      <filename>postgresql-citext.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">264678</id>
      <size type="integer">5810</size>
      <uploader-id type="integer">10014</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/264678/postgresql-citext.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>ff0a86b6e2cf0edc4ae7ae43ccaf885cd047ea3d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-09-09T16:09:38+01:00</created-at>
      <filename>postgresql-citext-2-3.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">264684</id>
      <size type="integer">5810</size>
      <uploader-id type="integer">10014</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/264684/postgresql-citext-2-3.patch</url>
    </attachment>
  </attachments>
</ticket>
