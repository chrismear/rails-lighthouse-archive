<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">25293</assigned-user-id>
  <attachments-count type="integer">8</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2011-01-04T16:24:46+00:00</created-at>
  <creator-id type="integer">70972</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">3257</number>
  <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
  <priority type="integer">150387</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>bugmash ipv6 local_request patch review</tag>
  <title>[PATCH] local_request? does not detect local IPv6 connections</title>
  <updated-at type="datetime">2011-01-04T16:24:46+00:00</updated-at>
  <user-id type="integer">85</user-id>
  <version type="integer">24</version>
  <user-name>Jeremy Kemper</user-name>
  <creator-name>Christopher Owen</creator-name>
  <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>When deciding how to handle server exceptions, the implementation of ActionDispatch::ShowExceptions#local_request? tries to match the request IP address to '127.0.0.1'. This approach does not consider IPv6 loopback connections (from ::1) to be local.

The main ramification is that when developing locally against a rails environment where config.action_controller.consider_all_requests_local is false, local connections from 127.0.0.1 still exhibit development error view rendering, whereas connections from ::1 use production error rendering.

This can be confusing when looking at an error using Safari, which uses the IPv6 interface if available, versus Firefox which uses the IPv4 loopback interface. Safari will render the non-local error view while FF will use the local/development view.

I've attached a patch and test for a version of local_request? that identifies all connections from a loopback address. It also uses a strictly precise definition for IPv4 connections such that any request from the  127.0.0.0/8 subnet is considered local. I'm a little concerned that such a precise treatment could have unintended consequences in a production environment -- I'd welcome any discussion in that regard.</original-body>
  <latest-body>When deciding how to handle server exceptions, the implementation of ActionDispatch::ShowExceptions#local_request? tries to match the request IP address to '127.0.0.1'. This approach does not consider IPv6 loopback connections (from ::1) to be local.

The main ramification is that when developing locally against a rails environment where config.action_controller.consider_all_requests_local is false, local connections from 127.0.0.1 still exhibit development error view rendering, whereas connections from ::1 use production error rendering.

This can be confusing when looking at an error using Safari, which uses the IPv6 interface if available, versus Firefox which uses the IPv4 loopback interface. Safari will render the non-local error view while FF will use the local/development view.

I've attached a patch and test for a version of local_request? that identifies all connections from a loopback address. It also uses a strictly precise definition for IPv4 connections such that any request from the  127.0.0.0/8 subnet is considered local. I'm a little concerned that such a precise treatment could have unintended consequences in a production environment -- I'd welcome any discussion in that regard.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;When deciding how to handle server exceptions, the
implementation of ActionDispatch::ShowExceptions#local_request?
tries to match the request IP address to '127.0.0.1'. This approach
does not consider IPv6 loopback connections (from ::1) to be
local.&lt;/p&gt;
&lt;p&gt;The main ramification is that when developing locally against a
rails environment where
config.action_controller.consider_all_requests_local is false,
local connections from 127.0.0.1 still exhibit development error
view rendering, whereas connections from ::1 use production error
rendering.&lt;/p&gt;
&lt;p&gt;This can be confusing when looking at an error using Safari,
which uses the IPv6 interface if available, versus Firefox which
uses the IPv4 loopback interface. Safari will render the non-local
error view while FF will use the local/development view.&lt;/p&gt;
&lt;p&gt;I've attached a patch and test for a version of local_request?
that identifies all connections from a loopback address. It also
uses a strictly precise definition for IPv4 connections such that
any request from the 127.0.0.0/8 subnet is considered local. I'm a
little concerned that such a precise treatment could have
unintended consequences in a production environment -- I'd welcome
any discussion in that regard.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>When deciding how to handle server exceptions, the implementation of ActionDispatch::ShowExceptions#local_request? tries to match the request IP address to '127.0.0.1'. This approach does not consider IPv6 loopback connections (from ::1) to be local.

The main ramification is that when developing locally against a rails environment where config.action_controller.consider_all_requests_local is false, local connections from 127.0.0.1 still exhibit development error view rendering, whereas connections from ::1 use production error rendering.

This can be confusing when looking at an error using Safari, which uses the IPv6 interface if available, versus Firefox which uses the IPv4 loopback interface. Safari will render the non-local error view while FF will use the local/development view.

I've attached a patch and test for a version of local_request? that identifies all connections from a loopback address. It also uses a strictly precise definition for IPv4 connections such that any request from the  127.0.0.0/8 subnet is considered local. I'm a little concerned that such a precise treatment could have unintended consequences in a production environment -- I'd welcome any discussion in that regard.</body>
      <body-html>&lt;div&gt;&lt;p&gt;When deciding how to handle server exceptions, the
implementation of ActionDispatch::ShowExceptions#local_request?
tries to match the request IP address to '127.0.0.1'. This approach
does not consider IPv6 loopback connections (from ::1) to be
local.&lt;/p&gt;
&lt;p&gt;The main ramification is that when developing locally against a
rails environment where
config.action_controller.consider_all_requests_local is false,
local connections from 127.0.0.1 still exhibit development error
view rendering, whereas connections from ::1 use production error
rendering.&lt;/p&gt;
&lt;p&gt;This can be confusing when looking at an error using Safari,
which uses the IPv6 interface if available, versus Firefox which
uses the IPv4 loopback interface. Safari will render the non-local
error view while FF will use the local/development view.&lt;/p&gt;
&lt;p&gt;I've attached a patch and test for a version of local_request?
that identifies all connections from a loopback address. It also
uses a strictly precise definition for IPv4 connections such that
any request from the 127.0.0.0/8 subnet is considered local. I'm a
little concerned that such a precise treatment could have
unintended consequences in a production environment -- I'd welcome
any discussion in that regard.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-25T02:13:00+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-09-25T02:13:08+01:00</updated-at>
      <user-id type="integer">70972</user-id>
      <version type="integer">1</version>
      <user-name>Christopher Owen</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-25T11:50:41+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: ipv6 local_request patch
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-09-25T12:47:02+01:00</updated-at>
      <user-id type="integer">7211</user-id>
      <version type="integer">2</version>
      <user-name>CancelProfileIsBroken</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Test doesn't apply on 2-3-stable.

Test does apply on master.

+1 for being a good idea.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Test doesn't apply on 2-3-stable.&lt;/p&gt;
&lt;p&gt;Test does apply on master.&lt;/p&gt;
&lt;p&gt;+1 for being a good idea.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-27T00:54:06+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-09-27T00:54:07+01:00</updated-at>
      <user-id type="integer">71135</user-id>
      <version type="integer">3</version>
      <user-name>Blue Box Jesse</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 good idea as Ipv6 becomes more popular in the months to come.

Applying Fix local_request? for ipv6 connections
.dotest/patch:63: trailing whitespace.
  { 
.dotest/patch:64: trailing whitespace.
    :IPv4 =&gt; ['127.0.0.1', '127.0.0.34', '127.0.0.254'], 
.dotest/patch:65: trailing whitespace.
    :IPv6 =&gt; ['::1', '0000::1', '0:0:0:0:0:0:0:1'] 
.dotest/patch:66: trailing whitespace.
  }.each do |addr_family, addrs| 
.dotest/patch:67: trailing whitespace.
    addrs.to_a.each do |addr| 
warning: 5 lines add whitespace errors.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 good idea as Ipv6 becomes more popular in the months to
come.&lt;/p&gt;
&lt;p&gt;Applying Fix local_request? for ipv6 connections&lt;br&gt;
.dotest/patch:63: trailing whitespace. { .dotest/patch:64: trailing
whitespace.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;:IPv4 =&amp;gt; ['127.0.0.1', '127.0.0.34', '127.0.0.254'],&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;.dotest/patch:65: trailing whitespace.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;:IPv6 =&amp;gt; ['::1', '0000::1', '0:0:0:0:0:0:0:1']&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;.dotest/patch:66: trailing whitespace. }.each do |addr_family,
addrs| .dotest/patch:67: trailing whitespace.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;addrs.to_a.each do |addr|&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;warning: 5 lines add whitespace errors.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-27T01:04:55+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-09-27T01:04:56+01:00</updated-at>
      <user-id type="integer">71143</user-id>
      <version type="integer">4</version>
      <user-name>Blue Box Chris</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>-1 on the patch as it doesn't apply

Some thoughts on the idea -- preparing for ipv6 in general is very good.

I don't think you should treat all traffic originating from 127/8 as local - while I don't think it is harmful, I don't see a case where it is useful. The converse of traffic being destined to 127/8 makes more sense.

I also think to actually have this be a problem in development takes a bunch of stars to be in alignment including -b ::1 being passed to script/server explicitly, the system resolver returning ::1 for localhost and treat all hosts as local being set to false in development. Seems like an unlikely occurrence. As systems will support IPv4 for quite a while, I'm not sure if this fix is necessary.</body>
      <body-html>&lt;div&gt;&lt;p&gt;-1 on the patch as it doesn't apply&lt;/p&gt;
&lt;p&gt;Some thoughts on the idea -- preparing for ipv6 in general is
very good.&lt;/p&gt;
&lt;p&gt;I don't think you should treat all traffic originating from
127/8 as local - while I don't think it is harmful, I don't see a
case where it is useful. The converse of traffic being destined to
127/8 makes more sense.&lt;/p&gt;
&lt;p&gt;I also think to actually have this be a problem in development
takes a bunch of stars to be in alignment including -b ::1 being
passed to script/server explicitly, the system resolver returning
::1 for localhost and treat all hosts as local being set to false
in development. Seems like an unlikely occurrence. As systems will
support IPv4 for quite a while, I'm not sure if this fix is
necessary.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-27T03:28:23+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-09-27T03:28:27+01:00</updated-at>
      <user-id type="integer">64236</user-id>
      <version type="integer">5</version>
      <user-name>John Pignata</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&gt; I also think to actually have this be a problem in development takes a bunch of stars to be in alignment including -b ::1 being passed to script/server explicitly, the system resolver returning ::1 for localhost and treat all hosts as local being set to false in development. Seems like an unlikely occurrence. As systems will support IPv4 for quite a while, I'm not sure if this fix is necessary.

Just FYI: My setup is Mac OS X 1.5 running development environments under Apache HTTPD via Passenger. The reported behaviour is the default behaviour under this environment, I didn't really have to jump through hoops to make it happen. I agree that it isn't a major issue and it's prudent to be cautious in this case. It would be nice if the behaviour was correct and consistent though; it would have saved some time and confusion.</body>
      <body-html>&lt;div&gt;&lt;blockquote&gt;
&lt;p&gt;I also think to actually have this be a problem in development
takes a bunch of stars to be in alignment including -b ::1 being
passed to script/server explicitly, the system resolver returning
::1 for localhost and treat all hosts as local being set to false
in development. Seems like an unlikely occurrence. As systems will
support IPv4 for quite a while, I'm not sure if this fix is
necessary.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Just FYI: My setup is Mac OS X 1.5 running development
environments under Apache HTTPD via Passenger. The reported
behaviour is the default behaviour under this environment, I didn't
really have to jump through hoops to make it happen. I agree that
it isn't a major issue and it's prudent to be cautious in this
case. It would be nice if the behaviour was correct and consistent
though; it would have saved some time and confusion.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-09-28T00:22:10+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-09-28T01:06:12+01:00</updated-at>
      <user-id type="integer">70972</user-id>
      <version type="integer">6</version>
      <user-name>Christopher Owen</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>+1 on fixing this. I ran into it because snow leopard puts ::1 localhost in hosts file by default.

No &quot;stars have to align&quot; for this to happen, the only thing that has to happen is to have an entry in your hosts file that points localhost to ::1, which if anything will become more common, not less. Seems checking IPv4 and IPv6 is an easy change, and futureproofing is never a bad idea.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 on fixing this. I ran into it because snow leopard puts ::1
localhost in hosts file by default.&lt;/p&gt;
&lt;p&gt;No &quot;stars have to align&quot; for this to happen, the only thing that
has to happen is to have an entry in your hosts file that points
localhost to ::1, which if anything will become more common, not
less. Seems checking IPv4 and IPv6 is an easy change, and
futureproofing is never a bad idea.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-09T18:55:30+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-12-09T18:55:32+00:00</updated-at>
      <user-id type="integer">10292</user-id>
      <version type="integer">7</version>
      <user-name>jerrett</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I have modified Christopher Owen's patch to simplify things up, as only detecting `127.0.0.1` and `::1`as a local address. I don't really think we need to complicate thing up here.

I have separated the patch into two files, since the structure of `actionpack` in `master` changed a lot compared to `2-3-stable`</body>
      <body-html>&lt;div&gt;&lt;p&gt;I have modified Christopher Owen's patch to simplify things up,
as only detecting &lt;code&gt;127.0.0.1&lt;/code&gt; and &lt;code&gt;::1&lt;/code&gt;as a
local address. I don't really think we need to complicate thing up
here.&lt;/p&gt;
&lt;p&gt;I have separated the patch into two files, since the structure
of &lt;code&gt;actionpack&lt;/code&gt; in &lt;code&gt;master&lt;/code&gt; changed a lot
compared to &lt;code&gt;2-3-stable&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-26T14:46:21+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2009-12-26T14:46:28+00:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">8</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">3</attachments-count>
      <body>Hello,

Just saw this ticket is in bugmash, and realize that the patch doesn't apply on `master` anymore. So here I'm reuploading the patch for `2-3-stable` and `master`

Thank you :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;Just saw this ticket is in bugmash, and realize that the patch
doesn't apply on &lt;code&gt;master&lt;/code&gt; anymore. So here I'm
reuploading the patch for &lt;code&gt;2-3-stable&lt;/code&gt; and
&lt;code&gt;master&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Thank you :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-16T13:54:48+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch</tag>
      <title>local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-16T13:54:54+00:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">9</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T00:49:29+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: bugmash ipv6 local_request patch
:title: local_request? does not detect local IPv6 connections
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-17T00:49:32+00:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">10</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T15:55:23+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-17T15:55:25+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">11</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>(from [eb67532bc1c1ce5c494b71b980c04c8aa83efb74]) Make local_request? to returns true when facing ::1 IPv6 address [#3257 status:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/eb67532bc1c1ce5c494b71b980c04c8aa83efb74</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/eb67532bc1c1ce5c494b71b980c04c8aa83efb74&quot;
title=
&quot;Changeset [eb67532bc1c1ce5c494b71b980c04c8aa83efb74]&quot;&gt;[eb67532bc1c1ce5c494b71b980c04c8aa83efb74]&lt;/a&gt;)
Make local_request? to returns true when facing ::1 IPv6 address
[&lt;a href=&quot;/projects/8994/tickets/3257&quot; title=
&quot;Ticket #3257&quot;&gt;#3257&lt;/a&gt; status:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/eb67532bc1c1ce5c494b71b980c04c8aa83efb74&quot;&gt;
http://github.com/rails/rails/commit/eb67532bc1c1ce5c494b71b980c04c...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T15:58:00+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-17T15:58:01+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">12</version>
      <user-name>Repository</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>2-3-stable patch applies, but I have a failure after applying it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;2-3-stable patch applies, but I have a failure after applying
it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-17T16:02:10+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-17T16:02:12+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">13</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">5</attachments-count>
      <body>I've looking into it and fixed the problem. Here is the new patch for 2-3-stable.

Thank you</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've looking into it and fixed the problem. Here is the new
patch for 2-3-stable.&lt;/p&gt;
&lt;p&gt;Thank you&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-18T04:53:53+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-18T04:53:59+00:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">14</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>(from [6012e575bbdd96361ed486516a34fb220b27319f]) Make local_request? to returns true when facing ::1 IPv6 address [#3257 status:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/6012e575bbdd96361ed486516a34fb220b27319f</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/6012e575bbdd96361ed486516a34fb220b27319f&quot;
title=
&quot;Changeset [6012e575bbdd96361ed486516a34fb220b27319f]&quot;&gt;[6012e575bbdd96361ed486516a34fb220b27319f]&lt;/a&gt;)
Make local_request? to returns true when facing ::1 IPv6 address
[&lt;a href=&quot;/projects/8994/tickets/3257&quot; title=
&quot;Ticket #3257&quot;&gt;#3257&lt;/a&gt; status:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/6012e575bbdd96361ed486516a34fb220b27319f&quot;&gt;
http://github.com/rails/rails/commit/6012e575bbdd96361ed486516a34fb...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-01-18T07:31:00+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>incomplete</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-18T07:31:02+00:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">15</version>
      <user-name>Repository</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>And applied! Thanks!</body>
      <body-html>&lt;div&gt;&lt;p&gt;And applied! Thanks!&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-01-18T07:36:18+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:state: incomplete
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-01-18T07:36:19+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">16</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>These patches don't work for me; I'm getting '0:0:0:0:0:0:0:1%0' as the remote address.</body>
      <body-html>&lt;div&gt;&lt;p&gt;These patches don't work for me; I'm getting '0:0:0:0:0:0:0:1%0'
as the remote address.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-04T03:19:29+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-06-04T03:19:36+01:00</updated-at>
      <user-id type="integer">72273</user-id>
      <version type="integer">17</version>
      <user-name>John Firebaugh</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>I see. So what's that trailing %0 mean?

Will try to read spec and provide a patch

Sent from my iPhone

On 4 &#3617;&#3636;.&#3618;. 2553, at 9:19, &quot;Lighthouse&quot; &amp;lt;no- 
reply@lighthouseapp.com&amp;gt; wrote:</body>
      <body-html>&lt;div&gt;&lt;p&gt;I see. So what's that trailing %0 mean?&lt;/p&gt;
&lt;p&gt;Will try to read spec and provide a patch&lt;/p&gt;
&lt;p&gt;Sent from my iPhone&lt;/p&gt;
&lt;p&gt;On 4 &amp;#3617;&amp;#3636;.&amp;#3618;. 2553, at 9:19, &quot;Lighthouse&quot;
&amp;lt;no-&lt;br&gt;
&lt;a href=
&quot;mailto:reply@lighthouseapp.com&quot;&gt;reply@lighthouseapp.com&lt;/a&gt;&amp;gt;
wrote:&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-04T03:31:51+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-06-04T03:31:56+01:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">18</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">19965</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>%0 is apparently a scope zone ID:

http://tools.ietf.org/html/rfc4007#section-11

I don't know why it's included for me, nor why I get the expanded zeros format rather than ::1. This is with JRuby 1.5 on Snow Leopard, FF or Chrome connecting to http://localhost:3000/. If I connect to http://0.0.0.0/ the remote address is 127.0.0.1.</body>
      <body-html>&lt;div&gt;&lt;p&gt;%0 is apparently a scope zone ID:&lt;/p&gt;
&lt;p&gt;&lt;a href=
&quot;http://tools.ietf.org/html/rfc4007#section-11&quot;&gt;http://tools.ietf.org/html/rfc4007#section-11&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I don't know why it's included for me, nor why I get the
expanded zeros format rather than ::1. This is with JRuby 1.5 on
Snow Leopard, FF or Chrome connecting to &lt;a href=
&quot;http://localhost:3000/&quot;&gt;http://localhost:3000/&lt;/a&gt;. If I connect
to &lt;a href=&quot;http://0.0.0.0/&quot;&gt;http://0.0.0.0/&lt;/a&gt; the remote address
is 127.0.0.1.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-04T18:29:56+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>committed</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-06-04T18:30:11+01:00</updated-at>
      <user-id type="integer">72273</user-id>
      <version type="integer">19</version>
      <user-name>John Firebaugh</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Jos&#233; Valim</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">25293</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>Ok, I have tested and can reproduce this bug. Got this one from script/server log

@@@
Processing TopicsController#index (for 0:0:0:0:0:0:0:1%0 at 2010-06-05 10:05:26) [GET]
Rendering topics/index
Completed in 124ms (View: 114 | 200 OK [http://localhost/topics]
@@@

Will try to 'catch all' of the local request. Will provide the patch soon.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok, I have tested and can reproduce this bug. Got this one from
script/server log&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Processing TopicsController#index (for 0:0:0:0:0:0:0:1%0 at 2010-06-05 10:05:26) [GET]
Rendering topics/index
Completed in 124ms (View: 114 | 200 OK [http://localhost/topics]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Will try to 'catch all' of the local request. Will provide the
patch soon.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-05T04:07:11+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:state: committed
:milestone: 
:assigned_user: 19965
</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-06-05T04:07:18+01:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">20</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">25293</assigned-user-id>
      <attachments-count type="integer">6</attachments-count>
      <body>OK, I've provide the patch to support both full notation and short notation of the IPv6.

Also, after I've read the spec here: http://en.wikipedia.org/wiki/Localhost and here: http://tools.ietf.org/html/rfc4291#section-2.5.3 It seems like for IPv6 only `::1` and `0:0:0:0:0:0:0:1` will be sent to loopback interface but for IPv4, `127.0.0.0/8` could be all referred to the localhost. So I've patched them up as well.

I've ran the test on both `2-3-stable` and `master`, both seems to be fine. However, at the moment I can't get 100% tests to pass on the actionpack because somebody has break something. Just FYI.

I'm expected this to be committed before RailsConf, Thanks! :D</body>
      <body-html>&lt;div&gt;&lt;p&gt;OK, I've provide the patch to support both full notation and
short notation of the IPv6.&lt;/p&gt;
&lt;p&gt;Also, after I've read the spec here: &lt;a href=
&quot;http://en.wikipedia.org/wiki/Localhost&quot;&gt;http://en.wikipedia.org/wiki/Localhost&lt;/a&gt;
and here: &lt;a href=
&quot;http://tools.ietf.org/html/rfc4291#section-2.5.3&quot;&gt;http://tools.ietf.org/html/rfc4291#section-2.5.3&lt;/a&gt;
It seems like for IPv6 only &lt;code&gt;::1&lt;/code&gt; and
&lt;code&gt;0:0:0:0:0:0:0:1&lt;/code&gt; will be sent to loopback interface but
for IPv4, &lt;code&gt;127.0.0.0/8&lt;/code&gt; could be all referred to the
localhost. So I've patched them up as well.&lt;/p&gt;
&lt;p&gt;I've ran the test on both &lt;code&gt;2-3-stable&lt;/code&gt; and
&lt;code&gt;master&lt;/code&gt;, both seems to be fine. However, at the moment
I can't get 100% tests to pass on the actionpack because somebody
has break something. Just FYI.&lt;/p&gt;
&lt;p&gt;I'm expected this to be committed before RailsConf, Thanks!
:D&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-06T22:10:14+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">73534</milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-06-06T22:10:30+01:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">21</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title>2.3.9</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">25293</assigned-user-id>
      <attachments-count type="integer">8</attachments-count>
      <body>Can I get this patch in before RC? Thanks :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can I get this patch in before RC? Thanks :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-06-08T18:34:20+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 73534
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>verified</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-06-08T18:34:28+01:00</updated-at>
      <user-id type="integer">25293</user-id>
      <version type="integer">22</version>
      <user-name>Prem Sichanugrist (sikachu)</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">25293</assigned-user-id>
      <attachments-count type="integer">8</attachments-count>
      <body>(from [0f44d37d04063bdae12c48e85f34024775c6a9f9]) Make sure that rails recognized the full notation of IPv6 loopback address, and recognize 127.0.0.0/8 in IPv4

[#3257 state:resolved]

Signed-off-by: Jos&#233; Valim &lt;jose.valim@gmail.com&gt;
http://github.com/rails/rails/commit/0f44d37d04063bdae12c48e85f34024775c6a9f9</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/0f44d37d04063bdae12c48e85f34024775c6a9f9&quot;
title=
&quot;Changeset [0f44d37d04063bdae12c48e85f34024775c6a9f9]&quot;&gt;[0f44d37d04063bdae12c48e85f34024775c6a9f9]&lt;/a&gt;)
Make sure that rails recognized the full notation of IPv6 loopback
address, and recognize 127.0.0.0/8 in IPv4&lt;/p&gt;
&lt;p&gt;[&lt;a href=&quot;/projects/8994/tickets/3257&quot; title=
&quot;Ticket #3257&quot;&gt;#3257&lt;/a&gt; state:resolved]&lt;/p&gt;
&lt;p&gt;Signed-off-by: Jos&amp;eacute; Valim &lt;a href=
&quot;mailto:jose.valim@gmail.com&quot;&gt;jose.valim@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href=
&quot;http://github.com/rails/rails/commit/0f44d37d04063bdae12c48e85f34024775c6a9f9&quot;&gt;
http://github.com/rails/rails/commit/0f44d37d04063bdae12c48e85f3402...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-08T18:47:56+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:state: verified
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-06-08T18:48:07+01:00</updated-at>
      <user-id type="integer">17393</user-id>
      <version type="integer">23</version>
      <user-name>Repository</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">25293</assigned-user-id>
      <attachments-count type="integer">8</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:36+01:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:milestone: 74033
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">150387</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2010-10-15T23:01:36+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">24</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">25293</assigned-user-id>
      <attachments-count type="integer">8</attachments-count>
      <body>&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl jerseys&lt;/a&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl jerseys&lt;/a&gt;&gt;</body>
      <body-html>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;cheap nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;discount nfl
jerseys&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.wholesalenflstore.com/&quot;&gt;wholesale nfl
jerseys&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-01-04T09:22:14+00:00</created-at>
      <creator-id type="integer">70972</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">3257</number>
      <permalink>local_request-does-not-detect-local-ipv6-connections</permalink>
      <priority type="integer">150387</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>bugmash ipv6 local_request patch review</tag>
      <title>[PATCH] local_request? does not detect local IPv6 connections</title>
      <updated-at type="datetime">2011-01-04T16:24:46+00:00</updated-at>
      <user-id type="integer">131088</user-id>
      <version type="integer">25</version>
      <user-name>icooky</user-name>
      <creator-name>Christopher Owen</creator-name>
      <assigned-user-name>Prem Sichanugrist (sikachu)</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/3257</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>f380bb31c63929c574621ac85eef2239a9a4dc9c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-09-25T02:13:03+01:00</created-at>
      <filename>local_request_ipv6_fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">278393</id>
      <size type="integer">3207</size>
      <uploader-id type="integer">70972</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/278393/local_request_ipv6_fix.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>cfa01ac9df6a0dc4abfa0f2222a0a476b7ff307d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-12-26T14:46:21+00:00</created-at>
      <filename>local_request_ipv6_simple_fix_on_2-3-stable.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">361705</id>
      <size type="integer">2346</size>
      <uploader-id type="integer">25293</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/361705/local_request_ipv6_simple_fix_on_2-3-stable.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>cffd0da02d49e17a1eb604d16addf9a1eb31e10c</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2009-12-26T14:46:26+00:00</created-at>
      <filename>local_request_ipv6_simple_fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">361706</id>
      <size type="integer">2588</size>
      <uploader-id type="integer">25293</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/361706/local_request_ipv6_simple_fix.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>1981c1b65aacc665d9fbbf1ffa821b416679d095</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-01-16T13:54:48+00:00</created-at>
      <filename>local_request_ipv6_simple_fix_on_2-3-stable.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">380675</id>
      <size type="integer">2346</size>
      <uploader-id type="integer">25293</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/380675/local_request_ipv6_simple_fix_on_2-3-stable.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>743fa4999c2bc8824be183c7eb7f1038dca7b922</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-01-16T13:54:52+00:00</created-at>
      <filename>local_request_ipv6_simple_fix.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">380676</id>
      <size type="integer">2597</size>
      <uploader-id type="integer">25293</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/380676/local_request_ipv6_simple_fix.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>b98369eba50d03762f005a0b069ede593695a72d</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-01-18T04:53:53+00:00</created-at>
      <filename>local_request_ipv6_simple_fix_on_2-3-stable-20100118.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">381102</id>
      <size type="integer">2592</size>
      <uploader-id type="integer">25293</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/381102/local_request_ipv6_simple_fix_on_2-3-stable-20100118.diff</url>
    </attachment>
    <attachment type="Attachment">
      <code>2c9a8aab16aa16c30c57b57a41c41c01a5c13572</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-06T22:10:14+01:00</created-at>
      <filename>ipv6_full_notation_fix_on_2-3-stable.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">548757</id>
      <size type="integer">2507</size>
      <uploader-id type="integer">25293</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/548757/ipv6_full_notation_fix_on_2-3-stable.patch</url>
    </attachment>
    <attachment type="Attachment">
      <code>710c7ceac2ce125031a6b57acf828a8662436c21</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-06-06T22:10:22+01:00</created-at>
      <filename>ipv6_full_notation_fix.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">548758</id>
      <size type="integer">2237</size>
      <uploader-id type="integer">25293</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/548758/ipv6_full_notation_fix.patch</url>
    </attachment>
  </attachments>
</ticket>
