<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-10-02T10:57:44+01:00</created-at>
  <creator-id type="integer">2970</creator-id>
  <milestone-due-on type="datetime">2010-11-15T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer">88038</milestone-id>
  <number type="integer">4171</number>
  <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
  <priority type="integer">1</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
  <title>Fresh Rails 3 app cannot run performance tests</title>
  <updated-at type="datetime">2011-02-15T19:16:11+00:00</updated-at>
  <user-id type="integer">121198</user-id>
  <version type="integer">16</version>
  <user-name>jnimety</user-name>
  <creator-name>Chris Griego</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
  <milestone-title>3.0.2</milestone-title>
  <priority-name>High</priority-name>
  <original-body>Steps to reproduce:

@@@
$ rails myapp
$ cd myapp
$ rake db:schema:dump
$ rake test:benchmark
(in myapp)
activesupport-3.0.0.beta/lib/active_support/dependencies.rb:456:in `load_missing_constant': uninitialized constant ActionDispatch::PerformanceTest (NameError)
	from activesupport-3.0.0.beta/lib/active_support/dependencies.rb:91:in `const_missing'
	from actionpack-3.0.0.beta/lib/action_controller/deprecated/performance_test.rb:1
	from ./test/performance/browsing_test.rb:5
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `load'
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `each'
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5
rake aborted!
Command failed with status (1)

(See full trace by running task with --trace)
@@@

I believe this issue began with Bundler 0.9 and its change so that disable_system_gems is the default and only option, preventing any gem not specified in the Gemfile or is a dependency of one of the gems, it won't load.

That prevents ActiveSupport::Testing:: Performance from being defined because its definition is wrapped in a begin; rescue LoadError; end block along with the require for ruby-prof, which will always fail in a fresh app since the Gemfile doesn't include it and it isn't specified as a dependency of any of the Rails gems.

ActionDispatch::PerformanceTest's definition is wrapped in an if defined? checking for a successful definition of ActiveSupport::Testing:: Performance, which again fails in a fresh app.

ActionController::PerformanceTest, which the generated test uses, is deprecated and just gets assigned as equal to ActionDispatch::PerformanceTest. Problem being it isn't always defined, and won't be in a fresh app since requiring ruby-prof fails.

It's a tricky set of dominoes that have fallen over after Bundler's change.

I think there's several likely changes that should be made in response to this beyond simply fixing the issue. A couple of changes to isolate these components from each other's changes should also be put in place I think. I'm happy to put together a patch, but I need some guidance on the best changes to make.

1. ruby-prof has to be required at some point, which is tricky since it involves C extensions. But it must be required as a gem dependency either by a gem specification or the Gemfile.
2. The definitions of ActionDispatch::PerformanceTest and ActiveSupport::Testing::PerformanceTest should not be conditional, if there must be special handling, have it in the behavior of the class instead. In Rails 2.3, the definition is not conditional, it was made so as a part of the autoload refactoring.
3. The generator should not use the deprecated ActionController::PerformanceTest.
4. ActionController::PerformanceTest should log a deprecation warning.</original-body>
  <latest-body>Steps to reproduce:

@@@
$ rails myapp
$ cd myapp
$ rake db:schema:dump
$ rake test:benchmark
(in myapp)
activesupport-3.0.0.beta/lib/active_support/dependencies.rb:456:in `load_missing_constant': uninitialized constant ActionDispatch::PerformanceTest (NameError)
	from activesupport-3.0.0.beta/lib/active_support/dependencies.rb:91:in `const_missing'
	from actionpack-3.0.0.beta/lib/action_controller/deprecated/performance_test.rb:1
	from ./test/performance/browsing_test.rb:5
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `load'
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `each'
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5
rake aborted!
Command failed with status (1)

(See full trace by running task with --trace)
@@@

I believe this issue began with Bundler 0.9 and its change so that disable_system_gems is the default and only option, preventing any gem not specified in the Gemfile or is a dependency of one of the gems, it won't load.

That prevents ActiveSupport::Testing:: Performance from being defined because its definition is wrapped in a begin; rescue LoadError; end block along with the require for ruby-prof, which will always fail in a fresh app since the Gemfile doesn't include it and it isn't specified as a dependency of any of the Rails gems.

ActionDispatch::PerformanceTest's definition is wrapped in an if defined? checking for a successful definition of ActiveSupport::Testing:: Performance, which again fails in a fresh app.

ActionController::PerformanceTest, which the generated test uses, is deprecated and just gets assigned as equal to ActionDispatch::PerformanceTest. Problem being it isn't always defined, and won't be in a fresh app since requiring ruby-prof fails.

It's a tricky set of dominoes that have fallen over after Bundler's change.

I think there's several likely changes that should be made in response to this beyond simply fixing the issue. A couple of changes to isolate these components from each other's changes should also be put in place I think. I'm happy to put together a patch, but I need some guidance on the best changes to make.

1. ruby-prof has to be required at some point, which is tricky since it involves C extensions. But it must be required as a gem dependency either by a gem specification or the Gemfile.
2. The definitions of ActionDispatch::PerformanceTest and ActiveSupport::Testing::PerformanceTest should not be conditional, if there must be special handling, have it in the behavior of the class instead. In Rails 2.3, the definition is not conditional, it was made so as a part of the autoload refactoring.
3. The generator should not use the deprecated ActionController::PerformanceTest.
4. ActionController::PerformanceTest should log a deprecation warning.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ rails myapp
$ cd myapp
$ rake db:schema:dump
$ rake test:benchmark
(in myapp)
activesupport-3.0.0.beta/lib/active_support/dependencies.rb:456:in `load_missing_constant': uninitialized constant ActionDispatch::PerformanceTest (NameError)
    from activesupport-3.0.0.beta/lib/active_support/dependencies.rb:91:in `const_missing'
    from actionpack-3.0.0.beta/lib/action_controller/deprecated/performance_test.rb:1
    from ./test/performance/browsing_test.rb:5
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `load'
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `each'
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5
rake aborted!
Command failed with status (1)

(See full trace by running task with --trace)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I believe this issue began with Bundler 0.9 and its change so
that disable_system_gems is the default and only option, preventing
any gem not specified in the Gemfile or is a dependency of one of
the gems, it won't load.&lt;/p&gt;
&lt;p&gt;That prevents ActiveSupport::Testing:: Performance from being
defined because its definition is wrapped in a begin; rescue
LoadError; end block along with the require for ruby-prof, which
will always fail in a fresh app since the Gemfile doesn't include
it and it isn't specified as a dependency of any of the Rails
gems.&lt;/p&gt;
&lt;p&gt;ActionDispatch::PerformanceTest's definition is wrapped in an if
defined? checking for a successful definition of
ActiveSupport::Testing:: Performance, which again fails in a fresh
app.&lt;/p&gt;
&lt;p&gt;ActionController::PerformanceTest, which the generated test
uses, is deprecated and just gets assigned as equal to
ActionDispatch::PerformanceTest. Problem being it isn't always
defined, and won't be in a fresh app since requiring ruby-prof
fails.&lt;/p&gt;
&lt;p&gt;It's a tricky set of dominoes that have fallen over after
Bundler's change.&lt;/p&gt;
&lt;p&gt;I think there's several likely changes that should be made in
response to this beyond simply fixing the issue. A couple of
changes to isolate these components from each other's changes
should also be put in place I think. I'm happy to put together a
patch, but I need some guidance on the best changes to make.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ruby-prof has to be required at some point, which is tricky
since it involves C extensions. But it must be required as a gem
dependency either by a gem specification or the Gemfile.&lt;br&gt;&lt;/li&gt;
&lt;li&gt;The definitions of ActionDispatch::PerformanceTest and
ActiveSupport::Testing::PerformanceTest should not be conditional,
if there must be special handling, have it in the behavior of the
class instead. In Rails 2.3, the definition is not conditional, it
was made so as a part of the autoload refactoring.&lt;br&gt;&lt;/li&gt;
&lt;li&gt;The generator should not use the deprecated
ActionController::PerformanceTest.&lt;br&gt;&lt;/li&gt;
&lt;li&gt;ActionController::PerformanceTest should log a deprecation
warning.&lt;/li&gt;
&lt;/ol&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Steps to reproduce:

@@@
$ rails myapp
$ cd myapp
$ rake db:schema:dump
$ rake test:benchmark
(in myapp)
activesupport-3.0.0.beta/lib/active_support/dependencies.rb:456:in `load_missing_constant': uninitialized constant ActionDispatch::PerformanceTest (NameError)
	from activesupport-3.0.0.beta/lib/active_support/dependencies.rb:91:in `const_missing'
	from actionpack-3.0.0.beta/lib/action_controller/deprecated/performance_test.rb:1
	from ./test/performance/browsing_test.rb:5
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `load'
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `each'
	from rake-0.8.7/lib/rake/rake_test_loader.rb:5
rake aborted!
Command failed with status (1)

(See full trace by running task with --trace)
@@@

I believe this issue began with Bundler 0.9 and its change so that disable_system_gems is the default and only option, preventing any gem not specified in the Gemfile or is a dependency of one of the gems, it won't load.

That prevents ActiveSupport::Testing:: Performance from being defined because its definition is wrapped in a begin; rescue LoadError; end block along with the require for ruby-prof, which will always fail in a fresh app since the Gemfile doesn't include it and it isn't specified as a dependency of any of the Rails gems.

ActionDispatch::PerformanceTest's definition is wrapped in an if defined? checking for a successful definition of ActiveSupport::Testing:: Performance, which again fails in a fresh app.

ActionController::PerformanceTest, which the generated test uses, is deprecated and just gets assigned as equal to ActionDispatch::PerformanceTest. Problem being it isn't always defined, and won't be in a fresh app since requiring ruby-prof fails.

It's a tricky set of dominoes that have fallen over after Bundler's change.

I think there's several likely changes that should be made in response to this beyond simply fixing the issue. A couple of changes to isolate these components from each other's changes should also be put in place I think. I'm happy to put together a patch, but I need some guidance on the best changes to make.

1. ruby-prof has to be required at some point, which is tricky since it involves C extensions. But it must be required as a gem dependency either by a gem specification or the Gemfile.
2. The definitions of ActionDispatch::PerformanceTest and ActiveSupport::Testing::PerformanceTest should not be conditional, if there must be special handling, have it in the behavior of the class instead. In Rails 2.3, the definition is not conditional, it was made so as a part of the autoload refactoring.
3. The generator should not use the deprecated ActionController::PerformanceTest.
4. ActionController::PerformanceTest should log a deprecation warning.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ rails myapp
$ cd myapp
$ rake db:schema:dump
$ rake test:benchmark
(in myapp)
activesupport-3.0.0.beta/lib/active_support/dependencies.rb:456:in `load_missing_constant': uninitialized constant ActionDispatch::PerformanceTest (NameError)
    from activesupport-3.0.0.beta/lib/active_support/dependencies.rb:91:in `const_missing'
    from actionpack-3.0.0.beta/lib/action_controller/deprecated/performance_test.rb:1
    from ./test/performance/browsing_test.rb:5
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `load'
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `each'
    from rake-0.8.7/lib/rake/rake_test_loader.rb:5
rake aborted!
Command failed with status (1)

(See full trace by running task with --trace)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I believe this issue began with Bundler 0.9 and its change so
that disable_system_gems is the default and only option, preventing
any gem not specified in the Gemfile or is a dependency of one of
the gems, it won't load.&lt;/p&gt;
&lt;p&gt;That prevents ActiveSupport::Testing:: Performance from being
defined because its definition is wrapped in a begin; rescue
LoadError; end block along with the require for ruby-prof, which
will always fail in a fresh app since the Gemfile doesn't include
it and it isn't specified as a dependency of any of the Rails
gems.&lt;/p&gt;
&lt;p&gt;ActionDispatch::PerformanceTest's definition is wrapped in an if
defined? checking for a successful definition of
ActiveSupport::Testing:: Performance, which again fails in a fresh
app.&lt;/p&gt;
&lt;p&gt;ActionController::PerformanceTest, which the generated test
uses, is deprecated and just gets assigned as equal to
ActionDispatch::PerformanceTest. Problem being it isn't always
defined, and won't be in a fresh app since requiring ruby-prof
fails.&lt;/p&gt;
&lt;p&gt;It's a tricky set of dominoes that have fallen over after
Bundler's change.&lt;/p&gt;
&lt;p&gt;I think there's several likely changes that should be made in
response to this beyond simply fixing the issue. A couple of
changes to isolate these components from each other's changes
should also be put in place I think. I'm happy to put together a
patch, but I need some guidance on the best changes to make.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ruby-prof has to be required at some point, which is tricky
since it involves C extensions. But it must be required as a gem
dependency either by a gem specification or the Gemfile.&lt;br&gt;&lt;/li&gt;
&lt;li&gt;The definitions of ActionDispatch::PerformanceTest and
ActiveSupport::Testing::PerformanceTest should not be conditional,
if there must be special handling, have it in the behavior of the
class instead. In Rails 2.3, the definition is not conditional, it
was made so as a part of the autoload refactoring.&lt;br&gt;&lt;/li&gt;
&lt;li&gt;The generator should not use the deprecated
ActionController::PerformanceTest.&lt;br&gt;&lt;/li&gt;
&lt;li&gt;ActionController::PerformanceTest should log a deprecation
warning.&lt;/li&gt;
&lt;/ol&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-14T05:35:37+00:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actioncontroller actiondispatch bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-03-14T05:35:39+00:00</updated-at>
      <user-id type="integer">2970</user-id>
      <version type="integer">1</version>
      <user-name>Chris Griego</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-15T12:20:32+00:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: actioncontroller actiondispatch bundler generators performance_test
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-03-15T12:20:34+00:00</updated-at>
      <user-id type="integer">2970</user-id>
      <version type="integer">2</version>
      <user-name>Chris Griego</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hey, could you provide a patch for this one as well?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hey, could you provide a patch for this one as well?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-15T14:48:08+00:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-03-15T14:48:13+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">3</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm happy to put together a patch, but I need some guidance on the best changes to make.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm happy to put together a patch, but I need some guidance on
the best changes to make.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-15T15:36:02+00:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-03-15T15:36:04+00:00</updated-at>
      <user-id type="integer">20452</user-id>
      <version type="integer">4</version>
      <user-name>GitHub</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm happy to put together a patch, but I need some guidance on the best changes to make.

Sorry, wrong account above.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm happy to put together a patch, but I need some guidance on
the best changes to make.&lt;/p&gt;
&lt;p&gt;Sorry, wrong account above.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-15T15:40:17+00:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-03-15T15:40:21+00:00</updated-at>
      <user-id type="integer">2970</user-id>
      <version type="integer">5</version>
      <user-name>Chris Griego</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>+1 on all four points, Chris.

For ruby-prof, I think a lazy-require would be good enough. If it's not available at that time, raise an error asking to add it to the Gemfile in the :test group.</body>
      <body-html>&lt;div&gt;&lt;p&gt;+1 on all four points, Chris.&lt;/p&gt;
&lt;p&gt;For ruby-prof, I think a lazy-require would be good enough. If
it's not available at that time, raise an error asking to add it to
the Gemfile in the :test group.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-03-16T15:41:58+00:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-03-16T15:42:01+00:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">6</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>(from [835f5d0269a8d3615585119e77f1ba7d601c943b]) Rails 3 application can run performance tests now. [#4171 state:resolved]
http://github.com/rails/rails/commit/835f5d0269a8d3615585119e77f1ba7d601c943b</body>
      <body-html>&lt;div&gt;&lt;p&gt;(from &lt;a href=
&quot;/projects/8994/changesets/835f5d0269a8d3615585119e77f1ba7d601c943b&quot;
title=
&quot;Changeset [835f5d0269a8d3615585119e77f1ba7d601c943b]&quot;&gt;[835f5d0269a8d3615585119e77f1ba7d601c943b]&lt;/a&gt;)
Rails 3 application can run performance tests now. [&lt;a href=
&quot;/projects/8994/tickets/4171&quot; title=&quot;Ticket #4171&quot;&gt;#4171&lt;/a&gt;
state:resolved] &lt;a href=
&quot;http://github.com/rails/rails/commit/835f5d0269a8d3615585119e77f1ba7d601c943b&quot;&gt;
http://github.com/rails/rails/commit/835f5d0269a8d3615585119e77f1ba...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-03-28T19:08:35+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-03-28T19:08:39+01:00</updated-at>
      <user-id type="integer">65556</user-id>
      <version type="integer">7</version>
      <user-name>Rizwan Reza</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name nil="true"></priority-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">85</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Rizwan, this ticket still shsows as new in the list. Can this be updated to show resolved</body>
      <body-html>&lt;div&gt;&lt;p&gt;Rizwan, this ticket still shsows as new in the list. Can this be
updated to show resolved&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-26T06:39:30+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-06-26T06:39:37+01:00</updated-at>
      <user-id type="integer">95253</user-id>
      <version type="integer">8</version>
      <user-name>chaitanyav</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name>Jeremy Kemper</assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>oops... my bad.</body>
      <body-html>&lt;div&gt;&lt;p&gt;oops... my bad.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-06-26T06:41:37+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 85
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-06-26T06:41:42+01:00</updated-at>
      <user-id type="integer">95253</user-id>
      <version type="integer">9</version>
      <user-name>chaitanyav</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I think this is still an issue. 
Trying to run the performance test with a fresh Rails app after adding &quot;ruby-prof&quot; to the Gemfile, i get this error:
    activesupport-3.0.0/lib/active_support/testing/performance.rb:39:in `run': uninitialized constant BrowsingTest::STARTED (NameError)

Here's the full trace:

    fresh$ rake test:benchmark --trace
    (in /Users/andreashaller/Desktop/fresh)
    ** Invoke test:benchmark (first_time)
    ** Invoke test:prepare (first_time)
    ** Invoke db:test:prepare (first_time)
    ** Invoke db:abort_if_pending_migrations (first_time)
    ** Invoke environment (first_time)
    ** Execute environment
    ** Execute db:abort_if_pending_migrations
    ** Execute db:test:prepare
    ** Invoke db:test:load (first_time)
    ** Invoke db:test:purge (first_time)
    ** Invoke environment 
    ** Execute db:test:purge
    ** Execute db:test:load
    ** Invoke db:schema:load (first_time)
    ** Invoke environment 
    ** Execute db:schema:load
    ** Execute test:prepare
    ** Execute test:benchmark
    Loaded suite /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake/rake_test_loader
    Started
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.0.0/lib/active_support/testing/performance.rb:39:in `run': uninitialized constant BrowsingTest::STARTED (NameError)
    	from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:641:in `block (2 levels) in run_test_suites'
    	from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:635:in `each'
    	from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:635:in `block in run_test_suites'
    	from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:634:in `each'
    	from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:634:in `run_test_suites'
    	from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:594:in `run'
    	from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:492:in `block in autorun'
    rake aborted!
    Command failed with status (1): [/Users/andreashaller/.rvm/rubies/ruby-1.9....]
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:995:in `block in sh'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1010:in `call'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1010:in `sh'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1094:in `sh'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1029:in `ruby'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1094:in `ruby'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.0.0/lib/rails/test_unit/testing.rake:26:in `block (2 levels) in define'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1112:in `verbose'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.0.0/lib/rails/test_unit/testing.rake:11:in `block in define'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:636:in `call'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:631:in `each'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain'
    /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/bin/rake:31:in `&lt;top (required)&gt;'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/bin/rake:19:in `load'
    /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/bin/rake:19:in `&lt;main&gt;'</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think this is still an issue.&lt;br&gt;
Trying to run the performance test with a fresh Rails app after
adding &quot;ruby-prof&quot; to the Gemfile, i get this error:&lt;br&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;activesupport-3.0.0/lib/active_support/testing/performance.rb:39:in `run': uninitialized constant BrowsingTest::STARTED (NameError)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Here's the full trace:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;fresh$ rake test:benchmark --trace
(in /Users/andreashaller/Desktop/fresh)
** Invoke test:benchmark (first_time)
** Invoke test:prepare (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:load (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment 
** Execute db:test:purge
** Execute db:test:load
** Invoke db:schema:load (first_time)
** Invoke environment 
** Execute db:schema:load
** Execute test:prepare
** Execute test:benchmark
Loaded suite /Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake/rake_test_loader
Started
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.0.0/lib/active_support/testing/performance.rb:39:in `run': uninitialized constant BrowsingTest::STARTED (NameError)
    from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:641:in `block (2 levels) in run_test_suites'
    from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:635:in `each'
    from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:635:in `block in run_test_suites'
    from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:634:in `each'
    from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:634:in `run_test_suites'
    from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:594:in `run'
    from /Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/minitest/unit.rb:492:in `block in autorun'
rake aborted!
Command failed with status (1): [/Users/andreashaller/.rvm/rubies/ruby-1.9....]
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:995:in `block in sh'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1010:in `call'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1010:in `sh'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1094:in `sh'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1029:in `ruby'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1094:in `ruby'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.0.0/lib/rails/test_unit/testing.rake:26:in `block (2 levels) in define'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1112:in `verbose'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.0.0/lib/rails/test_unit/testing.rake:11:in `block in define'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain'
/Users/andreashaller/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.8.7/bin/rake:31:in `&amp;lt;top (required)&amp;gt;'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/bin/rake:19:in `load'
/Users/andreashaller/.rvm/gems/ruby-1.9.2-p0/bin/rake:19:in `&amp;lt;main&amp;gt;'&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-17T16:57:40+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-09-17T16:57:42+01:00</updated-at>
      <user-id type="integer">15820</user-id>
      <version type="integer">11</version>
      <user-name>Andreas Haller</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Same problem here. Fails in @activesupport-3.0.0/lib/active_support/testing/performance.rb:39@

Fresh Rails3 install, installed ruby-prof and added to Gemfile.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Same problem here. Fails in
&lt;code&gt;activesupport-3.0.0/lib/active_support/testing/performance.rb:39&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Fresh Rails3 install, installed ruby-prof and added to
Gemfile.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-28T10:37:59+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-09-28T10:38:01+01:00</updated-at>
      <user-id type="integer">99505</user-id>
      <version type="integer">12</version>
      <user-name>MikZ</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Using Ruby 1.9.2 and ruby-pref 0.9.2</body>
      <body-html>&lt;div&gt;&lt;p&gt;Using Ruby 1.9.2 and ruby-pref 0.9.2&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-28T11:04:11+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-09-28T11:04:17+01:00</updated-at>
      <user-id type="integer">99505</user-id>
      <version type="integer">13</version>
      <user-name>MikZ</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>It's probably problem with Ruby 1.9.2. I've created new issue:
https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/5722</body>
      <body-html>&lt;div&gt;&lt;p&gt;It's probably problem with Ruby 1.9.2. I've created new
issue:&lt;br&gt;
&lt;a href=
&quot;https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/5722&quot;&gt;
https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-09-28T11:55:48+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-09-28T11:55:52+01:00</updated-at>
      <user-id type="integer">99505</user-id>
      <version type="integer">14</version>
      <user-name>MikZ</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title nil="true"></milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/31647)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/31647&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-15T23:01:48+01:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 27004
</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2010-10-15T23:01:48+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">15</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>lib/active_support/testing/performance.rb and ruby-prof rely on Test::Unit, adding &quot;gem 'test-unit'&quot; to my Gemfile allows me to run test:profile and test:benchmark on 1.9.2 without the &quot;uninitialized constant BrowsingTest::STARTED&quot; exception.  I'd also advise compiling ruby 1.9.2 with the gcdata patch to get the most out of the test:benchmark results  (this is *not* the patch referenced at http://guides.rubyonrails.org/performance_testing.html#installing-gc-patched-ruby).  The gcdata patch is included with rvm but I'm not sure where the official version resides.</body>
      <body-html>&lt;div&gt;&lt;p&gt;lib/active_support/testing/performance.rb and ruby-prof rely on
Test::Unit, adding &quot;gem 'test-unit'&quot; to my Gemfile allows me to run
test:profile and test:benchmark on 1.9.2 without the &quot;uninitialized
constant BrowsingTest::STARTED&quot; exception. I'd also advise
compiling ruby 1.9.2 with the gcdata patch to get the most out of
the test:benchmark results (this is &lt;em&gt;not&lt;/em&gt; the patch
referenced at &lt;a href=
&quot;http://guides.rubyonrails.org/performance_testing.html#installing-gc-patched-ruby)&quot;&gt;
http://guides.rubyonrails.org/performance_testing.html#installing-g...&lt;/a&gt;.
The gcdata patch is included with rvm but I'm not sure where the
official version resides.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-15T19:15:59+00:00</created-at>
      <creator-id type="integer">2970</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">88038</milestone-id>
      <number type="integer">4171</number>
      <permalink>fresh-rails-3-app-cannot-run-performance-tests</permalink>
      <priority type="integer">1</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag>actioncontroller actiondispatch bug bundler generators performance_test</tag>
      <title>Fresh Rails 3 app cannot run performance tests</title>
      <updated-at type="datetime">2011-02-15T19:16:11+00:00</updated-at>
      <user-id type="integer">121198</user-id>
      <version type="integer">16</version>
      <user-name>jnimety</user-name>
      <creator-name>Chris Griego</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/4171</url>
      <milestone-title>3.0.2</milestone-title>
      <priority-name>High</priority-name>
      <assigned-user-name nil="true"></assigned-user-name>
    </version>
  </versions>
</ticket>
