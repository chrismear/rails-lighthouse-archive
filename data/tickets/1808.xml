<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">8406</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-01-28T19:17:33+00:00</created-at>
  <creator-id type="integer">45363</creator-id>
  <milestone-due-on type="datetime">2009-01-31T00:00:00+00:00</milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">1808</number>
  <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
  <priority type="integer">11</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>invalid</state>
  <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
  <title>fields_for is broken for nested resources since 2.2.x</title>
  <updated-at type="datetime">2009-02-26T14:02:48+00:00</updated-at>
  <user-id type="integer">8406</user-id>
  <version type="integer">16</version>
  <user-name>Eloy Duran</user-name>
  <creator-name>Mark Vz</creator-name>
  <assigned-user-name>Eloy Duran</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
  <priority-name nil="true"></priority-name>
  <original-body>Until Rails 2.1.x the following code snippet worked for me like a champ:

@@@
&lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@

All fine and due to the API documentation. BUT, since Rails 2.2.x this doesn't work anymore! Now, I've to do this (the 'longer' version):

@@@
&lt;% fields_for(:answer_type, :url =&gt; [@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@</original-body>
  <latest-body>Until Rails 2.1.x the following code snippet worked for me like a champ:

@@@
&lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@

All fine and due to the API documentation. BUT, since Rails 2.2.x this doesn't work anymore! Now, I've to do this (the 'longer' version):

@@@
&lt;% fields_for(:answer_type, :url =&gt; [@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;Until Rails 2.1.x the following code snippet worked for me like
a champ:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;All fine and due to the API documentation. BUT, since Rails
2.2.x this doesn't work anymore! Now, I've to do this (the 'longer'
version):&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% fields_for(:answer_type, :url =&amp;gt; [@questionnaire, @section, @question_definition, @answer_type]) do |at| %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Until Rails 2.1.x the following code snippet worked for me like a champ:

@@@
&lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@

All fine and due to the API documentation. BUT, since Rails 2.2.x this doesn't work anymore! Now, I've to do this (the 'longer' version):

@@@
&lt;% fields_for(:answer_type, :url =&gt; [@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Until Rails 2.1.x the following code snippet worked for me like
a champ:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;All fine and due to the API documentation. BUT, since Rails
2.2.x this doesn't work anymore! Now, I've to do this (the 'longer'
version):&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% fields_for(:answer_type, :url =&amp;gt; [@questionnaire, @section, @question_definition, @answer_type]) do |at| %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-28T19:17:33+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-01-28T19:17:34+00:00</updated-at>
      <user-id type="integer">45363</user-id>
      <version type="integer">1</version>
      <user-name>Mark Vz</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>As you can see here in the fields_for method of form_helper.rb file the when part for the array case is missing:

@@@
def fields_for(record_or_name_or_array, *args, &amp;block)
  raise ArgumentError, &quot;Missing block&quot; unless block_given?
  options = args.extract_options!

  case record_or_name_or_array
  when String, Symbol
    object_name = record_or_name_or_array
    object = args.first
  else
    object = record_or_name_or_array
    object_name = ActionController::RecordIdentifier.singular_class_name(object)
  end

  builder = options[:builder] || ActionView::Base.default_form_builder
  yield builder.new(object_name, object, self, options, block)
end
@@@

Now, I'm very confused since in github the following code for the same method says:

@@@
def fields_for(record_or_name_or_array, *args, &amp;block)
	raise ArgumentError, &quot;Missing block&quot; unless block_given?
	options = args.extract_options!

	case record_or_name_or_array
	when String, Symbol
	  object_name = record_or_name_or_array
	  object = args.first
	else
	  object = record_or_name_or_array
	  object_name = ActionController::RecordIdentifier.singular_class_name(object)
	end

	builder = options[:builder] || ActionView::Base.default_form_builder
	yield builder.new(object_name, object, self, options, block)
end
@@@

What went wrong here?</body>
      <body-html>&lt;div&gt;&lt;p&gt;As you can see here in the fields_for method of form_helper.rb
file the when part for the array case is missing:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
def fields_for(record_or_name_or_array, *args, &amp;amp;block)
  raise ArgumentError, &amp;quot;Missing block&amp;quot; unless block_given?
  options = args.extract_options!

  case record_or_name_or_array
  when String, Symbol
    object_name = record_or_name_or_array
    object = args.first
  else
    object = record_or_name_or_array
    object_name = ActionController::RecordIdentifier.singular_class_name(object)
  end

  builder = options[:builder] || ActionView::Base.default_form_builder
  yield builder.new(object_name, object, self, options, block)
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, I'm very confused since in github the following code for
the same method says:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
def fields_for(record_or_name_or_array, *args, &amp;amp;block)
	raise ArgumentError, &amp;quot;Missing block&amp;quot; unless block_given?
	options = args.extract_options!

	case record_or_name_or_array
	when String, Symbol
	  object_name = record_or_name_or_array
	  object = args.first
	else
	  object = record_or_name_or_array
	  object_name = ActionController::RecordIdentifier.singular_class_name(object)
	end

	builder = options[:builder] || ActionView::Base.default_form_builder
	yield builder.new(object_name, object, self, options, block)
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What went wrong here?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-28T19:35:14+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-01-28T19:35:18+00:00</updated-at>
      <user-id type="integer">45363</user-id>
      <version type="integer">2</version>
      <user-name>Mark Vz</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Finally, I've found the bug: I had both, the github and the rubyforge gem sources (check via gem sources).

After removing the rubyforge gem source and re-installing rails with all dependencies everything worked fine again.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Finally, I've found the bug: I had both, the github and the
rubyforge gem sources (check via gem sources).&lt;/p&gt;
&lt;p&gt;After removing the rubyforge gem source and re-installing rails
with all dependencies everything worked fine again.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-28T21:01:55+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-01-28T21:01:58+00:00</updated-at>
      <user-id type="integer">45363</user-id>
      <version type="integer">3</version>
      <user-name>Mark Vz</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Sorry, but I have to revise myself. The bug is still the. My post from January 28th, 2009 @ 09:01 PM is therefore obsolete.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry, but I have to revise myself. The bug is still the. My
post from January 28th, 2009 @ 09:01 PM is therefore obsolete.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-01-29T11:59:13+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-01-29T11:59:16+00:00</updated-at>
      <user-id type="integer">45363</user-id>
      <version type="integer">4</version>
      <user-name>Mark Vz</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-07T13:43:54+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-07T13:43:58+00:00</updated-at>
      <user-id type="integer">83</user-id>
      <version type="integer">5</version>
      <user-name>DHH</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title>2.x</milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-07T22:07:47+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-07T22:07:52+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">6</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">141</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Is this still broken in current edge rails?  fields_for has changed somewhat with the new nested forms code.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Is this still broken in current edge rails? fields_for has
changed somewhat with the new nested forms code.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-07T22:09:24+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-07T22:09:28+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">7</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Michael Koziarski</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Can you take a look at this eloy?  You've rejigged fields_for quite a bit</body>
      <body-html>&lt;div&gt;&lt;p&gt;Can you take a look at this eloy? You've rejigged fields_for
quite a bit&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T02:32:48+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 141
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-22T02:32:48+00:00</updated-at>
      <user-id type="integer">141</user-id>
      <version type="integer">8</version>
      <user-name>Michael Koziarski</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>You say this doesn't work since 2.2.x, so I'm assuming this doesn't have to do with the changes I introduced in 2.3rc1. Or is that in fact the version you are talking about?

You are probably looking at the wrong fields_for method. There are 2 fields_for methods in form_helpers.rb.</body>
      <body-html>&lt;div&gt;&lt;p&gt;You say this doesn't work since 2.2.x, so I'm assuming this
doesn't have to do with the changes I introduced in 2.3rc1. Or is
that in fact the version you are talking about?&lt;/p&gt;
&lt;p&gt;You are probably looking at the wrong fields_for method. There
are 2 fields_for methods in form_helpers.rb.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T16:18:31+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-22T16:18:32+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">9</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>&gt;&gt; You say this doesn't work since 2.2.x, so I'm assuming this doesn't have to do with the changes I introduced in 2.3rc1.

That's correct.

&gt;&gt; You are probably looking at the wrong fields_for method. There are 2 fields_for methods in form_helpers.rb

I know both methods. But in fact it doesn't work anymore! The code snippet I gave was taken from the real-world project which worked fine before. I had to rewrite the code as a work-around as mentioned in my first post.</body>
      <body-html>&lt;div&gt;&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;You say this doesn't work since 2.2.x, so I'm assuming this
doesn't have to do with the changes I introduced in 2.3rc1.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;That's correct.&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;You are probably looking at the wrong fields_for method. There
are 2 fields_for methods in form_helpers.rb&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;I know both methods. But in fact it doesn't work anymore! The
code snippet I gave was taken from the real-world project which
worked fine before. I had to rewrite the code as a work-around as
mentioned in my first post.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T16:27:22+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-22T16:27:24+00:00</updated-at>
      <user-id type="integer">45363</user-id>
      <version type="integer">10</version>
      <user-name>Mark Vz</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ok. I still would like to fix it, but am swamped as it is. So if you could pin point the commit which introduced this regression, that would make it much easier to get this fixed. Take a look at using git-bisect for investigating this.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Ok. I still would like to fix it, but am swamped as it is. So if
you could pin point the commit which introduced this regression,
that would make it much easier to get this fixed. Take a look at
using git-bisect for investigating this.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-22T16:52:34+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-22T16:52:36+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">11</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This has actually been deprecated, which seems logical, because the url for the action is only necessary for Form_for, not fields_for.

See #641.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This has actually been deprecated, which seems logical, because
the url for the action is only necessary for Form_for, not
fields_for.&lt;/p&gt;
&lt;p&gt;See &lt;a href=&quot;/projects/8994/tickets/641&quot; title=&quot;Ticket #641&quot;&gt;#641&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-26T12:43:51+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-26T12:43:54+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">12</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>&gt; This has actually been deprecated, which seems logical, because the url for the action is only necessary for Form_for, not fields_for.

But this is the key point! I want to write this:
@@@
&lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@
but due to the bug it only works when I write this:
@@@
&lt;% fields_for(:answer_type, :url =&gt; [@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@

So, IMHO it's still a bug.</body>
      <body-html>&lt;div&gt;&lt;blockquote&gt;
&lt;p&gt;This has actually been deprecated, which seems logical, because
the url for the action is only necessary for Form_for, not
fields_for.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But this is the key point! I want to write this:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;but due to the bug it only works when I write this:&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;% fields_for(:answer_type, :url =&amp;gt; [@questionnaire, @section, @question_definition, @answer_type]) do |at| %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So, IMHO it's still a bug.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-26T12:54:35+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-26T12:54:40+00:00</updated-at>
      <user-id type="integer">45363</user-id>
      <version type="integer">13</version>
      <user-name>Mark Vz</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>You did not answer my question; _why_ would you want to be able to specify the action of a form if fields_for is not meant to be used to create form tags?</body>
      <body-html>&lt;div&gt;&lt;p&gt;You did not answer my question; &lt;em&gt;why&lt;/em&gt; would you want to
be able to specify the action of a form if fields_for is not meant
to be used to create form tags?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-26T13:01:24+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-26T13:01:29+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">14</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Sorry, I don't understand your question. I just have nested resources and this
@@@&lt;% fields_for([@questionnaire, @section, @question_definition, @answer_type]) do |at| %&gt;
@@@
created the required fields for them. I don't know better like doing it that way and btw it is described in the API that way:

@@@
fields_for(record_or_name_or_array, *args) {|builder.new(object_name, object, self, options, block)| ...}
[...]Creates a scope around a specific model object like form_for, but doesn&#8216;t create the form tags themselves[...]
@@@</body>
      <body-html>&lt;div&gt;&lt;p&gt;Sorry, I don't understand your question. I just have nested
resources and this @@@&amp;lt;% fields_for([@questionnaire, @section,
@question_definition, @answer_type]) do |at| %&amp;gt;&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
created the required fields for them. I don't know better like doing it that way and btw it is described in the API that way:

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;fields_for(record_or_name_or_array, *args)
{|builder.new(object_name, object, self, options, block)| ...}
[...]Creates a scope around a specific model object like form_for,
but doesn&amp;#8216;t create the form tags themselves[...]&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-26T13:33:07+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-26T13:33:10+00:00</updated-at>
      <user-id type="integer">45363</user-id>
      <version type="integer">15</version>
      <user-name>Mark Vz</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">8406</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The code examples you give, seem to me as options for building a URL. So for the &#8216;action&#8217; option of a form tag.

And that is deprecated behaviour, as you can see on the ticket in which it was removed; #641. If you still feel the need to discuss this further I would suggest you do so on that ticket which is about the deprecation.</body>
      <body-html>&lt;div&gt;&lt;p&gt;The code examples you give, seem to me as options for building a
URL. So for the &amp;#8216;action&amp;#8217; option of a form tag.&lt;/p&gt;
&lt;p&gt;And that is deprecated behaviour, as you can see on the ticket
in which it was removed; &lt;a href=&quot;/projects/8994/tickets/641&quot; title=&quot;Ticket #641&quot;&gt;#641&lt;/a&gt;. If you still feel the need to discuss
this further I would suggest you do so on that ticket which is
about the deprecation.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-26T14:02:44+00:00</created-at>
      <creator-id type="integer">45363</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">1808</number>
      <permalink>fields_for-is-broken-for-nested-resources-since-22x</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>invalid</state>
      <tag>2.2 2.2.2 actionview fields_for form form_for form_helper helper nested nesting resource resources sub-resource</tag>
      <title>fields_for is broken for nested resources since 2.2.x</title>
      <updated-at type="datetime">2009-02-26T14:02:48+00:00</updated-at>
      <user-id type="integer">8406</user-id>
      <version type="integer">16</version>
      <user-name>Eloy Duran</user-name>
      <creator-name>Mark Vz</creator-name>
      <assigned-user-name>Eloy Duran</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1808</url>
      <priority-name nil="true"></priority-name>
      <milestone-title nil="true"></milestone-title>
    </version>
  </versions>
</ticket>
