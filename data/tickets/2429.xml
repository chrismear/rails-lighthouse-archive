<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-04-06T12:08:12+01:00</created-at>
  <creator-id type="integer">33356</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">71472</milestone-id>
  <number type="integer">2429</number>
  <permalink>problem-with-relative_url_root-rails-222</permalink>
  <priority type="integer">1581</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag>relative_url_root</tag>
  <title>Problem with relative_url_root (rails 2.2.2)</title>
  <updated-at type="datetime">2011-02-02T19:04:04+00:00</updated-at>
  <user-id type="integer">40272</user-id>
  <version type="integer">10</version>
  <user-name>Santiago Pastorino</user-name>
  <creator-name>gummybears</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
  <milestone-title>3.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>I am deploying 2 Rails apps on the same domain and address them
as www.domain.com/app1 and www.domain.com/app2

Version info
Rails 2.2.2, nginx 0.7.47 (ubuntu intrepid). 

Problem description 

I understood from the documentation I have to set
config.action_controller.relative_url_root in config/environment.rb
so the routing works. 

But now the problem is that my stylesheets/javascript/images
should be located in public/app1(app2) as all javascript_include_tag and stylesheet_link_tag prefixes the relative_url_root i.e
@@@ 
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; media=&quot;screen&quot; href=&quot;/app1/stylesheets/application.css?1238964891&quot;/&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;/app1/javascripts/swfobject.js?1238964891&quot;/&gt;
@@@ 

A quick and dirty fix is to put a symlink app1 in public to point to itself. 

Everything worked fine with Rails &lt; 2.2.2 where I didn't use
relative_url_root.</original-body>
  <latest-body>I am deploying 2 Rails apps on the same domain and address them
as www.domain.com/app1 and www.domain.com/app2

Version info
Rails 2.2.2, nginx 0.7.47 (ubuntu intrepid). 

Problem description 

I understood from the documentation I have to set
config.action_controller.relative_url_root in config/environment.rb
so the routing works. 

But now the problem is that my stylesheets/javascript/images
should be located in public/app1(app2) as all javascript_include_tag and stylesheet_link_tag prefixes the relative_url_root i.e
@@@ 
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; media=&quot;screen&quot; href=&quot;/app1/stylesheets/application.css?1238964891&quot;/&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;/app1/javascripts/swfobject.js?1238964891&quot;/&gt;
@@@ 

A quick and dirty fix is to put a symlink app1 in public to point to itself. 

Everything worked fine with Rails &lt; 2.2.2 where I didn't use
relative_url_root.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I am deploying 2 Rails apps on the same domain and address them
as &lt;a href=&quot;http://www.domain.com/app1&quot;&gt;www.domain.com/app1&lt;/a&gt; and
&lt;a href=&quot;http://www.domain.com/app2&quot;&gt;www.domain.com/app2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Version info Rails 2.2.2, nginx 0.7.47 (ubuntu intrepid).&lt;/p&gt;
&lt;p&gt;Problem description&lt;/p&gt;
&lt;p&gt;I understood from the documentation I have to set
config.action_controller.relative_url_root in config/environment.rb
so the routing works.&lt;/p&gt;
&lt;p&gt;But now the problem is that my stylesheets/javascript/images
should be located in public/app1(app2) as all
javascript_include_tag and stylesheet_link_tag prefixes the
relative_url_root i.e&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;link type=&amp;quot;text/css&amp;quot; rel=&amp;quot;stylesheet&amp;quot; media=&amp;quot;screen&amp;quot; href=&amp;quot;/app1/stylesheets/application.css?1238964891&amp;quot;/&amp;gt;

&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;/app1/javascripts/swfobject.js?1238964891&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A quick and dirty fix is to put a symlink app1 in public to
point to itself.&lt;/p&gt;
&lt;p&gt;Everything worked fine with Rails &amp;lt; 2.2.2 where I didn't use
relative_url_root.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am deploying 2 Rails apps on the same domain and address them
as www.domain.com/app1 and www.domain.com/app2

Version info
Rails 2.2.2, nginx 0.7.47 (ubuntu intrepid). 

Problem description 

I understood from the documentation I have to set
config.action_controller.relative_url_root in config/environment.rb
so the routing works. 

But now the problem is that my stylesheets/javascript/images
should be located in public/app1(app2) as all javascript_include_tag and stylesheet_link_tag prefixes the relative_url_root i.e
@@@ 
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; media=&quot;screen&quot; href=&quot;/app1/stylesheets/application.css?1238964891&quot;/&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;/app1/javascripts/swfobject.js?1238964891&quot;/&gt;
@@@ 

A quick and dirty fix is to put a symlink app1 in public to point to itself. 

Everything worked fine with Rails &lt; 2.2.2 where I didn't use
relative_url_root.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I am deploying 2 Rails apps on the same domain and address them
as &lt;a href=&quot;http://www.domain.com/app1&quot;&gt;www.domain.com/app1&lt;/a&gt; and
&lt;a href=&quot;http://www.domain.com/app2&quot;&gt;www.domain.com/app2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Version info Rails 2.2.2, nginx 0.7.47 (ubuntu intrepid).&lt;/p&gt;
&lt;p&gt;Problem description&lt;/p&gt;
&lt;p&gt;I understood from the documentation I have to set
config.action_controller.relative_url_root in config/environment.rb
so the routing works.&lt;/p&gt;
&lt;p&gt;But now the problem is that my stylesheets/javascript/images
should be located in public/app1(app2) as all
javascript_include_tag and stylesheet_link_tag prefixes the
relative_url_root i.e&lt;/p&gt;


&lt;pre&gt;&lt;code&gt;
&amp;lt;link type=&amp;quot;text/css&amp;quot; rel=&amp;quot;stylesheet&amp;quot; media=&amp;quot;screen&amp;quot; href=&amp;quot;/app1/stylesheets/application.css?1238964891&amp;quot;/&amp;gt;

&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;/app1/javascripts/swfobject.js?1238964891&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A quick and dirty fix is to put a symlink app1 in public to
point to itself.&lt;/p&gt;
&lt;p&gt;Everything worked fine with Rails &amp;lt; 2.2.2 where I didn't use
relative_url_root.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-04-06T12:08:12+01:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2009-04-06T12:08:17+01:00</updated-at>
      <user-id type="integer">33356</user-id>
      <version type="integer">1</version>
      <user-name>gummybears</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hello,

Same problem,Has anyone got the solution for this problem??


Thanks.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;Same problem,Has anyone got the solution for this problem??&lt;/p&gt;
&lt;p&gt;Thanks.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-05-13T13:42:31+01:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: 
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2009-05-13T13:42:33+01:00</updated-at>
      <user-id type="integer">56838</user-id>
      <version type="integer">2</version>
      <user-name>Abdallah</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I've attached a patch for writing of concatenated JS and CSS assets with relative_url_root:

When relative_url_root is in use, for example set to /foo, the :cache feature of javascript_include_tag breaks.  Instead of writing the bundle to public/javascripts/all.js, the AssetTagHelper tries to write
it to public/foo/javascripts/all.js.  The stylesheet_link_tag has a similar problem.

The problem seems to be that compute_public_path returns the path part of a URL to the resource, but the code assumes that is the same as it's path relative to public/.

Strip the superfluous relative_url_root from the path before attempting to write to it.

This patch was generated against rails 2.0.2.  But 2.3.4 seems to have the problem (just from reading the code; I didn't actually run it).  You can apply it with &quot;git am&quot; if you use Git, otherwise, I think patch -p1 should do the trick.

 .../lib/action_view/helpers/asset_tag_helper.rb    |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)</body>
      <body-html>&lt;div&gt;&lt;p&gt;I've attached a patch for writing of concatenated JS and CSS
assets with relative_url_root:&lt;/p&gt;
&lt;p&gt;When relative_url_root is in use, for example set to /foo, the
:cache feature of javascript_include_tag breaks. Instead of writing
the bundle to public/javascripts/all.js, the AssetTagHelper tries
to write&lt;br&gt;
it to public/foo/javascripts/all.js. The stylesheet_link_tag has a
similar problem.&lt;/p&gt;
&lt;p&gt;The problem seems to be that compute_public_path returns the
path part of a URL to the resource, but the code assumes that is
the same as it's path relative to public/.&lt;/p&gt;
&lt;p&gt;Strip the superfluous relative_url_root from the path before
attempting to write to it.&lt;/p&gt;
&lt;p&gt;This patch was generated against rails 2.0.2. But 2.3.4 seems to
have the problem (just from reading the code; I didn't actually run
it). You can apply it with &quot;git am&quot; if you use Git, otherwise, I
think patch -p1 should do the trick.&lt;/p&gt;
&lt;p&gt;.../lib/action_view/helpers/asset_tag_helper.rb | 10 ++++++++--
1 files changed, 8 insertions(+), 2 deletions(-)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-13T07:08:26+00:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2009-12-13T07:08:27+00:00</updated-at>
      <user-id type="integer">79546</user-id>
      <version type="integer">3</version>
      <user-name>Marcel M. Cary</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Re-reading the ticket description, I realize my patch addresses a different problem that actually doesn't seem to exist in more recent rails 2.3.4.  (This time by experimentation rather than trying to read the code.)

It seems that static assets are served via a different code path than the one that relative_url_root affects.  When I run rails with script/server --path=/foo, the static assets are served under /foo/stylesheets as you and the app expect.  But if I just set relative_url_root in environment.rb they the static assets are not served from where the app expects them.

Looking in commands/server.rb, it seems that when &quot;--path&quot; is not set, the server ignores relative_url_root, but when &quot;--path&quot; is set, the server sets relative_url_root to match.  It uses the value of &quot;--path&quot; to setup a rack component for server static files.  Perhaps when --path is not specified, server.rb should use the relative_url_root specified in environment.rb?  (See attached patch for an example.)

In any case, it seems you currently have to specifically tell whatever serves your static files (Apache or script/server) to mount public/ at a different URL path.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Re-reading the ticket description, I realize my patch addresses
a different problem that actually doesn't seem to exist in more
recent rails 2.3.4. (This time by experimentation rather than
trying to read the code.)&lt;/p&gt;
&lt;p&gt;It seems that static assets are served via a different code path
than the one that relative_url_root affects. When I run rails with
script/server --path=/foo, the static assets are served under
/foo/stylesheets as you and the app expect. But if I just set
relative_url_root in environment.rb they the static assets are not
served from where the app expects them.&lt;/p&gt;
&lt;p&gt;Looking in commands/server.rb, it seems that when &quot;--path&quot; is
not set, the server ignores relative_url_root, but when &quot;--path&quot; is
set, the server sets relative_url_root to match. It uses the value
of &quot;--path&quot; to setup a rack component for server static files.
Perhaps when --path is not specified, server.rb should use the
relative_url_root specified in environment.rb? (See attached patch
for an example.)&lt;/p&gt;
&lt;p&gt;In any case, it seems you currently have to specifically tell
whatever serves your static files (Apache or script/server) to
mount public/ at a different URL path.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-14T06:57:08+00:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2009-12-14T06:57:10+00:00</updated-at>
      <user-id type="integer">79546</user-id>
      <version type="integer">4</version>
      <user-name>Marcel M. Cary</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hrm... seems the attached patch didn't go through.  Here it is:

From 74459162597c39d408d535fcd5f50b049220310c Mon Sep 17 00:00:00 2001
From: Marcel Cary &lt;marcel@earth.care2.com&gt;
Date: Sun, 13 Dec 2009 22:55:01 -0800
Subject: [PATCH] Teach server command to use relative_url_root for static files

---
 vendor/rails/railties/lib/commands/server.rb |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/vendor/rails/railties/lib/commands/server.rb b/vendor/rails/railties/lib/commands/server.rb
index ebe34a4..6cbbe27 100644
--- a/vendor/rails/railties/lib/commands/server.rb
+++ b/vendor/rails/railties/lib/commands/server.rb
@@ -52,7 +52,6 @@ unless server
 end
 
 puts &quot;=&gt; Booting #{ActiveSupport::Inflector.demodulize(server)}&quot;
-puts &quot;=&gt; Rails #{Rails.version} application starting on http://#{options[:Host]}:#{options[:Port]}#{options[:path]}&quot;
 
 %w(cache pids sessions sockets).each do |dir_to_make|
   FileUtils.mkdir_p(File.join(RAILS_ROOT, 'tmp', dir_to_make))
@@ -86,12 +85,14 @@ else
 end
 
 if options[:path].nil?
-  map_path = &quot;/&quot;
+  map_path = ActionController::Base.relative_url_root || &quot;/&quot;
 else
   ActionController::Base.relative_url_root = options[:path]
   map_path = options[:path]
 end
 
+puts &quot;=&gt; Rails #{Rails.version} application starting on http://#{options[:Host]}:#{options[:Port]}#{map_path}&quot;
+
 app = Rack::Builder.new {
   use Rails::Rack::LogTailer unless options[:detach]
   use Rails::Rack::Debugger if options[:debugger]
-- 
1.6.4.4</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hrm... seems the attached patch didn't go through. Here it
is:&lt;/p&gt;
&lt;p&gt;From 74459162597c39d408d535fcd5f50b049220310c Mon Sep 17
00:00:00 2001&lt;br&gt;
From: Marcel Cary &lt;a href=
&quot;mailto:marcel@earth.care2.com&quot;&gt;marcel@earth.care2.com&lt;/a&gt;&lt;br&gt;
Date: Sun, 13 Dec 2009 22:55:01 -0800&lt;br&gt;
Subject: &lt;a href=&quot;/projects/8994/changesets/PATCH&quot; title=
&quot;Changeset [PATCH]&quot;&gt;[PATCH]&lt;/a&gt; Teach server command to use
relative_url_root for static files&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;vendor/rails/railties/lib/commands/server.rb | 5 +++-- 1 files
changed, 3 insertions(+), 2 deletions(-)&lt;/p&gt;
&lt;p&gt;diff --git a/vendor/rails/railties/lib/commands/server.rb
b/vendor/rails/railties/lib/commands/server.rb&lt;br&gt;
index ebe34a4..6cbbe27 100644&lt;br&gt;
--- a/vendor/rails/railties/lib/commands/server.rb +++
b/vendor/rails/railties/lib/commands/server.rb @@ -52,7 +52,6 @@
unless server end&lt;/p&gt;
&lt;p&gt;puts &quot;=&amp;gt; Booting
#{ActiveSupport::Inflector.demodulize(server)}&quot; -puts &quot;=&amp;gt; Rails
#{Rails.version} application starting on &lt;a href=
&quot;http://#{options[:Host]}:#{options[:Port]}#{options[:path]}&quot;&gt;http://#{options[:Host]}:#{options[:Port]}#{options[:path]}&lt;/a&gt;&quot;&lt;/p&gt;
&lt;p&gt;%w(cache pids sessions sockets).each do |dir_to_make|
FileUtils.mkdir_p(File.join(RAILS_ROOT, 'tmp', dir_to_make)) @@
-86,12 +85,14 @@ else end&lt;/p&gt;
&lt;p&gt;if options[:path].nil? - map_path = &quot;/&quot; + map_path =
ActionController::Base.relative_url_root || &quot;/&quot; else
ActionController::Base.relative_url_root = options[:path] map_path
= options[:path] end&lt;/p&gt;
&lt;p&gt;+puts &quot;=&amp;gt; Rails #{Rails.version} application starting on
&lt;a href=
&quot;http://#{options[:Host]}:#{options[:Port]}#{map_path}&quot;&gt;http://#{options[:Host]}:#{options[:Port]}#{map_path}&lt;/a&gt;&quot;
+ app = Rack::Builder.new { use Rails::Rack::LogTailer unless
options[:detach] use Rails::Rack::Debugger if options[:debugger] --
1.6.4.4&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-14T06:59:17+00:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2009-12-14T06:59:20+00:00</updated-at>
      <user-id type="integer">79546</user-id>
      <version type="integer">5</version>
      <user-name>Marcel M. Cary</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Yuck.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Yuck.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-12-14T07:00:26+00:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2009-12-14T07:00:27+00:00</updated-at>
      <user-id type="integer">79546</user-id>
      <version type="integer">6</version>
      <user-name>Marcel M. Cary</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>[[bulk edit](/projects/8994/bulk_edits/19097)]</body>
      <body-html>&lt;div&gt;&lt;p&gt;[&lt;a href=&quot;/projects/8994/bulk_edits/19097&quot;&gt;bulk edit&lt;/a&gt;]&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-04T18:48:45+01:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- 
:milestone: 9903
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2010-05-04T18:48:45+01:00</updated-at>
      <user-id type="integer">85</user-id>
      <version type="integer">7</version>
      <user-name>Jeremy Kemper</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Thanks for the patch, Marcel, it fixes the problem for me.

I am seeing this problem on rails 2.3.4, to me it means that script/server is completely broken... Is there a reason this shouldn't go into the next stable 2.3.x of Rails?

Since your patch was a little mangled, Marcel, I made up my own and will try to attach it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Thanks for the patch, Marcel, it fixes the problem for me.&lt;/p&gt;
&lt;p&gt;I am seeing this problem on rails 2.3.4, to me it means that
script/server is completely broken... Is there a reason this
shouldn't go into the next stable 2.3.x of Rails?&lt;/p&gt;
&lt;p&gt;Since your patch was a little mangled, Marcel, I made up my own
and will try to attach it.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2010-05-06T22:34:00+01:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2010-05-06T22:34:04+01:00</updated-at>
      <user-id type="integer">98222</user-id>
      <version type="integer">8</version>
      <user-name>Peter Pawlowski</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This issue has been automatically marked as stale because it has not been commented on for at least three months.

The resources of the Rails core team are limited, and so we are asking for your help. If you can still reproduce this error on the 3-0-stable branch or on master, please reply with all of the information you have about it and add &quot;[state:open]&quot; to your comment. This will reopen the ticket for review. Likewise, if you feel that this is a very important feature for Rails to include, please reply with your explanation so we can consider it.

Thank you for all your contributions, and we hope you will understand this step to focus our efforts where they are most helpful.</body>
      <body-html>&lt;div&gt;&lt;p&gt;This issue has been automatically marked as stale because it has
not been commented on for at least three months.&lt;/p&gt;
&lt;p&gt;The resources of the Rails core team are limited, and so we are
asking for your help. If you can still reproduce this error on the
3-0-stable branch or on master, please reply with all of the
information you have about it and add &quot;[state:open]&quot; to your
comment. This will reopen the ticket for review. Likewise, if you
feel that this is a very important feature for Rails to include,
please reply with your explanation so we can consider it.&lt;/p&gt;
&lt;p&gt;Thank you for all your contributions, and we hope you will
understand this step to focus our efforts where they are most
helpful.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2011-02-02T17:02:34+00:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:state: new
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">1581</priority>
      <project-id type="integer">8994</project-id>
      <state>open</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2011-02-02T19:03:58+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">9</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body nil="true"></body>
      <body-html nil="true"></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2011-02-02T17:02:36+00:00</created-at>
      <creator-id type="integer">33356</creator-id>
      <diffable-attributes type="yaml">--- 
:state: open
</diffable-attributes>
      <milestone-id type="integer">71472</milestone-id>
      <number type="integer">2429</number>
      <permalink>problem-with-relative_url_root-rails-222</permalink>
      <priority type="integer">1581</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>relative_url_root</tag>
      <title>Problem with relative_url_root (rails 2.2.2)</title>
      <updated-at type="datetime">2011-02-02T19:04:04+00:00</updated-at>
      <user-id type="integer">40272</user-id>
      <version type="integer">10</version>
      <user-name>Santiago Pastorino</user-name>
      <creator-name>gummybears</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/2429</url>
      <milestone-title>3.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>8021067924393e4de0703698876d6ebd9fefe509</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2010-05-06T22:34:00+01:00</created-at>
      <filename>ticket2429.patch</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">512795</id>
      <size type="integer">1015</size>
      <uploader-id type="integer">98222</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/512795/ticket2429.patch</url>
    </attachment>
  </attachments>
</ticket>
