<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer" nil="true"></assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2010-07-26T08:45:28+01:00</created-at>
  <creator-id type="integer">25838</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">590</number>
  <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
  <priority type="integer">3</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>stale</state>
  <tag nil="true"></tag>
  <title>allow setting :options in initialize_schema_migrations_table</title>
  <updated-at type="datetime">2010-11-07T16:57:24+00:00</updated-at>
  <user-id type="integer">94458</user-id>
  <version type="integer">15</version>
  <user-name>Jeff Kreeftmeijer</user-name>
  <creator-name>sebastian</creator-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
  <milestone-title>2.x</milestone-title>
  <priority-name>Low</priority-name>
  <original-body>I am using Rails 2.1/mysql-5.0.54 on a host supporting only the MyISAM engine.

Now, when I run

@@@
rake db:migrate VERSION=0
@@@

for the first time, rake tries creating the @@@schema_migrations@@@ table and fails with

@@@
(in /path/to/rails/app)
rake aborted!
Mysql::Error: Can't create table './dbname/schema_migrations.frm' (errno: 135): CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB

(See full trace by running task with --trace)
@@@

because @@@activerecord/lib/active_record/connection_adapters/mysql_adapter.rb@@@ does not allow setting @@@:options =&gt; &quot;ENGINE=MyISAM&quot; }@@@ as I did in the migrations.</original-body>
  <latest-body>I am using Rails 2.1/mysql-5.0.54 on a host supporting only the MyISAM engine.

Now, when I run

@@@
rake db:migrate VERSION=0
@@@

for the first time, rake tries creating the @@@schema_migrations@@@ table and fails with

@@@
(in /path/to/rails/app)
rake aborted!
Mysql::Error: Can't create table './dbname/schema_migrations.frm' (errno: 135): CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB

(See full trace by running task with --trace)
@@@

because @@@activerecord/lib/active_record/connection_adapters/mysql_adapter.rb@@@ does not allow setting @@@:options =&gt; &quot;ENGINE=MyISAM&quot; }@@@ as I did in the migrations.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
I am using Rails 2.1/mysql-5.0.54 on a host supporting only the MyISAM engine.
&lt;/p&gt;&lt;p&gt;
Now, when I run
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;&quot;&gt;rake db:migrate VERSION=0&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
for the first time, rake tries creating the @@@schema_migrations@@@ table and fails with
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;&quot;&gt;(in /path/to/rails/app)
rake aborted!
Mysql::Error: Can't create table './dbname/schema_migrations.frm' (errno: 135): CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB

(See full trace by running task with --trace)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
because @@@activerecord/lib/active_record/connection_adapters/mysql_adapter.rb@@@ does not allow setting @@@:options =&gt; &quot;ENGINE=MyISAM&quot; }@@@ as I did in the migrations.
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I am using Rails 2.1/mysql-5.0.54 on a host supporting only the MyISAM engine.

Now, when I run

@@@
rake db:migrate VERSION=0
@@@

for the first time, rake tries creating the @@@schema_migrations@@@ table and fails with

@@@
(in /path/to/rails/app)
rake aborted!
Mysql::Error: Can't create table './dbname/schema_migrations.frm' (errno: 135): CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB

(See full trace by running task with --trace)
@@@

because @@@activerecord/lib/active_record/connection_adapters/mysql_adapter.rb@@@ does not allow setting @@@:options =&gt; &quot;ENGINE=MyISAM&quot; }@@@ as I did in the migrations.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I am using Rails 2.1/mysql-5.0.54 on a host supporting only the MyISAM engine.
&lt;/p&gt;&lt;p&gt;
Now, when I run
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;&quot;&gt;rake db:migrate VERSION=0&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
for the first time, rake tries creating the @@@schema_migrations@@@ table and fails with
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;&quot;&gt;(in /path/to/rails/app)
rake aborted!
Mysql::Error: Can't create table './dbname/schema_migrations.frm' (errno: 135): CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB

(See full trace by running task with --trace)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
because @@@activerecord/lib/active_record/connection_adapters/mysql_adapter.rb@@@ does not allow setting @@@:options =&gt; &quot;ENGINE=MyISAM&quot; }@@@ as I did in the migrations.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-10T13:27:40+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-07-10T13:27:40+01:00</updated-at>
      <user-id type="integer">25838</user-id>
      <version type="integer">1</version>
      <user-name>sebastian</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I tried it out using Rails 2.1 with the following migration:
@@@ ruby
class CreateUsers &lt; ActiveRecord::Migration
  def self.up
    create_table(:users, :options =&gt; &quot;ENGINE=MyISAM&quot;) do |t|
      t.string :name

      t.timestamps
    end
  end

  def self.down
    drop_table :users
  end
end
@@@

This produces the following SQL:
@@@ sql
CREATE TABLE `users` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(255) default NULL,
  `created_at` datetime default NULL,
  `updated_at` datetime default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8
@@@

In short: I can't see the bug you described.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I tried it out using Rails 2.1 with the following migration:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;class CreateUsers &amp;lt; ActiveRecord::Migration
  def self.up
    create_table(:users, :options =&amp;gt; &amp;quot;ENGINE=MyISAM&amp;quot;) do |t|
      t.string :name

      t.timestamps
    end
  end

  def self.down
    drop_table :users
  end
end&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
This produces the following SQL:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;sql&quot;&gt;CREATE TABLE `users` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(255) default NULL,
  `created_at` datetime default NULL,
  `updated_at` datetime default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
In short: I can't see the bug you described.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-10T13:57:43+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: &quot;&quot;
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord mysql</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-07-10T13:57:43+01:00</updated-at>
      <user-id type="integer">18096</user-id>
      <version type="integer">2</version>
      <user-name>Clemens Kofler</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>The problem is the SQL creating the schema_migrations table:

@@@
CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
@@@

executed *before* any of the migrations, if the schema_migrations table does not yet exist:

@@@
$ mysql -u USER --password=PASS DB -e &quot;show tables&quot;
$ rake db:migrate
(in /path/to/rails/app)
rake aborted!
Mysql::Error: Can't create table './DB/schema_migrations.frm' (errno: 135): CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB

(See full trace by running task with --trace)
$ 
@@@

So, the schema_migrations table is created by activerecord and has nothing to do with migrations added to db/migrate.

What's missing is a way of controlling which MySQL engine to use for the *schema_migrations* table.

Better?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
The problem is the SQL creating the schema_migrations table:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;&quot;&gt;CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
executed &lt;strong&gt;before&lt;/strong&gt; any of the migrations, if the schema_migrations table does not yet exist:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;&quot;&gt;$ mysql -u USER --password=PASS DB -e &amp;quot;show tables&amp;quot;
$ rake db:migrate
(in /path/to/rails/app)
rake aborted!
Mysql::Error: Can't create table './DB/schema_migrations.frm' (errno: 135): CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB

(See full trace by running task with --trace)
$ &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
So, the schema_migrations table is created by activerecord and has nothing to do with migrations added to db/migrate.
&lt;/p&gt;&lt;p&gt;
What's missing is a way of controlling which MySQL engine to use for the &lt;strong&gt;schema_migrations&lt;/strong&gt; table.
&lt;/p&gt;&lt;p&gt;
Better?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-10T14:28:26+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord mysql</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-07-10T14:28:26+01:00</updated-at>
      <user-id type="integer">25838</user-id>
      <version type="integer">3</version>
      <user-name>sebastian</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Ah, I see. Yeah, that seems logical. I think I know how to fix this. I'll try to come up with a patch that you can then test.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Ah, I see. Yeah, that seems logical. I think I know how to fix this. I'll try to come up with a patch that you can then test.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-10T14:49:28+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord mysql</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-07-10T14:49:28+01:00</updated-at>
      <user-id type="integer">18096</user-id>
      <version type="integer">4</version>
      <user-name>Clemens Kofler</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Here it goes.

The patch doesn't break any exiting tests so I guess it should be fine. I have tested it and it looks good to me - of course, I have InnoDB enabled in my sys but all tables (including the schema_version) where created with MyISAM.

What you need to do is just add the &quot;engine&quot; option in your database.yml and set it to MyISAM. So for example your data for the dev environment would look like this:
@@@ yaml
development:
  adapter: mysql
  engine: MyISAM
  database: some_table
  username: some_user
  password: some_password
@@@

This uses SET STORAGE_ENGINE when the connection is established (like encoding uses SET NAMES) to set the default storage engine to whatever you define. If you want to manually override it in a migration, you can still use create_table(:whatever, :options =&gt; &quot;ENGINE=BDB&quot;) etc.

Feel free to test-drive it and leave a comment if something doesn't work. Since it doesn't break any existing functionality (at least not according to the tests), I guess this could maybe make it into core.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Here it goes.
&lt;/p&gt;&lt;p&gt;
The patch doesn't break any exiting tests so I guess it should be fine. I have tested it and it looks good to me - of course, I have InnoDB enabled in my sys but all tables (including the schema_version) where created with MyISAM.
&lt;/p&gt;&lt;p&gt;
What you need to do is just add the &quot;engine&quot; option in your database.yml and set it to MyISAM. So for example your data for the dev environment would look like this:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;development:
  adapter: mysql
  engine: MyISAM
  database: some_table
  username: some_user
  password: some_password&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
This uses SET STORAGE_ENGINE when the connection is established (like encoding uses SET NAMES) to set the default storage engine to whatever you define. If you want to manually override it in a migration, you can still use create_table(:whatever, :options =&gt; &quot;ENGINE=BDB&quot;) etc.
&lt;/p&gt;&lt;p&gt;
Feel free to test-drive it and leave a comment if something doesn't work. Since it doesn't break any existing functionality (at least not according to the tests), I guess this could maybe make it into core.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-10T15:19:35+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- 
:tag: activerecord mysql
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord enhancement mysql patch</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-07-10T15:19:35+01:00</updated-at>
      <user-id type="integer">18096</user-id>
      <version type="integer">5</version>
      <user-name>Clemens Kofler</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Sorry, my first post here, which patch? 

Is it in git? Or just not attached here?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
Sorry, my first post here, which patch?
&lt;/p&gt;&lt;p&gt;
Is it in git? Or just not attached here?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-10T16:21:24+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord enhancement mysql patch</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-07-10T16:21:24+01:00</updated-at>
      <user-id type="integer">25838</user-id>
      <version type="integer">6</version>
      <user-name>sebastian</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>In the right column, there's a section called &quot;attachments&quot;. The patch is called &quot;MySQLConfigStorageEngine.diff&quot;. If you need help applying it, you can refer to http://rails.lighthouseapp.com/projects/8994/sending-patches. 

If you don't have git or don't want to use git to apply the patch, you can easily just copy the lines that are affected by it because it's a relatively small patch - 4 new lines of code (including the documentation) and removing one method. Just open the .diff in your text editor to see what I've changed. If you need help, feel free to contact me in the #rubyonrails channel on IRC (nickname is clemensk).</body>
      <body-html>&lt;div&gt;&lt;p&gt;
In the right column, there's a section called &quot;attachments&quot;. The patch is called &quot;MySQLConfigStorageEngine.diff&quot;. If you need help applying it, you can refer to &lt;a href=&quot;http://rails.lighthouseapp.com/projects/8994/sending-patches&quot;&gt;http://rails.lighthouseapp.com/p...&lt;/a&gt;.
&lt;/p&gt;&lt;p&gt;
If you don't have git or don't want to use git to apply the patch, you can easily just copy the lines that are affected by it because it's a relatively small patch - 4 new lines of code (including the documentation) and removing one method. Just open the .diff in your text editor to see what I've changed. If you need help, feel free to contact me in the #rubyonrails channel on IRC (nickname is clemensk).
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-07-10T16:30:32+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag>activerecord enhancement mysql patch</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-07-10T16:30:32+01:00</updated-at>
      <user-id type="integer">18096</user-id>
      <version type="integer">7</version>
      <user-name>Clemens Kofler</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Staling out, please reopen if this is still a problem.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Staling out, please reopen if this is still a problem.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-10-28T16:24:01+00:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>activerecord enhancement mysql patch</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-10-28T16:24:03+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">8</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Not sure, but did the patch [1] Clemens provided go into Rails?

That did solve the problem, how do I make sure it goes into Rails?

[1] http://rails.lighthouseapp.com/attachments/31878/MySQLConfigStorageEngine.diff</body>
      <body-html>&lt;div&gt;&lt;p&gt;Not sure, but did the patch &lt;a href=&quot;/projects/8994/changesets/1&quot; title=&quot;Changeset #1&quot;&gt;[1]&lt;/a&gt; Clemens
provided go into Rails?&lt;/p&gt;
&lt;p&gt;That did solve the problem, how do I make sure it goes into
Rails?&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/projects/8994/changesets/1&quot; title=&quot;Changeset #1&quot;&gt;[1]&lt;/a&gt; &lt;a href=&quot;http://rails.lighthouseapp.com/attachments/31878/MySQLConfigStorageEngine.diff&quot;&gt;
http://rails.lighthouseapp.com/a...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-11-11T12:29:21+00:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>activerecord enhancement mysql patch</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-11-11T12:29:23+00:00</updated-at>
      <user-id type="integer">25838</user-id>
      <version type="integer">9</version>
      <user-name>sebastian</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I think I talked to Pratik back then (or was it Koz?) who told me that Rails fucks up in a thousand weird ways when used with MyISAM. So I guess applying this patch would not really be a good idea.

If it works for you, you could probably just use the code in an initializer to monkeypatch it in.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I think I talked to Pratik back then (or was it Koz?) who told
me that Rails fucks up in a thousand weird ways when used with
MyISAM. So I guess applying this patch would not really be a good
idea.&lt;/p&gt;
&lt;p&gt;If it works for you, you could probably just use the code in an
initializer to monkeypatch it in.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-11-11T12:33:52+00:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>activerecord enhancement mysql patch</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-11-11T12:33:55+00:00</updated-at>
      <user-id type="integer">18096</user-id>
      <version type="integer">10</version>
      <user-name>Clemens Kofler</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>It works for me (so far).

Does is make sense to update the activerecord documentation? Like adding a note saying that the Rails 'system tables' will only work with MyISAM?</body>
      <body-html>&lt;div&gt;&lt;p&gt;It works for me (so far).&lt;/p&gt;
&lt;p&gt;Does is make sense to update the activerecord documentation?
Like adding a note saying that the Rails 'system tables' will only
work with MyISAM?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-11-12T15:03:16+00:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag>activerecord enhancement mysql patch</tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2008-11-12T15:03:22+00:00</updated-at>
      <user-id type="integer">25838</user-id>
      <version type="integer">11</version>
      <user-name>sebastian</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-10-09T21:59:52+01:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- 
:priority: 0
:tag: activerecord enhancement mysql patch
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2010-10-09T21:59:57+01:00</updated-at>
      <user-id type="integer">14998</user-id>
      <version type="integer">13</version>
      <user-name>Ryan Bigg</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>Automatic cleanup of spam.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Automatic cleanup of spam.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2010-11-07T16:57:16+00:00</created-at>
      <creator-id type="integer">25838</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">590</number>
      <permalink>allow-setting-options-in-initialize_schema_migrations_table</permalink>
      <priority type="integer">3</priority>
      <project-id type="integer">8994</project-id>
      <state>stale</state>
      <tag nil="true"></tag>
      <title>allow setting :options in initialize_schema_migrations_table</title>
      <updated-at type="datetime">2010-11-07T16:57:24+00:00</updated-at>
      <user-id type="integer">94458</user-id>
      <version type="integer">15</version>
      <user-name>Jeff Kreeftmeijer</user-name>
      <creator-name>sebastian</creator-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/590</url>
      <milestone-title>2.x</milestone-title>
      <priority-name>Low</priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>db58e4addda5a6c358009827197a76cea8b48175</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-07-10T15:19:35+01:00</created-at>
      <filename>MySQLConfigStorageEngine.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">31878</id>
      <size type="integer">2463</size>
      <uploader-id type="integer">18096</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/31878/MySQLConfigStorageEngine.diff</url>
    </attachment>
  </attachments>
</ticket>
