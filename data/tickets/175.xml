<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">1</assigned-user-id>
  <attachments-count type="integer">1</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2008-05-13T03:05:52+01:00</created-at>
  <creator-id type="integer">120</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer" nil="true"></milestone-id>
  <number type="integer">175</number>
  <permalink>timewithzone-to_json-should-include-time-zone</permalink>
  <priority type="integer">14750</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>resolved</state>
  <tag>activesupport core_ext patch tested</tag>
  <title>TimeWithZone#to_json should include time zone</title>
  <updated-at type="datetime">2008-05-13T17:53:11+01:00</updated-at>
  <user-id type="integer">1</user-id>
  <version type="integer">6</version>
  <user-name>Rick</user-name>
  <creator-name>Daniel Morrison</creator-name>
  <assigned-user-name>Rick</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/175</url>
  <priority-name nil="true"></priority-name>
  <original-body>This patch includes the time zone information in the json representation for two reasons: consistency and usefulness.

Consistency: DateTime includes the zone, whereas Time does not:

@@@ ruby
&gt;&gt; Time.zone.now.to_json
=&gt; &quot;\&quot;2008-05-13T01:47:35Z\&quot;&quot;
&gt;&gt; Time.zone.now.to_datetime.to_json
=&gt; &quot;\&quot;2008-05-12T18:47:42-07:00\&quot;&quot;
@@@

Usefulness: Without including the zone offset, there is no way to figure out what zone the time was intended to be in.  You can always figure out UTC (and any other offset) but determining the original is impossible.</original-body>
  <latest-body>This patch includes the time zone information in the json representation for two reasons: consistency and usefulness.

Consistency: DateTime includes the zone, whereas Time does not:

@@@ ruby
&gt;&gt; Time.zone.now.to_json
=&gt; &quot;\&quot;2008-05-13T01:47:35Z\&quot;&quot;
&gt;&gt; Time.zone.now.to_datetime.to_json
=&gt; &quot;\&quot;2008-05-12T18:47:42-07:00\&quot;&quot;
@@@

Usefulness: Without including the zone offset, there is no way to figure out what zone the time was intended to be in.  You can always figure out UTC (and any other offset) but determining the original is impossible.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;
This patch includes the time zone information in the json representation for two reasons: consistency and usefulness.
&lt;/p&gt;&lt;p&gt;
Consistency: DateTime includes the zone, whereas Time does not:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; Time.zone.now.to_json
=&amp;gt; &amp;quot;\&amp;quot;2008-05-13T01:47:35Z\&amp;quot;&amp;quot;
&amp;gt;&amp;gt; Time.zone.now.to_datetime.to_json
=&amp;gt; &amp;quot;\&amp;quot;2008-05-12T18:47:42-07:00\&amp;quot;&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
Usefulness: Without including the zone offset, there is no way to figure out what zone the time was intended to be in.  You can always figure out UTC (and any other offset) but determining the original is impossible.
&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer" nil="true"></assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>This patch includes the time zone information in the json representation for two reasons: consistency and usefulness.

Consistency: DateTime includes the zone, whereas Time does not:

@@@ ruby
&gt;&gt; Time.zone.now.to_json
=&gt; &quot;\&quot;2008-05-13T01:47:35Z\&quot;&quot;
&gt;&gt; Time.zone.now.to_datetime.to_json
=&gt; &quot;\&quot;2008-05-12T18:47:42-07:00\&quot;&quot;
@@@

Usefulness: Without including the zone offset, there is no way to figure out what zone the time was intended to be in.  You can always figure out UTC (and any other offset) but determining the original is impossible.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
This patch includes the time zone information in the json representation for two reasons: consistency and usefulness.
&lt;/p&gt;&lt;p&gt;
Consistency: DateTime includes the zone, whereas Time does not:
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&amp;gt;&amp;gt; Time.zone.now.to_json
=&amp;gt; &amp;quot;\&amp;quot;2008-05-13T01:47:35Z\&amp;quot;&amp;quot;
&amp;gt;&amp;gt; Time.zone.now.to_datetime.to_json
=&amp;gt; &amp;quot;\&amp;quot;2008-05-12T18:47:42-07:00\&amp;quot;&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
Usefulness: Without including the zone offset, there is no way to figure out what zone the time was intended to be in.  You can always figure out UTC (and any other offset) but determining the original is impossible.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-13T03:05:52+01:00</created-at>
      <creator-id type="integer">120</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">175</number>
      <permalink>timewithzone-to_json-should-include-time-zone</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>TimeWithZone#to_json should include time zone</title>
      <updated-at type="datetime">2008-05-13T03:05:52+01:00</updated-at>
      <user-id type="integer">120</user-id>
      <version type="integer">1</version>
      <user-name>Daniel Morrison</user-name>
      <creator-name>Daniel Morrison</creator-name>
      <assigned-user-name nil="true"></assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/175</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>This is a good catch -- we should make the output of #to_json consistent across Time, DateTime, and TimeWithZone instances. 

The outstanding question is, is there a reason to output json times in UTC?

In the changeset that added ActiveSupport.use_standard_json_time_format, Time is converted to UTC before being serialized, whereas DateTime is not:
http://dev.rubyonrails.org/changeset/9203

ISO 8601 allows time zone offsets other than UTC:
http://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators

...so I'm not sure why Time #to_json is outputting UTC right now.

Rick?</body>
      <body-html>&lt;div&gt;&lt;p&gt;
This is a good catch -- we should make the output of #to_json consistent across Time, DateTime, and TimeWithZone instances.
&lt;/p&gt;&lt;p&gt;
The outstanding question is, is there a reason to output json times in UTC?
&lt;/p&gt;&lt;p&gt;
In the changeset that added ActiveSupport.use_standard_json_time_format, Time is converted to UTC before being serialized, whereas DateTime is not:
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://dev.rubyonrails.org/changeset/9203&quot;&gt;http://dev.rubyonrails.org/chang...&lt;/a&gt;
&lt;/p&gt;&lt;p&gt;
ISO 8601 allows time zone offsets other than UTC:
&lt;/p&gt;&lt;p&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators&quot;&gt;http://en.wikipedia.org/wiki/ISO...&lt;/a&gt;
&lt;/p&gt;&lt;p&gt;
...so I'm not sure why Time #to_json is outputting UTC right now.
&lt;/p&gt;&lt;p&gt;
Rick?
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-13T14:21:15+01:00</created-at>
      <creator-id type="integer">120</creator-id>
      <diffable-attributes type="yaml">--- 
:assigned_user: 
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">175</number>
      <permalink>timewithzone-to_json-should-include-time-zone</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>TimeWithZone#to_json should include time zone</title>
      <updated-at type="datetime">2008-05-13T14:21:15+01:00</updated-at>
      <user-id type="integer">15783</user-id>
      <version type="integer">2</version>
      <user-name>Geoff Buesing</user-name>
      <creator-name>Daniel Morrison</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/175</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>My thought is simply that including the offset gives you more meaningful data, and you can easily convert to UTC if you want it.</body>
      <body-html>&lt;div&gt;&lt;p&gt;
My thought is simply that including the offset gives you more meaningful data, and you can easily convert to UTC if you want it.
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-13T15:22:36+01:00</created-at>
      <creator-id type="integer">120</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">175</number>
      <permalink>timewithzone-to_json-should-include-time-zone</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>TimeWithZone#to_json should include time zone</title>
      <updated-at type="datetime">2008-05-13T15:22:36+01:00</updated-at>
      <user-id type="integer">120</user-id>
      <version type="integer">3</version>
      <user-name>Daniel Morrison</user-name>
      <creator-name>Daniel Morrison</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/175</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>I thought it was pretty common practice to use UTC.  But if this is what the people want, then so be it!</body>
      <body-html>&lt;div&gt;&lt;p&gt;
I thought it was pretty common practice to use UTC.  But if this is what the people want, then so be it!
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-13T17:50:27+01:00</created-at>
      <creator-id type="integer">120</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">175</number>
      <permalink>timewithzone-to_json-should-include-time-zone</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>TimeWithZone#to_json should include time zone</title>
      <updated-at type="datetime">2008-05-13T17:50:27+01:00</updated-at>
      <user-id type="integer">1</user-id>
      <version type="integer">4</version>
      <user-name>Rick</user-name>
      <creator-name>Daniel Morrison</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/175</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body>&quot;shazzam&quot;:http://github.com/rails/rails/commit/f498f221bdd88a04458f56ee917c360bca833e94</body>
      <body-html>&lt;div&gt;&lt;p&gt;
&lt;a href=&quot;http://github.com/rails/rails/commit/f498f221bdd88a04458f56ee917c360bca833e94&quot;&gt;shazzam&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2008-05-13T17:52:33+01:00</created-at>
      <creator-id type="integer">120</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">175</number>
      <permalink>timewithzone-to_json-should-include-time-zone</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>TimeWithZone#to_json should include time zone</title>
      <updated-at type="datetime">2008-05-13T17:52:33+01:00</updated-at>
      <user-id type="integer">1</user-id>
      <version type="integer">5</version>
      <user-name>Rick</user-name>
      <creator-name>Daniel Morrison</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/175</url>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">1</assigned-user-id>
      <attachments-count type="integer">1</attachments-count>
      <body></body>
      <body-html></body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2008-05-13T17:53:11+01:00</created-at>
      <creator-id type="integer">120</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer" nil="true"></milestone-id>
      <number type="integer">175</number>
      <permalink>timewithzone-to_json-should-include-time-zone</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>resolved</state>
      <tag nil="true"></tag>
      <title>TimeWithZone#to_json should include time zone</title>
      <updated-at type="datetime">2008-05-13T17:53:11+01:00</updated-at>
      <user-id type="integer">1</user-id>
      <version type="integer">6</version>
      <user-name>Rick</user-name>
      <creator-name>Daniel Morrison</creator-name>
      <assigned-user-name>Rick</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/175</url>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
  <attachments type="array">
    <attachment type="Attachment">
      <code>90d67c26095fbf2da5732d3a19dd4164f046de5e</code>
      <content-type>text/plain</content-type>
      <created-at type="datetime">2008-05-13T03:05:52+01:00</created-at>
      <filename>timewithzone-offset-in-tojson.diff</filename>
      <height type="integer" nil="true"></height>
      <id type="integer">22630</id>
      <size type="integer">1672</size>
      <uploader-id type="integer">120</uploader-id>
      <width type="integer" nil="true"></width>
      <url>http://rails.lighthouseapp.com/attachments/22630/timewithzone-offset-in-tojson.diff</url>
    </attachment>
  </attachments>
</ticket>
