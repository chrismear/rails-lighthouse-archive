<?xml version="1.0" encoding="UTF-8"?>
<ticket>
  <assigned-user-id type="integer">424</assigned-user-id>
  <attachments-count type="integer">0</attachments-count>
  <closed type="boolean">true</closed>
  <created-at type="datetime">2009-02-05T16:50:40+00:00</created-at>
  <creator-id type="integer">19965</creator-id>
  <milestone-due-on type="datetime" nil="true"></milestone-due-on>
  <milestone-id type="integer">9903</milestone-id>
  <number type="integer">1884</number>
  <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
  <priority type="integer">1115</priority>
  <project-id type="integer">8994</project-id>
  <raw-data type="binary" nil="true" encoding="base64"></raw-data>
  <state>wontfix</state>
  <tag nil="true"></tag>
  <title>ActionView::Base @_render_stack is not being filled on edge</title>
  <updated-at type="datetime">2009-02-05T22:30:19+00:00</updated-at>
  <user-id type="integer">19965</user-id>
  <version type="integer">7</version>
  <user-name>Jos&#233; Valim</user-name>
  <creator-name>Jos&#233; Valim</creator-name>
  <assigned-user-name>Joshua Peek</assigned-user-name>
  <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
  <milestone-title>2.x</milestone-title>
  <priority-name nil="true"></priority-name>
  <original-body>I'm the developer of Rails Footnotes plugin and I need to know the location of the template being rendered.

I've put a debugger at the end of process method on ActionController::Base, and then called:

  @template.template

Which returned nil, Since the template method give me the last object in the @_render_stack variable, I've checked and I can't actually see where the @_render_stack is being filled. It's always empty.</original-body>
  <latest-body>I'm the developer of Rails Footnotes plugin and I need to know the location of the template being rendered.

I've put a debugger at the end of process method on ActionController::Base, and then called:

  @template.template

Which returned nil, Since the template method give me the last object in the @_render_stack variable, I've checked and I can't actually see where the @_render_stack is being filled. It's always empty.</latest-body>
  <original-body-html>&lt;div&gt;&lt;p&gt;I'm the developer of Rails Footnotes plugin and I need to know
the location of the template being rendered.&lt;/p&gt;
&lt;p&gt;I've put a debugger at the end of process method on
ActionController::Base, and then called:&lt;/p&gt;
&lt;p&gt;@template.template&lt;/p&gt;
&lt;p&gt;Which returned nil, Since the template method give me the last
object in the @&lt;em&gt;render_stack variable, I've checked and I can't
actually see where the @&lt;/em&gt;render_stack is being filled. It's
always empty.&lt;/p&gt;&lt;/div&gt;</original-body-html>
  <versions type="array">
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I'm the developer of Rails Footnotes plugin and I need to know the location of the template being rendered.

I've put a debugger at the end of process method on ActionController::Base, and then called:

  @template.template

Which returned nil, Since the template method give me the last object in the @_render_stack variable, I've checked and I can't actually see where the @_render_stack is being filled. It's always empty.</body>
      <body-html>&lt;div&gt;&lt;p&gt;I'm the developer of Rails Footnotes plugin and I need to know
the location of the template being rendered.&lt;/p&gt;
&lt;p&gt;I've put a debugger at the end of process method on
ActionController::Base, and then called:&lt;/p&gt;
&lt;p&gt;@template.template&lt;/p&gt;
&lt;p&gt;Which returned nil, Since the template method give me the last
object in the @&lt;em&gt;render_stack variable, I've checked and I can't
actually see where the @&lt;/em&gt;render_stack is being filled. It's
always empty.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">false</closed>
      <created-at type="datetime">2009-02-05T16:50:40+00:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1884</number>
      <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>new</state>
      <tag nil="true"></tag>
      <title>ActionView::Base @_render_stack is not being filled on edge</title>
      <updated-at type="datetime">2009-02-05T16:50:42+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">1</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Using @template always points the the current template being rendered. So after you return to the controller, no template is &quot;currently&quot; being render. It is only for use inside the template.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Using @template always points the the current template being
rendered. So after you return to the controller, no template is
&quot;currently&quot; being render. It is only for use inside the
template.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-05T21:35:05+00:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- 
:state: new
</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1884</number>
      <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag nil="true"></tag>
      <title>ActionView::Base @_render_stack is not being filled on edge</title>
      <updated-at type="datetime">2009-02-05T21:35:09+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">2</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>So there is any way on Rails 2.3, without monkey patching, to know which template was rendered? I need its filename... :)</body>
      <body-html>&lt;div&gt;&lt;p&gt;So there is any way on Rails 2.3, without monkey patching, to
know which template was rendered? I need its filename... :)&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-05T21:38:19+00:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1884</number>
      <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag nil="true"></tag>
      <title>ActionView::Base @_render_stack is not being filled on edge</title>
      <updated-at type="datetime">2009-02-05T21:38:20+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">3</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>We'll its hard to say &quot;which template was rendered&quot; since most templates rendered other nested templates. You probably don't want the &quot;last&quot; template cause that could be some partial, I guess your looking for the &quot;first&quot; rendered template, but that isn't directly known by AC.</body>
      <body-html>&lt;div&gt;&lt;p&gt;We'll its hard to say &quot;which template was rendered&quot; since most
templates rendered other nested templates. You probably don't want
the &quot;last&quot; template cause that could be some partial, I guess your
looking for the &quot;first&quot; rendered template, but that isn't directly
known by AC.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-05T22:05:59+00:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1884</number>
      <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag nil="true"></tag>
      <title>ActionView::Base @_render_stack is not being filled on edge</title>
      <updated-at type="datetime">2009-02-05T22:06:00+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">4</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Makes sense! :)
What I want was usually kept in @_first_render, but it's long gone right?</body>
      <body-html>&lt;div&gt;&lt;p&gt;Makes sense! :) What I want was usually kept in @_first_render,
but it's long gone right?&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-05T22:07:16+00:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1884</number>
      <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag nil="true"></tag>
      <title>ActionView::Base @_render_stack is not being filled on edge</title>
      <updated-at type="datetime">2009-02-05T22:07:18+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">5</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>Hrm, I was under the impression that was a testing only hack.

Just curious why you need this. Then we should consider adding this as a public feature for controllers.</body>
      <body-html>&lt;div&gt;&lt;p&gt;Hrm, I was under the impression that was a testing only
hack.&lt;/p&gt;
&lt;p&gt;Just curious why you need this. Then we should consider adding
this as a public feature for controllers.&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-05T22:11:59+00:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1884</number>
      <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag nil="true"></tag>
      <title>ActionView::Base @_render_stack is not being filled on edge</title>
      <updated-at type="datetime">2009-02-05T22:12:03+00:00</updated-at>
      <user-id type="integer">424</user-id>
      <version type="integer">6</version>
      <user-name>Joshua Peek</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
    <version type="Ticket::Version">
      <assigned-user-id type="integer">424</assigned-user-id>
      <attachments-count type="integer">0</attachments-count>
      <body>I use it in Rails Footnotes plugin. It adds some links at the end of each view, which makes possible to open your controller or your view file in your editor (Textmate, for example) with just one click. It also adds some debug information, as queries, filters, etc.

I was using the template in @_first_render to get the view filename to create the link.

Screenshot here:

http://1.bp.blogspot.com/_CVPxcHN_RkQ/SMcnsLdL8hI/AAAAAAAAAGc/khgbjSm-veg/s1600-h/footnotes_env.PNG

Github here:

http://github.com/josevalim/rails-footnotes/tree/master</body>
      <body-html>&lt;div&gt;&lt;p&gt;I use it in Rails Footnotes plugin. It adds some links at the
end of each view, which makes possible to open your controller or
your view file in your editor (Textmate, for example) with just one
click. It also adds some debug information, as queries, filters,
etc.&lt;/p&gt;
&lt;p&gt;I was using the template in @_first_render to get the view
filename to create the link.&lt;/p&gt;
&lt;p&gt;Screenshot here:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://1.bp.blogspot.com/_CVPxcHN_RkQ/SMcnsLdL8hI/AAAAAAAAAGc/khgbjSm-veg/s1600-h/footnotes_env.PNG&quot;&gt;
http://1.bp.blogspot.com/_CVPxcH...&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Github here:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/josevalim/rails-footnotes/tree/master&quot;&gt;http://github.com/josevalim/rail...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</body-html>
      <closed type="boolean">true</closed>
      <created-at type="datetime">2009-02-05T22:30:15+00:00</created-at>
      <creator-id type="integer">19965</creator-id>
      <diffable-attributes type="yaml">--- {}

</diffable-attributes>
      <milestone-id type="integer">9903</milestone-id>
      <number type="integer">1884</number>
      <permalink>actionviewbase-_render_stack-is-not-being-filled-on-edge</permalink>
      <priority type="integer">0</priority>
      <project-id type="integer">8994</project-id>
      <state>wontfix</state>
      <tag nil="true"></tag>
      <title>ActionView::Base @_render_stack is not being filled on edge</title>
      <updated-at type="datetime">2009-02-05T22:30:19+00:00</updated-at>
      <user-id type="integer">19965</user-id>
      <version type="integer">7</version>
      <user-name>Jos&#233; Valim</user-name>
      <creator-name>Jos&#233; Valim</creator-name>
      <assigned-user-name>Joshua Peek</assigned-user-name>
      <url>http://rails.lighthouseapp.com/projects/8994/tickets/1884</url>
      <milestone-title>2.x</milestone-title>
      <priority-name nil="true"></priority-name>
    </version>
  </versions>
</ticket>
